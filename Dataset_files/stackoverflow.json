{
  "items": [
    {
      "tags": ["neo4j", "neodash"],
      "owner": {
        "reputation": 288,
        "user_id": 2482876,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://www.gravatar.com/avatar/a2cb78d3a6e0dfdd646b40802e2d93a8?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "user2482876",
        "link": "https://stackoverflow.com/users/2482876/user2482876"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 6,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1707325046,
      "creation_date": 1707325046,
      "question_id": 77956604,
      "share_link": "https://stackoverflow.com/q/77956604",
      "body_markdown": "For a given neo4j server at work, we have multiple database using the same schema. I would like to be able to quickly change the queried database of my neo4j neodash dashboard, by right now, the only way of changing DB that I see is via the edit menu of each card, meaning I need to edit each ones every time I want to change DB.\r\n\r\nIs there a way in the interface to quickly change between DB for a given neodash?",
      "link": "https://stackoverflow.com/questions/77956604/how-to-change-database-for-all-cards-in-a-neodash-dashboard",
      "title": "How to change database for all cards in a neodash dashboard"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707321185,
          "creation_date": 1707321185,
          "answer_id": 77956188,
          "question_id": 77956127,
          "share_link": "https://stackoverflow.com/a/77956188",
          "body_markdown": "Try to set like this:\r\n```\r\nMATCH (n:NodeA),(additionalDate:AdditionalDate)\r\nWHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\nAND (additionalDate.DateType = &quot;1&quot;)\r\nCREATE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\nSET additionalDateOf.Value = &quot;2024-02-06T11:16:02.09Z&quot;\r\n```\r\nFor:\r\n```\r\nMERGE (n:NodeA {Id:&quot;xxxx1111xxxx11&quot;})\r\nMERGE (additionalDate:AdditionalDate {DateType:&quot;1&quot;}) \r\n```\r\nIf I add a return to the query above I get:\r\n```\r\n╒═══════════════════════════════╤═════════════════════════════════╤══════════════════════════════════════════════════════╕\r\n│n                              │additionalDate                   │additionalDateOf                                      │\r\n╞═══════════════════════════════╪═════════════════════════════════╪══════════════════════════════════════════════════════╡\r\n│(:NodeA {Id: &quot;xxxx1111xxxx11&quot;})│(:AdditionalDate {DateType: &quot;1&quot;})│[:AdditionalDateOf {Value: &quot;2024-02-06T11:16:02.09Z&quot;}]│\r\n└───────────────────────────────┴─────────────────────────────────┴──────────────────────────────────────────────────────┘\r\n```",
          "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j/77956188#77956188",
          "title": "Create Node and Set a value in a relationship Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707322351,
          "creation_date": 1707322351,
          "answer_id": 77956303,
          "question_id": 77956127,
          "share_link": "https://stackoverflow.com/a/77956303",
          "body_markdown": "As @nimrod-serok suggests, you can use the dot property reference syntax to set the `Value` property of `additionalDateOf`. \r\n\r\nAlternatively, you can just remove the double quotes from the key:\r\n```lang-cypher\r\nMATCH (n:Node),(additionalDate:AdditionalDate)\r\nWHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\nAND (additionalDate.DateType = &quot;1&quot;)\r\nCREATE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\nSET additionalDateOf = {\r\n  Value: &quot;2024-02-06T11:16:02.09Z&quot;\r\n}\r\n```\r\nThe property key-values you are assigning to the relationship are a map where the keys are identifiers. You were using the JSON data format where the keys are specified as strings.\r\n\r\nAs a third option, you can inline the property specification in the `CREATE` clause:\r\n```lang-cypher\r\nMATCH (n:Node),(additionalDate:AdditionalDate)\r\nWHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\nAND (additionalDate.DateType = &quot;1&quot;)\r\nCREATE (additionalDate)-[additionalDateOf:AdditionalDateOf \r\n                          {Value: &quot;2024-02-06T11:16:02.09Z&quot;}]-&gt;(n)\r\n```",
          "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j/77956303#77956303",
          "title": "Create Node and Set a value in a relationship Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707324404,
          "creation_date": 1707324404,
          "answer_id": 77956529,
          "question_id": 77956127,
          "share_link": "https://stackoverflow.com/a/77956529",
          "body_markdown": "To add to @FinbarGood&#39;s answer, you may want to use [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/) instead of [CREATE](https://neo4j.com/docs/cypher-manual/current/clauses/create/) in order to avoid creating duplicate relationships:\r\n\r\n    MATCH (n:Node), (additionalDate:AdditionalDate)\r\n    WHERE (n.Id = &quot;xxxx1111xxxx11&quot;) AND (additionalDate.DateType = &quot;1&quot;)\r\n    MERGE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\n    ON CREATE\r\n      SET additionalDateOf = {\r\n        Value: &quot;2024-02-06T11:16:02.09Z&quot;\r\n      }",
          "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j/77956529#77956529",
          "title": "Create Node and Set a value in a relationship Neo4j"
        }
      ],
      "owner": {
        "reputation": 99,
        "user_id": 1786078,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://www.gravatar.com/avatar/88aedef24b34273cb2147750cf145339?s=256&d=identicon&r=PG",
        "display_name": "cacharry",
        "link": "https://stackoverflow.com/users/1786078/cacharry"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 16,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1707324404,
      "creation_date": 1707320711,
      "question_id": 77956127,
      "share_link": "https://stackoverflow.com/q/77956127",
      "body_markdown": "I am trying to create a node and add a new relationship setting a value but I keep on getting the same error every time:\r\n\r\n    Invalid input &#39;&quot;&#39;: expected whitespace, comment, an identifier, UnsignedDecimalInteger, a property key name or &#39;}&#39; (line 6, column 3 (offset: 263))\r\n    &quot;  &quot;Value&quot;: &quot;2024-02-06T11:16:02.09Z&quot;&quot;\r\n\r\n\r\nThis is my query, can anyone please tell me what am I doing wrong? If I send this query in code, then it runs successfully, I can&#39;t determined what is wrong with this.\r\n\r\nMany thanks.\r\n\r\n   \r\n\r\n    MATCH (n:Node),(additionalDate:AdditionalDate)\r\n    WHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\n    AND (additionalDate.DateType = &quot;1&quot;)\r\n    CREATE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\n    SET additionalDateOf = {\r\n      &quot;Value&quot;: &quot;2024-02-06T11:16:02.09Z&quot;\r\n    }\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j",
      "title": "Create Node and Set a value in a relationship Neo4j"
    },
    {
      "tags": ["neo4j", "langchain", "vector-search"],
      "owner": {
        "reputation": 1,
        "user_id": 23189309,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocI3IicYrR1Mwq7XzhedMEcs5urFScbuKgHl-Mej7Q3H=k-s256",
        "display_name": "Stetco Oana",
        "link": "https://stackoverflow.com/users/23189309/stetco-oana"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1707324015,
      "creation_date": 1707297322,
      "last_edit_date": 1707324015,
      "question_id": 77953473,
      "share_link": "https://stackoverflow.com/q/77953473",
      "body_markdown": "I am using LangChain&#39;s [Neo4j Vector Index](https://python.langchain.com/docs/integrations/vectorstores/neo4jvector), and its `Neo4jVector.from_existing_index` function.\r\n\r\nThis is an example I found for the structure:\r\n\r\n```\r\nmovie_plot_vector = Neo4jVector.from_existing_index(\r\n    embedding_provider,\r\n    url=&quot;url&quot;,\r\n    username=&quot;neo4j&quot;,\r\n    password=&quot;pasword&quot;,\r\n    index_name=&quot;customerIndex&quot;,\r\n    embedding_node_property=&quot;embedding_customer_name&quot;,\r\n    text_node_property=&quot;customer_name&quot;,\r\n)\r\n\r\nplot_retriever = RetrievalQA.from_llm(\r\n    llm=llm,\r\n    retriever=movie_plot_vector.as_retriever(),\r\n    verbose=True,\r\n    return_source_documents=True\r\n)\r\n```\r\n\r\nI want to know if there is a way to search on multiple indexes, what I would imagine this would look like:\r\n\r\n```\r\nmovie_plot_vector = Neo4jVector.from_existing_index(\r\n    embedding_provider,\r\n    url=&quot;url&quot;,\r\n    username=&quot;neo4j&quot;,\r\n    password=&quot;pasword&quot;,\r\n    index_name=[&quot;customerIndex&quot;,&quot;problemIndex&quot;]\r\n    embedding_node_property=[&quot;embedding_customer_name&quot;,&quot;embedding_problem&quot;]\r\n    text_node_property=[&quot;customer_name&quot;,&quot;problem_description&quot;]\r\n)\r\n\r\nplot_retriever = RetrievalQA.from_llm(\r\n    llm=llm,\r\n    retriever=movie_plot_vector.as_retriever(),\r\n    verbose=True,\r\n    return_source_documents=True\r\n)\r\n```\r\n\r\n\r\n\r\n\r\n\r\nOr is there another function from Neo4jVector which does what I need? Can anyone guide me to find a solution please?",
      "link": "https://stackoverflow.com/questions/77953473/neo4jvector-retrieval-from-multiple-indexes",
      "title": "Neo4jVector retrieval from multiple indexes"
    },
    {
      "tags": [
        "neo4j",
        "cypher",
        "graph-databases",
        "neo4j-apoc",
        "graph-data-science"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707220211,
          "post_id": 77946019,
          "comment_id": 137417071,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137417071_77946019"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 20343725,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
            "display_name": "Alp Buğra Aker",
            "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707221259,
          "post_id": 77946019,
          "comment_id": 137417269,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137417269_77946019"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707251694,
          "post_id": 77946019,
          "comment_id": 137422924,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137422924_77946019"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 20343725,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
            "display_name": "Alp Buğra Aker",
            "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1707293958,
          "post_id": 77946019,
          "comment_id": 137427192,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137427192_77946019"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 20343725,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
        "display_name": "Alp Buğra Aker",
        "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
      },
      "last_editor": {
        "reputation": 13,
        "user_id": 20343725,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
        "display_name": "Alp Buğra Aker",
        "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1707294113,
      "creation_date": 1707205669,
      "last_edit_date": 1707294113,
      "question_id": 77946019,
      "share_link": "https://stackoverflow.com/q/77946019",
      "body_markdown": "I have a query like I wrote below. I couldn&#39;t solve the error I gave below even after a lot of effort. I encounter this error when I do any sorting operation. But not always, in specific cases. I think sometimes my query doesn&#39;t return Double(NaN) values most of the time, so I rarely encounter this error.\r\n\r\n\r\n```\r\nMATCH (news:News {newsId: &quot;/infografik/jurnalist/turkiye-sma-hastaligi-icin-yeni-adimlar-atiyor-26685&quot;})\r\nWITH news\r\nWHERE news.cleanTitle IS NOT NULL\r\n\r\nMATCH (otherNews:News {category: news.category})\r\nWHERE news &lt;&gt; otherNews AND otherNews.cleanTitle IS NOT NULL\r\n\r\nWITH otherNews,\r\n     apoc.text.sorensenDiceSimilarity(news.cleanTitle, otherNews.cleanTitle) AS sorensen\r\nORDER BY sorensen DESC\r\nLIMIT 10\r\nRETURN otherNews.title, sorensen, otherNews.category;\r\n```\r\n\r\nError:\r\n\r\n```\r\nNeo.ClientError.Statement.TypeError Wrong argument type: Can&#39;t coerce Double(NaN) to String\r\n```\r\n\r\n\r\n\r\nI want to see results sorted correctly. When I don&#39;t sort, I can see the results without any problems. But I need the sorted version.\r\nI tried converting the Sorensen value to string, eliminating Null or NaN values. But I was not successful.\r\n\r\nEdit:\r\n\r\nI saw that the error was resolved when I placed the &quot;LIMIT 10&quot; line above the &quot;RETURN&quot; line. But this time the results were very inconsistent. If I don&#39;t set any limits, I still encounter the same error. I can increase my limit amount up to a certain number depending on the data I use. As I get closer to the limit I can reach, the accuracy of my returned data increases. How can I overcome this problem?\r\n\r\nFix:\r\n\r\nChange to this piece of code solved my problem. Thanks to @Finbar Good.\r\n\r\n    apoc.text.sorensenDiceSimilarity(toString(news.cleanTitle), toString(otherNews.cleanTitle))",
      "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue",
      "title": "Neo4j cypher query Double(NaN) issue"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 23351570,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/cf368d530acb206142855796bd108274?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "da_ny",
                "link": "https://stackoverflow.com/users/23351570/da-ny"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1707187197,
              "post_id": 77944207,
              "comment_id": 137412888,
              "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together/77944207#comment137412888_77944207"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 23351570,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/cf368d530acb206142855796bd108274?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "da_ny",
                "link": "https://stackoverflow.com/users/23351570/da-ny"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1707192385,
              "post_id": 77944207,
              "comment_id": 137413325,
              "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together/77944207#comment137413325_77944207"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1707192356,
          "last_edit_date": 1707192356,
          "creation_date": 1707170093,
          "answer_id": 77944207,
          "question_id": 77944096,
          "share_link": "https://stackoverflow.com/a/77944207",
          "body_markdown": "You can use two [CALL subqueries](https://neo4j.com/docs/cypher-manual/current/subqueries/call-subquery/):\r\n\r\n    MATCH (n:Thing) WHERE &lt; complicated list of conditions &gt;\r\n    WITH COLLECT(n) AS list\r\n    CALL {\r\n      WITH list\r\n      UNWIND list AS x\r\n      WITH x\r\n      ORDER BY x.label LIMIT 25\r\n      RETURN COLLECT(x) AS list1\r\n    }\r\n    CALL {\r\n      WITH list\r\n      UNWIND list AS y\r\n      MATCH (m:RelatedThing)-[:Relationship]-(y)\r\n      WITH DISTINCT m\r\n      ORDER BY m.label LIMIT 25\r\n      RETURN COLLECT(m) AS list2\r\n    }\r\n    RETURN list1, list2\r\n\r\n#### For very old neo4j versions without CALL subquery\r\n\r\nThe APOC procedure `apoc.cypher.run` has been supported for a long time, and can be used instead of the more recent `CALL subquery` feature:\r\n\r\n    MATCH (n:Thing) WHERE &lt; complicated list of conditions &gt;\r\n    WITH COLLECT(n) AS list\r\n    CALL apoc.cypher.run(&quot;\r\n      UNWIND list AS x\r\n      WITH x\r\n      ORDER BY x.label LIMIT 25\r\n      RETURN COLLECT(x) AS list1&quot;,\r\n      {list: list}\r\n    ) YIELD value as val1\r\n    CALL apoc.cypher.run(&quot;\r\n      UNWIND list AS y\r\n      MATCH (m:RelatedThing)-[:Relationship]-(y)\r\n      WITH DISTINCT m\r\n      ORDER BY m.label LIMIT 25\r\n      RETURN COLLECT(m) AS list2&quot;,\r\n      {list: list}\r\n     ) YIELD value as val2\r\n    RETURN val1.list1 AS list1, val2.list2 AS list2",
          "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together/77944207#77944207",
          "title": "Running two partially related cypher queries together"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 23351570,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf368d530acb206142855796bd108274?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "da_ny",
        "link": "https://stackoverflow.com/users/23351570/da-ny"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77944207,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1707192870,
      "creation_date": 1707168326,
      "last_edit_date": 1707192870,
      "question_id": 77944096,
      "share_link": "https://stackoverflow.com/q/77944096",
      "body_markdown": "I need to fetch two related collections from a Neo4j database.\r\n\r\nThe first one is to get some things that satisfy a list of conditions, something like this:\r\n\r\n```sql\r\nMATCH (n:Thing)\r\nWHERE [complicated list of conditions]\r\nRETURN n\r\nORDER BY n.label\r\nLIMIT 25\r\n```\r\n\r\nthe second one is to get nodes related to the nodes that satisfy the conditions, something like this:\r\n\r\n```sql\r\nMATCH (m:RelatedThing) -[:Relationship]-(n:Thing)\r\nWHERE [same complicated conditions about n]\r\nRETURN m\r\nORDER BY m.label \r\nLIMIT 25\r\n```\r\n\r\nCrucially, the m&#39;s don&#39;t have to be related to the first 25 n&#39;s that were returned by query 1.\r\n\r\nIt seems like there is a lot of repetition between these two queries. Is there a way to run them both in a single query?\r\n\r\nObviously this can be done in two queries, but reading around I haven&#39;t found a good way to run both queries together. It seems like maybe COLLECT could be useful, but it doesn&#39;t quite fit the use case.\r\n\r\nEDIT: I am looking for a solution that works in version 3.5.12",
      "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together",
      "title": "Running two partially related cypher queries together"
    },
    {
      "tags": ["python", "flask", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707164005,
          "post_id": 77936432,
          "comment_id": 137410416,
          "link": "https://stackoverflow.com/questions/77936432/neo4j-aura-db-connection-doesnt-work-when-a-use-flask#comment137410416_77936432"
        }
      ],
      "owner": {
        "reputation": 21,
        "user_id": 16796768,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Ghs9m5qf7HqO7ePaplImjDT2MpGuVBO2FCeIsYJ=k-s256",
        "display_name": "Salvatore Pennisi",
        "link": "https://stackoverflow.com/users/16796768/salvatore-pennisi"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1707061298,
      "creation_date": 1707061298,
      "question_id": 77936432,
      "share_link": "https://stackoverflow.com/q/77936432",
      "body_markdown": "I tried all day how to query a neo4j Aura DB from a Python Flask application. \r\nWhen I run the following code  locally, without starting the server flask, it works:\r\n\r\n    import dotenv\r\n    import os\r\n    from neo4j import GraphDatabase\r\n    import pandas as pd \r\n    import time\r\n    import numpy as np\r\n    \r\n    \r\n    load_status = dotenv.load_dotenv(&quot;secrets/Neo4j.txt&quot;)\r\n    if load_status is False:\r\n        raise RuntimeError(&#39;Environment variables not loaded.&#39;)\r\n    \r\n    class Neo4jConnection:\r\n        def __init__(self, uri, auth):\r\n            self._uri = uri\r\n            self._user = auth[&quot;user&quot;]\r\n            self._password = auth[&quot;password&quot;]\r\n            self._driver = None\r\n    \r\n        def close(self):\r\n            if self._driver is not None:\r\n                self._driver.close()\r\n    \r\n        def connect(self):\r\n            self._driver = GraphDatabase.driver(self._uri, auth=(self._user, self._password))\r\n    \r\n        def run_query(self, query, parameters=None):\r\n            with self._driver.session() as session:\r\n                result = session.run(query, parameters)\r\n                return result.data()\r\n    \r\n    def get_user_by_proximity(distance, user_position, processed_ids):\r\n        # Configura la tua connessione\r\n        URI = os.getenv(&quot;NEO4J_URI&quot;)\r\n        AUTH = {&quot;user&quot;:os.getenv(&quot;NEO4J_USERNAME&quot;),&quot;password&quot;: os.getenv(&quot;NEO4J_PASSWORD&quot;)}\r\n    \r\n        # Crea una connessione\r\n        neo4j_connection = Neo4jConnection(URI, AUTH)\r\n        neo4j_connection.connect()\r\n        latitude =  user_position[&#39;latitude&#39;]\r\n        longitude = user_position[&#39;longitude&#39;]\r\n        query = f&quot;&quot;&quot;\r\n                   MATCH (n:User)\r\n                   WHERE point.distance(n.location, point({{latitude: {latitude}, longitude:{longitude}}}))/1000 &lt;= {distance}\r\n                   AND NOT n.`_id` IN {processed_ids}\r\n                   RETURN n&quot;&quot;&quot;\r\n        result =  neo4j_connection.run_query(query)\r\n        neo4j_connection.close()\r\n        return result\r\n\r\n    def get_score():\r\n       &lt;other stuff&gt;\r\n\r\nBut when I launch the flask server, calling that piece of code, it gives me this error:\r\n\r\n    from flask import Flask\r\n    from match import *\r\n    \r\n    app = Flask(__name__)\r\n    \r\n    \r\n    user = {&lt;MANY INFO&gt;}\r\n    \r\n    @app.route(&#39;/&#39;)\r\n    def index(userInfo=None):\r\n      group = get_score(user)\r\n      return group\r\n\r\n    if __name__ == &#39;__main__&#39;:\r\n        app.run(debug=True)\r\n    \r\n    &gt;&gt;&gt;ServiceUnavailable\r\n        neo4j.exceptions.ServiceUnavailable: Unable to retrieve routing information\r\n\r\n\r\nThe connection URI begins with the &quot;neo4j+s://...&quot; protocol and I am using a free instance of Aura DB, maybe that is the problem. Is there a way to solve this? \r\nThank you ",
      "link": "https://stackoverflow.com/questions/77936432/neo4j-aura-db-connection-doesnt-work-when-a-use-flask",
      "title": "Neo4j Aura DB connection doesn&#39;t work when a use flask"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1707164537,
          "last_edit_date": 1707164537,
          "creation_date": 1707163019,
          "answer_id": 77943636,
          "question_id": 77934488,
          "share_link": "https://stackoverflow.com/a/77943636",
          "body_markdown": "You have a few errors in your query:\r\n - There is an illegal comma between the (unneeded) `WITH` clause and the following `CALL` clause.\r\n - You used the `batchMode: &quot;BATCH_SINGLE&quot;`\r\n   option but still expected the second Cypher statement to be able to\r\n   access `n` and `c` directly.\r\n\r\n*Apparently, you did actually have backticks around the property name &quot;GO ID&quot; -- to make the space character usable as part of the name. But for some reason the backticks were not visible characters in your question.*\r\n\r\nWhen you use the [BATCH_SINGLE](https://neo4j.com/labs/apoc/4.4/overview/apoc.periodic/apoc.periodic.iterate/#_batch_mode_batch_single) mode, an entire batch of `n` and `c` values are provided to the second Cypher statement via the `$_batch` parameter, as a list of results (e.g., `[{n: &lt;node1&gt;, c: &lt;node2&gt;}, {n: &lt;node3&gt;, c: &lt;node4&gt;}, ...]`).\r\n\r\nYou can just omit the `batchMode` option to get the default behavior, which is the one you expected:\r\n\r\n    CALL apoc.periodic.iterate(\r\n        &quot;MATCH (n:Genes),(c:n4sch__Class)\r\n         WHERE n.`GO ID` = c.n4sch__name\r\n         RETURN n, c&quot;,\r\n        &quot;CALL apoc.create.relationship(n, n.Qualifier, {}, c) YIELD rel\r\n         RETURN rel&quot;,\r\n         {batchSize:100}\r\n    )",
          "link": "https://stackoverflow.com/questions/77934488/neo4j-complex-dynamic-relationship-creation-with-batch-iteration/77943636#77943636",
          "title": "Neo4j complex dynamic relationship creation with batch iteration"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 17400510,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhNpWjKLypPqRjL4TVz5mkDZtLRuO6DELcB8Z0O=k-s256",
        "display_name": "Yoyo458 A",
        "link": "https://stackoverflow.com/users/17400510/yoyo458-a"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77943636,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1707164537,
      "creation_date": 1707016280,
      "question_id": 77934488,
      "share_link": "https://stackoverflow.com/q/77934488",
      "body_markdown": "I have a query that I&#39;ve been working on. Basically I have two sets of class type nodes, one called Genes and the other n4sch__Class, the Genes have a parameter &#39;GO ID&#39; that links them to the class category name. After getting all matching class nodes I want to create a relationship that is also based on the Gene nodes parameter &#39;Qualifier&#39;, and this parameter is dynamic so I need to use apoc.create.relationship. The query is also rather large so it needs to be batched. This is what I have so far but it is returning an error:\r\n\r\n\r\n`call apoc.periodic.iterate(\r\n&quot;MATCH (n:Genes),(c:n4sch__Class)\r\nWHERE n.`GO ID` = c.n4sch__name\r\nRETURN n,c&quot;,\r\n&quot;WITH n, c, \r\nCALL apoc.create.relationship(n, n.Qualifier, {}, c) YIELD rel RETURN rel&quot;,{batchMode: &quot;BATCH_SINGLE&quot;, BatchSize:100})`\r\n\r\n&quot;Invalid input &#39;apoc&#39;: expected ...(line 2, column 6 (offset: 17))\\r\\n&quot;CALL apoc.create.relationship(n, n.Qualifier, {}, c) YIELD rel RETURN rel&quot;\\r\\n      ^&quot;: 17",
      "link": "https://stackoverflow.com/questions/77934488/neo4j-complex-dynamic-relationship-creation-with-batch-iteration",
      "title": "Neo4j complex dynamic relationship creation with batch iteration"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706895520,
              "post_id": 77928553,
              "comment_id": 137384837,
              "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes/77928553#comment137384837_77928553"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706908703,
              "post_id": 77928553,
              "comment_id": 137386720,
              "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes/77928553#comment137386720_77928553"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1706892168,
          "last_edit_date": 1706892168,
          "creation_date": 1706891744,
          "answer_id": 77928553,
          "question_id": 77928264,
          "share_link": "https://stackoverflow.com/a/77928553",
          "body_markdown": "Based on what you&#39;ve written in the question, the straightforward way would be to add constraints on the number of each relationship type in a `WHERE` clause:\r\n```sql\r\nMATCH path = (from:Station {id: 61})-[:IN]-&gt;(sec_from:Section), \r\n      (to:Station {id: 131})&lt;-[:OUT]-(sec_to:Section), \r\n      route = (sec_from)-[r:CONNECTION|EXCHANGE*1..103]-&gt;(sec_to) \r\nWHERE 1 &lt;= size([rel IN r WHERE rel:CONNECTION]) &lt;= 100 \r\n      AND size([rel IN r WHERE rel:EXCHANGE]) &lt;= 3\r\nRETURN route;\r\n```\r\nDepending on your data, a post-filter like this could be inefficient, as it might fetch many paths with &gt; 3 relationships of type `EXCHANGE` before discarding them at the `WHERE` clause stage.",
          "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes/77928553#77928553",
          "title": "How to set number of relations between nodes?"
        }
      ],
      "owner": {
        "reputation": 57,
        "user_id": 5158491,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Ondra",
        "link": "https://stackoverflow.com/users/5158491/ondra"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77928553,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1707015776,
      "creation_date": 1706889004,
      "last_edit_date": 1707015776,
      "question_id": 77928264,
      "share_link": "https://stackoverflow.com/q/77928264",
      "body_markdown": "I have created a transport route of station nodes connected by a :CONNECTION type session, if it is a transfer, I have a :EXCHANGE session type.\r\nI&#39;m looking for a route using a query\r\n\r\n```sql\r\nMATCH path = (from:Station {id: 61})-[:IN]-&gt;(sec_from:Section),\r\n              (to:Station {id: 131})&lt;-[:OUT]-(sec_to:Section),\r\n              route=(sec_from)-[:CONNECTION|EXCHANGE*]-&gt;(sec_to)\r\nRETURN route;\r\n```\r\n\r\nIf I want to search for direct connections only, I use:\r\n`route=(sec_from)-[:CONNECTION*]-&gt;(sec_to)` , it works. If I want to limit the number of connections to 5-10, I use: `route=(sec_from)-[:CONNECTION*5..10]-&gt;(sec_to)` also works. But if I want to have a connection of type :CONNECTION 1-100 and at the same time type :EXCHANGE 0-3, the query doesn&#39;t work:\r\n\r\n```sql\r\nMATCH path = (from:Station {id: 61})-[:IN]-&gt;(sec_from:Section),\r\n              (to:Station {id: 131})&lt;-[:OUT]-(sec_to:Section),\r\n              route=(sec_from)-[:CONNECTION*1..100|EXCHANGE*0..3]-&gt;(sec_to)\r\nRETURN route;\r\n```\r\n\r\nWhat is the correct syntax?\r\n\r\nThanks",
      "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes",
      "title": "How to set number of relations between nodes?"
    },
    {
      "tags": ["neo4j", "openstreetmap", "osmnx"],
      "comments": [
        {
          "owner": {
            "reputation": 5960,
            "user_id": 7321942,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/K0sbg.jpg?s=256&g=1",
            "display_name": "gboeing",
            "link": "https://stackoverflow.com/users/7321942/gboeing"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1706887090,
          "post_id": 77918453,
          "comment_id": 137383245,
          "link": "https://stackoverflow.com/questions/77918453/storing-openstreetmap-data-in-neo4j-need-advice-on-defined-structure#comment137383245_77918453"
        }
      ],
      "owner": {
        "reputation": 83,
        "user_id": 18700741,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJzh5vci2qM5rLMR-NWz3zpluQ0rv_9PuntQBfcC=k-s256",
        "display_name": "Santiago Galiano Segura",
        "link": "https://stackoverflow.com/users/18700741/santiago-galiano-segura"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706810489,
      "creation_date": 1706773774,
      "question_id": 77918453,
      "share_link": "https://stackoverflow.com/q/77918453",
      "body_markdown": "I am currently working on a project that involves integrating OpenStreetMap (OSM) data into a Neo4j database. I&#39;m wondering if there is a recommended or defined structure for storing OSM data in Neo4j. I want to ensure that the data is organized efficiently and can be easily queried for spatial analysis and retrieve useful information.\r\n\r\nAt the moment, I&#39;m only working with the library OSMX in Python to retrive information from OpenStreetmap, but the idea is to put spatial information retrived with Python in a Neo4j Database.\r\n\r\nI&#39;ve done some research, but I couldn&#39;t find a comprehensive guide or recommendation for structuring OSM data in Neo4j. Any guidance or insights from experienced Neo4j users who have worked with OSM data would be immensely helpful. Thanks in advance!",
      "link": "https://stackoverflow.com/questions/77918453/storing-openstreetmap-data-in-neo4j-need-advice-on-defined-structure",
      "title": "Storing OpenStreetMap data in Neo4j - Need advice on defined structure"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "owner": {
        "reputation": 1,
        "user_id": 20883169,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp62Ytgr2FVHSxpi5oHC-dkCEUc0aM8vBlFJ2b-0=k-s256",
        "display_name": "Jonah Turnquist",
        "link": "https://stackoverflow.com/users/20883169/jonah-turnquist"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 17,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706762109,
      "creation_date": 1706762109,
      "question_id": 77917743,
      "share_link": "https://stackoverflow.com/q/77917743",
      "body_markdown": "We&#39;ve used the vanilla Neo4j Enterprise Edition cloud formation template on AWS.\r\n\r\nThis installed APOC and GDS for us - great.\r\n\r\nHowever, it didn&#39;t install the jars that some functions need. We are getting this error:\r\n\r\n&gt; Neo4jError: Failed to invoke procedure `apoc.import.json`: Caused by: apoc.util.MissingDependencyException: Cannot find the S3 jars in the plugins folder. \r\n&gt; Please put these files into the plugins folder :\r\n&gt; \r\n&gt; aws-java-sdk-core-x.y.z.jar\r\n&gt; aws-java-sdk-s3-x.y.z.jar\r\n&gt; httpclient-x.y.z.jar\r\n&gt; httpcore-x.y.z.jar\r\n&gt; joda-time-x.y.z.jar\r\n&gt; \r\n&gt; See the documentation: https://neo4j.com/docs/apoc/current/import/web-apis/#_using_google_cloud_storage\r\n\r\nWhat is the cleanest way to install these jars across all nodes in the cluster? For now we only have one node, but that may not always be the case.\r\n\r\nThanks!\r\n\r\n\r\n\r\nI expected there to be an easy way to get these plugins installed without needed to ssh into each node and manually install",
      "link": "https://stackoverflow.com/questions/77917743/what-is-the-recommended-way-to-install-plugin-jars-on-aws-neo4j-enterprise-editi",
      "title": "What is the recommended way to install plugin jars on AWS Neo4j Enterprise Edition"
    },
    {
      "tags": ["python", "neo4j"],
      "owner": {
        "reputation": 9078,
        "user_id": 180904,
        "user_type": "registered",
        "accept_rate": 83,
        "profile_image": "https://www.gravatar.com/avatar/ec0e877c4568a175614c5ab947ecf0c9?s=256&d=identicon&r=PG",
        "display_name": "Ashika Umanga Umagiliya",
        "link": "https://stackoverflow.com/users/180904/ashika-umanga-umagiliya"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 19,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706656885,
      "creation_date": 1706656885,
      "question_id": 77909966,
      "share_link": "https://stackoverflow.com/q/77909966",
      "body_markdown": "I am in the process creating vector index for an existing graph db.\r\n\r\nI created a vector index following this : [Vector search indexes - Cypher Manual][1]\r\n\r\nNext using python SDK , I traverse the nodes and get the vector-embeddings for the target attribute (by calling VertexAI vector-embeddings API)\r\n\r\nNow I want to set the retrieved vector into the node using : [Vector search indexes - Cypher Manual][2]\r\n\r\nMy question is, how can I do this using the Python SDK ?\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/vector-indexes/?_ga=2.14191475.572054530.1706656777-1759812782.1706656777#indexes-vector-create\r\n  [2]: https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/vector-indexes/?_ga=2.14191475.572054530.1706656777-1759812782.1706656777#indexes-vector-set",
      "link": "https://stackoverflow.com/questions/77909966/neo4j-setting-vector-embedding-to-the-node-using-the-python-sdk",
      "title": "neo4j : Setting vector embedding to the node using the python SDK"
    },
    {
      "tags": ["windows", "neo4j", "keyboard", "cypher-shell"],
      "owner": {
        "reputation": 59,
        "user_id": 18542427,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7648d706a3e19a2c4d0dfe15dfa93b5d?s=256&d=identicon&r=PG",
        "display_name": "Idkwhatywantmed",
        "link": "https://stackoverflow.com/users/18542427/idkwhatywantmed"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 20,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706632722,
      "creation_date": 1706629310,
      "last_edit_date": 1706632722,
      "question_id": 77907579,
      "share_link": "https://stackoverflow.com/q/77907579",
      "body_markdown": "I  tried everything, switching keyboards, using virtual keyboard, copy and paste, but the shell won&#39;t in any way, on windows 10, display or recognize curly bracket. I don&#39;t know why. I tried to see if there were shortcuts that could interfere but nothing. Other symbols seem to work!",
      "link": "https://stackoverflow.com/questions/77907579/neo4j-cypher-shell-wont-use-curly-brackets-in-any-way",
      "title": "Neo4J Cypher Shell won&#39;t use curly brackets in any way"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706636928,
              "post_id": 77907874,
              "comment_id": 137349112,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349112_77907874"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706639485,
              "post_id": 77907874,
              "comment_id": 137349557,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349557_77907874"
            },
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1706641038,
              "post_id": 77907874,
              "comment_id": 137349797,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349797_77907874"
            },
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706641229,
              "post_id": 77907874,
              "comment_id": 137349826,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349826_77907874"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706639455,
          "last_edit_date": 1706639455,
          "creation_date": 1706631798,
          "answer_id": 77907874,
          "question_id": 77907493,
          "share_link": "https://stackoverflow.com/a/77907874",
          "body_markdown": "You only need a single [fulltext index](https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/full-text-indexes/#create-full-text-indexes) to cover the `name` and `code` properties of `Concept` and `Accession` nodes:\r\n\r\n    CREATE FULLTEXT INDEX nameAndCode FOR (n:Concept|Accession) ON EACH [n.name, n.code]\r\n\r\n*Note: Aside from `:Concept.name` and `:Accession.code`, the index would also include `:Concept.code` and `:Accession.name` if they happen to exist. If they do, change their property names to avoid polluting the index.*\r\n\r\nOnce that index is defined, this query may work for your use case:\r\n\r\n    // $name and $code are parameters\r\n    CALL db.index.fulltext.queryNodes(\r\n      &quot;nameAndCode&quot;,\r\n      &quot;&#39;&quot; + $name + &quot;&#39; OR &#39;&quot; + $code + &quot;&#39;&quot;) YIELD node, score\r\n    CALL {\r\n      WITH node\r\n      WITH node WHERE node.name = $name\r\n      RETURN node AS concept\r\n\r\n      UNION\r\n\r\n      WITH node\r\n      WITH node WHERE node.code = $code\r\n      MATCH (concept)-[:hasAccession]-&gt;(node)\r\n      RETURN concept\r\n    }\r\n    RETURN concept, score",
          "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#77907874",
          "title": "Neo4j Full text Index that includes properties from a 1-n node"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706642420,
              "post_id": 77908813,
              "comment_id": 137350024,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77908813#comment137350024_77908813"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706641324,
          "creation_date": 1706641324,
          "answer_id": 77908813,
          "question_id": 77907493,
          "share_link": "https://stackoverflow.com/a/77908813",
          "body_markdown": "As you pointed out, you can have two indexes, however it will be a nightmare in the long term, `OR` queries will be fine, `AND` queries will just be non performant, combining FullTextSearch with `AND` on two indexes along with an optional pattern in Cypher will lead to very, very long and hard hours of pain.\r\n\r\nThere is no single answer tho, it will depend on the level of performance you need, the level of changes you can do at ingestion level or the level of pain you want to have. \r\n\r\n- @cybersam answer is a valid one\r\n- you can create new nodes representing the pairs of texts between concept and ascensions and have an index on that and automate this process during ingestion and vice versa\r\n- you can use [CDC][1] to automate all this process in the background\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cdc/current/",
          "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77908813#77908813",
          "title": "Neo4j Full text Index that includes properties from a 1-n node"
        }
      ],
      "owner": {
        "reputation": 2877,
        "user_id": 529286,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
        "display_name": "zakmck",
        "link": "https://stackoverflow.com/users/529286/zakmck"
      },
      "last_editor": {
        "reputation": 2877,
        "user_id": 529286,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
        "display_name": "zakmck",
        "link": "https://stackoverflow.com/users/529286/zakmck"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706641324,
      "creation_date": 1706628406,
      "last_edit_date": 1706637095,
      "question_id": 77907493,
      "share_link": "https://stackoverflow.com/q/77907493",
      "body_markdown": "I have a Neo4j schema with a 1-n relation:\r\n\r\n```haskhell\r\n// a concept might have multiple accessions\r\n(:Concept{name}) - [:hasAccession] -&gt; (:Accession{code, source})\r\n```\r\n\r\nI&#39;d like to create a &#39;nameOrAccession&#39; full-text index (ie, to support both speed and Lucene syntax like &quot;&#39;Computer Science&#39; OR &#39;CS00*&#39;&quot;), which should find nodes based on the `name` property or `Accession.code` property.\r\n\r\nI know I could achieve this by creating two full-text indexes, one for `Concept.name` and the other for `Accession.code`, and then I could combine the two in a single `UNION` query.\r\n\r\nBut is it possible to simplify the query side by creating one index only? Ie, one that is about a &#39;top&#39; (or &#39;central&#39;, or alike) node and would include properties from related nodes?\r\n\r\nMy understanding is it isn&#39;t possible, but I&#39;d like to check if I&#39;m missing something.\r\n\r\n**EDIT**: I also know I could include multiple node labels in the same index (`CREATE FULLTEXT INDEX ... FOR (n:Concept|Accession)...`), but that&#39;s not what I want, since this kind of index would find both concepts and accessions, while I want a query that finds concepts only, possibly based on their accession codes).",
      "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node",
      "title": "Neo4j Full text Index that includes properties from a 1-n node"
    },
    {
      "tags": ["c#", "neo4j", "neo4j-driver"],
      "comments": [
        {
          "owner": {
            "reputation": 118215,
            "user_id": 2501279,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/GO0W9.jpg?s=256&g=1",
            "display_name": "Guru Stron",
            "link": "https://stackoverflow.com/users/2501279/guru-stron"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1706626473,
          "post_id": 77907255,
          "comment_id": 137347043,
          "link": "https://stackoverflow.com/questions/77907255/neo4j-c-driver-method-not-found-when-calling-tolistasync#comment137347043_77907255"
        }
      ],
      "owner": {
        "reputation": 1513,
        "user_id": 472603,
        "user_type": "registered",
        "accept_rate": 45,
        "profile_image": "https://www.gravatar.com/avatar/7c72acc47859342c7d496a2a9ec447fb?s=256&d=identicon&r=PG",
        "display_name": "paddingtonMike",
        "link": "https://stackoverflow.com/users/472603/paddingtonmike"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 20,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706626400,
      "creation_date": 1706626400,
      "question_id": 77907255,
      "share_link": "https://stackoverflow.com/q/77907255",
      "body_markdown": "I am using neo4j C# driver version 5.14.0 and I am getting a Method Not Found exception when executing the following code\r\n\r\n\r\n\r\n    await session.ExecuteWriteAsync(async tx =&gt;\r\n    {\r\n        var updateCypher = @&quot;\r\n            unwind $itemsArr as war\r\n            merge (w:NodeA {uuid:war.Uuid})\r\n            on match set w.durationmins=war.DurationMins,w.lastseen=0,w.new=null\r\n            on create set w.durationmins=war.DurationMins,w.subtype=war.SubType,w.mtype=war.Type,w.new=&#39;Y&#39;,w.lastseen=0\r\n            return count(w) as cnt\r\n        &quot;;\r\n    \r\n        await tx.RunAsync(updateCypher, new { itemsArr = myItems });\r\n        \r\n        var uniqueIdCursor = await tx.RunAsync(&quot;match (w:NodeA) where not  (w)-[]-(:NodeB) and w.new = &#39;Y&#39; return w.uuid&quot;);  \r\n    \r\n        var uniqueIdList = await uniqueIdCursor.ToListAsync();\r\n        var uniqueIds = uniqueIdList.Select(x =&gt; x[&quot;w.uuid&quot;].As&lt;string&gt;()).ToList();\r\n        return uniqueIds\r\n    }\r\n\r\n&gt; Exception: System.MissingMethodException: Method not found:\r\n&gt; &#39;System.Threading.Tasks.Task`1&lt;System.Collections.Generic.List`1&lt;Neo4j.Driver.IRecord&gt;&gt;\r\n&gt; Neo4j.Driver.ResultCursorExtensions.ToListAsync(Neo4j.Driver.IResultCursor)&#39;.\r\n\r\nHowever, if I replace the last three lines of code with this I get no error:\r\n\r\n    List&lt;string&gt; uniqueIds = [];\r\n    \r\n    while (await uniqueIdCursor.FetchAsync())\r\n    {\r\n        var uniqueId = uniqueIdCursor.Current[0].ToString();\r\n        uniqueIds.Add(uniqueId);\r\n    }\r\n    \r\n    return uniqueIds;\r\n\r\nI do not understand why in this scenario ToListAsync() is not available to IResultCursor",
      "link": "https://stackoverflow.com/questions/77907255/neo4j-c-driver-method-not-found-when-calling-tolistasync",
      "title": "Neo4j C# Driver: Method Not Found when calling ToListAsync()"
    },
    {
      "tags": ["spring", "neo4j", "spring-data-neo4j", "embeddable"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3,
                "user_id": 12787705,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3919e985a6e8b5c01803e390994f0c53?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "PeterNz",
                "link": "https://stackoverflow.com/users/12787705/peternz"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706929250,
              "post_id": 77912146,
              "comment_id": 137388299,
              "link": "https://stackoverflow.com/questions/77903829/how-to-define-in-spring-model-to-embed-an-object-using-neo4j/77912146#comment137388299_77912146"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 7992,
            "user_id": 2650436,
            "user_type": "registered",
            "accept_rate": 80,
            "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
            "display_name": "meistermeier",
            "link": "https://stackoverflow.com/users/2650436/meistermeier"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1706693150,
          "creation_date": 1706693150,
          "answer_id": 77912146,
          "question_id": 77903829,
          "share_link": "https://stackoverflow.com/a/77912146",
          "body_markdown": "Neo4j does not support embedded objects. This is why there is no other way than using `@CompositeProperty` with a custom converter to &quot;embed&quot; your objects.\r\n\r\nFor example for `soldFor` with a property defined as:\r\n\r\n```\r\n@CompositeProperty(prefix=&quot;soldFor&quot;, converter = SoldForConverter.class)\r\nprivate SoldFor soldFor;\r\n```\r\n\r\nand a converter like\r\n\r\n```\r\nclass SoldForConverter implements Neo4jPersistentPropertyToMapConverter&lt;String, SoldFor&gt; {\r\n\r\n\t@NonNull @Override\r\n\tpublic Map&lt;String, Value&gt; decompose(@Nullable SoldFor property, Neo4jConversionService conversionService) {\r\n\r\n\t\tfinal HashMap&lt;String, Value&gt; decomposed = new HashMap&lt;&gt;();\r\n\t\tif (property == null) {\r\n\t\t\tdecomposed.put(&quot;cost&quot;, Values.NULL);\r\n\t\t\tdecomposed.put(&quot;currency&quot;, Values.NULL);\r\n\t\t} else {\r\n\t\t\tdecomposed.put(&quot;cost&quot;, Values.value(property.getCost()));\r\n\t\t\tdecomposed.put(&quot;currency&quot;, Values.value(property.getCurrency()));\r\n\t\t}\r\n\t\treturn decomposed;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic SoldFor compose(Map&lt;String, Value&gt; source, Neo4jConversionService conversionService) {\r\n\t\treturn source.isEmpty() ?\r\n\t\t\t\tnull :\r\n\t\t\t\tnew SoldFor(source.get(&quot;cost&quot;).asInt(), source.get(&quot;currency&quot;).asString());\r\n\t}\r\n}\r\n```\r\n\r\nYou will get\r\n```\r\nsoldFor.cost=34\r\nsoldFor.currency=&quot;EUR&quot;\r\n```\r\nExample taking from \r\n\r\nConverter: https://github.com/spring-projects/spring-data-neo4j/blob/c5d3458217124e1867f12bc47454eab85551c72b/src/test/java/org/springframework/data/neo4j/integration/shared/conversion/ThingWithCompositeProperties.java#L235\r\n\r\nProperty definition: https://github.com/spring-projects/spring-data-neo4j/blob/c5d3458217124e1867f12bc47454eab85551c72b/src/test/java/org/springframework/data/neo4j/integration/shared/conversion/RelationshipWithCompositeProperties.java#L44 \r\nand simplified.",
          "link": "https://stackoverflow.com/questions/77903829/how-to-define-in-spring-model-to-embed-an-object-using-neo4j/77912146#77912146",
          "title": "How to define in spring model to embed an object using Neo4j"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 12787705,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3919e985a6e8b5c01803e390994f0c53?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "PeterNz",
        "link": "https://stackoverflow.com/users/12787705/peternz"
      },
      "last_editor": {
        "reputation": 7992,
        "user_id": 2650436,
        "user_type": "registered",
        "accept_rate": 80,
        "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
        "display_name": "meistermeier",
        "link": "https://stackoverflow.com/users/2650436/meistermeier"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77912146,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706693150,
      "creation_date": 1706587190,
      "last_edit_date": 1706689953,
      "question_id": 77903829,
      "share_link": "https://stackoverflow.com/q/77903829",
      "body_markdown": "I would to store the following structure in a Neo4J database which has the embedded object oweMe and soldFor are of class Payment.\r\n\r\n```\r\n{\r\n  &quot;id&quot;:&quot;id23&quot;,\r\n  &quot;oweMe&quot;: {\r\n    &quot;cost&quot;: 23\r\n    &quot;currency&quot;:&quot;USD&quot;\r\n  }\r\n  &quot;soldFor&quot;: {\r\n    &quot;cost&quot;: 34\r\n    &quot;currency&quot;:&quot;EUR&quot;\r\n  }\r\n}\r\n```\r\n\r\nIn spring boot, I can use the @embedded and @Embeddable annotations with the JPArespository on an H2 database and it works perfectly.\r\n\r\nI want to repeat this structure but store it in a Neo4J database. As the Neo4j does not support the JPARepositry I cannot use those annotations however I see that it uses the @NodeEntity and @Property/@Properties to achieve the same result according to the reference material. \r\n\r\nThe reference documentation shows an example that looks like the following where the address is prefixed to the embedded object properties.\r\n```\r\naddress.street=Downing Street\r\naddress.number=10\r\n```\r\n\r\n\r\nThanks everyone for your help,\r\n\r\nHowever when I run the app, I get an error saying `&quot;Required identifier property not found for class ... Payment&quot;` and refers to the embedded object. While that is true that there is no @Id for the embedded object, as the embedded object is not a List&lt;&gt; and there is no @Node/@NodeEntity definition, I expected that should not be needing an id. \r\n\r\nWhile I can overcome this by writing custom getters and setters to serialise the embedded object so that it can be stored as a JSON string, that has become overwhelming.\r\n\r\nAs I expect that this sort of embedding is done all the time, can someone please point me to an example that I can use?",
      "link": "https://stackoverflow.com/questions/77903829/how-to-define-in-spring-model-to-embed-an-object-using-neo4j",
      "title": "How to define in spring model to embed an object using Neo4j"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1060,
                "user_id": 3091286,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ae4e7f3c3b0fce0498fc8538833b7ec7?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "John",
                "link": "https://stackoverflow.com/users/3091286/john"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706574177,
              "post_id": 77903083,
              "comment_id": 137340321,
              "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher/77903083#comment137340321_77903083"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1060,
                "user_id": 3091286,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ae4e7f3c3b0fce0498fc8538833b7ec7?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "John",
                "link": "https://stackoverflow.com/users/3091286/john"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706577848,
              "post_id": 77903083,
              "comment_id": 137340619,
              "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher/77903083#comment137340619_77903083"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706578162,
          "last_edit_date": 1706578162,
          "creation_date": 1706569173,
          "answer_id": 77903083,
          "question_id": 77902863,
          "share_link": "https://stackoverflow.com/a/77903083",
          "body_markdown": "You should read the documentation for [CALL](https://neo4j.com/docs/cypher-manual/current/clauses/call/), [WITH](https://neo4j.com/docs/cypher-manual/current/clauses/with/), and [UNION](https://neo4j.com/docs/cypher-manual/current/clauses/union/).\r\n\r\nHere are answers to your specific questions:\r\n\r\n - When you `CALL` a procedure that can return results, you generally must also specify a `YIELD` for at least one of the procedure&#39;s result fields and use the exact field name. You can use [SHOW PROCEDURES](https://neo4j.com/docs/cypher-manual/current/clauses/listing-procedures/) to get the signature of a procedure, which includes its result fields. For example, to get the signature of `apoc.create.addLabels`:\r\n\r\n       SHOW PROCEDURES YIELD name, signature\r\n       WHERE name = &#39;apoc.create.addLabels&#39;\r\n       RETURN signature\r\n\r\n - `YIELD` must specify at least one of the result field name(s) used in the procedure&#39;s signature. You cannot use arbitrary names, although you can immediately use `AS` to rename a field (e.g., `YIELD officalName AS foo`).\r\n\r\n - Cypher does not permit multiple `YIELD`s to produce the same variable name (in the same scope). To get around this, you can use `AS` to rename such variables. For example, this should work:\r\n\r\n    ```\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///myfile.csv&#39; AS row\r\n    MERGE (n:Person{id:row.ID,name:row.Name}) \r\n    WITH n,row\r\n    CALL apoc.create.addLabels(id(n), [row.Title,row.Position]) YIELD node AS _\r\n    CALL apoc.create.addLabels(id(n), split(row.Roles, &#39;,&#39;)) YIELD node AS __\r\n    CALL apoc.create.addLabels(id(n), split(row.Aliases, &#39;,&#39;)) YIELD node\r\n    RETURN node\r\n    ```\r\n\r\n   (*Also FYI: [WITH](https://neo4j.com/docs/cypher-manual/current/clauses/with/) changes the set of variables that are in scope. If any subsequent clauses need a variable, then a `WITH` clause must specify that variable.*)\r\n\r\n- As documented, a [UNION](https://neo4j.com/docs/cypher-manual/current/clauses/union/) &quot;combines the results of two or more queries into a single result set&quot;. You cannot just put `UNION` between arbitrary clauses.",
          "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher/77903083#77903083",
          "title": "How to stack consecutive APOC statements in Neo4j Cypher"
        }
      ],
      "owner": {
        "reputation": 1060,
        "user_id": 3091286,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/ae4e7f3c3b0fce0498fc8538833b7ec7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "John",
        "link": "https://stackoverflow.com/users/3091286/john"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77903083,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706578162,
      "creation_date": 1706565665,
      "question_id": 77902863,
      "share_link": "https://stackoverflow.com/q/77902863",
      "body_markdown": "I stumbled on the following syntax for setting labels during a `LOAD CSV` operation in Neo4j with Cypher.  It works but I don&#39;t understand *why*, and all of the following modifications break it:\r\n- Removing any of the `YIELD` statements\r\n- Changing `YIELD node` to `YIELD node2` or any other name on the 2nd and 3rd `YIELD` statements\r\n- Removing any of the repeated `WITH n,row` statements between the `YIELD` statements\r\n- Adding `UNION` between the calls (at least, I couldn&#39;t get it to work)\r\n\r\nCan anyone enlighten me?  I&#39;m a relative newcomer to Cypher and APOC and I&#39;d love to understand how to make repeated APOC calls properly. \r\n \r\n```cypher\r\nLOAD CSV WITH HEADERS FROM &#39;file:///myfile.csv&#39; AS row\r\nMERGE (n:Person{id:row.ID,name:row.Name}) \r\nWITH n,row\r\nCALL apoc.create.addLabels(id(n), [row.Title,row.Position] YIELD node\r\nWITH n,row\r\nCALL apoc.create.addLabels(id(n), split(row.Roles, &#39;,&#39;)) YIELD node \r\nWITH n,row\r\nCALL apoc.create.addLabels(id(n), split(row.Aliases, &#39;,&#39;)) YIELD node\r\n```\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher",
      "title": "How to stack consecutive APOC statements in Neo4j Cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706551973,
              "post_id": 77901640,
              "comment_id": 137337281,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901640#comment137337281_77901640"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706553184,
              "post_id": 77901640,
              "comment_id": 137337506,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901640#comment137337506_77901640"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706550152,
          "creation_date": 1706550152,
          "answer_id": 77901640,
          "question_id": 77901438,
          "share_link": "https://stackoverflow.com/a/77901640",
          "body_markdown": "To return paths from station A with `id = 1` to station B with `id = 25` via `Line` relationships with equal `Line_ID` properties:\r\n\r\n```sql\r\nMATCH (:Station {id: 1})-[r:Line]-&gt;+(:Station {id: 25})\r\nWHERE all(i IN range(0, size(r)-2) WHERE r[i].Line_ID = r[i+1].Line_ID)\r\n```",
          "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901640#77901640",
          "title": "Search route in NEO4J"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706553586,
              "post_id": 77901888,
              "comment_id": 137337558,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137337558_77901888"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706553847,
              "post_id": 77901888,
              "comment_id": 137337612,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137337612_77901888"
            },
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706554045,
              "post_id": 77901888,
              "comment_id": 137337651,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137337651_77901888"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706558223,
              "post_id": 77901888,
              "comment_id": 137338344,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137338344_77901888"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706561771,
          "last_edit_date": 1706561771,
          "creation_date": 1706553070,
          "answer_id": 77901888,
          "question_id": 77901438,
          "share_link": "https://stackoverflow.com/a/77901888",
          "body_markdown": "This may be an efficient query, since the variable-length relationship pattern `[rs:Line *0..9 {id: r1.id}]` specifies a static `id`:\r\n\r\n    MATCH path = (start:Station {id: 1})-[r1:Line]-&gt;(:Station)\r\n        -[:Line *0..9 {id: r1.id}]-&gt;(:Station {id: 25})\r\n    RETURN path\r\n\r\nI imposed an arbitrary upper bound of 9 (for a total path length of up to 10) to avoid taking too long or running out of memory. Adjust the bound as appropriate for your data.\r\n\r\nIt is important to recognize that variable-length relationship queries have exponential complexity. If each node has `R` relevant relationships, then a path length upper bound of `N` can result in `R**N` database lookups. This is why it is important to set a reasonable upper bound (`N`).\r\n\r\n##### Specific `Line` `id`\r\n\r\nIf you want to specify the `Line` `id` to use, then the query can be simpler and much quicker (but you should still impose an upper bound on the path length). This query assumes you pass the following [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/):\r\n - `$line_id`: the desired `id` value\r\n - `$station_id_first` and `$station_id_last`\r\n\r\n       MATCH path = (:Station {id: $station_id_first})-[:Line *..9 {id: $line_id}]-&gt;(:Station {id: $station_id_last})\r\n       RETURN path\r\n",
          "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#77901888",
          "title": "Search route in NEO4J"
        }
      ],
      "owner": {
        "reputation": 57,
        "user_id": 5158491,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Ondra",
        "link": "https://stackoverflow.com/users/5158491/ondra"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706561771,
      "creation_date": 1706547907,
      "question_id": 77901438,
      "share_link": "https://stackoverflow.com/q/77901438",
      "body_markdown": "please help me build the cypher:\r\n\r\nI have a NODES label :Station and they are connected using a directional relation :Line, where the Line property is e.g. the line number. NODES are multiple connected by different lines (with Line_ID property). I need a query about the route from Station A (e.g. id=1) to Station B (id=25), via the :Line session, but in such a way that multiple variants are offered, but each variant must have the same Line_ID in the session.\r\nMy query loops or &quot;skips&quot; during the search to a session with a different LINE_ID than the previous one. Thanks for advice!",
      "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j",
      "title": "Search route in NEO4J"
    },
    {
      "tags": ["neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1706544153,
          "post_id": 77900793,
          "comment_id": 137335847,
          "link": "https://stackoverflow.com/questions/77900793/neo4j-is-not-running-after-putting-the-right-path#comment137335847_77900793"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1706562298,
          "post_id": 77900793,
          "comment_id": 137338984,
          "link": "https://stackoverflow.com/questions/77900793/neo4j-is-not-running-after-putting-the-right-path#comment137338984_77900793"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23315781,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b234bfdbe1fe2bc1934fb7c4ed929eb1?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Ubair Noor",
        "link": "https://stackoverflow.com/users/23315781/ubair-noor"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 1,
      "is_answered": false,
      "view_count": 13,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706542132,
      "creation_date": 1706542132,
      "question_id": 77900793,
      "share_link": "https://stackoverflow.com/q/77900793",
      "body_markdown": "his isn&#39;t working after I press the confirm button. I installed Java JDK and set the correct path in the environment variables, but it keeps showing this error repeatedly. I&#39;ve tried my best to resolve this issue, but unfortunately, I wasn&#39;t able to fix it. I&#39;m attempting to provide the path for Neo4j, but unfortunately, it&#39;s not running after doing so",
      "link": "https://stackoverflow.com/questions/77900793/neo4j-is-not-running-after-putting-the-right-path",
      "title": "Neo4j is not running after putting the right path"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 737,
                "user_id": 5106474,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fab7324caef036814f435900db0b0775?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "PhilJay",
                "link": "https://stackoverflow.com/users/5106474/philjay"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706538495,
              "post_id": 77900287,
              "comment_id": 137334657,
              "link": "https://stackoverflow.com/questions/77899930/unwind-an-empty-list-negatively-affects-outer-return-statement/77900287#comment137334657_77900287"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706537621,
          "last_edit_date": 1706537621,
          "creation_date": 1706537282,
          "answer_id": 77900287,
          "question_id": 77899930,
          "share_link": "https://stackoverflow.com/a/77900287",
          "body_markdown": "That `RETURN tag` is reducing the cardinality to zero when `$tagNames` is empty. To solve this, wrap the `CALL` in another `CALL` to preserve the cardinality of the first MATCH:\r\n```sql\r\nMATCH (i:Item {id: $itemId})\r\n\r\nOPTIONAL MATCH (i)-[previousRelations:hasTag]-&gt;(:Tag)\r\nDELETE previousRelations\r\n    \r\nWITH *\r\nCALL {\r\n  WITH i\r\n  CALL {\r\n    UNWIND $tagNames as tagName\r\n\r\n    MERGE (tag:Tag {name: tagName})\r\n    ON CREATE SET tag.id = randomUUID(), tag.createdAt = datetime()\r\n\r\n    RETURN tag\r\n  }\r\n  MERGE (i)-[:hasTag]-&gt;(tag)\r\n}\r\n\r\nRETURN i\r\n```",
          "link": "https://stackoverflow.com/questions/77899930/unwind-an-empty-list-negatively-affects-outer-return-statement/77900287#77900287",
          "title": "UNWIND an empty list negatively affects outer RETURN statement"
        }
      ],
      "owner": {
        "reputation": 737,
        "user_id": 5106474,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fab7324caef036814f435900db0b0775?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "PhilJay",
        "link": "https://stackoverflow.com/users/5106474/philjay"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77900287,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706537621,
      "creation_date": 1706533471,
      "question_id": 77899930,
      "share_link": "https://stackoverflow.com/q/77899930",
      "body_markdown": "I am trying to write a Cypher statement, which manages the creation and relationships of tag nodes according to a given list of tag names for an item.\r\n\r\nExample calling parameters:\r\n```json\r\n{\r\n  itemId: &quot;foo&quot;,\r\n  tagNames: [&quot;Tag1&quot;, &quot;Tag2&quot;, &quot;Tag3&quot;]\r\n}\r\n```\r\n\r\nThis is the Cypher statement:\r\n```Cypher\r\nMATCH (i:Item {id: $itemId})\r\n\r\nOPTIONAL MATCH (i)-[previousRelations:hasTag]-&gt;(:Tag)\r\nDELETE previousRelations\r\n\t\r\nWITH *\r\nCALL {\r\n\tUNWIND $tagNames as tagName\r\n\r\n\tMERGE (tag:Tag {name: tagName})\r\n\tON CREATE SET tag.id = randomUUID(), tag.createdAt = datetime()\r\n\r\n\tRETURN tag\r\n}\r\n\r\nMERGE (i)-[:hasTag]-&gt;(tag)\r\n\r\nRETURN i\r\n```\r\n\r\nThe tag node creation and assignment works all fine!\r\n\r\nMy problem lies in the `RETURN i` statement if my `$tagNames` list is empty (`[]`). In this case the statement returns *NULL* instead of `i` but I need it to always return `i`.\r\n\r\nI also tried the &quot;FOREACH-Trick&quot; as suggested here: https://stackoverflow.com/a/27578798/5106474\r\n\r\n```\r\n    FOREACH(ignoreMe IN CASE WHEN tag IS NOT NULL THEN [1] ELSE [] END |\r\n\t\tMERGE (i)-[:hasTag]-&gt;(tag)\r\n    )\r\n```\r\n\r\nBut still, same behaviour.\r\n\r\nThanks in advance for any suggestions!",
      "link": "https://stackoverflow.com/questions/77899930/unwind-an-empty-list-negatively-affects-outer-return-statement",
      "title": "UNWIND an empty list negatively affects outer RETURN statement"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706538041,
          "post_id": 77898928,
          "comment_id": 137334561,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137334561_77898928"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 23007772,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJwNUIWjqOEHB9hho6SsHf50JeIg9_7Em6j2gc4hByZ=k-s256",
            "display_name": "Peter Vecera",
            "link": "https://stackoverflow.com/users/23007772/peter-vecera"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706542477,
          "post_id": 77898928,
          "comment_id": 137335477,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137335477_77898928"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706550674,
          "post_id": 77898928,
          "comment_id": 137337072,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137337072_77898928"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 23007772,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJwNUIWjqOEHB9hho6SsHf50JeIg9_7Em6j2gc4hByZ=k-s256",
            "display_name": "Peter Vecera",
            "link": "https://stackoverflow.com/users/23007772/peter-vecera"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706607798,
          "post_id": 77898928,
          "comment_id": 137343756,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137343756_77898928"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23007772,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJwNUIWjqOEHB9hho6SsHf50JeIg9_7Em6j2gc4hByZ=k-s256",
        "display_name": "Peter Vecera",
        "link": "https://stackoverflow.com/users/23007772/peter-vecera"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706546740,
      "creation_date": 1706523352,
      "last_edit_date": 1706546740,
      "question_id": 77898928,
      "share_link": "https://stackoverflow.com/q/77898928",
      "body_markdown": "Hello fellow programmers,\r\n\r\nI&#39;m new to graph databases and I was wondering whether my approach was optimal or there is room for improvement.\r\n\r\nI have a tree-like structure that changes a lot and I need to store it in my graph database.\r\n\r\nFor example:\r\n\r\n![this image][1]\r\n\r\nI receive updates in this form:\r\n\r\n```\r\n{\r\n   path=&quot;2/5/9/4&quot; \r\n   value=&quot;example&quot;\r\n}\r\n```\r\n\r\nCurrently, the leaves hold the values as they change over time, and ancestor nodes store the path:\r\n\r\n```\r\nmerge (a:A {label: 2})-[:NEXT]-&gt;(b:B {label:5})\r\nmerge (b)-[:NEXT]-&gt;(c:C {label:9})\r\nmerge (c)-[:NEXT]-&gt;(d:D {label:4})\r\n\r\non create set d.values = [&quot;example&quot;]\r\non match set d.values = d.values + &quot;example&quot;\r\n```\r\n\r\nIs there a more sophisticated/efficient solution?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WG1Dx.png",
      "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j",
      "title": "Query speed optimalization (neo4j)"
    },
    {
      "tags": ["database", "mongodb", "neo4j"],
      "owner": {
        "reputation": 11,
        "user_id": 15265346,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9dcae5f7baf8e274e8cd6b6aaa9b95bb?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Artur",
        "link": "https://stackoverflow.com/users/15265346/artur"
      },
      "last_editor": {
        "reputation": 3459,
        "user_id": 4136999,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/db7988a64f79dc8977b341b36a70a374?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "toyota Supra",
        "link": "https://stackoverflow.com/users/4136999/toyota-supra"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 21,
      "favorite_count": 0,
      "down_vote_count": 2,
      "up_vote_count": 0,
      "closed_date": 1706546420,
      "answer_count": 0,
      "score": -2,
      "last_activity_date": 1706523216,
      "creation_date": 1706522581,
      "last_edit_date": 1706523216,
      "question_id": 77898854,
      "share_link": "https://stackoverflow.com/q/77898854",
      "body_markdown": "I&#180;m trying to figure out how to create a `Node.js` app that fetches data from a `Neo4j` database (currently, I will need only the relationships between nodes), and from a `MongoDB` (all the properties). A property in the `MongoDB` takes the Id-number of the nodes in the `Neo4J` database.\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77898854/retrieve-data-from-a-neo4j-and-a-mongodb",
      "closed_reason": "Needs details or clarity",
      "title": "Retrieve data from a Neo4J and a MongoDB"
    },
    {
      "tags": ["neo4j", "graphql", "neo4j-graphql-js", "neo4j-graphql-library"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706491286,
          "creation_date": 1706491286,
          "answer_id": 77897011,
          "question_id": 77894562,
          "share_link": "https://stackoverflow.com/a/77897011",
          "body_markdown": "GraphQL only allows alphanumeric characters and underscores in [names](https://github.com/graphql/graphql-spec/blame/October2021/spec/Section%202%20--%20Language.md#L191).\r\n\r\nIf your graph data model has property names containing special symbols like &quot;.&quot;, you should consider changing those property names to conform to the GraphQL requirements (e.g., &quot;properties_lowerNameMonolithic&quot; instead of &quot;properties.lowerNameMonolithic&quot;).",
          "link": "https://stackoverflow.com/questions/77894562/neo4j-graphql-library-schema-instrospector-wtih-property-names-separated-by-a-do/77897011#77897011",
          "title": "Neo4j GraphQL library schema instrospector wtih property names separated by a dot"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77897011,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706491286,
      "creation_date": 1706440447,
      "question_id": 77894562,
      "share_link": "https://stackoverflow.com/q/77894562",
      "body_markdown": "I use the following code in order to automatically introspect the existent Neo4j schema:\r\n\r\n    import { toGraphQLTypeDefs } from &quot;@neo4j/introspector&quot;;\r\n    import fs from &quot;fs&quot;;\r\n    import neo4j from &quot;neo4j-driver&quot;;\r\n    \r\n    const driver = neo4j.driver(\r\n        &quot;neo4j://localhost:7687&quot;,\r\n        neo4j.auth.basic(&quot;neo4j&quot;, &quot;neo4j&quot;)\r\n    );\r\n    \r\n    const sessionFactory = () =&gt; driver.session({ defaultAccessMode: neo4j.session.READ })\r\n    \r\n    async function main() {\r\n        const typeDefs = await toGraphQLTypeDefs(sessionFactory)\r\n        fs.writeFileSync(&#39;schema.graphql&#39;, typeDefs)\r\n        await driver.close();\r\n    }\r\n    main()\r\n\r\n\r\nOn the existent Neo4j database it produces the following:\r\n\r\n    type BaseEntity10 @node(labels: [&quot;BaseEntity&quot;, &quot;CompanyType&quot;, &quot;CompositeEntity&quot;, &quot;Requirable&quot;]) {\r\n    \tbaseEntity16SCompanyTypeOf: [BaseEntity16!]! @relationship(type: &quot;COMPANY_TYPE_OF&quot;, direction: IN)\r\n    \tcreatedAt: BigInt!\r\n    \tcreatedByBaseEntity4S: [BaseEntity4!]! @relationship(type: &quot;CREATED_BY&quot;, direction: OUT)\r\n    \tid: BigInt!\r\n    \tlowerName: String!\r\n    \tname: String!\r\n    \tnameSlug: String!\r\n    \tproperties.lowerNameMonolithic: String!\r\n    \tproperties.lowerNameWhitespace: String!\r\n    \tstatus: String!\r\n    \tsystem: Boolean!\r\n    \tupdatedAt: BigInt!\r\n    \tuuid: String!\r\n    }\r\n\r\nThe issue is with the following definitions:\r\n\r\n\tproperties.lowerNameMonolithic: String!\r\n\tproperties.lowerNameWhitespace: String!\r\n\r\nIn the https://graphql-toolbox.neo4j.io/ when I try to build this schema, I receive the error:\r\n\r\n    Syntax Error: Unexpected character: &quot;.&quot;.\r\n    Locations: [{&quot;line&quot;:24,&quot;column&quot;:12}]\r\n\r\nHow to properly introspect existing properties with names separated by a dot?",
      "link": "https://stackoverflow.com/questions/77894562/neo4j-graphql-library-schema-instrospector-wtih-property-names-separated-by-a-do",
      "title": "Neo4j GraphQL library schema instrospector wtih property names separated by a dot"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 73,
                "user_id": 10578649,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/b5eZk.jpg?s=256&g=1",
                "display_name": "Roman March",
                "link": "https://stackoverflow.com/users/10578649/roman-march"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706438585,
              "post_id": 77894062,
              "comment_id": 137323845,
              "link": "https://stackoverflow.com/questions/77893974/how-to-query-hierarchy-paths-without-the-root-node-as-list-of-paths/77894062#comment137323845_77894062"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706429872,
          "creation_date": 1706429872,
          "answer_id": 77894062,
          "question_id": 77893974,
          "share_link": "https://stackoverflow.com/a/77894062",
          "body_markdown": "This query returns every tree (without the root node) of every `root` whose `name` is &quot;The Root Name&quot;.\r\n\r\n    MATCH (root {name: &quot;The Root Name&quot;})-[:metaClassOf]-&gt;(n)\r\n    WHERE NOT ()-[:metaClassOf]-&gt;(root)\r\n    MATCH p=(n)-[:metaClassOf*0..]-&gt;()\r\n    WITH root, COLLECT(p) AS ps\r\n    CALL apoc.convert.toTree(ps) YIELD value AS tree\r\n    RETURN root, tree\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77893974/how-to-query-hierarchy-paths-without-the-root-node-as-list-of-paths/77894062#77894062",
          "title": "How to query hierarchy paths without the root node (as list of paths)"
        }
      ],
      "owner": {
        "reputation": 73,
        "user_id": 10578649,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/b5eZk.jpg?s=256&g=1",
        "display_name": "Roman March",
        "link": "https://stackoverflow.com/users/10578649/roman-march"
      },
      "last_editor": {
        "reputation": 73,
        "user_id": 10578649,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/b5eZk.jpg?s=256&g=1",
        "display_name": "Roman March",
        "link": "https://stackoverflow.com/users/10578649/roman-march"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77894062,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706438641,
      "creation_date": 1706427237,
      "last_edit_date": 1706438641,
      "question_id": 77893974,
      "share_link": "https://stackoverflow.com/q/77893974",
      "body_markdown": "I need to get JSON-tree of the hierarchy (or some hierarchies, if there is different roots for this pattern - as ```ps``` in my example is list of paths) that I could achieve by:\r\n```\r\nMATCH p=(parent)-[:metaClassOf*]-&gt;(child)\r\nWHERE NOT (parent)&lt;-[:metaClassOf]-()\r\nWITH COLLECT(p) AS ps\r\nCALL apoc.convert.toTree(ps) yield value\r\nRETURN value;\r\n```\r\nIf I need to query only part of the hierarchy, I could specify the desired leaf to act as a root in my query:\r\n```\r\nMATCH (root {name: &quot;The Root Name&quot;})\r\nMATCH p=(root)-[:metaClassOf*]-&gt;(child)\r\nWHERE NOT (root)&lt;-[:metaClassOf]-()\r\nWITH COLLECT(p) AS ps\r\nCALL apoc.convert.toTree(ps) yield value\r\nRETURN value;\r\n```\r\nBut how do I exclude the ```root``` node itself from the last query, as I don&#39;t want it to be in final JSON-tree? I will repeat, I need the list of paths that are coming from the root node, but without this root node and then convert them to JSON-tree.\r\n\r\nI can&#39;t achieve that by filtering nodes after ```UNWIND``` the paths, as I don&#39;t know how to combine them back to list of paths to be able to use ```apoc.convert.toTree(ps)``` then:\r\n```\r\nMATCH (root {name: &quot;The Root Name&quot;})\r\nMATCH p=(root)-[:metaClassOf*]-&gt;(C_Child)\r\nWHERE NOT (root)&lt;-[:metaClassOf]-()\r\nUNWIND nodes(p) as ns\r\nWITH ns as nss\r\nWHERE NOT nss.name= The Root Name&quot;\r\nreturn nss\r\n```",
      "link": "https://stackoverflow.com/questions/77893974/how-to-query-hierarchy-paths-without-the-root-node-as-list-of-paths",
      "title": "How to query hierarchy paths without the root node (as list of paths)"
    },
    {
      "tags": ["neo4j", "graphql", "neo4j-graphql-js", "neo4j-graphql-library"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1706399940,
          "creation_date": 1706399940,
          "answer_id": 77893238,
          "question_id": 77891598,
          "share_link": "https://stackoverflow.com/a/77893238",
          "body_markdown": "No, you must perform explicit mutations to populate the database.\r\n\r\nThe Neo4j GraphQL Library `type definitions` are used to define the mapping between your input/output data and your graph data model. And the [directives](https://neo4j.com/docs/graphql/current/type-definitions/directives/) are used to further modify the behavior of [queries or mutations](https://graphql.org/learn/queries/) (e.g. to automate the population of specific fields). But those facilities are not able to prepopulate the database.",
          "link": "https://stackoverflow.com/questions/77891598/neo4j-graphql-library-first-development-approach/77893238#77893238",
          "title": "Neo4j GraphQL library First Development approach"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 23,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77893238,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706399940,
      "creation_date": 1706367211,
      "question_id": 77891598,
      "share_link": "https://stackoverflow.com/q/77891598",
      "body_markdown": "I&#39;m considering using the Neo4j GraphQL library and have the following question - am I correct in understanding that I can use Neo4j GraphQL Type definitions to automatically generate not only the Neo4j GraphQL API but also the schema for my Neo4j database itself?\r\n\r\nI&#39;d like to use Neo4j GraphQL Type definitions as my entry point to both - DB schema and GraphQL API automatic creation.\r\n\r\nIn the documentation for the Neo4j GraphQL library, I see the ability to declare @Id, indexes, and constraints. But how about initial data - for example, if I need to declare a `Movie` type using Type definitions, can I also immediately add (CREATE) 10 movies with specific predefined names? Can I create such initial data, such as nodes, relationships, and properties, directly in Neo4j GraphQL Type definitions? If so, please guide me on how to do it.",
      "link": "https://stackoverflow.com/questions/77891598/neo4j-graphql-library-first-development-approach",
      "title": "Neo4j GraphQL library First Development approach"
    },
    {
      "tags": ["amazon-ec2", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1706297620,
          "post_id": 77888556,
          "comment_id": 137313207,
          "link": "https://stackoverflow.com/questions/77888556/neo4j-fails-to-start#comment137313207_77888556"
        },
        {
          "owner": {
            "reputation": 29,
            "user_id": 19281880,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
            "display_name": "Raha",
            "link": "https://stackoverflow.com/users/19281880/raha"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706310694,
          "post_id": 77888556,
          "comment_id": 137314835,
          "link": "https://stackoverflow.com/questions/77888556/neo4j-fails-to-start#comment137314835_77888556"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706314658,
          "post_id": 77888556,
          "comment_id": 137315122,
          "link": "https://stackoverflow.com/questions/77888556/neo4j-fails-to-start#comment137315122_77888556"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1706314620,
          "creation_date": 1706314620,
          "answer_id": 77889580,
          "question_id": 77888556,
          "share_link": "https://stackoverflow.com/a/77889580",
          "body_markdown": "Make sure you delete all the existing neo4j data before reinstalling. Or, just use a new ECS instance.",
          "link": "https://stackoverflow.com/questions/77888556/neo4j-fails-to-start/77889580#77889580",
          "title": "Neo4j fails to start"
        }
      ],
      "owner": {
        "reputation": 29,
        "user_id": 19281880,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
        "display_name": "Raha",
        "link": "https://stackoverflow.com/users/19281880/raha"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77889580,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706314620,
      "creation_date": 1706296758,
      "question_id": 77888556,
      "share_link": "https://stackoverflow.com/q/77888556",
      "body_markdown": "Neo4j 5.15\r\njava 17.09\r\nMy neo4j (community server) was running on EC2 without an Issue. Last week we have a java update, but it was still fine afterward. Today when I imported a small data, all went well and when I tried to import the full data which is around 1.5G my process broke and neo4j became un-available. I removed it, reinstalled the same version and the recent version. Nothing is working. Any idea what is happening?\r\nerror: \r\n```\r\nJIT compiler: HotSpot 64-Bit Tiered Compilers\r\nVM Arguments: [-Xmx128m, -Dapp.name=neo4j, -Dapp.pid=8597, -Dapp.repo=/usr/share/neo4j/repo, -Dapp.home=/usr/share/neo4j, -Dbasedir=/usr/share/neo4j]\r\nConfiguration files used (ordered by priority):\r\n/etc/neo4j/neo4j.conf\r\n--------------------\r\norg.neo4j.cli.CommandFailedException: Neo4j is not running.\r\n\tat org.neo4j.server.startup.Bootloader$Dbms.status(Bootloader.java:529)\r\n\tat org.neo4j.server.startup.StatusCommand.execute(StatusCommand.java:37)\r\n\tat org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n\tat org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n\tat picocli.CommandLine.access$1500(CommandLine.java:148)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2170)\r\n\tat org.neo4j.server.startup.Neo4jAdminCommand.call(Neo4jAdminCommand.java:123)\r\n\tat org.neo4j.server.startup.Neo4jAdminCommand.call(Neo4jAdminCommand.java:42)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n\tat picocli.CommandLine.access$1500(CommandLine.java:148)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2170)\r\n\tat org.neo4j.server.startup.Neo4jCommand.main(Neo4jCommand.java:41)\r\n\tat org.neo4j.server.startup.Neo4jBoot.main(Neo4jBoot.java:30)```",
      "link": "https://stackoverflow.com/questions/77888556/neo4j-fails-to-start",
      "title": "Neo4j fails to start"
    },
    {
      "tags": ["database", "csv", "graph", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706297429,
          "post_id": 77887260,
          "comment_id": 137313174,
          "link": "https://stackoverflow.com/questions/77887260/invalid-input-expected-where-or-a-parameter-line-3-column-19-of#comment137313174_77887260"
        },
        {
          "owner": {
            "reputation": 59,
            "user_id": 18542427,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7648d706a3e19a2c4d0dfe15dfa93b5d?s=256&d=identicon&r=PG",
            "display_name": "Idkwhatywantmed",
            "link": "https://stackoverflow.com/users/18542427/idkwhatywantmed"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706619917,
          "post_id": 77887260,
          "comment_id": 137345767,
          "link": "https://stackoverflow.com/questions/77887260/invalid-input-expected-where-or-a-parameter-line-3-column-19-of#comment137345767_77887260"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706628356,
          "post_id": 77887260,
          "comment_id": 137347475,
          "link": "https://stackoverflow.com/questions/77887260/invalid-input-expected-where-or-a-parameter-line-3-column-19-of#comment137347475_77887260"
        }
      ],
      "owner": {
        "reputation": 59,
        "user_id": 18542427,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7648d706a3e19a2c4d0dfe15dfa93b5d?s=256&d=identicon&r=PG",
        "display_name": "Idkwhatywantmed",
        "link": "https://stackoverflow.com/users/18542427/idkwhatywantmed"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 20,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706282559,
      "creation_date": 1706282559,
      "question_id": 77887260,
      "share_link": "https://stackoverflow.com/q/77887260",
      "body_markdown": "I&#39;m just trying from such a CSV file\r\n\r\n    &quot;metaphor&quot;,&quot;entailmentDescription&quot;,&quot;example&quot;,&quot;sourceFrame&quot;,&quot;targetFrame&quot;,&quot;isASourceSubcaseOf&quot;\r\n    metaphor1,escription,example,sf,tf,sbsbs\r\n\r\n\r\nTo map it to a graph database with this command I&#39;m seeing from the tutorial\r\n\r\n    LOAD CSV FROM &#39;file:///Query(8).csv&#39; AS row\r\n    WITH row[0] AS metaphor, row[1] AS entailmentDescription, row[2] AS example, row[3] AS sourceFrame, row[4] AS targetFrame\r\n    MERGE (p:Metaphor {metaphor: metaphor})\r\n      SET p.entailmentDescription= entailmentDescription, p.example= example, p.sourceFrame= sourceFrame, p.targetFrame= targetFrame\r\n    RETURN count(p);\r\n\r\nI&#39;m not really understanding the error\r\n",
      "link": "https://stackoverflow.com/questions/77887260/invalid-input-expected-where-or-a-parameter-line-3-column-19-of",
      "title": "Invalid input : expected &quot;)&quot;, &quot;WHERE&quot;, &quot;{&quot; or a parameter (line 3, column 19 (offset: 184))... I&#39;m following the guide so what is happening?"
    },
    {
      "tags": ["database", "neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 48,
            "user_id": 23302132,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/027f685c29f47cb666f897e80762c40e?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Arne",
            "link": "https://stackoverflow.com/users/23302132/arne"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 3,
          "is_accepted": true,
          "score": 3,
          "last_activity_date": 1706265925,
          "creation_date": 1706265925,
          "answer_id": 77885643,
          "question_id": 77885164,
          "share_link": "https://stackoverflow.com/a/77885643",
          "body_markdown": "The following query will go through all relationships in the database, enumerate all labels on start and end node and then count how often these pairs appear:\r\n\r\n```cypher\r\nMATCH (a)-[r]-&gt;(b)\r\nUNWIND labels(a) AS Label_Start\r\nUNWIND labels(b) AS Label_End\r\nRETURN\r\n  type(r) AS RelationshipType,\r\n  Label_Start,\r\n  Label_End,\r\n  count([Label_Start, Label_End]) AS Count\r\n```",
          "link": "https://stackoverflow.com/questions/77885164/get-number-of-relationships-for-each-relationship-type-and-label-in-neo4j/77885643#77885643",
          "title": "Get number of relationships for each relationship type and label in Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706272664,
          "creation_date": 1706272664,
          "answer_id": 77886294,
          "question_id": 77885164,
          "share_link": "https://stackoverflow.com/a/77886294",
          "body_markdown": "Like with SQL the columns in Cypher are fixed (except if you use RETURN *), so it is hard to achieve a column per label-pair without knowing the possible label-pairs when you write the query.\r\n\r\nThere are other ways to solve it though. One is to have one row for each relationship type and label pair. Another one is to return a map for the different label pairs.\r\n\r\nAnother thing that we need to consider is that nodes can have many labels (and can even be without label).\r\n\r\nIf you have access to APOC Core you could do like this to get one row per node-pair-type:\r\n\r\n    MATCH (a)-[r]-&gt;(b)\r\n    WITH DISTINCT apoc.text.join(labels(a), &#39;_&#39;)+&#39;_&#39;+apoc.text.join(labels(b), &#39;_&#39;) AS Labels,r\r\n    RETURN type(r) AS Relationship_Type, Labels, COUNT(*) AS Count\r\n\r\nTo get the result as a map you could do:\r\n\r\n    MATCH (a)-[r]-&gt;(b)\r\n    WITH DISTINCT apoc.text.join(labels(a), &#39;_&#39;)+&#39;_&#39;+apoc.text.join(labels(b), &#39;_&#39;) AS Labels,r\r\n    WITH type(r) AS Relationship_Type, Labels, COUNT(*) AS c\r\n    RETURN Relationship_Type, apoc.map.fromPairs(collect([Labels, c])) AS Count",
          "link": "https://stackoverflow.com/questions/77885164/get-number-of-relationships-for-each-relationship-type-and-label-in-neo4j/77886294#77886294",
          "title": "Get number of relationships for each relationship type and label in Neo4j"
        }
      ],
      "owner": {
        "reputation": 324,
        "user_id": 2351983,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9bd16ff26298f01be75641d2e70b8896?s=256&d=identicon&r=PG",
        "display_name": "luanpo1234",
        "link": "https://stackoverflow.com/users/2351983/luanpo1234"
      },
      "last_editor": {
        "reputation": 48,
        "user_id": 23302132,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/027f685c29f47cb666f897e80762c40e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Arne",
        "link": "https://stackoverflow.com/users/23302132/arne"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77885643,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706273325,
      "creation_date": 1706260364,
      "last_edit_date": 1706273325,
      "question_id": 77885164,
      "share_link": "https://stackoverflow.com/q/77885164",
      "body_markdown": "I have this query:\r\n```\r\nMATCH (a:Label_A)-[r]-(b:Label_B)\r\nRETURN type(r) AS Relationship_Type, COUNT(*) AS Count\r\n```\r\n\r\nWhich yields a table with headers *Relationship_Type* and *Count* and the count for each type of relationship. &lt;br /&gt;\r\nI would like to  expand this table to have the counts for each type of label, so not just between `Label_A` and `Label_B`, but also `Label_A` and `Label_C`, `Label_B` and `Label_C`, etc. With corresponding columns such as `Count_Label_B_Label_C` for each possible combination. &lt;br /&gt;\r\nHow could that be achieved?",
      "link": "https://stackoverflow.com/questions/77885164/get-number-of-relationships-for-each-relationship-type-and-label-in-neo4j",
      "title": "Get number of relationships for each relationship type and label in Neo4j"
    },
    {
      "tags": ["windows", "neo4j", "network-drive", "neo4j-desktop"],
      "owner": {
        "reputation": 279,
        "user_id": 5095832,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/87319f40390f67c31d0b99012e07b638?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Krid",
        "link": "https://stackoverflow.com/users/5095832/krid"
      },
      "last_editor": {
        "reputation": 58717,
        "user_id": 4685471,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=256&d=identicon&r=PG",
        "display_name": "desertnaut",
        "link": "https://stackoverflow.com/users/4685471/desertnaut"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706618823,
      "creation_date": 1706199631,
      "last_edit_date": 1706618823,
      "question_id": 77881458,
      "share_link": "https://stackoverflow.com/q/77881458",
      "body_markdown": "we are fighting with a strange issue trying to install Neo4j Desktop version 1.5.9 on a Windows 11 client (local installation). \r\n\r\nThe software started once and asked for a data directory to store the database in. We used a network drive for this (Neo4j Desktop on the local Windows Program Folder for all users and the database location on a network drive). After that we got a &quot;Project failed to create error&quot; similar to this screen (here you see a different version but it is exactly the same error).\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nFrom that on it wasn&#39;t possible to start up Neo4j Desktop again\r\n\r\nWe deinstalled Neo4j Desktop completely. A new installation (even after cleaning up all the program fragments manually) did not solve the issue - Neo4j Desktop refuses to start up.\r\n\r\nWe checked the log files and it appears that Neo4j is still looking for the network drive set during the first installation. Even after we deleted the local neo4j files, cleaned the Windows registry of neo4j entries and ran a fresh installation the following message shows up in the log file:\r\n\r\n    App initialization error Error: EISDIR: illegal operation on a directory, symlink &#39;G:&lt;network drive path&gt;\\projects\\project-3a8d9382-0884-4fc0-8489-44e182a17445&#39; -&gt; &#39;G:&lt;network drive path&gt;Neo4j\\relate-data\\projects\\project-d577cc4b-8aae-4d57-8115-3c5d323cf956&#39;\r\n\r\nEven after a fresh installation Neo4j Desktop picks up this network path somehow. Does anybody have an idea which internal entries (beside from the program files) needs to be cleared to be able to start a fresh installation on the local machine?\r\n\r\nAs mentioned we have deinstalled the Neo4j Desktop, cleaned remaining files manually and even cleaned the Windows registry where we could. Unfortunately with no luck. A new installation of Neo4j Desktop on the same machine leaves us with the same situation. No startup of the Client possible anymore.\r\n\r\nAnd within the log there is always an error pointing to the network drive. \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9ikCu.png",
      "link": "https://stackoverflow.com/questions/77881458/neo4j-desktop-installation-error-app-initialization-error-error-eisdir",
      "title": "Neo4j Desktop installation error &quot;App initialization error Error: EISDIR&quot;"
    },
    {
      "tags": [
        "graph",
        "neo4j",
        "langchain",
        "large-language-model",
        "retrieval-augmented"
      ],
      "owner": {
        "reputation": 9078,
        "user_id": 180904,
        "user_type": "registered",
        "accept_rate": 83,
        "profile_image": "https://www.gravatar.com/avatar/ec0e877c4568a175614c5ab947ecf0c9?s=256&d=identicon&r=PG",
        "display_name": "Ashika Umanga Umagiliya",
        "link": "https://stackoverflow.com/users/180904/ashika-umanga-umagiliya"
      },
      "last_editor": {
        "reputation": 9078,
        "user_id": 180904,
        "user_type": "registered",
        "accept_rate": 83,
        "profile_image": "https://www.gravatar.com/avatar/ec0e877c4568a175614c5ab947ecf0c9?s=256&d=identicon&r=PG",
        "display_name": "Ashika Umanga Umagiliya",
        "link": "https://stackoverflow.com/users/180904/ashika-umanga-umagiliya"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 28,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706492135,
      "creation_date": 1706168941,
      "last_edit_date": 1706492135,
      "question_id": 77878254,
      "share_link": "https://stackoverflow.com/q/77878254",
      "body_markdown": "We are considering building knowlede-graph based Data Catalog solution to register meta-data of data-sources,tables (and other data assets) in our systems. Our goal is to build a Graph based RAG (Retrieval-Augmented Generation) on top of this knowledge-graph.\r\n\r\nUltimate goal is to provide an interface for data consumer to get comprehensive answers for the data-source/sets related queries.\r\n\r\n \r\nFor the POC, I came up with  following simplified meta-data model :\r\n[![enter image description here][1]][1]\r\n\r\n \r\nThen I modeled a knowledge-graph using Neo4J for the following sample table model:\r\n[![enter image description here][2]][2]\r\n\r\n \r\n\r\nResulting graph look like this:\r\n[![enter image description here][3]][3]\r\n\r\n \r\n\r\n Vector-index is also created for the nodes.\r\n \r\n\r\nNow I want to build a Graph based RAG, which can refer this knowledge-graph and provide comprehensive answer to the users.Queries can be like:\r\n\r\n**&quot;How can I find the top 5 shipping methods by user count&quot;**\r\n\r\n\r\nFor this query we can get the vector embedding and do a vector-search against the graph.This will  probably give &quot;shipping&quot; table and &quot;user&quot; table info from the graph-db.\r\n\r\nBut to construct the correct answer, we need to provide the complete relationship between *user*,*order* and *shipment* tables to the LLM.That is, depend on the query, we need to transverse the graph and build the connectivity sub-graph between tables/columns.\r\n\r\nMy questions are:\r\n\r\n 1. How can I build this connectivity sub-graph depend on the query?\r\n 2. Can I use [ReAct][4] (Reason and Action) based template to instruct LLM to use an Agent to query till it can find relationships ?\r\n 3. Does frameworks like LangChain or LLamaIndex provide this kind of functionality?\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BAn97.png\r\n  [2]: https://i.stack.imgur.com/wFcy7.png\r\n  [3]: https://i.stack.imgur.com/DI7IG.png\r\n  [4]: https://arxiv.org/abs/2210.03629",
      "link": "https://stackoverflow.com/questions/77878254/graph-rags-llms-and-building-connectivity-sub-graph",
      "title": "Graph RAGs , LLMs and building connectivity sub-graph"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 15053,
                "user_id": 18482310,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "nimrod serok",
                "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706192455,
              "post_id": 77878372,
              "comment_id": 137298643,
              "link": "https://stackoverflow.com/questions/77878217/shortest-path-on-a-topological-graph-with-default-weight/77878372#comment137298643_77878372"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706196496,
              "post_id": 77878372,
              "comment_id": 137299467,
              "link": "https://stackoverflow.com/questions/77878217/shortest-path-on-a-topological-graph-with-default-weight/77878372#comment137299467_77878372"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1706170233,
          "creation_date": 1706170233,
          "answer_id": 77878372,
          "question_id": 77878217,
          "share_link": "https://stackoverflow.com/a/77878372",
          "body_markdown": "If you don&#39;t care about the weight you may not have to use APOC at all, but instead the built-in Cypher shortestPath function:\r\n\r\n    MATCH path=shortestPath((:City {name: &#39;M&#252;nchen&#39;})-[d:DIRECT*]-(:City {name: &#39;Hamburg&#39;})) RETURN size(d) AS weight, path\r\n\r\nwhich gives this result\r\n\r\n    ╒══════╤══════════════════════════════════════════════════════════════════════╕\r\n    │weight│path                                                                  │\r\n    ╞══════╪══════════════════════════════════════════════════════════════════════╡\r\n    │2     │(:City {name: &quot;M&#252;nchen&quot;})&lt;-[:DIRECT]-(:City {name: &quot;Frankfurt&quot;})-[:DIR│\r\n    │      │ECT]-&gt;(:City {name: &quot;Hamburg&quot;})                                       │\r\n    └──────┴──────────────────────────────────────────────────────────────────────┘",
          "link": "https://stackoverflow.com/questions/77878217/shortest-path-on-a-topological-graph-with-default-weight/77878372#77878372",
          "title": "Shortest path on a topological graph with default weight"
        }
      ],
      "owner": {
        "reputation": 15053,
        "user_id": 18482310,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "nimrod serok",
        "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 18,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77878372,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706170233,
      "creation_date": 1706168403,
      "question_id": 77878217,
      "share_link": "https://stackoverflow.com/q/77878217",
      "body_markdown": "Using neo4j (with APOC 5.7), I&#39;m trying to find the shortest path on a topological graph (no location on the nodes), where the weight of each step is 1 by default. I don&#39;t want to limit the number of steps for the path, only the relationship type. \r\n\r\nThe [documentation](https://neo4j.com/labs/apoc/4.4/algorithms/path-finding-procedures/) is very flat:\r\n\r\n`apoc.algo.dijkstra` requires a weight on the relationship\r\n\r\n`apoc.algo.dijkstraWithDefaultWeight` throws: `There is no procedure with the name apoc.algo.dijkstraWithDefaultWeight`\r\n\r\n`apoc.algo.aStar` and `apoc.algo.aStarWithPoint` require points location or `lat` and `long` \r\n\r\n`apoc.algo.allSimplePaths` requires `maxNodes` and is a full graph search...\r\n\r\nFor example, for the graph:\r\n```\r\nCREATE (b:City {name:&#39;Berlin&#39;})\r\nCREATE (m:City {name:&#39;M&#252;nchen&#39;})\r\nCREATE (f:City {name:&#39;Frankfurt&#39;})\r\nCREATE (h:City {name:&#39;Hamburg&#39;})\r\nMERGE (b)-[:DIRECT]-(h)\r\nMERGE (b)-[:DIRECT]-(m)\r\nMERGE (b)-[:DIRECT]-(f)\r\nMERGE (f)-[:DIRECT]-(m)\r\nMERGE (f)-[:DIRECT]-(h)\r\n```\r\nI would like the get something like:\r\n```\r\n╒════════╤══════════════════════════════════════════════════════════════════════╕\r\n│weight  │path                                                                  │\r\n╞════════╪══════════════════════════════════════════════════════════════════════╡\r\n│2.0     │(:City {name: &quot;M&#252;nchen&quot;})&lt;-[:DIRECT]-(:City {name: &quot;Frankfurt&quot;})-     |\r\n│        │[:DIRECT]-&gt;(:City {name: &quot;Hamburg&quot;})                                  │       \r\n└────────┴──────────────────────────────────────────────────────────────────────┘\r\n```\r\nCurrently, the simplest option I see is to use `apoc.algo.dijkstra` and add a `weight` property with a value `1` on each relationship - which is absurd.\r\n\r\nAny advice?",
      "link": "https://stackoverflow.com/questions/77878217/shortest-path-on-a-topological-graph-with-default-weight",
      "title": "Shortest path on a topological graph with default weight"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1706050132,
          "last_edit_date": 1706050132,
          "creation_date": 1706047480,
          "answer_id": 77869514,
          "question_id": 77869128,
          "share_link": "https://stackoverflow.com/a/77869514",
          "body_markdown": "This query may work for your use case (assuming you only have one `Pantry`):\r\n\r\n    MATCH (:Pantry)-[has:HAS]-&gt;(i:Ingredient)&lt;-[required:REQUIRED]-(r:Recipe)\r\n    WHERE has.quantity &gt;= required.quantity\r\n    WITH r, COUNT(i) AS iCount\r\n    WHERE iCount = COUNT{ (r)-[:REQUIRED]-&gt;() }\r\n    RETURN r\r\n\r\nIt finds all ingredients in the pantry that have a sufficient quantity for any recipe, counts the number of such ingredients for each recipe, and efficiently filters for those recipes in which the sufficient-ingredient count equals the required-ingredient count.",
          "link": "https://stackoverflow.com/questions/77869128/neo4j-cypher-query-to-find-recipes-where-i-have-all-the-ingredients-and-a-suffic/77869514#77869514",
          "title": "Neo4j Cypher Query to find recipes where I have all the ingredients and a sufficient quantity"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706047736,
          "creation_date": 1706047736,
          "answer_id": 77869533,
          "question_id": 77869128,
          "share_link": "https://stackoverflow.com/a/77869533",
          "body_markdown": "This returns all recipes that the Pantry has enough ingredients for:\r\n```sql\r\nMATCH (r:Recipe)\r\nWHERE all(enough IN \r\n        COLLECT {\r\n          MATCH (r)-[req:REQUIRED]-&gt;(i:Ingredient)\r\n          RETURN EXISTS { \r\n            (i)&lt;-[h:HAS]-(:Pantry) WHERE req.requires &lt;= h.has\r\n          }\r\n        } WHERE enough) \r\nRETURN r",
          "link": "https://stackoverflow.com/questions/77869128/neo4j-cypher-query-to-find-recipes-where-i-have-all-the-ingredients-and-a-suffic/77869533#77869533",
          "title": "Neo4j Cypher Query to find recipes where I have all the ingredients and a sufficient quantity"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 23288805,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocISbcN7jGaGlvoWmNpJX-aacxEgFlqgzbVOBS1QM5Oi=k-s256",
        "display_name": "mr_mars",
        "link": "https://stackoverflow.com/users/23288805/mr-mars"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77869514,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706050132,
      "creation_date": 1706042154,
      "last_edit_date": 1706047392,
      "question_id": 77869128,
      "share_link": "https://stackoverflow.com/q/77869128",
      "body_markdown": "I am trying to write a query that will find recipes I can make based on 2 criteria. I need to have all the ingredients and I need to have a sufficient quantity of each ingredient.\r\n\r\nI have a graph structure like this: ![][1]\r\n\r\nI have recipe nodes with relationships to ingredients that specify the quantity of the ingredient I need. And I have Pantry node with relationships to ingredients that specify the quantity of the ingredient I actually have.\r\n\r\nI am trying to use the following query, but it is not handling quantities correctly, so it is returning recipes even if I don&#39;t have enough of all the ingredients.\r\n\r\n```\r\nMATCH (p:Pantry)-[has:HAS]-&gt;(i:Ingredient)\r\nWITH COLLECT(i) AS pantry_ingredients, COLLECT(has) AS pantry_quantity\r\nMATCH (r:Recipe)-[requires:REQUIRED]-&gt;(i:Ingredient)\r\n\r\nWITH pantry_ingredients, pantry_quantity, r, COLLECT(i) AS recipe_ingredients\r\nWHERE ALL(x IN recipe_ingredients WHERE x IN pantry_ingredients AND EXISTS{\r\n    MATCH (:Pantry)-[has:HAS]-&gt;(:Ingredient {name: x.name})&lt;-[requires:REQUIRED]-(:Recipe)      \r\n    WHERE has.quantity &gt;= requires.quantity})\r\n    \r\nRETURN r\r\n```\r\n\r\nHow can I modify this to correctly filter out recipes based on having the needed quantity?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lfM59.png",
      "link": "https://stackoverflow.com/questions/77869128/neo4j-cypher-query-to-find-recipes-where-i-have-all-the-ingredients-and-a-suffic",
      "title": "Neo4j Cypher Query to find recipes where I have all the ingredients and a sufficient quantity"
    },
    {
      "tags": ["indexing", "neo4j", "neo4j-java-api"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706029227,
          "post_id": 77865854,
          "comment_id": 137276503,
          "link": "https://stackoverflow.com/questions/77865854/how-does-the-neo4j-range-index-btree-work-after-deletion-of-nodes#comment137276503_77865854"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706018616,
          "creation_date": 1706018616,
          "answer_id": 77866881,
          "question_id": 77865854,
          "share_link": "https://stackoverflow.com/a/77866881",
          "body_markdown": "If I understand you correctly, you are measuring the performance of the `MATCH` _and_ the `DELETE` of the matched nodes. As it says in the docs [here](https://neo4j.com/docs/cypher-manual/current/indexes/search-performance-indexes/using-indexes/#over-indexing), that shouldn&#39;t be surprising, as indexes will slow down writes: \r\n\r\n&gt; **Slower write queries**: adding indexes impacts the performance of write queries. This is because indexes are updated with each write query. If a system needs to perform a lot of writes quickly, it may be counterproductive to have an index on the affected data entities. In other words, if write performance is crucial for a particular use case, it may be beneficial to only add indexes where they are necessary for read purposes.",
          "link": "https://stackoverflow.com/questions/77865854/how-does-the-neo4j-range-index-btree-work-after-deletion-of-nodes/77866881#77866881",
          "title": "How Does the Neo4j Range Index BTREE work after deletion of nodes"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 22,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706018616,
      "creation_date": 1706008299,
      "last_edit_date": 1706009855,
      "question_id": 77865854,
      "share_link": "https://stackoverflow.com/q/77865854",
      "body_markdown": "I have a query that matches few nodes each time it runs.This query runs around 50,000 times in my program.After which I have designed a loop to delete the nodes that i have matched in a separate query .Each match and delete query is within a block of code that runs around 50,000 times.Considering I have created indexes for all the nodeLabels on the property that i am using to query the nodes,how will the presence of a query affect performance.\r\nAfter testing it for myself I have observed that time taken for the program to run is more after index creation when compared to running it before the creation of index.\r\nIs this possible?\r\nShouldn&#39;t indexes improve the performance.\r\n\r\nI have read that range indexed work internally using a BTree.Does the BTree get modified after each delete?\r\nIs that the reason for time increase?",
      "link": "https://stackoverflow.com/questions/77865854/how-does-the-neo4j-range-index-btree-work-after-deletion-of-nodes",
      "title": "How Does the Neo4j Range Index BTREE work after deletion of nodes"
    },
    {
      "tags": ["kotlin", "android-studio", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 7992,
            "user_id": 2650436,
            "user_type": "registered",
            "accept_rate": 80,
            "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
            "display_name": "meistermeier",
            "link": "https://stackoverflow.com/users/2650436/meistermeier"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706092167,
          "post_id": 77855812,
          "comment_id": 137283804,
          "link": "https://stackoverflow.com/questions/77855812/execution-failed-for-task-appmergeextdexdebug-failed-to-transform-neo4j-jav#comment137283804_77855812"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23277731,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKv95uibLK0qNYiJ9JBCYKDzAmFi22qL5xqmg22APjH=k-s256",
        "display_name": "Nicolae Dirva",
        "link": "https://stackoverflow.com/users/23277731/nicolae-dirva"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 17,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1705945080,
      "creation_date": 1705856782,
      "last_edit_date": 1705945080,
      "question_id": 77855812,
      "share_link": "https://stackoverflow.com/q/77855812",
      "body_markdown": "I have this error when trying to establish a connection between the database and the project in Android Studio. I added the following line in the build.gradle.kts: implementation(&quot;org.neo4j.driver:neo4j-java-driver:5.12.0&quot;).\r\nHow can i resolved this?\r\n\r\nExecution failed for task &#39;:app:mergeExtDexDebug&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n   &gt; Failed to transform neo4j-java-driver-5.12.0.jar (org.neo4j.driver:neo4j-java-driver:5.12.0) to match attributes {artifactType=android-dex, asm-transformed-variant=NONE, dexing-enable-desugaring=true, dexing-enable-jacoco-instrumentation=false, dexing-is-debuggable=true, dexing-min-sdk=24, org.gradle.category=library, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\r\n      &gt; Execution failed for DexingNoClasspathTransform: C:\\Users\\nicol\\.gradle\\caches\\modules-2\\files-2.1\\org.neo4j.driver\\neo4j-java-driver\\5.12.0\\80cf488db020ca5cf8edadb384c1a652e80d33a\\neo4j-java-driver-5.12.0.jar.\r\n         &gt; Error while dexing.\r\n\r\nI try to add\r\n\r\nandroid {\r\n    defaultConfig {\r\n        multiDexEnabled true\r\n    }\r\n}\r\n\r\nbut did&#39;t work",
      "link": "https://stackoverflow.com/questions/77855812/execution-failed-for-task-appmergeextdexdebug-failed-to-transform-neo4j-jav",
      "title": "Execution failed for task &#39;:app:mergeExtDexDebug&#39;. Failed to transform neo4j-java-driver-5.12.0.jar"
    },
    {
      "tags": ["graph", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 552,
                "user_id": 10755618,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3f5b603a7c9b4ee43abf5ea774d412d4?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Erdem Tuna",
                "link": "https://stackoverflow.com/users/10755618/erdem-tuna"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705856067,
              "post_id": 77855696,
              "comment_id": 137254597,
              "link": "https://stackoverflow.com/questions/77855511/neo4j-retrieve-nodes-of-graph-components/77855696#comment137254597_77855696"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1705854870,
          "creation_date": 1705854870,
          "answer_id": 77855696,
          "question_id": 77855511,
          "share_link": "https://stackoverflow.com/a/77855696",
          "body_markdown": "You can do it using the GDS strongly connected components procedure after projecting the relationships as undirected:\r\n```lang-cypher\r\n// Project the CONTAINS relationships as undirected so that traversals \r\n// disregard the directions\r\nCALL gds.graph.project(\r\n       &#39;components&#39;, \r\n       [&#39;NodeA&#39;, &#39;NodeB&#39;], \r\n       {CONTAINS: {orientation: &#39;UNDIRECTED&#39;}}\r\n);\r\n\r\n// Only show the NodeA nodes using the node:NodeA label predicate\r\nCALL gds.scc.stream(&#39;components&#39;, {})\r\nYIELD nodeId, componentId AS component\r\nWITH gds.util.asNode(nodeId) AS node, component \r\nWHERE node:NodeA \r\nRETURN node, component \r\nORDER BY component;\r\n```\r\n\r\nResults using your data:\r\n```\r\n+----------------------------------+\r\n| node                 | component |\r\n+----------------------------------+\r\n| (:NodeA {name: &quot;1&quot;}) | 0         |\r\n| (:NodeA {name: &quot;2&quot;}) | 0         |\r\n| (:NodeA {name: &quot;3&quot;}) | 0         |\r\n| (:NodeA {name: &quot;4&quot;}) | 0         |\r\n| (:NodeA {name: &quot;5&quot;}) | 4         |\r\n| (:NodeA {name: &quot;6&quot;}) | 4         |\r\n+----------------------------------+\r\n```",
          "link": "https://stackoverflow.com/questions/77855511/neo4j-retrieve-nodes-of-graph-components/77855696#77855696",
          "title": "Neo4j - Retrieve nodes of graph components"
        }
      ],
      "owner": {
        "reputation": 552,
        "user_id": 10755618,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3f5b603a7c9b4ee43abf5ea774d412d4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Erdem Tuna",
        "link": "https://stackoverflow.com/users/10755618/erdem-tuna"
      },
      "last_editor": {
        "reputation": 552,
        "user_id": 10755618,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3f5b603a7c9b4ee43abf5ea774d412d4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Erdem Tuna",
        "link": "https://stackoverflow.com/users/10755618/erdem-tuna"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77855696,
      "answer_count": 1,
      "score": 2,
      "last_activity_date": 1705854870,
      "creation_date": 1705851924,
      "last_edit_date": 1705852943,
      "question_id": 77855511,
      "share_link": "https://stackoverflow.com/q/77855511",
      "body_markdown": "I have the following graph structure in neo4j.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see, there are two components in this graph. I want to retrieve the blue nodes (nodes of type `NodeA` in the example) with their respective component. For the example, `4, 3, 2, 1` and `6, 5`.\r\n\r\nI tried `gcc` and `wcc` of neo4j, however it failed, maybe I could not use it properly. Besides, I tried writing custom queries using cypher, however, my results were not even close to the result that I wanted.\r\n\r\nYou can simulate the graph with the following commands.\r\n```\r\nCREATE (a:NodeA {name: &quot;1&quot;});\r\nCREATE (a:NodeA {name: &quot;2&quot;});\r\nCREATE (a:NodeA {name: &quot;3&quot;});\r\nCREATE (a:NodeA {name: &quot;4&quot;});\r\nCREATE (a:NodeA {name: &quot;5&quot;});\r\nCREATE (a:NodeA {name: &quot;6&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;11&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;12&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;13&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;14&quot;});\r\nMATCH (a:NodeA {name: &quot;1&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;11&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;2&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;11&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;3&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;11&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;3&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;12&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;4&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;12&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;5&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;13&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;5&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;14&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;6&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;14&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lcZu8.png",
      "link": "https://stackoverflow.com/questions/77855511/neo4j-retrieve-nodes-of-graph-components",
      "title": "Neo4j - Retrieve nodes of graph components"
    },
    {
      "tags": ["docker", "docker-compose", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705789900,
          "post_id": 77852179,
          "comment_id": 137249844,
          "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker#comment137249844_77852179"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 17751139,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiptDBBZFSL430HmuedXwGn2neBUw-RIKU2eO1b=k-s256",
            "display_name": "Xermiz",
            "link": "https://stackoverflow.com/users/17751139/xermiz"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705850703,
          "post_id": 77852179,
          "comment_id": 137254002,
          "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker#comment137254002_77852179"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 17751139,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiptDBBZFSL430HmuedXwGn2neBUw-RIKU2eO1b=k-s256",
            "display_name": "Xermiz",
            "link": "https://stackoverflow.com/users/17751139/xermiz"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705850791,
          "post_id": 77852179,
          "comment_id": 137254012,
          "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker#comment137254012_77852179"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 17751139,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiptDBBZFSL430HmuedXwGn2neBUw-RIKU2eO1b=k-s256",
            "display_name": "Xermiz",
            "link": "https://stackoverflow.com/users/17751139/xermiz"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705850869,
          "post_id": 77852179,
          "comment_id": 137254024,
          "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker#comment137254024_77852179"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705869547,
          "post_id": 77852179,
          "comment_id": 137256023,
          "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker#comment137256023_77852179"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 13,
            "user_id": 17751139,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiptDBBZFSL430HmuedXwGn2neBUw-RIKU2eO1b=k-s256",
            "display_name": "Xermiz",
            "link": "https://stackoverflow.com/users/17751139/xermiz"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705860196,
          "creation_date": 1705860196,
          "answer_id": 77856014,
          "question_id": 77852179,
          "share_link": "https://stackoverflow.com/a/77856014",
          "body_markdown": "After researching for a long time and doing several tests I found the solution. was to create a shared volume with the bind option pointing to where these folders are referenced. Here I leave the code of my docker-composa file in case someone else runs into this problem.\r\nGreetings\r\n\r\n    version: &quot;3.8&quot;\r\n    services:  \r\n      # Noe4j database config\r\n      neo4j:\r\n        container_name: neo4j_social_seed_db \r\n        image: neo4j:5.15.0-enterprise\r\n        ports:\r\n          - &quot;7474:7474&quot;\r\n          - &quot;7687:7687&quot;\r\n        restart: always\r\n        environment:\r\n          - NEO4J_AUTH=neo4j/neo4jSocial\r\n          - NEO4J_ACCEPT_LICENSE_AGREEMENT=yes\r\n          - NEO4J_server.memory.pagecache.size=1G\r\n          - NEO4J_server.directories.import=import\r\n        volumes:\r\n          - ./neo4j/data:/data\r\n          - ./neo4j/conf:/conf\r\n          - ./neo4j/logs:/logs\r\n          - ./neo4j/plugins:/plugins\r\n          - import_data:/import\r\n        networks:\r\n          - net\r\n      # Social Seed Api in Java config\r\n      social-seed-app:\r\n        container_name: app_social_seed\r\n        image: social-seed:0.0.1\r\n        build: \r\n          context: ./backend\r\n        ports:\r\n          - &quot;8081:8081&quot;\r\n        environment:\r\n          - DATABASE_URI=bolt://neo4j:7687\r\n          - DATABASE_USERNAME=neo4j\r\n          - DATABASE_PASSWORD=neo4jSocial\r\n        depends_on:\r\n          - neo4j\r\n        networks:\r\n          - net\r\n      # Fake Graph config\r\n      fake-graph:\r\n        container_name: fake_graph_service\r\n        image: python:3.11.2-slim\r\n        build: \r\n          context: ./fake_graph    \r\n        volumes:\r\n          - ./fake_graph:/app\r\n          - import_data:/app/temp\r\n        depends_on:\r\n          - neo4j\r\n        environment:\r\n          - GENERATE_FAKE_GRAPH\r\n          - DATABASE_URI=bolt://neo4j:7687\r\n        command: &gt;\r\n          sh -c &quot;if [ &#39;$GENERATE_FAKE_GRAPH&#39; = &#39;true&#39; ]; then python /app/generate.py; else sleep infinity; fi&quot;    \r\n        networks:\r\n          - net\r\n    volumes:\r\n      import_data:\r\n        driver_opts:\r\n          o: bind\r\n    networks:\r\n      net:",
          "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker/77856014#77856014",
          "title": "Neo4j Import folder shared between services in docker"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 17751139,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiptDBBZFSL430HmuedXwGn2neBUw-RIKU2eO1b=k-s256",
        "display_name": "Xermiz",
        "link": "https://stackoverflow.com/users/17751139/xermiz"
      },
      "comment_count": 5,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705860196,
      "creation_date": 1705774712,
      "question_id": 77852179,
      "share_link": "https://stackoverflow.com/q/77852179",
      "body_markdown": "I am currently doing an open source project that is a social network and when I am setting up the docker-compose I find myself stuck in a problem.\r\n\r\nI have my neo4j service and I have a python service that generates a fake graph for me.\r\nThen i need the import folder of neo4j have the temp folder of fake_graph service in real time.\r\n\r\nThe service that generates the fake graph works as follows:\r\nFor each action block (create users, create friends, ...) first create the datasets in .csv files (in a folder called temp) and then import them into neo4j.\r\n\r\nSo my problem is how do I ensure that neo4j, in its import folder, receives the files that are being dynamically created in the temp folder of the fake_graph service.\r\n\r\nthis is my docker-compose code:\r\n\r\n```\r\nversion: &quot;3.8&quot;\r\nservices:\r\n  # Noe4j database config\r\n  neo4j:\r\n    container_name: neo4j_social_seed_db \r\n    image: neo4j:5.15.0-enterprise\r\n    ports:\r\n      - &quot;7474:7474&quot;\r\n      - &quot;7687:7687&quot;\r\n    restart: always\r\n    environment:\r\n      - NEO4J_AUTH=neo4j/neo4jSocial\r\n      - NEO4J_ACCEPT_LICENSE_AGREEMENT=yes\r\n      - NEO4J_server.memory.pagecache.size=1G\r\n      - NEO4J_server.directories.import=import\r\n    volumes:\r\n      - ./neo4j/data:/data\r\n      - ./neo4j/conf:/conf\r\n      - ./neo4j/logs:/logs\r\n      - ./neo4j/plugins:/plugins\r\n      - ./fake-graph/app/temp:/import\r\n    networks:\r\n      - net\r\n  # Social Seed Api in Java config\r\n  social-seed-app:\r\n    container_name: app_social_seed\r\n    image: social-seed:0.0.1\r\n    build: \r\n      context: ./backend\r\n    ports:\r\n      - &quot;8081:8081&quot;\r\n    environment:\r\n      - DATABASE_URI=bolt://neo4j:7687\r\n      - DATABASE_USERNAME=neo4j\r\n      - DATABASE_PASSWORD=neo4jSocial\r\n    depends_on:\r\n      - neo4j\r\n    networks:\r\n      - net\r\n  # Fake Graph config\r\n  fake-graph:\r\n    container_name: fake_graph_service\r\n    image: python:3.11.2-slim\r\n    build: \r\n      context: ./fake_graph    \r\n    volumes:\r\n      - ./fake_graph:/app\r\n    depends_on:\r\n      - neo4j\r\n    environment:\r\n      - GENERATE_FAKE_GRAPH\r\n      - DATABASE_URI=bolt://neo4j:7687\r\n    command: &gt;\r\n      sh -c &quot;if [ &#39;$GENERATE_FAKE_GRAPH&#39; = &#39;true&#39; ]; then python /app/generate.py; else sleep infinity; fi&quot;    \r\n    networks:\r\n      - net\r\nnetworks:\r\n  net:\r\n```",
      "link": "https://stackoverflow.com/questions/77852179/neo4j-import-folder-shared-between-services-in-docker",
      "title": "Neo4j Import folder shared between services in docker"
    },
    {
      "tags": ["python", "neo4j", "knowledge-graph"],
      "owner": {
        "reputation": 11,
        "user_id": 23269586,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/e37cf489fe0ca7016a2a548ef9a19f99?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Romeo",
        "link": "https://stackoverflow.com/users/23269586/romeo"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 24,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1705674874,
      "creation_date": 1705674874,
      "question_id": 77846849,
      "share_link": "https://stackoverflow.com/q/77846849",
      "body_markdown": "I want to access my database (which is saved and runs in Neo4j Desktop) from a jupyterNotebook which is runing in jupyterLab. However I am getting this error:\r\n\r\n```\r\nServiceUnavailable: Couldn&#39;t connect to 127.0.0.1:7687 (resolved to ()):\r\nFailed to establish connection to ResolvedIPv4Address((&#39;127.0.0.1&#39;, 7687)) (reason [Errno 111] Connection refused)\r\n```\r\n\r\n**This is my code:\r\n**\r\n**Example how to connect with Neo4j\r\n**\r\n```\r\nfrom neo4j import GraphDatabase\r\nimport pandas as pd\r\n\r\nuri = &quot;bolt://127.0.0.1:7687&quot;\r\nusername = &quot;XXX&quot;\r\npassword = &quot;XXX&quot;\r\ndriver = GraphDatabase.driver(uri, auth=(username, password))\r\n\r\nquery = &quot;&quot;&quot;\r\nMATCH (t:Task)-[:BELONGS_TO]-&gt;(g:GroundTruth)\r\nRETURN t.name, g.id\r\nLIMIT 5\r\n&quot;&quot;&quot;\r\n\r\nwith driver.session() as session:\r\nresult = session.run(query)\r\ndata = pd.DataFrame(result.data())\r\n\r\nprint(data)\r\n```\r\n\r\nIf i run that code in VSC, it works perfectly; but not from JupyterLab.\r\n\r\nDoes someone know a sloution?\r\n\r\nI already did this changes in the Neo4j Settings:\r\n\r\n```\r\ndbms.connector.bolt.enabled=true\r\ndbms.connector.bolt.listen_address=0.0.0.0:7687\r\n```",
      "link": "https://stackoverflow.com/questions/77846849/how-to-connect-a-jupyternotebook-in-jupyterlab-with-neo4j",
      "title": "How to connect a jupyterNotebook in jupyterLab with Neo4j"
    },
    {
      "tags": ["neo4j", "neo4j-desktop"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 499,
            "user_id": 11334268,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/sABrO.png?s=256&g=1",
            "display_name": "jenny",
            "link": "https://stackoverflow.com/users/11334268/jenny"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1705568856,
          "creation_date": 1705568856,
          "answer_id": 77838141,
          "question_id": 77837312,
          "share_link": "https://stackoverflow.com/a/77838141",
          "body_markdown": "The latest Neo4j desktop won&#39;t let you download a 3.4 neo4j because 3.4 has been out of support for several years now.\r\n\r\nYou have what you need to install 3.4.12 though. Forget desktop and use the zip file you downloaded, that has everything you need. The 3.4 windows installation instructions are here:\r\nhttps://neo4j.com/docs/operations-manual/3.4/installation/windows/",
          "link": "https://stackoverflow.com/questions/77837312/how-to-use-neo4j-3-4-12-community-version-in-neo4j-desktop-1-5-8/77838141#77838141",
          "title": "How to Use Neo4j 3.4.12 Community Version in Neo4j Desktop 1.5.8?"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 23262005,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c4985808baacd1aabaec87921ac31414?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "GAIS",
        "link": "https://stackoverflow.com/users/23262005/gais"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77838141,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705568856,
      "creation_date": 1705559481,
      "question_id": 77837312,
      "share_link": "https://stackoverflow.com/q/77837312",
      "body_markdown": "Hello Stack Overflow community,\r\n\r\nI am currently working in a Windows environment and looking to use Neo4j 3.4.12 community version for my project. However, I have encountered a challenge with Neo4j Desktop. I am using Neo4j Desktop version 1.5.8, and it seems to support only 4.x versions of Neo4j community edition. I am seeking advice on how to run the 3.x version, specifically 3.4.12, on this version of Neo4j Desktop.\r\n\r\nAdditionally, I have downloaded the Neo4j-community-3.4.12-windows.zip file separately. Is there a way to load this file directly into Neo4j Desktop? I would appreciate any guidance on integrating this specific version of Neo4j into my current setup.\r\n\r\nI have not been able to find relevant documentation or previous questions addressing this specific scenario. Any insights or instructions would be greatly helpful.\r\n\r\nThank you in advance for your assistance!\r\n\r\nAfter installing Neo4j Desktop 1.5.8 on my Windows machine, I expected to be able to use the Neo4j 3.4.12 community version with it. My first step was to search for the 3.4.12 version within the Neo4j Desktop interface, expecting it to be available for installation or integration. However, to my surprise, I found that Neo4j Desktop only listed versions 4.x and above in its dropdown menu for database versions, with no option for earlier versions like 3.4.12.\r\n\r\nSubsequently, I downloaded the Neo4j-community-3.4.12-windows.zip file separately, thinking that I could manually add this version to Neo4j Desktop. I attempted to load this file into Neo4j Desktop, but there was no clear or straightforward option to integrate this external file. I was expecting an &#39;Import&#39; or &#39;Load&#39; feature within Neo4j Desktop that would allow me to use the downloaded 3.4.12 version, but I couldn&#39;t find such an option.\r\n\r\nAs a result, I&#39;m currently unable to use Neo4j 3.4.12 with Neo4j Desktop 1.5.8, which is a critical requirement for my project.",
      "link": "https://stackoverflow.com/questions/77837312/how-to-use-neo4j-3-4-12-community-version-in-neo4j-desktop-1-5-8",
      "title": "How to Use Neo4j 3.4.12 Community Version in Neo4j Desktop 1.5.8?"
    },
    {
      "tags": ["swift", "xcode", "neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 125,
                "user_id": 10930591,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/cf4acdaab78d1429a2b4f1e17fc58d9d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "XmalevolentX",
                "link": "https://stackoverflow.com/users/10930591/xmalevolentx"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705514741,
              "post_id": 77834509,
              "comment_id": 137217538,
              "link": "https://stackoverflow.com/questions/77834309/cannot-find-type-client-in-scope/77834509#comment137217538_77834509"
            },
            {
              "owner": {
                "reputation": 125,
                "user_id": 10930591,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/cf4acdaab78d1429a2b4f1e17fc58d9d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "XmalevolentX",
                "link": "https://stackoverflow.com/users/10930591/xmalevolentx"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1705515003,
              "post_id": 77834509,
              "comment_id": 137217579,
              "link": "https://stackoverflow.com/questions/77834309/cannot-find-type-client-in-scope/77834509#comment137217579_77834509"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 46534,
            "user_id": 9223839,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/5aa104090ed64a2bca28b0633877025b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Joakim Danielson",
            "link": "https://stackoverflow.com/users/9223839/joakim-danielson"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1705513523,
          "creation_date": 1705513523,
          "answer_id": 77834509,
          "question_id": 77834309,
          "share_link": "https://stackoverflow.com/a/77834509",
          "body_markdown": "The documentation doesn’t seem to be up to date and links to an old swift library.\r\n\r\nMake sure you use the new one at https://github.com/Neo4j-Swift/Neo4j-Swift\r\n\r\nAnd the class you are trying to use seems to have been renamed to BoltClient in the new version.",
          "link": "https://stackoverflow.com/questions/77834309/cannot-find-type-client-in-scope/77834509#77834509",
          "title": "Cannot find type &#39;Client&#39; in scope"
        }
      ],
      "owner": {
        "reputation": 125,
        "user_id": 10930591,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf4acdaab78d1429a2b4f1e17fc58d9d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "XmalevolentX",
        "link": "https://stackoverflow.com/users/10930591/xmalevolentx"
      },
      "last_editor": {
        "reputation": 125,
        "user_id": 10930591,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf4acdaab78d1429a2b4f1e17fc58d9d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "XmalevolentX",
        "link": "https://stackoverflow.com/users/10930591/xmalevolentx"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 63,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77834509,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705515039,
      "creation_date": 1705511532,
      "last_edit_date": 1705515039,
      "question_id": 77834309,
      "share_link": "https://stackoverflow.com/q/77834309",
      "body_markdown": "When following the neo4j documentation - https://neo4j.com/developer/swift/\r\n\r\nI get the following error on step two.\r\n\r\n&gt; Cannot find type &#39;Client&#39; in scope.\r\n\r\n```\r\nimport Foundation\r\nimport Theo\r\n\r\nclass Neo4jService {\r\n    \r\n    \r\nlet theo: Client = Client(baseURL: &quot;hostname.com&quot;, user: &quot;username&quot;, pass: &quot;password&quot;) \r\n//    With the instance hostname, username and password filled out.\r\n\r\n}\r\n```\r\n\r\nI can confirm I have added Theo as a package dependency.\r\n\r\n\r\nTried removing and readding the package. tried cleaning and rebuilding the project. Xcode just doesnt seem to want to pick up the new module for some reason, unless im messing up adding the package dependency?",
      "link": "https://stackoverflow.com/questions/77834309/cannot-find-type-client-in-scope",
      "title": "Cannot find type &#39;Client&#39; in scope"
    },
    {
      "tags": ["indexing", "neo4j", "graph-databases"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3,
                "user_id": 16505995,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/Xvm1S.jpg?s=256&g=1",
                "display_name": "Arkadiusz G&#243;recki",
                "link": "https://stackoverflow.com/users/16505995/arkadiusz-g%c3%b3recki"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705616000,
              "post_id": 77835440,
              "comment_id": 137232064,
              "link": "https://stackoverflow.com/questions/77833955/neo4j-range-index-vs-text-index-when-checking-membership-in-list-of-only-strin/77835440#comment137232064_77835440"
            },
            {
              "owner": {
                "reputation": 3,
                "user_id": 16505995,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/Xvm1S.jpg?s=256&g=1",
                "display_name": "Arkadiusz G&#243;recki",
                "link": "https://stackoverflow.com/users/16505995/arkadiusz-g%c3%b3recki"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705616452,
              "post_id": 77835440,
              "comment_id": 137232125,
              "link": "https://stackoverflow.com/questions/77833955/neo4j-range-index-vs-text-index-when-checking-membership-in-list-of-only-strin/77835440#comment137232125_77835440"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1705524697,
          "creation_date": 1705524697,
          "answer_id": 77835440,
          "question_id": 77833955,
          "share_link": "https://stackoverflow.com/a/77835440",
          "body_markdown": "From the [documentation][1] \r\n\r\n&gt; Even though text indexes do support other text queries, ENDS WITH or CONTAINS queries are the only ones for which this index type provides an advantage over a range index.\r\n\r\nIf you need CONTAINS, TEXT indexes are way faster than RANGE.\r\n\r\nThat said, based on your query, TEXT indexes are case sensitive and trying to lowercase the value of properties for comparison will prevent the index usage.\r\n\r\n```cypher\r\n// doesn&#39;t use the index\r\nWHERE toLower(n.text) CONTAINS &#39;my-input&#39;\r\n\r\n// uses the index\r\nWHERE n.text CONTAINS &#39;my-input&#39;\r\n```\r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/performance/index-configuration/#index-configuration-text",
          "link": "https://stackoverflow.com/questions/77833955/neo4j-range-index-vs-text-index-when-checking-membership-in-list-of-only-strin/77835440#77835440",
          "title": "Neo4j - Range index vs Text index when checking membership in list of only strings"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 16505995,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/Xvm1S.jpg?s=256&g=1",
        "display_name": "Arkadiusz G&#243;recki",
        "link": "https://stackoverflow.com/users/16505995/arkadiusz-g%c3%b3recki"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 40,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77835440,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705524697,
      "creation_date": 1705508530,
      "question_id": 77833955,
      "share_link": "https://stackoverflow.com/q/77833955",
      "body_markdown": "Example query:\r\n```\r\nWITH [&quot;sword&quot;, &quot;Sword&quot;, &quot;blade&quot;, &quot;Blade&quot;, &quot;katana&quot;, &quot;Katana&quot;] AS weapons\r\nMATCH (s:Set)\r\nWHERE s.name IN weapons\r\nRETURN s\r\n```\r\n[Neo4j documentation mentions](https://neo4j.com/docs/cypher-manual/current/planning-and-tuning/query-tuning/indexes/) that both Range index and Text index should be used when we check for list membership. Which one is actually better in the example above where the list contains only strings?\r\n\r\nI could not find information in Neo4j documentation about which index should I should choose to speed up these queries.\r\n\r\nWhat about a more compliacted example which uses `any()` with `CONTAINS`?:\r\n```\r\nWITH [&quot;sword&quot;, &quot;blade&quot;, &quot;katana&quot;] AS weapons\r\nMATCH (s:Set)\r\nWHERE ANY(piece IN weapons WHERE toLower(s.name) CONTAINS piece)\r\nRETURN s\r\n```",
      "link": "https://stackoverflow.com/questions/77833955/neo4j-range-index-vs-text-index-when-checking-membership-in-list-of-only-strin",
      "title": "Neo4j - Range index vs Text index when checking membership in list of only strings"
    },
    {
      "tags": ["foreach", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705486652,
          "post_id": 77831258,
          "comment_id": 137212065,
          "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j#comment137212065_77831258"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 7895932,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f077a1048ccdcde26be536be46db4de7?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "SIVASANKARI",
            "link": "https://stackoverflow.com/users/7895932/sivasankari"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705487149,
          "post_id": 77831258,
          "comment_id": 137212169,
          "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j#comment137212169_77831258"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 7895932,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f077a1048ccdcde26be536be46db4de7?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "SIVASANKARI",
            "link": "https://stackoverflow.com/users/7895932/sivasankari"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705487164,
          "post_id": 77831258,
          "comment_id": 137212173,
          "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j#comment137212173_77831258"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1705541220,
          "post_id": 77831258,
          "comment_id": 137220931,
          "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j#comment137220931_77831258"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705500124,
          "last_edit_date": 1705500124,
          "creation_date": 1705489171,
          "answer_id": 77831897,
          "question_id": 77831258,
          "share_link": "https://stackoverflow.com/a/77831897",
          "body_markdown": "You don&#39;t show where `signalTag` comes from, so I will just replicate it being available with a `WITH` clause at the start of the query. \r\n\r\nI am guessing that what you want is for every existing node whose property `signalTag` equals the `signalTag` value, you want to create a new node with property `tag` = `signalTag`. If the `IOType` of the existing node starts with `&#39;A&#39;`, then the new node gets the label `AnalogAlarm`, or if it starts with `&#39;D&#39;`, then it gets the `DigitalAlarm` label instead. The new node is then connected to the existing node(s) with an `IS_ALARM` relationship.\r\n\r\nIf that is true, you can achieve it with a couple of `CALL` subqueries:\r\n```sql\r\nWITH &#39;ABC&#39; AS signalTag\r\nCALL {\r\n    WITH signalTag\r\n    MATCH (i WHERE i.signalTag = signalTag AND i.IOType STARTS WITH &#39;A&#39;)\r\n    MERGE (aa:AnalogAlarm {tag: signalTag})\r\n    MERGE (i)-[:IS_ALARM]-&gt;(aa)\r\n}\r\nCALL {\r\n    WITH signalTag\r\n    MATCH (j WHERE j.signalTag = signalTag AND j.IOType STARTS WITH &#39;D&#39;)\r\n    MERGE (dig:DigitalAlarm {tag: signalTag})\r\n    MERGE (j)-[:IS_ALARM]-&gt;(dig)\r\n}\r\n```\r\nThe `CALL` subqueries are necessary so that the cardinality of the contained `MATCH` clauses don&#39;t affect each other.\r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j/77831897#77831897",
          "title": "FOREACH syntax in NEO4J"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705614671,
          "last_edit_date": 1705614671,
          "creation_date": 1705610949,
          "answer_id": 77842328,
          "question_id": 77831258,
          "share_link": "https://stackoverflow.com/a/77842328",
          "body_markdown": "Your query has many syntax errors and the use case is a bit too complex for the `FOREACH` clause, especially since there are better alternatives that were introduced to simplify such use cases.\r\n\r\n*Note: my answers assume that `signalTag` should actually be `i.signalTag`, in which case your `WHERE` tests are not needed.*\r\n\r\n### Snippet using [CALL subquery POST-UNION processing](https://neo4j.com/docs/cypher-manual/current/subqueries/call-subquery/#call-post-union):\r\n```\r\n...\r\n\r\nCALL {\r\n  WITH i\r\n  WITH i WHERE i.IOType STARTS WITH &#39;A&#39;\r\n  MERGE (a:AnalogAlarm {tag: i.signalTag})\r\n  MERGE (i)-[:IS_ALARM]-&gt;(a)\r\n  RETURN a\r\n\r\n  UNION ALL\r\n\r\n  WITH i\r\n  WITH i WHERE i.IOType STARTS WITH &#39;D&#39;\r\n  MERGE (a:DigitalAlarm {tag: i.signalTag})\r\n  MERGE (i)-[:IS_ALARM]-&gt;(a)\r\n  RETURN a\r\n\r\n  UNION ALL\r\n\r\n  WITH i\r\n  WITH i WHERE NOT LEFT(i.IOType, 1) IN [&#39;A&#39;, &#39;D&#39;]\r\n  RETURN NULL AS a\r\n}\r\n\r\n// Remainder of query\r\n...\r\n```\r\n\r\nThe remainder of the query can access `a`, which will be `NULL` if `i.IOType` does not start with &#39;A&#39; or &#39;D&#39;.\r\n\r\n### Snippet using [apoc.do.case](https://neo4j.com/docs/apoc/current/overview/apoc/apoc.do.case/)\r\n\r\n```\r\n...\r\n\r\nCALL apoc.do.case([\r\n  i.IOType STARTS WITH &#39;A&#39;,\r\n    &#39;MERGE(a:AnalogAlarm {tag: i.signalTag}) MERGE (i)-[:IS_ALARM]-&gt;(a) RETURN a&#39;,\r\n  i.IOType STARTS WITH &#39;D&#39;,\r\n    &#39;MERGE(a:DigitalAlarm {tag: i.signalTag}) MERGE (i)-[:IS_ALARM]-&gt;(a) RETURN a&#39;\r\n  ],\r\n  &#39;RETURN NULL AS a&#39;,\r\n  {i: i}\r\n) YIELD value\r\n\r\n// Remainder of query\r\n...\r\n```\r\n\r\nThe remainder of the query can access `a` (via `value.a`), which will be `NULL` if `i.IOType` does not start with &#39;A&#39; or &#39;D&#39;.",
          "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j/77842328#77842328",
          "title": "FOREACH syntax in NEO4J"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 7895932,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f077a1048ccdcde26be536be46db4de7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "SIVASANKARI",
        "link": "https://stackoverflow.com/users/7895932/sivasankari"
      },
      "last_editor": {
        "reputation": 3459,
        "user_id": 4136999,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/db7988a64f79dc8977b341b36a70a374?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "toyota Supra",
        "link": "https://stackoverflow.com/users/4136999/toyota-supra"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 49,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1705614671,
      "creation_date": 1705483465,
      "last_edit_date": 1705484522,
      "question_id": 77831258,
      "share_link": "https://stackoverflow.com/q/77831258",
      "body_markdown": "Error using the FOREACH syntax.\r\n\r\n    CASE WHEN i.IOType STARTS WITH &#39;D&#39; THEN [1] ELSE [] END AS isDigital,\r\n        CASE WHEN i.IOType STARTS WITH &#39;A&#39; THEN [1] ELSE [] END AS isAnalog \r\n           FOREACH(_ IN isAnalog | \r\n            MERGE(aa:AnalogAlarm {tag: signalTag })\r\n            WHERE i.signalTag CONTAINS aa.tag\r\n            MERGE (i)-[:IS_ALARM]-&gt;(aa))\r\n            FOREACH(_ IN isDigital | \r\n            MERGE(dig:DigitalAlarm {tag: signalTag })\r\n            WHERE i.signalTag CONTAINS dig.tag\r\n            MERGE (i)-[:IS_ALARM]-&gt;(dig))\r\n\r\nSo I am unable to use the WHERE clause in FOREACH. What would be the appropriate syntax?",
      "link": "https://stackoverflow.com/questions/77831258/foreach-syntax-in-neo4j",
      "title": "FOREACH syntax in NEO4J"
    },
    {
      "tags": ["neo4j", "cypher", "azure-openai", "openaiembeddings"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705477746,
          "creation_date": 1705477746,
          "answer_id": 77830710,
          "question_id": 77830323,
          "share_link": "https://stackoverflow.com/a/77830710",
          "body_markdown": "There are two versions of APOC, APOC Core and APOC Extended. APOC Core is officially supported by Neo4j and is available in Aura (the cloud hosted version of Neo4j), Extended is not. The embedding methods are, however, only available in APOC Extended, so one reason could be that you installed APOC Core.\r\n\r\nBut in version 5.15.0 of Neo4j you no longer need APOC to do embeddings, there are officially supported versions of the embedding procedures/functions with this version that are also available in Aura (or will be very soon).\r\n\r\nIf you host your own database you need to install a package called neo4j-genai-plugin-5.XX.0.jar (copy it from the products folder to plugins and restart Neo4j). In Aura they are available by default.\r\n\r\nThe embedding methods are now called:\r\n\r\n    genai.vector.encode\r\n    genai.vector.encodeBatch\r\n\r\nYou use them like this (assuming you use OpenAI. It also support VertexAI and AWS Bedrock):\r\n\r\n    WITH genai.vector.encode($phrase, &quot;OpenAI&quot;, {token: $apiKey}) AS embedding\r\n\r\nwhere $phrase is a single string to embed\r\n\r\nor\r\n\r\n    CALL genai.vector.encodeBatch([$phrase1, $phrase2], &quot;OpenAI&quot;, {token: $apiKey}) yield index, resource, vector\r\n\r\nif you have multiple phrases that you want to batch embed\r\n\r\nSo with your example it would be\r\n\r\n    WITH genai.vector.encode(&quot;Are there any news regarding return to office policies?&quot;, &quot;OpenAI&quot;, {token: &quot;{openai_api_key}&quot;}) AS embedding\r\n    MATCH (c:Chunk) WITH c, gds.similarity.cosine(c.embedding, embedding) AS score ORDER BY score DESC LIMIT 3 RETURN c.text, score",
          "link": "https://stackoverflow.com/questions/77830323/can-we-use-apoc-ml-openai-embediing-with-neoj-desktop/77830710#77830710",
          "title": "Can we use apoc.ml.openai.embediing with Neo$j desktop?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23256411,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/768e519eba430296035bcb5e7d4dc950?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Amit Pawar",
        "link": "https://stackoverflow.com/users/23256411/amit-pawar"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705477746,
      "creation_date": 1705472303,
      "question_id": 77830323,
      "share_link": "https://stackoverflow.com/q/77830323",
      "body_markdown": "I want to query neo4j database and get the results converted to natural language using LLM? \r\nCan it be done in neo4j desktop. I have installed APOC plugin ,but I  don&#39;t see any apoc.ml procedure in it.\r\n\r\nPrompt example:\r\n`#Are there any news regarding return to office policies?\r\nCALL apoc.ml.openai.embedding([&quot;Are there any news regarding return to office policies?&quot;], \r\n   &quot;{openai_api_key}&quot;) YIELD embedding\r\nMATCH (c:Chunk)\r\nWITH c, gds.similarity.cosine(c.embedding, embedding) AS score\r\nORDER BY score DESC LIMIT 3\r\nRETURN c.text, score`\r\n\r\nI am getting this error when i try using the above query in neo4j desktop:\r\nNeo.ClientError.Procedure.ProcedureNotFound\r\nThere is no procedure with the name `apoc.ml.openai.embedding` registered for this database instance. Please ensure you&#39;ve spelled the procedure name correctly and that the procedure is properly deployed.",
      "link": "https://stackoverflow.com/questions/77830323/can-we-use-apoc-ml-openai-embediing-with-neoj-desktop",
      "title": "Can we use apoc.ml.openai.embediing with Neo$j desktop?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-parallel-runtime"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1705483383,
          "creation_date": 1705483383,
          "answer_id": 77831248,
          "question_id": 77829427,
          "share_link": "https://stackoverflow.com/a/77831248",
          "body_markdown": "It is not guaranteed. Here is what the Cypher manual says about it:\r\n\r\n&gt; When ORDER BY is present on a WITH clause , the immediately following\r\n&gt; clause will receive records in the specified order. The order is not\r\n&gt; guaranteed to be retained after the following clause, unless that also\r\n&gt; has an ORDER BY subclause.\r\n\r\nSlotted and Pipelined will likely preserve ordering, even if not guaranteed, but Parallel will likely not.\r\n\r\nhttps://neo4j.com/docs/cypher-manual/current/clauses/order-by/#order-with",
          "link": "https://stackoverflow.com/questions/77829427/neo4j-cypher-order-by-in-the-middle-of-the-query-and-expected-behaviour-on-paral/77831248#77831248",
          "title": "Neo4j Cypher ORDER BY in the middle of the query and expected behaviour on PARALLEL runtime"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77831248,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1705483383,
      "creation_date": 1705452297,
      "question_id": 77829427,
      "share_link": "https://stackoverflow.com/q/77829427",
      "body_markdown": "In a Cypher query, I can insert `ORDER BY` in the middle of the query, for example\r\n\r\n    MATCH (p:Product)\r\n    WITH p\r\n    ORDER BY p.id DESC \r\n    LIMIT 5\r\n    MATCH (p)-[:CREATED_BY]-&gt;(u:User)\r\n    RETURN p.id, u.name\r\n\r\nOn the `SLOTTED` or `PIPELINED` runtime, I will receive properly ordered results. For example:\r\n\r\n    p.id | u.name\r\n    ---------------\r\n    5    | someName\r\n    4    | someName\r\n    3    | someName\r\n    2    | someName\r\n    1    | someName\r\n\r\nShould I expect the same result (maintaining the proper order) when using the `PARALLEL` runtime, even if I have additional `MATCH` statements after the `ORDER BY` clause?",
      "link": "https://stackoverflow.com/questions/77829427/neo4j-cypher-order-by-in-the-middle-of-the-query-and-expected-behaviour-on-paral",
      "title": "Neo4j Cypher ORDER BY in the middle of the query and expected behaviour on PARALLEL runtime"
    },
    {
      "tags": ["neo4j", "graph-databases", "neo4j-aura", "neovis"],
      "owner": {
        "reputation": 31,
        "user_id": 12235082,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD384l9Vw8D0cAiKmdBPXmRrDySLvzEqL3zK2_ydg=k-s256",
        "display_name": "Peter Plevko",
        "link": "https://stackoverflow.com/users/12235082/peter-plevko"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 28,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1705429519,
      "creation_date": 1705263664,
      "last_edit_date": 1705429519,
      "question_id": 77816577,
      "share_link": "https://stackoverflow.com/q/77816577",
      "body_markdown": "I am using NeoVis.js to visualize Neo4j graph databases. The visualization works fine when connecting to a local Neo4j instance, but I encounter issues when trying to connect to a Neo4j AuraDB instance. Specifically, not all arrows/relationships are displayed in the visualization.\r\n\r\n\r\nThis is how I connect to the database using NeoVis.\r\n\r\n```\r\nconst isAuraServer = import.meta.env.VITE_SERVER_URL === &#39;auradb&#39;\r\n\r\nonMounted(async () =&gt; {\r\n  let neoViz = null\r\n\r\n  const config = {\r\n    containerId: `viz${props.index}`,\r\n\r\n    neo4j: {\r\n      serverUrl: import.meta.env.VITE_SERVER_URL,\r\n      serverUser: import.meta.env.VITE_SERVER_USER,\r\n      serverPassword: import.meta.env.VITE_SERVER_PASSWORD,\r\n      driverConfig: {\r\n        encrypted: isAuraServer ? &#39;ENCRYPTION_ON&#39; : &#39;ENCRYPTION_OFF&#39;,\r\n        trust: &#39;TRUST_SYSTEM_CA_SIGNED_CERTIFICATES&#39;\r\n      }\r\n    },\r\n```\r\n\r\nLocal Neo4j:\r\n\r\n[![Local Neo4j](https://i.stack.imgur.com/WQykA.png)](https://i.stack.imgur.com/WQykA.png)\r\n\r\nRemote Neo4j Aura:\r\n\r\n[![Remote Neo4j Aura](https://i.stack.imgur.com/9ANIp.png)](https://i.stack.imgur.com/9ANIp.png)\r\n\r\nHere is the whole code\r\n\r\n```\r\n&lt;script setup lang=&quot;ts&quot;&gt;\r\nimport NeoVis from &#39;neovis.js/dist/neovis.js&#39;\r\nimport { onMounted } from &#39;vue&#39;\r\n\r\ninterface SelectedAnnotationInformation {\r\n  createdAt: string\r\n  shortcut: string\r\n  firebaseUserUID: string\r\n  name: string\r\n  description: string\r\n  id: string\r\n}\r\n\r\nconst props = defineProps({\r\n  index: Number,\r\n  selectedAnnotation: {\r\n    type: Array as () =&gt; SelectedAnnotationInformation[],\r\n    default: () =&gt; []\r\n  }\r\n})\r\n\r\nconst isAuraServer = import.meta.env.VITE_SERVER_URL === &#39;auradb&#39;\r\n\r\nonMounted(async () =&gt; {\r\n  let neoViz = null\r\n\r\n  const config = {\r\n    containerId: `viz${props.index}`,\r\n\r\n    neo4j: {\r\n      serverUrl: import.meta.env.VITE_SERVER_URL,\r\n      serverUser: import.meta.env.VITE_SERVER_USER,\r\n      serverPassword: import.meta.env.VITE_SERVER_PASSWORD,\r\n      driverConfig: {\r\n        encrypted: isAuraServer ? &#39;ENCRYPTION_ON&#39; : &#39;ENCRYPTION_OFF&#39;,\r\n        trust: &#39;TRUST_SYSTEM_CA_SIGNED_CERTIFICATES&#39;\r\n      }\r\n    },\r\n\r\n    visConfig: {\r\n      nodes: {\r\n        shape: &#39;circle&#39;,\r\n        size: 100,\r\n        font: {\r\n          color: &#39;black&#39;,\r\n          size: 10\r\n        },\r\n        color: {\r\n          border: &#39;#2B7CE9&#39;,\r\n          background: &#39;#97C2FC&#39;,\r\n          highlight: {\r\n            border: &#39;#red&#39;,\r\n            background: &#39;#D2E5FF&#39;\r\n          },\r\n          hover: {\r\n            border: &#39;#2B7CE9&#39;,\r\n            background: &#39;#D2E5FF&#39;\r\n          }\r\n        }\r\n      },\r\n      edges: {\r\n        color: {\r\n          color: &#39;#00ffff&#39;,\r\n          highlight: &#39;#ff0000&#39;\r\n        },\r\n        selectionWidth: 2,\r\n        length: 200,\r\n        width: 1,\r\n        arrows: {\r\n          to: { enabled: true }\r\n        }\r\n      },\r\n      physics: {\r\n        hierarchicalRepulsion: { avoidOverlap: 1 },\r\n        solver: &#39;repulsion&#39;,\r\n        repulsion: {\r\n          nodeDistance: 100\r\n        }\r\n      }\r\n    },\r\n\r\n    layout: {\r\n      improvedLayout: true,\r\n      randomSeed: 420,\r\n      hierarchical: {\r\n        enabled: true,\r\n        direction: &#39;DU&#39;,\r\n        sortMethod: &#39;directed&#39;,\r\n        nodeSpacing: 1000,\r\n        treeSpacing: 20,\r\n        levelSeparation: 250\r\n      }\r\n    },\r\n\r\n    labels: {\r\n      Annotation: {\r\n        label: &#39;name&#39;,\r\n        value: &#39;id&#39;,\r\n\r\n        [NeoVis.NEOVIS_ADVANCED_CONFIG]: {\r\n          function: {\r\n            title: (props: any) =&gt;\r\n              NeoVis.objectToTitleHtml(props, [\r\n                &#39;id&#39;,\r\n                &#39;name&#39;,\r\n                &#39;shortcut&#39;,\r\n                &#39;description&#39;,\r\n                &#39;createdAt&#39;,\r\n                &#39;firebaseUserUID&#39;\r\n              ]),\r\n            color: (node: any) =&gt; {\r\n              const selectedAnnotationIds = props.selectedAnnotation.map(\r\n                (annotation: any) =&gt; annotation.id\r\n              )\r\n              if (selectedAnnotationIds.includes(node.properties.id)) {\r\n                return &#39;#e74c3c&#39;\r\n              } else {\r\n                return &#39;#3498db&#39;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    relationships: {\r\n      RELATED_TO: {\r\n        value: &#39;weight&#39;,\r\n\r\n        [NeoVis.NEOVIS_ADVANCED_CONFIG]: {\r\n          static: {\r\n            label: &#39;RELATED_TO&#39;,\r\n            color: &#39;green&#39;,\r\n            font: {\r\n              background: &#39;none&#39;,\r\n              strokeWidth: &#39;0&#39;,\r\n              size: 10,\r\n              color: &#39;Black&#39;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    hierarchical_layout: true,\r\n    hierarchical_sort_method: &#39;directed&#39;,\r\n\r\n    initialCypher: `MATCH (start:Annotation {id: &#39;${props.selectedAnnotation[0].id}&#39;})\r\n                    OPTIONAL MATCH (a:Annotation)-[r:RELATED_TO*]-(start)\r\n                    RETURN a AS node, r AS relationship, start AS otherNode\r\n                    UNION\r\n                    MATCH (start:Annotation {id: &#39;${props.selectedAnnotation[0].id}&#39;})\r\n                    OPTIONAL MATCH (start)-[r:RELATED_TO*]-(b:Annotation)\r\n                    RETURN start AS node, r AS relationship, b AS otherNode`\r\n  }\r\n\r\n  neoViz = new NeoVis(config as any)\r\n  neoViz.render()\r\n})\r\n&lt;/script&gt;\r\n\r\n&lt;template&gt;\r\n  &lt;div\r\n    class=&quot;mx-auto h-full w-full flex justify-center border border-gray-300&quot;\r\n    :id=&quot;`viz${props.index}`&quot;\r\n  &gt;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;style scoped&gt;&lt;/style&gt;\r\n```\r\n\r\nI&#39;ve tried everything, but I have no idea where the problem might be. I&#39;m encountering a warning in the console, and I&#39;m unsure how to fix it. I&#39;m not certain if this is the root cause of the issue. The warning is as follows:\r\n\r\n```\r\nVisualizeAnnotationsComponent.vue:139 Neo4j driver is configured to use a secure WebSocket on an HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring the driver to not use encryption.\r\n```\r\n\r\nAny insights or suggestions on how to address this warning would be greatly appreciated.\r\n\r\nWhen I switched to paid Aura proffesional it fixed the problem any idea why ? ",
      "link": "https://stackoverflow.com/questions/77816577/neovis-js-not-displaying-all-relationships-when-connecting-to-auradb-neo4j-insta",
      "title": "NeoVis.js not displaying all relationships when connecting to AuraDB Neo4j instance"
    },
    {
      "tags": ["neo4j", "large-language-model", "apoc-extended"],
      "owner": {
        "reputation": 95,
        "user_id": 5406600,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/5e4ea87c5364f20f289569fe794c55bd?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "nanda kumar gowda",
        "link": "https://stackoverflow.com/users/5406600/nanda-kumar-gowda"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 12,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1705243438,
      "creation_date": 1705243438,
      "question_id": 77815472,
      "share_link": "https://stackoverflow.com/q/77815472",
      "body_markdown": "The documentation of Neo4j says, i can set embedding as node property. All works fine when the embedding text is &lt; 3k limit of as i can embed all text in one go and set as Neo4j node property. \r\n\r\nNot sure, how the same can be be done, If i have to split the embedding text(because of token limit) and then generate multiple list of embedded values? \r\n\r\nAny examples or pointers, will be of greathelp.\r\n\r\nThanks,\r\n",
      "link": "https://stackoverflow.com/questions/77815472/embedding-larger-token-text-3k-with-neo4j-apoc-ml-vertexai-embedding",
      "title": "Embedding Larger token text (&gt; 3k) with Neo4j apoc.ml.vertexai.embedding"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-parallel-runtime"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1705429387,
          "post_id": 77814894,
          "comment_id": 137205500,
          "link": "https://stackoverflow.com/questions/77814894/neo4j-on-parallel-runtime-returns-different-results-different-elements-order-c#comment137205500_77814894"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1705232676,
      "creation_date": 1705232676,
      "question_id": 77814894,
      "share_link": "https://stackoverflow.com/q/77814894",
      "body_markdown": "I am testing the new Neo4j PARALLEL runtime and am unable to pass my tests because my queries return different results (different element order) compared to SLOTTED or PIPELINED. \r\n\r\nFor example, in the following query, the result is dancing all of the time:\r\n\r\n```\r\nCYPHER runtime = parallel\r\nMATCH (dg:DecisionGroup {\r\n  id: -2\r\n})-[rdgd: CONTAINS ]-&gt; ( childD:Profile )\r\nMATCH (childD)-[mhvo:HAS_VOTE_ON]-(mc:Criterion)\r\nWHERE mc.id IN [9760, 9761, 9757, 9758, 9759] + []\r\nWITH childD , collect(mhvo) AS mhvos\r\nWHERE size(mhvos) &gt;= size([9760, 9761, 9757, 9758, 9759])\r\nWITH childD\r\nWHERE (childD.`active` = true )\r\nWITH childD\r\nWITH childD\r\nMATCH (childDStat:JobableStatistic {\r\n  jobableId: childD.id\r\n})\r\nWITH childD, childDStat\r\nUNWIND [9760, 9761, 9757, 9758, 9759] AS dCId\r\nWITH childD, childDStat, dCId + coalesce({}[toString(dCId)], []) AS cGroup\r\nWHERE NOT AlL(x IN cGroup\r\nWHERE x IN childDStat.zeroCriterionIds )\r\nWITH childD, childDStat, collect(cGroup) AS cGroups\r\nWHERE size(cGroups) &gt;= size([9760, 9761, 9757, 9758, 9759])\r\nUNWIND cGroups AS cGroup\r\nWITH childD, childDStat, cGroup\r\nWHERE ANY(x IN cGroup\r\nWHERE x IN childDStat.detailedCriterionIds)\r\nWITH childD, childDStat, collect(cGroup) AS cGroups\r\nWHERE size(cGroups) &gt;= size([9760, 9761, 9757, 9758, 9759])\r\nWITH childD, childDStat, size(cGroups) AS cGroupsSize, cGroups\r\nUNWIND cGroups AS cGroup\r\nWITH childD, childDStat, cGroups, cGroupsSize, cGroup\r\nUNWIND cGroup AS cId\r\nWITH childD, childDStat, cGroups, cGroupsSize, cGroup, cId, cGroup[0] AS cG0\r\nWITH childD, childDStat, cGroups, cGroupsSize, cGroup, cId, cG0, {\r\n  `9759`:1.0, `9758`:1.0, `9760`:1.0, `9761`:1.0, `9757`:1.0\r\n}[toString(cG0)] AS criterionAvgVoteWeight, {\r\n  `9759`:0, `9758`:0, `9760`:0, `9761`:0, `9757`:0\r\n}[toString(cG0)] AS criterionExperienceMonth\r\nWHERE (criterionAvgVoteWeight = 0 OR criterionAvgVoteWeight &lt;= childDStat[&#39;criterionAvgVoteWeights.&#39; + cId]) AND (criterionExperienceMonth = 0 OR criterionExperienceMonth &lt;= childDStat[&#39;criterionExperienceMonths.&#39; + cId])\r\nWITH childD, childDStat, cGroups, cGroupsSize, collect(cId) AS cIds\r\nUNWIND cGroups AS cGroup\r\nWITH childD, childDStat, cGroup, cGroupsSize, cIds\r\nWHERE ANY(x IN cIds\r\nWHERE x IN cGroup)\r\nWITH childD, childDStat, cGroupsSize, collect(cGroup) AS cGroups\r\nWHERE size(cGroups) &gt;= cGroupsSize\r\nWITH childD, childDStat\r\nUNWIND [9760, 9761, 9757, 9758, 9759] AS cId\r\nWITH childD, childDStat, cId, {\r\n  `9759`:1.0, `9758`:1.0, `9760`:1.0, `9761`:1.0, `9757`:1.0\r\n}[toString(cId)] AS criterionCoefficient\r\nWITH childD, sum(criterionCoefficient * childDStat[&#39;criterionAvgVoteWeights.&#39; + cId]) AS weight, sum(childDStat[&#39;criterionTotalVotes.&#39; + cId]) AS totalVotes, sum(criterionCoefficient) AS criterionCoefficientSum\r\nWITH childD, weight, totalVotes, criterionCoefficientSum\r\nWITH collect({`childD`:childD , `weight`:weight, `totalVotes`: totalVotes }) AS aggregate\r\nWITH aggregate, size(aggregate) AS count\r\nUNWIND aggregate AS item\r\nWITH count, item.childD AS childD , item.weight AS weight, item.totalVotes AS totalVotes\r\nMATCH (dg:DecisionGroup {\r\n  id: -2\r\n})-[rdgd: CONTAINS ]-&gt;(childD)\r\nOPTIONAL MATCH (childD)-[ru:CREATED_BY]-&gt;(u:User)\r\nOPTIONAL MATCH (jobable:Decision:Vacancy {\r\n  id: 4928\r\n})\r\nRETURN count, childD AS decision, dg, rdgd , u, ru , jobable.id AS jobableId , weight, totalVotes, [ (jobable)-[vg1:HAS_VOTE_ON]-&gt;(c1:Criterion) | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS jobableWeightedCriteria, [(jobable)-[:HAS_VOTE_ON]-&gt;(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE c1.id IN childD.detailedCriterionIds | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS weightedCriteria , [ (c1t:Translation:BaseEntity)&lt;-[rc1t: CONTAINS ]-(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE EXISTS ((jobable)-[:HAS_VOTE_ON]-&gt;(c1)) AND c1t.iso6391 = &#39;uk&#39; AND c1.id IN childD.detailedCriterionIds | {\r\n  entityId: toInteger(c1.id), translation: c1t\r\n} ] AS weightedCriteriaTranslations , [ (jobable)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS jobableCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS decisionCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(ce)), translation: trans\r\n} ] AS decisionCompositeEntitiesTranslations, [ (childD)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(childD.id), translation: trans\r\n} ] AS decisionTranslations, [ (rc:Criterion)-[*0]-&gt;()\r\nWHERE rc.id IN childD.replaceableCriterionIds | {\r\n  entity: rc\r\n} ] AS decisionReplaceableCriteria, [ (rc:Criterion)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE rc.id IN childD.replaceableCriterionIds AND trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(rc)), translation: trans\r\n} ] AS decisionReplaceableCriteriaTranslations, COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:POTENTIAL_PROFILE]-(childD) } AS potentialJobablesCount , COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:RELEVANT_PROFILE]-(childD) } AS relevantJobablesCount \r\n\r\nORDER BY weight DESC, childD.createdAt DESC SKIP 0\r\nLIMIT 100\r\n```\r\n\r\nWhen executed multiple times, this query returns records in arbitrary order with varying weights. One time weight=25 is on the first place.. another time - weight=10 on the first place. What could be the cause of this?\r\n\r\nWith `CYPHER runtime = pipelined` this query is working fine.\r\n\r\nI may be wrong, but it looks like the pattern comprehensive or COUNT subquery somehow affects the query ordering, specifically this part:\r\n\r\n```\r\n, [ (jobable)-[vg1:HAS_VOTE_ON]-&gt;(c1:Criterion) | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS jobableWeightedCriteria, [(jobable)-[:HAS_VOTE_ON]-&gt;(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE c1.id IN childD.detailedCriterionIds | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS weightedCriteria , [ (c1t:Translation:BaseEntity)&lt;-[rc1t: CONTAINS ]-(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE EXISTS ((jobable)-[:HAS_VOTE_ON]-&gt;(c1)) AND c1t.iso6391 = &#39;uk&#39; AND c1.id IN childD.detailedCriterionIds | {\r\n  entityId: toInteger(c1.id), translation: c1t\r\n} ] AS weightedCriteriaTranslations , [ (jobable)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS jobableCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS decisionCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(ce)), translation: trans\r\n} ] AS decisionCompositeEntitiesTranslations, [ (childD)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(childD.id), translation: trans\r\n} ] AS decisionTranslations, [ (rc:Criterion)-[*0]-&gt;()\r\nWHERE rc.id IN childD.replaceableCriterionIds | {\r\n  entity: rc\r\n} ] AS decisionReplaceableCriteria, [ (rc:Criterion)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE rc.id IN childD.replaceableCriterionIds AND trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(rc)), translation: trans\r\n} ] AS decisionReplaceableCriteriaTranslations, COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:POTENTIAL_PROFILE]-(childD) } AS potentialJobablesCount , COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:RELEVANT_PROFILE]-(childD) } AS relevantJobablesCount \r\n```\r\n\r\nHow to make the query working correctly on Neo4j PARALLEL runtime?",
      "link": "https://stackoverflow.com/questions/77814894/neo4j-on-parallel-runtime-returns-different-results-different-elements-order-c",
      "title": "Neo4j on PARALLEL runtime returns different results (different elements order) compared to SLOTTED or PIPELINED"
    },
    {
      "tags": ["docker", "maven", "neo4j", "neo4j-block-store"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 878,
            "user_id": 3952697,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6f711663b08cbcc7ea756a11d7857b16?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Dave Fauth",
            "link": "https://stackoverflow.com/users/3952697/dave-fauth"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1705184351,
          "creation_date": 1705184351,
          "answer_id": 77813285,
          "question_id": 77812198,
          "share_link": "https://stackoverflow.com/a/77813285",
          "body_markdown": "You can pass the format in as an environment variable like this:\r\n\r\n--env NEO4J_db_format=block",
          "link": "https://stackoverflow.com/questions/77812198/try-neo4j-s-next-gen-graph-native-store-format-and-docker-initialization/77813285#77813285",
          "title": "Try Neo4j’s Next-Gen Graph-Native Store Format and Docker initialization"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77813285,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705184351,
      "creation_date": 1705163317,
      "question_id": 77812198,
      "share_link": "https://stackoverflow.com/q/77812198",
      "body_markdown": "I&#39;m really excited to try out the new feature in Neo4j with the Block store format https://neo4j.com/developer-blog/neo4j-graph-native-store-format/\r\n\r\nCurrently, I have a question regarding my automated integration tests. I use Docker with the Docker Maven plugin. Is it possible to instruct Neo4j Docker to automatically create a database with a Block format (instead of the Record format)? If so, could you please provide guidance on how to achieve this? Thanks!",
      "link": "https://stackoverflow.com/questions/77812198/try-neo4j-s-next-gen-graph-native-store-format-and-docker-initialization",
      "title": "Try Neo4j’s Next-Gen Graph-Native Store Format and Docker initialization"
    },
    {
      "tags": ["spring-data-jpa", "neo4j", "spring-data-neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 3459,
            "user_id": 4136999,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/db7988a64f79dc8977b341b36a70a374?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "toyota Supra",
            "link": "https://stackoverflow.com/users/4136999/toyota-supra"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1705180242,
          "post_id": 77809929,
          "comment_id": 137178834,
          "link": "https://stackoverflow.com/questions/77809929/is-there-any-api-for-neo4j-like-jpaspecificationexecutor-api#comment137178834_77809929"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 7992,
                "user_id": 2650436,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
                "display_name": "meistermeier",
                "link": "https://stackoverflow.com/users/2650436/meistermeier"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705428319,
              "post_id": 77810182,
              "comment_id": 137205288,
              "link": "https://stackoverflow.com/questions/77809929/is-there-any-api-for-neo4j-like-jpaspecificationexecutor-api/77810182#comment137205288_77810182"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1705115392,
          "creation_date": 1705115392,
          "answer_id": 77810182,
          "question_id": 77809929,
          "share_link": "https://stackoverflow.com/a/77810182",
          "body_markdown": "[Spring Data JPA](https://spring.io/projects/spring-data-jpa/) is for *relational* databases. Since Neo4j is a *graph* database, you would need to use [Spring Data Neo4j](https://spring.io/projects/spring-data-neo4j/) (SDN) to get something functionally similar to JPA. However, JPA-specific interfaces like `JpaSpecificationExecutor` do not exist in SDN.",
          "link": "https://stackoverflow.com/questions/77809929/is-there-any-api-for-neo4j-like-jpaspecificationexecutor-api/77810182#77810182",
          "title": "is there any api for neo4j like JpaSpecificationExecutor api?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 13482307,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-6P3aNirrGh0/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJOhm-Zc4Cld1oZLfk7BWZkFEe0Tcg/photo.jpg?sz=256",
        "display_name": "Dilan Yilmaz",
        "link": "https://stackoverflow.com/users/13482307/dilan-yilmaz"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705115392,
      "creation_date": 1705106590,
      "last_edit_date": 1705114237,
      "question_id": 77809929,
      "share_link": "https://stackoverflow.com/q/77809929",
      "body_markdown": "I changed my oracle db to neo4J and I want to use `JpaSpecificationExecutor`, but it&#39;s not working for neo4j. Which packet do I have to use for specification filters? \r\n\r\n![enter image description here](https://i.stack.imgur.com/sanZo.png)",
      "link": "https://stackoverflow.com/questions/77809929/is-there-any-api-for-neo4j-like-jpaspecificationexecutor-api",
      "title": "is there any api for neo4j like JpaSpecificationExecutor api?"
    },
    {
      "tags": ["neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 51,
            "user_id": 22051375,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "florentin",
            "link": "https://stackoverflow.com/users/22051375/florentin"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705077436,
          "creation_date": 1705077436,
          "answer_id": 77808039,
          "question_id": 77807565,
          "share_link": "https://stackoverflow.com/a/77808039",
          "body_markdown": "I would suggest to use cypher projection (https://neo4j.com/docs/graph-data-science/current/management-ops/graph-creation/graph-project-cypher-projection/#cypher-aggregation-relationship-properties).\r\nThe linked example projects a graph with a relationship property. \r\n\r\nReplace your last return clause with the projection.\r\n",
          "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm/77808039#77808039",
          "title": "How to use result of cypher query output in GDS algorithm"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 188,
                "user_id": 8713442,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dqc8U.png?s=256&g=1",
                "display_name": "pbh",
                "link": "https://stackoverflow.com/users/8713442/pbh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705079286,
              "post_id": 77808186,
              "comment_id": 137169832,
              "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm/77808186#comment137169832_77808186"
            },
            {
              "owner": {
                "reputation": 188,
                "user_id": 8713442,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dqc8U.png?s=256&g=1",
                "display_name": "pbh",
                "link": "https://stackoverflow.com/users/8713442/pbh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705079780,
              "post_id": 77808186,
              "comment_id": 137169930,
              "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm/77808186#comment137169930_77808186"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 188,
                "user_id": 8713442,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dqc8U.png?s=256&g=1",
                "display_name": "pbh",
                "link": "https://stackoverflow.com/users/8713442/pbh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705100413,
              "post_id": 77808186,
              "comment_id": 137172724,
              "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm/77808186#comment137172724_77808186"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1705105663,
          "last_edit_date": 1705105663,
          "creation_date": 1705078982,
          "answer_id": 77808186,
          "question_id": 77807565,
          "share_link": "https://stackoverflow.com/a/77808186",
          "body_markdown": "You can&#39;t project virtual relationships to a GDS graph (your second query has other syntax errors but as the approach isn’t going to work, it&#39;s not worth fixing them).\r\n\r\nInstead you can use a `UNION` query (shown here in the `CALL` braces) to project both the `ACCESSED` relationships that already exist in your graph as well as the &#39;virtual&#39; `HAS_COMMON_DOCS` relations:\r\n\r\n```sql\r\nCALL {\r\n    MATCH (source:ClientInfo)-[:ACCESSED]-&gt;()&lt;-[:ACCESSED]-(target:ClientInfo)\r\n    WHERE source &lt; target\r\n    RETURN source, target, &#39;HAS_COMMON_DOCS&#39; AS relType, {commonDocs: count(*)} AS props\r\n    UNION\r\n    MATCH (source:ClientInfo)-[:ACCESSED]-&gt;(target)\r\n    RETURN source, target, &#39;ACCESSED&#39; AS relType, {} AS props\r\n}\r\nWITH gds.graph.project(\r\n    &#39;common_docs&#39;,\r\n    source,\r\n    target,\r\n    { \r\n        sourceNodeLabels: labels(source),\r\n        targetNodeLabels: labels(target),\r\n        relationshipProperties: props {.*},\r\n        relationshipType: relType \r\n    }\r\n) AS g\r\nRETURN g\r\n```\r\n\r\nYou can add `WHERE` clauses in the `UNION` query to filter on e.g. user ids etc. I left out `n1Docs` and `n2Docs` as they aren&#39;t used in your example.",
          "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm/77808186#77808186",
          "title": "How to use result of cypher query output in GDS algorithm"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705099272,
          "creation_date": 1705099272,
          "answer_id": 77809618,
          "question_id": 77807565,
          "share_link": "https://stackoverflow.com/a/77809618",
          "body_markdown": "GDS does not allow you to project virtual nodes or relationships. You can, however, use [Cypher projection](https://neo4j.com/docs/graph-data-science/current/management-ops/graph-creation/graph-project-cypher-projection/) to put relationships in the projection that do not actually exist in the database (along with the associated nodes), which may be equivalent to what you are trying to do.\r\n\r\nThis version of @FinbarGood&#39;s answer may do roughly what you are trying to do in your second query:\r\n\r\n    MATCH (n1:ClientInfo)-[:ACCESSED]-&gt;()&lt;-[:ACCESSED]-(n2:ClientInfo)\r\n    WHERE n1 &lt; n2 AND NOT 310962818 IN [n1.peopleCode, n2.peopleCode]\r\n    WITH n1, n2, COUNT(*) as commonDocs\r\n    WHERE commonDocs &gt;= 5\r\n    WITH gds.graph.project(\r\n        &#39;users&#39;,\r\n        n1, n2, \r\n        { relationshipProperties: {commonDocs: commonDocs},\r\n          relationshipType: &#39;HAS_COMMON_DOCS&#39; }\r\n    ) AS g\r\n    RETURN g.graphName AS graph, g.nodeCount AS nodes, g.relationshipCount AS rels;\r\n\r\nNotes:\r\n- `n1 &lt; n2` lets us avoid using the same pair of `ClientInfo` nodes twice.\r\n- The projection will only contain the generated `HAS_COMMON_DOCS` relationships and their associated nodes.",
          "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm/77809618#77809618",
          "title": "How to use result of cypher query output in GDS algorithm"
        }
      ],
      "owner": {
        "reputation": 188,
        "user_id": 8713442,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/dqc8U.png?s=256&g=1",
        "display_name": "pbh",
        "link": "https://stackoverflow.com/users/8713442/pbh"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 72,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77808186,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1705577276,
      "creation_date": 1705072616,
      "last_edit_date": 1705577276,
      "question_id": 77807565,
      "share_link": "https://stackoverflow.com/q/77807565",
      "body_markdown": "I have one Bipartite Graph made of users and document storing which client has read which record. \r\nI ran the following query which creates a graph and shows common docs read by users. Now I want to use results in the GDS algorithm to create clusters. \r\n\r\nI am not getting how to project results from the below query to GDS algorithm. I know I need to use graph projection. \r\nIn projection we pass nodes and relationships but how to pass the result of this query?\r\n    \r\n```sql\r\nMATCH (n1:ClientInfo)-[:ACCESSED]-&gt;()&lt;-[:ACCESSED]-(n2:ClientInfo) \r\nWITH n1, n2, count(*) AS commonDocs\r\nWITH n1, n2, commonDocs, count{(n1)-[:ACCESSED]-&gt;()} AS n1Docs,\r\n  count{(n2)-[:ACCESSED]-&gt;()} AS n2Docs\r\nWHERE commonDocs &gt;=2\r\nRETURN n1, n2, \r\n  apoc.create.vRelationship(n1, &#39;HAS_COMMON_DOCS&#39;, {commonDocs:commonDocs}, n2)\r\n```\r\n\r\nBelow query not working for me \r\n\r\n```sql\r\nMATCH (n1:ClientInfo)-[:ACCESSED]-&gt;()&lt;-[:ACCESSED]-(n2:ClientInfo)\r\nWITH n1, n2, count(*) AS commonDocs\r\nWITH n1, n2, commonDocs, count{(n1)-[:ACCESSED]-&gt;()} AS n1Docs,\r\n  count{(n2)-[:ACCESSED]-&gt;()} AS n2Docs\r\nWHERE commonDocs &gt;= 5 AND n1.peopleCode &lt;&gt; 310962818\r\nWITH n1, n2,\r\n  apoc.create.vRelationship(n1,&#39;HAS_COMMON_DOCS&#39;, {commonDocs:commonDocs}, n2)\r\nCALL gds.graph.project(\r\n       &#39;users&#39;,\r\n       [&#39;ClientInfo&#39;, &#39;DocInfo&#39;],\r\n       [&#39;ACCESSED&#39;,&#39;HAS_COMMON_DOCS&#39;]\r\n     )\r\nYIELD graphName AS graph, nodeProjection, nodeCount AS nodes, \r\n  relationshipProjection, relationshipCount AS rels;\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77807565/how-to-use-result-of-cypher-query-output-in-gds-algorithm",
      "title": "How to use result of cypher query output in GDS algorithm"
    },
    {
      "tags": ["python", "flask", "neo4j", "py2neo"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704899497,
          "post_id": 77793850,
          "comment_id": 137144503,
          "link": "https://stackoverflow.com/questions/77793850/cant-connect-to-neo4j-via-py2neo#comment137144503_77793850"
        },
        {
          "owner": {
            "reputation": 69,
            "user_id": 16174416,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/1772897659550399/picture?type=large",
            "display_name": "Tran Minh Quan",
            "link": "https://stackoverflow.com/users/16174416/tran-minh-quan"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704899979,
          "post_id": 77793850,
          "comment_id": 137144582,
          "link": "https://stackoverflow.com/questions/77793850/cant-connect-to-neo4j-via-py2neo#comment137144582_77793850"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704912112,
          "post_id": 77793850,
          "comment_id": 137146931,
          "link": "https://stackoverflow.com/questions/77793850/cant-connect-to-neo4j-via-py2neo#comment137146931_77793850"
        }
      ],
      "owner": {
        "reputation": 69,
        "user_id": 16174416,
        "user_type": "registered",
        "profile_image": "https://graph.facebook.com/1772897659550399/picture?type=large",
        "display_name": "Tran Minh Quan",
        "link": "https://stackoverflow.com/users/16174416/tran-minh-quan"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 50,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1704894498,
      "creation_date": 1704894498,
      "question_id": 77793850,
      "share_link": "https://stackoverflow.com/q/77793850",
      "body_markdown": "I&#39;m using py2neo in wsl and trying to connect to neo4j instance on Windows.\r\n\r\n \r\n\r\n    from py2neo import Graph\r\n    \r\n    graph = Graph(&#39;bolt://localhost:7687&#39;, user=&quot;neo4j&quot;, password=&quot;12345678&quot;)\r\n\r\n the terminal returns with the error\r\n\r\n&gt; Traceback (most recent call last):   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 806, in acquire\r\n&gt;     cx = self._free_list.popleft() IndexError: pop from an empty deque\r\n&gt; \r\n&gt; During handling of the above exception, another exception occurred:\r\n&gt; \r\n&gt; Traceback (most recent call last):   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/wiring.py&quot;,\r\n&gt; line 62, in open\r\n&gt;     s.connect(address) ConnectionRefusedError: [Errno 111] Connection refused\r\n&gt; \r\n&gt; The above exception was the direct cause of the following exception:\r\n&gt; \r\n&gt; Traceback (most recent call last):   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/bolt.py&quot;,\r\n&gt; line 355, in open\r\n&gt;     wire = cls._connect(profile, on_broken=on_broken)   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/bolt.py&quot;,\r\n&gt; line 369, in _connect\r\n&gt;     wire = Wire.open(profile.address, keep_alive=True, on_broken=on_broken)   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/wiring.py&quot;,\r\n&gt; line 64, in open\r\n&gt;     raise_from(WireError(&quot;Cannot connect to %r&quot; % (address,)), error)   File &quot;&lt;string&gt;&quot;, line 3, in raise_from py2neo.wiring.WireError: Cannot\r\n&gt; connect to IPv4Address((&#39;localhost&#39;, 7687))\r\n&gt; \r\n&gt; The above exception was the direct cause of the following exception:\r\n&gt; \r\n&gt; Traceback (most recent call last):   File &quot;graph.py&quot;, line 3, in\r\n&gt; &lt;module&gt;\r\n&gt;     graph = Graph(&#39;bolt://localhost:7687&#39;, user=&quot;neo4j&quot;, password=&quot;12345678&quot;)   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/database.py&quot;,\r\n&gt; line 288, in __init__\r\n&gt;     self.service = GraphService(profile, **settings)   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/database.py&quot;,\r\n&gt; line 119, in __init__\r\n&gt;     self._connector = Connector(profile, **connector_settings)   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 960, in __init__\r\n&gt;     self._add_pools(*self._initial_routers)   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 982, in _add_pools\r\n&gt;     pool = ConnectionPool.open(   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 649, in open\r\n&gt;     seeds = [pool.acquire() for _ in range(init_size or cls.default_init_size)]   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 649, in &lt;listcomp&gt;\r\n&gt;     seeds = [pool.acquire() for _ in range(init_size or cls.default_init_size)]   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 813, in acquire\r\n&gt;     cx = self._connect()   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 764, in _connect\r\n&gt;     cx = Connection.open(self.profile, user_agent=self.user_agent,   File\r\n&gt; &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/__init__.py&quot;,\r\n&gt; line 174, in open\r\n&gt;     return Bolt.open(profile, user_agent=user_agent,   File &quot;/home/tranminhq420/.local/lib/python3.8/site-packages/py2neo/client/bolt.py&quot;,\r\n&gt; line 364, in open\r\n&gt;     raise_from(ConnectionUnavailable(&quot;Cannot open connection to %r&quot; % profile), error)   File &quot;&lt;string&gt;&quot;, line 3, in raise_from\r\n&gt; py2neo.errors.ConnectionUnavailable: Cannot open connection to\r\n&gt; ConnectionProfile(&#39;bolt://localhost:7687&#39;)\r\n\r\nI have suspected there&#39;s a problem with the conf of neo4j and have tried to uncomment the line\r\n\r\n    server.default_listen_address=0.0.0.0\r\n\r\nto no avail. I have also tried to add the line\r\n\r\n    dbms.connector.bolt.address=0.0.0.0:7687\r\n\r\nbut still can&#39;t get it to connect, here&#39;s my [conf][1] file, what should I do here\r\n\r\n\r\n  [1]: https://anotepad.com/notes/bn8dg9dg",
      "link": "https://stackoverflow.com/questions/77793850/cant-connect-to-neo4j-via-py2neo",
      "title": "Can&#39;t connect to neo4j via py2neo"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704822642,
              "post_id": 77788459,
              "comment_id": 137134598,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137134598_77788459"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704823412,
              "post_id": 77788459,
              "comment_id": 137134735,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137134735_77788459"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704824850,
              "post_id": 77788459,
              "comment_id": 137134964,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137134964_77788459"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704835643,
              "post_id": 77788459,
              "comment_id": 137136469,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137136469_77788459"
            },
            {
              "owner": {
                "reputation": 680,
                "user_id": 7253302,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://www.gravatar.com/avatar/768296adbdf300649e725234a11ff942?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "LizzAlice",
                "link": "https://stackoverflow.com/users/7253302/lizzalice"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704892366,
              "post_id": 77788459,
              "comment_id": 137143061,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137143061_77788459"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704898450,
              "post_id": 77788459,
              "comment_id": 137144321,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137144321_77788459"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1704821498,
          "last_edit_date": 1704821498,
          "creation_date": 1704819403,
          "answer_id": 77788459,
          "question_id": 77788323,
          "share_link": "https://stackoverflow.com/a/77788459",
          "body_markdown": "The `( )` in your first `MATCH` could be interpreted as a single node pattern. But you can declare at most a single variable in each node pattern, and so `(a, b)` raises a syntax error. \r\n\r\nIn any case, it doesn&#39;t look like you really need the first two lines. This is a valid query (if `n` is replaced with a positive integer), that binds to start nodes with name `&#39;node1name&#39;` and end nodes with name `&#39;node2name&#39;`:\r\n```sql\r\nMATCH path = (a)-[*..n]-(b)\r\nWHERE all(relName IN [&#39;relname1&#39;, &#39;relname2&#39;] \r\n            WHERE any(rel IN relationships(path) WHERE rel.display_name = relName)) \r\nAND a.name = &#39;node1name&#39; and b.name = &#39;node2name&#39;\r\nRETURN path\r\n```",
          "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#77788459",
          "title": "Neo4j Cypher query for all paths that contain certain nodes and relations"
        }
      ],
      "owner": {
        "reputation": 680,
        "user_id": 7253302,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://www.gravatar.com/avatar/768296adbdf300649e725234a11ff942?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "LizzAlice",
        "link": "https://stackoverflow.com/users/7253302/lizzalice"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77788459,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1704821498,
      "creation_date": 1704818022,
      "question_id": 77788323,
      "share_link": "https://stackoverflow.com/q/77788323",
      "body_markdown": "I need a cypher query that will match all paths of a certain length n that contain the specified nodes and specified edges. I developed a query, but I am getting a syntax error and I am not sure why, as I am new to cypher\r\n```\r\nMATCH (a, b)\r\nWITH a, b\r\nMATCH path = (a)-[*..n]-(b)\r\nWHERE ALL(relName IN [&#39;relname1&#39;, &#39;relname2&#39;] \r\n   WHERE ANY(rel IN relationships(path) WHERE rel.display_name = relName)\r\nAND a.name = &#39;node1name&#39; and b.name = &#39;node2name&#39;\r\nRETURN path\r\n```\r\n\r\nThe syntax error is \r\n```\r\nInvalid input &#39;a&#39;: expected &quot;(&quot;, &quot;ALL&quot;, &quot;ANY&quot; or &quot;SHORTEST&quot; (line 1, column 8 (offset: 7))\r\n&quot;MATCH (a, b)&quot;\r\n        ^\r\n```",
      "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations",
      "title": "Neo4j Cypher query for all paths that contain certain nodes and relations"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704704216,
          "post_id": 77778088,
          "comment_id": 137117541,
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b#comment137117541_77778088"
        },
        {
          "owner": {
            "reputation": 197,
            "user_id": 8980538,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Higsn",
            "link": "https://stackoverflow.com/users/8980538/higsn"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1704705823,
          "post_id": 77778088,
          "comment_id": 137117785,
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b#comment137117785_77778088"
        },
        {
          "owner": {
            "reputation": 197,
            "user_id": 8980538,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Higsn",
            "link": "https://stackoverflow.com/users/8980538/higsn"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704706297,
          "post_id": 77778088,
          "comment_id": 137117891,
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b#comment137117891_77778088"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704779310,
              "post_id": 77779757,
              "comment_id": 137127243,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137127243_77779757"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704793358,
              "post_id": 77779757,
              "comment_id": 137129141,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137129141_77779757"
            },
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704874039,
              "post_id": 77779757,
              "comment_id": 137139929,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137139929_77779757"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704879314,
              "post_id": 77779757,
              "comment_id": 137140819,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137140819_77779757"
            },
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704901339,
              "post_id": 77779757,
              "comment_id": 137144862,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137144862_77779757"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704904586,
              "post_id": 77779757,
              "comment_id": 137145507,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137145507_77779757"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1704804708,
          "last_edit_date": 1704804708,
          "creation_date": 1704714901,
          "answer_id": 77779757,
          "question_id": 77778088,
          "share_link": "https://stackoverflow.com/a/77779757",
          "body_markdown": "**Simple case with no cycles**\r\n\r\nIf you are using Neo4j 5.9+, you can use the following [quantified path pattern](https://neo4j.com/docs/cypher-manual/current/patterns/reference/#quantified-path-patterns) to get each distinct rule chain:\r\n```sql\r\nMATCH path = (:Rule {name: &#39;rule_1&#39;}) \r\n        (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (r) \r\nWHERE NOT EXISTS { (r)-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule) }\r\nRETURN [n IN nodes(path) WHERE n:Rule | n.name] AS ruleChain\r\n```\r\n\r\nThe `WHERE NOT EXISTS` is there to ensure the results include only the complete rule chains and not any subsets of them, as it makes sure there are no more rules to expand the rule chain to.\r\n\r\n**Handling cycles in the rules graph**\r\n\r\nIf there are cycles in the rules graph, the above will return all unique pathways. In such a case, separating out the cycle-free rule chains from the cycles attached to those rules would be useful. This query returns the cycle-free rule chains:\r\n```sql\r\nMATCH (a:Rule {name: &#39;rule_1&#39;})\r\nMATCH path = (a) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (b) \r\nWHERE NOT EXISTS { (b)-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule) } \r\nAND COUNT { WITH path UNWIND nodes(path) AS n RETURN DISTINCT n } =\r\n    size(nodes(path))\r\nRETURN [n IN nodes(path) WHERE n:Rule | n.name] AS ruleChain\r\n```\r\nThis returns all cycles that those rule chains encounter, including the variables they target:\r\n```sql\r\nMATCH (a:Rule {name: &#39;rule_1&#39;})\r\nMATCH path = (a) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+\r\nUNWIND [n IN nodes(path) WHERE n:Rule] AS node\r\nWITH DISTINCT node\r\nMATCH path = (node) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (node)\r\nWHERE COUNT { WITH path UNWIND nodes(path)[..-1] AS n RETURN DISTINCT n } =\r\n      size(nodes(path)[..-1])\r\nRETURN [n IN nodes(path) | n.name] AS cycle\r\n```",
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#77779757",
          "title": "How to fetch all nodes in neo4j for relationship (Node A)-[Relation A]-&gt;(Node B)-[Relation B]-&gt;(Node C)"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704746546,
              "post_id": 77782956,
              "comment_id": 137124455,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#comment137124455_77782956"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704750672,
              "post_id": 77782956,
              "comment_id": 137124948,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#comment137124948_77782956"
            },
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704778445,
              "post_id": 77782956,
              "comment_id": 137127181,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#comment137127181_77782956"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1704752807,
          "last_edit_date": 1704752807,
          "creation_date": 1704744664,
          "answer_id": 77782956,
          "question_id": 77778088,
          "share_link": "https://stackoverflow.com/a/77782956",
          "body_markdown": "This answer attempts to improve @FinbarGood&#39;s answer.\r\n\r\nIn the real world (and I presume in your use case as well), it is very common for a rule to both set *and* depend on the same variable (e.g., the rule may increment a numeric variable).\r\n\r\nSo, let&#39;s add some more rules to your sample graph:\r\n\r\n    MATCH (r1:Rule {name:&#39;rule_1&#39;}), (v3:Variable {name:&#39;variable_3&#39;}), (v7:Variable {name:&#39;variable_7&#39;})\r\n    CREATE\r\n      (r5:Rule {name:&#39;rule_5&#39;}),\r\n      (r6:Rule {name:&#39;rule_6&#39;}),\r\n      (v8:Variable {name:&#39;variable_8&#39;}),\r\n      (v9:Variable {name:&#39;variable_9&#39;}),\r\n      (v10:Variable {name:&#39;variable_10&#39;})\r\n    CREATE (r1)-[:targets]-&gt;(v8)&lt;-[:depends_on]-(r1)\r\n    CREATE (r1)-[:targets]-&gt;(v9)&lt;-[:depends_on]-(r5)-[:targets]-&gt;(v10)&lt;-[:depends_on]-(r1)\r\n    CREATE (r6)-[:depends_on]-&gt;(v7)\r\n    CREATE (r1)-[:depends_on]-&gt;(v3)\r\n\r\nThe resulting graph will look like this:\r\n\r\n![enter image description here](https://i.stack.imgur.com/XPuR1.png)\r\n\r\nIn the resulting chains, we should include &quot;looping&quot; chains that start and end at the same `Rule`, since those are valid rule paths. But once we have returned to the starting `Rule`, I will assume that we want to stop expanding any further (if there are multiple possible paths from that `Rule`), to avoid redundancy.\r\n\r\nHere is a query that returns the names of the rules and variables along each chain (variable names are included because there can be multiple ways to connect the same sequence of rules):\r\n\r\n    MATCH path = (r0:Rule {name: &#39;rule_1&#39;}) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (r)\r\n    WHERE (r = r0 AND NOT r0 IN NODES(path)[1..-1]) OR\r\n      NOT (r0 IN NODES(path)[1..] OR EXISTS((r)-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule)))\r\n    RETURN [n IN NODES(path)|n.name] AS chain\r\n\r\nThe results are as expected:\r\n\r\n    ╒══════════════════════════════════════════════════════════════════════╕\r\n    │chain                                                                 │\r\n    ╞══════════════════════════════════════════════════════════════════════╡\r\n    │[&quot;rule_1&quot;, &quot;variable_8&quot;, &quot;rule_1&quot;]                                    │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_3&quot;, &quot;rule_1&quot;]                                    │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_9&quot;, &quot;rule_5&quot;, &quot;variable_10&quot;, &quot;rule_1&quot;]           │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_3&quot;, &quot;rule_3&quot;, &quot;variable_7&quot;, &quot;rule_6&quot;]            │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_2&quot;, &quot;rule_2&quot;, &quot;variable_4&quot;, &quot;rule_4&quot;, &quot;variable_3│\r\n    │&quot;, &quot;rule_1&quot;]                                                          │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_2&quot;, &quot;rule_2&quot;, &quot;variable_4&quot;, &quot;rule_4&quot;, &quot;variable_3│\r\n    │&quot;, &quot;rule_3&quot;, &quot;variable_7&quot;, &quot;rule_6&quot;]                                  │\r\n    └──────────────────────────────────────────────────────────────────────┘\r\n\r\nNOTE: To avoid endless looping in the rule chain, rules like `rule_1` may need to be forced to only run once. This is actually rather easy to do using `MATCH` clauses, since a `MATCH` clause will only return results in which a relationship appears at most once.",
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#77782956",
          "title": "How to fetch all nodes in neo4j for relationship (Node A)-[Relation A]-&gt;(Node B)-[Relation B]-&gt;(Node C)"
        }
      ],
      "owner": {
        "reputation": 197,
        "user_id": 8980538,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Higsn",
        "link": "https://stackoverflow.com/users/8980538/higsn"
      },
      "last_editor": {
        "reputation": 197,
        "user_id": 8980538,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Higsn",
        "link": "https://stackoverflow.com/users/8980538/higsn"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 99,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77779757,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1704804708,
      "creation_date": 1704703867,
      "last_edit_date": 1704706113,
      "question_id": 77778088,
      "share_link": "https://stackoverflow.com/q/77778088",
      "body_markdown": "Graph has two types of nodes:\r\n- Rule (has name attribute)\r\n- Variable (has name attributes)\r\n\r\nHas following relationships:\r\n- Rule-[:depends_on]-&gt; Variable\r\n- Rule-[:targets]-&gt; Variable\r\n\r\n\r\n### Cypher Query to create sample graph\r\n\r\n```\r\nCREATE\r\n  (rule1:Rule {name:&#39;rule_1&#39;}),\r\n  (rule2:Rule {name:&#39;rule_2&#39;}),\r\n  (rule3:Rule {name:&#39;rule_3&#39;}),\r\n  (rule4:Rule {name:&#39;rule_4&#39;}),\r\n  (variable1:Variable {name:&#39;variable_1&#39;}),\r\n  (variable2:Variable {name:&#39;variable_2&#39;}),\r\n  (variable3:Variable {name:&#39;variable_3&#39;}),\r\n  (variable4:Variable {name:&#39;variable_4&#39;}),\r\n  (variable5:Variable {name:&#39;variable_5&#39;}),\r\n  (variable6:Variable {name:&#39;variable_6&#39;}),\r\n  (variable7:Variable {name:&#39;variable_7&#39;}),\r\n  (rule1)-[:targets]-&gt;(variable2),\r\n  (rule1)-[:targets]-&gt;(variable3),\r\n  (rule2)-[:targets]-&gt;(variable4),\r\n  (rule2)-[:targets]-&gt;(variable5),\r\n  (rule3)-[:targets]-&gt;(variable6),\r\n  (rule3)-[:targets]-&gt;(variable7),\r\n  (rule4)-[:targets]-&gt;(variable3),\r\n  (rule1)-[:depends_on]-&gt;(variable1),\r\n  (rule2)-[:depends_on]-&gt;(variable2),\r\n  (rule3)-[:depends_on]-&gt;(variable3),\r\n  (rule4)-[:depends_on]-&gt;(variable4)\r\n```\r\n\r\n### Query Requirement\r\nGiven a rule name recursively fetch all possible rule chains that can be triggered by it using a cypher query. That is, if Rule 1 is triggered then it would trigger Rule 2 (variable 2 is targeted by rule 1 and is dependency for rule 2) &amp; Rule 3 (variable 3 is targeted by rule 1 and is dependency for rule 3) and Rule 2 would trigger Rule 4 (variable 4 is targeted by rule 2 and is dependency for rule 4), which again can trigger Rule 3 (variable 3 is targeted by rule 4 and is dependency for rule 3).\r\n\r\n#### Possible rule chain\r\n```\r\nRule 1 -&gt; Rule 2 -&gt; Rule 4 -&gt; Rule 3\r\nRule 1 -&gt; Rule 3\r\n```",
      "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b",
      "title": "How to fetch all nodes in neo4j for relationship (Node A)-[Relation A]-&gt;(Node B)-[Relation B]-&gt;(Node C)"
    },
    {
      "tags": [
        "database",
        "optimization",
        "graph",
        "neo4j",
        "linear-programming"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 16250,
            "user_id": 5625534,
            "user_type": "registered",
            "accept_rate": 100,
            "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=256&g=1",
            "display_name": "Erwin Kalvelagen",
            "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1705000120,
          "post_id": 77769536,
          "comment_id": 137159405,
          "link": "https://stackoverflow.com/questions/77769536/question-about-linear-programming-optimisation-in-graph-data-base-like-neo4j#comment137159405_77769536"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23204991,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4ff83342c305d808e0992da0b136235e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "BrianLe",
        "link": "https://stackoverflow.com/users/23204991/brianle"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 23204991,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4ff83342c305d808e0992da0b136235e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "BrianLe",
        "link": "https://stackoverflow.com/users/23204991/brianle"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 66,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": -1,
      "last_activity_date": 1704548959,
      "creation_date": 1704546975,
      "last_edit_date": 1704548959,
      "question_id": 77769536,
      "share_link": "https://stackoverflow.com/q/77769536",
      "body_markdown": "I want to do linear programming optimisation in graph data base like Neo4j. \r\n\r\nI have a supply chain network with multiple sources and destinations and their cost of movement of goods between them. I want to minimise the gap between supply and demand of each nodes, finally for overall network. I can’t find an optimization algorithm in graph theory, Neo4j. I want to minimise an objective function in graph. \r\n\r\nPlease help me.",
      "link": "https://stackoverflow.com/questions/77769536/question-about-linear-programming-optimisation-in-graph-data-base-like-neo4j",
      "title": "Question about linear programming optimisation in graph data base like Neo4j"
    },
    {
      "tags": ["java", "spring", "spring-boot", "neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 3149,
            "user_id": 3948697,
            "user_type": "registered",
            "accept_rate": 67,
            "profile_image": "https://i.stack.imgur.com/6cBG2.jpg?s=256&g=1",
            "display_name": "Atul",
            "link": "https://stackoverflow.com/users/3948697/atul"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1704519950,
          "creation_date": 1704519950,
          "answer_id": 77768359,
          "question_id": 77768358,
          "share_link": "https://stackoverflow.com/a/77768359",
          "body_markdown": "I got the solution.\r\n\r\nYou need to write the query to return the specific result.\r\n\r\n    MATCH path = (n:NodeABC)-[]-(i:NodeXYZ)\r\n    WHERE n.name = &#39;iqwe&#39; \r\n    RETURN { id : id(n), labels : labels(n), properties: properties(n) } as instance, relationships(path)\r\n\r\nInstead of return &#39;n&#39;, you need to specify like this &#39;\r\n\r\n&gt; { id : id(n), labels : labels(n), properties: properties(n) }\r\n\r\n&#39;\r\n\r\nThanks,\r\n\r\nAtul",
          "link": "https://stackoverflow.com/questions/77768358/neo4j-get-id-labels-properties-from-the-resultset/77768359#77768359",
          "title": "Neo4j - get ID, Labels properties from the resultset"
        }
      ],
      "owner": {
        "reputation": 3149,
        "user_id": 3948697,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://i.stack.imgur.com/6cBG2.jpg?s=256&g=1",
        "display_name": "Atul",
        "link": "https://stackoverflow.com/users/3948697/atul"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1704519950,
      "creation_date": 1704519950,
      "question_id": 77768358,
      "share_link": "https://stackoverflow.com/q/77768358",
      "body_markdown": "I am using Spring JDBCTemplate to get the result from the Neo4j. \r\nI want &quot;ID&quot; of the node as well as the &quot;Labels&quot; which is present in the node but I only got the &quot;Properties&quot;.\r\n\r\nThis is the sample sql:\r\n\r\n    MATCH path = (n:NodeABC)-[]-(i:NodeXYZ)\r\n    WHERE n.name = &#39;iqwe&#39; \r\n    RETURN n as instance, relationships(path)\r\n\r\nI want ID and Labels as well in the resultset. How to get it?\r\n\r\nThe tech stack is:\r\n\r\n - Neo4j - 5 \r\n   \r\n - Java - 17\r\n - SpringBoot - 3.2\r\n\r\n\r\nThanks,\r\n\r\nAtul",
      "link": "https://stackoverflow.com/questions/77768358/neo4j-get-id-labels-properties-from-the-resultset",
      "title": "Neo4j - get ID, Labels properties from the resultset"
    },
    {
      "tags": ["kubernetes", "neo4j", "terraform", "kubernetes-helm"],
      "comments": [
        {
          "owner": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704541512,
          "post_id": 77768125,
          "comment_id": 137104826,
          "link": "https://stackoverflow.com/questions/77768125/terraform-helm-kubernetes-cluster-unreachableexec-plugin-invalid-apiversion#comment137104826_77768125"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 21,
            "user_id": 3935749,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/13872f93b0e7c55e0f0b301bf2a34de4?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Itachi Uchiha",
            "link": "https://stackoverflow.com/users/3935749/itachi-uchiha"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1704537445,
          "creation_date": 1704537445,
          "answer_id": 77769042,
          "question_id": 77768125,
          "share_link": "https://stackoverflow.com/a/77769042",
          "body_markdown": "Okay, i figure out how this work, because the API version v1a1pha1 is deprecated So instead using the default api, use this:\r\napiVersion: client.authentication.k8s.io/v1beta1\r\nChange this in file ~/.kube/config",
          "link": "https://stackoverflow.com/questions/77768125/terraform-helm-kubernetes-cluster-unreachableexec-plugin-invalid-apiversion/77769042#77769042",
          "title": "Terraform- Helm: Kubernetes cluster unreachable:exec plugin: invalid apiVersion &quot;client.authentication.k8s.io/v1alpha1&quot; while deploy neo4jHelm"
        }
      ],
      "owner": {
        "reputation": 21,
        "user_id": 3935749,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/13872f93b0e7c55e0f0b301bf2a34de4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Itachi Uchiha",
        "link": "https://stackoverflow.com/users/3935749/itachi-uchiha"
      },
      "last_editor": {
        "reputation": 21,
        "user_id": 3935749,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/13872f93b0e7c55e0f0b301bf2a34de4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Itachi Uchiha",
        "link": "https://stackoverflow.com/users/3935749/itachi-uchiha"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 0,
      "accepted_answer_id": 77769042,
      "answer_count": 1,
      "score": -1,
      "last_activity_date": 1704629063,
      "creation_date": 1704510614,
      "last_edit_date": 1704629063,
      "question_id": 77768125,
      "share_link": "https://stackoverflow.com/q/77768125",
      "body_markdown": "i occure the problem while use terraform to deploy neo4j Helm chart. This raise the error like this: \r\n\r\n    Kubernetes cluster unreachable: exec plugin: invalid api version : &quot;client.authentication.k8s.io/v1a1pha1\r\n\r\nThis is my terraform provider:\r\n\r\n    terraform {\r\n      required_providers {\r\n        kubectl = {\r\n          source  = &quot;gavinbunney/kubectl&quot;\r\n          version = &quot;1.10.1&quot;\r\n        }\r\n        helm = {\r\n          source  = &quot;hashicorp/helm&quot;\r\n          version = &quot;2.11.0&quot;\r\n        }\r\n      }\r\n    }\r\n\r\nThis is my neo4j config-Im using neo4j-4.1.3-1:\r\n\r\n    resource &quot;helm_release&quot; &quot;neo4j&quot; {\r\n      name             = var.neo4j_release_name\r\n      version          = var.neo4j_chart_version\r\n      namespace        = var.neo4j_release_namespace\r\n      chart            = &quot;https://github.com/neo4j-contrib/neo4j-helm/releases/download/4.1.3-1/neo4j-4.1.3-1.tgz&quot;\r\n      create_namespace = true\r\n    \r\n      values = [\r\n        templatefile(&quot;./${path.module}/values/neo4j-values.yaml.tmpl&quot;, local.neo4j_vars)\r\n      ]\r\n    }\r\n\r\nMy local kubectl 1.2.1, helm 3.0.3, Terraform v1.6.6. THis is my command run:\r\nterraform plan -var-file=dev.values.tfvars -target=module.helm.helm_release.neo4j\r\n\r\nPlease help me!\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77768125/terraform-helm-kubernetes-cluster-unreachableexec-plugin-invalid-apiversion",
      "title": "Terraform- Helm: Kubernetes cluster unreachable:exec plugin: invalid apiVersion &quot;client.authentication.k8s.io/v1alpha1&quot; while deploy neo4jHelm"
    },
    {
      "tags": ["neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1704496079,
          "post_id": 77767333,
          "comment_id": 137102185,
          "link": "https://stackoverflow.com/questions/77767333/neo4j-where-cause-not-strict#comment137102185_77767333"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "last_editor": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1704543223,
          "last_edit_date": 1704543223,
          "creation_date": 1704492230,
          "answer_id": 77767414,
          "question_id": 77767333,
          "share_link": "https://stackoverflow.com/a/77767414",
          "body_markdown": "Disable &quot;Connect result nodes&quot; in the settings dialog at the bottom left:\r\n\r\n[![Neo4j settings dialog: Graph Visualization][1]][1]\r\n\r\nIf the setting is enabled (which it is by default), then all connections between two nodes will always be shown, even if not explicitly returned by your query.\r\n\r\n  [1]: https://i.stack.imgur.com/Y8EI6.png",
          "link": "https://stackoverflow.com/questions/77767333/neo4j-where-cause-not-strict/77767414#77767414",
          "title": "Neo4J WHERE cause not strict?"
        }
      ],
      "owner": {
        "reputation": 7406,
        "user_id": 2897989,
        "user_type": "registered",
        "accept_rate": 68,
        "profile_image": "https://www.gravatar.com/avatar/9e2014846b008a5b75a2fc3f76b9f72d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "lte__",
        "link": "https://stackoverflow.com/users/2897989/lte"
      },
      "last_editor": {
        "reputation": 7406,
        "user_id": 2897989,
        "user_type": "registered",
        "accept_rate": 68,
        "profile_image": "https://www.gravatar.com/avatar/9e2014846b008a5b75a2fc3f76b9f72d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "lte__",
        "link": "https://stackoverflow.com/users/2897989/lte"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77767414,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1704543223,
      "creation_date": 1704490758,
      "last_edit_date": 1704491142,
      "question_id": 77767333,
      "share_link": "https://stackoverflow.com/q/77767333",
      "body_markdown": "I&#39;m trying to filter connections where a GrossMargin is bigger than 8000000. For this I&#39;m importing data like this:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///output.csv&#39; AS row\r\n    \r\n    MERGE (s:SalesOwner {name: row.Owner})\r\n    MERGE (c:Company {name: row.Company})\r\n    MERGE (l:Leader {name: row.Leader})\r\n    WITH s, c, toFloat(row.`Estimated Revenue`) AS revenue, toFloat(row.`Gross Margin I`) AS grossMargin\r\n    \r\n    // Create relationships between SalesOwners and Companies, handling duplicates\r\n    \r\n    MERGE (c)&lt;-[d:DEAL_WITH]-(s)\r\n    ON CREATE SET d.GrossMargin = grossMargin, d.Revenue = revenue\r\n    ON MATCH SET d.GrossMargin = grossMargin, d.Revenue = revenue\r\n    MERGE (c)-[:HAS_LEADERSHIP]-&gt;(l)\r\n\r\nThen I&#39;m visualizing with:\r\n\r\n    MATCH (s:SalesOwner)-[d:DEAL_WITH]-&gt;(c:Company)\r\n    WHERE d.GrossMargin &gt; 8000000\r\n    RETURN s, d, c\r\n\r\nMy CSV looks like this:\r\n\r\n    Owner,Company,Topic,Estimated Revenue,Gross Margin I,Leader\r\n    Name1,Company1,Topic1,6142488.51,6142488.51,Name2\r\n    Name1,Company1,Topic1,6142488.51,6142488.51,Name3\r\n    Name1,Company1,Topic1,6142488.51,6142488.51,Name4\r\n    Name1,Company1,Topic1,6142488.51,6142488.51,Name5\r\n    Name1,Company1,Topic1,6142488.51,6142488.51,Name6\r\n    Name1,Company1,Topic1,6142488.51,6142488.51,Name7\r\n    Name8,Company1,Company2,51600000.0,51600000.0,Name9\r\n    Name10,Company1,Company2,51600000.0,51600000.0,Name11\r\n    ... etc\r\n\r\nYet, multiple connections that are SMALLER than 8000000 are still in the graph viz. How come?\r\n\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77767333/neo4j-where-cause-not-strict",
      "title": "Neo4J WHERE cause not strict?"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "owner": {
        "reputation": 67,
        "user_id": 8929477,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-gtGDVfnDDoE/AAAAAAAAAAI/AAAAAAAAAVE/XPl0JmxfCr4/photo.jpg?sz=256",
        "display_name": "Braxvan",
        "link": "https://stackoverflow.com/users/8929477/braxvan"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1704402694,
      "creation_date": 1704402694,
      "question_id": 77761231,
      "share_link": "https://stackoverflow.com/q/77761231",
      "body_markdown": "I am trying to get results from gds.louvain.stream() by running it within apoc.cypher.runMany().  I am doing this because I want to create the GDS graph, get results from Louvain, and then delete the GDS graph all in the same query.  The following attempt using apoc.cypher.run is successful and I receive the nodes and their corresponding communities as expected:\r\n\r\n```\r\nCALL apoc.cypher.run(&quot;CALL gds.louvain.stream(&#39;community_detection&#39;) YIELD nodeId, communityId, intermediateCommunityIds RETURN gds.util.asNode(nodeId).categoryName AS category_name, gds.util.asNode(nodeId).productName AS product_name, communityId ORDER BY communityId DESC;&quot;, {});\r\n```\r\n\r\nHowever, when I try to do the same thing with apoc.cypher.runMany, nothing is returned:\r\n\r\n```\r\nCALL apoc.cypher.runMany(&quot;CALL gds.louvain.stream(&#39;community_detection&#39;) YIELD nodeId, communityId, intermediateCommunityIds RETURN gds.util.asNode(nodeId).categoryName AS category_name, gds.util.asNode(nodeId).productName AS product_name, communityId ORDER BY communityId DESC;&quot;, {});\r\n```\r\n\r\nAny idea what I am missing here? ",
      "link": "https://stackoverflow.com/questions/77761231/calling-neo4j-gds-louvain-algorithm-using-apoc-cypher-run-versus-apoc-cypher-run",
      "title": "Calling Neo4J GDS Louvain algorithm using apoc.cypher.run versus apoc.cypher.runMany"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704400213,
          "post_id": 77756246,
          "comment_id": 137089925,
          "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine#comment137089925_77756246"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704444136,
              "post_id": 77757853,
              "comment_id": 137094147,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137094147_77757853"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704444283,
              "post_id": 77757853,
              "comment_id": 137094164,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137094164_77757853"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704470045,
              "post_id": 77757853,
              "comment_id": 137098596,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137098596_77757853"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705587081,
              "post_id": 77757853,
              "comment_id": 137226873,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137226873_77757853"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1705587600,
              "post_id": 77757853,
              "comment_id": 137227015,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137227015_77757853"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1704470002,
          "last_edit_date": 1704470002,
          "creation_date": 1704366769,
          "answer_id": 77757853,
          "question_id": 77756246,
          "share_link": "https://stackoverflow.com/a/77757853",
          "body_markdown": "**For Neo4j 5.9+**\r\n\r\nTo return the subgraph up to but excluding any nodes beyond any relationships with `Action = &#39;ODC&#39;`:\r\n```sql\r\nMATCH (:Customer {customer_id: 4})-[r WHERE r.Action &lt;&gt; &#39;ODC&#39;]-*(n)\r\nRETURN DISTINCT n\r\n```\r\nTo return the subgraph up to and *including* those nodes:\r\n```sql\r\nMATCH path = (:Customer {customer_id: 4})-[r WHERE r.Action &lt;&gt; &#39;ODC&#39;]-*\r\n               ()-[{Action: &#39;ODC&#39;}]-()\r\nUNWIND nodes(path) AS n\r\nRETURN DISTINCT n\r\n```\r\n\r\n**For Neo4j &lt; 5.9**\r\n\r\nTo return the subgraph up to but excluding any nodes beyond any relationships with `Action = &#39;ODC&#39;`:\r\n```sql\r\nMATCH (:Customer {customer_id: 4})-[r*0..]-(n)\r\nWHERE all(rel IN r WHERE rel.Action &lt;&gt; &#39;ODC&#39;)\r\nRETURN DISTINCT n\r\n```\r\nTo return the subgraph up to and *including* those nodes:\r\n```sql\r\nMATCH path = (:Customer {customer_id: 4})-[r*0..]-()-[{Action: &#39;ODC&#39;}]-()\r\nWHERE all(rel IN r WHERE rel.Action &lt;&gt; &#39;ODC&#39;)\r\nUNWIND nodes(path) AS n\r\nRETURN DISTINCT n\r\n```",
          "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#77757853",
          "title": "In Neo4j how do i iteratively traverse the nodes and relationships paths obtained from the startnode till particular relationship property is reached?"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 64,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77757853,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1704709857,
      "creation_date": 1704349255,
      "last_edit_date": 1704709857,
      "question_id": 77756246,
      "share_link": "https://stackoverflow.com/q/77756246",
      "body_markdown": "Consider I have to obtain all the nodes in the subgraph of `n:Customer` with `customer_id = 4`. Starting from this node i have to traverse each node in the path originating with `n` and break or stop traversing down the path when a relationship with `Action` property is set to `ODC`. Each relationship has the property `Action` with value either `ODC` or `ODSN`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter breaking from one path I have to check the other paths originating from this node `n`. I have to repeat this process till all paths are traversed and return the relevant nodes.\r\nIn the image I have provided I have expanded two paths out of the 14 nodes connected to `n:Customer` (blue node). Each of the purple nodes connected to the blue can be further expanded similar to the other two paths.\r\n\r\nI am required to store these nodes in a data structure in Java.\r\nAny guidance on how to approach this would be very helpful. Thanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dKllV.png",
      "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine",
      "title": "In Neo4j how do i iteratively traverse the nodes and relationships paths obtained from the startnode till particular relationship property is reached?"
    },
    {
      "tags": ["python", "neo4j", "cypher", "igraph"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704321658,
          "post_id": 77753801,
          "comment_id": 137079097,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137079097_77753801"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704323417,
          "post_id": 77753801,
          "comment_id": 137079297,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137079297_77753801"
        },
        {
          "owner": {
            "reputation": 632,
            "user_id": 1786165,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
            "display_name": "Stefano Bragaglia",
            "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704362453,
          "post_id": 77753801,
          "comment_id": 137083175,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137083175_77753801"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704400783,
          "post_id": 77753801,
          "comment_id": 137089999,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137089999_77753801"
        },
        {
          "owner": {
            "reputation": 632,
            "user_id": 1786165,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
            "display_name": "Stefano Bragaglia",
            "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704446817,
          "post_id": 77753801,
          "comment_id": 137094545,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137094545_77753801"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704475575,
          "post_id": 77753801,
          "comment_id": 137099564,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137099564_77753801"
        }
      ],
      "owner": {
        "reputation": 632,
        "user_id": 1786165,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
        "display_name": "Stefano Bragaglia",
        "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
      },
      "last_editor": {
        "reputation": 632,
        "user_id": 1786165,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
        "display_name": "Stefano Bragaglia",
        "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1704446758,
      "creation_date": 1704304571,
      "last_edit_date": 1704446758,
      "question_id": 77753801,
      "share_link": "https://stackoverflow.com/q/77753801",
      "body_markdown": "I&#39;m trying to query an `igraph` graph in python as I would do in Neo4j to find all the sets of nodes that match a given pattern. I have read through the documentation, searched for answers here, and interrogated Google with no luck.\r\n\r\nAssuming that I have the following:\r\n\r\n    import pandas as pd\r\n    from igraph import Graph\r\n\r\n    df = pd.DataFrame({\r\n        &quot;Person&quot;: [&quot;P1&quot;, &quot;P1&quot;, &quot;P1&quot;, &quot;P1&quot;, &quot;P2&quot;, &quot;P2&quot;, &quot;P2&quot;, &quot;P3&quot;, &quot;P3&quot;, &quot;P4&quot;],\r\n        &quot;Object&quot;: [&quot;O1&quot;, &quot;O2&quot;, &quot;O3&quot;, &quot;O6&quot;, &quot;O2&quot;, &quot;O3&quot;, &quot;O4&quot;, &quot;O5&quot;, &quot;O6&quot;, &quot;O6&quot;],\r\n        &quot;relation&quot;: [&quot;LIKES&quot;] * 10,\r\n    })\r\n    g = Graph.DataFrame(df, directed=False)\r\n\r\nI&#39;d like to run a query against `g` to return all px:Person, py:Person, ox:Object, and oy:Object such that _&quot;px likes ox, which is also liked by py, which also likes oy AND px != py, ox != oy, (px, oy) not in df_.\r\n\r\nExpected results would include:\r\n\r\n    P1, O2, P2, O4\r\n    P2, O2, P1, O1\r\n    P2, O2, P1, O6\r\n    P2, O3, P1, O1\r\n    P2, O3, P1, O6\r\n    P4, O6, P1, O1\r\n    P4, O6, P1, O2\r\n    P4, O6, P1, O3\r\n    P4, O6, P3, O5\r\n\r\nbut not:\r\n\r\n    P1, O2, P2, O3    because P1, O3 are already connected\r\n    P2, O3, P1, O2    because P2, O2 are already connected\r\n\r\n\r\nIn Neo4j, I&#39;d have run something like:\r\n\r\n    MATCH (p1:Person)-[:LIKES]-&gt;(o1:Object)&lt;-[:LIKES]-(p2:Person)-[:LIKES]-&gt;(o2:Object)\r\n    WHERE p1 &lt;&gt; p2 AND o1 &lt;&gt; o2 AND NOT (p1)-[:LIKES]-(o2)\r\n    RETURN p1, o1, p2, o2\r\n    LIMIT 4 \r\n\r\n    MATCH (p1:Person)-[:LIKES]-&gt;(o1:Object)&lt;-[:LIKES]-(p2:Person)-[:LIKES]-&gt;(o2:Object) WHERE NOT (p1)-[:LIKES]-&gt;(o2) RETURN ....\r\n\r\nNotice that my input files are quite big (~75k rows) and I would like to find all the possible `(p1, o1, p2, o2)` and of course not `LIMIT 4`. I&#39;ve tried to join my dataframe twice to create a result dataframe to further filter, but it gets very slow or too big to fit in memory.\r\n\r\nI was wondering if there is a way to run such a query in `igraph`, or if I have to break it down into parts and combine the results myself. Thanks in advance for any help!",
      "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db",
      "title": "Query Python&#39;s iGraph as if it would be a Neo4j DB"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704349498,
              "post_id": 77748593,
              "comment_id": 137081418,
              "link": "https://stackoverflow.com/questions/77744940/how-to-use-apoc-path-subgraphall-procedure-in-neo4j/77748593#comment137081418_77748593"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1704230204,
          "creation_date": 1704230204,
          "answer_id": 77748593,
          "question_id": 77744940,
          "share_link": "https://stackoverflow.com/a/77748593",
          "body_markdown": "If I understand your requirements correctly, you want to find paths containing just outgoing relationships in which only the last relationship has the `Action` value of either &#39;ODC&#39; or &#39;ODSN&#39;. If the value is &#39;ODC&#39;, then you want all the nodes in the path returned, else you only want the last node.\r\n\r\nThat use case does not need to use APOC. For example:\r\n\r\n    MATCH (c:Customer {customer_id: 4})-[rels1 *0..8]-&gt;()-[rel2:Action]-&gt;(n)\r\n    WHERE rel2.Action IN [&#39;ODC&#39;, &#39;ODSN&#39;] AND NONE(r1 IN rels1 WHERE r1.Action IN [&#39;ODC&#39;, &#39;ODSN&#39;])\r\n    WITH rel2.Action AS action, c, rels1, n\r\n    RETURN action, CASE action WHEN &#39;ODC&#39; THEN [c] + [r2 IN rels1 | ENDNODE(r2)] + n ELSE [n] END AS nodes\r\n\r\nSince it is best practice to put a reasonable upper bound on [variable length relationship](https://neo4j.com/docs/cypher-manual/current/patterns/reference/#variable-length-relationships) patterns (to avoid taking too long or running out of memory), this query searches paths up to 9 (i.e., 8 + 1) relationships deep (adjust as necessary to suit your actual data).\r\n\r\nIf `action` is &#39;ODC&#39;, then all the nodes in the path are returned in the `nodes` list, else the list contains only the last node.",
          "link": "https://stackoverflow.com/questions/77744940/how-to-use-apoc-path-subgraphall-procedure-in-neo4j/77748593#77748593",
          "title": "How to use apoc.path.subgraphAll procedure in Neo4j"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1704230204,
      "creation_date": 1704184763,
      "last_edit_date": 1704228102,
      "question_id": 77744940,
      "share_link": "https://stackoverflow.com/q/77744940",
      "body_markdown": "I am doing a project in which I am required to return the path or nodes in a path from a particular start node. I pass the start node to the query, and need to continue down the path until the value of the relationship property `Action` between two consecutive nodes is &quot;ODC&quot;. Or, if the `Action` value is &quot;ODSN&quot;, I have to break from the particular path and return the next node alone separately. I am required to process all the paths from a particular start node in this manner.\r\n\r\nI tried using the `apoc.path.subgraphAll` procedure but did not get the desired result:\r\n\r\n    MATCH (c:Customer {customer_id: 4})\r\n    CALL apoc.path.subgraphAll(c, {\r\n    relationshipFilter: &quot;&gt;&quot;,\r\n    minLevel: 1\r\n    })\r\n    YIELD nodes, relationships\r\n    UNWIND relationships as rel\r\n    WITH nodes, rel\r\n    WHERE rel.Action = &#39;ODC&#39;\r\n    RETURN DISTINCT nodes\r\n\r\nIs there another method to approach this or should I be using another APOC procedure?\r\n",
      "link": "https://stackoverflow.com/questions/77744940/how-to-use-apoc-path-subgraphall-procedure-in-neo4j",
      "title": "How to use apoc.path.subgraphAll procedure in Neo4j"
    },
    {
      "tags": [
        "spring-boot",
        "neo4j",
        "spring-batch",
        "spring-data-neo4j",
        "neo4j-ogm"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 7992,
            "user_id": 2650436,
            "user_type": "registered",
            "accept_rate": 80,
            "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
            "display_name": "meistermeier",
            "link": "https://stackoverflow.com/users/2650436/meistermeier"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1705427660,
          "post_id": 77744069,
          "comment_id": 137205151,
          "link": "https://stackoverflow.com/questions/77744069/spring-batch-still-compatible-and-usable-with-spring-data-neo4j-7-2-1#comment137205151_77744069"
        }
      ],
      "owner": {
        "reputation": 1244,
        "user_id": 10287036,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c138dda98727d931c3e49de2bbca56c8?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "ThirstForKnowledge",
        "link": "https://stackoverflow.com/users/10287036/thirstforknowledge"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 114,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1704166552,
      "creation_date": 1704166552,
      "question_id": 77744069,
      "share_link": "https://stackoverflow.com/q/77744069",
      "body_markdown": "Initial situation\r\n-----------------\r\nWe are currently facing the challenge of migrating our applications to Spring Boot 3.x across the entire enterprise. Due to the intensive use of Spring Data Neo4j (SDN), a migration to SDN 7.2.1 must be carried out implicitly beforehand, in which the Object Graph Mapper (OGM) is omitted in favor of a renewed Spring Data Neo4j. See https://docs.spring.io/spring-data/neo4j/reference/appendix/migrating.html\r\n\r\nProblem\r\n-------\r\nThe equally intensively used Spring Batch Framework (spring-boot-starter-batch, 2.7.18) still requires a `SessionFactory` of the Neo4j Object Graph Mapper for the `Neo4jItemReader` and `Neo4jItemWriter`, which, however, no longer exists as intended. \r\n\r\nA manually created `CustomNeo4jItemReader` and `CustomNeo4jItemWriter`, in which the previous OGM session (`org.neo4j.ogm.session.Session`) is replaced by direct access to the Neo4j driver, does not work either, as this new driver session (`org.neo4j.driver.Session`) lacks many of the methods used by Spring Batch.\r\n\r\nTarget situation\r\n----------------\r\nHow can we use Spring Batch and Neo4j with **Spring Data Neo4j 7.2.1 and higher** and thus follow the Spring Release Train?\r\n\r\nVersions\r\n--------\r\n - Spring Boot from version 2.7.18\r\n - [Spring Data Neo4j (SDN) from version 7.2.1](https://docs.spring.io/spring-data/neo4j/reference/appendix/migrating.html)\r\n - Spring Batch 2.7.18 (bundled version of Spring Boot)\r\n - [Spring Batch Extensions](https://github.com/spring-projects/spring-batch-extensions/tree/main/spring-batch-neo4j)\r\n",
      "link": "https://stackoverflow.com/questions/77744069/spring-batch-still-compatible-and-usable-with-spring-data-neo4j-7-2-1",
      "title": "Spring Batch still compatible and usable with Spring Data Neo4j (&gt;= 7.2.1)?"
    },
    {
      "tags": ["neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703883292,
          "creation_date": 1703883292,
          "answer_id": 77733990,
          "question_id": 77731783,
          "share_link": "https://stackoverflow.com/a/77733990",
          "body_markdown": "If you are using the Java Driver, see [here](https://neo4j.com/docs/java-manual/current/session-api/#java-driver-simple-transaction-fn) for some relevant documentation.\r\n\r\nIf you are using the Java API, see [here](https://neo4j.com/docs/java-reference/current/transaction-management/)",
          "link": "https://stackoverflow.com/questions/77731783/are-transactions-in-neo4j-default-or-should-i-manually-handle-it-i-am-using-neo4/77733990#77733990",
          "title": "Are transactions In Neo4j default or should I manually handle it.I am using Neo4j from Java using the neo4j driver.How should i manage transactions?"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 21,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703883292,
      "creation_date": 1703850095,
      "last_edit_date": 1703882588,
      "question_id": 77731783,
      "share_link": "https://stackoverflow.com/q/77731783",
      "body_markdown": "I am using Neo4j from Java.The program logic contains running of multiple and manipulating the obtained data to further execute queries against the database.How do I properly include them in a transaction and rollback in case of errors?",
      "link": "https://stackoverflow.com/questions/77731783/are-transactions-in-neo4j-default-or-should-i-manually-handle-it-i-am-using-neo4",
      "title": "Are transactions In Neo4j default or should I manually handle it.I am using Neo4j from Java using the neo4j driver.How should i manage transactions?"
    },
    {
      "tags": ["python", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "reply_to_user": {
            "reputation": 50817,
            "user_id": 5320906,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=256&g=1",
            "display_name": "snakecharmerb",
            "link": "https://stackoverflow.com/users/5320906/snakecharmerb"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1703793558,
          "post_id": 77728734,
          "comment_id": 137032554,
          "link": "https://stackoverflow.com/questions/77728734/database-neo4j-not-up-to-the-requested-version#comment137032554_77728734"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703793624,
          "post_id": 77728734,
          "comment_id": 137032564,
          "link": "https://stackoverflow.com/questions/77728734/database-neo4j-not-up-to-the-requested-version#comment137032564_77728734"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23169479,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocK_0fGRtvRPOy04JXznoN4tekkPALRoWNKEOxO_5uKU=k-s256",
        "display_name": "Utkarsh Baranwal",
        "link": "https://stackoverflow.com/users/23169479/utkarsh-baranwal"
      },
      "last_editor": {
        "reputation": 12259,
        "user_id": 4420967,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=256&g=1",
        "display_name": "James Z",
        "link": "https://stackoverflow.com/users/4420967/james-z"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703793189,
      "creation_date": 1703790652,
      "last_edit_date": 1703793189,
      "question_id": 77728734,
      "share_link": "https://stackoverflow.com/q/77728734",
      "body_markdown": "I am running queries on neo4j db using python and it is failing. \r\n\r\nRunning queries on neo4j using python code are failing. I am getting this error:\r\n\r\n&gt; {code: Neo.TransientError.Transaction.BookmarkTimeout} {message: Database &#39;neo4j&#39; not up to the requested version: 96025349. Latest database version is 96025343}. \r\n\r\nHow to resolve this error? I am using neo4j library. ",
      "link": "https://stackoverflow.com/questions/77728734/database-neo4j-not-up-to-the-requested-version",
      "title": "Database &#39;neo4j&#39; not up to the requested version"
    },
    {
      "tags": ["neo4j", "cypher", "parquet"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703793299,
          "post_id": 77725935,
          "comment_id": 137032515,
          "link": "https://stackoverflow.com/questions/77725935/neo4j-to-load-parquet-file-multiple-element-with-the-same-key-found-but-the-el#comment137032515_77725935"
        },
        {
          "owner": {
            "reputation": 411,
            "user_id": 6086295,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
            "display_name": "Kevin Lee",
            "link": "https://stackoverflow.com/users/6086295/kevin-lee"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703815413,
          "post_id": 77725935,
          "comment_id": 137034624,
          "link": "https://stackoverflow.com/questions/77725935/neo4j-to-load-parquet-file-multiple-element-with-the-same-key-found-but-the-el#comment137034624_77725935"
        }
      ],
      "owner": {
        "reputation": 411,
        "user_id": 6086295,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
        "display_name": "Kevin Lee",
        "link": "https://stackoverflow.com/users/6086295/kevin-lee"
      },
      "last_editor": {
        "reputation": 411,
        "user_id": 6086295,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
        "display_name": "Kevin Lee",
        "link": "https://stackoverflow.com/users/6086295/kevin-lee"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703815361,
      "creation_date": 1703754529,
      "last_edit_date": 1703815361,
      "question_id": 77725935,
      "share_link": "https://stackoverflow.com/q/77725935",
      "body_markdown": "I am trying to read and load a parquet file data to neo4j, below is the schema of my parquet file:\r\n```\r\nroot\r\n |-- globalcustid: string (nullable = true)\r\n |-- member_node: struct (nullable = false)\r\n |    |-- label: string (nullable = false)\r\n |    |-- properties: array (nullable = false)\r\n |    |    |-- element: struct (containsNull = false)\r\n |    |    |    |-- key: string (nullable = false)\r\n |    |    |    |-- value: string (nullable = true)\r\n |-- relationships: array (nullable = false)\r\n |    |-- element: struct (containsNull = false)\r\n |    |    |-- node: struct (nullable = false)\r\n |    |    |    |-- label: string (nullable = true)\r\n |    |    |    |-- properties: array (nullable = false)\r\n |    |    |    |    |-- element: struct (containsNull = false)\r\n |    |    |    |    |    |-- key: string (nullable = false)\r\n |    |    |    |    |    |-- value: string (nullable = true)\r\n |    |    |-- relationship: struct (nullable = false)\r\n |    |    |    |-- label: string (nullable = false)\r\n |    |    |    |-- properties: array (nullable = false)\r\n |    |    |    |    |-- element: struct (containsNull = false)\r\n |    |    |    |    |    |-- key: string (nullable = false)\r\n |    |    |    |    |    |-- value: string (nullable = true)\r\n```\r\n\r\nHere is one row of my parquet data (displayed in json format for better readability):\r\n```\r\n{\r\n\t&quot;globalcustid&quot;: &quot;12345&quot;,\r\n\t&quot;member_node&quot;: {\r\n\t\t&quot;label&quot;: &quot;MEMBER&quot;,\r\n\t\t&quot;properties&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;key&quot;: &quot;age&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;45&quot;\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;key&quot;: &quot;gender&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;Male&quot;\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\t&quot;relationships&quot;: [\r\n\t\t{\r\n\t\t\t&quot;relationship&quot;: {\r\n\t\t\t\t&quot;label&quot;: &quot;LIVE_IN&quot;,\r\n\t\t\t\t&quot;properties&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;createdate&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;2023-11-22&quot;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;enddate&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;9999-12-31&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t&quot;node&quot;: {\r\n\t\t\t\t&quot;label&quot;: &quot;COUNTRY&quot;,\r\n\t\t\t\t&quot;properties&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;country_id&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;c123&quot;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;country_name&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;us&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n}\r\n```\r\n\r\nAnd here is my cypher script to load the file:\r\n```\r\ncall apoc.load.parquet(\r\n    &#39;part-00000-183a44db-1c2a-4e98-9db2-6aefaa419751-c000.snappy.parquet&#39;,\r\n    {\r\n        batchSize: 50000,\r\n        mapping: {\r\n                globalcustid: &#39;Varchar&#39;, member_node: &#39;MAP&#39;, relationships: &#39;LIST&#39;\r\n        }\r\n    }\r\n) yield value as row\r\n\r\nreturn *\r\n```\r\n\r\nHowever, it returned the following error. But the key values are unique in the properties array.\r\n```\r\nFailed to invoke procedure `apoc.load.parquet`: Caused by: java.lang.RuntimeException: Multiple element with the same key found, but the element type is not a list\r\n```",
      "link": "https://stackoverflow.com/questions/77725935/neo4j-to-load-parquet-file-multiple-element-with-the-same-key-found-but-the-el",
      "title": "Neo4j to load parquet file: Multiple element with the same key found, but the element type is not a list"
    },
    {
      "tags": ["database", "docker", "neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703792073,
          "creation_date": 1703792073,
          "answer_id": 77728832,
          "question_id": 77725349,
          "share_link": "https://stackoverflow.com/a/77728832",
          "body_markdown": "An error message like &quot;Unable to register procedure, because the name apoc.atomic.add is already in use.&quot; usually indicates that there are multiple APOC plugins.\r\n\r\nCheck your docker configuration to make sure it does not install multiple APOC plugins.",
          "link": "https://stackoverflow.com/questions/77725349/neo4j-not-able-to-start-using-apoc-plugin/77728832#77728832",
          "title": "Neo4j not able to start using apoc plugin"
        }
      ],
      "owner": {
        "reputation": 33,
        "user_id": 11772551,
        "user_type": "registered",
        "profile_image": "https://lh4.googleusercontent.com/-W_ttzZVNCNU/AAAAAAAAAAI/AAAAAAAAC-k/9cRkbvKeUKk/photo.jpg?sz=256",
        "display_name": "DILIP KUMAR",
        "link": "https://stackoverflow.com/users/11772551/dilip-kumar"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 19,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703792073,
      "creation_date": 1703745474,
      "question_id": 77725349,
      "share_link": "https://stackoverflow.com/q/77725349",
      "body_markdown": "Getting this error while starting the neo4j docker, I am on linux server\r\n\r\n    \r\n\r\n&gt; ERROR Failed to start Neo4j on 0.0.0.0:7474.\r\njava.lang.RuntimeException: Error starting Neo4j database server at /data/databases\r\n\tat org.neo4j.graphdb.facade.DatabaseManagementServiceFactory.startDatabaseServer(DatabaseManagementServiceFactory.java:255) ~[neo4j-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.graphdb.facade.DatabaseManagementServiceFactory.build(DatabaseManagementServiceFactory.java:193) ~[neo4j-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.server.CommunityBootstrapper.createNeo(CommunityBootstrapper.java:36) ~[neo4j-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.server.NeoBootstrapper.start(NeoBootstrapper.java:164) ~[neo4j-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.server.NeoBootstrapper.start(NeoBootstrapper.java:85) ~[neo4j-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.server.CommunityEntryPoint.main(CommunityEntryPoint.java:30) ~[neo4j-5.2.0.jar:5.2.0]\r\nCaused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &#39;org.neo4j.procedure.impl.GlobalProceduresRegistry@2fd954f&#39; was successfully initialized, but failed to start. Please see the attached cause exception &quot;Unable to register procedure, because the name `apoc.atomic.add` is already in use.&quot;.\r\n\tat org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:370) ~[neo4j-common-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:92) ~[neo4j-common-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.graphdb.facade.DatabaseManagementServiceFactory.startDatabaseServer(DatabaseManagementServiceFactory.java:246) ~[neo4j-5.2.0.jar:5.2.0]\r\n\t... 5 more\r\nCaused by: org.neo4j.internal.kernel.api.exceptions.ProcedureException: Unable to register procedure, because the name `apoc.atomic.add` is already in use.\r\n\tat org.neo4j.procedure.impl.ProcedureRegistry.register(ProcedureRegistry.java:84) ~[neo4j-procedure-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.procedure.impl.GlobalProceduresRegistry.register(GlobalProceduresRegistry.java:145) ~[neo4j-procedure-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.procedure.impl.GlobalProceduresRegistry.register(GlobalProceduresRegistry.java:89) ~[neo4j-procedure-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.procedure.impl.GlobalProceduresRegistry.start(GlobalProceduresRegistry.java:340) ~[neo4j-procedure-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:353) ~[neo4j-common-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:92) ~[neo4j-common-5.2.0.jar:5.2.0]\r\n\tat org.neo4j.graphdb.facade.DatabaseManagementServiceFactory.startDatabaseServer(DatabaseManagementServiceFactory.java:246) ~[neo4j-5.2.0.jar:5.2.0]\r\n\t... 5 more",
      "link": "https://stackoverflow.com/questions/77725349/neo4j-not-able-to-start-using-apoc-plugin",
      "title": "Neo4j not able to start using apoc plugin"
    },
    {
      "tags": [
        "ruby-on-rails",
        "neo4j",
        "graph-databases",
        "ruby-on-rails-5.2",
        "ruby-2.7"
      ],
      "owner": {
        "reputation": 605,
        "user_id": 1484384,
        "user_type": "registered",
        "accept_rate": 17,
        "profile_image": "https://www.gravatar.com/avatar/c4025b34a5ce30ba73c491fcc2513d49?s=256&d=identicon&r=PG",
        "display_name": "Vishnu Narang",
        "link": "https://stackoverflow.com/users/1484384/vishnu-narang"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 15,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703738819,
      "creation_date": 1703738819,
      "question_id": 77725052,
      "share_link": "https://stackoverflow.com/q/77725052",
      "body_markdown": "I&#39;ve been trying to setup Neo4j in my existing Rails project which has Rails version 5.2.8.1 and Ruby 2.7.7\r\n\r\nI&#39;ve gone through almost every documentation i could find and had long chats with ChatGPT but nothing has worked so far.\r\n\r\nI&#39;m trying to run Neo4j with Docker.\r\n\r\nMy docker-compose file is as follows:\r\n\r\n```\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  neo4j:\r\n    image: neo4j\r\n    ports:\r\n      - 7474:7474\r\n      - 7687:7687\r\n    environment:\r\n      - NEO4J_AUTH=neo4j/password\r\n      - NEO4J_dbms_memory_pagecache_size=512m\r\n    volumes:\r\n      - ./neo4j/data:/data\r\n      - ./neo4j/logs:/logs\r\n```\r\n\r\nI&#39;ve tried various combinations of settings with neo4j.yml, neo4j.conf and application.rb\r\nNothing has worked unfortunately.\r\n\r\nIf anyone can help me with steps to setup even a new Rails app with ruby 2.7.7 and with any recent version of Neo4j, that&#39;ll be immensely helpful !!\r\n\r\nDocker works. I can run graph database and run cypher queries in the browser. But from rails, it doesn&#39;t work.\r\n\r\nThe most i could get to was being able to run a MATCH query but when it came to creating nodes or running neo4j:migrate command, it didn&#39;t work at all.",
      "link": "https://stackoverflow.com/questions/77725052/how-to-setup-ruby-on-rails-with-neo4j-database-on-macbook-m1-ruby-2-7-7-and-rai",
      "title": "How to setup Ruby on Rails with Neo4j database on Macbook M1? Ruby 2.7.7 and Rails 5.2.8.1"
    },
    {
      "tags": ["docker", "ubuntu", "networking", "neo4j", "connection"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 510,
            "user_id": 888367,
            "user_type": "registered",
            "accept_rate": 33,
            "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
            "display_name": "Andr&#233;s Meza-Escall&#243;n",
            "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703781969,
          "creation_date": 1703781969,
          "answer_id": 77728125,
          "question_id": 77723167,
          "share_link": "https://stackoverflow.com/a/77728125",
          "body_markdown": "I just tried the default configuration, which I assumed would only work locally, and to my surprise it started responding to remote requests through the domain name.\r\n```\r\n    curl http://&lt;server-domain&gt;:7474\r\n    \r\n    {\r\n      &quot;bolt_routing&quot; : &quot;neo4j://&lt;server-domain&gt;:7687&quot;,\r\n      &quot;transaction&quot; : &quot;http://&lt;server-domain&gt;:7474/db/{databaseName}/tx&quot;,\r\n      &quot;bolt_direct&quot; : &quot;bolt://&lt;server-domain&gt;:7687&quot;,\r\n      &quot;neo4j_version&quot; : &quot;5.15.0&quot;,\r\n      &quot;neo4j_edition&quot; : &quot;community&quot;\r\n    }\r\n```\r\n\r\nSo despite I did not set the specific server domain name nor the server&#39;s public IP address, Neo4j accepted connections through those.\r\n\r\nLooking closer the Operation Manual documentation for the [server.default_listen_address setting][1] it reads:\r\n\r\n&gt; To listen for connections on all interfaces, use &quot;0.0.0.0&quot;.\r\n\r\nSo my interpretation is that changing the default value &quot;localhost&quot; to &quot;0.0.0.0&quot; in the configuration parameters was enough and all the other specific settings are redundant in this case:\r\n\r\n```\r\n    --env NEO4J_server_default__listen__address=0.0.0.0 \\\r\n```\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/configuration/configuration-settings/#config_server.default_listen_address",
          "link": "https://stackoverflow.com/questions/77723167/docker-neo4j-5-15-0-community-error-when-using-public-ip-address/77728125#77728125",
          "title": "Docker Neo4j 5.15.0 community error when using public IP address"
        }
      ],
      "owner": {
        "reputation": 510,
        "user_id": 888367,
        "user_type": "registered",
        "accept_rate": 33,
        "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
        "display_name": "Andr&#233;s Meza-Escall&#243;n",
        "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
      },
      "last_editor": {
        "reputation": 510,
        "user_id": 888367,
        "user_type": "registered",
        "accept_rate": 33,
        "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
        "display_name": "Andr&#233;s Meza-Escall&#243;n",
        "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": -1,
      "last_activity_date": 1703781969,
      "creation_date": 1703697028,
      "last_edit_date": 1703709915,
      "question_id": 77723167,
      "share_link": "https://stackoverflow.com/q/77723167",
      "body_markdown": "I need to access remotely to Neo4j running on a Docker container using the server&#39;s public IP address, but when I configure the IP address via parameters, the connection through http via 7474 port fails and neo4j.log shows these exceptions:\r\n\r\n```\r\norg.neo4j.kernel.lifecycle.LifecycleException: Component &#39;org.neo4j.bolt.protocol.common.connector.netty.SocketNettyConnector@2548fc01&#39; was successfully initialized, but failed to start. Please see the attached cause exception &quot;bind(..) failed: Cannot assign requested address&quot;.\r\n \r\norg.neo4j.configuration.helpers.PortBindException: An error occurred while trying to bind to the socket /&lt;server_public_IP&gt;:7687\r\n \r\nio.netty.channel.unix.Errors$NativeIoException: bind(..) failed: Cannot assign requested address\r\n```\r\n\r\nThe server is running on an AWS virtual server with these settings:\r\n\r\n```\r\n  Virtualization: amazon\r\nOperating System: Ubuntu 22.04.3 LTS              \r\n          Kernel: Linux 6.2.0-1017-aws\r\n    Architecture: arm64\r\n```\r\n\r\nI am using the latest [docker image for neo4j 5.15.0](https://hub.docker.com/layers/library/neo4j/5.15.0/images/sha256-49209c959ae23185b7625d0f9185b59cb82269f2dfbeba266376afd1f55d4ed9?context=explore)\r\n\r\nAs instructed in the [Operations manual](https://neo4j.com/docs/operations-manual/current/docker/configuration/), and [this post](https://community.neo4j.com/t/remote-neo4j-server-port-7474-connection-refused/30058) the command I am using to create and run the container with the neo4j image is:\r\n\r\n```\r\nsudo docker run -d \r\n    --name=neo4jdocker \\\r\n    --restart always \\\r\n    --publish=7474:7474 --publish=7687:7687 \\\r\n    --env NEO4J_AUTH=neo4j/&lt;my password&gt; \\\r\n    --env NEO4J_server_memory_heap_initial__size=12288m \\\r\n    --env NEO4J_server_memory_heap_max__size=20480m \\\r\n    --env NEO4J_server_default__listen__address=0.0.0.0 \\\r\n    --env NEO4J_server_default__advertised_address=&lt;server_public_IP&gt; \\\r\n    --env NEO4J_server_bolt_enabled=true \\\r\n    --env NEO4J_server_bolt_tls__level=DISABLED \\\r\n    --env NEO4J_server_bolt_listen__address=0.0.0.0:7687 \\\r\n    --env NEO4J_server_bolt_advertised__address=&lt;server_public_IP&gt;:7687 \\\r\n    --env NEO4J_server_http_enabled=true \\\r\n    --env NEO4J_server_http_listen__address=0.0.0.0:7474 \\\r\n    --env NEO4J_server_http_advertised__address=&lt;server_public_IP&gt;:7474 \\\r\n    --env NEO4J_server_https_enabled=false \\\r\n    --volume=/home/ubuntu/path/data:/data \\\r\n    --volume=/home/ubuntu/path/import:/import \\\r\n    --volume=/home/ubuntu/path/logs:/logs \\\r\n    --volume=/home/ubuntu/path/plugins:/plugins \\\r\n    neo4j:5.15.0\r\n```\r\n\r\nThen the Neo4j finds something wrong and restarts each minute:\r\n\r\n```\r\nsudo docker ps\r\n \r\nCONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS                          PORTS     NAMES\r\n2a641248b8d9   neo4j:5.15.0   &quot;tini -g -- /startup…&quot;   About a minute ago   Restarting (1) 18 seconds ago             neo4jdocker\r\n```\r\n\r\n\r\nOn the other hand, when I create the container without the public IP configuration settings, everything works as expected locally at the server machine:\r\n\r\n```\r\nsudo docker run -d \\\r\n    --name=neo4jdocker \\\r\n    --restart always \\\r\n    --publish=7474:7474 --publish=7687:7687 \\\r\n    --env NEO4J_AUTH=neo4j/&lt;my password&gt; \\\r\n    --env NEO4J_server_memory_heap_initial__size=12288m \\\r\n    --env NEO4J_server_memory_heap_max__size=20480m \\\r\n    --env NEO4J_server_default__listen__address=0.0.0.0 \\\r\n    --volume=/home/ubuntu/path/data:/data \\\r\n    --volume=/home/ubuntu/path/import:/import \\\r\n    --volume=/home/ubuntu/path/logs:/logs \\\r\n    --volume=/home/ubuntu/path/plugins:/plugins \\\r\n    neo4j:5.15.0\r\n```\r\n\r\nDocker reports everything ok:\r\n\r\n```\r\nsudo docker ps\r\n\r\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                                                                                            NAMES\r\nf5432bafedd5   neo4j:5.15.0   &quot;tini -g -- /startup…&quot;   34 minutes ago   Up 34 minutes   0.0.0.0:7474-&gt;7474/tcp, :::7474-&gt;7474/tcp, 7473/tcp, 0.0.0.0:7687-&gt;7687/tcp, :::7687-&gt;7687/tcp   neo4jdocker\r\n```\r\n\r\nI even have access to the web interface:\r\n\r\n```\r\ncurl http://localhost:7474\r\n\r\n{\r\n  &quot;bolt_routing&quot; : &quot;neo4j://localhost:7687&quot;,\r\n  &quot;transaction&quot; : &quot;http://localhost:7474/db/{databaseName}/tx&quot;,\r\n  &quot;bolt_direct&quot; : &quot;bolt://localhost:7687&quot;,\r\n &quot;neo4j_version&quot; : &quot;5.15.0&quot;,\r\n\r\n  &quot;neo4j_edition&quot; : &quot;community&quot;\r\n}\r\n```\r\n\r\nAnd obviously the ports appear to be listened by the docker container:\r\n\r\n```\r\nsudo lsof -i -P -n\r\n \r\nCOMMAND       PID            USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\r\ndocker-pr 2179741            root    4u  IPv4 5668735      0t0  TCP *:7687 (LISTEN)\r\ndocker-pr 2179747            root    4u  IPv6 5667661      0t0  TCP *:7687 (LISTEN)\r\ndocker-pr 2179759            root    4u  IPv4 5670560      0t0  TCP *:7474 (LISTEN)\r\ndocker-pr 2179766            root    4u  IPv6 5669470      0t0  TCP *:7474 (LISTEN)\r\n```\r\n\r\nAnd neo4j.log shows expected messages:\r\n\r\n```\r\n2023-12-27 15:30:10.305+0000 INFO  Starting...\r\n2023-12-27 15:30:11.033+0000 INFO  This instance is ServerId{57946358} (57946358-4700-4f22-bb6f-9bf3d5559522)\r\n2023-12-27 15:30:11.614+0000 INFO  ======== Neo4j 5.15.0 ========\r\n2023-12-27 15:30:12.773+0000 INFO  Bolt enabled on 0.0.0.0:7687. \r\n2023-12-27 15:30:13.346+0000 INFO  HTTP enabled on 0.0.0.0:7474.\r\n2023-12-27 15:30:13.347+0000 INFO  Remote interface available at http://localhost:7474/\r\n2023-12-27 15:30:13.349+0000 INFO  id: 0101D8AABC7A7290033198E46D8969889C893917A0BC961C751565FB9B130D40\r\n2023-12-27 15:30:13.350+0000 INFO  name: system\r\n2023-12-27 15:30:13.350+0000 INFO  creationDate: 2023-12-22T22:57:40.961Z\r\n2023-12-27 15:30:13.350+0000 INFO  Started. \r\n```\r\n\r\nCan you please help me to identify what I did wrong? What is missing?",
      "link": "https://stackoverflow.com/questions/77723167/docker-neo4j-5-15-0-community-error-when-using-public-ip-address",
      "title": "Docker Neo4j 5.15.0 community error when using public IP address"
    },
    {
      "tags": ["python", "neo4j", "google-drive-api"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703712932,
          "post_id": 77722165,
          "comment_id": 137024223,
          "link": "https://stackoverflow.com/questions/77722165/read-my-json-files-from-google-drive-with-python-i-want-to-transfer-to-neo4j-dat#comment137024223_77722165"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 23163447,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/695622bb3ee5a4fd1b0b94fb37de423d?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "gorkemkaratepe",
            "link": "https://stackoverflow.com/users/23163447/gorkemkaratepe"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704892004,
          "post_id": 77722165,
          "comment_id": 137142982,
          "link": "https://stackoverflow.com/questions/77722165/read-my-json-files-from-google-drive-with-python-i-want-to-transfer-to-neo4j-dat#comment137142982_77722165"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 23163447,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/695622bb3ee5a4fd1b0b94fb37de423d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "gorkemkaratepe",
        "link": "https://stackoverflow.com/users/23163447/gorkemkaratepe"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 32,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703683499,
      "creation_date": 1703683499,
      "question_id": 77722165,
      "share_link": "https://stackoverflow.com/q/77722165",
      "body_markdown": "read my json files from google drive with python \r\nI want to transfer to neo4j database in aura db, how do I do it?\r\n\r\n\r\n\r\nI have not done such a process before, I do not have any information, can you help?\r\nI think there are a few methods, which method should I use and how do I use that method?",
      "link": "https://stackoverflow.com/questions/77722165/read-my-json-files-from-google-drive-with-python-i-want-to-transfer-to-neo4j-dat",
      "title": "read my json files from google drive with python I want to transfer to neo4j database in aura db, how do I do it?"
    },
    {
      "tags": ["java", "spring", "spring-boot", "docker", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703676545,
          "post_id": 77720317,
          "comment_id": 137019906,
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j#comment137019906_77720317"
        },
        {
          "owner": {
            "reputation": 5,
            "user_id": 19978679,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
            "display_name": "Ryan Pham",
            "link": "https://stackoverflow.com/users/19978679/ryan-pham"
          },
          "reply_to_user": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703741116,
          "post_id": 77720317,
          "comment_id": 137026256,
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j#comment137026256_77720317"
        },
        {
          "owner": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703769754,
          "post_id": 77720317,
          "comment_id": 137029375,
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j#comment137029375_77720317"
        },
        {
          "owner": {
            "reputation": 5,
            "user_id": 19978679,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
            "display_name": "Ryan Pham",
            "link": "https://stackoverflow.com/users/19978679/ryan-pham"
          },
          "reply_to_user": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703816579,
          "post_id": 77720317,
          "comment_id": 137034677,
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j#comment137034677_77720317"
        },
        {
          "owner": {
            "reputation": 5,
            "user_id": 19978679,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
            "display_name": "Ryan Pham",
            "link": "https://stackoverflow.com/users/19978679/ryan-pham"
          },
          "reply_to_user": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703816951,
          "post_id": 77720317,
          "comment_id": 137034696,
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j#comment137034696_77720317"
        },
        {
          "owner": {
            "reputation": 5,
            "user_id": 19978679,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
            "display_name": "Ryan Pham",
            "link": "https://stackoverflow.com/users/19978679/ryan-pham"
          },
          "reply_to_user": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703828413,
          "post_id": 77720317,
          "comment_id": 137035373,
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j#comment137035373_77720317"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 5,
                "user_id": 19978679,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
                "display_name": "Ryan Pham",
                "link": "https://stackoverflow.com/users/19978679/ryan-pham"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1703718738,
              "post_id": 77722181,
              "comment_id": 137024761,
              "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j/77722181#comment137024761_77722181"
            },
            {
              "owner": {
                "reputation": 5,
                "user_id": 19978679,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
                "display_name": "Ryan Pham",
                "link": "https://stackoverflow.com/users/19978679/ryan-pham"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703742044,
              "post_id": 77722181,
              "comment_id": 137026301,
              "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j/77722181#comment137026301_77722181"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": -1,
                "user_type": "moderator",
                "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
                "display_name": "Community",
                "link": "https://stackoverflow.com/users/-1/community"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704333616,
              "post_id": 77722181,
              "comment_id": 137080146,
              "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j/77722181#comment137080146_77722181"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 8863301,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/9cf19476c4e09bd496d5fe23e2f41964?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "peti Nono",
            "link": "https://stackoverflow.com/users/8863301/peti-nono"
          },
          "comment_count": 3,
          "down_vote_count": 1,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": -1,
          "last_activity_date": 1703683732,
          "creation_date": 1703683732,
          "answer_id": 77722181,
          "question_id": 77720317,
          "share_link": "https://stackoverflow.com/a/77722181",
          "body_markdown": "verify that the two containers (services) are in the same network. \r\n\r\nAnd you need to specify that you want to start the Second container when the first one  have finish.",
          "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j/77722181#77722181",
          "title": "How to dockerize springboot app with Neo4j"
        }
      ],
      "owner": {
        "reputation": 5,
        "user_id": 19978679,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
        "display_name": "Ryan Pham",
        "link": "https://stackoverflow.com/users/19978679/ryan-pham"
      },
      "last_editor": {
        "reputation": 5,
        "user_id": 19978679,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AItbvmnDgXzAMQOXWNhwccTvSUA7eCs5z_T5fa8VzZl1=k-s256",
        "display_name": "Ryan Pham",
        "link": "https://stackoverflow.com/users/19978679/ryan-pham"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703817041,
      "creation_date": 1703657148,
      "last_edit_date": 1703817041,
      "question_id": 77720317,
      "share_link": "https://stackoverflow.com/q/77720317",
      "body_markdown": "I am trying to dockerize my springboot application with my Neo4j application.\r\nThis is my docker-compose.yml\r\n```\r\nversion: &quot;3&quot;\r\nservices:\r\n  myneo4j:\r\n    image: neo4j:5.15.0\r\n    container_name: &quot;myneo4j&quot;\r\n    ports:\r\n      - 7474:7474\r\n      - 7687:7687\r\n    restart: unless-stopped\r\n    environment:\r\n      - NEO4J_AUTH=neo4j/12345678\r\n    volumes:\r\n      - ./db/data:/data\r\n      - ./db/conf:/conf\r\n      - ./db/logs:/logs\r\n      - ./db/plugins:/plugins\r\n  springboot-neo4j:\r\n    image: springboot-neo4j:1.0\r\n    container_name: springboot-neo4j\r\n    depends_on:\r\n      - myneo4j\r\n    ports:\r\n      - 3002:3002\r\n    links:\r\n      - myneo4j\r\n```\r\n\r\nThis is my application.properties:\r\n```\r\nspring.data.neo4j.uri=bolt://host.docker.internal:7687\r\nspring.neo4j.authentication.username=neo4j\r\nspring.neo4j.authentication.password=12345678\r\n\r\n```\r\n\r\nI already looked up past forums and the spring.data.neo4j.uri=bolt://host.docker.internal:7687 was the fix for most people except it doesn&#39;t work for me here.\r\n\r\nmyneo4j container works and runs. the springboot-neo4j container doesn&#39;t work. It gives me this error:\r\n```\r\nspringboot-neo4j  | Caused by: org.neo4j.driver.v1.exceptions.ServiceUnavailableException: Unable to connect to localhost:7687, ensure the database is running and that there is a working network connection to it.\r\n```\r\n\r\nhttps://github.com/phammings/Music-Microservice-API\r\nHere is my github if anyone would like to replicate my error. I am trying to dockerize my profile-microservice with absolute no luck\r\n\r\nThank you so much if anyone can let me know whats the fix here",
      "link": "https://stackoverflow.com/questions/77720317/how-to-dockerize-springboot-app-with-neo4j",
      "title": "How to dockerize springboot app with Neo4j"
    },
    {
      "tags": ["json", "neo4j", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703712225,
          "post_id": 77715125,
          "comment_id": 137024159,
          "link": "https://stackoverflow.com/questions/77715125/migrating-neo4j-database-content-apoc-import-json-not-working#comment137024159_77715125"
        },
        {
          "owner": {
            "reputation": 361,
            "user_id": 6346852,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ad29693718e93b1d3c0c0f12d3e5adfe?s=256&d=identicon&r=PG",
            "display_name": "Necktschnagge",
            "link": "https://stackoverflow.com/users/6346852/necktschnagge"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703849513,
          "post_id": 77715125,
          "comment_id": 137037414,
          "link": "https://stackoverflow.com/questions/77715125/migrating-neo4j-database-content-apoc-import-json-not-working#comment137037414_77715125"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703882273,
          "post_id": 77715125,
          "comment_id": 137041290,
          "link": "https://stackoverflow.com/questions/77715125/migrating-neo4j-database-content-apoc-import-json-not-working#comment137041290_77715125"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 361,
            "user_id": 6346852,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ad29693718e93b1d3c0c0f12d3e5adfe?s=256&d=identicon&r=PG",
            "display_name": "Necktschnagge",
            "link": "https://stackoverflow.com/users/6346852/necktschnagge"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703850433,
          "creation_date": 1703850433,
          "answer_id": 77731803,
          "question_id": 77715125,
          "share_link": "https://stackoverflow.com/a/77731803",
          "body_markdown": "### Workaround\r\n\r\nI wrote a little python script to convert the exported json in to a cypher `CREATE` instruction. It should create the database content as exported previously.\r\n\r\nIf the exported json has additional properties that are not treated by this script, it prints at least a list of &quot;errors&quot; which are just these ignored parts of the json input, so that the user can manually check.\r\n\r\n```python\r\nimport argparse\r\nimport json\r\n\r\ndef main(file_path):\r\n    with open(file_path) as my_file:\r\n        \r\n        data = []\r\n        for line in my_file:\r\n            data.append(json.loads(line))\r\n        \r\n        instruction = &#39;CREATE\\n&#39;\r\n        for json_obj in data:\r\n            if json_obj[&#39;type&#39;] == &#39;node&#39;:\r\n                node_id = json_obj[&#39;id&#39;]\r\n                json_obj.pop(&#39;id&#39;)\r\n                label_clause = &#39;&#39;\r\n                if &#39;labels&#39; in json_obj:\r\n                    for label in json_obj[&#39;labels&#39;]:\r\n                        label_clause = label_clause + &#39;:&#39; + label\r\n                    json_obj.pop(&#39;labels&#39;)\r\n                property_clause = &#39;&#39;\r\n                if &#39;properties&#39; in json_obj:\r\n                    property_clause += &#39;{  &#39;\r\n                    for key in json_obj[&#39;properties&#39;]:\r\n                        property_clause += key\r\n                        if isinstance(json_obj[&#39;properties&#39;][key], str):\r\n                            property_clause += &quot; : \\&quot;&quot;\r\n                            property_clause += json_obj[&#39;properties&#39;][key]\r\n                            property_clause += &quot;\\&quot;, &quot;\r\n                        else:\r\n                            property_clause += &quot; : &quot;\r\n                            property_clause += str(json_obj[&#39;properties&#39;][key])\r\n                            property_clause += &quot;, &quot;\r\n                        \r\n                    property_clause = property_clause[:-2]\r\n                    property_clause += &#39;}&#39;\r\n                    json_obj.pop(&#39;properties&#39;)\r\n                instruction += &#39; (node_{}{}{}),\\n&#39;.format(node_id, label_clause, property_clause)\r\n        for json_obj in data:\r\n            if json_obj[&#39;type&#39;] == &#39;relationship&#39;:\r\n                relationship_id = json_obj[&#39;id&#39;]\r\n                json_obj.pop(&#39;id&#39;)\r\n                from_id = json_obj[&#39;start&#39;][&#39;id&#39;]\r\n                json_obj.pop(&#39;start&#39;)\r\n                to_id = json_obj[&#39;end&#39;][&#39;id&#39;]\r\n                json_obj.pop(&#39;end&#39;)\r\n                \r\n                label_clause = &#39;&#39;\r\n                if &#39;label&#39; in json_obj:\r\n                    label_clause = &#39;:{}&#39;.format(json_obj[&#39;label&#39;])\r\n                    json_obj.pop(&#39;label&#39;)\r\n                \r\n                relation_clause = &#39;relationship_{}{}&#39;.format(relationship_id, label_clause)\r\n                \r\n                instruction += &#39; (node_{})-[{}]-&gt;(node_{}),\\n&#39;.format(from_id, relation_clause, to_id)\r\n        print(&#39;ERRORS:\\n&#39;) # should print anything from the original json which has been ignored by the code above\r\n        for json_obj in data:\r\n            json_obj.pop(&#39;type&#39;)\r\n            if bool(json_obj):\r\n                print(json_obj)\r\n                print()\r\n        \r\n        print()\r\n        print()\r\n        print()\r\n        print()\r\n        \r\n        \r\n        instruction = instruction[:-2] + &#39;;\\n&#39;\r\n        \r\n        with open(&quot;instruction.txt&quot;, &#39;w&#39;) as out_file:\r\n            out_file.write(instruction)\r\n        print(data)\r\n    \r\n\r\n    \r\nif __name__ == &#39;__main__&#39;:\r\n    parser = argparse.ArgumentParser(description=&#39;input parser&#39;)\r\n    parser.add_argument(&#39;--file&#39;, metavar=&#39;path&#39;, required=True,\r\n                        help=&#39;the path to the exported json file&#39;)\r\n    args = parser.parse_args()\r\n    print(args.file)\r\n    main(file_path=args.file)\r\n```",
          "link": "https://stackoverflow.com/questions/77715125/migrating-neo4j-database-content-apoc-import-json-not-working/77731803#77731803",
          "title": "Migrating neo4j database content / apoc.import.json not working"
        }
      ],
      "owner": {
        "reputation": 361,
        "user_id": 6346852,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/ad29693718e93b1d3c0c0f12d3e5adfe?s=256&d=identicon&r=PG",
        "display_name": "Necktschnagge",
        "link": "https://stackoverflow.com/users/6346852/necktschnagge"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703850433,
      "creation_date": 1703544108,
      "question_id": 77715125,
      "share_link": "https://stackoverflow.com/q/77715125",
      "body_markdown": "I used to call\r\n```\r\ncall apoc.export.json.all(&quot;backup.json&quot;,{useTypes:true})\r\n```\r\nto backup my database content on the one hand and now I&#39;m trying to migrate data to another machine on the other hand by exporting to json first and importing it afterwards.\r\n```\r\ncall apoc.import.json(&quot;backup.json&quot;)\r\n```\r\nwhich should be a valid option according to [some neo4j developer](https://community.neo4j.com/t/unable-to-import-json-file-with-apoc-import-json/53199/2). However I run into an exception:\r\n```\r\nFailed to invoke procedure `apoc.import.json`: Caused by: java.lang.RuntimeException: Missing constraint required for import. Execute this query:\r\nCREATE CONSTRAINT FOR (n:MyLabel01) REQUIRE n.neo4jImportId IS UNIQUE;\r\n```\r\nEven creating this requirement results in more and more errors of that type.\r\n\r\nThese error occur when I try to migrate my data from an older neo4j version / apoc version to a newer one, but also when I export from *neo4j kernel 5.12.0 enterprise* with apoc version 5.12.0 according to `return apoc.version()` and try to import in a fresh database of the same version where I exported the json.\r\n\r\nSo I tried to find some workaround and found \r\n```\r\nCALL apoc.load.json(&quot;backup.json&quot;) yield value\r\nWHERE value.type = &quot;node&quot;\r\nCALL apoc.create.node(value.labels,value.properties)\r\nyield node return node\r\n```\r\n\r\nbut I could not figure out how to import the relashionships too.\r\n\r\n* Is there (a different) standard way of porting database content to another machine?\r\n* Or is there some option to utilize apoc.load.json(&quot;backup.json&quot;) and to create nodes and relationships?\r\n",
      "link": "https://stackoverflow.com/questions/77715125/migrating-neo4j-database-content-apoc-import-json-not-working",
      "title": "Migrating neo4j database content / apoc.import.json not working"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1703237948,
          "creation_date": 1703237948,
          "answer_id": 77702826,
          "question_id": 77701440,
          "share_link": "https://stackoverflow.com/a/77702826",
          "body_markdown": "To begin with, when you do two MATCH statements in a row like that you will create a cartesian product, which is always a danger in Cypher. The result will be one row for every combination of two :ENCODING relationships in the database. If you have 1000 :ENCODING relationships you will get 1000000 rows. You limit this with WHERE elementId(bgc1) &lt; elementId(bgc2) but you will already have created the cartesian product.\r\n\r\nSo we need to rewrite it to remove the need for that.\r\n\r\nSecondly I get a feeling that the calculation of notCommon is incorrect. You base it on the number of paths, not the number of nodes. So it will be correct in the image you show, but not in your example data (at least if I understand you formula correctly).\r\n\r\nFinally, you match two paths, the direct paths and the indirect paths. But in the formula you only use the sum of the two, i.e. all paths. So you don&#39;t really care what is direct and indirect. Due to this we only need one path match that covers both direct and indirect by changing 1..5 to 0..5. This also means that we can use this as the base MATCH instead of the cartesian product.\r\n\r\nI have made a version that looks like this. Here I start first by just counting the number of proteins in the graph, to later use it to calculate notCommon:\r\n\r\n    MATCH (p:protein)\r\n    WITH COUNT(p) AS proteinCount\r\n    \r\n    MATCH pathAll = (bgc1:bgc)-[:ENCODING]-&gt;(:protein)-[:MMSEQS_90*0..5]-(:protein)&lt;-[:ENCODING]-(bgc2:bgc)\r\n    WHERE elementId(bgc1) &lt; elementId(bgc2)\r\n    \r\n    WITH bgc1, bgc2, SUM(SIZE([n IN nodes(pathAll) WHERE &quot;protein&quot; IN labels(n)])) AS commonProteins, COUNT(DISTINCT pathAll) AS pathsAll, proteinCount\r\n    WITH bgc1, bgc2, pathsAll, proteinCount-commonProteins AS notCommon\r\n    \r\n    WITH bgc1, bgc2, 100 * pathsAll / (pathsAll + notCommon) AS similarity_score\r\n    WHERE similarity_score &gt; 0.0  \r\n    \r\n    MERGE (bgc1)-[:IS_SIMILAR {score: similarity_score}]-&gt;(bgc2)\r\n    \r\n    RETURN bgc1.id AS BGC1, bgc2.id AS BGC2, similarity_score\r\n    ORDER BY similarity_score DESC, BGC1, BGC2\r\n\r\nI don&#39;t get the same results as you get, but when I try to apply the formula manually I get the same results as my version. It might be that I have misunderstood your formula, but hopefully you can use something from my version anyway.\r\n\r\nBy the way, really nice that you provided all the MERGE statements to create your example graph. It made it a lot easier to help you :)",
          "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths/77702826#77702826",
          "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1703280841,
          "last_edit_date": 1703280841,
          "creation_date": 1703277830,
          "answer_id": 77705741,
          "question_id": 77701440,
          "share_link": "https://stackoverflow.com/a/77705741",
          "body_markdown": "Your first 2 clauses create a [cartesian product](https://stackoverflow.com/questions/33352673/why-does-neo4j-warn-this-query-builds-a-cartesian-product-between-disconnected), which one should try to avoid:\r\n\r\n    MATCH (bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    MATCH (bgc2:bgc)-[:ENCODING]-&gt;(p2:protein)\r\n\r\nThis especially applies when the cartesian product produces mostly unwanted results. In your use case, I suspect that the vast majority of `bcg` pairs (which could be in the millions if you have thousands of encodings) would end up being dropped by your query anyway (if it ever completed).\r\n\r\nA better approach would be to use a single `MATCH` that finds wanted paths (both direct and indirect) between `bcg` nodes. That way, you not only simplify the query but you also naturally only get wanted `bcg` pairs:\r\n\r\n    MATCH (bgc1:bgc)-[:ENCODING]-&gt;()-[:MMSEQS_90*0..5]-()&lt;-[:ENCODING]-(bgc2:bgc)\r\n    WHERE elementId(bgc1) &lt; elementId(bgc2)\r\n    \r\n    WITH bgc1, bgc2,\r\n      100 * COUNT(*) / (COUNT {(b)-[:ENCODING]-&gt;() WHERE b IN [bgc1, bgc2]} - COUNT(*)) AS similarity_score\r\n\r\n    MERGE (bgc1)-[:IS_SIMILAR {score: similarity_score}]-&gt;(bgc2)\r\n    RETURN bgc1.id AS BGC1, bgc2.id AS BGC2, similarity_score\r\n    ORDER BY similarity_score DESC, BGC1, BGC2;\r\n\r\nNotes:\r\n 1. I fixed what seems like a bug in your query. In the `notCommon` calculation, I used a [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/count/) (introduced in neo4j 5.0) to count the number of `ENCODING` relationships for `bgc1` and `bgc2`. This produces your expected results.\r\n\r\n 2. The `0` lower bound in the variable length path pattern `0..5` allows &quot;direct&quot; paths to be matched.\r\n\r\n 3. If the `score` ever changed between a pair of nodes, then the `MERGE` clause above would create an additional `IS_SIMILAR` relationship. If this is a concern, you can avoid that by replacing that `MERGE` clause with:\r\n\r\n        MERGE (bgc1)-[s:IS_SIMILAR]-&gt;(bgc2)\r\n        SET s.score = similarity_score",
          "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths/77705741#77705741",
          "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703441457,
          "creation_date": 1703441457,
          "answer_id": 77711481,
          "question_id": 77701440,
          "share_link": "https://stackoverflow.com/a/77711481",
          "body_markdown": "Well formulated question!! Kudos\r\n\r\nIn addition to the other suggestions, two other thoughts ...\r\n\r\n1) the neo4j.conf file memory setting might be increased to avoid any RAM issues.\r\n\r\n2) I often collect the item to be iterated and then unwind if with a call statement. This is generally more efficient in therms of code and CPUs used. In you case you may need nested calls.\r\n\r\n    with w, collect (x) as y\r\n    unwind y as z\r\n    call\r\n    {\r\n    with z\r\n    ... do something ...\r\n    return answers \r\n    }\r\n    ... more code with w and answer..\r\n\r\n\r\n \r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths/77711481#77711481",
          "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
        }
      ],
      "owner": {
        "reputation": 1283,
        "user_id": 1061924,
        "user_type": "registered",
        "accept_rate": 90,
        "profile_image": "https://www.gravatar.com/avatar/a5e31687aa801ca4ac341ebb8490f9eb?s=256&d=identicon&r=PG",
        "display_name": "Art",
        "link": "https://stackoverflow.com/users/1061924/art"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 74,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 3,
      "accepted_answer_id": 77705741,
      "answer_count": 3,
      "score": 3,
      "last_activity_date": 1703441457,
      "creation_date": 1703212269,
      "question_id": 77701440,
      "share_link": "https://stackoverflow.com/q/77701440",
      "body_markdown": "I have a simple graph with nodes `bgc` and `protein`, where `(:bgc)-[:ENCODES]-&gt;(:protein)`. Proteins can be similar to each other, and that is represented with separate relationship, e.g. `(:protein)-[:MMSEQS_90]-&gt;(:protein)` (for 90% similarity, but can be also `MMSEQS_80`, `MMSEQS_70`, `MMSEQS_50`, etc.\r\n\r\nFor two `bgc` nodes graph can look like this: \r\n\r\n[![graph schema][1]][1]\r\n\r\nPaths between `bgc` nodes can be direct (sharing the exact same `protein`) or indirect (through proteins that are similar).  \r\n\r\nNow, I want to calculate similarity score between `bgc` nodes, which is defined as:\r\n\r\n`score` = `100%  * pathsAll` / (`pathsAll + notCommon`) \r\nWhere\r\n- `pathsAll` is total number of paths, direct and indirect (1 + 2 = 3 in the example above)\r\n- `notCommon` are nodes not shared by any paths (3 + 2 = 5) \r\n- `score` is similarity score: 100% * 3 / (3 + 5) = 37.5%\r\n\r\nScore is calculated pair-wise for all `bgc` pairs, and saved as relation `(:bgc)-[:SIMILAR_TO {score: &lt;int&gt;})-(:bgc)`. \r\n\r\nI have managed to solve this exact problem with query as below: \r\n\r\n    MATCH (bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    MATCH (bgc2:bgc)-[:ENCODING]-&gt;(p2:protein)\r\n    WHERE elementId(bgc1) &lt; elementId(bgc2)\r\n    \r\n    OPTIONAL MATCH pathIndirect = (bgc1)-[:ENCODING]-&gt;(:protein)-[:MMSEQS_90*1..5]-(:protein)&lt;-[:ENCODING]-(bgc2)\r\n    OPTIONAL MATCH pathDirect = (bgc1)-[:ENCODING]-&gt;(:protein)&lt;-[:ENCODING]-(bgc2)\r\n    \r\n    WITH bgc1, bgc2, COUNT(DISTINCT pathIndirect) + COUNT(DISTINCT pathDirect) AS pathsAll,\r\n                  COUNT(DISTINCT p1) + COUNT(DISTINCT p2) - 2 * (COUNT(DISTINCT pathIndirect) + COUNT(DISTINCT pathDirect)) AS notCommon\r\n    \r\n    WITH bgc1, bgc2, 100 * pathsAll / (pathsAll + notCommon) AS similarity_score\r\n    \r\n    WITH bgc1, bgc2, similarity_score\r\n    WHERE similarity_score &gt; 0.0  \r\n    \r\n    MERGE (bgc1)-[:IS_SIMILAR {score: similarity_score}]-&gt;(bgc2)\r\n    RETURN bgc1.id AS BGC1, bgc2.id AS BGC2, similarity_score\r\n    ORDER BY similarity_score DESC, BGC1, BGC2;\r\n\r\nResulting in: \r\n\r\n    ╒═══════╤═══════╤════════════════╕\r\n    │BGC1   │BGC2   │similarity_score│\r\n    ╞═══════╪═══════╪════════════════╡\r\n    │&quot;BGC03&quot;│&quot;BGC01&quot;│83              │\r\n    ├───────┼───────┼────────────────┤\r\n    │&quot;BGC01&quot;│&quot;BGC02&quot;│37              │\r\n    ├───────┼───────┼────────────────┤\r\n    │&quot;BGC03&quot;│&quot;BGC02&quot;│25              │\r\n    └───────┴───────┴────────────────┘\r\n\r\n   \r\nThis however, is immediately crashing database (out of memory) for larger number of nodes (few 1000`s), making it impossible to execute (despite reasonable memory provisioning). \r\n\r\nI have noticed that first line can be executed instantly, but adding the second is already sufficient to cause crash (so maybe here is a first problem?): \r\n\r\n    // this executes instantly\r\n    MATCH rs1=(bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    RETURN rs1;\r\n    // this goes forever and crashes\r\n    MATCH rs1=(bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    MATCH rs2=(bgc2:bgc)-[:ENCODING]-&gt;(p2:protein)\r\n    RETURN rs1, rs2 \r\n\r\nThanks a lot for any suggestions on why is that crashing and how to construct better query doing the same thing. Maybe I&#39;m doing something totally wrong here - I am very new to Neo4j. \r\n\r\nExample data: \r\n\r\n    MERGE (b1:bgc {id: &#39;BGC01&#39;})\r\n    MERGE (b2:bgc {id: &#39;BGC02&#39;})\r\n    MERGE (b3:bgc {id: &#39;BGC03&#39;})\r\n    MERGE (p1:protein {id: &#39;PROT01&#39;})\r\n    MERGE (p2:protein {id: &#39;PROT02&#39;})\r\n    MERGE (p3a:protein {id: &#39;PROT03a&#39;})\r\n    MERGE (p3b:protein {id: &#39;PROT03b&#39;})\r\n    MERGE (p4a:protein {id: &#39;PROT04a&#39;})\r\n    MERGE (p4b:protein {id: &#39;PROT04b&#39;})\r\n    MERGE (p5:protein {id: &#39;PROT05&#39;})\r\n    MERGE (p6:protein {id: &#39;PROT06&#39;})\r\n    MERGE (p7:protein {id: &#39;PROT07&#39;})\r\n    MERGE (p8:protein {id: &#39;PROT08&#39;})\r\n    MERGE (b1)-[:ENCODING]-&gt;(p1)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p2)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p3a)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p4a)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p5)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p6)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p2)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p3b)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p4b)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p7)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p8)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p1)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p2)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p5)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p6)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p4b)\r\n    MERGE (p3a)-[:MMSEQS_90]-&gt;(p3b)\r\n    MERGE (p4a)&lt;-[:MMSEQS_90]-(p4b)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zwfTP.png\r\n",
      "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths",
      "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
    },
    {
      "tags": ["java", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 49723,
            "user_id": 1553851,
            "user_type": "registered",
            "accept_rate": 73,
            "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=256&d=identicon&r=PG",
            "display_name": "shmosel",
            "link": "https://stackoverflow.com/users/1553851/shmosel"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703111760,
          "post_id": 77694771,
          "comment_id": 136973508,
          "link": "https://stackoverflow.com/questions/77694771/why-cant-i-stream-transaction-results-from-neo4j-bolt-driver#comment136973508_77694771"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 35211,
            "user_id": 261159,
            "user_type": "registered",
            "accept_rate": 73,
            "profile_image": "https://www.gravatar.com/avatar/97431997642d0daa45fc607d50e17d99?s=256&d=identicon&r=PG",
            "display_name": "Gregg",
            "link": "https://stackoverflow.com/users/261159/gregg"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703112151,
          "creation_date": 1703112151,
          "answer_id": 77694845,
          "question_id": 77694771,
          "share_link": "https://stackoverflow.com/a/77694845",
          "body_markdown": "Sooo, parenthesis are my enemy.\r\n\r\n```\r\nvar maybeRecord = session.executeRead(tx -&gt; tx.run(&quot;MATCH (c:Category { id:$id }) RETURN c&quot;, parameters(&quot;bggId&quot;, id)))\r\n                    .stream()\r\n                    .findFirst();\r\n```\r\n\r\nShould be:\r\n```\r\nvar maybeRecord = session.executeRead(tx -&gt; tx.run(&quot;MATCH (c:Category { id:$id }) RETURN c&quot;, parameters(&quot;bggId&quot;, id))\r\n                    .stream()\r\n                    .findFirst());\r\n```\r\n\r\nThanks @shmosel for the comment that answered this question.",
          "link": "https://stackoverflow.com/questions/77694771/why-cant-i-stream-transaction-results-from-neo4j-bolt-driver/77694845#77694845",
          "title": "Why can&#39;t I stream transaction results from Neo4J Bolt Driver"
        }
      ],
      "owner": {
        "reputation": 35211,
        "user_id": 261159,
        "user_type": "registered",
        "accept_rate": 73,
        "profile_image": "https://www.gravatar.com/avatar/97431997642d0daa45fc607d50e17d99?s=256&d=identicon&r=PG",
        "display_name": "Gregg",
        "link": "https://stackoverflow.com/users/261159/gregg"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703112151,
      "creation_date": 1703110694,
      "question_id": 77694771,
      "share_link": "https://stackoverflow.com/q/77694771",
      "body_markdown": "I&#39;m not able to figure out why I can&#39;t stream the results like this:\r\n\r\n```\r\ntry (var session = driver.session()) {\r\n  var maybeRecord = session.executeRead(tx -&gt; tx.run(&quot;MATCH (c:Category { id:$id }) RETURN c&quot;, parameters(&quot;bggId&quot;, id))) //\r\n\t\t\t\t\t.stream() //\r\n\t\t\t\t\t.findFirst();\r\n}\r\n```\r\n\r\nWhen I do this, I get an error:\r\n\r\n```\r\norg.neo4j.driver.exceptions.ClientException: org.neo4j.driver.Result is not a valid return value, it should be consumed before producing a return value\r\n```\r\n\r\nI understand what that error means, and I can change my code to do the whole  `while (results.hasNext()) { }` business, but it&#39;s very verbose. Is there a way I can do it similar to streaming while keeping within the bounds of consuming the Result?",
      "link": "https://stackoverflow.com/questions/77694771/why-cant-i-stream-transaction-results-from-neo4j-bolt-driver",
      "title": "Why can&#39;t I stream transaction results from Neo4J Bolt Driver"
    },
    {
      "tags": [
        "kubernetes",
        "nginx",
        "neo4j",
        "kubernetes-ingress",
        "azure-aks"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 904,
            "user_id": 22600697,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/fspn6.jpg?s=256&g=1",
            "display_name": "Arko",
            "link": "https://stackoverflow.com/users/22600697/arko"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703055845,
          "post_id": 77689238,
          "comment_id": 136964720,
          "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks#comment136964720_77689238"
        },
        {
          "owner": {
            "reputation": 334,
            "user_id": 17778275,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "spd",
            "link": "https://stackoverflow.com/users/17778275/spd"
          },
          "reply_to_user": {
            "reputation": 904,
            "user_id": 22600697,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/fspn6.jpg?s=256&g=1",
            "display_name": "Arko",
            "link": "https://stackoverflow.com/users/22600697/arko"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703066619,
          "post_id": 77689238,
          "comment_id": 136966292,
          "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks#comment136966292_77689238"
        },
        {
          "owner": {
            "reputation": 904,
            "user_id": 22600697,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/fspn6.jpg?s=256&g=1",
            "display_name": "Arko",
            "link": "https://stackoverflow.com/users/22600697/arko"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703068436,
          "post_id": 77689238,
          "comment_id": 136966616,
          "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks#comment136966616_77689238"
        },
        {
          "owner": {
            "reputation": 334,
            "user_id": 17778275,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "spd",
            "link": "https://stackoverflow.com/users/17778275/spd"
          },
          "reply_to_user": {
            "reputation": 904,
            "user_id": 22600697,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/fspn6.jpg?s=256&g=1",
            "display_name": "Arko",
            "link": "https://stackoverflow.com/users/22600697/arko"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703071097,
          "post_id": 77689238,
          "comment_id": 136967058,
          "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks#comment136967058_77689238"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 334,
                "user_id": 17778275,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "spd",
                "link": "https://stackoverflow.com/users/17778275/spd"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703339280,
              "post_id": 77702006,
              "comment_id": 136996565,
              "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks/77702006#comment136996565_77702006"
            },
            {
              "owner": {
                "reputation": 904,
                "user_id": 22600697,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/fspn6.jpg?s=256&g=1",
                "display_name": "Arko",
                "link": "https://stackoverflow.com/users/22600697/arko"
              },
              "reply_to_user": {
                "reputation": 334,
                "user_id": 17778275,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "spd",
                "link": "https://stackoverflow.com/users/17778275/spd"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703519270,
              "post_id": 77702006,
              "comment_id": 137007972,
              "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks/77702006#comment137007972_77702006"
            },
            {
              "owner": {
                "reputation": 334,
                "user_id": 17778275,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "spd",
                "link": "https://stackoverflow.com/users/17778275/spd"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703996467,
              "post_id": 77702006,
              "comment_id": 137048968,
              "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks/77702006#comment137048968_77702006"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 904,
            "user_id": 22600697,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/fspn6.jpg?s=256&g=1",
            "display_name": "Arko",
            "link": "https://stackoverflow.com/users/22600697/arko"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703226507,
          "creation_date": 1703226507,
          "answer_id": 77702006,
          "question_id": 77689238,
          "share_link": "https://stackoverflow.com/a/77702006",
          "body_markdown": "To configure two separate Neo4j instances in an AKS cluster and direct traffic to them using Nginx Ingress based on URL paths, follow these instructions:\r\n\r\n#### **Step 1: Install Nginx Ingress Controller**\r\n\r\nFirstly, add the Helm repository for Nginx Ingress and install it:\r\n\r\n    helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx\r\n    helm repo update\r\n    helm install ingress-nginx ingress-nginx/ingress-nginx --create-namespace --namespace ingress-nginx\r\n\r\n![enter image description here](https://i.imgur.com/JtRZL04.png)\r\n\r\n#### **Step 2: Deploy Neo4j Instances**\r\n\r\nCreate Kubernetes deployment files for each Neo4j instance.  For the first database (`db-1`):\r\n```yaml\r\n#File: db1-deployment.yaml\r\n\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: neo4j-db1\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: neo4j-db1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: neo4j-db1\r\n    spec:\r\n      containers:\r\n        - name: neo4j\r\n          image: neo4j:latest\r\n          env:\r\n            - name: NEO4J_AUTH\r\n              value: &quot;neo4j/your_password_here&quot;\r\n          ports:\r\n            - containerPort: 7474\r\n              name: http\r\n            - containerPort: 7687\r\n              name: bolt\r\n```\r\n\r\nFor the second database (`db-2`):\r\n\r\n```yaml\r\n#File: db2-deployment.yaml\r\n\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: neo4j-db2\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: neo4j-db2\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: neo4j-db2\r\n    spec:\r\n      containers:\r\n        - name: neo4j\r\n          image: neo4j:latest\r\n          env:\r\n            - name: NEO4J_AUTH\r\n              value: &quot;neo4j/your_password_here&quot;\r\n          ports:\r\n            - containerPort: 7474\r\n              name: http\r\n            - containerPort: 7687\r\n              name: bolt\r\n```\r\nDeploy these configurations using:\r\n\r\n```bash\r\nkubectl apply -f db1-deployment.yaml \r\nkubectl apply -f db2-deployment.yaml\r\n```\r\n![enter image description here](https://i.imgur.com/jWGK0Ec.png)\r\n\r\n#### **Step 3: Expose Neo4j Services**\r\n\r\nNow, define services for each Neo4j deployment. \r\nFor `db-1`:\r\n\r\n```yaml\r\n# db1-service.yaml\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: neo4j-db1-service\r\nspec:\r\n  type: ClusterIP\r\n  ports:\r\n    - name: http\r\n      protocol: TCP\r\n      port: 7474\r\n      targetPort: 7474\r\n    - name: bolt\r\n      protocol: TCP\r\n      port: 7687\r\n      targetPort: 7687\r\n  selector:\r\n    app: neo4j-db1\r\n```\r\nFor `db-2`:\r\n\r\n```yaml\r\n# db2-service.yaml\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: neo4j-db2-service\r\nspec:\r\n  type: ClusterIP\r\n  ports:\r\n    - name: http\r\n      protocol: TCP\r\n      port: 7474\r\n      targetPort: 7474\r\n    - name: bolt\r\n      protocol: TCP\r\n      port: 7687\r\n      targetPort: 7687\r\n  selector:\r\n    app: neo4j-db1\r\n```\r\n\r\napply them:\r\n```bash\r\nkubectl apply -f db1-service.yaml\r\nkubectl apply -f db2-service.yaml\r\n```\r\n![enter image description here](https://i.imgur.com/hXo33vE.png)\r\n\r\n#### **Step 4: Configure Ingress for Routing**\r\n\r\nSet up an Ingress resource to route the external requests:\r\n\r\n```yaml\r\n# File: neo4j-ingress.yaml\r\n\r\napiVersion: networking.k8s.io/v1\r\nkind: Ingress\r\nmetadata:\r\n  name: neo4j-ingress\r\nspec:\r\n  ingressClassName: nginx\r\n  rules:\r\n    - http:\r\n        paths:\r\n          - path: /db1\r\n            pathType: Prefix\r\n            backend:\r\n              service:\r\n                name: neo4j-db1-service\r\n                port:\r\n                  number: 7474\r\n          - path: /db2\r\n            pathType: Prefix\r\n            backend:\r\n              service:\r\n                name: neo4j-db2-service\r\n                port:\r\n                  number: 7474\r\n```\r\n\r\napply it using `kubectl apply -f neo4j-ingress.yaml`\r\n\r\n![enter image description here](https://i.imgur.com/dAbQtcH.png)\r\n\r\nOnce you&#39;ve applied the above configurations, create a ConfigMap for TCP routing:\r\n```yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: nginx-ingress-tcp\r\n  namespace: ingress-nginx\r\ndata:\r\n  &quot;7687&quot;: &quot;default/neo4j-db1-service:7687&quot;\r\n```\r\nApply the ConfigMap: \r\n`kubectl apply -f tcp-routing-configmap.yaml`\r\n![enter image description here](https://i.imgur.com/anqXD8P.png)\r\n\r\nThen, update the Nginx Ingress Controller deployment to use this ConfigMap for TCP services:\r\n`kubectl edit deployment ingress-nginx-controller -n ingress-nginx`\r\n\r\nAdd the `--tcp-services-configmap=default/nginx-ingress-tcp` argument under `spec.template.spec.containers[0].args`.\r\n\r\n![enter image description here](https://i.imgur.com/CYbplyw.png)\r\n\r\nAfter applying the above configurations, you should be able to access your Neo4j instances at `http://&lt;external-ip&gt;/db1` for HTTP and `&lt;external-ip&gt;:7687` for Bolt. Find the external IP of your Nginx ingress controller with:\r\n\r\n    kubectl get svc -n ingress-nginx\r\n![enter image description here](https://i.imgur.com/DuWSHNP.png)",
          "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks/77702006#77702006",
          "title": "Unable to access specific neo4j database exposed using AKS"
        }
      ],
      "owner": {
        "reputation": 334,
        "user_id": 17778275,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "spd",
        "link": "https://stackoverflow.com/users/17778275/spd"
      },
      "last_editor": {
        "reputation": 334,
        "user_id": 17778275,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fef1d4be92dfab21383426c9325a2929?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "spd",
        "link": "https://stackoverflow.com/users/17778275/spd"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 94,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703226507,
      "creation_date": 1703046851,
      "last_edit_date": 1703066757,
      "question_id": 77689238,
      "share_link": "https://stackoverflow.com/q/77689238",
      "body_markdown": "I have an aks cluster with two neo4j database images (db-1 and db-2) in it, services for those. Using nginx ingress controller, I want to route the user to a particular database based on the url he requests for example if user wants to go to db-1, my neo4j url will be ```http://&lt;external-ip&gt;/db1```\r\n\r\nI want to use an internal IP, and have my aks cluster linked to it.\r\n\r\nI have used the following steps to create the databases, and nginx controller. Yet my databases are not being connected. Neo4j says ```Service Unavailable```\r\n\r\n```helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx```\r\n\r\n```helm repo update```\r\n\r\n```helm install ingress-nginx ingress-nginx/ingress-nginx --create-namespace  --namespace ingress-test  --set controller.service.annotations.&quot;service\\.beta\\.kubernetes\\.io/azure-load-balancer-health-probe-request-path&quot;=/healthz  --set-string controller.service.annotations.&quot;service\\.beta\\.kubernetes\\.io/azure-load-balancer-internal&quot;=&quot;true&quot; --tcp-services-configmap=ingress-test/tcp-services```\r\n\r\nApplying the below yaml ```kubectl apply -f ingress.yaml ```\r\n\r\n```apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: aks-neo4j-one  \r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: aks-neo4j-one\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: aks-neo4j-one\r\n    spec:\r\n      containers:  \r\n      - name: neo4j  \r\n        image: neo4j:latest \r\n        env:      \r\n           - name: NEO4J_AUTH       \r\n             value: neo4j/&lt;mypassword&gt;      \r\n        ports:  \r\n        - containerPort: 7474  \r\n          name: http\r\n        - containerPort: 7687  \r\n          name: tcp\r\n        \r\n---\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: aks-neo4j-one  \r\nspec:\r\n  type: ClusterIP\r\n  ports:  \r\n    - protocol: TCP  \r\n      port: 80  \r\n      targetPort: 7687 \r\n  selector:\r\n    app: aks-neo4j-one\r\n---\r\napiVersion: networking.k8s.io/v1\r\nkind: Ingress\r\nmetadata:\r\n  name: neo4j-ingress  \r\nspec:\r\n  ingressClassName: nginx\r\n  rules:\r\n  - http:\r\n      paths:\r\n      - path: /neo4jone\r\n        pathType: Prefix\r\n        backend:\r\n          service:\r\n            name: aks-neo4j-one\r\n            port:\r\n              number: 80\r\n---\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: tcp-services\r\n  namespace: ingress-test\r\ndata:\r\n  7687: &quot;ingress-test/aks-neo4j-one:80&quot;\r\n---\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: ingress-nginx-controller\r\n  namespace: ingress-test\r\nspec:\r\n  template:\r\n    spec:\r\n      containers:\r\n      - name: controller\r\n        args:\r\n          - /nginx-ingress-controller\r\n          - --tcp-services-configmap=ingress-test/tcp-services\r\n```\r\nDid try it with and without config map as well as neo4j requires 7687 bolt port\r\n\r\nChanging the services port to 7474, and browsing the External IP leads to a popup of username and password, and doesn&#39;t proceed for any inputs.\r\n",
      "link": "https://stackoverflow.com/questions/77689238/unable-to-access-specific-neo4j-database-exposed-using-aks",
      "title": "Unable to access specific neo4j database exposed using AKS"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 2,
          "creation_date": 1703010473,
          "post_id": 77684255,
          "comment_id": 136960274,
          "link": "https://stackoverflow.com/questions/77684255/about-crashing-during-a-2hop-query-operation-in-neo4j#comment136960274_77684255"
        },
        {
          "owner": {
            "reputation": 19,
            "user_id": 21351077,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG",
            "display_name": "newbie",
            "link": "https://stackoverflow.com/users/21351077/newbie"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703097468,
          "post_id": 77684255,
          "comment_id": 136971629,
          "link": "https://stackoverflow.com/questions/77684255/about-crashing-during-a-2hop-query-operation-in-neo4j#comment136971629_77684255"
        }
      ],
      "owner": {
        "reputation": 19,
        "user_id": 21351077,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG",
        "display_name": "newbie",
        "link": "https://stackoverflow.com/users/21351077/newbie"
      },
      "last_editor": {
        "reputation": 6230,
        "user_id": 2266,
        "user_type": "registered",
        "accept_rate": 90,
        "profile_image": "https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=256&d=identicon&r=PG",
        "display_name": "Charlotte Skardon",
        "link": "https://stackoverflow.com/users/2266/charlotte-skardon"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703063548,
      "creation_date": 1702979468,
      "last_edit_date": 1703063548,
      "question_id": 77684255,
      "share_link": "https://stackoverflow.com/q/77684255",
      "body_markdown": "I have a question about how to deal with Neo4j queries that are slow and then crash.\r\n\r\nFirst of all, let me explain the graphs.\r\nThere are 20million nodes called &quot;Party&quot;. Each Party node has properties &quot;id&quot; and &quot;type&quot;. Each Party is connected to one or more &quot;Account&quot; nodes by a relationship called &quot;HAS&quot;, with a total number of Accounts of 70million.\r\nThe relationships between Accounts are connected by a relationship called &quot;TRANSACTION&quot;, with a total number of 350million.\r\nTRANSACTION has the properties &quot;timestamp&quot;, &quot;price&quot;.\r\n\r\nNow, to calculate the impact of a Party whose type property is on (say P1) on a Party 2hop away (a Party whose type property is off, say P3), the following two-stage query is performed.\r\n\r\n```\r\nCALL apoc.periodic.iterate(&quot;\r\n\r\n// P1-A1-A2\r\nMATCH (P1:Party{type:&#39;on&#39;})-[:HAS]-(A1:Account)-[t1:TRANSACTION]-(A2:Account)&lt;-[:HAS]-(P2:Party{type:&#39;off&#39;})\r\n     CASE\r\n         WHEN datetime(t1.timestamp) &gt;= datetime(reference_date) THEN 4\r\n\r\n...（Sorry, it&#39;s too long to write, but there is a complex case split that depends on values of t1.timestamp and t1.price.）\r\n\r\n// A2-A3-P3\r\nMATCH (A2)-[t2:TRANSACTION]-(A3:Account)&lt;-[:HAS]-(P3:Party{type:&#39;off&#39;})\r\n     CASE\r\n         WHEN datetime(t2.timestamp) &gt;= datetime(reference_date) THEN 4\r\n\r\n...（This one also has a complex case split depending on the values of t2.timestamp and t2.price. Finally, the value of score is calculated.）\r\n\r\nRETURN\r\n     P3.id, score\r\n  &quot;CREATE (temp:TempResult {id: id, score: score})&quot;,\r\n  {batchSize:100, parallel:true}\r\n)\r\n```\r\n\r\nThe CPU usage is running at around 30% at the beginning of the calculation, but finally the CPU usage reaches 100% and the operation becomes very slow. Eventually, the connection to the Neo4j Browser database is broken down.\r\n\r\nWhat do you think is the reason for the disconnection from the database?\r\n1. Is it because the 2hop algorithm is inefficient? (Does it use a lot of memory? Or do you get a lot of disk accesses?)\r\n2. It is said that indexes make queries work more efficiently, but it is not well understood how they should be created.\r\n3. Is the size of the batch process processed at one time not appropriate? (batchSize:100)\r\n4. Are there not enough machine specs? Also, I am not sure that the appropriate values for heap and cache settings.\r\n\r\nThe server and Neo4j specifications are as follows.\r\n\r\nServer  \r\n\r\n - OS: Windows Server 2019  \r\n - CPU: Intel Xeon Platinum 2.90GHz 4core\r\n - Memory: 512GB \r\n - HDD: 1TB\r\n\r\nNeo4j\r\n - Version: Enterprise v5.12.0\r\n - server.memory.heap.initial_size=240g\r\n - server.memory.heap.max_size=240g\r\n - server.memory.pagecache.size=240g\r\n - dbms.memory.transaction.total.max=400G\r\n - db.transaction.timeout=1440m\r\n\r\nI would be very grateful for any advice from any knowledgeable person. Any information would be much appreciated. \r\nThank you in advance for your kind attention.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/muzbl.png",
      "link": "https://stackoverflow.com/questions/77684255/about-crashing-during-a-2hop-query-operation-in-neo4j",
      "title": "About crashing during a 2hop query operation in Neo4j"
    },
    {
      "tags": ["graph", "neo4j", "cypher", "graph-databases"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703055427,
              "post_id": 77687158,
              "comment_id": 136964684,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136964684_77687158"
            },
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703058653,
              "post_id": 77687158,
              "comment_id": 136965044,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136965044_77687158"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703105937,
              "post_id": 77687158,
              "comment_id": 136972789,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136972789_77687158"
            },
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703115342,
              "post_id": 77687158,
              "comment_id": 136973776,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136973776_77687158"
            },
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703115374,
              "post_id": 77687158,
              "comment_id": 136973779,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136973779_77687158"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703119238,
              "post_id": 77687158,
              "comment_id": 136974158,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136974158_77687158"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703119022,
          "last_edit_date": 1703119022,
          "creation_date": 1703009054,
          "answer_id": 77687158,
          "question_id": 77683954,
          "share_link": "https://stackoverflow.com/a/77687158",
          "body_markdown": "[UPDATED]\r\n\r\nYou are asking the Browser to **display** 103 MB of data, which may be overtaxing it. The Browser is not really designed to display that much data all at once.\r\n\r\nTO BE CLEAR: the issue is not that the neo4j server cannot handle huge amounts of inout data (it certainly can), but with asking the Browser to display huge amounts of data.\r\n\r\n#### If JSON file contains an array of objects\r\n\r\nIn this case, the `apoc.load.json` procedure returns each object in a separate row. Try showing just a portion of the array (say, the first 50 items, which will still take up about 800 KB):\r\n\r\n    CALL apoc.load.json(&quot;file:///&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;&quot;) YIELD value\r\n    RETURN value\r\n    LIMIT 50\r\n\r\n#### If JSON file contains an object that contains an array of sub-objects\r\n\r\nIn this case, the `apoc.load.json` procedure will return the outer object (with all 103 MB of data) in a single row. If   &quot;items&quot; is the key of the array in the outer object, you can show just a portion of the array (say, the first 50 items) this way:\r\n\r\n    CALL apoc.load.json(&quot;file:///&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;&quot;) YIELD value\r\n    UNWIND value.items AS item\r\n    RETURN item\r\n    LIMIT 50",
          "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#77687158",
          "title": "Neo4j Browser blank screen with error when loading json using apoc.load.json"
        }
      ],
      "owner": {
        "reputation": 1054,
        "user_id": 1071179,
        "user_type": "registered",
        "accept_rate": 17,
        "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Mahesh",
        "link": "https://stackoverflow.com/users/1071179/mahesh"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703119022,
      "creation_date": 1702976317,
      "question_id": 77683954,
      "share_link": "https://stackoverflow.com/q/77683954",
      "body_markdown": "I am using neo4j to load a json file which is 103 MB worth.  It has only 6500 records though.\r\n\r\nI created a apoc.config in the right Configuration location and added the property:\r\n```\r\napoc.import.file.enabled=true\r\n```\r\n\r\nI placed the file in dbmss/&lt;dbms_id&gt;/import/&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;.  I am able to apoc procedure using:\r\n```\r\nCALL apoc.load.json(&quot;file:///&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;&quot;)\r\nYIELD value\r\nRETURN value; \r\n```\r\nHowever, after ~1 mins 50 seconds, the process stops with a blank browser page.\r\n\r\n[![Neo4j Browser error][1]][1]  \r\n\r\n\r\nThe following error is shown in the console.\r\n\r\n```\r\n[14:07:54.869] [info]  Neo4j @ 7687 is up and running!\r\n[14:07:54.885] [info]  Neo4j @ 7474 is up and running!\r\n\r\n\r\n\r\n\r\n\r\n\r\nError sending from webFrameMain:  Error: Render frame was disposed before WebFrameMain could be accessed\r\n    at n.send (node:electron/js2c/browser_init:165:417)\r\n    at b.send (node:electron/js2c/browser_init:161:2494)\r\n    at send (/tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:6062:13)\r\n    at /tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:6066:63\r\n    at Array.forEach (&lt;anonymous&gt;)\r\n    at broadcast (/tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:6066:48)\r\n    at Timeout.onlineCheck [as _onTimeout] (/tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:13066:38)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n```\r\n\r\nI googled somewhere and added:\r\n```\r\napoc.http.timeout.connect=600000\r\napoc.http.timeout.read=600000\r\n```\r\n\r\nNo change.  Still errors out around 1 min 50 seconds.  Not sure what this config is.  It is consistently reproducable.\r\n\r\nThis happens on all of Ubuntu VM, Ubuntu standalone system and Windows.  Doesn&#39;t look like a display issue.  Please help.\r\n\r\n  [1]: https://i.stack.imgur.com/5ruSQ.jpg",
      "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json",
      "title": "Neo4j Browser blank screen with error when loading json using apoc.load.json"
    },
    {
      "tags": ["node.js", "neo4j", "graphql", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 11,
            "user_id": 17648725,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxul6cX9IUPg44FlZ3QYwMbjR1jkWiBHnOG7zE=k-s256",
            "display_name": "Joe Olu",
            "link": "https://stackoverflow.com/users/17648725/joe-olu"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702944947,
          "creation_date": 1702944947,
          "answer_id": 77682353,
          "question_id": 77682289,
          "share_link": "https://stackoverflow.com/a/77682353",
          "body_markdown": "Solved it, \r\n\r\nNeeded to add this to context\r\n\r\n```\r\n sessionConfig: { database: &quot;myNeoGraph&quot; }\r\n```",
          "link": "https://stackoverflow.com/questions/77682289/cannot-query-nodes/77682353#77682353",
          "title": "Cannot query nodes"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 17648725,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxul6cX9IUPg44FlZ3QYwMbjR1jkWiBHnOG7zE=k-s256",
        "display_name": "Joe Olu",
        "link": "https://stackoverflow.com/users/17648725/joe-olu"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702944947,
      "creation_date": 1702943151,
      "question_id": 77682289,
      "share_link": "https://stackoverflow.com/q/77682289",
      "body_markdown": "This is the structure of my schema \r\n```\r\ntype Process @query(read: true, aggregate: true) {\r\n  material_id: String\r\n  batch_id: String\r\n  basic_mat: String\r\n  happened: Date\r\n}\r\n```\r\n\r\nNow, querying process returns an empty array \r\n```\r\nquery Processes($where: ProcessWhere) {\r\n  processes(where: $where) {\r\n    basic_mat\r\n    material_id\r\n    batch_id\r\n  }\r\n}\r\n```\r\nThis is the variable where\r\n```\r\n{ \r\n  &quot;where&quot;: {\r\n    &quot;batch_id&quot;: &quot;abc101&quot;\r\n  }\r\n}\r\n```\r\nI went further to enable debug and this is what I get\r\n```\r\n  @neo4j/graphql:auth using JWT provided in context: undefined +0ms\r\n  @neo4j/graphql:execution executing cypher +0ms\r\n  @neo4j/graphql:execution CALL dbms.components() YIELD versions, edition UNWIND versions AS version RETURN version, edition +1ms\r\n  @neo4j/graphql:execution cypher params: {} +0ms\r\n  @neo4j/graphql:translate ReadOperation\r\n  @neo4j/graphql:translate |──── PropertyFilter [batch_id] &lt;EQ&gt;\r\n  @neo4j/graphql:translate |──── AttributeField &lt;basic_mat&gt;\r\n  @neo4j/graphql:translate |──── AttributeField &lt;material_id&gt;\r\n  @neo4j/graphql:translate |──── AttributeField &lt;batch_id&gt; +0ms\r\n  @neo4j/graphql:execution executing cypher +655ms\r\n  @neo4j/graphql:execution MATCH (this:Process)\r\n  @neo4j/graphql:execution WHERE this.batch_id = $param0\r\n  @neo4j/graphql:execution RETURN this { .basic_mat, .material_id, .batch_id } AS this +0ms\r\n  @neo4j/graphql:execution cypher params: { param0: &#39;abc101&#39; } +0ms\r\n  @neo4j/graphql:execution Execute successful, received 0 records +0ms\r\n```\r\nrunning this cypher in neo4j returns values but not when I am using the neo4j/graphql lib. \r\nany Idea what the issue is here",
      "link": "https://stackoverflow.com/questions/77682289/cannot-query-nodes",
      "title": "Cannot query nodes"
    },
    {
      "tags": ["neo4j", "cypher", "neomodel"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1702926884,
          "post_id": 77674898,
          "comment_id": 136949651,
          "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id#comment136949651_77674898"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 63,
                "user_id": 9312373,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/j7DBj.png?s=256&g=1",
                "display_name": "B D T",
                "link": "https://stackoverflow.com/users/9312373/b-d-t"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705679182,
              "post_id": 77847239,
              "comment_id": 137239862,
              "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#comment137239862_77847239"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 20071464,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
                "display_name": "artMart",
                "link": "https://stackoverflow.com/users/20071464/artmart"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705850140,
              "post_id": 77847239,
              "comment_id": 137253942,
              "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#comment137253942_77847239"
            },
            {
              "owner": {
                "reputation": 63,
                "user_id": 9312373,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/j7DBj.png?s=256&g=1",
                "display_name": "B D T",
                "link": "https://stackoverflow.com/users/9312373/b-d-t"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 20071464,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
                "display_name": "artMart",
                "link": "https://stackoverflow.com/users/20071464/artmart"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705882691,
              "post_id": 77847239,
              "comment_id": 137257072,
              "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#comment137257072_77847239"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 63,
            "user_id": 9312373,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/j7DBj.png?s=256&g=1",
            "display_name": "B D T",
            "link": "https://stackoverflow.com/users/9312373/b-d-t"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705678777,
          "creation_date": 1705678777,
          "answer_id": 77847239,
          "question_id": 77674898,
          "share_link": "https://stackoverflow.com/a/77847239",
          "body_markdown": "I think it&#39;s because you have `ID` capitalized. \r\n\r\nAlso, it looks like you&#39;re naming the python variable with `id`. That&#39;s already a [python function](https://docs.python.org/3/library/functions.html), so I&#39;d recommend naming the variable something like `databaseId`. You code would become...\r\n\r\n```python\r\nfrom neomodel import db\r\nquery=&quot;MATCH (n:Message) WHERE id(n)=&quot;+databaseId+&quot; SET n.type=&#39;&quot;+str(ans)+&quot;&#39;, n.reprimands=&#39;&quot;+str(ans2)+&quot;&#39;&quot;\r\ndb.cypher_query(query)\r\n```\r\n\r\nThe cypher would look something like this:\r\n\r\n```cypher\r\nMATCH (n:Message)\r\n  WHERE id(n) = 123\r\nSET n.type = &quot;some type&quot;,\r\n    n.reprimands = &quot;some reprimands&quot;\r\n```",
          "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#77847239",
          "title": "Neo4j- How can I match by using the internal ID"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 20071464,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
        "display_name": "artMart",
        "link": "https://stackoverflow.com/users/20071464/artmart"
      },
      "last_editor": {
        "reputation": 11,
        "user_id": 20071464,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
        "display_name": "artMart",
        "link": "https://stackoverflow.com/users/20071464/artmart"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 66,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705678777,
      "creation_date": 1702826013,
      "last_edit_date": 1703119239,
      "question_id": 77674898,
      "share_link": "https://stackoverflow.com/q/77674898",
      "body_markdown": "\r\nI need to retrieve a node in Neo4j and I only have the internal ID.\r\n\r\nIs there a way to retrieve the node that has the ID in the given set in one cypher query ? \r\n\r\nI&#39;m using Neo4j 2.1.5\r\n\r\nThanks !\r\n```\r\nfrom neomodel import db\r\nquery=&quot;MATCH (n:Message) WHERE ID(n)=&quot;+id+&quot; SET n.type=&#39;&quot;+str(ans)+&quot;&#39;, n.reprimands=&#39;&quot;+str(ans2)+&quot;&#39;&quot;\r\ndb.cypher_query(query)\r\n```\r\nI tried this but it didn&#39;t work out. I asigned the id in the python code, but it didn&#39;t seemed to have matched the ID I already had in my neo4j db. I used SET to change some attributes in the db but nothing changed at all. \r\n\r\nI am using neomodel to access the DB via python.",
      "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id",
      "title": "Neo4j- How can I match by using the internal ID"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1702931145,
          "post_id": 77674781,
          "comment_id": 136950207,
          "link": "https://stackoverflow.com/questions/77674781/neo4j-improve-loadcsv-relations-query-time#comment136950207_77674781"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1702927714,
          "last_edit_date": 1702927714,
          "creation_date": 1702927253,
          "answer_id": 77681301,
          "question_id": 77674781,
          "share_link": "https://stackoverflow.com/a/77681301",
          "body_markdown": "Your `MATCH` clause must specify the *node label* (in addition to the node property) associated with a node index in order for the Cypher planner to consider using that index.\r\n\r\nThis query should be much faster:\r\n\r\n    CALL apoc.periodic.iterate(\r\n    &quot;LOAD CSV WITH HEADERS FROM &#39;file:///cleaned_follows_output.csv&#39; AS row RETURN row&quot;,\r\n    &quot;MATCH (u1:User {id: row._s}), (u2:User {id: row._t}) MERGE (u1)-[:FOLLOWING]-&gt;(u2)&quot;,\r\n    {batchSize: 10000, parallel: true}\r\n    );",
          "link": "https://stackoverflow.com/questions/77674781/neo4j-improve-loadcsv-relations-query-time/77681301#77681301",
          "title": "Neo4J- Improve LoadCSV relations query time"
        }
      ],
      "owner": {
        "reputation": 532,
        "user_id": 10687078,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-wzDe9rQWto0/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hBodJeapeZCWcYTFnE47qWIIvZeg/mo/photo.jpg?sz=256",
        "display_name": "osaro",
        "link": "https://stackoverflow.com/users/10687078/osaro"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77681301,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702927714,
      "creation_date": 1702823714,
      "question_id": 77674781,
      "share_link": "https://stackoverflow.com/q/77674781",
      "body_markdown": "I have a neo4j database with 1 million user nodes. I&#39;m trying to load relationships between these nodes from a 4 million-row CSV file. A user can follow another user. At this point, the query has been running for hours. Is there something wrong with the query that&#39;s making it this slow?\r\n\r\n``` \r\nCALL apoc.periodic.iterate(\r\n&quot;LOAD CSV WITH HEADERS FROM &#39;file:///cleaned_follows_output.csv&#39; AS row RETURN row&quot;,\r\n&quot;MATCH (u1 {id: row._s}), (u2 {id: row._t}) MERGE (u1)-[:FOLLOWING]-&gt;(u2)&quot;,\r\n{batchSize: 10000, parallel: true}\r\n);\r\n```\r\n\r\nI have already created an index on the id property by running the following:\r\n```\r\nCREATE INDEX FOR (u: User) ON (u.id)\r\n```\r\n\r\n\r\nIndexs:\r\n```\r\nIndex Name\tType\tUniqueness\tEntityType\tLabelsOrTypes\tProperties\tState\r\nindex_343aff4q\tLOOKUP\t\tNODE\tnull\tnull\tONLINE\r\nindex_9f2536bf\tRANGE\t\tNODE\t[ &quot;User&quot; ]\t[ &quot;id&quot; ]\tONLINE\r\nindex_f7700478\tLOOKUP\t\tRELATIONSHIP\tnull\tnull\tONLINE\r\n```",
      "link": "https://stackoverflow.com/questions/77674781/neo4j-improve-loadcsv-relations-query-time",
      "title": "Neo4J- Improve LoadCSV relations query time"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702571149,
          "post_id": 77660729,
          "comment_id": 136914674,
          "link": "https://stackoverflow.com/questions/77660729/failed-to-invoke-apoc-procedure-that-was-working-just-a-minute-ago#comment136914674_77660729"
        },
        {
          "owner": {
            "reputation": 136,
            "user_id": 10768865,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Stephanie",
            "link": "https://stackoverflow.com/users/10768865/stephanie"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706107391,
          "post_id": 77660729,
          "comment_id": 137286650,
          "link": "https://stackoverflow.com/questions/77660729/failed-to-invoke-apoc-procedure-that-was-working-just-a-minute-ago#comment137286650_77660729"
        }
      ],
      "owner": {
        "reputation": 136,
        "user_id": 10768865,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Stephanie",
        "link": "https://stackoverflow.com/users/10768865/stephanie"
      },
      "last_editor": {
        "reputation": 136,
        "user_id": 10768865,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Stephanie",
        "link": "https://stackoverflow.com/users/10768865/stephanie"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1702563863,
      "creation_date": 1702562690,
      "last_edit_date": 1702563863,
      "question_id": 77660729,
      "share_link": "https://stackoverflow.com/q/77660729",
      "body_markdown": "IS IT POSSIBLE FOR APOC TO SELECTIVELY CRASH ON JUST ONE PROCEDURE?\r\n\r\n```\r\nMATCH (n:Node) \r\nRETURN apoc.temporal.format(n.DT, &quot;dd/MM/yyyy&quot;)\r\n```\r\nwas returning **&quot;14/12/23&quot;** (via neo4j browser)\r\n\r\nThen I ran query through php client, and it returns \r\n\r\n**&quot;Neo.ClientError.Procedure.ProcedureCallFailed: Failed to invoke function `apoc.temporal.format`: Caused by: java.lang.NullPointerException&quot;**\r\n\r\nThen I run it again via neo4j browser and get the same error. So the browser shows working query, then a handful of minutes later shows the exact same query yielding error. I am puzzled.\r\n\r\n```\r\nCALL apoc.help(&quot;apoc&quot;)\r\n```\r\nreturns long list that includes:\r\n\r\n**&quot;function    apoc.temporal.format    apoc.temporal.format(input, format) | Format a temporal value&quot;**\r\n\r\nMeanwhile, a bunch of other apoc functions seem to be working fine...\r\n\r\nRebooting the database does not fix it.\r\n\r\nMY QUESTION: HOW DO I &quot;REBOOT&quot; APOC OR MAKE THIS PROCEDURE WORK AGAIN, AND HOW TO ENSURE THIS DOES NOT HAPPEN DURING DEPLOYMENT?\r\n\r\nThanks!",
      "link": "https://stackoverflow.com/questions/77660729/failed-to-invoke-apoc-procedure-that-was-working-just-a-minute-ago",
      "title": "Failed to invoke apoc procedure (that was working just a minute ago)"
    },
    {
      "tags": ["sorting", "neo4j", "entity", "bloom"],
      "comments": [
        {
          "owner": {
            "reputation": 2591,
            "user_id": 13867124,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/3f75c892f3b54042e7400ee33cd8af96?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "AztecCodes",
            "link": "https://stackoverflow.com/users/13867124/azteccodes"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702761322,
          "post_id": 77657328,
          "comment_id": 136934352,
          "link": "https://stackoverflow.com/questions/77657328/does-neo4j-bloom-can-sort-the-entities-in-visualization#comment136934352_77657328"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 11,
            "user_id": 23100558,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/07010f96d5231ef857a995a837d54f3b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "yetanotheruser",
            "link": "https://stackoverflow.com/users/23100558/yetanotheruser"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702989754,
          "creation_date": 1702989754,
          "answer_id": 77685267,
          "question_id": 77657328,
          "share_link": "https://stackoverflow.com/a/77685267",
          "body_markdown": "In Bloom at the bottom right of the perspective view you can select the layout algorithm to use to display nodes and relationships: in your case you could use a hierarchical layout or if you have measurable and meaningful properties you could use the coordinate layout and distribute your nodes based on those.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OwXsO.jpg",
          "link": "https://stackoverflow.com/questions/77657328/does-neo4j-bloom-can-sort-the-entities-in-visualization/77685267#77685267",
          "title": "Does Neo4j Bloom can sort the entities in visualization?"
        }
      ],
      "owner": {
        "reputation": 17,
        "user_id": 4701433,
        "user_type": "registered",
        "profile_image": "https://lh5.googleusercontent.com/-Nxfj7qfeWAo/AAAAAAAAAAI/AAAAAAAABjE/DMqYi3XVV0c/photo.jpg?sz=256",
        "display_name": "Amir Rouhi",
        "link": "https://stackoverflow.com/users/4701433/amir-rouhi"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702989754,
      "creation_date": 1702516693,
      "question_id": 77657328,
      "share_link": "https://stackoverflow.com/q/77657328",
      "body_markdown": "My database is set up, and when I query it and visualize the result in Bloom, I should manually sort one of the entities in a line to make it more meaningful for the audience. I am wondering if it is possible to sort the entities in Bloom, i.e. from left to right in a horizontal line?\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c2pws.png",
      "link": "https://stackoverflow.com/questions/77657328/does-neo4j-bloom-can-sort-the-entities-in-visualization",
      "title": "Does Neo4j Bloom can sort the entities in visualization?"
    },
    {
      "tags": ["browser", "neo4j", "localhost", "cloud", "bloom"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 11,
            "user_id": 23100558,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/07010f96d5231ef857a995a837d54f3b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "yetanotheruser",
            "link": "https://stackoverflow.com/users/23100558/yetanotheruser"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1702552941,
          "creation_date": 1702552941,
          "answer_id": 77659778,
          "question_id": 77657073,
          "share_link": "https://stackoverflow.com/a/77659778",
          "body_markdown": "You could create a neo4j AuraDB free instance, then you can connect to it through your local neo4j browser through neo4j desktop:\r\n\r\n - create a new project\r\n - click on Add -&gt; remote connection\r\n - insert the credential you got after creating the AuraDB instance\r\n - click connect and open neo4j browser",
          "link": "https://stackoverflow.com/questions/77657073/how-can-i-migrate-from-localhost-neo4j-browser-to-cloud/77659778#77659778",
          "title": "How can i migrate from localhost neo4j browser to cloud?"
        }
      ],
      "owner": {
        "reputation": 17,
        "user_id": 4701433,
        "user_type": "registered",
        "profile_image": "https://lh5.googleusercontent.com/-Nxfj7qfeWAo/AAAAAAAAAAI/AAAAAAAABjE/DMqYi3XVV0c/photo.jpg?sz=256",
        "display_name": "Amir Rouhi",
        "link": "https://stackoverflow.com/users/4701433/amir-rouhi"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 14,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702552941,
      "creation_date": 1702510542,
      "question_id": 77657073,
      "share_link": "https://stackoverflow.com/q/77657073",
      "body_markdown": "To create my databases, I have set up a *Neo4j desktop* and use a *localhost browser* to query and visualise the results. Would it be possible for me to query and visualise my databases graphs in the *Neo4j browser in the cloud* instead of localhost? To make it more accessible, I need it.",
      "link": "https://stackoverflow.com/questions/77657073/how-can-i-migrate-from-localhost-neo4j-browser-to-cloud",
      "title": "How can i migrate from localhost neo4j browser to cloud?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 17864612,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3536b535b42458f1c98202b90145372e?s=256&d=identicon&r=PG",
                "display_name": "user17864612",
                "link": "https://stackoverflow.com/users/17864612/user17864612"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704462710,
              "post_id": 77654754,
              "comment_id": 137097123,
              "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return/77654754#comment137097123_77654754"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 17864612,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3536b535b42458f1c98202b90145372e?s=256&d=identicon&r=PG",
                "display_name": "user17864612",
                "link": "https://stackoverflow.com/users/17864612/user17864612"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704462743,
              "post_id": 77654754,
              "comment_id": 137097130,
              "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return/77654754#comment137097130_77654754"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702481500,
          "creation_date": 1702481500,
          "answer_id": 77654754,
          "question_id": 77653829,
          "share_link": "https://stackoverflow.com/a/77654754",
          "body_markdown": "For dynamic Cypher statements, the apoc library (https://neo4j.com/docs/apoc/current/cypher-execution/running-cypher/) offers the possibilities you need. ",
          "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return/77654754#77654754",
          "title": "neo4j table where a list of node keys defines the columns for RETURN"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 17864612,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3536b535b42458f1c98202b90145372e?s=256&d=identicon&r=PG",
        "display_name": "user17864612",
        "link": "https://stackoverflow.com/users/17864612/user17864612"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702481500,
      "creation_date": 1702472889,
      "question_id": 77653829,
      "share_link": "https://stackoverflow.com/q/77653829",
      "body_markdown": "If I choose a specific node LABEL, I can get a list of distinct node KEYS using the below:\r\n\r\n```\r\nMATCH(n:Person) \r\nWITH KEYS(n) AS keys\r\nUNWIND keys AS key\r\nRETURN COLLECT(DISTINCT key) AS DistinctKeys\r\n```\r\n\r\nthe result is something like `[&quot;Title&quot;,&quot;Name&quot;,&quot;Location&quot;,&quot;Division&quot;]`\r\n\r\nI&#39;m looking for a way to loop over this list and return the following equivalent, without having to specify each key:\r\n\r\n`RETURN n.Title, n.Name, n.Location, n.Division `\r\n\r\nIdeally would accommodate any node LABEL I specify where each LABEL can have varying numbers of KEYS. \r\n\r\nNot even sure where to start as looking online it doesn&#39;t look possible. Anything I have tried is not even close. ",
      "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return",
      "title": "neo4j table where a list of node keys defines the columns for RETURN"
    },
    {
      "tags": ["json", "neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702461933,
          "creation_date": 1702461933,
          "answer_id": 77652644,
          "question_id": 77651129,
          "share_link": "https://stackoverflow.com/a/77652644",
          "body_markdown": "Your second query should fail because the `RETURN *` is projecting out variables that have already been declared in the outer scope e.g. `v_globalcustid`.\r\n\r\nTo address your original problem, just return `null`:\r\n```sql\r\nCALL {\r\n  // other stuff\r\n  CALL apoc.merge.relationship(\r\n    m, \r\n    r.relationship.label,\r\n    { \r\n      createdate: r.relationship.createdate, \r\n      enddate: r.relationship.enddate, \r\n      value: r.relationship.value\r\n    },\r\n    {},\r\n    tag_node,\r\n    {}\r\n  ) YIELD rel\r\n  RETURN null AS discard\r\n} IN TRANSACTIONS OF 10000 ROWS\r\nRETURN null\r\n```\r\nThis is necessary because `CALL` subqueries have to conclude with either a `RETURN` or a write operation such as `CREATE`. Although `apoc.merge.relationship` does perform writes, Cypher treats it as a read operation that has to return a value.",
          "link": "https://stackoverflow.com/questions/77651129/neo4j-process-a-json-file-in-batch/77652644#77652644",
          "title": "Neo4j process a json file in batch"
        }
      ],
      "owner": {
        "reputation": 411,
        "user_id": 6086295,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
        "display_name": "Kevin Lee",
        "link": "https://stackoverflow.com/users/6086295/kevin-lee"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702461933,
      "creation_date": 1702442228,
      "question_id": 77651129,
      "share_link": "https://stackoverflow.com/q/77651129",
      "body_markdown": "I have a cypher to read the json file and do some processing to create/merge nodes and relationship, \r\n\r\n\r\n```\r\n// Read the json file\r\nCALL apoc.load.json(&#39;file:///test/test.json&#39;) YIELD value\r\n\r\n// Read the json fields as variables\r\nwith value.globalcustid as v_globalcustid, value.member_node_properties as member_node_properties, value.relationships as relationships\r\n\r\n// Update the member node demographic properties, if the member node does not exist, create it\r\nMERGE (m:Member {globalcustid: v_globalcustid})\r\nON CREATE SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\nON MATCH SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\n\r\n// Unwind the relationships array into multiple rows of relationship\r\nwith v_globalcustid, m, member_node_properties, relationships\r\nUNWIND relationships as r\r\n\r\n// Get the tag node and skip the null tag\r\nwith m, v_globalcustid, r, r.node.label as node_label, r.node.tag_id as tag_id\r\nwhere tag_id is not null\r\nCALL apoc.cypher.run(\r\n    &quot;MATCH (t:&quot; + node_label + &quot; {tag_id: &#39;&quot; + tag_id +&quot;&#39;}) RETURN t limit 1&quot;, \r\n    {}\r\n) yield value as tag_node\r\n\r\n// Merge the relationship of member node and tag node\r\nwith m, v_globalcustid, r, tag_node.t as tag_node\r\nCALL apoc.merge.relationship(\r\n  m, \r\n  r.relationship.label,\r\n  {createdate: r.relationship.createdate, enddate: r.relationship.enddate, value: r.relationship.value},\r\n  {},\r\n  tag_node,\r\n  {}\r\n) YIELD rel\r\n\r\nreturn *\r\n```\r\n\r\nThe cypher was working fine with a small json file, then I found that when the json file is too large, it will have out of memory error, so I decided to put it in batch.\r\n\r\n```\r\n\r\n:auto\r\n\r\n// Read the json file\r\nCALL apoc.load.json(&#39;file:///test/test.json&#39;) YIELD value\r\n\r\n// Read the json fields as variables\r\nwith value.globalcustid as v_globalcustid, value.member_node_properties as member_node_properties, value.relationships as relationships\r\n\r\ncall {\r\nwith v_globalcustid, member_node_properties, relationships\r\n\r\n// Update the member node demographic properties, if the member node does not exist, create it\r\nMERGE (m:Member {globalcustid: v_globalcustid})\r\nON CREATE SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\nON MATCH SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\n\r\n// Unwind the relationships array into multiple rows of relationship\r\nwith v_globalcustid, m, member_node_properties, relationships\r\nUNWIND relationships as r\r\n\r\n// Get the tag node and skip the null tag\r\nwith m, v_globalcustid, r, r.node.label as node_label, r.node.tag_id as tag_id\r\nwhere tag_id is not null\r\nCALL apoc.cypher.run(\r\n    &quot;MATCH (t:&quot; + node_label + &quot; {tag_id: &#39;&quot; + tag_id +&quot;&#39;}) RETURN t limit 1&quot;, \r\n    {}\r\n) yield value as tag_node\r\n\r\n// Merge the relationship of member node and tag node\r\nwith m, v_globalcustid, r, tag_node.t as tag_node\r\nCALL apoc.merge.relationship(\r\n  m, \r\n  r.relationship.label,\r\n  {createdate: r.relationship.createdate, enddate: r.relationship.enddate, value: r.relationship.value},\r\n  {},\r\n  tag_node,\r\n  {}\r\n) YIELD rel\r\n\r\nreturn *\r\n} in transactions of 10000 rows\r\n```\r\n\r\nBut it looks like it does not work to call another procedure inside the call {} block?\r\n```\r\nQuery cannot conclude with CALL together with YIELD (line 31, column 1 (offset: 1319))\r\n&quot;CALL apoc.merge.relationship(&quot;\r\n ^\r\n```",
      "link": "https://stackoverflow.com/questions/77651129/neo4j-process-a-json-file-in-batch",
      "title": "Neo4j process a json file in batch"
    },
    {
      "tags": ["node.js", "express", "neo4j", "graphql"],
      "owner": {
        "reputation": 3,
        "user_id": 17265963,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf4a98de77540d7d153cf5399232af17?s=256&d=identicon&r=PG",
        "display_name": "Quan",
        "link": "https://stackoverflow.com/users/17265963/quan"
      },
      "last_editor": {
        "reputation": 3,
        "user_id": 17265963,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf4a98de77540d7d153cf5399232af17?s=256&d=identicon&r=PG",
        "display_name": "Quan",
        "link": "https://stackoverflow.com/users/17265963/quan"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 17,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1702481522,
      "creation_date": 1702416688,
      "last_edit_date": 1702481522,
      "question_id": 77649129,
      "share_link": "https://stackoverflow.com/q/77649129",
      "body_markdown": "I currently have a GraphQL server on top of Express.js to query from a Neo4j database using the `Neo4j GraphQL` library. \r\n```\r\nconst typeDefs = await toGraphQLTypeDefs(sessionFactory, false);\r\nconst ogm = new OGM({ typeDefs, driver });\r\nconst neoSchema = new Neo4jGraphQL({\r\n  typeDefs,\r\n  driver,\r\n  config: {\r\n    skipValidateTypeDefs: true,\r\n  },\r\n  plugins: [\r\n    ApolloServerPluginDrainHttpServer({ httpServer: httpsServer }),\r\n    ApolloServerPluginLandingPageLocalDefault({ embed: true }),\r\n  ],\r\n  resolvers: buildResolvers(ogm, client),\r\n});\r\n\r\nPromise.all([neoSchema.getSchema(), ogm.init()]).then(async ([schema]) =&gt; {\r\n  const server = new ApolloServer({ schema });\r\n  await server.start();\r\n  server.applyMiddleware({ app });\r\n  await new Promise((resolve) =&gt; httpsServer.listen({ port: 4000 }, resolve));\r\n  console.log(\r\n    `&#128640; Server ready at ${EXPRESS_SERVER_ORIGIN}${server.graphqlPath}`\r\n  );\r\n});\r\n```\r\n\r\nHow should I modify this code to make Neo4j one of the &quot;datasources&quot; of the ApolloServer instance like this example from the docs: https://www.apollographql.com/docs/apollo-server/data/fetching-data\r\n```\r\nconst server = new ApolloServer({\r\n  typeDefs,\r\n  resolvers,\r\n  dataSources: () =&gt; {\r\n    return {\r\n      moviesAPI: new MoviesAPI(),\r\n      personalizationAPI: new PersonalizationAPI(),\r\n    };\r\n  },\r\n});\r\n```\r\n\r\nSee the full code here for more context: https://github.com/mskcc/smile-dashboard/blob/d6d9d0d24766d27da470e5aea3218a7776e2f68a/graphql-server/src/index.ts#L289C2-L289C2",
      "link": "https://stackoverflow.com/questions/77649129/convert-neo4jgraphql-class-into-one-of-apolloservers-data-sources",
      "title": "Convert Neo4jGraphql class into one of ApolloServer&#39;s data sources"
    },
    {
      "tags": ["neo4j", "neo4j-admin"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702417362,
          "post_id": 77646287,
          "comment_id": 136893109,
          "link": "https://stackoverflow.com/questions/77646287/neo4j-dump-fails-with-integer-overflow-error#comment136893109_77646287"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 13567649,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiOtZ7UY5ZiMcz91QBpicogd3hajYpm-iC7PgwCLA=k-s256",
        "display_name": "Billcates",
        "link": "https://stackoverflow.com/users/13567649/billcates"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 22,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1702417092,
      "creation_date": 1702385914,
      "last_edit_date": 1702417092,
      "question_id": 77646287,
      "share_link": "https://stackoverflow.com/q/77646287",
      "body_markdown": "I have a large neo4j database of size more than 1 TB. I was using `dump` and `load` for backup and restore process. `dump` was working fine while my database size was less than 1 TB, but after it reached 1 TB `dump` is failing with error message &quot;Failed to dump database integer overflow&quot;.\r\n\r\nI couldn&#39;t find any solution for this.\r\n\r\nI need to run neo4j-admin `dump` process successfully.",
      "link": "https://stackoverflow.com/questions/77646287/neo4j-dump-fails-with-integer-overflow-error",
      "title": "Neo4j dump fails with integer overflow error"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 493,
                "user_id": 2259302,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
                "display_name": "H&#229;kan L&#246;fqvist",
                "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
              },
              "edited": false,
              "score": 2,
              "creation_date": 1702276031,
              "post_id": 77633889,
              "comment_id": 136871983,
              "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse/77633889#comment136871983_77633889"
            },
            {
              "owner": {
                "reputation": 117,
                "user_id": 11803228,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/d09735ea42185e8b0712bf96aa36ada9?s=256&d=identicon&r=PG",
                "display_name": "FlagT",
                "link": "https://stackoverflow.com/users/11803228/flagt"
              },
              "reply_to_user": {
                "reputation": 493,
                "user_id": 2259302,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
                "display_name": "H&#229;kan L&#246;fqvist",
                "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702289738,
              "post_id": 77633889,
              "comment_id": 136873801,
              "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse/77633889#comment136873801_77633889"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 117,
            "user_id": 11803228,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/d09735ea42185e8b0712bf96aa36ada9?s=256&d=identicon&r=PG",
            "display_name": "FlagT",
            "link": "https://stackoverflow.com/users/11803228/flagt"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702190081,
          "creation_date": 1702190081,
          "answer_id": 77633889,
          "question_id": 77633753,
          "share_link": "https://stackoverflow.com/a/77633889",
          "body_markdown": "In the topmost MATCH statement, I didn&#39;t define a name for the Relationships, such as r1, so the returned data did not include these relationships. Oddly enough, the browser managed to return data using the unnamed Cypher, which might involve some behind-the-scenes processing. By modifying the Cypher query, I have resolved this issue.",
          "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse/77633889#77633889",
          "title": "The same Cypher query yields inconsistent results between the SDK and the browser, with several Relationships missing"
        }
      ],
      "owner": {
        "reputation": 117,
        "user_id": 11803228,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d09735ea42185e8b0712bf96aa36ada9?s=256&d=identicon&r=PG",
        "display_name": "FlagT",
        "link": "https://stackoverflow.com/users/11803228/flagt"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "closed_date": 1702326357,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702190081,
      "creation_date": 1702185335,
      "question_id": 77633753,
      "share_link": "https://stackoverflow.com/q/77633753",
      "body_markdown": "I suspect that I have encountered a bug. When querying with the Go SDK, the data results obtained are inconsistent with those in the Neo4j browser, with several Relationships missing.\r\n\r\n  Neo4j Version: Neo4j Kernel 5.12.0 community\r\n\r\n  Neo4j Mode: Single instance\r\n\r\n  Driver version: Go driver v5.12.0\r\n\r\n  Operating System: centos\r\n\r\nMy Cypher is\r\n\r\n```\r\nMATCH (n1:AAA_IngressOfSecurityGroup {AssetsAccountId:&quot;aaaa&quot;})-[:IngressOfSecurityGroup]-&gt;(n2:AAA_SecurityGroup {AssetsAccountId:&quot;aaaa&quot;})-[:SecurityGroupOfNetworkInterface]-&gt;(n3:AAA_NetworkInterface {AssetsAccountId:&quot;aaaa&quot;})-[:NetworkInterfaceOfCvm]-&gt;(n4:AAA_CvmInstance {AssetsAccountId:&quot;aaaa&quot;,AssetUniqueId:&quot;aaaa-165d2740e7fa&quot;,AssetsVersion:&quot;1702108924&quot;}) WHERE n4.InstanceState = &#39;RUNNING&#39; AND n4.RestrictState = &#39;NORMAL&#39; AND n1.Action = &#39;ACCEPT&#39; AND (n1.Ipv6CidrBlock = &quot;::/0&quot; OR n1.CidrBlock = &quot;0.0.0.0/0&quot;) AND toLower(n1.Port) = &#39;all&#39; AND (toLower(n1.Protocol) = &#39;tcp&#39; or toLower(n1.Protocol) = &#39;udp&#39; or toLower(n1.Protocol)= &#39;all&#39; )   WITH n1, n2, n3, n4 WHERE ALL (groupId IN n3.GroupSet WHERE   NOT EXISTS {     MATCH (n2_other:AAA_SecurityGroup {AssetsAccountId:&quot;aaaa&quot;, SecurityGroupId: groupId})-[:IngressOfSecurityGroup]-&gt;(n1_other:AAA_IngressOfSecurityGroup)     WHERE n1_other.Action = &#39;DROP&#39; AND ((n1_other.CidrBlock = &quot;0.0.0.0/0&quot; OR n1_other.Ipv6CidrBlock = &quot;::/0&quot;) AND toLower(n1_other.Port) = &#39;all&#39;) AND NOT EXISTS {       MATCH (n1_smaller:AAA_IngressOfSecurityGroup)-[:IngressOfSecurityGroup]-&gt;(n2_other)       WHERE toInteger(n1_smaller.PolicyIndex) &lt; toInteger(n1_other.PolicyIndex)     }   } )  OPTIONAL MATCH p2 = (n7:AAA_PublicIp {AssetsAccountId:&quot;aaaa&quot;})-[:PublicIpToVpc]-&gt;(n6:AAA_Vpc {AssetsAccountId:&quot;aaaa&quot;})-[:SubnetsInVPC]-&gt;(n5:AAA_Subnet {AssetsAccountId:&quot;aaaa&quot;})-[:NetworkInterfaceInSubnet]-&gt;(n3) WHERE p2 IS NOT NULL  OPTIONAL MATCH p3 = (n8:AAA_Eip {AssetsAccountId:&quot;aaaa&quot;})-[:EipOToVpc]-&gt;(n6)-[:SubnetsInVPC]-&gt;(n5)-[:NetworkInterfaceInSubnet]-&gt;(n3) WHERE p3 IS NOT NULL      WITH DISTINCT n4, n1, n2, n3, n6, n7, p2, p3  RETURN n1, n2, n3,n4, n6, n7, p2, p3\r\n```\r\n\r\nThe code I use to process the data returned from Neo4j is as follows.\r\n\r\n```\r\nresult, session, err := global.Neo4j.RunCypherQuery(body.Cypher, nil)\r\n\tif err != nil {\r\n\t\tlogger.Log.Error(&quot;RunCypherQuery error: &quot; + err.Error())\r\n\t\tresponse := responses.NewErrorResponse(responses.StatusCodeUnknownErr, err.Error())\r\n\t\tc.JSON(http.StatusOK, response)\r\n\t\treturn\r\n\t}\r\n\r\n\tvar nodes []neo4j.Node\r\n\tvar relationships []neo4j.Relationship\r\n\r\n\tseenNodes := make(map[int64]bool)\r\n\tseenRelationships := make(map[int64]bool)\r\n\tfor result.Next() {\r\n\t\trecord := result.Record()\r\n\t\tfor _, value := range record.Values {\r\n\t\t\tif value == nil {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tswitch v := value.(type) {\r\n\t\t\tcase neo4j.Node:\r\n\t\t\t\tif _, found := seenNodes[v.Id]; !found {\r\n\t\t\t\t\tseenNodes[v.GetId()] = true\r\n\t\t\t\t\tnodes = append(nodes, v)\r\n\t\t\t\t}\r\n\t\t\tcase neo4j.Relationship:\r\n\t\t\t\tif _, found := seenRelationships[v.Id]; !found {\r\n\t\t\t\t\tseenRelationships[v.GetId()] = true\r\n\t\t\t\t\trelationships = append(relationships, v)\r\n\t\t\t\t}\r\n\t\t\tcase neo4j.Path:\r\n\t\t\t\tfor _, node := range v.Nodes {\r\n\t\t\t\t\tif _, found := seenNodes[node.Id]; !found {\r\n\t\t\t\t\t\tseenNodes[node.GetId()] = true\r\n\t\t\t\t\t\tnodes = append(nodes, node)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor _, rel := range v.Relationships {\r\n\t\t\t\t\tif _, found := seenRelationships[rel.Id]; !found {\r\n\t\t\t\t\t\tseenRelationships[rel.GetId()] = true\r\n\t\t\t\t\t\trelationships = append(relationships, rel)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tcase []interface{}:\r\n\t\t\t\tfor _, item := range v {\r\n\t\t\t\t\tswitch elem := item.(type) {\r\n\t\t\t\t\tcase neo4j.Node:\r\n\t\t\t\t\t\tif _, found := seenNodes[elem.GetId()]; !found {\r\n\t\t\t\t\t\t\tseenNodes[elem.GetId()] = true\r\n\t\t\t\t\t\t\tnodes = append(nodes, elem)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase neo4j.Relationship:\r\n\t\t\t\t\t\tif _, found := seenRelationships[elem.GetId()]; !found {\r\n\t\t\t\t\t\t\tseenRelationships[elem.GetId()] = true\r\n\t\t\t\t\t\t\trelationships = append(relationships, elem)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tlogger.Log.Error(&quot;Unexpected type in []interface{}: %T&quot;, item)\r\n\t\t\t\t\t\tresponse := responses.NewErrorResponse(responses.StatusCodeUnknownErr, errors.New(fmt.Sprintf(&quot;Unexpected type in []interface{}: %T&quot;, item)).Error())\r\n\t\t\t\t\t\tc.JSON(http.StatusOK, response)\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tlogger.Log.Error(&quot;Unexpected type: %T&quot;, v)\r\n\t\t\t\tresponse := responses.NewErrorResponse(responses.StatusCodeUnknownErr, errors.New(fmt.Sprintf(&quot;Unexpected type: %T&quot;, v)).Error())\r\n\t\t\t\tc.JSON(http.StatusOK, response)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\n```\r\nfunc (c *Client) RunCypherQuery(query string, params map[string]interface{}) (neo4j.Result, neo4j.Session, error) {\r\n\tsession := c.driver.NewSession(neo4j.SessionConfig{})\r\n\tfmt.Println(query)\r\n\tresult, err := session.Run(query, params)\r\n\tif err != nil {\r\n\t\treturn nil, session, err\r\n\t}\r\n\treturn result, session, nil\r\n}\r\n```\r\n\r\nin neo4j desktop search result is\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nin my code search result is\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe position marked with a red &quot;X&quot; indicates that no results were found.\r\n\r\nIn the RunCypherQuery method, the data for these three Relationships were not found in the returned result.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LBl50.png\r\n  [2]: https://i.stack.imgur.com/rAFEJ.png",
      "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse",
      "closed_reason": "Duplicate",
      "title": "The same Cypher query yields inconsistent results between the SDK and the browser, with several Relationships missing"
    },
    {
      "tags": ["neo4j", "neo4j-browser"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702326468,
          "post_id": 77630912,
          "comment_id": 136880299,
          "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server#comment136880299_77630912"
        },
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702328555,
          "post_id": 77630912,
          "comment_id": 136880615,
          "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server#comment136880615_77630912"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 23070531,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/276537b5cf8e3551b79763bb76d1b391?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nizar",
                "link": "https://stackoverflow.com/users/23070531/nizar"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702146081,
              "post_id": 77631068,
              "comment_id": 136862264,
              "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server/77631068#comment136862264_77631068"
            },
            {
              "owner": {
                "reputation": 19639,
                "user_id": 2662355,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
                "display_name": "Christophe Willemsen",
                "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 23070531,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/276537b5cf8e3551b79763bb76d1b391?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nizar",
                "link": "https://stackoverflow.com/users/23070531/nizar"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702163631,
              "post_id": 77631068,
              "comment_id": 136863839,
              "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server/77631068#comment136863839_77631068"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 23070531,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/276537b5cf8e3551b79763bb76d1b391?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nizar",
                "link": "https://stackoverflow.com/users/23070531/nizar"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702200056,
              "post_id": 77631068,
              "comment_id": 136865660,
              "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server/77631068#comment136865660_77631068"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702326077,
              "post_id": 77631068,
              "comment_id": 136880213,
              "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server/77631068#comment136880213_77631068"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 23070531,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/276537b5cf8e3551b79763bb76d1b391?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nizar",
                "link": "https://stackoverflow.com/users/23070531/nizar"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702387322,
              "post_id": 77631068,
              "comment_id": 136887638,
              "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server/77631068#comment136887638_77631068"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702120797,
          "creation_date": 1702120797,
          "answer_id": 77631068,
          "question_id": 77630912,
          "share_link": "https://stackoverflow.com/a/77631068",
          "body_markdown": "In the neo4j browser, the `connect result nodes` option is enabled by default. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen you return nodes from queries, the browser will make in the background an additional query for finding relationships between the nodes and automatically display them.\r\n\r\nFor example, if I would return only two nodes with Cypher\r\n\r\n```\r\nMATCH (n:Person {name: &quot;Christophe&quot;})\r\nMATCH (s:Song {title: &quot;Numb&quot;})\r\nRETURN n, s\r\n```\r\n\r\nIt will find there is an existing relationship between them in the background and will fetch it from the database and display it\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/f1cL7.png\r\n  [2]: https://i.stack.imgur.com/TcVZr.png",
          "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server/77631068#77631068",
          "title": "Neo4j Web Browser : Display phantom data (data does not exists on server)"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23070531,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/276537b5cf8e3551b79763bb76d1b391?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Nizar",
        "link": "https://stackoverflow.com/users/23070531/nizar"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702324398,
      "creation_date": 1702117013,
      "last_edit_date": 1702324398,
      "question_id": 77630912,
      "share_link": "https://stackoverflow.com/q/77630912",
      "body_markdown": "We observe unexplainable behaviour with Neo4j Web Browser.\r\n\r\n- Cypher query return only 3 relationships but the web browser display 5.\r\n\r\n- As you can see, on the right side we have this text : Displaying 4 Nodes, 3 rel\r\n  But the graph shows 5 rel.\r\n\r\n- The table Tab in the Web Browser shows 3 records and the cypher results return 3 rel\r\n\r\n- We observe this behaviors with other queries, it&#39;s not only for the query shared here.\r\n\r\n- When we refresh the Neo4j WebBrowser (reload/refresh the chrome browser tab), sometimes we have the display with the right data, sometimes not\r\n\r\n![a snapshot to help to inderstand](https://i.stack.imgur.com/qVgc9.png)\r\n\r\nPS : we run 5.14.0 community version and Neo4j Web Browser 5.12.0\r\n\r\nRegards,\r\nNizar",
      "link": "https://stackoverflow.com/questions/77630912/neo4j-web-browser-display-phantom-data-data-does-not-exists-on-server",
      "title": "Neo4j Web Browser : Display phantom data (data does not exists on server)"
    },
    {
      "tags": ["neo4j", "cypher", "graph-databases", "graph-data-science"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702324318,
              "post_id": 77622086,
              "comment_id": 136879893,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136879893_77622086"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702505295,
              "post_id": 77622086,
              "comment_id": 136906245,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136906245_77622086"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702507831,
              "post_id": 77622086,
              "comment_id": 136906547,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136906547_77622086"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702509772,
              "post_id": 77622086,
              "comment_id": 136906751,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136906751_77622086"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "last_editor": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1702509977,
          "last_edit_date": 1702509977,
          "creation_date": 1701970942,
          "answer_id": 77622086,
          "question_id": 77621751,
          "share_link": "https://stackoverflow.com/a/77622086",
          "body_markdown": "The frequency of graph changes will determine if you should batch or not.\r\n\r\nTo your main question, FastRP depends on a node and its neighbors, the neighbors of those, the neighbors of those, etc.\r\n\r\nThere&#39;s a configuration parameter IterationWeights which does two things:\r\n1. Determines the number of neighbor-neighbor-neighbors to look at.\r\n2. Determines how relevant each degree of separation is.\r\n\r\nIf you set IterationWeights to [1.0], FastRP will only look at immediate neighbors.\r\n\r\n&lt;s&gt;If you use [0.0, 1.0] then first and second-degree neighbors will be used, weighted equally.&lt;/s&gt;\r\n\r\nThe above should be more accurately stated as &quot;The first iteration looks only at direct neighbors. The second iteration looks at direct and 2nd degree neighbors. Using [0.0, 1.0] set the number of iterations at 2 and means the second iteration results will be used exclusively.&quot; It was not correct to say &quot;weighted equally.&quot;\r\n\r\nTo update your embeddings when changes occur, let&#39;s say you&#39;re using second-degree neighbors and your node A changes. Create a projection with just A, its neighbors and neighbor-neighbors, and run FastRP in write mode.\r\n\r\nSame idea for batch updates, just select the nodes that have changed and everything up to 2 hops out from those.",
          "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#77622086",
          "title": "Updating Neo4j Embeddings on Graph Change"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 21159756,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp7ViXMCr1RVFcrYuGXAB5pQU9wN_yd6j-8qcuOQ=k-s256",
        "display_name": "Chetra Abeid",
        "link": "https://stackoverflow.com/users/21159756/chetra-abeid"
      },
      "last_editor": {
        "reputation": 25,
        "user_id": 21159756,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp7ViXMCr1RVFcrYuGXAB5pQU9wN_yd6j-8qcuOQ=k-s256",
        "display_name": "Chetra Abeid",
        "link": "https://stackoverflow.com/users/21159756/chetra-abeid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 71,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77622086,
      "answer_count": 1,
      "score": 2,
      "last_activity_date": 1702509977,
      "creation_date": 1701967766,
      "last_edit_date": 1701967834,
      "question_id": 77621751,
      "share_link": "https://stackoverflow.com/q/77621751",
      "body_markdown": "I am using the Neo4j Graph Data Science (GDS) library with Fast Random Projection (FastRP) for graph embeddings. I&#39;m facing challenges in updating these embeddings efficiently in response to frequent graph changes (additions/removals of nodes and edges). I&#39;m particularly interested in understanding the best practices for updating these embeddings - should I opt for incremental updates after each change, or batch processing at regular intervals?\r\n\r\nAdditionally, I&#39;m curious if it&#39;s feasible to update embeddings for only the affected sub-graph while maintaining the integrity and consistency of embeddings as if they were done on the global graph projection.",
      "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change",
      "title": "Updating Neo4j Embeddings on Graph Change"
    },
    {
      "tags": ["python", "neo4j", "graph-databases", "neomodel"],
      "owner": {
        "reputation": 959,
        "user_id": 2338089,
        "user_type": "registered",
        "accept_rate": 81,
        "profile_image": "https://www.gravatar.com/avatar/4803ef48161c24d8ef58edfaff009d50?s=256&d=identicon&r=PG",
        "display_name": "adam",
        "link": "https://stackoverflow.com/users/2338089/adam"
      },
      "last_editor": {
        "reputation": 959,
        "user_id": 2338089,
        "user_type": "registered",
        "accept_rate": 81,
        "profile_image": "https://www.gravatar.com/avatar/4803ef48161c24d8ef58edfaff009d50?s=256&d=identicon&r=PG",
        "display_name": "adam",
        "link": "https://stackoverflow.com/users/2338089/adam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1702068004,
      "creation_date": 1701964628,
      "last_edit_date": 1702068004,
      "question_id": 77621416,
      "share_link": "https://stackoverflow.com/q/77621416",
      "body_markdown": "I&#39;m trying to create a graph where multiple node types can have the same type of relationship between them. \r\nI have 5 node types; Group (spelled out below), Alias, Software, Technique &amp; Tool. They&#39;re all basically set up the same way with the same properties, I&#39;m just leaving them out for readability. \r\n\r\n```\r\nclass Group(StructuredNode):\r\n    created = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    description = StringProperty()\r\n    ID = StringProperty(index=True)\r\n    modified = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    name = StringProperty(unique_index=True, required=True)\r\n    TYPE = StringProperty(index=True, default=&#39;review&#39;)\r\n    version = IntegerProperty(default=5)\r\n    #relationship properties go here \r\n\r\nclass Alias(StructuredNode):\r\n    name = StringProperty(unique_index=True, required=True)\r\n    TYPE = StringProperty(index=True, default=&#39;review&#39;)\r\n    #relationship properties go here\r\n    \r\nclass Software(StructuredNode):\r\n    created = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    description = StringProperty()\r\n    ID = StringProperty(index=True)\r\n    modified = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    name = StringProperty(unique_index=True, required=True)\r\n    TYPE = StringProperty(index=True, default=&#39;review&#39;)\r\n    version = IntegerProperty(default=None)\r\n    #relationship properties go here\r\n    \r\nclass Technique(StructuredNode):\r\n    created = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    description = StringProperty()\r\n    ID = StringProperty(index=True)\r\n    modified = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    name = StringProperty(unique_index=True, required=True)\r\n    TYPE = StringProperty(index=True, default=&#39;review&#39;)\r\n    version = IntegerProperty(default=None)   \r\n    #relationship properties go here\r\n    \r\nclass Tool(StructuredNode):\r\n    created = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    description = StringProperty()\r\n    ID = StringProperty(index=True)\r\n    modified = DateTimeFormatProperty(default_now=True, format=&quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)\r\n    name = StringProperty(unique_index=True, required=True)\r\n    TYPE = StringProperty(index=True, default=&#39;review&#39;)\r\n    version = IntegerProperty(default=None) \r\n    #relationship properties go here\r\n```\r\n   I&#39;d like to do something like below where I include a list of all of the possible node types when setting relationships:\r\n``` \r\n    uses = RelationshipTo([&#39;Alias&#39;, &#39;Software&#39;, &#39;Technique&#39;, &#39;Tool&#39;], &#39;USES&#39;)  \r\n    alias = RelationshipTo([&#39;Software&#39;, &#39;Technique&#39;, &#39;Tool&#39;], &#39;ALIAS&#39;)\r\n    revoked_by = RelationshipTo([&#39;Alias&#39;, &#39;Software&#39;, &#39;Technique&#39;, &#39;Tool&#39;], &#39;REVOKED-BY&#39;)\r\n```\r\nRather than having to spell out each different relationship type for each node:\r\n```\r\n   usesalias = RelationshipTo(&#39;Alias&#39;, &#39;USES&#39;)\r\n   usestool = RelationshipTo(&#39;Tool&#39;, &#39;USES&#39;)\r\n   usestechnique = RelationshipTo(&#39;Technique&#39;, &#39;USES&#39;)\r\n   usessoftware = RelationshipTo(&#39;Software&#39;, &#39;USES&#39;)\r\n\r\n   aliassoftware = RelationshipTo(&#39;Software&#39;, &#39;Alias&#39;)\r\n   aliastool = RelationshipTo(&#39;Tool&#39;, &#39;Alias&#39;)\r\n   aliastechnique = RelationshipTo(&#39;Technique&#39;, &#39;Alias&#39;)\r\n\r\n   rbalias = RelationshipTo(&#39;Alias&#39;, &#39;REVOKED-BY&#39;)\r\n   rbtool = RelationshipTo(&#39;Tool&#39;, &#39;REVOKED-BY&#39;)\r\n   rbtechnique = RelationshipTo(&#39;Technique&#39;, &#39;REVOKED-BY&#39;)\r\n   rbsoftware = RelationshipTo(&#39;Software&#39;, &#39;REVOKED-BY&#39;)\r\n   \r\n   ......\r\n\r\n```",
      "link": "https://stackoverflow.com/questions/77621416/is-it-possible-to-include-a-list-of-node-classes-in-a-relationshipto-object-usin",
      "title": "is it possible to include a list of node classes in a relationshipto object using neomodel in python"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701883396,
          "creation_date": 1701883396,
          "answer_id": 77615121,
          "question_id": 77614613,
          "share_link": "https://stackoverflow.com/a/77615121",
          "body_markdown": "Assuming `id` and `type` are properties, this works:\r\n```sql\r\nMATCH (n0 {id: &quot;A&quot;})--(n1 {type:2})--(n2)\r\nWHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\nWITH collect(DISTINCT [n0, n1]) AS r1, collect(DISTINCT [n1, n2]) AS r2\r\nWITH \r\n    COLLECT {\r\n        WITH r1\r\n        UNWIND r1 AS r\r\n        WITH r[0].id AS lhs, &#39;type&#39; + r[1].type AS rhs, count(*) AS num\r\n        RETURN {lhs: lhs, rhs: rhs, num: num }\r\n    } AS first, \r\n    COLLECT {\r\n        WITH r2\r\n        UNWIND r2 AS r\r\n        WITH &#39;type&#39; + r[0].type AS lhs, r[1].id AS rhs, count(*) AS num\r\n        RETURN {lhs: lhs, rhs: rhs, num: num }\r\n    } AS second\r\nUNWIND first + second AS cn\r\nRETURN \r\n    cn.lhs + &#39; to &#39; + cn.rhs + &#39;: &#39; + cn.num + \r\n    CASE \r\n      WHEN cn.num = 1 THEN &#39; connection&#39; \r\n      ELSE &#39; connections&#39; \r\n    END AS result\r\n```\r\nIt&#39;s not pretty ...",
          "link": "https://stackoverflow.com/questions/77614613/count-distinct-node-pairings-in-a-multihop-match/77615121#77615121",
          "title": "Count distinct node pairings in a multihop match"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701900782,
          "creation_date": 1701900782,
          "answer_id": 77616605,
          "question_id": 77614613,
          "share_link": "https://stackoverflow.com/a/77616605",
          "body_markdown": "This query might suffice (it repeats the same `A_to_type2` count in each result row):\r\n\r\n    MATCH ({id: &quot;A&quot;})-[r1]-({type:2})-[r2]-(n2)\r\n    WHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\n    WITH COUNT(DISTINCT r1) AS A_to_type2, COLLECT({n2Id: n2.id, r2: r2}) AS data\r\n    UNWIND data AS d\r\n    RETURN A_to_type2, d.n2Id AS n2Id, COUNT(DISTINCT d.r2) AS type2_to_n2Id\r\n\r\nOutput for your sample data:\r\n\r\n    ╒══════════╤════╤═════════════╕\r\n    │A_to_type2│n2Id│type2_to_n2Id│\r\n    ╞══════════╪════╪═════════════╡\r\n    │2         │&quot;D&quot; │2            │\r\n    ├──────────┼────┼─────────────┤\r\n    │2         │&quot;E&quot; │1            │\r\n    └──────────┴────┴─────────────┘\r\n\r\nOr, to return a single row with a collection of the type2_to_n2Id counts:\r\n\r\n    MATCH ({id: &quot;A&quot;})-[r1]-({type:2})-[r2]-(n2)\r\n    WHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\n    WITH COUNT(DISTINCT r1) AS A_to_type2, COLLECT({n2Id: n2.id, r2: r2}) AS data\r\n    UNWIND data AS d\r\n    WITH A_to_type2, d.n2Id AS n2Id, COUNT(DISTINCT d.r2) AS cnt\r\n    RETURN A_to_type2, COLLECT({n2Id: n2Id, count: cnt}) AS type2_to_n2Id\r\n\r\nSample result:\r\n\r\n    ╒══════════╤══════════════════════════════════════════════╕\r\n    │A_to_type2│type2_to_n2Id                                 │\r\n    ╞══════════╪══════════════════════════════════════════════╡\r\n    │2         │[{count: 2, n2Id: &quot;D&quot;}, {count: 1, n2Id: &quot;E&quot;}]│\r\n    └──────────┴──────────────────────────────────────────────┘",
          "link": "https://stackoverflow.com/questions/77614613/count-distinct-node-pairings-in-a-multihop-match/77616605#77616605",
          "title": "Count distinct node pairings in a multihop match"
        }
      ],
      "owner": {
        "reputation": 31,
        "user_id": 5868625,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a26d526794bcf8b9755d4cfde3514e42?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "erikejan",
        "link": "https://stackoverflow.com/users/5868625/erikejan"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701900782,
      "creation_date": 1701878441,
      "question_id": 77614613,
      "share_link": "https://stackoverflow.com/q/77614613",
      "body_markdown": "I&#39;m looking to count the number of distinct pairings in query of neighbor&#39;s neighbors. Let say I have a small graph consisting of the following nodes and edges,\r\n\r\n    (id:A, type:1)-&gt;(id:B, type:2)\r\n    (id:A, type:1)-&gt;(id:C, type:2)\r\n    (id:B, type:2)-&gt;(id:D, type:3)\r\n    (id:C, type:2)-&gt;(id:D, type:3)\r\n    (id:C, type:2)-&gt;(id:E, type:3)\r\n\r\nand a pattern to match like,\r\n\r\n    MATCH (n0 {id: A})--(n1:2)--(n2)\r\n    WHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\n\r\nI am looking for a query that will count the distinct pairings along this 2-hop pattern. In other words, the expected answer would give the counts,\r\n\r\n    A to type2   : 2 connections\r\n    type2 to D   : 2 connections\r\n    type2 to E   : 1 connection",
      "link": "https://stackoverflow.com/questions/77614613/count-distinct-node-pairings-in-a-multihop-match",
      "title": "Count distinct node pairings in a multihop match"
    },
    {
      "tags": [
        "neo4j",
        "cypher",
        "graph-databases",
        "shortest-path",
        "neo4j-apoc"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701921554,
          "post_id": 77608911,
          "comment_id": 136835752,
          "link": "https://stackoverflow.com/questions/77608911/shortest-path-of-weighted-and-directed-graph-in-neo4j#comment136835752_77608911"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701812532,
          "creation_date": 1701812532,
          "answer_id": 77609396,
          "question_id": 77608911,
          "share_link": "https://stackoverflow.com/a/77609396",
          "body_markdown": "If you want to only find paths where the relationships are in one direction e.g. outbound, you can either prepend `&lt;` to the relationship type for inbound, or append `&gt;` for outbound. \r\n\r\nTo only follow outbound `ROAD_SEGMENT` relationships, your query would become:\r\n```sql\r\nMATCH (a:Address)-[:NEAREST_INTERSECTION]-&gt;(source:Intersection)\r\nWHERE a.full_address CONTAINS &quot;410 E 5TH AVE SAN MATEO, CA&quot;\r\nMATCH (poi:Address)-[:NEAREST_INTERSECTION]-&gt;(dest:Intersection) \r\nWHERE poi.full_address CONTAINS &quot;39 GRAND BLVD SAN MATEO, CA&quot;\r\nCALL apoc.algo.aStarConfig(source, dest, &quot;ROAD_SEGMENT&gt;&quot;, \r\n  {pointPropName: &quot;location&quot;, weight: &quot;length&quot;}) \r\nYIELD weight, path\r\nRETURN *\r\n``` ",
          "link": "https://stackoverflow.com/questions/77608911/shortest-path-of-weighted-and-directed-graph-in-neo4j/77609396#77609396",
          "title": "Shortest path of weighted and directed graph in Neo4j"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23048059,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/07bf9a2ad417d0989b6e131f6125237e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "strzelaczbramek9",
        "link": "https://stackoverflow.com/users/23048059/strzelaczbramek9"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1701812532,
      "creation_date": 1701805911,
      "question_id": 77608911,
      "share_link": "https://stackoverflow.com/q/77608911",
      "body_markdown": "I created a map of city in Neo4j using OpenStreetMap and OpenAddresses data. I want to find the shortest path from one address to another. The problem is that, when I&#39;m using function apoc.algo.aStarConfig,I&#39;m getting a path without consideration about direction of a relationship.\r\n\r\n\r\n```\r\nMATCH (a:Address)-[:NEAREST_INTERSECTION]-&gt;(source:Intersection)\r\nWHERE a.full_address CONTAINS &quot;410 E 5TH AVE SAN MATEO, CA&quot;\r\nMATCH (poi:Address)-[:NEAREST_INTERSECTION]-&gt;(dest:Intersection) \r\nWHERE poi.full_address CONTAINS &quot;39 GRAND BLVD SAN MATEO, CA&quot;\r\nCALL apoc.algo.aStarConfig(source, dest, &quot;ROAD_SEGMENT&quot;, \r\n  {pointPropName: &quot;location&quot;, weight: &quot;length&quot;}) \r\nYIELD weight, path\r\nRETURN *\r\n```\r\n[Result of the query](https://i.stack.imgur.com/nTytn.png)\r\n\r\n\r\n**So my question is if there is a possibility to find the shortest path from one path to another not consider upstream relathionships?**",
      "link": "https://stackoverflow.com/questions/77608911/shortest-path-of-weighted-and-directed-graph-in-neo4j",
      "title": "Shortest path of weighted and directed graph in Neo4j"
    },
    {
      "tags": ["graph", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1701806147,
          "post_id": 77608338,
          "comment_id": 136820331,
          "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j#comment136820331_77608338"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701809782,
              "post_id": 77608932,
              "comment_id": 136820859,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136820859_77608932"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701811366,
              "post_id": 77608932,
              "comment_id": 136821085,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821085_77608932"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701813625,
              "post_id": 77608932,
              "comment_id": 136821434,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821434_77608932"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701813805,
              "post_id": 77608932,
              "comment_id": 136821455,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821455_77608932"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701815809,
              "post_id": 77608932,
              "comment_id": 136821715,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821715_77608932"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701806107,
          "creation_date": 1701806107,
          "answer_id": 77608932,
          "question_id": 77608338,
          "share_link": "https://stackoverflow.com/a/77608932",
          "body_markdown": "With the first query, you are probably getting an error telling you that `classId` is not defined. In which case, no nodes are being created.\r\n\r\nIf you are just looking to test the properties of the first created node, you can modify your existing query to declare a variable e.g. `n` in the node pattern. You can then access node properties with the dot notation in the `RETURN` clause:\r\n```sql\r\nLOAD CSV WITH HEADERS FROM &#39;file:///Badges.csv&#39; AS row\r\nCREATE (n:Badges {\r\n  classid: toInteger(row.Class),\r\n  name: row.Name,\r\n  badgeId: toInteger(row.Id)\r\n})\r\nRETURN n.classid, n.name, n.badgeId \r\nLIMIT 1;\r\n```",
          "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#77608932",
          "title": "I can not import from csv files into Neo4j"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 10190562,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "mahsa tajik",
        "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
      },
      "last_editor": {
        "reputation": 12099,
        "user_id": 6277104,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/281d013ae92cf356889bec95c6098682?s=256&d=identicon&r=PG",
        "display_name": "SternK",
        "link": "https://stackoverflow.com/users/6277104/sternk"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 51,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1701892291,
      "creation_date": 1701799094,
      "last_edit_date": 1701892291,
      "question_id": 77608338,
      "share_link": "https://stackoverflow.com/q/77608338",
      "body_markdown": "```sql\r\n// BadgesNode\r\nLOAD CSV WITH HEADERS FROM &#39;file:///Badges.csv&#39; AS row\r\nCREATE (:Badges {\r\n  classid: toInteger(row.Class),\r\n  name: row.Name,\r\n  badgeId: toInteger(row.Id)\r\n})\r\nWITH *\r\nLIMIT 1\r\nRETURN classid, name, badgeId;\r\n```\r\n\r\nwhen I run it, there is no value in the properties. But when I run this cypher \r\n\r\n```sql\r\nLOAD CSV WITH HEADERS FROM &#39;file:///Badges.csv&#39; AS row\r\nRETURN row\r\n```\r\n\r\nand this is the result that it returns:\r\n```json\r\n{\r\n  &quot;Name&quot;: &quot;Informed&quot;,\r\n  &quot;Date&quot;: &quot;2014-05-13 23:06&quot;,\r\n  &quot;Class&quot;: &quot;3&quot;,\r\n  &quot;Id&quot;: &quot;1&quot;,\r\n  &quot;UserId&quot;: &quot;1&quot;,\r\n  &quot;TagBased&quot;: &quot;FALSE&quot;\r\n}\r\n```\r\n\r\n\r\nI can not understand why the first cypher does not return values into the properties. Can somebody help me. I stuck in this part for two days. \r\n\r\nI need to fill the properties by the values in the csv file.\r\nAnd this is a subset of my csv file.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/834Hw.png",
      "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j",
      "title": "I can not import from csv files into Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 437,
            "user_id": 5831358,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Marj",
            "link": "https://stackoverflow.com/users/5831358/marj"
          },
          "edited": false,
          "score": 2,
          "creation_date": 1701428084,
          "post_id": 77577493,
          "comment_id": 136777083,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136777083_77577493"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1701913849,
          "post_id": 77577493,
          "comment_id": 136835176,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136835176_77577493"
        },
        {
          "owner": {
            "reputation": 35,
            "user_id": 22289882,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
            "display_name": "Sharon ",
            "link": "https://stackoverflow.com/users/22289882/sharon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702020469,
          "post_id": 77577493,
          "comment_id": 136848854,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136848854_77577493"
        },
        {
          "owner": {
            "reputation": 35,
            "user_id": 22289882,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
            "display_name": "Sharon ",
            "link": "https://stackoverflow.com/users/22289882/sharon"
          },
          "reply_to_user": {
            "reputation": 437,
            "user_id": 5831358,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Marj",
            "link": "https://stackoverflow.com/users/5831358/marj"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702022737,
          "post_id": 77577493,
          "comment_id": 136849162,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136849162_77577493"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702369745,
              "post_id": 77642610,
              "comment_id": 136884547,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136884547_77642610"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702374231,
              "post_id": 77642610,
              "comment_id": 136885349,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136885349_77642610"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702416818,
              "post_id": 77642610,
              "comment_id": 136893026,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136893026_77642610"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702451788,
              "post_id": 77642610,
              "comment_id": 136896894,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136896894_77642610"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1702332090,
          "creation_date": 1702332090,
          "answer_id": 77642610,
          "question_id": 77577493,
          "share_link": "https://stackoverflow.com/a/77642610",
          "body_markdown": "Based on your comments, I will assume your data model looks something like this (nodes can have more properties than shown):\r\n\r\n    (:Complaints {complaint_id: 7})-[:Complaint_Details_complaint_id]-&gt;(:Complaint_Details {complaint_id: 7, detail_id: 123})--&gt;(:Foo {detail_id: 123})\r\n\r\nWhere `Foo` is just one of any number of labels for the child nodes of a `Complaint_Details` node.\r\n\r\nIn that case, when deleting a `Complaints` node you can also delete its `Complaint_Details` nodes and remove the `detail_id` properties of their children this way:\r\n\r\n    MATCH (c:Complaints)-[:Complaint_Details_complaint_id]-&gt;(d:Complaint_Details)\r\n    WHERE c.complaint_id = $complaint_id\r\n    OPTIONAL MATCH (d)--&gt;(f)\r\n    REMOVE f.details_id\r\n    DETACH DELETE d, c\r\n\r\nThe query assumes that the desired `complaint_id` value is passed as a `$complaint_id` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/).",
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#77642610",
          "title": "In Neo4j I want to obtain the path emerging from a particular node,I then want to iterate each node in the path and delete it based on stored action"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 80,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702332090,
      "creation_date": 1701338493,
      "last_edit_date": 1701913927,
      "question_id": 77577493,
      "share_link": "https://stackoverflow.com/q/77577493",
      "body_markdown": "I am doing a project of converting MySQL tables to Neo4j graph.After conversion I am replicating the delete action of the SQL Database using java in the graph.So when I delete a record in my SQL database,I want to delete the nodes related to that particular record.For example I am deleting from table Complaints with complaint_id=7.Complaint_Details is a child table of Complaints with  ON DELETE CASCADE Action .This further has another child table with ON DELETE SET NULL Action.So in the graph I want to delete the Complaint node with complaint_id = 7,Complaint_Details node with complaint_id =7 and the removal of the respective property of  its child nodes.\r\n\r\nMy current approach is to query the path from Node complaint with complaint_id 7 using \r\n String cypherPath = &quot;MATCH path=(n:&quot; + tableName + &quot;{&quot; + columnName + &quot;:&quot; + PkValue + &quot;})-[*]-&gt;(m) WHERE NOT EXISTS((m)-[]-&gt;()) RETURN path&quot;;\r\nThen i am iterating through each node and checking the database for its action on deletion.Based on that action I am either deleting the node or removing a property.\r\nThis method takes up a lot of time (around 5s for 2000 records)\r\nIs there a more efficient way to do this?",
      "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t",
      "title": "In Neo4j I want to obtain the path emerging from a particular node,I then want to iterate each node in the path and delete it based on stored action"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701790221,
          "post_id": 77576343,
          "comment_id": 136817513,
          "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query#comment136817513_77576343"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701914322,
              "post_id": 77576432,
              "comment_id": 136835226,
              "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77576432#comment136835226_77576432"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": -1,
                "user_type": "moderator",
                "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
                "display_name": "Community",
                "link": "https://stackoverflow.com/users/-1/community"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701948646,
              "post_id": 77576432,
              "comment_id": 136839294,
              "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77576432#comment136839294_77576432"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 6275738,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-FxqHo1AG_G0/AAAAAAAAAAI/AAAAAAAAAIw/pSFQVbBMydg/photo.jpg?sz=256",
            "display_name": "Shakthi Ramalingam",
            "link": "https://stackoverflow.com/users/6275738/shakthi-ramalingam"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701400233,
          "last_edit_date": 1701400233,
          "creation_date": 1701327176,
          "answer_id": 77576432,
          "question_id": 77576343,
          "share_link": "https://stackoverflow.com/a/77576432",
          "body_markdown": "```sql\r\nMATCH (n:Commercial) \r\nWITH count(n) AS grosssales \r\nMATCH (c:Commercial) \r\nWITH grosssales,count(c) AS distinctcustomer, c.customer_id AS customer, tofloat(grosssales/count(c)) AS salesreach \r\nRETURN imp AS grosssales, distinctcustomer, customer, salesreach\r\n```\r\n",
          "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77576432#77576432",
          "title": "Cypher Nested Query"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701916218,
          "creation_date": 1701916218,
          "answer_id": 77617346,
          "question_id": 77576343,
          "share_link": "https://stackoverflow.com/a/77617346",
          "body_markdown": "You can simplify the query by using the new [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/count/) (in neo4j 5.0+) to count the total number of `Commercial` nodes. Although `COUNT()` is an aggregating function, a COUNT subquery is not -- so it is not affected by the `customer` grouping key.\r\n\r\n    MATCH (c:Commercial) \r\n    WITH COUNT{ (:Commercial) } AS grosssales, COUNT(c) AS distinctcustomer, c.customer_id AS customer\r\n    RETURN grosssales, distinctcustomer, customer, TOFLOAT(grosssales/distinctcustomer) AS salesreach\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77617346#77617346",
          "title": "Cypher Nested Query"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 6275738,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-FxqHo1AG_G0/AAAAAAAAAAI/AAAAAAAAAIw/pSFQVbBMydg/photo.jpg?sz=256",
        "display_name": "Shakthi Ramalingam",
        "link": "https://stackoverflow.com/users/6275738/shakthi-ramalingam"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701916218,
      "creation_date": 1701325970,
      "last_edit_date": 1701466068,
      "question_id": 77576343,
      "share_link": "https://stackoverflow.com/q/77576343",
      "body_markdown": "Trying to build nested query in cypher sql to find the grosssale, sales by distinctcustomer and salesreach and not able to pass column 1 value as input to another column - any help would be appreciated.\r\n\r\nSyntax here\r\n\r\n```sql\r\nMATCH (n:Commercial)\r\nWITH (n) AS grosssales, count(n) AS distinctcustomer, \r\n  n.customer_id AS customer, ### grouping by customer_id ###\r\n  grosssale / distinctcustomer AS salesreach\r\nRETURN grossale, distinctcustomer, salesreach, customer_id\r\n```\r\n\r\nTried WITH clause however no joy, would appreciate any help in correcting the cypher syntax.",
      "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query",
      "title": "Cypher Nested Query"
    },
    {
      "tags": ["spring", "neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "last_editor": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1701367829,
          "last_edit_date": 1701367829,
          "creation_date": 1701288939,
          "answer_id": 77574246,
          "question_id": 77571107,
          "share_link": "https://stackoverflow.com/a/77574246",
          "body_markdown": "If you are asking about how to use embedded neo4j in Spring Data Neo4j application, - indeed it is possible, even though officially is [not supported](https://gist.github.com/michael-simons/d3137f64ac0b13713fae8e7e1a69367e?permalink_comment_id=4756611#gistcomment-4756611) (I wonder where it is officially proclaimed). \r\n\r\nThis is how it can be done:\r\n1. Add neo4j to dependencies:\r\n```xml\r\n&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;neo4j&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.13.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n2. Add these beans to your Spring Boot configuration class:\r\n```java\r\n@Bean\r\n\tpublic Configuration cypherDslConfiguration() {\r\n\t\treturn Configuration.newConfig().withDialect(Dialect.NEO4J_5).build();\r\n\t}\r\n\r\n//https://neo4j.com/docs/java-reference/current/java-embedded/setup/\r\n@Bean\r\npublic DatabaseManagementService databaseManagementService() {\r\n\tDatabaseManagementService managementService = new \r\n\t\tDatabaseManagementServiceBuilder(new File(&quot;target/mydb&quot;).toPath())\r\n\t\t\t.setConfig(GraphDatabaseSettings.transaction_timeout, Duration.ofSeconds( 60 ) )\r\n\t\t\t.setConfig( BoltConnector.enabled, true )\r\n\t\t\t.setConfig(BoltConnector.encryption_level, BoltConnector.EncryptionLevel.DISABLED)\r\n\t\t\t.build();\r\n\t\r\n\tregisterShutdownHook(managementService);\r\n\treturn managementService;\r\n}\r\n\r\n@Bean\r\npublic GraphDatabaseService graphDatabaseService(DatabaseManagementService managementService) {\r\n\tGraphDatabaseService graphDb =\r\n\t\tmanagementService.database(GraphDatabaseSettings.DEFAULT_DATABASE_NAME);\r\n\tlog.info(&quot;Neo4j database Embedded instance is available: {}&quot;, graphDb.isAvailable());\r\n\treturn graphDb;\r\n}\r\nprivate static void registerShutdownHook(final DatabaseManagementService managementService) {\r\n\tRuntime.getRuntime().addShutdownHook(new Thread() {\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\tmanagementService.shutdown();\r\n\t\t}\r\n\t});\r\n}\r\n```\r\n3. Annotate your Spring Boot `@SpringBootApplication` with `@EnableNeo4jRepositories`.\r\n4. SDN repositories now will work. \r\n\r\nFully working example can be found [in this Gist](https://gist.github.com/Podbrushkin/54518ad6c4835706fd3344f01ea6acc9),  place those files in correct subdirectories and execute `mvn clean spring-boot:run`, you will see repositories are working. Application will break only if you will enable HttpConnector.\r\n\r\nI hope this is what you&#39;ve asked for.\r\n\r\nduplicate: https://stackoverflow.com/questions/76901420/how-to-connect-spring-data-neo4j-to-embedded-neo4j-server",
          "link": "https://stackoverflow.com/questions/77571107/spring-boot-neo4j/77574246#77574246",
          "title": "Spring Boot neo4j"
        }
      ],
      "owner": {
        "reputation": 173,
        "user_id": 20036372,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a60111308ed533786c6b22b8d82d3db6?s=256&d=identicon&r=PG",
        "display_name": "asfarasiknow",
        "link": "https://stackoverflow.com/users/20036372/asfarasiknow"
      },
      "last_editor": {
        "reputation": 173,
        "user_id": 20036372,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a60111308ed533786c6b22b8d82d3db6?s=256&d=identicon&r=PG",
        "display_name": "asfarasiknow",
        "link": "https://stackoverflow.com/users/20036372/asfarasiknow"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 71,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77574246,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703852385,
      "creation_date": 1701260419,
      "last_edit_date": 1703852385,
      "question_id": 77571107,
      "share_link": "https://stackoverflow.com/q/77571107",
      "body_markdown": "I want to use the built-in neo4j. I know that neo4j has a built-in neo4j driver for java, but it is not supported by `spring data neo4j`\r\n ",
      "link": "https://stackoverflow.com/questions/77571107/spring-boot-neo4j",
      "title": "Spring Boot neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701191812,
          "post_id": 77565696,
          "comment_id": 136743815,
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi#comment136743815_77565696"
        },
        {
          "owner": {
            "reputation": 2030,
            "user_id": 988324,
            "user_type": "registered",
            "accept_rate": 65,
            "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
            "display_name": "Richard Deurwaarder",
            "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701191879,
          "post_id": 77565696,
          "comment_id": 136743829,
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi#comment136743829_77565696"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701193030,
          "post_id": 77565696,
          "comment_id": 136744039,
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi#comment136744039_77565696"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701192605,
              "post_id": 77565897,
              "comment_id": 136743970,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136743970_77565897"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701192904,
              "post_id": 77565897,
              "comment_id": 136744016,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136744016_77565897"
            },
            {
              "owner": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701193355,
              "post_id": 77565897,
              "comment_id": 136744085,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136744085_77565897"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701202870,
              "post_id": 77565897,
              "comment_id": 136745647,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136745647_77565897"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1701202839,
          "last_edit_date": 1701202839,
          "creation_date": 1701192069,
          "answer_id": 77565897,
          "question_id": 77565696,
          "share_link": "https://stackoverflow.com/a/77565897",
          "body_markdown": "To follow all paths composed of relationships with either type `Sync` and direction outbound, or type `Async` and direction inbound, the following [quantified path pattern][1] will work:\r\n```sql\r\nMATCH (s {type: &#39;service&#39;}) \r\n        ((n)-[r]-() WHERE (n = startNode(r) AND r:Sync) \r\n          OR (n = endNode(r) AND r:Async))+ (dependent)\r\nRETURN s, collect(DISTINCT dependent) AS allDependentNodes\r\n```\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/patterns/concepts/#quantified-path-patterns",
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#77565897",
          "title": "How to match nodes in Cypher query based on different directions per relationship type"
        }
      ],
      "owner": {
        "reputation": 2030,
        "user_id": 988324,
        "user_type": "registered",
        "accept_rate": 65,
        "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
        "display_name": "Richard Deurwaarder",
        "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77565897,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1701202839,
      "creation_date": 1701190063,
      "question_id": 77565696,
      "share_link": "https://stackoverflow.com/q/77565696",
      "body_markdown": "I&#39;ve got a graph with two types of relationships: `Sync` and `Async`.\r\n\r\nI want a query to give me a subgraph, meaning all the nodes that can be reached directly or indirectly.\r\n\r\nThis query works for this:\r\n\r\n    MATCH (s {type: &#39;service&#39;)\r\n    OPTIONAL MATCH (s)-[:Async|Sync*]-&gt;(dependent)\r\n    WITH s, COLLECT(DISTINCT dependent) AS allDependentNodes\r\n\r\nThis gives me every node that can be reached via an Sync or Async relationship.\r\n\r\n\r\nBut now I&#39;d like to use a different direction based on the type of relation. I want nodes that can be reached via outgoing Sync `a -&gt; b` OR reached via incoming Async `a &lt;- b`.  \r\n\r\nSo it&#39;s like an OR&#39;d match condition. I&#39;ve tried a few things without much success:\r\n\r\n    MATCH (s {type: &#39;service&#39;)\r\n    OPTIONAL MATCH (s)-[:Sync*]-&gt;(dependent), (s)&lt;-[:Async*]-(d)\r\n    WITH s, totalNodes, COLLECT(DISTINCT dependent) AS allDependentNodes\r\n\r\n\r\nHow can I OR&#39;d together relationship matches or how can I match different types of relationships with different directions?",
      "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi",
      "title": "How to match nodes in Cypher query based on different directions per relationship type"
    },
    {
      "tags": ["neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1701129300,
          "post_id": 77560500,
          "comment_id": 136734663,
          "link": "https://stackoverflow.com/questions/77560500/neo4j-variable-length-relationship-with-intermediary-node#comment136734663_77560500"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 47,
                "user_id": 18073394,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJyEN-n5TpGIABhidOfpIdq3rVAPCr2oRvfpTjsN=k-s256",
                "display_name": "NoraTheFlora",
                "link": "https://stackoverflow.com/users/18073394/noratheflora"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701160667,
              "post_id": 77560648,
              "comment_id": 136737783,
              "link": "https://stackoverflow.com/questions/77560500/neo4j-variable-length-relationship-with-intermediary-node/77560648#comment136737783_77560648"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1701210967,
          "last_edit_date": 1701210967,
          "creation_date": 1701129988,
          "answer_id": 77560648,
          "question_id": 77560500,
          "share_link": "https://stackoverflow.com/a/77560648",
          "body_markdown": "Assuming you want to continuously follow a pattern of sent emails, you could use quantified path patterns to do so:\r\n\r\n```\r\nMATCH (p1:Person where p1.name=&#39;Jeff&#39;) (()-[:EMAIL_FROM]-&gt;(:Email)-[:EMAIL_TO]-&gt;(:Person))+ (p2)\r\nRETURN DISTINCT p2\r\n```\r\n\r\nThis will repeat the last part of the pattern with a lower bound of 1 and no upper bound. For any non-trivial graph this may not finish, and you may have heap issues. We would recommend setting an upper bound if possible.\r\n\r\nAnother approach would be to use APOC Procedures, the path explorer procedures, as those might be more efficient in finding distinct reachable nodes.\r\n\r\n```\r\nMATCH (p1:Person where p1.name=&#39;Jeff&#39;) \r\nCALL apoc.path.subgraphNodes(p1, {relationshipFilter:&#39;EMAIL_FROM&gt;, EMAIL_TO&gt;&#39;, labelFilter:&#39;&gt;Person&#39;}) YIELD node\r\nRETURN node\r\n```\r\n\r\nThis will repeat outgoing :EMAIL_FROM and :EMAIL_TO relationships, returning only :Person nodes, and the uniqueness used by this procedure should only return distinct end nodes.",
          "link": "https://stackoverflow.com/questions/77560500/neo4j-variable-length-relationship-with-intermediary-node/77560648#77560648",
          "title": "Neo4j: Variable-length-relationship with intermediary node"
        }
      ],
      "owner": {
        "reputation": 47,
        "user_id": 18073394,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJyEN-n5TpGIABhidOfpIdq3rVAPCr2oRvfpTjsN=k-s256",
        "display_name": "NoraTheFlora",
        "link": "https://stackoverflow.com/users/18073394/noratheflora"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 37,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77560648,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1701210967,
      "creation_date": 1701127131,
      "question_id": 77560500,
      "share_link": "https://stackoverflow.com/q/77560500",
      "body_markdown": "I have a neo4j database with two types of node labels: person and email.\r\nOne email node always connects two person nodes through the relationships &#39;EMAIL_FROM&#39; and &#39;EMAIL_TO&#39;\r\nsuch that the relationship can be queried like such:\r\n\r\n    match (p1:Person)-[:EMAIL_FROM]-&gt;(:Email)-[:EMAIL_TO]-&gt;(p2:Person) return p1, p2\r\nI&#39;m trying to write a variable-length-relationship query which begins at a certain person node and finds all other person nodes that can be reached through the intermediary email nodes. This is what I tried:\r\n\r\n    match (p1:Person where p1.name=&#39;Jeff&#39;)-[:EMAIL_FROM*]-&gt;(:Email)-[:EMAIL_TO*]-&gt;(p2:Person) return p1, p2\r\nThis sadly does not work as I thought it would and returns only directly reachable from the &#39;Jeff&#39; node by iterating through the pattern once but then it stops although I know the nodes reached in the first iteration have outgoing &#39;EMAIL_FROM&#39; relationships themselves. Thanks in advance.",
      "link": "https://stackoverflow.com/questions/77560500/neo4j-variable-length-relationship-with-intermediary-node",
      "title": "Neo4j: Variable-length-relationship with intermediary node"
    },
    {
      "tags": ["python", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 17082,
            "user_id": 4541045,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/25c642f9dbcaa652334455300ed2622a?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "ti7",
            "link": "https://stackoverflow.com/users/4541045/ti7"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701069632,
          "post_id": 77555016,
          "comment_id": 136724575,
          "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt#comment136724575_77555016"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 22214354,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/96faa0d16e180bc41836018844e66c62?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Jonathan Giffard",
            "link": "https://stackoverflow.com/users/22214354/jonathan-giffard"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701078800,
          "creation_date": 1701078800,
          "answer_id": 77555954,
          "question_id": 77555016,
          "share_link": "https://stackoverflow.com/a/77555954",
          "body_markdown": "Looking at the output from print(dir(connector)) , the message is correct - there is no attribute named &#39;run&#39;\r\n\r\n&gt; [&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;,\r\n&gt; &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getstate__&#39;,\r\n&gt; &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;,\r\n&gt; &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;,\r\n&gt; &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;,\r\n&gt; &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;_driver&#39;, &#39;close&#39;, &#39;driver&#39;]\r\n\r\n\r\nI&#39;d look at connector.driver.execute_query as that will likely achieve what you are looking to do. \r\n\r\n",
          "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt/77555954#77555954",
          "title": "How to fix &quot;Type &#39;Neo4jConnector&#39; doesn&#39;t have expected attribute &#39;run&#39; &quot; in python file"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 19443460,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
                "display_name": "Kevin Paul Babu",
                "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701155109,
              "post_id": 77556024,
              "comment_id": 136736891,
              "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt/77556024#comment136736891_77556024"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 19443460,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
                "display_name": "Kevin Paul Babu",
                "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701166025,
              "post_id": 77556024,
              "comment_id": 136738737,
              "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt/77556024#comment136738737_77556024"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 19443460,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
                "display_name": "Kevin Paul Babu",
                "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701244782,
              "post_id": 77556024,
              "comment_id": 136750244,
              "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt/77556024#comment136750244_77556024"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 19443460,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
                "display_name": "Kevin Paul Babu",
                "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701270935,
              "post_id": 77556024,
              "comment_id": 136755332,
              "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt/77556024#comment136755332_77556024"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1701079458,
          "creation_date": 1701079458,
          "answer_id": 77556024,
          "question_id": 77555016,
          "share_link": "https://stackoverflow.com/a/77556024",
          "body_markdown": "Some of your functions e.g. `edit_inbound_rule` call a method  `run` that the class `Neo4jConnector` does not have. One fix is to work with the GraphDatabase.driver, as is done in `create_inbound_rule`. \r\n\r\nFor example, rewrite `edit_inbound_rule` like so:\r\n```python\r\ndef edit_inbound_rule(connector, new_profile_id, new_message, new_processingflag1):\r\n    s_id = dict[&quot;s_id&quot;]\r\n    return_name = &#39;Rule Edit Successfully&#39;\r\n    query = (\r\n        &quot;MATCH (r:Rule) WHERE r.id_name = $s_id &quot;\r\n        &quot;SET r.profileid = $new_profile_id, &quot;\r\n        &quot;    r.message = $new_message, &quot;\r\n        &quot;    r.processingflag1 = $new_processingflag1 &quot;\r\n    )\r\n\r\n    with connector._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, new_profile_id=new_profile_id,\r\n                  new_message=new_message, new_processingflag1=new_processingflag1, s_id=s_id))\r\n\r\n    return return_name\r\n```",
          "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt/77556024#77556024",
          "title": "How to fix &quot;Type &#39;Neo4jConnector&#39; doesn&#39;t have expected attribute &#39;run&#39; &quot; in python file"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 19443460,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
        "display_name": "Kevin Paul Babu",
        "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
      },
      "last_editor": {
        "reputation": 3459,
        "user_id": 4136999,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/db7988a64f79dc8977b341b36a70a374?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "toyota Supra",
        "link": "https://stackoverflow.com/users/4136999/toyota-supra"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77556024,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701079458,
      "creation_date": 1701068434,
      "last_edit_date": 1701078341,
      "question_id": 77555016,
      "share_link": "https://stackoverflow.com/q/77555016",
      "body_markdown": "This is the code below for connecting and running `neo4j` and python . I have seen a `neo4j` warning from the code . Is that a severe warning or is it mandatory to fix it? How to fix this issue? The warning is `&quot; Type &#39;Neo4jConnector&#39; doesn&#39;t have expected attribute &#39;run&#39; &quot;`\r\n```\r\nfrom neo4j import GraphDatabase\r\n\r\n\r\nclass Neo4jConnector:\r\n    def __init__(self, uri, user, password):\r\n        self._driver = GraphDatabase.driver(uri, auth=(user, password))\r\n\r\n    def close(self):\r\n        self._driver.close()\r\n\r\n    @property\r\n    def driver(self):\r\n        return self._driver\r\n\r\n\r\ndef get_nodes_by_id_name(tx, id_name):\r\n    query = (\r\n        &quot;MATCH (r:Rule) &quot;\r\n        &quot;WHERE r.id_name = $id_name &quot;\r\n        &quot;RETURN r&quot;\r\n    )\r\n    result = []\r\n    for record in tx.run(query, id_name=id_name):\r\n        result.append(record[&quot;node&quot;])\r\n    return result\r\n\r\n\r\ndef create_inbound_rule(connector, profileid, sender, receiver, message, processingflag1, ruletype):\r\n    id_name = receiver + &#39;_inBOUND_&#39; + sender\r\n    name1_inbound = receiver + &#39;_inBOUND_&#39; + sender + &#39;_SFTP_STEP1&#39;\r\n    return_name = name1_inbound + &#39;&amp; SFTP_STEP2 created successfully&#39;\r\n\r\n    query = (\r\n        &quot;CREATE (r:Rule {sender: $sender, receiver: $receiver, &quot;\r\n        &quot;message: $message, profileid: $profileid, ruletype: $ruletype, &quot;\r\n        &quot;processingflag1: $processingflag1,id_name:$id_name})&quot;\r\n    )\r\n\r\n    with connector._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, sender=sender, receiver=receiver,\r\n                                                    message=message, profileid=profileid,\r\n                                                    ruletype=ruletype, processingflag1=processingflag1,\r\n                                                    id_name=id_name))\r\n        return return_name\r\n\r\n\r\ndef create_outbound_rule(connector, profileid_outbound, sender_outbound, receiver_outbound,\r\n                         message_outbound, processingflag1_outbound, filename_output):\r\n    id_name = receiver_outbound + &#39;_outbound_&#39; + sender_outbound\r\n    name1_outbound = receiver_outbound + &#39;_Outbound_&#39; \\\r\n                     + sender_outbound + &#39;_SFTP_STEP1&#39;\r\n    return_name = name1_outbound + &#39;&amp; SFTP_STEP2 created successfully&#39;\r\n    query = (\r\n        &quot;CREATE (r:Rule {sender_outbound: $sender_outbound, receiver_outbound: $receiver_outbound, &quot;\r\n        &quot;message_outbound: $message_outbound, profileid_outbound: $profileid_outbound, &quot;\r\n        &quot;filename_output: $filename_output, &quot;\r\n        &quot;processingflag1_outbound: $processingflag1_outbound,id_name:$id_name})&quot;\r\n    )\r\n\r\n    with connector._driver.session() as session:\r\n        session.write_transaction(\r\n            lambda tx: tx.run(query, sender_outbound=sender_outbound, receiver_outbound=receiver_outbound,\r\n                              message_outbound=message_outbound, profileid_outbound=profileid_outbound,\r\n                              filename_output=filename_output, processingflag1_outbound=processingflag1_outbound,\r\n                              id_name=id_name))\r\n        return return_name\r\n\r\n\r\ndef create_both_rule(connector, inbound_profileid, outbound_profileid, sender, receiver, message, processingflag1,\r\n                     filename, return_name, id_name):\r\n    query = (\r\n        &quot;CREATE (r:Rule {sender: $sender, receiver: $receiver, &quot;\r\n        &quot;message: $message, inbound_profileid: $inbound_profileid, outbound_profileid: $outbound_profileid, &quot;\r\n        &quot;processingflag1: $processingflag1, filename: $filename,id_name:$id_name})&quot;\r\n    )\r\n\r\n    with connector._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, sender=sender, receiver=receiver,\r\n                                                    message=message, inbound_profileid=inbound_profileid,\r\n                                                    outbound_profileid=outbound_profileid,\r\n                                                    processingflag1=processingflag1,\r\n                                                    filename=filename, id_name=id_name))\r\n        return return_name\r\n\r\n\r\ndef create_inbound_basictx_rule(connector, tradingpartner_basictx, profileid_basictx, processingflag1_basictx, id_name):\r\n    name1_basictx = &quot;1.0.0_ELUX_INBOUND_RECEIVE_FROM_&quot; + tradingpartner_basictx + &quot;_SFTP_TO_BASICTX&quot;\r\n    name2_basictx = &quot;1.0.2_ELUX_GENERIC_IN_FLAT_FILE_&quot; + processingflag1_basictx + &quot;_BASICTX_TO_CC_FINISH&quot;\r\n    return_name = name1_basictx + name2_basictx + &quot;created successfully&quot;\r\n    query = (\r\n        &quot;CREATE (r:Rule {TradingPartner: $tradingpartner_basictx, profileid: $profileid_basictx, &quot;\r\n        &quot;processingflag1_basictx: $processingflag1_basictx,id_name:$id_name})&quot;\r\n    )\r\n\r\n    with connector._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, tradingpartner_basictx=tradingpartner_basictx,\r\n                                                    profileid_basictx=profileid_basictx,\r\n                                                    processingflag1_basictx=processingflag1_basictx, id_name=id_name))\r\n    return return_name\r\n\r\n\r\ndef create_outbound_basictx_rule(connector, tradingpartner_basictx, profileid_basictx, processingflag1_basictx,\r\n                                 id_name):\r\n    name1_basictx = &quot;1.0.0_ELUX_OUTBOUND_RECEIVE_FROM_&quot; + tradingpartner_basictx + &quot;_SFTP_TO_BASICTX&quot;\r\n    name2_basictx = &quot;1.0.2_ELUX_GENERIC_IN_FLAT_FILE_&quot; + processingflag1_basictx + &quot;_BASICTX_TO_CC_FINISH&quot;\r\n    return_name = name1_basictx + name2_basictx + &quot;created successfully&quot;\r\n    query = (\r\n        &quot;CREATE (r:Rule {TradingPartner: $tradingpartner_basictx, profileid: $profileid_basictx, &quot;\r\n        &quot;processingflag1: $processingflag1_basictx,id_name:$id_name})&quot;\r\n    )\r\n    with connector._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, tradingpartner_basictx=tradingpartner_basictx,\r\n                                                    profileid_basictx=profileid_basictx,\r\n                                                    processingflag1_basictx=processingflag1_basictx, id_name=id_name))\r\n        return return_name\r\n\r\n\r\ndef edit_inbound_rule(connector, new_profile_id, new_message, new_processingflag1):\r\n    s_id = dict[&quot;s_id&quot;]\r\n    return_name = &#39;Rule Edit Successfully&#39;\r\n    query = (\r\n        &quot;MATCH (r:Rule) WHERE r.id_name = $s_id &quot;\r\n        &quot;SET r.profileid = $new_profile_id, &quot;\r\n        &quot;    r.message = $new_message, &quot;\r\n        &quot;    r.processingflag1 = $new_processingflag1 &quot;\r\n    )\r\n    connector.run(query, new_profile_id=new_profile_id,\r\n                  new_message=new_message, new_processingflag1=new_processingflag1, s_id=s_id)\r\n\r\n    return return_name\r\n\r\n\r\ndef edit_outbound_rule(connector, new_profile_id, new_message, new_processing_flag, new_filename):\r\n    s_id = dict[&quot;s_id&quot;]\r\n    return_name = &#39;Rule Edit Successfully&#39;\r\n    query = (\r\n        &quot;MATCH (r:Rule) WHERE r.id_name = $id_name &quot;\r\n        &quot;SET r.profileid_outbound = $new_profile_id, &quot;\r\n        &quot;    r.message_outbound = $new_message, &quot;\r\n        &quot;    r.processingflag1_outbound = $new_processing_flag, &quot;\r\n        &quot;    r.filename_output = $new_filename&quot;\r\n    )\r\n    connector.run(query, return_name=return_name, new_profile_id=new_profile_id,\r\n                  new_message=new_message, new_processing_flag=new_processing_flag,\r\n                  new_filename=new_filename, s_id_name=s_id)\r\n\r\n\r\ndef edit_both_rule(connector, new_inbound_profile_id, new_outbound_profile_id, new_message,\r\n                   new_processing_flag,\r\n                   new_filename):\r\n    s_id = dict[&quot;s_id&quot;]\r\n    return_name = &#39;Rule Edit Successfully&#39;\r\n    query = (\r\n        &quot;MATCH (r:Rule) WHERE r.id_name = $s_id &quot;\r\n        &quot;SET r.inbound_profileid_both = $new_inbound_profile_id, &quot;\r\n        &quot;    r.outbound_profileid_both = $new_outbound_profile_id, &quot;\r\n        &quot;    r.message_both = $new_message, &quot;\r\n        &quot;    r.processingflag1_both= $new_processing_flag, &quot;\r\n        &quot;    r.filename_both = $new_filename&quot;\r\n    )\r\n    connector.run(query, new_inbound_profile_id=new_inbound_profile_id,\r\n                  new_outbound_profile_id=new_outbound_profile_id, new_message=new_message,\r\n                  new_processing_flag=new_processing_flag, new_filename=new_filename, s_id_=s_id)\r\n\r\n    return return_name\r\n\r\n\r\ndef edit_inbound_basictx_rule(connector, new_tradingpartner, new_profile_id, new_processing_flag):\r\n    s_id = dict[&quot;s_id&quot;]\r\n    return_name = &#39;Rule Edit Successfully&#39;\r\n    query = (\r\n        &quot;MATCH (r:Rule) WHERE r.id_name = $s_id &quot;\r\n        &quot;SET r.tradingpartner = $new_tradingpartner, &quot;\r\n        &quot;    r.profile_id = $new_profile_id, &quot;\r\n        &quot;    r.processing_flag = $new_processing_flag&quot;\r\n    )\r\n    connector.run(query, new_tradingpartner=new_tradingpartner,\r\n                  new_profile_id=new_profile_id, new_processing_flag=new_processing_flag, s_id=s_id)\r\n\r\n    return return_name\r\n\r\n\r\ndef edit_outbound_basictx_rule(connector, new_tradingpartner, new_profile_id, new_processing_flag):\r\n    s_id = dict[&quot;s_id&quot;]\r\n    return_name = &#39;Rule Edit Successfully&#39;\r\n    query = (\r\n        &quot;MATCH (r:Rule) WHERE r.id_name = $s_id &quot;\r\n        &quot;SET r.tradingpartner_basictx = $new_tradingpartner, &quot;\r\n        &quot;    r.profileid_basictx = $new_profile_id, &quot;\r\n        &quot;    r.processingflag1_basictx = $new_processing_flag&quot;\r\n    )\r\n\r\n    connector.run(query, return_name=return_name, new_tradingpartner=new_tradingpartner,\r\n                  new_profile_id=new_profile_id, new_processing_flag=new_processing_flag, s_id=s_id)\r\n\r\n    return return_name\r\n\r\n\r\ndef main(dict):\r\n    uri = &quot;bolt://localhost:7687&quot;\r\n    user = &quot;admin&quot;\r\n    password = &quot;password&quot;\r\n    connector = Neo4jConnector(uri, user, password)\r\n    ruletype = dict[&#39;ruletype&#39;]\r\n    # Initialize a dictionary to store the result\r\n\r\n    if ruletype == &#39;Inbound&#39;:\r\n        profileid = dict[&#39;profile_id&#39;]\r\n        sender = dict[&#39;sender&#39;]\r\n        receiver = dict[&#39;receiver&#39;]\r\n        message = dict[&#39;message&#39;]\r\n        processingflag1 = dict[&#39;processingflag1&#39;]\r\n        create_inbound_rule(connector, profileid, sender, receiver, message, processingflag1, )\r\n\r\n    elif ruletype == &#39;Outbound&#39;:\r\n        profileid_outbound = dict[&#39;profileid_outbound&#39;]\r\n        sender_outbound = dict[&#39;sender_outbound&#39;]\r\n        receiver_outbound = dict[&#39;receiver_outbound&#39;]\r\n        message_outbound = dict[&#39;message_outbound&#39;]\r\n        processingflag1_outbound = dict[&#39;processingflag1_outbound&#39;]\r\n        filename_output = dict[&#39;filename_output&#39;]\r\n\r\n        create_outbound_rule(connector, profileid_outbound, sender_outbound, receiver_outbound,\r\n                             message_outbound, processingflag1_outbound, filename_output)\r\n    elif ruletype == &#39;Both&#39;:\r\n        inbound_profileid_both = dict[&#39;inbound_profileid_both&#39;]\r\n        outbound_profileid_both = dict[&#39;outbound_profile_id_both&#39;]\r\n        sender_both = dict[&#39;sender_both&#39;]\r\n        receiver_both = dict[&#39;receiver_both&#39;]\r\n        message_both = dict[&#39;message_both&#39;]\r\n        processingflag1_both = dict[&#39;processingflag1_both&#39;]\r\n\r\n        filename_both = dict[&#39;filename_both&#39;]\r\n        id_name = receiver_both + &#39;_Both_&#39; + sender_both\r\n        return_name = receiver_both + &#39;both&#39; + sender_both + &#39;SFTP_STEP1,SFTP_STEP2 created successfully&#39;\r\n        create_both_rule(connector, inbound_profileid_both, outbound_profileid_both, sender_both,\r\n                         receiver_both, message_both, processingflag1_both, filename_both, return_name)\r\n\r\n    elif ruletype == &#39;Inbound BasicTx&#39;:\r\n        tradingpartner_basictx = dict[&quot;tradingpartner_Basictx&quot;]\r\n        profileid_basictx = dict[&quot;profileid_Basictx&quot;]\r\n        processingflag1_basictx = dict[&quot;ProcessingFlag1_Basictx&quot;]\r\n        id_name = &quot;ELUX_INBOUND_RECEIVE_FROM_&quot; + tradingpartner_basictx\r\n        create_inbound_basictx_rule(connector, tradingpartner_basictx, profileid_basictx,\r\n                                    processingflag1_basictx, id_name)\r\n    elif ruletype == &#39;Outbound BasicTx&#39;:\r\n        tradingpartner_basictx = dict[&quot;tradingpartner_basictx&quot;]\r\n        profileid_basictx = dict[&quot;profile_id_basictx&quot;]\r\n        processingflag1_basictx = dict[&quot;processingflag1_basictx&quot;]\r\n        id_name = &quot;ELUX_INBOUND_RECEIVE_FROM_&quot; + tradingpartner_basictx\r\n        create_outbound_basictx_rule(connector, tradingpartner_basictx, profileid_basictx,\r\n                                     processingflag1_basictx, id_name)\r\n    elif ruletype == &#39;Edit Inbound Rule&#39;:\r\n\r\n        new_message = dict[&quot;new_message&quot;]\r\n        new_profile_id = dict[&quot;new_profile_id&quot;]\r\n        new_processing_flag = dict[&quot;new_processing_flag&quot;]\r\n\r\n        edit_inbound_rule(connector, new_profile_id, new_message, new_processing_flag)\r\n\r\n    elif ruletype == &#39;Edit Outbound Rule&#39;:\r\n\r\n        new_profile_id = dict[&quot;new_profile_id&quot;]\r\n        new_message = dict[&quot;new_message&quot;]\r\n        new_processing_flag = dict[&quot;new_processing_flag&quot;]\r\n        new_filename = dict[&quot;new_filename&quot;]\r\n        edit_outbound_rule(connector, new_profile_id, new_message, new_processing_flag, new_filename)\r\n\r\n    elif ruletype == &#39;Edit Both Rule&#39;:\r\n\r\n        new_inbound_profile_id = dict[&quot;new_inbound_profile_id&quot;]\r\n        new_outbound_profile_id = dict[&quot;new_outbound_profile_id&quot;]\r\n        new_filename = dict[&#39;new_filename&#39;]\r\n        new_message = dict[&quot;Message_edit_Both&quot;]\r\n        new_processing_flag = dict[&quot;new_processing_flag&quot;]\r\n        edit_both_rule(connector, new_inbound_profile_id, new_outbound_profile_id, new_message,\r\n                       new_processing_flag, new_filename)\r\n    elif ruletype == &#39;Edit Inbound BasicTx&#39;:\r\n        id_name = dict[&#39;id_name&#39;]\r\n        new_tradingpartner = dict[&quot;new_tradingpartner&quot;]\r\n        new_profile_id = dict[&quot;new_profile_id&quot;]\r\n        new_processing_flag = dict[&quot;new_processing_flag&quot;]\r\n        edit_inbound_basictx_rule(connector, new_tradingpartner, new_profile_id, new_processing_flag)\r\n\r\n    elif ruletype == &#39;Edit Outbound BasicTx&#39;:\r\n        new_tradingpartner = dict[&quot;new_tradingpartner&quot;]\r\n        new_profile_id = dict[&quot;new_profile_id&quot;]\r\n        new_processing_flag = dict[&quot;new_processing_flag&quot;]\r\n        edit_outbound_basictx_rule(connector, new_tradingpartner, new_profile_id, new_processing_flag)\r\n\r\n    elif ruletype == &#39;Rule Search&#39;:\r\n        # Call the get_nodes_by_id_name function to retrieve nodes by id_name\r\n        id_name = dict[&#39;id_name&#39;]\r\n        return_name = &#39;Rule Search Successfully&#39;\r\n\r\n    else:\r\n        print(f&quot;Unsupported ruletype: {ruletype}&quot;)\r\n    connector.close()\r\n\r\n```\r\n\r\n\r\nI tried to solve this error to fix these warnings and it did not fix the issue\r\n",
      "link": "https://stackoverflow.com/questions/77555016/how-to-fix-type-neo4jconnector-doesnt-have-expected-attribute-run-in-pyt",
      "title": "How to fix &quot;Type &#39;Neo4jConnector&#39; doesn&#39;t have expected attribute &#39;run&#39; &quot; in python file"
    },
    {
      "tags": ["java", "spring", "spring-boot", "neo4j", "spring-data-neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 27,
                "user_id": 13574344,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
                "display_name": "stackoverflow_user",
                "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701043609,
              "post_id": 77551513,
              "comment_id": 136722659,
              "link": "https://stackoverflow.com/questions/77546470/spring-data-neo4j-return-count-of-affected-nodes-after-update-operation/77551513#comment136722659_77551513"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 27,
                "user_id": 13574344,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
                "display_name": "stackoverflow_user",
                "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701077050,
              "post_id": 77551513,
              "comment_id": 136725731,
              "link": "https://stackoverflow.com/questions/77546470/spring-data-neo4j-return-count-of-affected-nodes-after-update-operation/77551513#comment136725731_77551513"
            },
            {
              "owner": {
                "reputation": 51,
                "user_id": 7993403,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-j_gZhXdXvmg/AAAAAAAAAAI/AAAAAAAAG2o/BAeGfAR8UhM/photo.jpg?sz=256",
                "display_name": "Saravanan Shanmugaraj",
                "link": "https://stackoverflow.com/users/7993403/saravanan-shanmugaraj"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702007021,
              "post_id": 77551513,
              "comment_id": 136847677,
              "link": "https://stackoverflow.com/questions/77546470/spring-data-neo4j-return-count-of-affected-nodes-after-update-operation/77551513#comment136847677_77551513"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700999067,
          "creation_date": 1700999067,
          "answer_id": 77551513,
          "question_id": 77546470,
          "share_link": "https://stackoverflow.com/a/77551513",
          "body_markdown": "If you want the count of nodes to which the `SET` was applied, return the count of rows:\r\n\r\n```sql\r\nMATCH (n:Student) WHERE n.id IN $idList \r\nSET n.isRegistered = true\r\nRETURN count(*) AS numAffected\r\n```\r\n\r\nIf you want the count of nodes whose value of `isRegistered` was changed, remove nodes that already have `isRegistered = true` with the `WHERE` clause:\r\n\r\n```sql\r\nMATCH (n:Student) \r\nWHERE n.id IN $idList AND NOT coalesce(n.isRegistered, false) \r\nSET n.isRegistered = true\r\nRETURN count(*) AS numAffected\r\n```\r\n\r\n(I&#39;ve just formatted as stand-alone Cypher to make it easier read.)",
          "link": "https://stackoverflow.com/questions/77546470/spring-data-neo4j-return-count-of-affected-nodes-after-update-operation/77551513#77551513",
          "title": "Spring Data Neo4j return count of affected nodes after update operation"
        }
      ],
      "owner": {
        "reputation": 27,
        "user_id": 13574344,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
        "display_name": "stackoverflow_user",
        "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700999067,
      "creation_date": 1700880286,
      "question_id": 77546470,
      "share_link": "https://stackoverflow.com/q/77546470",
      "body_markdown": "Is there any way to return the count of affected nodes after doing the update operation with Spring Data Neo4j repository?\r\n\r\ne.g\r\n```\r\n@Query(&quot;MATCH (n:Student) WHERE n.id IN $idList SET n.isRegistered = true&quot;)\r\nInteger updateRegisterInfo(@Param(&quot;idList&quot;) List&lt;String&gt; idList);\r\n```\r\n\r\nBut sdn can only return void/null value for such operation.\r\n\r\nThanks",
      "link": "https://stackoverflow.com/questions/77546470/spring-data-neo4j-return-count-of-affected-nodes-after-update-operation",
      "title": "Spring Data Neo4j return count of affected nodes after update operation"
    },
    {
      "tags": ["neo4j", "cypher-shell"],
      "owner": {
        "reputation": 5878,
        "user_id": 1089239,
        "user_type": "registered",
        "accept_rate": 82,
        "profile_image": "https://www.gravatar.com/avatar/957f782fb0d9a094609612c6647400a4?s=256&d=identicon&r=PG",
        "display_name": "Benny",
        "link": "https://stackoverflow.com/users/1089239/benny"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 11,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1700665334,
      "creation_date": 1700665334,
      "question_id": 77531031,
      "share_link": "https://stackoverflow.com/q/77531031",
      "body_markdown": "I have Neo4j Desktop 1.5.8 installed on a Windows PC. Created few databases and used the Query browser and Bloom as well. However, I keep encountering annoying issues like:\r\n\r\n`Database xxx can not be started due to conflicts with external processes. To fix this problem, let us change these port configurations: bolt: xxxx -&gt; xxxx`\r\n\r\nClicking `Fix configuration` doesn&#39;t work and keeps showing that error message. One solution (hack) that I found online was to find the process `Zulu Platform x64 Architecture` and terminate it. It works sometimes but most often it doesn&#39;t even appear in the Task Manager. I have also found that stopping/restarting a database results in forever `Stopping` operation. \r\n\r\nI have tried:\r\n- restarting Neo4j: works rarely\r\n- keep hunting for the `Zulu Platform x64 Architecture`: works when I find it in taskmgr\r\n- restarting the PC: works sometimes\r\n\r\nDoes anyone know of an actual fix to this problem? Any way, I can start/stop the database from command line, e.g., using cypher-shell or Python library?",
      "link": "https://stackoverflow.com/questions/77531031/neo4j-desktop-error-connecting-stopping-starting-databases-database-x-can-no",
      "title": "Neo4j Desktop - Error connecting/stopping/starting databases - Database X can not be started"
    },
    {
      "tags": ["neo4j", "cpu", "apoc", "apoc-extended"],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1700607356,
      "creation_date": 1700607356,
      "question_id": 77526391,
      "share_link": "https://stackoverflow.com/q/77526391",
      "body_markdown": "Let&#39;s say I have a CPU with `24 cores`/`48 threads`.\r\n\r\nI would like to correctly specify the `partitions` parameter to `apoc.cypher.mapParallel2` procedure https://neo4j.com/labs/apoc/5/overview/apoc.cypher/apoc.cypher.mapParallel2/.\r\n\r\nHow to calculate `partitions` parameter value based on CPU charcteristcs ?",
      "link": "https://stackoverflow.com/questions/77526391/how-to-correctly-calculate-partitions-for-apoc-cypher-mapparallel2-based-on-cpu",
      "title": "How to correctly calculate partitions for apoc.cypher.mapParallel2 based on CPU characteristics"
    },
    {
      "tags": ["neo4j", "cpu", "apoc", "apoc-extended"],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1700607356,
      "creation_date": 1700607356,
      "question_id": 77526391,
      "share_link": "https://stackoverflow.com/q/77526391",
      "body_markdown": "Let&#39;s say I have a CPU with `24 cores`/`48 threads`.\r\n\r\nI would like to correctly specify the `partitions` parameter to `apoc.cypher.mapParallel2` procedure https://neo4j.com/labs/apoc/5/overview/apoc.cypher/apoc.cypher.mapParallel2/.\r\n\r\nHow to calculate `partitions` parameter value based on CPU charcteristcs ?",
      "link": "https://stackoverflow.com/questions/77526391/how-to-correctly-calculate-partitions-for-apoc-cypher-mapparallel2-based-on-cpu",
      "title": "How to correctly calculate partitions for apoc.cypher.mapParallel2 based on CPU characteristics"
    },
    {
      "tags": ["csv", "vector", "neo4j", "cypher", "neo4j-admin"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 88773,
            "user_id": 379235,
            "user_type": "registered",
            "accept_rate": 62,
            "profile_image": "https://i.stack.imgur.com/qSUBs.png?s=256&g=1",
            "display_name": "daydreamer",
            "link": "https://stackoverflow.com/users/379235/daydreamer"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700601817,
          "creation_date": 1700601817,
          "answer_id": 77526008,
          "question_id": 77525633,
          "share_link": "https://stackoverflow.com/a/77526008",
          "body_markdown": "I was able to solve this in 2 steps\r\n\r\n## Step 1: Fix the header file\r\n```\r\nid:ID,:LABEL,amount:double,measureUnit:string,gramWeight:double,embedding:float[]\r\n```\r\nNote the `float[]` as the type\r\n\r\n## Step 2: Importing array\r\nThis involved 2 steps\r\n### Step 2.1: Create a valid delimiter for array\r\n\r\n```\r\nconst embedding = await createEmbedding(embeddingInput);\r\nconst embeddingString = embedding.join(ARRAY_DELIMITER);\r\n```\r\nWhere `ARRAY_DELIMITER` is `|`\r\n\r\n### Step 2.2 Update import command to tell about delimiter\r\n```\r\nneo4j-admin database import full --array-delimiter=&#39;|&#39; // and so on...\r\n```\r\nNote `--array-delimiter=&#39;|&#39;` here.\r\n\r\nThis helped me fix the issue.",
          "link": "https://stackoverflow.com/questions/77525633/importing-vector-embedding-in-neo4j-via-neo4j-admin-import-is-failing-with-unkno/77526008#77526008",
          "title": "Importing Vector Embedding in Neo4J via neo4j-admin import is failing with unknown property type &#39;LIST&lt;FLOAT&gt;&#39;"
        }
      ],
      "owner": {
        "reputation": 88773,
        "user_id": 379235,
        "user_type": "registered",
        "accept_rate": 62,
        "profile_image": "https://i.stack.imgur.com/qSUBs.png?s=256&g=1",
        "display_name": "daydreamer",
        "link": "https://stackoverflow.com/users/379235/daydreamer"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 18,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700601817,
      "creation_date": 1700596915,
      "question_id": 77525633,
      "share_link": "https://stackoverflow.com/q/77525633",
      "body_markdown": "I have a CSV header and data file that I want to import in Neo4J using `neo4j-admin database` along with other files.\r\n\r\nHere are my files\r\n\r\n`HEADER`\r\n```\r\nid:ID,:LABEL,amount:double,measureUnit:string,gramWeight:double,embedding:LIST&lt;FLOAT&gt;\r\n```\r\n\r\n`DATA`\r\n```\r\nFFP_0_321358,FoodPortion_3_0_0,2,&quot;tablespoon&quot;,33.9,[0.1671835333108902,-0.7092851996421814,0.14913123846054077,0.7785872220993042,-0.312934011220932,0.08211034536361694,-0.028107712045311928,-0.25594303011894226,0.5699977278709412,0.6135631799697876,0.19823063910007477,0.09847097098827362,-0.6676387190818787,0.004426721017807722,-0.5394071340560913,0.9914360046386719,0.37802284955978394,0.2705143392086029,-0.06354071199893951,-0.3283253610134125,-0.12500542402267456,0.5226773023605347,-0.5599125623703003,-0.17582887411117554,0.33407628536224365,0.8492608666419983,1.6623034477233887,1.037268877029419,0.22571976482868195,0.5713614821434021,0.004049248062074184,-0.3291890323162079,-0.2762421667575836,0.2313031107187271,-0.1946457028388977,-0.17294952273368835,-0.08332429081201553,0.3433372676372528,0.5293984413146973,1.145921230316162,-0.6517155170440674,0.8047919273376465,0.012163370847702026,0.3513254225254059,-0.04551488906145096,0.2955775856971741,-0.023389466106891632,0.06517010182142258,-0.1647074818611145,-0.0821857675909996,0.23624971508979797,-0.7499469518661499,0.3026871979236603,-0.996300995349884,0.4166252911090851,0.338083416223526,1.4630589485168457,0.3421212434768677,-0.740848183631897,0.10450270026922226,-0.5746254920959473,0.9487141370773315,-0.6349362134933472,0.6473907232284546,0.737545907497406,0.631997287273407,-0.585864782333374,-1.2288835048675537,-0.4180561304092407,-0.2542168200016022,0.2972530126571655,0.14671950042247772,-0.22330710291862488,-0.602167546749115,0.29623106122016907,0.7523813247680664,-0.7711286544799805,-0.46698877215385437,-0.6049727201461792,0.5525864362716675,0.3214971125125885,-0.0008972518844529986,0.024934018030762672,0.09121513366699219,-0.99419105052948,0.01268870010972023,-0.25948208570480347,0.0844053328037262,-0.198614239692688,-0.03724987059831619,-0.6223516464233398,0.616694450378418,-0.7710570693016052,0.1813107579946518,0.2166164517402649,-0.2937754690647125,0.03168824687600136,-0.09738413244485855,-0.9887257814407349,-0.2576909363269806,-0.003925889730453491,0.039951808750629425,-0.1942584365606308,0.01654890924692154,0.027941200882196426,0.060958266258239746,0.31667277216911316,-0.5193405747413635,-0.5178394317626953,0.2285129725933075,-0.3170968294143677,-0.2246341109275818,0.2833319902420044,-0.5099343657493591,-0.49715498089790344,-0.3493226170539856,0.3292626142501831,0.24636048078536987,0.7207037210464478,0.16913318634033203,-0.6909018754959106,0.06924944370985031,0.4800015687942505,-0.2168654501438141,0.5917078852653503,0.23160593211650848,0.537395715713501,0.7937036752700806,0.17396502196788788,-0.3983372151851654,0.8670725226402283,-0.21596691012382507,0.7286391854286194,0.338647723197937,-0.541279137134552,-0.24414321780204773,0.7341932058334351,0.4927745461463928,-0.7745022177696228,0.8004167079925537,-0.6826944947242737,0.13118436932563782,-0.19548332691192627,0.07437360286712646,-0.5719180703163147,0.24923273921012878,-0.5927393436431885,0.8679149150848389,0.5983684062957764,-0.027823010459542274,0.7718298435211182,-0.4654153287410736,-1.3462893962860107,0.7995166182518005,-0.011185641400516033,-0.4824565351009369,0.5111072063446045,-0.44001948833465576,-0.3706497848033905,-0.5190173983573914,0.32828569412231445,-0.08511803299188614,-0.2909694015979767,0.6947621703147888,-0.48054996132850647,0.9403616786003113,0.9104567766189575,-0.3861950635910034,0.12150025367736816,-1.0906805992126465,-0.4025906026363373,0.9348596930503845,-1.0202574729919434,0.20373153686523438,-0.523996114730835,0.053802911192178726,0.24222053587436676,0.3762281537055969,-0.5176705121994019,-0.20220249891281128,0.03934430330991745,0.09392368793487549,0.7321622967720032,-0.14787785708904266,0.09097499400377274,-1.0559947490692139,0.48921504616737366,0.05759872868657112,0.8594281077384949,0.7001445293426514,-0.5685751438140869,-1.088683009147644,-0.6474522948265076,0.7292926907539368,0.09484611451625824,-0.13430261611938477,0.5815054774284363,-0.12725986540317535,-0.2390153408050537,-0.5564658641815186,0.03633316978812218,-0.13943913578987122,0.8008201122283936,-0.03932861611247063,-0.592444121837616,-0.28947505354881287,-1.3887320756912231,-0.2919691503047943,0.10906774550676346,-0.16127485036849976,0.4028816521167755,0.18391253054141998,-0.4581294655799866,0.7862441539764404,-0.8642418384552002,-0.8036615252494812,-0.20525407791137695,0.0392296127974987,0.9526417255401611,0.42765557765960693,0.33285951614379883,-0.5506075620651245,-0.6694586873054504,0.07510815560817719,-0.038032107055187225,-0.03092881664633751,-0.04241414740681648,0.1725407838821411,-0.5417670607566833,-0.5349268317222595,-0.5855259299278259,0.5592337250709534,0.4357283115386963,-0.47289806604385376,0.4332028329372406,-0.8731499910354614,0.6391263604164124,-0.5809072256088257,0.13061028718948364,0.1224871352314949,-0.35391929745674133,0.005123510956764221,-0.035462722182273865,-0.3733997642993927,-0.28362974524497986,-0.5538771152496338,0.3602936565876007,-0.6868255138397217,-0.03687463328242302,-0.02161470241844654,-0.01347095426172018,0.33665063977241516,0.17859768867492676,-0.11408817768096924,0.9829856157302856,0.2166203111410141,-0.8720398545265198,0.5416585206985474,0.4413844347000122,-0.45122820138931274,0.6702153086662292,-0.8764693140983582,-0.2828983664512634,-0.3100939989089966,-0.12255239486694336,-1.0492029190063477,-0.8187520503997803,0.24328432977199554,-0.6477587223052979,-0.5662667155265808,0.5299931168556213,-0.16486720740795135,-0.5515258312225342,-0.4993116557598114,0.20804063975811005,0.5959509611129761,-0.5303364992141724,0.33830690383911133,0.6449111104011536,0.15322712063789368,-0.5701629519462585,-0.8095422387123108,0.299686998128891,-0.15813173353672028,-0.42938998341560364,0.01225562859326601,0.2296690195798874,-0.003090759040787816,-0.4748457670211792,-0.6214565634727478,-0.34394094347953796,0.25212395191192627,0.6680505275726318,-0.4346116781234741,0.05700011923909187,-0.5419701337814331,-0.06856900453567505,0.22415021061897278,0.39412787556648254,0.15209266543388367,-0.12497655302286148,-0.14452865719795227,0.10466565191745758,-0.885491669178009,0.16965919733047485,0.3295234143733978,0.5647721886634827,0.6704097390174866,0.3424019515514374,-0.03930060938000679,-0.09012854844331741,-0.4867702126502991,-0.19723494350910187,-0.3999251127243042,-0.12402091920375824,-0.3148922622203827,-0.03522349148988724,0.08981114625930786,-0.5273032784461975,-0.2906345725059509,-0.008796274662017822,0.10828336328268051,-0.5253278017044067,0.32934826612472534,0.1370808184146881,0.40024134516716003,0.15117497742176056,-0.39427340030670166,0.28206363320350647,0.03590822592377663,-0.5984677076339722,-0.7090610861778259,-0.9651968479156494,0.2385367751121521,-0.6296990513801575,0.4865530729293823,-0.3372344374656677,-0.4074413478374481,0.40377700328826904,0.2570020258426666,0.4174588918685913,0.8144797086715698,0.36606156826019287,0.3249886631965637,-0.3144724667072296,-0.13040763139724731,0.11302396655082703,-0.5673134326934814,-0.302737295627594,0.07992523908615112,0.8787054419517517,1.172546148300171,0.4492942988872528,-0.030851297080516815,0.2505459785461426,0.41262075304985046,-0.49564653635025024,0.8719723224639893,0.07523376494646072,-1.1572521924972534,-0.01636483334004879,-0.26380544900894165,-1.4837547540664673,0.5048713088035583,-0.08823634684085846,0.07521479576826096,-0.49488142132759094,0.26249536871910095,-0.6110193729400635,-0.2207442820072174,-0.6484773755073547,1.0147236585617065,-0.44640663266181946,-0.5317413806915283,-0.14681464433670044,-1.1751823425292969,0.23739926517009735,0.7769442796707153,0.5977027416229248,-0.09468377381563187,-0.1947668194770813,0.8031347990036011,-0.27485743165016174,0.3829503059387207,0.008609862998127937,-0.12533974647521973,-0.14479875564575195,0.09938973188400269,0.32281163334846497,0.9557879567146301,0.44236403703689575,-0.3139778673648834,-0.6251403093338013,-0.9560933709144592,-0.026251723989844322,1.0045522451400757,-0.37324783205986023,-1.1330887079238892,-0.7285730242729187,-0.8578240871429443,0.283489465713501,0.3208872675895691,-0.19238921999931335,0.018476346507668495,-0.5433160066604614,0.7849560379981995,0.6621338725090027,-0.04260914772748947,0.5969443321228027,0.44642236828804016,-0.26311758160591125,-0.9876590371131897,0.3932715058326721,-0.15448811650276184,0.13365773856639862,-0.0799962505698204,0.7488629817962646,-0.6475675106048584,-0.009853999130427837,-0.7468257546424866,0.47061026096343994,-0.3518182933330536,-0.18345221877098083,-0.5140756368637085,0.1674567610025406,-0.9340670704841614,-0.025641120970249176,-0.34011444449424744,-0.8153799176216125,-0.26087984442710876,0.3495074212551117,-0.07597187161445618,0.6782748699188232,-0.12641578912734985,1.2685917615890503,-0.8028026819229126,0.5285968780517578,0.5295302271842957,0.3867567479610443,-0.1515539586544037,-1.0572096109390259,-0.49948495626449585,-0.39823028445243835,-0.8323652744293213,-0.9415347576141357,0.6449390053749084,-0.14691118896007538,0.04789162799715996,1.2827277183532715,-0.09551580995321274,0.603675901889801,0.09274474531412125,1.0837756395339966,0.4858129918575287,-0.9330762028694153,0.09257236123085022,-0.6846525073051453,0.6818339824676514,0.4644860029220581,0.8943250179290771,-0.5759118795394897,-0.05204038321971893,-1.039456844329834,-0.7968854308128357,0.25239646434783936,0.4111694395542145,0.0011898776283487678,0.04329173266887665,-0.7683977484703064,0.09674887359142303,0.5332443118095398,-0.8648918271064758,-0.4710420072078705,0.2660006582736969,0.22469790279865265,0.5526612401008606,-0.2161717712879181,-0.48416608572006226,-0.924457848072052,0.5668873190879822,0.4644615948200226,0.016160206869244576,-0.16353924572467804,-0.13962322473526,-0.3175646960735321,0.4352322518825531,0.6779831051826477,0.9168933033943176,-0.7922529578208923,0.5794135332107544,-0.05354280769824982,-0.3465318977832794,0.06871140003204346,-0.2459251582622528,-0.05720151960849762,0.32953858375549316,-0.44721513986587524,0.050602808594703674,0.8087331056594849,-0.5344159603118896,0.305500328540802,-0.18340158462524414,-0.19031253457069397,-0.309244304895401,-0.2884880304336548,0.11887530237436295,0.18470722436904907,0.199752539396286,-0.06084237992763519,0.24666717648506165,-0.26213422417640686,0.49224817752838135,0.48226016759872437,-0.5415734052658081,-0.3253564238548279,1.3615599870681763,0.5222530364990234,-0.32182902097702026,0.46122345328330994,0.24173259735107422,-0.0673547014594078,0.5831491351127625,1.2432188987731934,0.49218353629112244,-0.5042010545730591,0.7092238664627075,0.06750074774026871,-0.09383261948823929,-0.0081543093547225,0.44860950112342834,-0.1970268189907074,-0.28806084394454956,0.6269216537475586,-0.803895890712738,-0.22598743438720703,0.5601255893707275,-0.3778359591960907,0.2135166972875595,-0.7522717118263245,-0.779211163520813,0.1779584139585495,-0.11637934297323227,-0.5567536354064941,0.4780929386615753,0.07993963360786438,1.180921196937561,-1.0012739896774292,1.0854748487472534,1.2030161619186401,-0.39551323652267456,-0.3470480144023895,-0.5964025259017944,-0.003305548569187522,-0.5828757882118225,0.6706764698028564,-0.07850617915391922,0.16851960122585297,-0.20571738481521606,-0.268282413482666,-0.7996156215667725,0.33568376302719116,-0.12711429595947266,-0.25941455364227295,-0.015434486791491508,0.42356789112091064,-0.13292774558067322,0.0037969565019011497,-0.18581432104110718,0.9464324116706848,0.8409354090690613,0.4372020363807678,-0.6313837170600891,-0.055603086948394775,0.09673861414194107,0.3239489793777466,-0.06169762834906578,-0.7502389550209045,0.7076743245124817,-0.45781442523002625,-0.16617447137832642,0.38411039113998413,1.180161476135254,0.21009182929992676,0.11365732550621033,0.5472085475921631,1.1442530155181885,0.2281898409128189,0.2820669710636139,0.9721088409423828,0.5765435099601746,0.4725164771080017,0.8732017874717712,-0.15962526202201843,-0.06697147339582443,0.9765822291374207,-0.6608487963676453,0.43563368916511536,0.46180063486099243,0.11050009727478027,0.5212056636810303,0.6355578899383545,-0.280332088470459,0.11997316777706146,-0.800595760345459,-0.287690669298172,0.43648675084114075,0.026447953656315804,-0.4591667354106903,-0.9742065072059631,-0.11056825518608093,0.07913459837436676,0.3082919120788574,0.22297149896621704,0.4662155508995056,0.24451857805252075,-0.3344615399837494,0.6512241363525391,0.04811880365014076,-0.011844181455671787,-0.10874098539352417,-0.20612436532974243,-0.27597931027412415,0.6450008749961853,0.038915444165468216,-0.8701965808868408,0.19781824946403503,-0.5256267189979553,-0.1740768998861313,-0.16985800862312317,0.12679293751716614,-0.4636904299259186,-0.16456031799316406,-0.21601201593875885,0.27244970202445984,0.41580191254615784,0.47157996892929077,-1.0791044235229492,0.27602824568748474,-0.12321404367685318,-0.1431848406791687,-0.016102466732263565,-0.11164054274559021,0.3355039954185486,0.7526078820228577,0.3873237371444702,0.43889203667640686,0.020581483840942383,0.0665377601981163,0.7098839282989502,-1.2233948707580566,-0.8678389191627502,-0.30513134598731995,0.3215208649635315,-0.3935432434082031,-0.5412213206291199,1.115997314453125,0.9920573830604553,0.914484977722168,-0.9107837677001953,0.017293615266680717,-0.2077222615480423,0.2669888138771057,0.22706453502178192,0.649146318435669,-0.4583829343318939,-0.22682905197143555,0.2800329625606537,-1.0090821981430054,-0.362485408782959,0.4176114797592163,0.1970158964395523,-0.38053134083747864,0.5054555535316467,0.6325038075447083,-0.4901634752750397,0.21487581729888916,0.31514257192611694,0.20230068266391754,-0.10582146048545837,0.22879809141159058,0.8290401101112366,-0.5272077918052673,-0.1003471314907074,-0.4193391501903534,-0.3952881693840027,-0.5583227872848511,-0.6888096332550049,-0.0452975295484066,-0.13799642026424408,-0.62837815284729,-0.4729372262954712,-0.14849378168582916,1.0821017026901245,0.9769520163536072,-1.0336458683013916,-0.852587878704071,0.9743750691413879,0.370536208152771,-0.6756088137626648,-0.23825114965438843,-0.1673172116279602,-0.07628379762172699,-0.5976764559745789,0.7753019332885742,0.6446144580841064,0.5124966502189636,0.31413015723228455,-0.00003639691567514092,-0.8735217452049255,0.5028191208839417,0.49051231145858765,0.2277340292930603,-0.6177209615707397,-0.30641138553619385,-0.605127215385437,-0.2127356231212616,0.28962069749832153,0.7604162096977234,-0.3130319118499756,-0.11445695906877518,0.4159240424633026,0.6234878301620483,0.2780379056930542,0.5945948958396912,0.37354910373687744,-1.0610800981521606,0.521527111530304,0.31822124123573303,0.33180931210517883,-0.10160930454730988,-0.513020396232605,0.570996105670929,0.47622430324554443,-0.8863240480422974,-0.44037914276123047,-0.3269352912902832,-1.8785266876220703,-0.6457673907279968,0.8876060247421265,-0.08890876173973083,-1.0130339860916138,-0.2681725323200226,-0.025494800880551338,0.30071747303009033,-0.7092866897583008,0.8538867831230164,-0.08444361388683319,0.1759151965379715,-0.0645117536187172,-0.6093289852142334,0.3150272071361542,0.6975864768028259,-0.7012813687324524,-0.22271794080734253,0.649813711643219,0.5986615419387817,-0.08681211620569229,0.04726758971810341,-0.36053359508514404,0.36199748516082764,-0.09300746023654938,-0.1462542563676834,-0.13827596604824066,-0.6411302089691162,0.06707187741994858,0.31476008892059326,0.3629421889781952,-1.0855286121368408]\r\n```\r\n\r\nMy command is \r\n```\r\nneo4j-admin database import full --nodes=datasets/bulk/t/ff_sr_fndds_food_portions_header.csv,datasets/bulk/t/ff_sr_fndds_food_portions.csv --relationships=datasets/bulk/t/ff_sr_fndds_food_portions_relations_header.csv,datasets/bulk/t/ff_sr_fndds_food_portions_relations.csv\r\n```\r\n\r\nIt fails with the following error\r\n```\r\norg.neo4j.internal.batchimport.input.HeaderException: Unable to parse header, unknown property type &#39;LIST&lt;FLOAT&gt;&#39;\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories.parsePropertyType(DataFactories.java:483)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories$AbstractDefaultFileHeaderParser.propertyExtractor(DataFactories.java:280)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories$DefaultNodeFileHeaderParser.create(DataFactories.java:410)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories.parseHeaderEntries(DataFactories.java:196)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories$AbstractDefaultFileHeaderParser.create(DataFactories.java:221)\r\n\tat org.neo4j.internal.batchimport.input.csv.CsvInput.verifyHeaders(CsvInput.java:164)\r\n\tat org.neo4j.internal.batchimport.input.csv.CsvInput.&lt;init&gt;(CsvInput.java:145)\r\n\tat org.neo4j.internal.batchimport.input.csv.CsvInput.&lt;init&gt;(CsvInput.java:108)\r\n\tat org.neo4j.importer.CsvImporter.doImport(CsvImporter.java:175)\r\n\tat org.neo4j.importer.ImportCommand$Base.doExecute(ImportCommand.java:431)\r\n\tat org.neo4j.importer.ImportCommand$Full.execute(ImportCommand.java:590)\r\n\tat org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n\tat org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n\tat picocli.CommandLine.access$1500(CommandLine.java:148)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2170)\r\n\tat org.neo4j.cli.AdminTool.execute(AdminTool.java:94)\r\n\tat org.neo4j.cli.AdminTool.main(AdminTool.java:82)\r\nCaused by: java.lang.IllegalArgumentException: &#39;LIST&lt;FLOAT&gt;&#39;\r\n\tat org.neo4j.csv.reader.Extractors.valueOf(Extractors.java:199)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories.parsePropertyType(DataFactories.java:481)\r\n\t... 22 more\r\nroot@51d13ae3cbf2:/var/lib/neo4j/import# \r\n```\r\n\r\nI am using neo4j in my docker with following version\r\n```\r\nroot@51d13ae3cbf2:/var/lib/neo4j/import# neo4j version\r\nneo4j 5.13.0\r\n```\r\n\r\nIt seems admin command only understand simple types like `STRING`, `INT`, etc. so, how can I fix this issue? ",
      "link": "https://stackoverflow.com/questions/77525633/importing-vector-embedding-in-neo4j-via-neo4j-admin-import-is-failing-with-unkno",
      "title": "Importing Vector Embedding in Neo4J via neo4j-admin import is failing with unknown property type &#39;LIST&lt;FLOAT&gt;&#39;"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700598572,
          "post_id": 77524947,
          "comment_id": 136673875,
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re#comment136673875_77524947"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 6487302,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
            "display_name": "Daniel Kohli",
            "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
          },
          "reply_to_user": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700607252,
          "post_id": 77524947,
          "comment_id": 136675002,
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re#comment136675002_77524947"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700607397,
              "post_id": 77525820,
              "comment_id": 136675017,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136675017_77525820"
            },
            {
              "owner": {
                "reputation": 29966,
                "user_id": 92359,
                "user_type": "registered",
                "accept_rate": 94,
                "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
                "display_name": "InverseFalcon",
                "link": "https://stackoverflow.com/users/92359/inversefalcon"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700609249,
              "post_id": 77525820,
              "comment_id": 136675216,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136675216_77525820"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700616834,
              "post_id": 77525820,
              "comment_id": 136675856,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136675856_77525820"
            },
            {
              "owner": {
                "reputation": 29966,
                "user_id": 92359,
                "user_type": "registered",
                "accept_rate": 94,
                "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
                "display_name": "InverseFalcon",
                "link": "https://stackoverflow.com/users/92359/inversefalcon"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700707665,
              "post_id": 77525820,
              "comment_id": 136688539,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136688539_77525820"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700851705,
              "post_id": 77525820,
              "comment_id": 136707429,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136707429_77525820"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "last_editor": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1700707628,
          "last_edit_date": 1700707628,
          "creation_date": 1700599333,
          "answer_id": 77525820,
          "question_id": 77524947,
          "share_link": "https://stackoverflow.com/a/77525820",
          "body_markdown": "You could try a query like this:\r\n\r\n```\r\nMATCH (n:Resource)\r\nWHERE EXISTS {\r\n    MATCH (n)-[*0..1]-&gt;(x)\r\n    WHERE (x:Resource OR x:Tag)\r\n    AND any(prop IN [&#39;name&#39;, &#39;description&#39;, &#39;legal_name&#39;, &#39;organization_type&#39;, &#39;tag&#39;] WHERE x[prop] CONTAINS &#39;school&#39;)\r\n}\r\n\r\nWITH n, [(n)-[]-&gt;(m) | m] as resources\r\nRETURN n, resources;\r\n```\r\n\r\nThis uses an EXISTS {} subquery to say that you&#39;re looking for a node (that could be the same node, or could be a connected node) that is a :Resource or :Tag node that has any of the given properties with the property value contains &#39;school&#39;.\r\n\r\nFor the resulting nodes that pass that filter, THEN you can match out to and collect the connected nodes (though in this case I&#39;m using a pattern comprehension to do so, which will be more efficient).\r\n\r\nEDIT: Fixed up the grouping of the AND and OR operators, that should ensure the any() list predicate must always be considered.",
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#77525820",
          "title": "[Neo4j][Cypher Query] Filter On Node or Relationship Node Properties and Then Return All Nodes and Their Relationship Nodes"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700851848,
              "post_id": 77539656,
              "comment_id": 136707444,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77539656#comment136707444_77539656"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700774191,
          "creation_date": 1700774191,
          "answer_id": 77539656,
          "question_id": 77524947,
          "share_link": "https://stackoverflow.com/a/77539656",
          "body_markdown": "The `Tags` look a lot like labels. Their one property, `tag`,  could just as easily be the label identifier. With the tags as labels, the predicates can be simplified like so:\r\n```sql\r\nWITH [&#39;name&#39;, &#39;description&#39;, &#39;legal&#39;, &#39;organization_type&#39;] AS props\r\nMATCH (n:Resource)--&gt;(m) \r\nWHERE n:School OR any(prop IN props WHERE m[prop] CONTAINS &#39;school&#39;)\r\nRETURN n, collect(m);\r\n```",
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77539656#77539656",
          "title": "[Neo4j][Cypher Query] Filter On Node or Relationship Node Properties and Then Return All Nodes and Their Relationship Nodes"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 6487302,
        "user_type": "registered",
        "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
        "display_name": "Daniel Kohli",
        "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 58,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 1,
      "accepted_answer_id": 77525820,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701669286,
      "creation_date": 1700589233,
      "last_edit_date": 1701669286,
      "question_id": 77524947,
      "share_link": "https://stackoverflow.com/q/77524947",
      "body_markdown": "I&#39;ve got a Neo4j DB that contains `Resource` nodes with several relationship nodes including `Tag`, `Address`, `PhoneNumber`, etc.\r\n\r\nThe schema for `Resource` is as follows:\r\n```\r\nResource: {\r\n  name: str,\r\n  description: str,\r\n  legal_name: str,\r\n  organization_type: str,\r\n}\r\n```\r\n\r\nThe schema for `Tag` is as follows:\r\n```\r\nTag: {\r\n  tag: str,\r\n}\r\n```\r\n\r\nI&#39;m building a query that returns all `Resource` nodes along with their relationship nodes where the `Resource` node has a property that contains a specific string AND/OR related `Tag` node(s) has(ve) a property that contains the same string.\r\n\r\nExample cases to return:\r\n1. A `Resource` node DOES have one or more property that contains the string &quot;school&quot; but all related `Tag` nodes DO NOT have a `tag` property containing the string &quot;school&quot;: the `Resource` node is returned along with all of its relationship nodes\r\n2. A `Resource` node DOES NOT have any properties that contain the string &quot;school&quot; but has at least one related `Tag` node that DOES have a `tag` property containing the string &quot;school&quot;: the `Resource` node is returned along with all of its relationship nodes\r\n3. A `Resource` node DOES have one or more property that contains the string &quot;school&quot; and has at least one related `Tag` node that DOES have a `tag` property containing the string &quot;school&quot;: the `Resource` node is returned along with all of its relationship nodes\r\n\r\n  I&#39;m currently using the below query and it works for the most part; however, for case 2 above no other relationship nodes of the originating `Resource` node are returned in the result set.  Ideally, we would ALWAYS get all relationship nodes of the `Resource` node matching the above criteria.  Any help would be greatly appreciated!\r\n\r\n```\r\nMATCH (n:Resource)-[]-&gt;(m) \r\nWHERE n.name CONTAINS &#39;school&#39;\r\n    OR n.description CONTAINS &#39;school&#39;\r\n    OR n.legal_name CONTAINS &#39;school&#39;\r\n    OR n.organization_type CONTAINS &#39;school&#39;\r\n    OR m.tag CONTAINS &#39;school&#39;\r\nRETURN n, collect(m);\r\n```",
      "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re",
      "title": "[Neo4j][Cypher Query] Filter On Node or Relationship Node Properties and Then Return All Nodes and Their Relationship Nodes"
    },
    {
      "tags": ["docker", "neo4j"],
      "owner": {
        "reputation": 1194,
        "user_id": 4333113,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://graph.facebook.com/100001546476131/picture?type=large",
        "display_name": "Ricardo Mota",
        "link": "https://stackoverflow.com/users/4333113/ricardo-mota"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1700585065,
      "creation_date": 1700585065,
      "question_id": 77524536,
      "share_link": "https://stackoverflow.com/q/77524536",
      "body_markdown": "I&#39;ve noticed that Neo4J Enterprise docker image is taking a lot of time to actually startup.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn this example you can see that it takes over 13 minutes just to start. Also, in this example, I&#39;ve done a clean start, meaning I&#39;ve deleted all data (databases and transactions).\r\n\r\nThis is the command I&#39;m running:\r\n\r\n&gt; docker run --name Neo4J \\\r\n    -p 7474:7474 -p 7687:7687 \\\r\n    -d \\\r\n    -v C:/Docker/Neo4J/data:/data:z \\\r\n    -v C:/Docker/Neo4J/logs:/logs:z \\\r\n    -v C:/Docker/Neo4J/plugins:/plugins:z \\\r\n    -v C:/Docker/Neo4J/data/backups:/data/backups:z \\\r\n    --env NEO4J_AUTH=neo4j/11111111 \\\r\n\t--env NEO4J_dbms_memory_pagecache_size=5G \\\r\n\t--env NEO4J_dbms_memory_heap_initial__size=5G \\\r\n\t--env NEO4J_dbms_memory_heap_max__size=5G \\\r\n    --env NEO4J_dbms_ssl_policy_bolt_client__auth=NONE \\\r\n    --env NEO4J_dbms_ssl_policy_https_client__auth=NONE \\\r\n    --env NEO4J_ACCEPT_LICENSE_AGREEMENT=yes \\\r\n    --env NEO4J_apoc_export_file_enabled=true \\\r\n    --env NEO4J_apoc_import_file_enabled=true \\\r\n    --env NEO4J_apoc_import_file_use__neo4j__config=true \\\r\n    --env NEO4JLABS_PLUGINS=&#39;[&quot;apoc&quot;]&#39; \\\r\n    neo4j:4.4-enterprise\r\n\r\nRight now I&#39;m running this on a Windows machine (Dell XPS 15 - i9 13900H with 64GB Ram) so machine wise I don&#39;t see any bottlenecks. In the past I&#39;ve ran this on a Mac and sometimes it would also be slow to startup but not this frequent.\r\n\r\nDoes anybody ever has this issue? What have you done to solve it?\r\n\r\nRegards!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GMw9t.png",
      "link": "https://stackoverflow.com/questions/77524536/neo4j-docker-image-takes-too-long-to-start",
      "title": "Neo4J Docker Image Takes Too Long to Start"
    },
    {
      "tags": ["neo4j", "cypher", "database-connection"],
      "owner": {
        "reputation": 143,
        "user_id": 4824040,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c91f9a7a8e72ade4d59448bf62f41b08?s=256&d=identicon&r=PG",
        "display_name": "Pantheos Max",
        "link": "https://stackoverflow.com/users/4824040/pantheos-max"
      },
      "last_editor": {
        "reputation": 605,
        "user_id": 13899010,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/2Iwbk.jpg?s=256&g=1",
        "display_name": "Chinez",
        "link": "https://stackoverflow.com/users/13899010/chinez"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 23,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1700990811,
      "creation_date": 1700584010,
      "last_edit_date": 1700990811,
      "question_id": 77524421,
      "share_link": "https://stackoverflow.com/q/77524421",
      "body_markdown": "I downloaded the neo4j OVA from bitnami and spun it up on my VSphere Server. The installed version of Neo4j on this prepackaged VM is 5.13 Community Edition.\r\n\r\nIt has a static IP address (192.168.1.6)\r\n\r\nI am able to connect via SSH, I can ping it, and everything&#39;s fine here\r\n\r\nThe neo4j.conf was altered like this:\r\n\r\n    server.default_listen_adress = 0.0.0.0\r\n    server.default_advertised_adress = 192.168.1.6\r\n    server.bolt.enabled=true\r\n    server.bolt.list_adress=:7687\r\n    server.bolt.advertised_adress=:7687\r\n    server.http.enabled=true\r\n    server.http.listen_adress=:7474\r\n    server.http.advertised_adressadress=:7474\r\n    \r\nThe `sudo neo4j-admin server validate-config` does not show any errors\r\n\r\nI am able to connect to the graph from within the server VM using `cyper-shell -a localhost -u neo4j -p myPassword`, so I know the user credentials work.\r\n\r\nThe `ss -tulpn` shows\r\n|netid|state|Local Address:Port|Peer Address:Port|\r\n|:----|:----|:-----------------|:----------------|\r\n|tcp|LISTEN|*:7687|* : *|\r\n|tcp|LISTEN|*:7474|* : *|\r\n\r\n\r\nBut whatever I try to use to connect this server as a remote connection within the Neo4j Desktop Client, I can&#39;t get a connection. Every possible combination of port, and protocol (neo4j, bolt, neo4j+s, etc.) just yields &quot;Unable to establish remote connection: ServiceUnavailable&quot;.\r\n\r\nWhat am I doing wrong? Is it just not possible to connect to a community edition using the Desktop app?",
      "link": "https://stackoverflow.com/questions/77524421/unable-to-connect-to-neo4j-vm-on-the-network-via-neo4jdesktop",
      "title": "Unable to connect to neo4j VM on the network via Neo4jDesktop"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700568875,
          "post_id": 77522450,
          "comment_id": 136668341,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136668341_77522450"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 22845737,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
            "display_name": "Somnath Deb",
            "link": "https://stackoverflow.com/users/22845737/somnath-deb"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700569371,
          "post_id": 77522450,
          "comment_id": 136668426,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136668426_77522450"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 22845737,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
            "display_name": "Somnath Deb",
            "link": "https://stackoverflow.com/users/22845737/somnath-deb"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700569412,
          "post_id": 77522450,
          "comment_id": 136668432,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136668432_77522450"
        },
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700577938,
          "post_id": 77522450,
          "comment_id": 136670159,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136670159_77522450"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 22845737,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
            "display_name": "Somnath Deb",
            "link": "https://stackoverflow.com/users/22845737/somnath-deb"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700580946,
          "post_id": 77522450,
          "comment_id": 136670739,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136670739_77522450"
        },
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700588772,
          "post_id": 77522450,
          "comment_id": 136672265,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136672265_77522450"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701792720,
          "creation_date": 1701792720,
          "answer_id": 77607672,
          "question_id": 77522450,
          "share_link": "https://stackoverflow.com/a/77607672",
          "body_markdown": "One thing I see is that you have a long pattern, and within that pattern you have a condition that uses a property of a node in that pattern.\r\n\r\nThat is, you match on t1 and require `{movOre: t1.nutel}`, and the same thing again when you use a REBIX relationship property to filter on `t2: Tel`\r\n\r\nThis means every t1 has to be found, and every value of `t1.nuTel` used in the pattern. If you have 1000 Tel nodes, you have 1000 nuTel properties. Basically, the possibilities for nuTel and movBene are exploding.\r\n\r\nYou might refactor to split this into multiple MATCH statements:\r\n\r\n```\r\nMATCH (t1:Tel {TB:true})\r\nWITH distinct t1.nuTel as t1nuTel\r\nMATCH (t1:Tel {TB:true, nulTel:t1nuTel})&lt;-[:TelBIZ]-(:ACC {TB:true})-[or:REBIZ {movOre: t1nuTel}]-&gt;(:ACC {TB:true})-&gt;(t2:Tel {TB:true, nuTel: or.movBene})\r\nWHERE t1.nuTel &lt;&gt; t2.nuTel\r\nRETURN t1, t2, count(or) as Ope, sum(or.imp) as Total, 10^3 as Precision, max(or.Txt) as mRB\r\n```\r\n\r\nThat may not be the best solution for your graph, and there&#39;s still the issue with `or.movBene` being used as a filter when it&#39;s part of a pattern, but hopefully I&#39;ve communicated the idea and you can refine from there.\r\n\r\nAlso, indexes on nuTel, movBene, and TB will be incredibly faster, if you don&#39;t haver them already.",
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement/77607672#77607672",
          "title": "Optimization of a MATCH statement"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22845737,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
        "display_name": "Somnath Deb",
        "link": "https://stackoverflow.com/users/22845737/somnath-deb"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 58,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702006948,
      "creation_date": 1700566122,
      "last_edit_date": 1702006948,
      "question_id": 77522450,
      "share_link": "https://stackoverflow.com/q/77522450",
      "body_markdown": "```\r\nMATCH (t1:Tel {TB:true})&lt;-[:TelBIZ]-\r\n  (:ACC {TB:true})-[or:REBIZ {movOre:t1.nuTel}]-&gt;\r\n  (:ACC {TB:true})-[:TelBIZ]-&gt;(t2:Tel {TB:true,nuTel:or.movBene}) \r\nWHERE t1.nuTel&lt;&gt;t2.nuTel\r\nRETURN t1, t2, COUNT(or) AS Ope, SUM(or.imp) AS Total, \r\n  10^3 as Precision, max(or.Txt) AS mRB\r\n```\r\n\r\nI am trying to get this query to return few values, but I find the query is not optimised and returns a lot of data. Please suggest me how I can optimize it. I am using Neo4j v3.5.",
      "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement",
      "title": "Optimization of a MATCH statement"
    },
    {
      "tags": ["java", "spring", "spring-boot", "neo4j", "spring-data-neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 27,
                "user_id": 13574344,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
                "display_name": "stackoverflow_user",
                "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701044278,
              "post_id": 77549953,
              "comment_id": 136722705,
              "link": "https://stackoverflow.com/questions/77520005/spring-data-neo4j-cant-convert-internalnode-back-to-entity-class-when-retrievin/77549953#comment136722705_77549953"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 24739,
            "user_id": 1219755,
            "user_type": "registered",
            "accept_rate": 84,
            "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
            "display_name": "alexanoid",
            "link": "https://stackoverflow.com/users/1219755/alexanoid"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700955753,
          "creation_date": 1700955753,
          "answer_id": 77549953,
          "question_id": 77520005,
          "share_link": "https://stackoverflow.com/a/77549953",
          "body_markdown": "I&#39;m not sure if I&#39;m doing it right, but I&#39;ve encountered this problem myself and haven&#39;t found a better solution than simply creating a new object of the class I need and populating it with values that I extract from the `InternalNode`.\r\n\r\nFor example:\r\n\r\n    InternalNode internalNode = (InternalNode) weightedCriteriaArrayElement.get(&quot;criterion&quot;);\r\n    \r\n    Criterion criterion = new Criterion(); // my entity class\r\n    Map&lt;String, Object&gt; nodeProperties = new HashMap&lt;&gt;(internalNode.asMap());\r\n    BeanUtils.populate(criterion, nodeProperties);\r\n    criterion.setGraphId(internalNode.id());",
          "link": "https://stackoverflow.com/questions/77520005/spring-data-neo4j-cant-convert-internalnode-back-to-entity-class-when-retrievin/77549953#77549953",
          "title": "Spring data Neo4j can&#39;t convert InternalNode back to entity class when retrieving paths"
        }
      ],
      "owner": {
        "reputation": 27,
        "user_id": 13574344,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
        "display_name": "stackoverflow_user",
        "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
      },
      "last_editor": {
        "reputation": 27,
        "user_id": 13574344,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
        "display_name": "stackoverflow_user",
        "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 75,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1700955753,
      "creation_date": 1700534522,
      "last_edit_date": 1700773238,
      "question_id": 77520005,
      "share_link": "https://stackoverflow.com/q/77520005",
      "body_markdown": "I&#39;m using Neo4jClient to do the following query for retrieving nodes and relationships by paths.\r\n```\r\n    public Collection&lt;Map&lt;String, Object&gt;&gt; findBookByUniqueIds(List&lt;String&gt; srcUniqueIds, String name) {\r\n\r\n        return neo4jClient.query(\r\n                        &quot;&quot;&quot;\r\n                                MATCH path = (src:Book)-[*1..2]-(target:Book)\r\n                                WHERE src.uniqueId IN $uniqueIds\r\n                                AND toUpper(target.name) = toUpper($name)\r\n                                RETURN nodes(path) AS nodes, relationships(path) AS relations\r\n                                &quot;&quot;&quot;)\r\n                .bind(srcUniqueIds).to(&quot;uniqueIds&quot;)\r\n                .bind(name).to(&quot;name&quot;)\r\n                .fetch().all();\r\n    }\r\n```\r\n\r\nAnd I extract the data like this:\r\n```\r\nCollection&lt;Map&lt;String, Object&gt;&gt; result = findBookByUniqueIds(ids, name);\r\nList&lt;Object&gt; nodes = (List&lt;Object&gt;) result.get(&quot;nodes&quot;);\r\nList&lt;Object&gt; relationships = (List&lt;Object&gt;) result.get(&quot;relations&quot;);\r\n```\r\n\r\nWhen I was trying to cask the node back to entity class:\r\n```\r\nif (nodes.size() == 2) {\r\n    Book book1 = (Book) nodes.get(0);\r\n    Book book2 = (Book) nodes.get(1);\r\n} else if (nodes.size() == 3) {\r\n    Book book1 = (Book) nodes.get(0);\r\n    Author author = (Author) nodes.get(1);\r\n    Book book2 = (Book) nodes.get(2);\r\n}\r\n```\r\nAnd I got the exception `java.lang.ClassCastException: class org.neo4j.driver.internal.InternalNode cannot be cast to class xxx`\r\n\r\nAny idea on how to convert the node back to entity class?\r\n\r\nThanks",
      "link": "https://stackoverflow.com/questions/77520005/spring-data-neo4j-cant-convert-internalnode-back-to-entity-class-when-retrievin",
      "title": "Spring data Neo4j can&#39;t convert InternalNode back to entity class when retrieving paths"
    },
    {
      "tags": ["neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "last_editor": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700587861,
          "last_edit_date": 1700587861,
          "creation_date": 1700586406,
          "answer_id": 77524665,
          "question_id": 77514862,
          "share_link": "https://stackoverflow.com/a/77524665",
          "body_markdown": "You could try this ...\r\n\r\n    MATCH (n:YourNodeLabel)\r\n    RETURN apoc.convert.toHex(n.yourByteArrayProperty) AS hexValue\r\n\r\nI&#39;ve created a  [hex-ORDPATH][1] in a Neo4j user defined function (UDF). That code might help if you want to write a custom UDF. \r\n\r\n\r\n  [1]: https://github.com/waigitdas/Neo4j-Genealogy-PlugIns/blob/main/java%20classes/graph/ordpath.java",
          "link": "https://stackoverflow.com/questions/77514862/display-byte-array-as-hex-string-in-neo4j-browser/77524665#77524665",
          "title": "Display byte array as hex string in Neo4j Browser"
        }
      ],
      "owner": {
        "reputation": 3599,
        "user_id": 1491378,
        "user_type": "registered",
        "accept_rate": 88,
        "profile_image": "https://www.gravatar.com/avatar/ac8b182351a52912a793fcf193d0b02b?s=256&d=identicon&r=PG",
        "display_name": "Hett",
        "link": "https://stackoverflow.com/users/1491378/hett"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700587861,
      "creation_date": 1700473840,
      "question_id": 77514862,
      "share_link": "https://stackoverflow.com/q/77514862",
      "body_markdown": "Is it possible to show data in hex format if I stored data as byte array using Neo4j Browser?\r\nIt is 16 bytes of md5 sum.\r\n",
      "link": "https://stackoverflow.com/questions/77514862/display-byte-array-as-hex-string-in-neo4j-browser",
      "title": "Display byte array as hex string in Neo4j Browser"
    },
    {
      "tags": ["neo4j", "neo4j-parallel-runtime"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701378880,
              "post_id": 77576603,
              "comment_id": 136771780,
              "link": "https://stackoverflow.com/questions/77509091/neo4j-parallel-runtime-query-returns-different-result/77576603#comment136771780_77576603"
            },
            {
              "owner": {
                "reputation": 2407,
                "user_id": 1874594,
                "user_type": "registered",
                "accept_rate": 69,
                "profile_image": "https://i.stack.imgur.com/vS7Eu.jpg?s=256&g=1",
                "display_name": "user1874594",
                "link": "https://stackoverflow.com/users/1874594/user1874594"
              },
              "reply_to_user": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701417709,
              "post_id": 77576603,
              "comment_id": 136775471,
              "link": "https://stackoverflow.com/questions/77509091/neo4j-parallel-runtime-query-returns-different-result/77576603#comment136775471_77576603"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 2407,
            "user_id": 1874594,
            "user_type": "registered",
            "accept_rate": 69,
            "profile_image": "https://i.stack.imgur.com/vS7Eu.jpg?s=256&g=1",
            "display_name": "user1874594",
            "link": "https://stackoverflow.com/users/1874594/user1874594"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1701329442,
          "creation_date": 1701329442,
          "answer_id": 77576603,
          "question_id": 77509091,
          "share_link": "https://stackoverflow.com/a/77576603",
          "body_markdown": " Due the the Parallel nature of `Neo4j` these situations stem  as reasons for what you experienced. \r\n\r\n - Results may not be deterministic, as different threads may finish at different times - use the `ORDER BY` clause \r\n - `PARALLEL runtime` does not support updating queries, such as those using the `CREATE, MERGE, SET, DELETE, or REMOVE` - updating the graph in parallel may cause conflicts or inconsistencies to use  the same to  read  ,use `:begin` and `:commit` commands in `Cypher Shell` to control the transactions or another runtime, such as `SLOTTED or PIPELINED`, for the write queries.\r\n - Also it does not support reading data that has been modified in the same transaction, as this may cause `concurrency` issues or `stale reads` aka you cannot use the `apoc.cypher.mapParallel2` procedure to read data that you have updated in the same transaction  - use another procedure, such as `apoc.cypher.doIt`, or split  transaction into two parts. \r\n\r\nFor situational restrictions  so mentioned , I doubt if they have plans to update. ",
          "link": "https://stackoverflow.com/questions/77509091/neo4j-parallel-runtime-query-returns-different-result/77576603#77576603",
          "title": "Neo4j PARALLEL runtime query returns different result"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "last_editor": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 157,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77576603,
      "answer_count": 1,
      "score": 2,
      "last_activity_date": 1701329442,
      "creation_date": 1700350923,
      "last_edit_date": 1700955372,
      "question_id": 77509091,
      "share_link": "https://stackoverflow.com/q/77509091",
      "body_markdown": "I&#39;m testing the new Neo4j PARALLEL runtime and am unable to pass my tests because my queries return different results (different elements order) compared to SLOTTED or PIPELINED. Do I need to somehow refine these queries so that they work properly on PARALLEL runtime? Do you have any docs on this? Or, are these refinements unnecessary, and the queries should return exactly the same result as on SLOTTED or PIPELINED?\r\n\r\nAlso, there is a limitation `It is not possible to use the parallel runtime if a change has been made to the state of a transaction.` https://neo4j.com/docs/cypher-manual/current/planning-and-tuning/runtimes/reference/\r\n\r\nUnfortunately, I have many scenarios where I currently use `apoc.cypher.mapParallel2` to read data in the same transaction where I&#39;m updating it. I would like to transition to the PARALLEL runtime, but I am unable to do so due to this limitation. Are you planning to overcome this limitation in the future?",
      "link": "https://stackoverflow.com/questions/77509091/neo4j-parallel-runtime-query-returns-different-result",
      "title": "Neo4j PARALLEL runtime query returns different result"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700348035,
              "post_id": 77508731,
              "comment_id": 136644096,
              "link": "https://stackoverflow.com/questions/77508656/practical-way-of-doing-equality-against-multiple-possible-values-in-cypher/77508731#comment136644096_77508731"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1700341881,
          "creation_date": 1700341881,
          "answer_id": 77508731,
          "question_id": 77508656,
          "share_link": "https://stackoverflow.com/a/77508731",
          "body_markdown": "You&#39;re looking for the `ANY` predicate\r\n\r\n```\r\nMATCH p =(mFirst:MoveNode)-[:NEXT_MOVE*${patternLength - 1}]-&gt;(:MoveNode)\r\nWHERE ANY(\r\n  x IN $patterns \r\n  WHERE ( mFirst.move = head(x) AND [m IN nodes(p) | m.move] = x )\r\n)\r\n```",
          "link": "https://stackoverflow.com/questions/77508656/practical-way-of-doing-equality-against-multiple-possible-values-in-cypher/77508731#77508731",
          "title": "Practical Way of Doing Equality Against Multiple Possible Values in Cypher"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77508731,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1700341881,
      "creation_date": 1700340432,
      "question_id": 77508656,
      "share_link": "https://stackoverflow.com/q/77508656",
      "body_markdown": "&gt; This question follows up on [@cybersam&#39;s answer to one of my previous questions](https://stackoverflow.com/a/77499034/4756173), however no previous knowledge about this problem is necessary.\r\n\r\nIn a pattern-search query, a simplified version of [@cybersam&#39;s query here](https://stackoverflow.com/a/77499034/4756173), I would like to, ideally, match paths not only to an input pattern but to all of its isomorphisms (board rotations and reflections) and permutations.\r\n\r\n&gt; A pattern in this case is a list of strings (A-Z) of length 2, e.g. `[&#39;pq&#39;, &#39;dd&#39;, &#39;pp&#39;]`.\r\n\r\nSo, in that query, I would have to create an `OR` statement for each pattern in a pattern list:\r\n\r\n```cypher\r\nMATCH p =   (mFirst:MoveNode)\r\n           -[:NEXT_MOVE*${patternLength - 1}]\r\n          -&gt;(:MoveNode)\r\n\r\nWHERE (\r\n            mFirst.move = HEAD($patterns[0]) \r\n        AND [m IN NODES(p) | m.move] = $patterns[0]\r\n      )\r\n   OR (\r\n            mFirst.move = HEAD($patterns[1]) \r\n        AND [m IN NODES(p) | m.move] = $patterns[1]\r\n      )\r\n   OR (...)\r\n   .\r\n   .\r\n   .\r\n```\r\n\r\nIs there a way of making this programmatic? Cause, this isn&#39;t scalable, since I don&#39;t know how many permutations I&#39;m gonna end up having. ",
      "link": "https://stackoverflow.com/questions/77508656/practical-way-of-doing-equality-against-multiple-possible-values-in-cypher",
      "title": "Practical Way of Doing Equality Against Multiple Possible Values in Cypher"
    },
    {
      "tags": ["neo4j", "neo4j-embedded"],
      "owner": {
        "reputation": 141,
        "user_id": 20340543,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
        "display_name": "Podbrushkin",
        "link": "https://stackoverflow.com/users/20340543/podbrushkin"
      },
      "last_editor": {
        "reputation": 141,
        "user_id": 20340543,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
        "display_name": "Podbrushkin",
        "link": "https://stackoverflow.com/users/20340543/podbrushkin"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1700497512,
      "creation_date": 1700253706,
      "last_edit_date": 1700497512,
      "question_id": 77504521,
      "share_link": "https://stackoverflow.com/q/77504521",
      "body_markdown": "I have a Spring Boot webapp with embedded neo4j and I want to execute custom Cypher and get a response in form of Json. Like that:\r\n```\r\ntry (var tx = graphDatabaseService.beginTx()) {\r\n  org.neo4j.graphdb.Result result = tx.execute(cypherQuery);\r\n  String json = JsonSerializer.writeValueAsString(result);\r\n}\r\n```\r\n\r\nI assume such serializer exists (which can take Result, Node, Relationship etc objects) because there is a `org.neo4j.configuration.connectors.HttpConnector` which enables Http endpoint which allows to do exactly what I need:\r\n\r\nhttps://neo4j.com/docs/http-api/current/query/\r\n```\r\n{\r\n  &quot;results&quot;: [ {\r\n    &quot;columns&quot;: [ &quot;p&quot; ],\r\n    &quot;data&quot;: [ {\r\n      &quot;row&quot;: [ {\r\n        &quot;name&quot;: &quot;Bob&quot;\r\n      } ],\r\n      &quot;meta&quot;: [ {\r\n        &quot;id&quot;: 8,\r\n        &quot;elementId&quot;: &quot;4:0ea4a108-32c5-498c-99e7-95cc67ab5f7d:8&quot;,\r\n        &quot;type&quot;: &quot;node&quot;,\r\n        &quot;deleted&quot;: false\r\n      } ]\r\n    ] }\r\n  ] },\r\n  {\r\n    &quot;columns&quot;: [ &quot;n&quot; ],\r\n    &quot;data&quot;: [ {\r\n      &quot;row&quot;: [ {\r\n        &quot;val&quot;: 1\r\n      } ],\r\n      &quot;meta&quot;: [ {\r\n        &quot;id&quot;: 1,\r\n        &quot;elementId&quot;: &quot;4:0ea4a108-32c5-498c-99e7-95cc67ab5f7d:1&quot;,\r\n        &quot;type&quot;: &quot;node&quot;,\r\n        &quot;deleted&quot;: false\r\n      } ]\r\n    } ]\r\n  } ],\r\n  &quot;errors&quot;: [ {\r\n    &quot;code&quot;: &quot;Neo.ClientError.Statement.ArithmeticError&quot;,\r\n    &quot;message&quot;: &quot;/ by zero&quot;\r\n  } ]\r\n}\r\n```\r\nbut HttpConnector doesn&#39;t work in embedded neo4j. But maybe I can use just serializer, not whole endpoint.\r\n\r\n[This question](https://stackoverflow.com/q/17412784/20340543) and answers show how it can be written manually, but probably such class should exist in `org.neo4j.neo4j` maven artifact already. I can&#39;t find it.\r\n\r\nAnother approach is to use [apoc export json](https://neo4j.com/labs/apoc/4.1/export/json/) function but it requires enabling apoc plugin and there is no info on how to do it for embedded db.",
      "link": "https://stackoverflow.com/questions/77504521/execute-cypher-and-get-json-response-from-embedded-db",
      "title": "Execute Cypher and get Json response from embedded db"
    },
    {
      "tags": ["neo4j", "parallel-processing", "gpu", "neo4j-parallel-runtime"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1700230936,
          "creation_date": 1700230936,
          "answer_id": 77502358,
          "question_id": 77501923,
          "share_link": "https://stackoverflow.com/a/77502358",
          "body_markdown": "The Parallel Runtime is a very powerful mechanism for certain queries to parallelise the processing of a single query (though parallel processing isn&#39;t new when you have multiple parallel queries).\r\n\r\nHowever, GPU&#39;s are not supported by the parallel runtime and it is not really foreseen either.",
          "link": "https://stackoverflow.com/questions/77501923/neo4j-parallel-runtime-and-gpu/77502358#77502358",
          "title": "Neo4j parallel runtime and GPU"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 82,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77502358,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700230936,
      "creation_date": 1700226655,
      "question_id": 77501923,
      "share_link": "https://stackoverflow.com/q/77501923",
      "body_markdown": "Looks like Neo4j is naturally stepping into the world of parallel processing with the brand new parallel runtime in version 5.13.0.\r\n\r\nThus, I have a question: Is it possible with Neo4j to utilize GPU power for parallel processing instead of the CPU? If not, do you have plans to support it?",
      "link": "https://stackoverflow.com/questions/77501923/neo4j-parallel-runtime-and-gpu",
      "title": "Neo4j parallel runtime and GPU"
    },
    {
      "tags": ["recursion", "graph", "neo4j", "tree", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700169200,
              "post_id": 77497956,
              "comment_id": 136624970,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136624970_77497956"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700169251,
              "post_id": 77497956,
              "comment_id": 136624978,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136624978_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700169516,
              "post_id": 77497956,
              "comment_id": 136625010,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625010_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700169649,
              "post_id": 77497956,
              "comment_id": 136625025,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625025_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700169843,
              "post_id": 77497956,
              "comment_id": 136625047,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625047_77497956"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700174928,
              "post_id": 77497956,
              "comment_id": 136625629,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625629_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700176465,
              "post_id": 77497956,
              "comment_id": 136625789,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625789_77497956"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700180944,
              "post_id": 77497956,
              "comment_id": 136626219,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136626219_77497956"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 8,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1700169471,
          "last_edit_date": 1700169471,
          "creation_date": 1700167612,
          "answer_id": 77497956,
          "question_id": 77497411,
          "share_link": "https://stackoverflow.com/a/77497956",
          "body_markdown": "To get the path `p` from the root `GameNode` up to and including the sequence of moves `[&#39;rm&#39;,&#39;ro&#39;]`, you can write the following in Neo4j 5.9+:\r\n```sql\r\nMATCH p = (g:GameNode)-[:NEXT_MOVE]-&gt;+(m1:MoveNode)-[:NEXT_MOVE]-&gt;(m2:MoveNode)\r\nWHERE m1.move = &#39;rm&#39; AND m2.move = &#39;ro&#39;\r\nRETURN p\r\n```\r\nTo get the whole path, up to the last move in the sequence, you need to add a check that there are no further moves:\r\n```sql\r\nMATCH p = (g:GameNode)-[:NEXT_MOVE]-&gt;+(m1:MoveNode)-[:NEXT_MOVE]-&gt;\r\n  (m2:MoveNode)-[:NEXT_MOVE]-&gt;*(lastMove:MoveNode)\r\nWHERE m1.move = &#39;rm&#39; AND m2.move = &#39;ro&#39;\r\n  AND NOT EXISTS { (lastMove)-[:NEXT_MOVE]-&gt;(:MoveNode) }\r\nRETURN p\r\n```\r\nIt would be surprising if there were performance issues: specific enough patterns over small graphs representing each game should not be slow. ",
          "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#77497956",
          "title": "How to (Efficiently) Find Subpaths in Recursive Trees through Cypher (Graph vs Regex)"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700220653,
              "post_id": 77499034,
              "comment_id": 136630484,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630484_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700220772,
              "post_id": 77499034,
              "comment_id": 136630510,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630510_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700221314,
              "post_id": 77499034,
              "comment_id": 136630597,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630597_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700221583,
              "post_id": 77499034,
              "comment_id": 136630658,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630658_77499034"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700236286,
              "post_id": 77499034,
              "comment_id": 136633299,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136633299_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700237488,
              "post_id": 77499034,
              "comment_id": 136633545,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136633545_77499034"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700242364,
              "post_id": 77499034,
              "comment_id": 136634499,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136634499_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700252942,
              "post_id": 77499034,
              "comment_id": 136636097,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136636097_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700340476,
              "post_id": 77499034,
              "comment_id": 136643448,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136643448_77499034"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 9,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1700253284,
          "last_edit_date": 1700253284,
          "creation_date": 1700187843,
          "answer_id": 77499034,
          "question_id": 77497411,
          "share_link": "https://stackoverflow.com/a/77499034",
          "body_markdown": "The query below should be fairly performant in returning the moves in every game that contains the desired sequence of moves. It assumes you:\r\n- Have an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) on `MoveNode.move`,\r\n- Pass the list of desired moves in the `$moves` [parameter](),\r\n- Adjust the length of the variable-length relationship in the first `MATCH` to be 1 less than the length of `$moves`. For example, if `$moves` has 2 items, use `*1` instead of `*2`. *This is admittedly ugly, but Cypher does not support dynamic bounds.*\r\n\r\n#### Query\r\n\r\n    MATCH p1=(m1:MoveNode)-[:NEXT_MOVE*2]-&gt;(m2)\r\n    WHERE m1.move = HEAD($moves) AND [m IN TAIL(NODES(p1)) | m.move] = TAIL($moves)\r\n    MATCH p2 = (m2)-[:NEXT_MOVE*0..]-&gt;(end) WHERE NOT (end)-[:NEXT_MOVE]-&gt;()\r\n    MATCH p3 = (g:GameNode)-[:NEXT_MOVE*]-&gt;(m1)\r\n    RETURN [a IN NODES(p3)[1..-1] | a.move] + $moves + [b IN NODES(p2)[1..] | b.move]\r\n\r\nThe index is used to limit and anchor the search by quickly finding the `m1` nodes (the `MoveNode`s matching the first item in `$moves`), instead of wading through all paths from every `GameNode`. Then the query:\r\n- Filters `m1` by requiring that it is followed by a subpath satisfying the rest of the `$moves` list,\r\n- Finds the sequence of moves that follow each subpath,\r\n- Works backwards from the surviving `m1` nodes to find the corresponding `GameNode`s.\r\n- Constructs and returns the sequence of moves for each matching game.\r\n\r\nSo, this query starts off by using the index to find the first set of relevant nodes, and keeps adding relationships (and end nodes) to what was already found until it finally has the desired results. There is never a need to scan through irrelevant data.",
          "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#77499034",
          "title": "How to (Efficiently) Find Subpaths in Recursive Trees through Cypher (Graph vs Regex)"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 79,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77499034,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1700253284,
      "creation_date": 1700161233,
      "last_edit_date": 1700221543,
      "question_id": 77497411,
      "share_link": "https://stackoverflow.com/q/77497411",
      "body_markdown": "I&#39;m trying to reproduce a Go SGF game tree in Neo4j through Cypher so I can pattern-search through, as a graph. This is the shape of a Go game tree &amp;mdash; based on [Sabaki&#39;s SGF Parser](https://github.com/SabakiHQ/sgf) &amp;mdash;:\r\n\r\n```typescript\r\ntype GameTree = {\r\n  id: number;\r\n  data: { [key: string]: string[] };\r\n  parentId: number | null;\r\n  children: GameTree[];\r\n};\r\n```\r\n\r\n&gt; You can find a reproducible sample of the problem [in this commit](https://github.com/psygo/go_pattern_search/tree/01a11ff85b85e226b2f222aa4743e87842649651).\r\n\r\nSo far, I&#39;ve successfully managed to model it just like it appears in a Go editor&#39;s game tree:\r\n\r\n[![Game Tree on Neo4j Desktop][1]][1]\r\n\r\n&gt; `B` and `W` mean Black and White moves. `AB` and `AW` are &quot;added black or white stones&quot;, for when editing the board position. For this question&#39;s purposes, only `move` matters actually, which has the same value as either `B` or `W`. Board coordinates are given in 2 letters, e.g. column `m` and row `r` gives out the string `&#39;rm&#39;`.\r\n\r\nNow, what I would like to do is return the full path (probably the root node would suffice actually) from the root if a specified subpath (no skipping) is found. So far, I have this, which does work:\r\n\r\n```cypher\r\nMATCH p=(g:GameNode)-[:NEXT_MOVE*]-&gt;()\r\n\r\nWITH g, p,\r\n     [m in TAIL(NODES(p)) | m.move] AS moves\r\n\r\nWITH g, p,\r\n     REDUCE(path = &#39;&#39;, move in moves | path + move) AS joined_moves\r\n\r\nWHERE joined_moves CONTAINS &quot;rmro&quot;\r\n\r\nRETURN g, p, joined_moves\r\n```\r\n\r\nFollowing @cybersam&#39;s answer, I think this could make it more explicit to Neo4j so it uses an index on `m.move` &amp;mdash; e.g. `CREATE INDEX move_node_move_idx FOR (m:MoveNode) ON (m.move)` &amp;mdash;:\r\n\r\n```cypher\r\nMATCH p=(g:GameNode)-[:NEXT_MOVE*]-&gt;(m1:MoveNode)-[:NEXT_MOVE*]-&gt;()\r\n\r\nWHERE m1.move = HEAD([&#39;rm&#39;, &#39;ro&#39;])\r\n\r\nWITH g, p,\r\n     [m in TAIL(NODES(p)) | m.move] AS moves\r\n\r\nWITH g, p,\r\n     REDUCE(path = &#39;&#39;, move in moves | path + move) AS joined_moves\r\n\r\nWHERE joined_moves CONTAINS &quot;rmro&quot;\r\n\r\nRETURN g, p, joined_moves\r\n```\r\n\r\nBut I really don&#39;t know if this type of pattern-search would be efficient enough through Neo4j or other graph databases. I think it could be since, even though most games have 200+ move branches, there aren&#39;t that many of them usually. And the analysis would be on unidirectional branches where order matters (no skipping), so it should probably limit the search space even more.\r\n\r\nAlternatively, I&#39;m considering placing a string with the full path to it in each move node. This way I could use Regexes (I know Regexes can also be modeled as graphs) instead of path searches. That said, if it works, then I think using a SQL database would be probably enough. However, I would probably stick to Neo4j still, cause modeling this as a graph could provide more useful features in the future.\r\n\r\n---\r\n\r\n## References\r\n\r\n- [Stack Overflow - *Neo4j how to match subpath*](https://stackoverflow.com/a/51872011/4756173)\r\n- [Stack Overlflow - *Efficient way of matching a subtree, using cypher in Neo4J?*](https://stackoverflow.com/a/31587455/4756173)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XMF1g.png",
      "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r",
      "title": "How to (Efficiently) Find Subpaths in Recursive Trees through Cypher (Graph vs Regex)"
    },
    {
      "tags": ["recursion", "graph", "neo4j", "tree", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1700167898,
          "last_edit_date": 1700167898,
          "creation_date": 1700145204,
          "answer_id": 77495682,
          "question_id": 77495108,
          "share_link": "https://stackoverflow.com/a/77495682",
          "body_markdown": "If each query execution is for a single chain of moves that are in order of play, and the parent `GameNode` already exists, then you can use the following:\r\n```sql\r\nUNWIND $moveNodes AS move\r\nCALL {\r\n    WITH move\r\n    MATCH (parent:GameNode|MoveNode {game_id: $gameId, id: move.parentId})\r\n    CREATE (parent)-[:NEXT_MOVE]-&gt;(m:MoveNode {game_id: $gameId, id: move.id})\r\n}\r\n```",
          "link": "https://stackoverflow.com/questions/77495108/how-to-recursively-create-a-tree-with-cypher-neo4j/77495682#77495682",
          "title": "How to Recursively Create a Tree with Cypher (Neo4j)"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 56,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77495682,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1700167898,
      "creation_date": 1700140416,
      "last_edit_date": 1700159203,
      "question_id": 77495108,
      "share_link": "https://stackoverflow.com/q/77495108",
      "body_markdown": "I&#39;m trying to replicate an SGF game tree on Neo4j with Cypher. The tree is of this shape:\r\n\r\n```typescript\r\ntype GameTree = {\r\n  id: number;\r\n  data: { [key: string]: string[] };\r\n  parentId: number | null;\r\n  children: GameTree[];\r\n};\r\n```\r\n\r\nThis is the creation query I&#39;m trying to work out:\r\n\r\n```cypher\r\nUNWIND $moves AS move\r\n\r\nMATCH (parent)\r\n\r\nWHERE ((parent:GameNode) OR (parent:MoveNode))\r\n  AND parent.game_id = $gameId\r\n  AND parent.id = move.parentId\r\n\r\nCREATE   (parent)\r\n        -[:NEXT_MOVE]\r\n       -&gt;(:MoveNode{\r\n           game_id: $gameId,\r\n           id:      move.id\r\n         })\r\n```\r\n\r\nInitially, the root of the tree is a `GameNode`, which I create separately, because it holds interesting metadata. Anyways, this won&#39;t work like this because, at the time of the `UNWIND` and `MATCH` clauses, there exists only one parent, the rest of them will/should be created recursively.\r\n\r\nIs there a way of doing this recursive creation in Cypher? Maybe there&#39;s some recursive keyword I can&#39;t seem to find (this seems like such a common kind of problem...)? Maybe there&#39;s a useful APOC procedure somewhere?\r\n\r\nAs a workaround, I&#39;m thinking about creating all the `MoveNode`s first, and then using the query above to string them back together. It would look like this:\r\n\r\n```cypher\r\n// 1. Create All The Move Nodes\r\n\r\nUNWIND $moveNodes AS move\r\n\r\nCREATE (:MoveNode{\r\n         game_id: move.game_id,\r\n         id:      move.id\r\n       })\r\n\r\n// 2. Tie them to their Parents\r\n\r\nWITH move\r\n\r\nMATCH (parent{\r\n        game_id: move.game_id,\r\n        id:      move.parentId\r\n      }),\r\n      (m:MoveNode{\r\n        game_id: move.game_id,\r\n        id:      move.id\r\n      })\r\n\r\nWHERE parent:GameNode\r\n   OR parent:MoveNode\r\n  \r\nCREATE (parent)-[:NEXT_MOVE]-&gt;(m)\r\n```",
      "link": "https://stackoverflow.com/questions/77495108/how-to-recursively-create-a-tree-with-cypher-neo4j",
      "title": "How to Recursively Create a Tree with Cypher (Neo4j)"
    },
    {
      "tags": ["apache-spark", "pyspark", "neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 663,
            "user_id": 2081152,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/bkxUP.jpg?s=256&g=1",
            "display_name": "mamonu",
            "link": "https://stackoverflow.com/users/2081152/mamonu"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1700121618,
          "creation_date": 1700121618,
          "answer_id": 77493083,
          "question_id": 77492233,
          "share_link": "https://stackoverflow.com/a/77493083",
          "body_markdown": "It is certainly possible.\r\nAre you aware of the [Neo4j Spark connector][1]?\r\n\r\n    df.write \\\r\n      .format(&quot;org.neo4j.spark.DataSource&quot;) \\\r\n      .mode(&quot;ErrorIfExists&quot;) \\\r\n      .option(&quot;url&quot;, &quot;bolt://localhost:7687&quot;) \\\r\n      .option(&quot;labels&quot;, &quot;:Person&quot;) \\\r\n      .save()\r\n\r\nAbove is an example on the command on how you can save from Spark to Neo4j. In this case it saves &quot;:Person&quot; nodes.\r\n\r\n\r\nOf course you will need to create your dataframe in such a format that it makes sense as graph data. \r\n\r\nProbably something like Source,Destination,Weight or something like that. \r\nOr as nodes like the code above.\r\n\r\nWithout knowing the schema of your data I cant help any more I am afraid.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/spark/current/python/",
          "link": "https://stackoverflow.com/questions/77492233/connect-apis-parse-the-result-using-pyspark-and-store-it-in-neo4j/77493083#77493083",
          "title": "Connect APIs, Parse the result using pyspark and store it in neo4j"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 21190101,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp6orUGtT7C_T_fu4tOKasCjkqum7ElZkcw5mezr=k-s256",
        "display_name": "Sathyamoorthy",
        "link": "https://stackoverflow.com/users/21190101/sathyamoorthy"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 32,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700121618,
      "creation_date": 1700107404,
      "question_id": 77492233,
      "share_link": "https://stackoverflow.com/q/77492233",
      "body_markdown": "My Requirement is straight forward. I have a API call which retrieves huge amount of data. I want to use PySpark to convert those as Dataframes and write into Neo4J. \r\n\r\nConvert the API result into Dataframes and store it in Neo4j, Could you please let me know if that&#39;s possible?",
      "link": "https://stackoverflow.com/questions/77492233/connect-apis-parse-the-result-using-pyspark-and-store-it-in-neo4j",
      "title": "Connect APIs, Parse the result using pyspark and store it in neo4j"
    },
    {
      "tags": ["python", "neo4j", "langchain"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700121099,
          "post_id": 77492026,
          "comment_id": 136616228,
          "link": "https://stackoverflow.com/questions/77492026/query-gpt4all-local-model-with-langchain-and-many-txt-files-keyerror-input#comment136616228_77492026"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1155,
                "user_id": 10018602,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/d3e1f50ec8a4db6643a06cbef195b494?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "wildcat89",
                "link": "https://stackoverflow.com/users/10018602/wildcat89"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700192203,
              "post_id": 77492979,
              "comment_id": 136627064,
              "link": "https://stackoverflow.com/questions/77492026/query-gpt4all-local-model-with-langchain-and-many-txt-files-keyerror-input/77492979#comment136627064_77492979"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1700120820,
          "last_edit_date": 1700120820,
          "creation_date": 1700120349,
          "answer_id": 77492979,
          "question_id": 77492026,
          "share_link": "https://stackoverflow.com/a/77492979",
          "body_markdown": "With respect to the `KeyError: &#39;input_variables&#39;` error: as [documented](https://python.langchain.com/docs/modules/model_io/prompts/prompt_templates/), the `PromptTemplate` parameter for input variables is named `input_variables`. So you need to change your `variables` parameter name to `input_variables`.\r\n\r\n*And, yes, the error message should be much better worded.*",
          "link": "https://stackoverflow.com/questions/77492026/query-gpt4all-local-model-with-langchain-and-many-txt-files-keyerror-input/77492979#77492979",
          "title": "Query GPT4All local model with Langchain and many .txt files - KeyError: &#39;input_variables&#39;"
        }
      ],
      "owner": {
        "reputation": 1155,
        "user_id": 10018602,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d3e1f50ec8a4db6643a06cbef195b494?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "wildcat89",
        "link": "https://stackoverflow.com/users/10018602/wildcat89"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 798,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700120820,
      "creation_date": 1700103114,
      "question_id": 77492026,
      "share_link": "https://stackoverflow.com/q/77492026",
      "body_markdown": "`python 3.8, Windows 10, neo4j==5.14.1, langchain==0.0.336`\r\n\r\nI&#39;m attempting to utilize a local Langchain model (GPT4All) to assist me in converting a corpus of loaded `.txt` files into a `neo4j` data structure through querying. I have provided a minimal reproducible example code below, along with the references to the article/repo that I&#39;m attempting to emulate. I have also provided a &quot;context&quot; that should be included in the query, along with all the `Document` objects. I&#39;m still learning how to use `Langchain` so I really don&#39;t know what I&#39;m doing yet, but the current traceback I&#39;m getting looks like this:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File &quot;.\\neo4jmain.py&quot;, line xx, in &lt;module&gt;\r\n    prompt_template = PromptTemplate(\r\n  File &quot;C:\\Users\\chalu\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\langchain\\load\\serializable.py&quot;, line 97, in __init__\r\n    super().__init__(**kwargs)\r\n  File &quot;pydantic\\main.py&quot;, line 339, in pydantic.main.BaseModel.__init__\r\n  File &quot;pydantic\\main.py&quot;, line 1102, in pydantic.main.validate_model\r\n  File &quot;C:\\Users\\chalu\\AppData\\Local\\Programs\\Python\\Python38\\lib\\site-packages\\langchain\\schema\\prompt_template.py&quot;, line 76, in validate_variable_names\r\n    if &quot;stop&quot; in values[&quot;input_variables&quot;]:\r\nKeyError: &#39;input_variables&#39;\r\n```\r\n\r\nAs you&#39;ll see, I&#39;m literally not defining `input_variables` anywhere, so I assume this is a default behaviour of Langchain, but again, not sure. I was also getting an error:\r\n\r\n```\r\nLLaMA ERROR: The prompt is 5161 tokens and the context window is 2048!\r\nERROR: The prompt size exceeds the context window size and cannot be processed.\r\n```\r\n\r\n...which is clearly a result of the query string itself being too big. I want to be able to query my documents for the answer, while providing the model with the Documents to reference. How can I do this? The Langchain documentation is not great for noobies in this space, it&#39;s all over the place and lacks MANY, SIMPLE use cases for noobies so I&#39;m asking it here.\r\n\r\n```\r\n# https://medium.com/neo4j/enhanced-qa-integrating-unstructured-and-graph-knowledge-using-neo4j-and-langchain-6abf6fc24c27\r\n# https://github.com/sauravjoshi23/ai/blob/main/retrieval%20augmented%20generation/integrated-qa-neo4j-langchain.ipynb\r\n\r\n# Script to convert a corpus of many text files into a neo4j graph\r\n\r\n# Imports\r\nimport os\r\nfrom langchain.document_loaders import TextLoader\r\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\r\nfrom langchain.llms.gpt4all import GPT4All\r\nfrom langchain.prompts import PromptTemplate\r\nfrom transformers import AutoTokenizer\r\n\r\n# Load tokenizer\r\ntokenizer = AutoTokenizer.from_pretrained(&quot;bert-base-uncased&quot;)\r\n\r\ndef bert_len(text):\r\n    &quot;&quot;&quot;Return the length of a text in BERT tokens.&quot;&quot;&quot;\r\n    tokens = tokenizer.encode(text)\r\n    return len(tokens)\r\n\r\ndef get_files(path: str) -&gt; list:\r\n    &quot;&quot;&quot;Return a list of all files in a directory, recursively.&quot;&quot;&quot;\r\n    files = []\r\n    for file in os.listdir(path):\r\n        file_path = os.path.join(path, file)\r\n        if os.path.isdir(file_path):\r\n            files.extend(get_files(file_path))\r\n        else:\r\n            files.append(file_path)\r\n    return files\r\n\r\n# Get the text files\r\nall_txt_files = get_files(&#39;data&#39;)\r\nraw_txt_files = []\r\nfor current_file in all_txt_files:\r\n    raw_txt_files.extend(TextLoader(current_file, encoding=&#39;utf-8&#39;).load())\r\n\r\n# Create a text splitter object that will help us split the text into chunks\r\ntext_splitter = RecursiveCharacterTextSplitter(\r\n    chunk_size = 1024, # 200,\r\n    chunk_overlap = 128, # 20\r\n    length_function = bert_len,\r\n    separators=[&#39;\\n\\n&#39;, &#39;\\n&#39;, &#39; &#39;, &#39;&#39;],\r\n)\r\n\r\n# Split the text into &quot;documents&quot;\r\ndocuments = text_splitter.create_documents([raw_txt_files[0].page_content])\r\n\r\n# Utilizing these Document objects, we want to query the GPT4All model to help us create\r\n# a JSON object that contains the ontology of terms mentioned in the given context,\r\n# while mitigating &quot;max_tokens&quot; error.\r\n# Create a PromptTemplate object that will help us create the prompt for GPT4All(?)\r\nprompt_template = PromptTemplate(\r\n    template = &quot;&quot;&quot;\r\n    You are a network graph maker who extracts terms and their relations from a given context.\r\n    You are provided with a context chunk (delimited by ```). Your task is to extract the ontology\r\n    of terms mentioned in the given context. These terms should represent the key concepts as per the context.\r\n    \r\n    Thought 1: While traversing through each sentence, Think about the key terms mentioned in it.\r\n        Terms may include object, entity, location, organization, person,\r\n        condition, acronym, documents, service, concept, etc.\r\n        Terms should be as atomistic as possible\r\n    \r\n    Thought 2: Think about how these terms can have one on one relation with other terms.\r\n        Terms that are mentioned in the same sentence or the same paragraph are typically related to each other.\r\n        Terms can be related to many other terms\r\n        \r\n    Thought 3: Find out the relation between each such related pair of terms.\r\n\r\n    Format your output as a list of json. Each element of the list contains\r\n    a pair of terms and the relation between them, like the following:\r\n    [Dict(&quot;node_1&quot;: &quot;A concept from extracted ontology&quot;,\r\n            &quot;node_2&quot;: &quot;A related concept from extracted ontology&quot;,\r\n            &quot;edge&quot;: &quot;relationship between the two concepts, node_1 and node_2 in one or two sentences&quot;,\r\n        ),\r\n    Dict(&quot;node_1&quot;: &quot;A concept from extracted ontology&quot;,\r\n        &quot;node_2&quot;: &quot;A related concept from extracted ontology&quot;,\r\n        &quot;edge&quot;: &quot;relationship between the two concepts, node_1 and node_2 in one or two sentences&quot;,\r\n    ),\r\n    Dict(...)]\r\n    Context Documents: {documents}\r\n    &quot;&quot;&quot;,\r\n    variables = {\r\n        &quot;documents&quot;: documents,\r\n    }\r\n)\r\n\r\n# Create a GPT4All object that will help us query the GPT4All model\r\nllm = GPT4All(\r\n    model=r&quot;C:\\Users\\chalu\\AppData\\Local\\nomic.ai\\GPT4All\\gpt4all-falcon-q4_0.gguf&quot;,\r\n    n_threads=3,\r\n    max_tokens=5162, # &lt;-- attempt to mitigate &quot;max_tokens&quot; error\r\n    verbose=True,\r\n)\r\n\r\n# Get the response from GPT-4-All\r\nresponse = llm(prompt_template)\r\nprint(response)\r\n```",
      "link": "https://stackoverflow.com/questions/77492026/query-gpt4all-local-model-with-langchain-and-many-txt-files-keyerror-input",
      "title": "Query GPT4All local model with Langchain and many .txt files - KeyError: &#39;input_variables&#39;"
    },
    {
      "tags": [
        "spring",
        "spring-boot",
        "neo4j",
        "spring-data",
        "spring-data-neo4j"
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 27,
                "user_id": 13574344,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
                "display_name": "stackoverflow_user",
                "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700246060,
              "post_id": 77501827,
              "comment_id": 136635077,
              "link": "https://stackoverflow.com/questions/77490723/spring-data-neo4j-client-throws-exception-when-theres-no-match-in-database/77501827#comment136635077_77501827"
            },
            {
              "owner": {
                "reputation": 7992,
                "user_id": 2650436,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
                "display_name": "meistermeier",
                "link": "https://stackoverflow.com/users/2650436/meistermeier"
              },
              "reply_to_user": {
                "reputation": 27,
                "user_id": 13574344,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
                "display_name": "stackoverflow_user",
                "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700470962,
              "post_id": 77501827,
              "comment_id": 136654101,
              "link": "https://stackoverflow.com/questions/77490723/spring-data-neo4j-client-throws-exception-when-theres-no-match-in-database/77501827#comment136654101_77501827"
            },
            {
              "owner": {
                "reputation": 27,
                "user_id": 13574344,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
                "display_name": "stackoverflow_user",
                "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700512026,
              "post_id": 77501827,
              "comment_id": 136661435,
              "link": "https://stackoverflow.com/questions/77490723/spring-data-neo4j-client-throws-exception-when-theres-no-match-in-database/77501827#comment136661435_77501827"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 7992,
            "user_id": 2650436,
            "user_type": "registered",
            "accept_rate": 80,
            "profile_image": "https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG",
            "display_name": "meistermeier",
            "link": "https://stackoverflow.com/users/2650436/meistermeier"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700225652,
          "creation_date": 1700225652,
          "answer_id": 77501827,
          "question_id": 77490723,
          "share_link": "https://stackoverflow.com/a/77501827",
          "body_markdown": "You could modify your mapping code to\r\n```\r\nMapValue nodePair = (MapValue) record.get(&quot;nodePair&quot;);\r\nvar src = mappingFunction.apply(typeSystem, nodePair.get(&quot;src&quot;));\r\nif (!nodePair.get(&quot;target&quot;).isNull()) {\r\n\tvar target = mappingFunction.apply(typeSystem, nodePair.get(&quot;target&quot;));\r\n\treturn new NodePair(src, target);\r\n}\r\nreturn new NodePair(src, null);\r\n```\r\nand check the `null` value that the driver returns in this case.\r\n\r\n(Also answered this at https://github.com/spring-projects/spring-data-neo4j/issues/2821 but wanted to be sure that the answer can be discovered also here by others having the same problem)",
          "link": "https://stackoverflow.com/questions/77490723/spring-data-neo4j-client-throws-exception-when-theres-no-match-in-database/77501827#77501827",
          "title": "Spring data neo4j client throws exception when there&#39;s no match in database"
        }
      ],
      "owner": {
        "reputation": 27,
        "user_id": 13574344,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
        "display_name": "stackoverflow_user",
        "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 64,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700225652,
      "creation_date": 1700080341,
      "question_id": 77490723,
      "share_link": "https://stackoverflow.com/q/77490723",
      "body_markdown": "I&#39;m using Neo4jClient to do the query since my source and target node have the same label.\r\n\r\nFollowing is how I do the query\r\n\r\n```\r\n@Repository\r\npublic class Neo4jClientRepository {\r\n    @Autowired\r\n    private Neo4jMappingContext neo4jMappingContext;\r\n\r\n    @Autowired\r\n    private Neo4jClient neo4jClient;\r\n\r\n    public Collection&lt;NodePair&gt; findNodesByUniqueIds(List&lt;String&gt; srcUniqueIds, String nodeName) {\r\n        BiFunction&lt;TypeSystem, MapAccessor, Node&gt; mappingFunction = neo4jMappingContext.getRequiredMappingFunctionFor(Node.class);\r\n\r\n        return neo4jClient.query(\r\n                        &quot;&quot;&quot;\r\n                                MATCH (src:Node)\r\n                                WHERE src.uniqueId IN $uniqueIds\r\n                                OPTIONAL MATCH (src:Node)-[*1..2]-(target:Node)\r\n                                WHERE toUpper(target.name) = toUpper($name)\r\n                                RETURN {src: src, target: target} AS nodePair\r\n                                &quot;&quot;&quot;)\r\n                .bind(srcUniqueIds).to(&quot;uniqueIds&quot;)\r\n                .bind(nodeName).to(&quot;name&quot;)\r\n                .fetchAs(NodePair.class)\r\n                .mappedBy((typeSystem, record) -&gt; {\r\n                        MapValue nodePair = (MapValue) record.get(&quot;nodePair&quot;);\r\n                        var src = mappingFunction.apply(typeSystem, nodePair.get(&quot;src&quot;));\r\n                        var target = mappingFunction.apply(typeSystem, nodePair.get(&quot;target&quot;));\r\n                    return new NodePair(src, target);\r\n                })\r\n                .all();\r\n    }\r\n}\r\n```\r\nThe function works fine when there&#39;s a match in the database.\r\n\r\nHowever, for some business cases, the above query doesn&#39;t necessarily have a match, meaning it will return empty results based on different inputs. When there&#39;s no match, the following exception will be thrown\r\n```\r\norg.springframework.dao.InvalidDataAccessApiUsageException: NULL is not iterable; Error code &#39;N/A&#39;\r\n\tat org.springframework.data.neo4j.core.Neo4jPersistenceExceptionTranslator.translateImpl(Neo4jPersistenceExceptionTranslator.java:107)\r\n\tat org.springframework.data.neo4j.core.Neo4jPersistenceExceptionTranslator.translateExceptionIfPossible(Neo4jPersistenceExceptionTranslator.java:81)\r\n\tat org.springframework.data.neo4j.core.DefaultNeo4jClient.potentiallyConvertRuntimeException(DefaultNeo4jClient.java:230)\r\n\tat org.springframework.data.neo4j.core.DefaultNeo4jClient$DefaultRecordFetchSpec.all(DefaultNeo4jClient.java:488)\r\n```\r\n\r\nIs there a way to do a null check before the result being mapped to entity class? Or how could I avoid this kind of situation?\r\n\r\nThanks",
      "link": "https://stackoverflow.com/questions/77490723/spring-data-neo4j-client-throws-exception-when-theres-no-match-in-database",
      "title": "Spring data neo4j client throws exception when there&#39;s no match in database"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1955,
                "user_id": 554481,
                "user_type": "registered",
                "accept_rate": 43,
                "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
                "display_name": "user554481",
                "link": "https://stackoverflow.com/users/554481/user554481"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700093770,
              "post_id": 77490681,
              "comment_id": 136613838,
              "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77490681#comment136613838_77490681"
            },
            {
              "owner": {
                "reputation": 19639,
                "user_id": 2662355,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
                "display_name": "Christophe Willemsen",
                "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
              },
              "reply_to_user": {
                "reputation": 1955,
                "user_id": 554481,
                "user_type": "registered",
                "accept_rate": 43,
                "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
                "display_name": "user554481",
                "link": "https://stackoverflow.com/users/554481/user554481"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700127839,
              "post_id": 77490681,
              "comment_id": 136617398,
              "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77490681#comment136617398_77490681"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700079732,
          "creation_date": 1700079732,
          "answer_id": 77490681,
          "question_id": 77484411,
          "share_link": "https://stackoverflow.com/a/77490681",
          "body_markdown": "It is achievable with the following query ( added comments )\r\n\r\n```cypher\r\n// simulate your input\r\nWITH &quot;a.b.c.d&quot; AS pkg \r\n// split on the dot, producing an array \r\nWITH split(pkg, &quot;.&quot;) AS parts [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;]\r\n// iterating of the array\r\nUNWIND parts AS part \r\n// MERGE (match or create) the module with the name as id ( up to you which property to use )\r\nMERGE (m:Module {id: part}) \r\n// break and introduce a variable being an array of the nodes created or matched\r\nWITH collect(m) AS modules \r\n// use APOC to link those nodes together with the NEXT relationship\r\nCALL apoc.nodes.link(modules,&#39;NEXT&#39;) \r\n```\r\n\r\nIt produces such graph\r\n\r\n[![enter image description here][1]][1]\r\n\r\nLater on, if you try to do the same with module paths that do already exist, it will do nothing, for eg after the above, the following query will not create anything\r\n\r\n```\r\nWITH &quot;a.b.c&quot; AS pkg\r\nWITH split(pkg, &quot;.&quot;) AS parts\r\nUNWIND parts AS part\r\nMERGE (m:Module {id: part})\r\nWITH collect(m) AS modules\r\nCALL apoc.nodes.link(modules,&#39;NEXT&#39;)\r\n```\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gVSf0.png\r\n  [2]: https://i.stack.imgur.com/G7VIG.png",
          "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77490681#77490681",
          "title": "Create all nonexistent nodes and edges if path doesn&#39;t exist"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1700092735,
          "creation_date": 1700092735,
          "answer_id": 77491575,
          "question_id": 77484411,
          "share_link": "https://stackoverflow.com/a/77491575",
          "body_markdown": "You can use a pure Cypher approach with the following:\r\n```\r\nFOREACH (i IN range(0, size($module_path) - 2) | \r\n           MERGE (l:Module {name: $module_path[i]})\r\n           MERGE (r:Module {name: $module_path[i+1]})          \r\n           MERGE (l)-[:contains]-&gt;(r) );\r\n```\r\nYou can test how this works with the data in your question:\r\n```\r\nUNWIND [[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;],[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;e&#39;],[&#39;a&#39;],[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;],\r\n        [&#39;a&#39;,&#39;b&#39;]] AS modules\r\nFOREACH (i IN range(0, size(modules) - 2) | \r\n            MERGE (l:Module {name: modules[i]})\r\n            MERGE (r:Module {name: modules[i+1]})          \r\n            MERGE (l)-[:contains]-&gt;(r) )\r\n```\r\nHere is the result:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T7cEA.png",
          "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77491575#77491575",
          "title": "Create all nonexistent nodes and edges if path doesn&#39;t exist"
        }
      ],
      "owner": {
        "reputation": 1955,
        "user_id": 554481,
        "user_type": "registered",
        "accept_rate": 43,
        "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
        "display_name": "user554481",
        "link": "https://stackoverflow.com/users/554481/user554481"
      },
      "last_editor": {
        "reputation": 1955,
        "user_id": 554481,
        "user_type": "registered",
        "accept_rate": 43,
        "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
        "display_name": "user554481",
        "link": "https://stackoverflow.com/users/554481/user554481"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1700094045,
      "creation_date": 1700004397,
      "last_edit_date": 1700094045,
      "question_id": 77484411,
      "share_link": "https://stackoverflow.com/q/77484411",
      "body_markdown": "I want to represent the modules of a Python package as nodes in a neo4j graph. I get inputs like the following and have to update the graph if the module hasn&#39;t already been included. Let&#39;s say my inputs look like this:\r\n\r\n```\r\na.b.c.d\r\na.b.c.e\r\na\r\na.b.c\r\na.b\r\n```\r\n\r\nIf `a.b.c` already exists, I don&#39;t want to recreate those nodes when I encounter `a.b.c.d`. I would only want to make a new node called `d` and connect it to `c`. Likewise if I get `a.b.c` and none of those nodes exist yet, then I want to create all of the nodes and connect them accordingly. My real inputs can have an arbitrary number of nodes per path, so I&#39;d like a Cypher query that can handle arbitrary path lengths.\r\n\r\nI&#39;m new to Cypher. Here was my first attempt.\r\n\r\n```cypher\r\nMERGE p=(module:Module {name: $module_name})\r\nWITH p, module\r\nMATCH (package:Module)-[:contains*]-&gt;(module)\r\nWHERE [x in nodes(p) | x.name] = $module_path\r\n```\r\n\r\nHowever, Cypher gives me the following error:\r\n\r\n&gt; Query cannot conclude with MATCH\r\n\r\nI also tried this:\r\n```\r\nMERGE p=(:Module)-[:contains*]-&gt;(:Module)\r\nWHERE [x in nodes(p) | x.name] = $module_path\r\n```\r\n\r\nBut then Cypher complains about the presence of `WHERE`.\r\n\r\nNote that I&#39;m using the neo4j Python library to run this query, and I pass in parameters like this: `{&quot;module_path&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;module_name&quot;:&quot;c&quot;}`. I&#39;m happy to parameterize my query differently if there is a better way, but I don&#39;t think that is the source of my errors.\r\n\r\nI&#39;m using neo4j `5.12`, community edition.",
      "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist",
      "title": "Create all nonexistent nodes and edges if path doesn&#39;t exist"
    },
    {
      "tags": ["if-statement", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699978993,
          "post_id": 77482002,
          "comment_id": 136597240,
          "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j#comment136597240_77482002"
        },
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699979207,
          "post_id": 77482002,
          "comment_id": 136597284,
          "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j#comment136597284_77482002"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1699979124,
          "creation_date": 1699979124,
          "answer_id": 77482258,
          "question_id": 77482002,
          "share_link": "https://stackoverflow.com/a/77482258",
          "body_markdown": "It looks like you are looking for `WHERE`:\r\n```\r\nMATCH (n:person)&lt;-[r:aetei]-(m:person)\r\nWHERE m.ai &gt;= 2 \r\nRETURN n, m, r\r\n```",
          "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j/77482258#77482258",
          "title": "testing value in NEO4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 6380243,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a87ef44332d0aafe624182b1861794ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Olivier Caignart",
        "link": "https://stackoverflow.com/users/6380243/olivier-caignart"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 37,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77482258,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699994855,
      "creation_date": 1699976941,
      "last_edit_date": 1699994855,
      "question_id": 77482002,
      "share_link": "https://stackoverflow.com/q/77482002",
      "body_markdown": "I&#39;m trying to get around IF queries in NEO4J.\r\n\r\nSomething like (if I could use  IF):\r\n\r\n    MATCH (n:person)&lt;-[r:aetei]-(m:person)    \r\n    IF m.ai &gt;= 2\r\n    RETURN n, m, r\r\n\r\nwith `aetei` being a relationship between persons, and `ai` an attribute (obviously).\r\n\r\nI tried some queries with foreach, but without results as I don&#39;t understand what to put after the | and how to get into the return. \r\nI&#39;ve seen some examples with queries in the RETURN ... is that possible ?\r\ngreetings\r\n\r\nI tried several solutions like FOREACH or CASE, but nothing worked. I guess I&#39;m too fresh on NEO4J to really get what &#39;im doing. \r\nShould i install apoc ?",
      "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j",
      "title": "testing value in NEO4j"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699900787,
              "post_id": 77473606,
              "comment_id": 136586392,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136586392_77473606"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699910401,
              "post_id": 77473606,
              "comment_id": 136587876,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136587876_77473606"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699974367,
              "post_id": 77473606,
              "comment_id": 136596195,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136596195_77473606"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699979652,
              "post_id": 77473606,
              "comment_id": 136597378,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136597378_77473606"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1700008382,
          "last_edit_date": 1700008382,
          "creation_date": 1699875448,
          "answer_id": 77473606,
          "question_id": 77473139,
          "share_link": "https://stackoverflow.com/a/77473606",
          "body_markdown": "If you are inferring the possible properties from the `Person` nodes in the `MATCH`, then you can get the count of non-empty properties with the following:\r\n```sql\r\nMATCH (p:Person)\r\nUNWIND keys(p) AS key\r\nWITH key, CASE WHEN p[key] &lt;&gt; &quot;&quot; THEN 1 ELSE 0 END AS isNonEmpty\r\nRETURN key, sum(isNonEmpty) AS cnt\r\nORDER BY key\r\n```\r\nNote that because Neo4j treats null properties as non-existent, then if none of the nodes returned by the `MATCH` statement has the property, those properties can&#39;t be inferred.\r\n\r\nThe `CASE` can easily be adapted to exclude other property values from the count. For example, to exclude empty lists, you can write:\r\n\r\n```sql\r\nMATCH (p:Person)\r\nUNWIND keys(p) AS key\r\nWITH key, \r\n     CASE p[key]\r\n       WHEN [] THEN 0 \r\n       WHEN &quot;&quot; THEN 0\r\n       WHEN 0 THEN 0\r\n       ELSE 1 \r\n     END AS isNonEmpty\r\nRETURN key, sum(isNonEmpty) AS cnt\r\nORDER BY key\r\n```\r\n\r\nIf you know the properties in advance because, for example, you know the schema, then you could provide them as a list or set of records. For example, if the properties were `&#39;a&#39;` through to `&#39;g&#39;`, you could use the following:\r\n```sql\r\nUNWIND [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;] AS key\r\nMATCH (p)\r\nWITH key, CASE WHEN p[key] &lt;&gt; &quot;&quot; THEN 1 ELSE 0 END AS isNonEmpty\r\nRETURN key, sum(isNonEmpty) AS cnt\r\nORDER BY key\r\n```",
          "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#77473606",
          "title": "Noe4j : how to get property names with count of non-null or non-empty value for a given node label"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699974204,
              "post_id": 77475985,
              "comment_id": 136596156,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77475985#comment136596156_77475985"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699994628,
              "post_id": 77475985,
              "comment_id": 136599893,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77475985#comment136599893_77475985"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699996285,
          "last_edit_date": 1699996285,
          "creation_date": 1699899242,
          "answer_id": 77475985,
          "question_id": 77473139,
          "share_link": "https://stackoverflow.com/a/77475985",
          "body_markdown": "[UPDATED]\r\n\r\n[Aggregating functions](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/) like `COUNT` already group by non-aggregating expressions like `key`, so `DISTINCT` is not needed. And comparisons to `NULL` are considered `false` by `WHERE`, so an explicit `NULL` test would be redundant.\r\n\r\nHere is a query that uses:\r\n- [ISEMPTY](https://neo4j.com/docs/cypher-manual/current/functions/predicate/#functions-isempty) to detect all &quot;empty&quot; properties (with `&quot;&quot;`, `[]`, or `{}` values).\r\n- [TOINTEGER](https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-tointeger) to convert booleans to 1 (for `true`) or 0.\r\n\r\nIt will also return a `0` count for properties that are always empty.\r\n\r\n    MATCH (p:Person)\r\n    UNWIND KEYS(p) AS key\r\n    RETURN key, SUM(TOINTEGER(NOT ISEMPTY(p[key]))) AS cnt \r\n    ORDER BY key\r\n\r\nYou should [PROFILE](https://neo4j.com/docs/cypher-manual/current/planning-and-tuning/query-tuning/#how-do-i-profile-a-query) the queries in the proposed answers to your question see which one uses the fewest DB hits.\r\n\r\nAlso, if it makes sense, you should consider removing all properties that have an empty string value if they should be considered as non-existent. That would allow you to use evern simpler and faster queries.",
          "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77475985#77475985",
          "title": "Noe4j : how to get property names with count of non-null or non-empty value for a given node label"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 13954862,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
        "display_name": "Tony Riddle",
        "link": "https://stackoverflow.com/users/13954862/tony-riddle"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 78,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77473606,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1700008382,
      "creation_date": 1699870636,
      "question_id": 77473139,
      "share_link": "https://stackoverflow.com/q/77473139",
      "body_markdown": "So there is a requirement of counting the number of occurrences of non null and non empty values of all properties for a given node label.\r\n\r\nFor example, \r\n```\r\nMATCH(p:Person) \r\nWHERE p.name IS NOT NULL and p.name &lt;&gt; &quot;&quot; \r\nRETURN COUNT(p.name);\r\n```\r\n\r\nThis gives me a count for name properties for node label ```Person```\r\nI have to get the count of such other 200 properties for this node label. I am able to get the count of the properties but I am not sure for conditional count like the above. Anything would be helpful as I have just started learning neo4j.\r\n\r\nThe query I am using for all properties count is \r\n```\r\nMATCH(p:Person)\r\nWITH p\r\nUNWIND keys(p) as key\r\nWITH key, COUNT(keys(p)) as cnt\r\nRETURN DISTINCT key, cnt\r\nORDER BY key\r\n```\r\n\r\n\r\nWhat needs to be modified in the query? Or my query is wrong to start with. Thanks in advance.",
      "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for",
      "title": "Noe4j : how to get property names with count of non-null or non-empty value for a given node label"
    },
    {
      "tags": ["neo4j", "cypher", "query-optimization"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699891704,
          "post_id": 77471207,
          "comment_id": 136584787,
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition#comment136584787_77471207"
        },
        {
          "owner": {
            "reputation": 24739,
            "user_id": 1219755,
            "user_type": "registered",
            "accept_rate": 84,
            "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
            "display_name": "alexanoid",
            "link": "https://stackoverflow.com/users/1219755/alexanoid"
          },
          "reply_to_user": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699895496,
          "post_id": 77471207,
          "comment_id": 136585549,
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition#comment136585549_77471207"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699901890,
          "post_id": 77471207,
          "comment_id": 136586553,
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition#comment136586553_77471207"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699906391,
              "post_id": 77476221,
              "comment_id": 136587240,
              "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition/77476221#comment136587240_77476221"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699910987,
              "post_id": 77476221,
              "comment_id": 136587954,
              "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition/77476221#comment136587954_77476221"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699905701,
          "last_edit_date": 1699905701,
          "creation_date": 1699901918,
          "answer_id": 77476221,
          "question_id": 77471207,
          "share_link": "https://stackoverflow.com/a/77476221",
          "body_markdown": "In `(childDStatCriterionAvgVoteWeight = 0 OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight OR criterionAvgVoteWeight IS NULL)`:\r\n\r\n- You should test `criterionAvgVoteWeight IS NULL` first. That way, if it is `NULL`, then you would not waste time testing with a `NULL` value in the `childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight` expression (which would be considered `false`), and you would also not need to test `childDStatCriterionAvgVoteWeight = 0`. This could be a big win if the value is frequently `NULL`.\r\n- If `criterionAvgVoteWeight` is always &gt;= 0 (when it is not `NULL`), then the `childDStatCriterionAvgVoteWeight = 0` test can be eliminated completely.\r\n\r\nIn short, you could consider using this expression instead: `(criterionAvgVoteWeight IS NULL OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight)`.\r\n\r\nSimilar considerations apply to `(childDStatCriterionExperienceMonth = 0 OR childDStatCriterionExperienceMonth &lt;= criterionExperienceMonth OR criterionExperienceMonth IS NULL)`.\r\n\r\nThese changes may save some time, depending on your actual data characteristics, but filtering is not free.",
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition/77476221#77476221",
          "title": "Neo4j Cypher query performnce optimization with WHERE condition"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 50,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77476221,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699905701,
      "creation_date": 1699835053,
      "last_edit_date": 1699901877,
      "question_id": 77471207,
      "share_link": "https://stackoverflow.com/q/77471207",
      "body_markdown": "I have the following Cypher query:\r\n    \r\n    PROFILE\r\n    MATCH (childDStat:JobableStatistic {jobableId: childD.id}) \r\n    WITH collect({`childDStat`:childDStat, `childD`:childD}) as childDStats \r\n    CALL apoc.cypher.mapParallel2(\r\n      &quot; WITH _.childD as childD, _.childDStat as childDStat \r\n        WITH childD, childDStat \r\n        UNWIND childD.detailedCriterionIds as dCId \r\n        WITH childD, childDStat, dCId + coalesce(childDStat[&#39;replaceableCriterionIds.&#39; + dCId],[]) as cGroup \r\n        WITH childD, childDStat, cGroup \r\n        WHERE NOT AlL(x IN cGroup WHERE x IN $zeroCriterionIds ) \r\n        WITH childD, childDStat, collect(cGroup) as cGroups \r\n        WHERE size(cGroups) &gt;= size(childD.detailedCriterionIds) \r\n        UNWIND cGroups as cGroup \r\n        WITH childD, childDStat, cGroup \r\n        WHERE ANY(x IN cGroup WHERE x IN $detailedCriterionIds) \r\n        WITH childD, childDStat, collect(cGroup) as cGroups \r\n        WHERE size(cGroups) &gt; 1 \r\n        RETURN childD, childDStat, cGroups &quot;,\r\n      {`detailedCriterionIds`: [3, 5, 7, 8, 12, 13, 14, 15, 16, 18, 20, 21, 23, 26, 28, 29, 30, 31, 33, 35, 36, 40, 42, 44, 45, 46, 47, 51, 54],\r\n       `zeroCriterionIds`: []},\r\n      childDStats, 6, 10) \r\n    YIELD value\r\n    WITH value.childD as childD, value.childDStat as childDStat, value.cGroups as cGroups WITH collect({`childDStat`:childDStat, `childD`:childD, `cGroups`:cGroups}) as childDStats \r\n    \r\n    CALL apoc.cypher.mapParallel2(\r\n      &quot; WITH _.childD as childD, _.childDStat as childDStat, _.cGroups as cGroups WITH childD, childDStat, size(cGroups) as cGroupsSize, cGroups \r\n        UNWIND cGroups as cGroup \r\n        WITH childD, childDStat, cGroupsSize, cGroup \r\n        UNWIND cGroup as cId WITH childD, childDStat, cGroupsSize, cGroup, cId, cGroup[0] as cG0\r\n    \r\n        WITH childD, childDStat, cGroupsSize, cGroup, cId, cG0, childDStat[&#39;criterionAvgVoteWeights.&#39; + cG0] as childDStatCriterionAvgVoteWeight,\r\n          childDStat[&#39;criterionExperienceMonths.&#39; + cG0] as childDStatCriterionExperienceMonth, \r\n          $criterionAvgVoteWeights[toString(cId)] as criterionAvgVoteWeight, $criterionExperienceMonths[toString(cId)] as criterionExperienceMonth \r\n        WHERE \r\n          (childDStatCriterionAvgVoteWeight = 0 OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight OR criterionAvgVoteWeight IS NULL) AND\r\n          (childDStatCriterionExperienceMonth = 0 OR childDStatCriterionExperienceMonth &lt;= criterionExperienceMonth OR criterionExperienceMonth IS NULL)\r\n    \r\n        WITH childD, childDStat, cGroupsSize, cG0, collect(cId) as cIds WITH childD, childDStat, cGroupsSize, collect(DISTINCT cG0 + cIds) as cGroups\r\n        WHERE size(cGroups) &gt;= cGroupsSize\r\n        RETURN childD, childDStat, cGroups &quot;,\r\n      {`detailedCriterionIds`: [3, 5, 7, 8, 12, 13, 14, 15, 16, 18, 20, 21, 23, 26, 28, 29, 30, 31, 33, 35, 36, 40, 42, 44, 45, 46, 47, 51, 54],\r\n       `zeroCriterionIds`: [],\r\n       `criterionAvgVoteWeights`: {`51`:5.0, `8`:0.0, `33`:5.0, `21`:0.0, `31`:0.0, `26`:4.0, `14`:5.0, `36`:3.0, `46`:3.0, `12`:3.0, `18`:5.0, `28`:5.0, `16`:2.0, `7`:5.0, `40`:1.0, `5`:5.0, `44`:4.0, `3`:1.0, `54`:4.0, `20`:4.0, `42`:4.0, `30`:3.0, `15`:4.0, `47`:1.0, `35`:1.0, `13`:3.0, `45`:3.0, `23`:4.0, `29`:1.0},\r\n       `criterionExperienceMonths`: {`8`:109, `33`:8, `21`:184, `31`:14, `26`:100, `14`:157, `36`:140, `46`:123, `12`:85, `18`:96, `28`:116, `16`:15, `7`:63, `40`:56, `5`:166, `44`:101, `3`:129, `42`:84, `20`:102, `30`:173, `15`:97, `47`:54, `13`:91, `35`:137, `45`:119, `23`:162, `29`:97}\r\n      },\r\n      childDStats, 6, 10) \r\n    YIELD value\r\n    RETURN value.childD.id\r\nThe following condition takes most of the query execution time:\r\n\r\n    WHERE \r\n      (childDStatCriterionAvgVoteWeight = 0 OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight OR criterionAvgVoteWeight IS NULL) AND\r\n      (childDStatCriterionExperienceMonth = 0 OR childDStatCriterionExperienceMonth &lt;= criterionExperienceMonth OR criterionExperienceMonth IS NULL)\r\n\r\nWith this condition in place the query works `~1000ms`, without it `5ms`.\r\n\r\nIs there something I may do with this condition in order to improve the query performance?\r\n\r\nP.S\r\n\r\nThis is just a test query. The real query uses parameters for each single value.",
      "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition",
      "title": "Neo4j Cypher query performnce optimization with WHERE condition"
    },
    {
      "tags": ["jupyter-notebook", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699816216,
          "post_id": 77467579,
          "comment_id": 136575752,
          "link": "https://stackoverflow.com/questions/77467579/why-is-the-graph-data-science-library-plug-in-preventing-me-from-starting-a-data#comment136575752_77467579"
        }
      ],
      "owner": {
        "reputation": 39,
        "user_id": 10156351,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/79942a995e1ba2063aa715054578c96d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Vincent Baldassari",
        "link": "https://stackoverflow.com/users/10156351/vincent-baldassari"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1699816121,
      "creation_date": 1699757694,
      "last_edit_date": 1699816121,
      "question_id": 77467579,
      "share_link": "https://stackoverflow.com/q/77467579",
      "body_markdown": "I&#39;m trying to run a database with the apoc and gds plugins. However, if I have the gds plugin installed attemtping to start the database responds in the following error: &quot;DBMS failed to restart: DBMS process terminated, see logs&quot;.\r\nUnfortunately, I don&#39;t have much experience with reading errors in the logs. Can anyone tell me what&#39;s happening in this?\r\n\r\n    [2023-11-11 21:46:50.496] [info]  Check if neo4j is available on { host: &#39;127.0.0.1&#39;, path: &#39;/&#39;, port: 7687 }\r\n    [2023-11-11 21:46:50.497] [info]  Check if neo4j is available on { host: &#39;127.0.0.1&#39;, path: &#39;/&#39;, port: 7474 }\r\n    [2023-11-11 21:46:50.498] [info]  Neo4j @ 7687 is down. connect ECONNREFUSED 127.0.0.1:7687\r\n    [2023-11-11 21:46:50.499] [info]  Neo4j @ 7474 is down. connect ECONNREFUSED 127.0.0.1:7474\r\n    [2023-11-11 21:46:51.509] [info]  Retrieved status for DBMS[database-d66031cf-5040-434c-ae01-65887d023f17]: false\r\n    [2023-11-11 21:47:12.339] [info]  Online check request: https://dist.neo4j.org/neo4j-desktop/win/latest.yml\r\n    [2023-11-11 21:47:12.445] [info]  Online check response: 200 version: 1.5.9\r\n\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77467579/why-is-the-graph-data-science-library-plug-in-preventing-me-from-starting-a-data",
      "title": "Why is the Graph Data Science Library Plug In preventing me from starting a database"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699480237,
          "last_edit_date": 1699480237,
          "creation_date": 1699472690,
          "answer_id": 77448519,
          "question_id": 77447334,
          "share_link": "https://stackoverflow.com/a/77448519",
          "body_markdown": "There are several issues with both of your queries.\r\n\r\nFor example, `REL_VIRTUAL2` is just a temporary variable name, not a relationship type. `COAUTHORS_WITH_VIRTUAL2` is the relationship type you should have used in the projection. However, changing that would still not fix things because **GDS does not support projecting virtual nodes or relationships**.\r\n\r\nYour first approach should work, but you may need to solve some other issues first. For example, the projection should use `[&#39;node1&#39;, &#39;node2&#39;]` instead of just `&#39;node1&#39;` for the node labels,. And you can replace `ON CREATE SET x = y ON MATCH SET x = y` with just `SET x = y`.",
          "link": "https://stackoverflow.com/questions/77447334/neo4j-use-in-a-projection-a-virtual-relationship-with-weights/77448519#77448519",
          "title": "Neo4j: use in a projection a virtual relationship with weights"
        }
      ],
      "owner": {
        "reputation": 127,
        "user_id": 12315558,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBQ0YNNO09fBkzc1bbLAl2u-EgnX1xEHdAW7n5N=k-s256",
        "display_name": "albertovpd",
        "link": "https://stackoverflow.com/users/12315558/albertovpd"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 32,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77448519,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699480237,
      "creation_date": 1699461025,
      "question_id": 77447334,
      "share_link": "https://stackoverflow.com/q/77447334",
      "body_markdown": "I can create a relationship in my graph, assign weights and write in disk as follows:\r\n\r\n```\r\nMATCH (a1:node1)-[rel1]-(p:other_node)-[rel2]-(a2:node2)\r\n// create the weight\r\nwith a1.id as id1, a2.id as id2, count(p) as common_ocurrences\r\n// create the rel\r\nMERGE (a1)-[r:NEW_REL]-(a2)\r\n// use the weights as a property of the created relationship\r\nON CREATE SET r.counter = common_occurrences\r\nON MATCH SET r.counter = common_occurrences\r\n\r\n// create projection \r\nCALL gds.graph.project(\r\n &#39;new-graph&#39;,\r\n &#39;node1&#39;,\r\n {NEW_REL:{\r\n orientation:&#39;UNDIRECTED&#39;,\r\n properties:&#39;counter&#39;\r\n }\r\n }\r\n)\r\nyield *\r\n```\r\n\r\nbut what i want is to do the same, without writing the relationship nor the associated weight.\r\nfor that i tried using **virtual relationships** like with this method:\r\n\r\n```\r\nMATCH (a1:node1)-[rel1]-(p:other_node)-[rel2]-(a2:node2)\r\nwith a1, a2, count(p) as common_occurrences\r\nwhere a1.id&gt;a2.id\r\nreturn \r\na1, a2, \r\napoc.create.vRelationship(a1, &#39;COAUTHORS_WITH_VIRTUAL2&#39;, {weight: common_occurrences}, a2) as REL_VIRTUAL2;\r\n```\r\n\r\nthis part seems to work but now i&#39;m quite puzzled about how to use it. if right after the last clause i write something like \r\n\r\n```\r\nCALL gds.graph.project(\r\n &#39;graph42&#39;,\r\n &#39;node1&#39;,\r\n {REL_VIRTUAL_2:{\r\n orientation:&#39;UNDIRECTED&#39;,\r\n properties:&#39;common_occurrences&#39;\r\n }\r\n }\r\n\r\n)\r\nyield *\r\n```\r\n\r\nit says that the relationship can not be found.\r\nany help on this?",
      "link": "https://stackoverflow.com/questions/77447334/neo4j-use-in-a-projection-a-virtual-relationship-with-weights",
      "title": "Neo4j: use in a projection a virtual relationship with weights"
    },
    {
      "tags": ["java", "neo4j", "spring-data", "cypher", "spring-data-neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699891849,
          "post_id": 77446718,
          "comment_id": 136584823,
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j#comment136584823_77446718"
        },
        {
          "owner": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "reply_to_user": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699963937,
          "post_id": 77446718,
          "comment_id": 136594097,
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j#comment136594097_77446718"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699992038,
              "post_id": 77483393,
              "comment_id": 136599522,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136599522_77483393"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699995575,
              "post_id": 77483393,
              "comment_id": 136600027,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136600027_77483393"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699996573,
              "post_id": 77483393,
              "comment_id": 136600184,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136600184_77483393"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699998487,
              "post_id": 77483393,
              "comment_id": 136600451,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136600451_77483393"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700005316,
              "post_id": 77483393,
              "comment_id": 136601306,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136601306_77483393"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "last_editor": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699991543,
          "last_edit_date": 1699991543,
          "creation_date": 1699990764,
          "answer_id": 77483393,
          "question_id": 77446718,
          "share_link": "https://stackoverflow.com/a/77483393",
          "body_markdown": "I suspect the problem lies in evaluating node equality.\r\n\r\nInstead of `WHERE p = $person` try `WHERE id(p) = id($person)`\r\n\r\nUPDATE: Based on this post, I could be mistaken:\r\nhttps://stackoverflow.com/questions/59844124/should-nodes-be-compared-directly-or-they-must-be-going-through-id-first",
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#77483393",
          "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705561674,
              "post_id": 77831344,
              "comment_id": 137222551,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137222551_77831344"
            },
            {
              "owner": {
                "reputation": 959,
                "user_id": 3332879,
                "user_type": "registered",
                "accept_rate": 38,
                "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
                "display_name": "Cugomastik",
                "link": "https://stackoverflow.com/users/3332879/cugomastik"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705573075,
              "post_id": 77831344,
              "comment_id": 137224471,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137224471_77831344"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705581092,
              "post_id": 77831344,
              "comment_id": 137225677,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137225677_77831344"
            },
            {
              "owner": {
                "reputation": 959,
                "user_id": 3332879,
                "user_type": "registered",
                "accept_rate": 38,
                "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
                "display_name": "Cugomastik",
                "link": "https://stackoverflow.com/users/3332879/cugomastik"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705670676,
              "post_id": 77831344,
              "comment_id": 137238230,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137238230_77831344"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 959,
            "user_id": 3332879,
            "user_type": "registered",
            "accept_rate": 38,
            "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
            "display_name": "Cugomastik",
            "link": "https://stackoverflow.com/users/3332879/cugomastik"
          },
          "last_editor": {
            "reputation": 959,
            "user_id": 3332879,
            "user_type": "registered",
            "accept_rate": 38,
            "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
            "display_name": "Cugomastik",
            "link": "https://stackoverflow.com/users/3332879/cugomastik"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705574229,
          "last_edit_date": 1705574229,
          "creation_date": 1705484339,
          "answer_id": 77831344,
          "question_id": 77446718,
          "share_link": "https://stackoverflow.com/a/77831344",
          "body_markdown": "There are 2 ways of passing fields.\r\n\r\n**Note:** I used Spring Boot 3.2, SDN v7.2.2 and Neo4j v5. \r\n\r\n1) Use a Map without saving the Node:\r\n\r\n**Model:**    \r\n\r\n    @Setter\r\n    @Getter\r\n    @Node\r\n    public class Car {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n    \r\n        @Property(name = &quot;model&quot;)\r\n        private String model;\r\n\r\n        public Car(){} // have an empty constructor to save\r\n    }\r\n**Repository class:**\r\n\r\n    public interface CarRepository extends Neo4jRepository&lt;Car, Long&gt; {\r\n        \r\n        @Query(&quot;WITH $car AS c &quot; +\r\n                &quot;RETURN c[&#39;model&#39;] AS model&quot;)\r\n        String getCarModel(@Param(&quot;car&quot;) Map&lt;String, Object&gt; carMap); \r\n    }\r\n\r\n**Testing:**\r\n\r\n     private void testCar() {\r\n            Car car = new Car();\r\n            car.setModel(&quot;Tesla Model S&quot;);\r\n    \r\n            Map&lt;String, Object&gt; carMap = new HashMap&lt;&gt;();\r\n            carMap.put(&quot;model&quot;, car.getModel());\r\n            String model = carRepository.getCarModel(carMap);\r\n            System.out.println(&quot;\\nModel: &quot; + model);\r\n    \r\n        }\r\n\r\n\r\n\r\n2) Save the Node and use Id to access the parameters\r\n\r\n\r\n**Repository:**\r\nThe important part is to use `__id__` here. &quot;*.id*&quot; did not work in tests.\r\n\r\n     public interface CarRepository extends Neo4jRepository&lt;Car, Long&gt; {\r\n            @Query(&quot;MATCH (c:car) WHERE id(c) = $car.__id__ &quot; +\r\n                    &quot;RETURN c.model as model&quot;)\r\n            String getCarModel(@Param(&quot;car&quot;) Car car);\r\n        }\r\n\r\n\r\n**Testing:**\r\n\r\n        private void testCar() {\r\n            Car car = new Car();\r\n            car.setModel(&quot;Tesla Model S&quot;);\r\n        \r\n            carRepository.save(car); //this will save it with an ID\r\n            System.out.println(&quot;\\nModel: &quot; + \r\n            carRepository.getCarModel(car));\r\n            carRepository.delete(car);//if you want\r\n        }\r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#77831344",
          "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705593475,
          "creation_date": 1705593475,
          "answer_id": 77840765,
          "question_id": 77446718,
          "share_link": "https://stackoverflow.com/a/77840765",
          "body_markdown": "## Solution\r\n```java\r\npublic interface ImageRepositoryNeo4j extends Neo4jRepository&lt;Image, String&gt; {\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n    WHERE id(p) = toInteger(split($person.__id__, &#39;:&#39;)[-1])\r\n    RETURN count(i)\r\n    &quot;&quot;&quot;)\r\npublic Integer countImagesDepictingPerson(@Param(&quot;person&quot;) Person person);\r\n```\r\nUgly, but it works. Note: Person.id is of type String. Maybe you wouldn&#39;t need all this hassle if your Person.id is of type Integer or Long.\r\n\r\n## Explanation\r\nWhen we have \r\n```java\r\n@Node(&quot;Person&quot;)\r\npublic class Person {\r\n    \r\n    @Id\r\n    @GeneratedValue\r\n    private String id;\r\n```\r\nThis is what exactly neo4j generates as an id:\r\n```java\r\nvar freshPerson = personRepository.findOneByBirthday(LocalDate.of(1993,3,3));\r\nlog.info(&quot;freshPerson.getId()={}&quot;, freshPerson.getId());\r\n// freshPerson.getId()=4:a8bd1c80-0f61-4a2b-b094-7e7aed736caf:2\r\n```\r\nAs you can see, freshPerson.id is a long string.\r\n\r\nBut if you will call this cypher:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (p:Person {name: &#39;Roy&#39;})\r\n    RETURN id(p)\r\n    &quot;&quot;&quot;)\r\npublic Integer getRoyIdInt();\r\n```\r\nYou will get an Integer (and a warning message about `id()` function being deprecated).\r\n\r\nAnd if you will call this cypher:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (p:Person {name: &#39;Roy&#39;})\r\n    RETURN p.id\r\n    &quot;&quot;&quot;)\r\npublic String getRoyId();\r\n```\r\nYou will get null instead of String and this warning:\r\n```\r\nWARN 7164 --- [           main] o.s.data.neo4j.cypher.unrecognized       : Neo.ClientNotification.Statement.UnknownPropertyKeyWarning: The provided property key is not in the database\r\n        MATCH (p:Person {name: &#39;Roy&#39;})\r\n        RETURN p.id\r\n                 ^\r\n    One of the property names in your query is not available in the database, make sure you didn&#39;t misspell it or that the label is available when you run this statement in your application (the missing property name is: id)\r\n```\r\nThis is unexpected, because obviously we have `id` property in our Person class, even though it is annotated with `@Id @GeneratedValue`.\r\n\r\nInteger in the end of `4:a8bd1c80-0f61-4a2b-b094-7e7aed736caf:2` is actually what `id()` function returns, so we can extract it and find a node by it. This is exactly what is happening in Solution section.\r\n\r\nAlso we can extract it in java, check out last section. I&#39;ve made it verbose so it will be clear what is going on.\r\n\r\n## Solution 2\r\nDeclare neo4j repo method which takes Integer as an arg:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n    WHERE id(p) = $id\r\n    RETURN count(i)\r\n    &quot;&quot;&quot;)\r\npublic Integer countImagesDepictingPersonWithId(@Param(&quot;id&quot;) Integer id);\r\n```\r\n\r\nUse this method:\r\n```java\r\n// Create Greg with birthday:\r\nPerson greg = new Person(&quot;Greg&quot;, LocalDate.of(1993,3,3));\r\ngreg = personRepository.save(greg);\r\n\r\n// Create image depicting Greg:\r\nvar img2 = new Image(&quot;/blabla2.jpg&quot;);\r\nimg2.getPeople().add(greg);\r\n\r\n// Find someone by birthday (we know it&#39;s Greg):\r\nvar freshPerson = personRepository.findOneByBirthday(LocalDate.of(1993,3,3));\r\n\r\n// Extract Integer id from String id:\r\nString[] tokens = freshPerson.getId().split(&quot;:&quot;);\r\nString lastToken = tokens[tokens.length - 1];\r\nInteger gregId = Integer.parseInt(lastToken);\r\n\r\n// Count images depicting Greg:\r\nvar count = imageRepository.countImagesDepictingPersonWithId(gregId);\r\nlog.info(&quot;Greg1993 is depicted in {} images.&quot;, count); //1\r\n```\r\n\r\nWe just moved String splitting logic from Cypher to Java.",
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77840765#77840765",
          "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
        }
      ],
      "owner": {
        "reputation": 141,
        "user_id": 20340543,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
        "display_name": "Podbrushkin",
        "link": "https://stackoverflow.com/users/20340543/podbrushkin"
      },
      "last_editor": {
        "reputation": 141,
        "user_id": 20340543,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
        "display_name": "Podbrushkin",
        "link": "https://stackoverflow.com/users/20340543/podbrushkin"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 94,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1705593475,
      "creation_date": 1699455750,
      "last_edit_date": 1700494620,
      "question_id": 77446718,
      "share_link": "https://stackoverflow.com/q/77446718",
      "body_markdown": "I&#39;m writing Spring Data Neo4j webapp.\r\nI have this domain object:\r\n```java\r\n@Node(&quot;Person&quot;)\r\npublic class Person {\r\n    \r\n    @Id\r\n    @GeneratedValue\r\n    private String id;\r\n```\r\n\r\nand a `(:Image) - [:DEPICTS] -&gt; (:Person)` relationship.\r\n\r\nI need to count images depicting specific person.\r\nThis was my attempt:\r\n```java\r\npublic interface ImageRepositoryNeo4j extends Neo4jRepository&lt;Image, String&gt; {\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n        WHERE p = $person\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) Person person);\r\n```\r\nbut it always returns 0.\r\n\r\n## Other failed attempts\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image)-[:DEPICTS]-&gt;(p:Person)\r\n        WHERE p IN $people\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DOESN&#39;T WORK, 0 RESULTS\r\n    public Integer countByPeopleContains(@Param(&quot;people&quot;) Collection&lt;Person&gt; people);\r\n\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n        WHERE ID(p) = $person.__id__\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) Person person);\r\n\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n        WHERE id(p)=$person\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) String personId);\r\n\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person {id: $person.__id__})\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK, ALWAYS 0\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) Person person);\r\n```\r\nAll of them return 0.\r\n\r\nAnd this one works, but since `fullName` isn&#39;t unique property, it is not suitable by domain logic:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person {fullName: $person})\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // TODO: personFullname is not unique, use smth else\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) String personFullName);\r\n```\r\n\r\nHow do I use domain object in custom Cypher query in Spring Data Neo4j Repository?\r\n\r\n## Clue\r\nIn [Spring Data Neo4j documentation][1] closest what I&#39;ve found to what I need is this:\r\n```java\r\n@Node\r\npublic final class Movie {\r\n\r\n    @Id\r\n    private final String title;\r\n...\r\ninterface MovieRepository extends Neo4jRepository&lt;Movie, String&gt; {\r\n\r\n    @Query(&quot;MATCH (m:Movie {title: $movie.__id__})\\n&quot;\r\n           + &quot;MATCH (m) &lt;- [r:DIRECTED|REVIEWED|ACTED_IN] - (p:Person)\\n&quot;\r\n           + &quot;return m, collect(r), collect(p)&quot;)\r\n    Movie findByMovie(@Param(&quot;movie&quot;) Movie movie);\r\n}\r\n```\r\nbut for some reason it doesn&#39;t work in my case. Maybe that&#39;s because my id is `@GeneratedValue`.\r\n\r\n## Another clue\r\n\r\nIn [Neo4j embedded docs](https://neo4j.com/docs/java-reference/current/java-embedded/query-parameters/) there is an example on how to pass an object to Cypher without Spring Data Neo4j:\r\n```\r\nMap&lt;String,Object&gt; params = new HashMap&lt;&gt;();\r\nparams.put( &quot;node&quot;, bobNode );\r\n\r\nString query =\r\n    &quot;MATCH (n:Person)&quot; + &quot;\\n&quot; +\r\n    &quot;WHERE n = $node&quot; + &quot;\\n&quot; +\r\n    &quot;RETURN n.name&quot;;\r\n\r\nResult result = transaction.execute( query, params );\r\n```\r\nIt works wif $node is `org.neo4j.graphdb.Node`:\r\n```java\r\n@Bean\r\nCommandLineRunner countForGregWithoutSDN(GraphDatabaseService graphDatabaseService) {\r\n\treturn args -&gt; {\r\n\t\ttry (var tx = graphDatabaseService.beginTx()) {\r\n\t\t\tString cypherGetGreg = &quot;MATCH (n:Person {birthday: date(&#39;1993-03-03&#39;)}) RETURN n LIMIT 5;&quot;;\r\n\t\t\tResult result = tx.execute(cypherGetGreg);\r\n\t\t\tvar greg1993 = (Node) result.next().get(&quot;n&quot;);\r\n\t\t\tif (!greg1993.getProperty(&quot;name&quot;).equals(&quot;Greg&quot;)) \r\n\t\t\t\tthrow new RuntimeException(&quot;Should be Greg1993 but actually &quot;+greg1993);\r\n\t\t\tresult.close();\r\n\r\n\t\t\tMap&lt;String,Object&gt; params = new HashMap&lt;&gt;();\r\n\t\t\tparams.put( &quot;node&quot;, greg1993 );\r\n\r\n\t\t\tString cypherCountForGreg = &quot;&quot;&quot;\r\n\t\t\t\tMATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n\t\t\t\tWHERE p = $node\r\n\t\t\t\tRETURN count(i)\r\n\t\t\t\t&quot;&quot;&quot;;\r\n\t\t\tresult = tx.execute( cypherCountForGreg, params );\r\n\t\t\tvar count = result.next().values().iterator().next();\r\n\t\t\tSystem.out.println(&quot;Count for Greg1993 is &quot;+count);\t// 1\r\n\t\t\tresult.close();\r\n\t\t}\r\n\t};\r\n}\r\n```\r\n but it results in 0 if $node is SDN Entity.\r\n\r\n  [1]: https://docs.spring.io/spring-data/neo4j/reference/appendix/custom-queries.html#custom-queries.parameters",
      "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j",
      "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1699304964,
          "post_id": 77434080,
          "comment_id": 136512735,
          "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship#comment136512735_77434080"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699304858,
              "post_id": 77434200,
              "comment_id": 136512719,
              "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77434200#comment136512719_77434200"
            },
            {
              "owner": {
                "reputation": 1631,
                "user_id": 5520810,
                "user_type": "registered",
                "accept_rate": 69,
                "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
                "display_name": "Skel",
                "link": "https://stackoverflow.com/users/5520810/skel"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699306921,
              "post_id": 77434200,
              "comment_id": 136513019,
              "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77434200#comment136513019_77434200"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1631,
            "user_id": 5520810,
            "user_type": "registered",
            "accept_rate": 69,
            "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
            "display_name": "Skel",
            "link": "https://stackoverflow.com/users/5520810/skel"
          },
          "last_editor": {
            "reputation": 1631,
            "user_id": 5520810,
            "user_type": "registered",
            "accept_rate": 69,
            "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
            "display_name": "Skel",
            "link": "https://stackoverflow.com/users/5520810/skel"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699307366,
          "last_edit_date": 1699307366,
          "creation_date": 1699304090,
          "answer_id": 77434200,
          "question_id": 77434080,
          "share_link": "https://stackoverflow.com/a/77434200",
          "body_markdown": "I found an answer [here][1]\r\n\r\nI&#39;ve updated it to look like this\r\n\r\n```\r\nMATCH (doc:Captions)\r\nMATCH (p:Pillars {name: &#39;Feel Good&#39;})\r\nMATCH (doc)-[:HAS_PILLAR]-(p)\r\nMATCH (c:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc)-[:HAS_CATEGORY]-(c)\r\nWITH count(*) as docCount, collect(doc) as parts\r\nUNWIND parts as a\r\nRETURN docCount,a \r\nlimit 12\r\n```\r\n\r\nI have Updated based off @cyberSam&#39;s comment\r\n\r\n```typescript\r\nconst hasPillar = pageOptionsDto.pillar\r\n  ? `(p:Pillars {id: &#39;${pageOptionsDto.pillar}&#39;})&lt;-[:HAS_PILLAR]-`\r\n  : &#39;&#39;;\r\nconst hasCat = pageOptionsDto.category\r\n  ? `-[:HAS_CATEGORY]-&gt;(c:Categories {id:&#39;${pageOptionsDto.category}&#39;})`\r\n  : &#39;&#39;;\r\nconst hasOrderBy = pageOptionsDto.orderBy\r\n  ? `ORDER BY doc.${pageOptionsDto.order}, r.date`\r\n  : &#39;ORDER BY r.date&#39;;\r\nconst res = await this.neo4jService.read(`\r\n  MATCH ${hasPillar}(doc:${collection} {active: true})${hasCat}\r\n  WITH count(*) as docCount, collect(doc) as docs\r\n  UNWIND docs as doc\r\n  OPTIONAL MATCH (u:Users {id: &#39;${activeUserData.sub}&#39;})&lt;-[r:USED_BY]-(doc)\r\n  OPTIONAL MATCH (c:Categories)&lt;-[cr:HAS_CATEGORY]-(doc)\r\n  OPTIONAL MATCH (doc)-[:HAS_PILLAR]-&gt;(p:Pillars)\r\n  WITH docCount, doc, r, cr, c, p\r\n  ${hasOrderBy}\r\n  RETURN docCount, doc, COLLECT(r) as rs, COLLECT(c) as crs, COLLECT(p) as prs\r\n  SKIP ${pageOptionsDto.skip} LIMIT ${pageOptionsDto.limit}\r\n`);\r\n\r\nreturn res;\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/29593998/can-you-get-the-full-count-of-result-even-when-using-limit-clause-with-neo4j",
          "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77434200#77434200",
          "title": "Neo4j Query set of node with 2 relationships and set value for each relationship node"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699892419,
          "creation_date": 1699892419,
          "answer_id": 77475327,
          "question_id": 77434080,
          "share_link": "https://stackoverflow.com/a/77475327",
          "body_markdown": "A simple answer is to traverse the graph once and collect the nodes:\r\n\r\n```\r\nMATCH (doc:Captions)-[:HAS_CATEGORY]-(:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc:Captions)-[:HAS_PILLAR]-(p:Pillars {name: &#39;Feel Good&#39;})\r\nwith collect(doc) as Docs\r\nwith [i in range(0,12) | Docs[i] ] as MyDocs, size(Docs) as docCount\r\nunwind MyDocs as Doc\r\nreturn Doc, docCount\r\n```\r\nThis will return 12 lines. Each line is a node and the count of the docs.\r\n\r\nYour comment above says the doc could have a pillar or a category. This query will only find docs that have _both_.\r\n\r\nTo avoid that, collect the docs from the first match statement, collect the docs from the second, and then join the lists before procedding.\r\n\r\nThe other option is to match on the docs first, then `optional match` the two possible paths.",
          "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77475327#77475327",
          "title": "Neo4j Query set of node with 2 relationships and set value for each relationship node"
        }
      ],
      "owner": {
        "reputation": 1631,
        "user_id": 5520810,
        "user_type": "registered",
        "accept_rate": 69,
        "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
        "display_name": "Skel",
        "link": "https://stackoverflow.com/users/5520810/skel"
      },
      "last_editor": {
        "reputation": 1631,
        "user_id": 5520810,
        "user_type": "registered",
        "accept_rate": 69,
        "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
        "display_name": "Skel",
        "link": "https://stackoverflow.com/users/5520810/skel"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1699892419,
      "creation_date": 1699302877,
      "last_edit_date": 1699306950,
      "question_id": 77434080,
      "share_link": "https://stackoverflow.com/q/77434080",
      "body_markdown": "I&#39;ve got this Query working:\r\n\r\n```cypher\r\nMATCH (doc:Captions)-[:HAS_CATEGORY]-(c:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc:Captions)-[:HAS_PILLAR]-(p:Pillars {name: &#39;Feel Good&#39;})\r\nWITH count(doc) as docCount\r\nMATCH (doc:Captions)-[:HAS_CATEGORY]-(c:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc:Captions)-[:HAS_PILLAR]-(p:Pillars {name: &#39;Feel Good&#39;})\r\nWITH docCount, doc Limit 12\r\nRETURN doc, docCount\r\n```\r\n\r\nThis will return a `docCount` of 25 and the `doc`s, limited to 12.\r\nBut it feels like I&#39;m making the same call twice.\r\n\r\nI&#39;m wanting to not make the same call twice",
      "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship",
      "title": "Neo4j Query set of node with 2 relationships and set value for each relationship node"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1699266680,
          "post_id": 77430266,
          "comment_id": 136505500,
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node#comment136505500_77430266"
        },
        {
          "owner": {
            "reputation": 493,
            "user_id": 2259302,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
            "display_name": "H&#229;kan L&#246;fqvist",
            "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699267372,
          "post_id": 77430266,
          "comment_id": 136505633,
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node#comment136505633_77430266"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699300562,
          "post_id": 77430266,
          "comment_id": 136511968,
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node#comment136511968_77430266"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1699268823,
          "last_edit_date": 1699268823,
          "creation_date": 1699267393,
          "answer_id": 77430467,
          "question_id": 77430266,
          "share_link": "https://stackoverflow.com/a/77430467",
          "body_markdown": "To get the first and last `SECTION` in your path, declare a variable in the node patterns either side of the `NEXT_SECTION` variable length portion:\r\n```\r\nMATCH (start:CITY {Name: &quot;London&quot;})\r\nMATCH (end:CITY {Name: &quot;Edinburgh&quot;})\r\nMATCH path = (start)-[:HAS_STATION]-&gt;(:STATION)-[:BOARDS]-&gt;\r\n             (first:SECTION)-[:NEXT_SECTION*]-&gt;(last:SECTION)-[:UNBOARDS]-&gt;\r\n             (:STATION)&lt;-[:HAS_STATION]-(end)\r\nRETURN first, last\r\n```",
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node/77430467#77430467",
          "title": "Neo4j Cypher show first and last connected node"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699894635,
          "creation_date": 1699894635,
          "answer_id": 77475549,
          "question_id": 77430266,
          "share_link": "https://stackoverflow.com/a/77475549",
          "body_markdown": "The title asks for the first and last sections.\r\n\r\nYour text asks to find &quot;every section that is directly connected to a station from the path.&quot; For that, we&#39;ll find the path and then filter for the station nodes.\r\n\r\n```\r\nMATCH (start:CITY {Name: &quot;London&quot;})\r\nMATCH (end:CITY {Name: &quot;Edinburgh&quot;})\r\nmatch path = (start)-[mid:HAS_STATION|BOARDS|NEXT_SECTION|UNBOARDS*]-(end)\r\nwith mid\r\nwhere mid:STATION\r\nreturn mid\r\n```\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node/77475549#77475549",
          "title": "Neo4j Cypher show first and last connected node"
        }
      ],
      "owner": {
        "reputation": 19,
        "user_id": 21613020,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7183a46897df9d6f4e57395a306a29cb?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "thomaswiiswitch",
        "link": "https://stackoverflow.com/users/21613020/thomaswiiswitch"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1699894635,
      "creation_date": 1699265434,
      "last_edit_date": 1699392175,
      "question_id": 77430266,
      "share_link": "https://stackoverflow.com/q/77430266",
      "body_markdown": "I created a graph in Neo4j for test purposes. Graph looks like screenshot below (simplified):\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mzzug.png\r\n\r\nWhat I want is the path from London to Edinburgh. For that I created following Cypher Query:\r\n\r\n\r\n```\r\nMATCH (start:CITY {Name: &quot;London&quot;})\r\nMATCH (end:CITY {Name: &quot;Edinburgh&quot;})\r\nMATCH path = (start)-[:HAS_STATION]-&gt;(:STATION)-[:BOARDS]-&gt;(:SECTION)-[:NEXT_SECTION*]-&gt;(:SECTION)-[:UNBOARDS]-&gt;(:STATION)&lt;-[:HAS_STATION]-(end)\r\n \r\n```\r\n\r\nThis Query leaves me with the whole path Via Section 1, 2 and 3. All I need for my result is the first and last section. If there is a transshipment in between (i.e. Glasgow), I also would need the last section before transshipment and the first after the transshipment.\r\n\r\nIn other words: I need every section that is directly connected to a station from the path. I tried out following extension:\r\n\r\n```\r\nwith nodes(path) as nodes\r\nunwind nodes as node\r\nwith node\r\nwhere ()-[:BOARDS]-&gt;(node) or (node)-[:UNBOARDS]-&gt;()\r\n```\r\n\r\nBut with that query extension I ended up with all Sections, since they all can either board or unboard at a specific station (even if that station is not part of the path).",
      "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node",
      "title": "Neo4j Cypher show first and last connected node"
    },
    {
      "tags": ["java", "neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700397139,
              "post_id": 77503708,
              "comment_id": 136647006,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136647006_77503708"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "reply_to_user": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700485792,
              "post_id": 77503708,
              "comment_id": 136656662,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136656662_77503708"
            },
            {
              "owner": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700570698,
              "post_id": 77503708,
              "comment_id": 136668676,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136668676_77503708"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "reply_to_user": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700571973,
              "post_id": 77503708,
              "comment_id": 136668904,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136668904_77503708"
            },
            {
              "owner": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700584588,
              "post_id": 77503708,
              "comment_id": 136671476,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136671476_77503708"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "reply_to_user": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700597189,
              "post_id": 77503708,
              "comment_id": 136673661,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136673661_77503708"
            },
            {
              "owner": {
                "reputation": 5,
                "user_id": 14708942,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
                "display_name": "AES",
                "link": "https://stackoverflow.com/users/14708942/aes"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700736719,
              "post_id": 77503708,
              "comment_id": 136692370,
              "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#comment136692370_77503708"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "last_editor": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "comment_count": 7,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1700753520,
          "last_edit_date": 1700753520,
          "creation_date": 1700243597,
          "answer_id": 77503708,
          "question_id": 77428848,
          "share_link": "https://stackoverflow.com/a/77503708",
          "body_markdown": "Looks like it is Neo4j Browser is that you&#39;re interested in, not Neo4j Desktop. Most straightforward way is to connect Neo4j Browser to your embedded database while your app is running. But also indeed you can export whole database to a file and import it in Neo4j Browser which is connected to some other db, preferably empty.\r\n\r\n## Connect from Neo4j Browser in Neo4j Desktop\r\n\r\nIf you have started Neo4j Embedded with these settings:\r\n```\r\n.setConfig( BoltConnector.enabled, true )`\r\n.setConfig(BoltConnector.encryption_level, BoltConnector.EncryptionLevel.DISABLED)\r\n```\r\n\r\nthen you can connect to it while application is running by pointing Neo4j Browser to localhost:7687 and `No authentication` option:\r\n\r\n[![connect to db with neo4j browser in neo4j desktop][1]][1]\r\n\r\n---\r\n\r\n## Connect from Neo4j Browser in Docker Neo4j image\r\n\r\nIf you have **Docker**, you can access database created by your application without application itself and without *Neo4j Desktop* installed.\r\n\r\nIf you are creating your embedded db like that:\r\n```\r\nDatabaseManagementService managementService = \r\n    new  DatabaseManagementServiceBuilder(new File(&quot;target/mydb&quot;).toPath())\r\n```\r\nit means database is located at `/target/mydb/` directory. It stays there even after application is stopped.\r\n\r\nYou can run a new neo4j server with this database by executing this bash command in directory with `pom.xml` once your application is stopped:\r\n```\r\nsudo docker run --rm -p 7474:7474 -p 7687:7687 -v $PWD/target/mydb/data:/data --name neo4j-1 neo4j\r\n```\r\n\r\nI am using powershell and actual commands I execute are:\r\n```\r\n$neo4jDataDir = &#39;./target/mydb/data/&#39;\r\ndocker run --name neo4j-1 --rm -v $neo4jDataDir`:/data -p 7474:7474 -p 7687:7687 -e NEO4J_AUTH=neo4j/qwertyuiop -d neo4j\r\n# Checkout what&#39;s happening:\r\ndocker logs neo4j-1\r\n# Stop server:\r\ndocker stop neo4j-1\r\n```\r\n\r\nOnce server is up and running, **Neo4j Browser** becomes available at localhost:7474 in web browser.\r\n\r\nAlso I&#39;ve noticed when you stop server, **Neo4j Browser** keeps working until you will close it&#39;s tab in web browser.\r\n\r\n## Export database and import in Neo4j Browser\r\n\r\nIf for some reason you can&#39;t connect to your database with Neo4j Browser, you can dump your db to a file and import it afterwards in Neo4j Browser which is connected to a different db, preferably empty. For this you will need external plugin Apoc.\r\n\r\n1. Add these dependencies to project:\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;apoc-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;apoc-common&lt;/artifactId&gt;\r\n\t&lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n2. Register procedure you will use:\r\n```java\r\n...\r\nGraphDatabaseService db = graphDb.database(GraphDatabaseSettings.DEFAULT_DATABASE_NAME);\r\nregisterProcedure(db,\r\n\t\tapoc.export.cypher.ExportCypher.class);\r\n...\r\npublic static void registerProcedure(GraphDatabaseService db, Class&lt;?&gt;... procedures) {\r\n\tGlobalProcedures globalProcedures = ((GraphDatabaseAPI) db).getDependencyResolver()\r\n\t\t\t.resolveDependency(GlobalProcedures.class);\r\n\tfor (Class&lt;?&gt; procedure : procedures) {\r\n\t\ttry {\r\n\t\t\tglobalProcedures.registerProcedure(procedure);\r\n\t\t\tglobalProcedures.registerFunction(procedure);\r\n\t\t\tglobalProcedures.registerAggregationFunction(procedure);\r\n\t\t} catch (KernelException e) {\r\n\t\t\tthrow new RuntimeException(&quot;while registering &quot; + procedure, e);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n3. Enable exporting to a file:\r\n```java\r\nApocConfig.apocConfig().setProperty(ApocConfig.APOC_EXPORT_FILE_ENABLED, true);\r\n```\r\n\r\n4. Execute procedure:\r\n```java\r\ntry (\r\n\tvar driver = GraphDatabase.driver(&quot;bolt://localhost:7687&quot;, AuthTokens.none());\r\n\tvar session = driver.session()) {\r\n\tvar query = &quot;&quot;&quot;\r\n\t\t\tCALL apoc.export.cypher.all(&quot;all-plain.cypher&quot;, {\r\n\t\t\t\tformat: &quot;plain&quot;,\r\n\t\t\t\tuseOptimizations: {type: &quot;UNWIND_BATCH&quot;, unwindBatchSize: 20}\r\n\t\t\t})\r\n\t\t\t&quot;&quot;&quot;;\r\n\tsession.executeRead(t -&gt; t.run(query).consume());\r\n}\r\n```\r\n\r\n5. Find a `./target/mydb/all-plain.cypher` text file with all your data in Cypher format.\r\n\r\n6. Drag and drop it to Neo4j Browser or copy-paste it&#39;s contents. \r\n\r\nFully working example of dumping database to a file can be found [in this Gist](https://gist.github.com/Podbrushkin/3f16feb9b9da22ab27ee2878c38633aa).\r\n\r\n  [1]: https://i.stack.imgur.com/PHRyl.gif",
          "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop/77503708#77503708",
          "title": "Embedded database to neo4j desktop"
        }
      ],
      "owner": {
        "reputation": 5,
        "user_id": 14708942,
        "user_type": "registered",
        "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
        "display_name": "AES",
        "link": "https://stackoverflow.com/users/14708942/aes"
      },
      "last_editor": {
        "reputation": 5,
        "user_id": 14708942,
        "user_type": "registered",
        "profile_image": "https://lh4.googleusercontent.com/-s8lHGK-a3m4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmhBZDytDnvFrHNKrwMUA_SmxBmmg/s96-c/photo.jpg?sz=256",
        "display_name": "AES",
        "link": "https://stackoverflow.com/users/14708942/aes"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 93,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77503708,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700753520,
      "creation_date": 1699247159,
      "last_edit_date": 1700570660,
      "question_id": 77428848,
      "share_link": "https://stackoverflow.com/q/77428848",
      "body_markdown": "I&#39;m currently using `DatabaseManagementServiceBuilder` to store `neo4j` data on my local host. Is there anyway to import the data to `neo4j` desktop or any other tool for visualisation? for example by creating a `.csv` file or dumping the data.\r\n\r\nThis is how my directories look like.\r\n\r\nfirst  \r\n![first][1]\r\n\r\nsecond  \r\n![second][2]\r\n\r\nthird  \r\n![third][3]\r\n\r\nI tried to replace the `/data` directory in a `neo4j` desktop database with my own `/data` directory but it didn&#39;t work (`neo4j` desktop kept giving an error which was no surprise).\r\n\r\n\r\n[enter image description here][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QLm9Z.jpg\r\n  [2]: https://i.stack.imgur.com/3EW2r.jpg\r\n  [3]: https://i.stack.imgur.com/uU9xt.jpg\r\n\r\nthis is my code for connecting\r\n  [4]: https://i.stack.imgur.com/GkIKu.png",
      "link": "https://stackoverflow.com/questions/77428848/embedded-database-to-neo4j-desktop",
      "title": "Embedded database to neo4j desktop"
    },
    {
      "tags": ["kotlin", "neo4j", "spring-data-neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 152,
            "user_id": 4132541,
            "user_type": "registered",
            "profile_image": "https://lh6.googleusercontent.com/-RA2lawWJDdE/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnOnS81X9fYiiRwW3jRmAEMLoMEKA/photo.jpg?sz=256",
            "display_name": "Lior Derei",
            "link": "https://stackoverflow.com/users/4132541/lior-derei"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699256571,
          "post_id": 77426516,
          "comment_id": 136503835,
          "link": "https://stackoverflow.com/questions/77426516/creating-a-neo4j-node-with-multiple-relationships-and-bi-directional-relationshi#comment136503835_77426516"
        }
      ],
      "owner": {
        "reputation": 152,
        "user_id": 4132541,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-RA2lawWJDdE/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnOnS81X9fYiiRwW3jRmAEMLoMEKA/photo.jpg?sz=256",
        "display_name": "Lior Derei",
        "link": "https://stackoverflow.com/users/4132541/lior-derei"
      },
      "last_editor": {
        "reputation": 150,
        "user_id": 14233099,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-Tp-2MJr3ZH4/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucl0nHHyxqenYklb_Uxizj5-r-I6Sg/photo.jpg?sz=256",
        "display_name": "der da",
        "link": "https://stackoverflow.com/users/14233099/der-da"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1699251104,
      "creation_date": 1699197826,
      "last_edit_date": 1699251104,
      "question_id": 77426516,
      "share_link": "https://stackoverflow.com/q/77426516",
      "body_markdown": "I&#39;m trying to do the following:\r\nCreate `Person` and `Dog` nodes which have the following relationships:\r\n`Person` has 2 relationships: `TEAMMATE` with a list of `Persons` and &#39;OWNER_OF&#39; with a list of `dogs`\r\n\r\n`Dog` has 1 relationship: `OWNED_BY` with a single person\r\n\r\nSo for example:\r\nI have 2 people: Chris and Roger. Roger is a teammate of Chris\r\nand 1 dog: Ghost which is owned by Chris\r\n\r\nMy endgame is to query the following:\r\nget me all the teammates of a person who is the owner of a dog named Ghost (the result is Roger from the example)\r\n\r\nI created the following code:\r\n\r\n```\r\n@Node\r\ndata class Dog(\r\n        @Id @GeneratedValue\r\n        val id: Long?,\r\n        val name: String,\r\n        @Relationship(type = &quot;OWNED_BY&quot;)\r\n        var owner: Person? = null) {\r\n    constructor(name: String) : this(null, name)\r\n\r\n    override fun toString(): String {\r\n        return &quot;$name&#39;s owner =&gt; ${owner?.name}&quot;\r\n    }\r\n\r\n    override fun hashCode(): Int {\r\n        return id?.hashCode() ?: super.hashCode()\r\n    }\r\n\r\n    override fun equals(other: Any?): Boolean {\r\n        if (this === other) return true\r\n        if (javaClass != other?.javaClass) return false\r\n\r\n        other as Dog\r\n\r\n        if (id != other.id) return false\r\n        return name == other.name\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\n@Node\r\ndata class Person(\r\n        @Id @GeneratedValue\r\n        val id: Long?,\r\n        val name: String,\r\n        @Relationship(type = &quot;TEAMMATE&quot;)\r\n        var teammates: MutableSet&lt;Person&gt; = mutableSetOf(),\r\n        @Relationship(type = &quot;OWNER_OF&quot;)\r\n        var dogs: MutableSet&lt;Dog&gt; = mutableSetOf()) {\r\n\r\n    constructor(name: String) : this(null, name)\r\n\r\n    fun addTeammates(person: Set&lt;Person&gt;) {\r\n        teammates.addAll(person)\r\n    }\r\n\r\n    fun addDog(dogs: Set&lt;Dog&gt;) {\r\n        this.dogs.addAll(dogs)\r\n    }\r\n\r\n    override fun toString(): String {\r\n        val teammatesList = teammates.stream().map(Person::name).toList()\r\n        val dogsList = dogs.stream().map(Dog::name).toList()\r\n        return &quot;$name&#39;s teammates =&gt; $teammatesList, dogs =&gt; $dogsList&quot;\r\n    }\r\n\r\n    override fun hashCode(): Int {\r\n        return id?.hashCode() ?: super.hashCode()\r\n    }\r\n\r\n    override fun equals(other: Any?): Boolean {\r\n        if (this === other) return true\r\n        if (javaClass != other?.javaClass) return false\r\n\r\n        other as Person\r\n\r\n        if (id != other.id) return false\r\n        return name == other.name\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\n@Repository\r\ninterface DogRepository : Neo4jRepository&lt;Dog, Long&gt;\r\n```\r\n\r\n```\r\n@Repository\r\ninterface PersonRepository : Neo4jRepository&lt;Person, Long&gt;\r\n```\r\n\r\nI&#39;m creating the following demo:\r\n```\r\n    @PostMapping(&quot;/demo2&quot;)\r\n    fun addDemo2() {\r\n        // Delete existing data (optional)\r\n        personRepository.deleteAll()\r\n        dogRepository.deleteAll()\r\n\r\n        val chris = Person(&quot;Chris&quot;)\r\n        val roger = Person(&quot;Roger&quot;)\r\n        val ghost = Dog(&quot;Ghost&quot;)\r\n\r\n        // Establish the relationships manually\r\n        ghost.owner = chris\r\n        chris.dogs.add(ghost)\r\n        chris.addTeammates(setOf(roger))\r\n\r\n        // Save the entities\r\n        personRepository.save(chris)\r\n        dogRepository.save(ghost)\r\n    }\r\n}\r\n```\r\n\r\nwhen I run this, I&#39;m getting the following error:\r\n```\r\njava.util.NoSuchElementException: No value present\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:377) ~[na:na]\r\n\tat org.springframework.data.neo4j.core.TemplateSupport.retrieveOrSetRelatedId(TemplateSupport.java:412) ~[spring-data-neo4j-7.1.5.jar:7.1.5]\r\n\tat org.springframework.data.neo4j.core.Neo4jTemplate.lambda$processNestedRelations$28(Neo4jTemplate.java:839) ~[spring-data-neo4j-7.1.5.jar:7.1.5]\r\n\tat org.springframework.data.neo4j.core.mapping.AssociationHandlerSupport.lambda$doWithAssociations$0(AssociationHandlerSupport.java:51) ~[spring-data-neo4j-7.1.5.jar:7.1.5]\r\n\tat org.springframework.data.mapping.model.BasicPersistentEntity.doWithAssociations(BasicPersistentEntity.java:317) ~[spring-data-commons-3.1.5.jar:3.1.5]\r\n\tat org.springframework.data.neo4j.core.mapping.AssociationHandlerSupport.doWithAssociations(AssociationHandlerSupport.java:49) ~[spring-data-neo4j-7.1.5.jar:7.1.5]\r\n\tat org.springframework.data.neo4j.core.Neo4jTemplate.processNestedRelations(Neo4jTemplate.java:731) ~[spring-data-neo4j-7.1.5.jar:7.1.5]\r\n....\r\n```\r\n\r\nAny idea?",
      "link": "https://stackoverflow.com/questions/77426516/creating-a-neo4j-node-with-multiple-relationships-and-bi-directional-relationshi",
      "title": "Creating a Neo4J node with multiple relationships and bi-directional relationships"
    },
    {
      "tags": ["apache-kafka", "neo4j", "apache-kafka-connect"],
      "comments": [
        {
          "owner": {
            "reputation": 184612,
            "user_id": 2308683,
            "user_type": "registered",
            "accept_rate": 90,
            "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=256&d=identicon&r=PG",
            "display_name": "OneCricketeer",
            "link": "https://stackoverflow.com/users/2308683/onecricketeer"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699190993,
          "post_id": 77424154,
          "comment_id": 136497730,
          "link": "https://stackoverflow.com/questions/77424154/apache-kafka-neo4j-connector-issues#comment136497730_77424154"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 8570,
                "user_id": 277128,
                "user_type": "registered",
                "accept_rate": 79,
                "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
                "display_name": "fbiville",
                "link": "https://stackoverflow.com/users/277128/fbiville"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699353620,
              "post_id": 77429408,
              "comment_id": 136518168,
              "link": "https://stackoverflow.com/questions/77424154/apache-kafka-neo4j-connector-issues/77429408#comment136518168_77429408"
            },
            {
              "owner": {
                "reputation": 4479,
                "user_id": 1102806,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/60f22692ed394826a6a07d9155474877?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "DevEx",
                "link": "https://stackoverflow.com/users/1102806/devex"
              },
              "reply_to_user": {
                "reputation": 8570,
                "user_id": 277128,
                "user_type": "registered",
                "accept_rate": 79,
                "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
                "display_name": "fbiville",
                "link": "https://stackoverflow.com/users/277128/fbiville"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699443391,
              "post_id": 77429408,
              "comment_id": 136531307,
              "link": "https://stackoverflow.com/questions/77424154/apache-kafka-neo4j-connector-issues/77429408#comment136531307_77429408"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 4479,
            "user_id": 1102806,
            "user_type": "registered",
            "accept_rate": 84,
            "profile_image": "https://www.gravatar.com/avatar/60f22692ed394826a6a07d9155474877?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "DevEx",
            "link": "https://stackoverflow.com/users/1102806/devex"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699255907,
          "creation_date": 1699255907,
          "answer_id": 77429408,
          "question_id": 77424154,
          "share_link": "https://stackoverflow.com/a/77429408",
          "body_markdown": "I tried rebuilding the artifact and discovered my java version was outdated. Upgrading to java 11 resolved the issue for me.",
          "link": "https://stackoverflow.com/questions/77424154/apache-kafka-neo4j-connector-issues/77429408#77429408",
          "title": "Apache Kafka Neo4j Connector issues"
        }
      ],
      "owner": {
        "reputation": 4479,
        "user_id": 1102806,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://www.gravatar.com/avatar/60f22692ed394826a6a07d9155474877?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "DevEx",
        "link": "https://stackoverflow.com/users/1102806/devex"
      },
      "last_editor": {
        "reputation": 4479,
        "user_id": 1102806,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://www.gravatar.com/avatar/60f22692ed394826a6a07d9155474877?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "DevEx",
        "link": "https://stackoverflow.com/users/1102806/devex"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77429408,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699443488,
      "creation_date": 1699139716,
      "last_edit_date": 1699443488,
      "question_id": 77424154,
      "share_link": "https://stackoverflow.com/q/77424154",
      "body_markdown": "I set up kafka neo4j sink connector the following way:\r\n 1. Created `/tmp/plugins`, downloaded `neo4j-kafka-connect-neo4j-5.0.3-kc-oss.zip` (for Apache Kafka) and unzip into plugins folder i.e.\r\n 2. Modified `connect-standalone.properties`, added `plugin.path=/tmp/plugins`\r\n 3. Created `connect-neo4j-sink.properties` in config with the following\r\n\r\n    ```name=Neo4jSinkConnector\r\n    topics=my-events\r\n    connector.class=streams.kafka.connect.sink.Neo4jSinkConnector\r\n    key.converter=org.apache.kafka.connect.json.JsonConverter\r\n    key.converter.schemas.enable=false\r\n    value.converter=org.apache.kafka.connect.json.JsonConverter\r\n    errors.retry.timeout=-1\r\n    errors.retry.delay.max.ms=1000\r\n    errors.tolerance=all\r\n    errors.log.enable=true\r\n    errors.log.include.messages=true\r\n    neo4j.server.uri=bolt://neo4j:7687\r\n    neo4j.authentication.basic.username=neo4j\r\n    neo4j.authentication.basic.password=neo4j\r\n    neo4j.encryption.enabled=false\r\n    neo4j.topic.cypher.my-topic=MERGE (p:Person{name: event.name, surname: event.surname}) MERGE (f:Family{name: event.surname}) MERGE (p)-[:BELONGS_TO]-&gt;(f)```\r\n\r\n\r\nAnd when I start:\r\n\r\n```/bin/connect-standalone.sh config/connect-standalone.properties config/connect-neo4j-sink.properties```\r\n\r\nI get this error: \r\n\r\n```Caused by: org.apache.kafka.connect.errors.ConnectException: Failed to find any class that implements Connector and which name matches streams.kafka.connect.sink.Neo4jSinkConnector```\r\n\r\n**Environment**\r\n\r\n - neo4j:5-community \r\n - apache kafka 2.13-3.6.0",
      "link": "https://stackoverflow.com/questions/77424154/apache-kafka-neo4j-connector-issues",
      "title": "Apache Kafka Neo4j Connector issues"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699082110,
              "post_id": 77418774,
              "comment_id": 136489031,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136489031_77418774"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699183923,
              "post_id": 77418774,
              "comment_id": 136497086,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136497086_77418774"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699183949,
              "post_id": 77418774,
              "comment_id": 136497088,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136497088_77418774"
            },
            {
              "owner": {
                "reputation": 437,
                "user_id": 5831358,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Marj",
                "link": "https://stackoverflow.com/users/5831358/marj"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699259551,
              "post_id": 77418774,
              "comment_id": 136504285,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136504285_77418774"
            },
            {
              "owner": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699285785,
              "post_id": 77418774,
              "comment_id": 136509318,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136509318_77418774"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1699034115,
          "creation_date": 1699034115,
          "answer_id": 77418774,
          "question_id": 77417923,
          "share_link": "https://stackoverflow.com/a/77418774",
          "body_markdown": "Because you&#39;re only counting relationships for a single node, either version will take milliseconds, so performance isn&#39;t relevant. Only where counts were being done for many nodes would you consider it. In any case, without profiling, the best way would be to actually measure it.\r\n\r\nI compared the following Cypher and APOC versions for different numbers of relationships (the actual `MATCH` double counts, but that doesn&#39;t matter for this):\r\n\r\n**Cypher**\r\n```sql\r\nMATCH (n)-[r]-()\r\nRETURN \r\n  CASE \r\n    WHEN (startNode(r) = n) THEN type(r) + &#39;&gt;&#39; \r\n    ELSE &#39;&lt;&#39; + type(r)\r\n  END AS type, \r\n  count(r) AS count\r\n```\r\n\r\n**APOC**\r\n```sql\r\nMATCH (n)\r\nCALL {\r\n    WITH n\r\n    WITH n, apoc.node.relationship.types(n) AS types\r\n    CALL {\r\n        WITH n, types\r\n        UNWIND types as type\r\n        RETURN &#39;&lt;&#39;+type AS type, apoc.node.degree.in(n, type) as count\r\n    UNION ALL \r\n        WITH n, types\r\n        UNWIND types as type\r\n        RETURN type+&#39;&gt;&#39; AS type, apoc.node.degree.out(n, type) as count\r\n    }\r\n    RETURN type, count\r\n}\r\nRETURN type, sum(count)\r\n```\r\n\r\nHere is a comparison (based on running the DB locally):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThere may be a more efficient version for the APOC query, but in any case, the Cypher here is faster.\r\n\r\n  [1]: https://i.stack.imgur.com/rIvld.png",
          "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#77418774",
          "title": "Neo4j count relationships of each type for given node"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699082019,
              "post_id": 77419012,
              "comment_id": 136489027,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77419012#comment136489027_77419012"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699087311,
              "post_id": 77419012,
              "comment_id": 136489374,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77419012#comment136489374_77419012"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699087293,
          "last_edit_date": 1699087293,
          "creation_date": 1699036773,
          "answer_id": 77419012,
          "question_id": 77417923,
          "share_link": "https://stackoverflow.com/a/77419012",
          "body_markdown": "There is actually a faster approach that also fixes a potential problem in your current queries. If `n` has any self-relationships (relationships that start/end at `n`), then such relationships would be counted twice (as both inbound and outbound relationships). In other words, the sum of the counts could be greater than the actual number of relationships.\r\n\r\nThis query should be fast and also solve the self-relationship problem:\r\n\r\n    MATCH (n)-[r]-() WHERE id(n) = 0\r\n    RETURN\r\n      CASE n WHEN ENDNODE(r) THEN &#39;&lt;&#39; ELSE &#39;&#39; END +\r\n      TYPE(r) +\r\n      CASE n WHEN STARTNODE(r) THEN &#39;&gt;&#39; ELSE &#39;&#39; END AS type,\r\n      COUNT(*) AS count\r\n\r\nAn inbound `REL` relationship would be represented as `&lt;REL`, an outbound one as `REL&gt;`, and a self-relationship as `&lt;REL&gt;`. And the sum of the counts would equal the actual number of relationships.\r\n\r\n#### Including endnode labels\r\nHere is a slightly altered query that returns a count of each distinct combination of type and end node labels (a node can have multiple labels):\r\n\r\n    MATCH (n)-[r]-(m) WHERE id(n) = 0\r\n    RETURN\r\n      CASE n WHEN ENDNODE(r) THEN &#39;&lt;&#39; ELSE &#39;&#39; END +\r\n      TYPE(r) +\r\n      CASE n WHEN STARTNODE(r) THEN &#39;&gt;&#39; ELSE &#39;&#39; END AS type,\r\n      LABELS(m) AS endNodeLabels,\r\n      COUNT(*) AS count\r\n\r\nReading how [aggregating functions](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/) work will help you understand these 2 queries.",
          "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77419012#77419012",
          "title": "Neo4j count relationships of each type for given node"
        }
      ],
      "owner": {
        "reputation": 1493,
        "user_id": 1967693,
        "user_type": "registered",
        "accept_rate": 62,
        "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
        "display_name": "zirkelc",
        "link": "https://stackoverflow.com/users/1967693/zirkelc"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77419012,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1699087293,
      "creation_date": 1699025458,
      "question_id": 77417923,
      "share_link": "https://stackoverflow.com/q/77417923",
      "body_markdown": "I want to count the relationships for each type of a given start node. I have constructed two possible queries to achieve that, but I don&#39;t know which one is going to be more efficient when dealing with lots of relationships.\r\n\r\n1. Cypher only query with `count()`\r\n```sql\r\nMATCH (n) WHERE id(n) = 0\r\nCALL {\r\n    WITH n\r\n    MATCH (n)&lt;-[r]-()\r\n    RETURN &#39;&lt;&#39;+TYPE(r) AS type, COUNT(r) AS count\r\nUNION ALL \r\n    WITH n\r\n    MATCH (n)-[r]-&gt;()\r\n    RETURN TYPE(r)+&#39;&gt;&#39; AS type, COUNT(r) AS count\r\n}\r\nRETURN type, count\r\n```\r\n\r\nResult:\r\n```\r\n╒════════════╤═════╕\r\n│type        │count│\r\n╞════════════╪═════╡\r\n│&quot;&lt;ACTED_IN&quot; │5    │\r\n├────────────┼─────┤\r\n│&quot;&lt;PRODUCED&quot; │1    │\r\n├────────────┼─────┤\r\n│&quot;&lt;DIRECTED&quot; │2    │\r\n└────────────┴─────┘\r\n```\r\n\r\n2. Cypher + APOC `apoc.node.relationship.types()` and `type, apoc.node.degree.[in|out]()`\r\n```sql\r\nMATCH (n) WHERE id(n) = 0\r\nWITH n, apoc.node.relationship.types(n) AS types\r\nCALL {\r\n    WITH n, types\r\n    UNWIND types as type\r\n    RETURN &#39;&lt;&#39;+type AS type, apoc.node.degree.in(n, type) as count\r\nUNION ALL \r\n    WITH n, types\r\n    UNWIND types as type\r\n    RETURN type+&#39;&gt;&#39; AS type, apoc.node.degree.out(n, type) as count\r\n}\r\nRETURN type, count\r\n```\r\nResult:\r\n```\r\n╒════════════╤═════╕\r\n│type        │count│\r\n╞════════════╪═════╡\r\n│&quot;&lt;ACTED_IN&quot; │5    │\r\n├────────────┼─────┤\r\n│&quot;&lt;DIRECTED&quot; │2    │\r\n├────────────┼─────┤\r\n│&quot;&lt;PRODUCED&quot; │1    │\r\n├────────────┼─────┤\r\n│&quot;ACTED_IN&gt;&quot; │0    │\r\n├────────────┼─────┤\r\n│&quot;DIRECTED&gt;&quot; │0    │\r\n├────────────┼─────┤\r\n│&quot;PRODUCED&gt;&quot; │0    │\r\n└────────────┴─────┘\r\n```\r\n\r\nThe second query returns rows for empty relationship types, but this can be neglected.\r\n\r\nI can only profile the first cypher-only query, because custom procedures like APOC can&#39;t be profiled.  ",
      "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node",
      "title": "Neo4j count relationships of each type for given node"
    },
    {
      "tags": ["java", "spring", "neo4j", "spring-data-neo4j", "memgraphdb"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699037530,
          "post_id": 77417303,
          "comment_id": 136485504,
          "link": "https://stackoverflow.com/questions/77417303/memgraph-with-spring-data-neo4j#comment136485504_77417303"
        }
      ],
      "owner": {
        "reputation": 21,
        "user_id": 22852956,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/da30b17e01f4693a87f43b06872be8c5?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "user22852956",
        "link": "https://stackoverflow.com/users/22852956/user22852956"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 81,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "answer_count": 0,
      "score": 2,
      "last_activity_date": 1699020531,
      "creation_date": 1699020531,
      "question_id": 77417303,
      "share_link": "https://stackoverflow.com/q/77417303",
      "body_markdown": "Does anybody use Memgraph as a graph database with the Spring Data Neo4j API through the Neo4j java driver?\r\nWould be interested in hearing your experiences. Thanks!\r\n\r\nMemgraph advertises as a drop-in replacement for Neo4j. Quickly spinning up memgraph/memgraph-platform in Docker and trying to connect from Spring Data Neo4j fails with lots of Exceptions though.",
      "link": "https://stackoverflow.com/questions/77417303/memgraph-with-spring-data-neo4j",
      "title": "Memgraph with Spring Data Neo4j"
    },
    {
      "tags": ["neo4j", "podman"],
      "comments": [
        {
          "owner": {
            "reputation": 1579,
            "user_id": 2202757,
            "user_type": "registered",
            "accept_rate": 43,
            "profile_image": "https://i.stack.imgur.com/U5NGN.jpg?s=256&g=1",
            "display_name": "sh0umik",
            "link": "https://stackoverflow.com/users/2202757/sh0umik"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699352404,
          "post_id": 77409903,
          "comment_id": 136517934,
          "link": "https://stackoverflow.com/questions/77409903/podman-neo4j-unable-to-mount-volume-to-persist-data#comment136517934_77409903"
        },
        {
          "owner": {
            "reputation": 17297,
            "user_id": 2411173,
            "user_type": "registered",
            "accept_rate": 65,
            "profile_image": "https://www.gravatar.com/avatar/52e928a6f9e3077749b75cddab339f4f?s=256&d=identicon&r=PG",
            "display_name": "Donbeo",
            "link": "https://stackoverflow.com/users/2411173/donbeo"
          },
          "reply_to_user": {
            "reputation": 1579,
            "user_id": 2202757,
            "user_type": "registered",
            "accept_rate": 43,
            "profile_image": "https://i.stack.imgur.com/U5NGN.jpg?s=256&g=1",
            "display_name": "sh0umik",
            "link": "https://stackoverflow.com/users/2202757/sh0umik"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699365350,
          "post_id": 77409903,
          "comment_id": 136520426,
          "link": "https://stackoverflow.com/questions/77409903/podman-neo4j-unable-to-mount-volume-to-persist-data#comment136520426_77409903"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 17297,
                "user_id": 2411173,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/52e928a6f9e3077749b75cddab339f4f?s=256&d=identicon&r=PG",
                "display_name": "Donbeo",
                "link": "https://stackoverflow.com/users/2411173/donbeo"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699261094,
              "post_id": 77410440,
              "comment_id": 136504526,
              "link": "https://stackoverflow.com/questions/77409903/podman-neo4j-unable-to-mount-volume-to-persist-data/77410440#comment136504526_77410440"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 22214354,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/96faa0d16e180bc41836018844e66c62?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Jonathan Giffard",
            "link": "https://stackoverflow.com/users/22214354/jonathan-giffard"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698935367,
          "creation_date": 1698935367,
          "answer_id": 77410440,
          "question_id": 77409903,
          "share_link": "https://stackoverflow.com/a/77410440",
          "body_markdown": "Here&#39;s the command I have used successfully with podman in the past.  I have the volumes located in sub-folders of my home folder\r\n\r\n```\r\npodman run -dt \\\r\n    --name=neo4jdb01 \\\r\n    --env=NEO4J_ACCEPT_LICENSE_AGREEMENT=yes \\\r\n    --env=NEO4J_AUTH=neo4j/password \\\r\n    --userns=keep-id\r\n    --publish=7474:7474 --publish=7687:7687 \\\r\n    --volume=$HOME/Projects/neo4j/data:/data \\\r\n    --volume=$HOME/Projects/neo4j/conf:/conf \\\r\n    --volume=$HOME/Projects/neo4j/logs:/logs \\\r\n    --volume=$HOME/Projects/neo4j/plugins:/plugins \\\r\n    neo4j:enterprise\r\n```",
          "link": "https://stackoverflow.com/questions/77409903/podman-neo4j-unable-to-mount-volume-to-persist-data/77410440#77410440",
          "title": "podman neo4j unable to mount volume to persist data"
        }
      ],
      "owner": {
        "reputation": 17297,
        "user_id": 2411173,
        "user_type": "registered",
        "accept_rate": 65,
        "profile_image": "https://www.gravatar.com/avatar/52e928a6f9e3077749b75cddab339f4f?s=256&d=identicon&r=PG",
        "display_name": "Donbeo",
        "link": "https://stackoverflow.com/users/2411173/donbeo"
      },
      "last_editor": {
        "reputation": 17297,
        "user_id": 2411173,
        "user_type": "registered",
        "accept_rate": 65,
        "profile_image": "https://www.gravatar.com/avatar/52e928a6f9e3077749b75cddab339f4f?s=256&d=identicon&r=PG",
        "display_name": "Donbeo",
        "link": "https://stackoverflow.com/users/2411173/donbeo"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699261141,
      "creation_date": 1698930949,
      "last_edit_date": 1699261141,
      "question_id": 77409903,
      "share_link": "https://stackoverflow.com/q/77409903",
      "body_markdown": "I am trying to run neo4j with podman  with persisted data on volumes. \r\n\r\nI do not know why but when I try to run the container with `--volume` option it dies. \r\nAm I doing something wrong? \r\n\r\n\r\n```\r\n(venv) [app_runner@eu012vm2093 ~]$ podman ps -a\r\nCONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES\r\n(venv) [app_runner@eu012vm2093 ~]$ podman run -d --name neo4jVol -p 7474:7474 -p 7687:7687 --volume /app/podman_storage/volumes/neo4j:/data neo4j\r\na281c68231f0987140e0d8a5b74d1e960056bd1a65df7a2be1426e433de05b10\r\n(venv) [app_runner@eu012vm2093 ~]$ podman ps -a\r\nCONTAINER ID  IMAGE                           COMMAND     CREATED        STATUS                    PORTS                                           NAMES\r\na281c68231f0  docker.io/library/neo4j:latest  neo4j       3 seconds ago  Exited (1) 4 seconds ago  0.0.0.0:7474-&gt;7474/tcp, 0.0.0.0:7687-&gt;7687/tcp  neo4jVol\r\n(venv) [app_runner@eu012vm2093 ~]$ podman run -d --name neo4j -p 7474:7474 -p 7687:7687  neo4j\r\n8408fd2f49bcc478b303fa05170dc56a5c48da2e0f59fbdabe8ace7e415bdfb8\r\n(venv) [app_runner@eu012vm2093 ~]$ podman ps -a\r\nCONTAINER ID  IMAGE                           COMMAND     CREATED         STATUS                     PORTS                                           NAMES\r\na281c68231f0  docker.io/library/neo4j:latest  neo4j       17 seconds ago  Exited (1) 18 seconds ago  0.0.0.0:7474-&gt;7474/tcp, 0.0.0.0:7687-&gt;7687/tcp  neo4jVol\r\n8408fd2f49bc  docker.io/library/neo4j:latest  neo4j       3 seconds ago   Up 3 seconds               0.0.0.0:7474-&gt;7474/tcp, 0.0.0.0:7687-&gt;7687/tcp  neo4j\r\n(venv) [app_runner@eu012vm2093 ~]$\r\n```\r\n\r\n\r\nEDIT:\r\n\r\nI have tried to do as suggested by jonathan but I still get the same error:\r\n\r\n```\r\n(venv) [app_runner@eu012vm2093 ~]$ cat run_neo4j.sh\r\npodman run -dt --name=neo4jdb01     --env=NEO4J_ACCEPT_LICENSE_AGREEMENT=yes     --env=NEO4J_AUTH=neo4j/password     --userns=keep-id   --publish=7474:7474 --publish=7687:7687 \\\r\n    --volume=$HOME/data/data:/data \\\r\n    --volume=$HOME/data/conf:/conf \\\r\n    --volume=$HOME/data/logs:/logs \\\r\n    --volume=$HOME/data/plugins:/plugins \\\r\n    neo4j\r\n(venv) [app_runner@eu012vm2093 ~]$ podman ps -a\r\nCONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES\r\n(venv) [app_runner@eu012vm2093 ~]$ sh run_neo4j.sh\r\ndfe473547f6d7a16912d160e9654b5b0ed08945149fb4aacae7b4c1f2a6cd7fe\r\n(venv) [app_runner@eu012vm2093 ~]$ podman ps -a\r\nCONTAINER ID  IMAGE                           COMMAND     CREATED        STATUS                    PORTS                                           NAMES\r\ndfe473547f6d  docker.io/library/neo4j:latest  neo4j       2 seconds ago  Exited (1) 3 seconds ago  0.0.0.0:7474-&gt;7474/tcp, 0.0.0.0:7687-&gt;7687/tcp  neo4jdb01\r\n(venv) [app_runner@eu012vm2093 ~]$\r\n```\r\n",
      "link": "https://stackoverflow.com/questions/77409903/podman-neo4j-unable-to-mount-volume-to-persist-data",
      "title": "podman neo4j unable to mount volume to persist data"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698926447,
          "creation_date": 1698926447,
          "answer_id": 77409391,
          "question_id": 77409184,
          "share_link": "https://stackoverflow.com/a/77409391",
          "body_markdown": "Simple delete is ok!\r\n\r\nDETACH DELETE is a shorter way of doing a delete relationship then delete node. So instead of doing two steps of Delete node then Delete relationship, we use DETACH DELETE in one go.\r\n\r\nFor relationship, you are NOT detach(ing) it from a node, you simply deleting it. So using detach is not needed but neo4j will flag it as an error if you do DETACH DELETE for a relationship.  It understands the redundancy and deletes it anyway.",
          "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77409391#77409391",
          "title": "Optimization of a cypher query which deletes duplicate relationships"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698991688,
              "post_id": 77410965,
              "comment_id": 136477157,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136477157_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698991731,
              "post_id": 77410965,
              "comment_id": 136477161,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136477161_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698994325,
              "post_id": 77410965,
              "comment_id": 136477423,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136477423_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699009420,
              "post_id": 77410965,
              "comment_id": 136479689,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136479689_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699009473,
              "post_id": 77410965,
              "comment_id": 136479701,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136479701_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699009477,
              "post_id": 77410965,
              "comment_id": 136479704,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136479704_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699266784,
              "post_id": 77410965,
              "comment_id": 136505513,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136505513_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699268177,
              "post_id": 77410965,
              "comment_id": 136505787,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136505787_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699337842,
              "post_id": 77410965,
              "comment_id": 136515684,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136515684_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699340066,
              "post_id": 77410965,
              "comment_id": 136515923,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136515923_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699341166,
              "post_id": 77410965,
              "comment_id": 136516057,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136516057_77410965"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 11,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699009215,
          "last_edit_date": 1699009215,
          "creation_date": 1698939567,
          "answer_id": 77410965,
          "question_id": 77409184,
          "share_link": "https://stackoverflow.com/a/77410965",
          "body_markdown": "`DETACH DELETE` will delete _all_ relationships attached to a given node before deleting that node. In your case, you are deleting specified relationships, so the `DETACH` keyword has no effect.\r\n\r\nAs you are using Neo4j 3.5, you could use the following as an optimized version of your query—assuming you have apoc installed:\r\n\r\n```\r\nCALL apoc.periodic.iterate(\r\n    &quot;MATCH (n)-[r:R]-&gt;(m)\r\n     WHERE exists((n)-[r]-&gt;(m)&lt;-[:R {id: r.id}]-(n))\r\n     WITH r.id AS id, tail(collect(r)) AS branches\r\n     UNWIND branches AS branch\r\n     RETURN branch&quot;,\r\n    &quot;DELETE branch&quot;,\r\n    {batchSize: 10000, parallel: true}\r\n)\r\n```\r\n\r\nUsing `r.id` as the grouping key works because its value is the same for all relationships that are duplicates of each other. The `exists` also assumes that the duplicate relationships have the same source and target nodes.\r\n\r\nIf you are on Neo4j 5, you could do a safer batched version of the above with `CALL IN TRANSACTIONS`:\r\n```\r\nMATCH (n)-[r:R]-&gt;(m) \r\nWHERE EXISTS { (n)-[r]-&gt;(m)&lt;-[:R {id: r.id}]-(n) }\r\nWITH r.id AS id, tail(collect(r)) AS branches\r\nUNWIND branches AS branch\r\nCALL { \r\n    WITH branch\r\n    DELETE branch\r\n} IN TRANSACTIONS OF 10000 ROWS\r\n```",
          "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#77410965",
          "title": "Optimization of a cypher query which deletes duplicate relationships"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22845737,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
        "display_name": "Somnath Deb",
        "link": "https://stackoverflow.com/users/22845737/somnath-deb"
      },
      "last_editor": {
        "reputation": 3372,
        "user_id": 9538068,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/H0yC9.jpg?s=256&g=1",
        "display_name": "Tyson Gibby",
        "link": "https://stackoverflow.com/users/9538068/tyson-gibby"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 85,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1699950043,
      "creation_date": 1698924475,
      "last_edit_date": 1699950043,
      "question_id": 77409184,
      "share_link": "https://stackoverflow.com/q/77409184",
      "body_markdown": "I am trying to delete a few duplicate relationships that got created between the same nodes. For example, node A is connected to node B with relationship R two times. Hence I have to delete one relationship. To do that I have written a query like this: \r\n```\r\nMATCH p = ()-[r:relationship]-&gt;()\r\nWITH r.id AS id, collect(r) AS branches WHERE size(branches) &gt; 1\r\nFOREACH (n IN tail(branches) | DELETE n)\r\n```\r\n\r\nMy question is whether I should use `DETACH DELETE`, or is a simple `DELETE` ok? Or in this case will `DETACH DELETE` and `DELETE` both do the same work?\r\n\r\nIn addition, please suggest how I can optimize this query!! Since there are millions of records to be deleted.\r\n\r\nI have tried using both the `DELETE` clause and the `DETACH DELETE` clause, seems both worked the same. Note: I am using Neo4j version 3.5.",
      "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships",
      "title": "Optimization of a cypher query which deletes duplicate relationships"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698882420,
              "post_id": 77405263,
              "comment_id": 136462513,
              "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#comment136462513_77405263"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698883123,
              "post_id": 77405263,
              "comment_id": 136462570,
              "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#comment136462570_77405263"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698887235,
              "post_id": 77405263,
              "comment_id": 136462878,
              "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#comment136462878_77405263"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1698872291,
          "last_edit_date": 1698872291,
          "creation_date": 1698868516,
          "answer_id": 77405263,
          "question_id": 77404810,
          "share_link": "https://stackoverflow.com/a/77405263",
          "body_markdown": "You have inconsistencies in your sample data.\r\n\r\n- `scenario2` says it has 3 parents, but there are only 2 `GAP` nodes containing the `s2` key.\r\n- `scenario3` says it has 1 parent, but there are actually 2 `GAP` nodes containing the `s3` key.\r\n\r\nHere is a query that should work, assuming you fix your data to be consistent:\r\n\r\n    MATCH (gap:GAP)\r\n    WHERE gap.name IN $gaps\r\n    UNWIND SPLIT(gap.next, &#39;,&#39;) AS sKey\r\n    WITH sKey, COUNT(*) AS cnt\r\n    WITH COLLECT({sKey: sKey, cnt: cnt}) AS data\r\n    MATCH (s:SCENARIO)\r\n    WHERE ANY(d IN data WHERE d.sKey = s.key AND d.cnt = s.parents)\r\n    RETURN s.name AS ScenarioName;\r\n\r\nThe query assumes that the list of `GAP` names is provided as a `$gaps` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/).\r\n\r\n#### Suggested new model\r\n\r\nYou should strongly consider changing your data model, however. You are not using any relationships, which is the main strength of a graph database. `GAP` and `SCENARIO` nodes should not store relationship information as properties, but should be linked by actual relationships. I would also recommend conforming to the [recommended neo4j naming convention](https://neo4j.com/docs/cypher-manual/current/syntax/naming/#_recommendations), where labels are camel-cased.\r\n\r\nFor example, this could conceptually be your new data model (without the `next` and `parents` properties):\r\n\r\n    (g:Gap {name, key, desc})-[:HAS_SCENARIO]-&gt;(s:Scenario {name, key, desc})\r\n\r\nWith this new model, the query for your use case would simply be:\r\n\r\n    MATCH (g:Gap)-[:HAS_SCENARIO]-&gt;(s:Scenario)\r\n    WHERE g.name IN $gaps\r\n    WITH s, COUNT(g) AS cnt\r\n    WHERE COUNT{ ()-[:HAS_SCENARIO]-&gt;(s) } = cnt\r\n    RETURN s.name AS scenarioName;\r\n",
          "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#77405263",
          "title": "Cypher Query to Filter SCENARIO Nodes Based on GAP Nodes"
        }
      ],
      "owner": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "last_editor": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77405263,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698882141,
      "creation_date": 1698863109,
      "last_edit_date": 1698882141,
      "question_id": 77404810,
      "share_link": "https://stackoverflow.com/q/77404810",
      "body_markdown": "I&#39;m working with a Neo4j database with a data model with GAP and SCENARIO nodes. Each GAP node has a &quot;next&quot; property that lists the keys of connected SCENARIO nodes. The SCENARIO nodes have a &quot;parents&quot; property indicating how many parent nodes they have. I want to filter SCENARIO nodes based on a list of selected GAP nodes and the number of parents. \r\n\r\nHere is how GAP nodes are supposed to SCENARIO nodes:   \r\n\r\n- gap1 key:g1\r\n- gap2 key:g2\r\n- gap3 key:g3\r\n\r\n----------\r\n\r\n- scenario1 key:  s1 \r\n- scenario2 key:  s2\r\n- scenario3 key: s3\r\n\r\n----------\r\n\r\n- parents of scenario 1 are: gap1, gap2\r\n- parents of scenario 2 are: gap1, gap2, gap3\r\n- parents of scenario 3 are: gap2\r\n\r\nHere is my GAP and SCENARIO nodes model:    \r\n\r\n     (gap1:GAP {name:  &#39;g1&#39;,\r\n\t            key:   &#39;g1&#39;,\r\n\t            desc:  &#39;&#39;,\r\n\t            next:  &#39;s1,s2&#39;\r\n\t  }),\r\n\t//GAP2\r\n\t  (gap2:GAP {name:  &#39;g2&#39;,\r\n                 key:   &#39;g2&#39;,\r\n                 desc:  &#39;&#39;,\r\n                 next:  &#39;s1,s2,s3&#39;\r\n\t  }),\r\n\t//GAP3\r\n\t  (gap3:GAP {name:  &#39;g3&#39;,\r\n                 key:   &#39;g3&#39;,\r\n                 desc:  &#39;g3&#39;,\r\n                 next:  &#39;s2&#39;\r\n\t  }),\r\n\r\n\t//SCENARIO\r\n\t  (scenario1:SCENARIO {name:    &#39;s1&#39;,\r\n                           key:     &#39;s1&#39;,\r\n                           DESC:    &#39;&#39;,\r\n                           parents: 2\r\n                           }),\r\n\t  (scenario2:SCENARIO {name:    &#39;s2&#39;,\r\n                           key:     &#39;s2&#39;,\r\n                           DESC:    &#39;&#39;,\r\n                           parents: 3\r\n                           }),\r\n\t  (scenario3:SCENARIO {name:    &#39;s3&#39;,\r\n                           key:     &#39;s3&#39;,\r\n                           DESC:    &#39;&#39;,\r\n                           parents: 1}),\r\n\r\nIf a gap is provided as input in the query and it is a parent of a scenario, but the number of parents of that scenario is more than 1 in the parent node, it should exclude the scenario from the result. If two gaps are provided, and both are parents of a single scenario, other scenario nodes are included. Still, the parent condition only meets for that single node; it should only return that single node. \r\n\r\nI have tried too many combinations but always fail somewhere.\r\nThis query somehow worked, but it failed for the following conditions: \r\n\r\n 1. When g1,g2 are provided, it should return s1 only. it returns all three scenario\r\n 2. if g1 is provided, it should return empty, but it returns s1,s2\r\n 3. if g2 is provided, it should return only s3 but it returns all s1,s2,s3    \r\n\r\n\r\nI have been stuck on this for around three days but have been unable to figure out a solution. Please note that, per the scenario, a direct link from GAP to SCENARIO will not solve the problem.\r\n\r\n    MATCH (gap:GAP)\r\n\tWHERE gap.name IN [&#39;g1&#39;, &#39;g2&#39;, &#39;g3&#39;]\r\n\r\n\tWITH COLLECT(DISTINCT gap) AS selectedGaps\r\n\r\n\tWHERE size(selectedGaps) &gt; 0  \r\n\r\n\tMATCH (scenario:SCENARIO)\r\n\tWHERE ANY(gap IN selectedGaps WHERE scenario.key IN split(gap.next, &#39;,&#39;))\r\n\tRETURN scenario.name AS ScenarioName;\r\n",
      "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes",
      "title": "Cypher Query to Filter SCENARIO Nodes Based on GAP Nodes"
    },
    {
      "tags": ["apache-kafka", "neo4j", "confluent-schema-registry"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698862223,
          "post_id": 77403628,
          "comment_id": 136459846,
          "link": "https://stackoverflow.com/questions/77403628/kafka-neo4j-connector-lastcheck-not-updating-if-no-timestamp-is-returned#comment136459846_77403628"
        },
        {
          "owner": {
            "reputation": 25,
            "user_id": 11131384,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/--DeVhMDpXR0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdVAu7uVfbmwzFI-snrC01_K9X2yg/mo/photo.jpg?sz=256",
            "display_name": "Max ",
            "link": "https://stackoverflow.com/users/11131384/max"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698918233,
          "post_id": 77403628,
          "comment_id": 136466184,
          "link": "https://stackoverflow.com/questions/77403628/kafka-neo4j-connector-lastcheck-not-updating-if-no-timestamp-is-returned#comment136466184_77403628"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 25,
                "user_id": 11131384,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/--DeVhMDpXR0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdVAu7uVfbmwzFI-snrC01_K9X2yg/mo/photo.jpg?sz=256",
                "display_name": "Max ",
                "link": "https://stackoverflow.com/users/11131384/max"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699012162,
              "post_id": 77411430,
              "comment_id": 136480171,
              "link": "https://stackoverflow.com/questions/77403628/kafka-neo4j-connector-lastcheck-not-updating-if-no-timestamp-is-returned/77411430#comment136480171_77411430"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1698943383,
          "creation_date": 1698943383,
          "answer_id": 77411430,
          "question_id": 77403628,
          "share_link": "https://stackoverflow.com/a/77411430",
          "body_markdown": "You deleted `timestamp` from the source instance&#39;s `neo4j.source.query` value, but presumably kept the `neo4j.streaming.property` still assigned to &quot;timestamp&quot;.\r\n\r\nAccording to [the documentation](https://neo4j.com/docs/kafka/kafka-connect/configuration/), the optional `neo4j.streaming.property` property is:\r\n\r\n&gt; The name of the property that we need to consider in order to\r\n&gt; determinate the last queried record; if not defined we use an internal\r\n&gt; value given from the last performed check. We use this value for\r\n&gt; injecting it in the provided query defined in `neo4j.source.query` as\r\n&gt; `$lastCheck` parameter.\r\n\r\n*I fixed a typo in the above quote.*\r\n\r\nTry deleting the optional `neo4j.streaming.property` property so that the internal value can be used instead.",
          "link": "https://stackoverflow.com/questions/77403628/kafka-neo4j-connector-lastcheck-not-updating-if-no-timestamp-is-returned/77411430#77411430",
          "title": "Kafka-Neo4J-Connector: $lastCheck not updating if no timestamp is returned"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 11131384,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/--DeVhMDpXR0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdVAu7uVfbmwzFI-snrC01_K9X2yg/mo/photo.jpg?sz=256",
        "display_name": "Max ",
        "link": "https://stackoverflow.com/users/11131384/max"
      },
      "last_editor": {
        "reputation": 25,
        "user_id": 11131384,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/--DeVhMDpXR0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdVAu7uVfbmwzFI-snrC01_K9X2yg/mo/photo.jpg?sz=256",
        "display_name": "Max ",
        "link": "https://stackoverflow.com/users/11131384/max"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 67,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77411430,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698943383,
      "creation_date": 1698851225,
      "last_edit_date": 1698918132,
      "question_id": 77403628,
      "share_link": "https://stackoverflow.com/q/77403628",
      "body_markdown": "I followed the quickstart-tutorial for the [Neo4J-Kafka-Connector](https://neo4j.com/docs/kafka/quickstart-connect/). The following source instance cypher\r\n\r\n```\r\nMATCH (ts:TestSource) WHERE ts.timestamp &gt; $lastCheck RETURN ts.name AS name, ts.surname AS surname, ts.timestamp AS timestamp\r\n```\r\n\r\ninserts `name, surname, timestamp` rows in a kafka topic, if the `ts.timestamp &gt; $lastCheck` condition is satisfied.\r\n\r\nIf I am removing the `ts.timestamp as timestamp` from the return-clause, then the `$lastCheck `parameter isn&#39;t updated anymore, so the where condition is always true and the whole graph is queried for every request. Is there a way to update the `$lastCheck` parameter without returning a timestamp? This would be great, especially for aggregations, if a grouping on the timestamp is not wanted.\r\n\r\n**EDIT**\r\n\r\nTo illustrate the problem a bit better, I added the `$lastCheck` parameter to the return clause. So my first query\r\n```\r\nMATCH (ts:TestSource) WHERE ts.timestamp &gt; $lastCheck RETURN ts.name AS name, ts.surname AS surname, ts.timestamp AS timestamp, $lastCheck as lastCheck\r\n```\r\nwrites the following messages into my topic:\r\n[![Topic after first topic][1]][1]\r\n\r\n\r\nHere, I inserted the example `TestSource` nodes **twice** (after a short delay), to show the updated `$lastCheck` parameter.\r\n\r\n&gt; CREATE (:TestSource {name: &#39;john&#39;, surname: &#39;doe&#39;, timestamp: datetime().epochMillis});\r\nCREATE (:TestSource {name: &#39;mary&#39;, surname: &#39;doe&#39;, timestamp: datetime().epochMillis});\r\nCREATE (:TestSource {name: &#39;jack&#39;, surname: &#39;small&#39;, timestamp: datetime().epochMillis});\r\n\r\nNow I remove the `ts.timestamp as timestamp` from the return clause.\r\n```\r\nMATCH (ts:TestSource) WHERE ts.timestamp &gt; $lastCheck RETURN ts.name AS name, ts.surname AS surname, $lastCheck as lastCheck\r\n```\r\nThe nodes in the database were deleted, and I inserted them only **once**. The messages in the topic look like this:\r\n\r\n[![Topic after second query][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U58p0.png\r\n  [2]: https://i.stack.imgur.com/DYhyw.png\r\n\r\nThe screenshot only shows the first seven, but these messages are printed infinitely. Sometimes the `$lastCheck` in the topic is also just returned by the second query as `-1`.",
      "link": "https://stackoverflow.com/questions/77403628/kafka-neo4j-connector-lastcheck-not-updating-if-no-timestamp-is-returned",
      "title": "Kafka-Neo4J-Connector: $lastCheck not updating if no timestamp is returned"
    },
    {
      "tags": ["docker", "docker-compose", "neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698850412,
              "post_id": 77403478,
              "comment_id": 136457378,
              "link": "https://stackoverflow.com/questions/77403423/version-in-neo4j-uat-yaml-is-unsupported-youre-using-the-wrong-compose-file/77403478#comment136457378_77403478"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698851336,
              "post_id": 77403478,
              "comment_id": 136457638,
              "link": "https://stackoverflow.com/questions/77403423/version-in-neo4j-uat-yaml-is-unsupported-youre-using-the-wrong-compose-file/77403478#comment136457638_77403478"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 140265,
            "user_id": 10008173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "David Maze",
            "link": "https://stackoverflow.com/users/10008173/david-maze"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1698849948,
          "creation_date": 1698849948,
          "answer_id": 77403478,
          "question_id": 77403423,
          "share_link": "https://stackoverflow.com/a/77403478",
          "body_markdown": "For all that the current Docker documentation shows examples with `version: &#39;3.9&#39;`, that was never actually a [Compose file format version](https://docs.docker.com/compose/compose-file/compose-versioning/).  The most recent numbered versions are `2.4` (with extended plain-Docker options) and `3.8` (with extended Swarm-oriented options) and I&#39;d use one of these.\r\n\r\nDocker states that they no longer support the Python-based Compose 1.x as of June 2023.  The Go-plugin-based Compose 2.x completely ignores the `version:` field, which is why the documentation examples that show `version: &#39;3.9&#39;` apparently work.  (I&#39;ve also seen some SO questions declaring `version: &#39;1.2&#39;` but Compose file format version 1 didn&#39;t support a `version:` field.)  Upgrading to the newer Compose will also make the file you show work.",
          "link": "https://stackoverflow.com/questions/77403423/version-in-neo4j-uat-yaml-is-unsupported-youre-using-the-wrong-compose-file/77403478#77403478",
          "title": "Version in &quot;neo4j-uat.yaml&quot; is unsupported. you&#39;re using the wrong Compose file version"
        }
      ],
      "owner": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "last_editor": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 21,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77403478,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698850466,
      "creation_date": 1698849495,
      "last_edit_date": 1698850466,
      "question_id": 77403423,
      "share_link": "https://stackoverflow.com/q/77403423",
      "body_markdown": "I am trying to run the following docker-compose file but it always ends up with an error:\r\n\r\n    version: &#39;3.9&#39;\r\n\r\n\tservices:\r\n\t  neo4j:\r\n\t    image: neo4j:5.8\r\n\t    container_name: cybersage-neo4j\r\n\t    hostname: neo4j\r\n\t    user: 501:20 \r\n\t    ports:\r\n\t      - &#39;0.0.0.0:9001:7474&#39;\r\n\t      - &#39;0.0.0.0:9002:7687&#39;\r\n\t    volumes:\r\n\t      - ./neo4j-config:/config\r\n\t      - ./neo4j-data:/data:rw\r\n\t      - ./neo4j-plugins:/plugins:rw\r\n\t    environment:\r\n\t      - NEO4J_server_memory_pagecache_size=1G\r\n\t      - NEO4J_AUTH=neo4j/admin12345678\r\n\t      - NEO4J_apoc_export_file_enabled=true\r\n\t      - NEO4J_apoc_import_file_enabled=true\r\n\t      - NEO4J_apoc_import_file_use__neo4j__config=true\r\n\t      - NEO4JLABS_PLUGINS=\\[\\&quot;apoc\\&quot;\\] \\\r\n\t      - NEO4J_dbms_security_procedures_unrestricted=apoc.\\\\\\*\r\n\r\n\r\nMy docker-compose version is: **docker-compose version 1.25.0, build 0a186604**. Here is how I am trying to run it: \r\n    \r\nsudo docker-compose -f neo4j-uat.yaml up -d\r\n\r\n    ERROR: Version in &quot;./neo4j-uat.yaml&quot; is unsupported. You might be seeing this error because you&#39;re using the wrong Compose file version. \r\n    Either specify a supported version (e.g &quot;2.2&quot; or &quot;3.3&quot;) and place your service definitions under the `services` key, or omit the `version` key \r\n    and place your service definitions at the root of the file to use version 1.\r\n\tFor more on the Compose file format versions, see https://docs.docker.com/compose/compose-file/\r\n\r\nThis error appears if I remove the version from my docker-compose file:    \r\n    \r\n    ERROR: The Compose file &#39;./neo4j-uat.yaml&#39; is invalid because:\r\n    Unsupported config option for services: &#39;neo4j&#39;\r\n",
      "link": "https://stackoverflow.com/questions/77403423/version-in-neo4j-uat-yaml-is-unsupported-youre-using-the-wrong-compose-file",
      "title": "Version in &quot;neo4j-uat.yaml&quot; is unsupported. you&#39;re using the wrong Compose file version"
    },
    {
      "tags": ["neo4j", "version", "upgrade"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 9759943,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e4c002283ee40e336315b7eb07a6bb28?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "user9759943",
                "link": "https://stackoverflow.com/users/9759943/user9759943"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699279510,
              "post_id": 77415493,
              "comment_id": 136507909,
              "link": "https://stackoverflow.com/questions/77402233/can-i-upgrade-neo4j-from-version-4-2-4-straight-to-version-4-4-26/77415493#comment136507909_77415493"
            },
            {
              "owner": {
                "reputation": 1160,
                "user_id": 1132615,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/6XRH8.png?s=256&g=1",
                "display_name": "nmervaillie",
                "link": "https://stackoverflow.com/users/1132615/nmervaillie"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 9759943,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e4c002283ee40e336315b7eb07a6bb28?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "user9759943",
                "link": "https://stackoverflow.com/users/9759943/user9759943"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699346759,
              "post_id": 77415493,
              "comment_id": 136516839,
              "link": "https://stackoverflow.com/questions/77402233/can-i-upgrade-neo4j-from-version-4-2-4-straight-to-version-4-4-26/77415493#comment136516839_77415493"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 9759943,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e4c002283ee40e336315b7eb07a6bb28?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "user9759943",
                "link": "https://stackoverflow.com/users/9759943/user9759943"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699434200,
              "post_id": 77415493,
              "comment_id": 136529557,
              "link": "https://stackoverflow.com/questions/77402233/can-i-upgrade-neo4j-from-version-4-2-4-straight-to-version-4-4-26/77415493#comment136529557_77415493"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1160,
            "user_id": 1132615,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/6XRH8.png?s=256&g=1",
            "display_name": "nmervaillie",
            "link": "https://stackoverflow.com/users/1132615/nmervaillie"
          },
          "last_editor": {
            "reputation": 1160,
            "user_id": 1132615,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/6XRH8.png?s=256&g=1",
            "display_name": "nmervaillie",
            "link": "https://stackoverflow.com/users/1132615/nmervaillie"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1699346705,
          "last_edit_date": 1699346705,
          "creation_date": 1699003394,
          "answer_id": 77415493,
          "question_id": 77402233,
          "share_link": "https://stackoverflow.com/a/77415493",
          "body_markdown": "I frequently use `neo4j-admin copy` to migrate databases, and it works really well.\r\n\r\nIt recreates a fresh copy of your existing DB into the target format of the new Neo4j version.\r\n\r\nThere is a tutorial describing how to use it to migrate from `3.5` to `4.x`. That works the same way for `4.2` to `4.4` :\r\nhttps://neo4j.com/docs/upgrade-migration-guide/current/version-4/tutorials/online-backup-copy-database/\r\n\r\n**Update**: this ^^ works only for with the enterprise edition. With the community edition, you can upgrade 4.2 -&gt; 4.3 -&gt; 4.4 using a 4.3 community version downloadable [here][1].\r\n\r\n\r\n  [1]: https://neo4j.com/download-thanks/?edition=community&amp;release=4.3.23&amp;flavour=winzip",
          "link": "https://stackoverflow.com/questions/77402233/can-i-upgrade-neo4j-from-version-4-2-4-straight-to-version-4-4-26/77415493#77415493",
          "title": "Can I upgrade Neo4j from version 4.2.4 straight to version 4.4.26?"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 9759943,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/e4c002283ee40e336315b7eb07a6bb28?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "user9759943",
        "link": "https://stackoverflow.com/users/9759943/user9759943"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 67,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77415493,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1699346705,
      "creation_date": 1698837667,
      "question_id": 77402233,
      "share_link": "https://stackoverflow.com/q/77402233",
      "body_markdown": "I have neo4j Community edition installed on Windows, currently version 4.2.4 and need to upgrade it. The neo4j documentation suggests 4.2 -&gt; 4.3 -&gt; 4.4 but the only version 4 available to download is now 4.4.26\r\n\r\nThe upgrade instructions are the same, can I just follow them but jump from 4.2 to 4.4?\r\n\r\nhttps://neo4j.com/docs/upgrade-migration-guide/current/version-4/understanding-upgrades-migration/\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77402233/can-i-upgrade-neo4j-from-version-4-2-4-straight-to-version-4-4-26",
      "title": "Can I upgrade Neo4j from version 4.2.4 straight to version 4.4.26?"
    },
    {
      "tags": ["neo4j", "cypher", "openapi", "langchain"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698772890,
          "post_id": 77397307,
          "comment_id": 136447050,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136447050_77397307"
        },
        {
          "owner": {
            "reputation": 29,
            "user_id": 19281880,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
            "display_name": "Raha",
            "link": "https://stackoverflow.com/users/19281880/raha"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698832579,
          "post_id": 77397307,
          "comment_id": 136453964,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136453964_77397307"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698860303,
          "post_id": 77397307,
          "comment_id": 136459455,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136459455_77397307"
        },
        {
          "owner": {
            "reputation": 29,
            "user_id": 19281880,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
            "display_name": "Raha",
            "link": "https://stackoverflow.com/users/19281880/raha"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698871486,
          "post_id": 77397307,
          "comment_id": 136461221,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136461221_77397307"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 29,
                "user_id": 19281880,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
                "display_name": "Raha",
                "link": "https://stackoverflow.com/users/19281880/raha"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705659313,
              "post_id": 77830259,
              "comment_id": 137236424,
              "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result/77830259#comment137236424_77830259"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 23256411,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/768e519eba430296035bcb5e7d4dc950?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Amit Pawar",
            "link": "https://stackoverflow.com/users/23256411/amit-pawar"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705471434,
          "creation_date": 1705471434,
          "answer_id": 77830259,
          "question_id": 77397307,
          "share_link": "https://stackoverflow.com/a/77830259",
          "body_markdown": "Have you tried using qa_prompt??\r\n\r\n    chain = GraphCypherQAChain.from_llm(\r\n        llm=llm,\r\n        graph=graph,\r\n        verbose=True,\r\n        return_intermediate_steps=True,\r\n        cypher_prompt=cypher_prompt,\r\n        qa_prompt=qa_prompt\r\n    )\r\n\r\nSomething like this:\r\n\r\n    cypher_qa_prompt = &quot;&quot;&quot;You are an assistant that helps to form nice and human understandable answers.\r\n    The information part contains the provided information that you must use to construct an answer.\r\n    The provided information is authoritative, you must never doubt it or try to use your internal knowledge to correct it.\r\n    Make the answer sound as a response to the question. Do not mention that you based the result on the given information.\r\n    If the provided information is empty, say that you don&#39;t know the answer.\r\n    Final answer should be easily readable and structured.\r\n    Information:\r\n    {context}\r\n\r\n    Question: {question}\r\n    Helpful Answer:&quot;&quot;&quot;\r\n\r\n    qa_prompt = PromptTemplate(\r\n    input_variables=[&quot;context&quot;, &quot;question&quot;], template=cypher_qa_prompt\r\n)\r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result/77830259#77830259",
          "title": "Langchain neo4j integration return no result"
        }
      ],
      "owner": {
        "reputation": 29,
        "user_id": 19281880,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
        "display_name": "Raha",
        "link": "https://stackoverflow.com/users/19281880/raha"
      },
      "last_editor": {
        "reputation": 29,
        "user_id": 19281880,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
        "display_name": "Raha",
        "link": "https://stackoverflow.com/users/19281880/raha"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 131,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705471434,
      "creation_date": 1698766944,
      "last_edit_date": 1698832347,
      "question_id": 77397307,
      "share_link": "https://stackoverflow.com/q/77397307",
      "body_markdown": "I am using langchain and neo4j Libs to convert NL to cypher.\r\nEverything is working, I even get the finish chain and it is clearly not empty\r\n``` \r\nFull Context:\r\n[{&#39;d&#39;: {&#39;name&#39;: &#39;Quinapril&#39;, &#39;ID&#39;: &#39;CHEMBL1592&#39;}}]\r\n\r\n&gt; Finished chain.\r\n```\r\n\r\nBut the final results is like this\r\n```\r\nI&#39;m sorry, but I don&#39;t have the information.\r\n```\r\nAny Ideas what is happening? And how can i get full context results instead of the final interpretation.\r\nI am following this blog steps [blog-link][1]\r\n```\r\nllm = ChatOpenAI(temperature=0.0, openai_api_key=openai_api_key)\r\n\r\nCYPHER_GENERATION_TEMPLATE = &quot;&quot;&quot;Task:Generate Cypher statement to query a graph database.\r\nInstructions:\r\nUse only the provided relationship types and properties in the schema.\r\n{schema}\r\n\r\nThe question is:\r\n{question}&quot;&quot;&quot;\r\n\r\n\r\nCYPHER_GENERATION_PROMPT = PromptTemplate(\r\n    input_variables=[&quot;schema&quot;, &quot;question&quot;], template=CYPHER_GENERATION_TEMPLATE\r\n)\r\n\r\nchain = GraphCypherQAChain.from_llm(\r\n    llm,\r\n    graph=graph,\r\n    verbose=True,\r\n    cypher_prompt=CYPHER_GENERATION_PROMPT\r\n)\r\n\r\ndef convert_question_to_cypher(question):\r\n    return (chain.run(question))\r\n\r\n#convert_question_to_cypher(&quot;find name of drugs that target gene XYZ&quot;)\r\n```\r\n\r\n  [1]: https://neo4j.com/developer-blog/langchain-cypher-search-tips-tricks/",
      "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result",
      "title": "Langchain neo4j integration return no result"
    },
    {
      "tags": ["graph", "neo4j", "cypher", "graph-data-science"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698971254,
          "creation_date": 1698971254,
          "answer_id": 77413581,
          "question_id": 77396899,
          "share_link": "https://stackoverflow.com/a/77413581",
          "body_markdown": "You have set the `undirectedRelationshipTypes` incorrectly. Use the following instead:\r\n\r\n```\r\nMATCH (src:Subnet)-[r:SUB_OF|CONNECT_TO]-&gt;(trg:Network|TGW)\r\nRETURN gds.graph.project(\r\n  &#39;cypherGraph10&#39;,\r\n  src,\r\n  trg,\r\n  {relationshipType: type(r)},\r\n  {undirectedRelationshipTypes: [&#39;*&#39;]})\r\n```\r\n\r\nThe problem lay with you setting the `undirectedRelationshipTypes` dynamically. The graph projection will only set to undirected those relationships that have the type to whatever value `type(r)` has for its first invocation i.e. the type of the relationship `r` in whatever happens to be the first record from the `MATCH` clause. For example, if the first record happens to have relationship with type `SUB_OF`, then only those relationships will be undirected in the projection.\r\n\r\nThe reason this matters is that APSP will only traverse directed relationships following their direction. If you look at your graph, if all the `CONNECT_TO` relationships were directed, then the graph would be partitioned at the green `TGW` nodes:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd in that case, you will get no paths connecting sub2 to sub6.   \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nObiC.png",
          "link": "https://stackoverflow.com/questions/77396899/why-is-all-pairs-shortest-paths-not-finding-some-paths-between-subnets/77413581#77413581",
          "title": "Why is All Pairs Shortest Paths not finding some paths between subnets?"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22816114,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKPe1CbLAdQKQvw37pP4bzZb2sxMWyqTBP8Vy1iX2Hh=k-s256",
        "display_name": "Sur",
        "link": "https://stackoverflow.com/users/22816114/sur"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 45,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1699554184,
      "creation_date": 1698763633,
      "last_edit_date": 1699554184,
      "question_id": 77396899,
      "share_link": "https://stackoverflow.com/q/77396899",
      "body_markdown": "For example In my case there should be path from sub2 to sub6 and sub2 to sub8, sub2 to tgw2 etc.. But I am not getting any of these paths. \r\n\r\nMy data:\r\n\r\n```\r\nCREATE \r\n(s1:Subnet{name:&quot;sub1&quot;}),\r\n(s2:Subnet{name:&quot;sub2&quot;}),\r\n(s3:Subnet{name:&quot;sub3&quot;}),\r\n(s4:Subnet{name:&quot;sub4&quot;}),\r\n(n1:Network{name:&quot;net1&quot;}),\r\n(s1)-[:SUB_OF]-&gt; (n1),\r\n(s3)-[:SUB_OF]-&gt; (n1),\r\n(s2)-[:SUB_OF]-&gt; (n1),\r\n(s4)-[:SUB_OF]-&gt; (n1),\r\n(s5:Subnet{name:&quot;sub5&quot;}),\r\n(s6:Subnet{name:&quot;sub6&quot;}),\r\n(s7:Subnet{name:&quot;sub7&quot;}),\r\n(s8:Subnet{name:&quot;sub8&quot;}),\r\n(n2:Network{name:&quot;net2&quot;}),\r\n(t1:TGW{name:&quot;tgw1&quot;}),\r\n(t2:TGW{name:&quot;tgw2&quot;}),\r\n(s5)-[:SUB_OF]-&gt; (n2),\r\n(s6)-[:SUB_OF]-&gt; (n2),\r\n(s7)-[:SUB_OF]-&gt; (n2),\r\n(s8)-[:SUB_OF]-&gt; (n2),\r\n(s5)-[:CONNECT_TO]-&gt;(t1),\r\n(s3)-[:CONNECT_TO]-&gt;(t1),\r\n(s4)-[:CONNECT_TO]-&gt;(t2),\r\n(s8)-[:CONNECT_TO]-&gt;(t2);\r\n```\r\nmy Projection is:\r\n```\r\nMATCH (src:Subnet)-[r:SUB_OF | CONNECT_TO]-&gt;(trg:Network|TGW)\r\nRETURN gds.graph.project(\r\n  &#39;cypherGraph10&#39;,\r\n  src,\r\n  trg,\r\n  {relationshipType: type(r)},\r\n  {undirectedRelationshipTypes: [type(r)]\r\n})\r\n```\r\nI am not getting all y\\my answers after trying this:\r\n\r\n```\r\nCALL gds.allShortestPaths.stream(&#39;cypherGraph10&#39;) YIELD sourceNodeId, targetNodeId, distance\r\nWHERE gds.util.isFinite(distance) AND sourceNodeId &lt;&gt; targetNodeId\r\nWITH gds.util.asNode(sourceNodeId) AS source, gds.util.asNode(targetNodeId) AS target, distance\r\nWHERE NONE(n IN [source, target] WHERE n:Network|TGW)\r\nRETURN source.name AS source, target.name AS target, distance\r\nORDER BY distance DESC, source ASC, target ASC\r\n```",
      "link": "https://stackoverflow.com/questions/77396899/why-is-all-pairs-shortest-paths-not-finding-some-paths-between-subnets",
      "title": "Why is All Pairs Shortest Paths not finding some paths between subnets?"
    },
    {
      "tags": ["neo4j", "spring-data-neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698764341,
          "creation_date": 1698764341,
          "answer_id": 77396986,
          "question_id": 77396698,
          "share_link": "https://stackoverflow.com/a/77396986",
          "body_markdown": "You must have parentheses around the nodes in the match, so it should be like this:\r\n\r\n    match (n:Yonetmen)\r\n    where n.title=&quot;Stephen King&quot;\r\n    match (n)-[:WRITE]-&gt;(Movie)\r\n    return Movie ",
          "link": "https://stackoverflow.com/questions/77396698/neo4j-invalid-input-n-expected-all-any-or-shortest/77396986#77396986",
          "title": "Neo4j Invalid input &#39;n&#39;: expected &quot;(&quot;, &quot;ALL&quot;, &quot;ANY&quot; or &quot;SHORTEST&quot;)"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 21434477,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxavAhgFSTHx-fPBkVbjtkl7To8XivZnFLcHtWig=k-s256",
        "display_name": "gizem tangalay",
        "link": "https://stackoverflow.com/users/21434477/gizem-tangalay"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 92,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698764341,
      "creation_date": 1698761820,
      "question_id": 77396698,
      "share_link": "https://stackoverflow.com/q/77396698",
      "body_markdown": "I have a database that I created with the following codes. \r\n\r\n\r\n```\r\nLOAD CSV WITH HEADERS FROM &#39;FilmData.csv&#39; AS line\r\nMERGE (n:Movie{title:line.Film_Adi_TR,yabanci_isim:coalesce(line.Film_Adi_Yabanci,&quot;Yabancı İsim Yok&quot;),released:line.Vizyon_Tarihi,numberOfAudience:line.Seyirci_Sayisi,TotalRevenue:line.Toplam_Hasilat,IMDb:line.IMDb,Screening_Week:line.Gosterim_Hafta,CountryOfManufacture:line.Yapimci_Ulke}) \r\nWITH n, split(line.Yapimci,&quot;,&quot;) as manufacturers, split(line.Yonetmen,&quot;,&quot;) as directors,split(line.Film_Turu,&quot;,&quot;) as genres,split(line.Oyuncular,&quot;,&quot;) as players\r\nUNWIND manufacturers as m\r\nUNWIND directors as d\r\nUNWIND genres as g\r\nUNWIND players as p\r\nMERGE (y:Yapimci{title: m}) \r\nMERGE (yntmn:Yonetmen{title: d})\r\nMERGE (gnrs:Film_Turu{title: g})\r\nMERGE (o:Oyuncular{title: p})\r\nMERGE (n)-[:Yapımcı]-&gt;(y)\r\nMERGE (n)-[:Y&#246;netmen]-&gt;(yntmn)\r\nMERGE (n)-[:FilmT&#252;r&#252;]-&gt;(gnrs)\r\nMERGE (n)-[:Oyuncusu]-&gt;(o)\r\n```\r\n\r\nI want to list movies directed by the same director, but I&#39;m getting an error. Can you help me?\r\n```\r\nmatch (n:Yonetmen)\r\nwhere n.title=&quot;Stephen King&quot;\r\nmatch n-[:WRITE]-&gt;Movie\r\nreturn Movie \r\n```\r\n\r\nNeo.ClientError.Statement.SyntaxError\r\nInvalid input &#39;n&#39;: expected &quot;(&quot;, &quot;ALL&quot;, &quot;ANY&quot; or &quot;SHORTEST&quot; (line 3, column 7 (offset: 54))\r\n&quot;match n-[:WRITE]-&gt;Movie&quot;\r\n       ^\r\n\r\n\r\nI&#39;m new to Neo4j and I couldn&#39;t solve the problem.",
      "link": "https://stackoverflow.com/questions/77396698/neo4j-invalid-input-n-expected-all-any-or-shortest",
      "title": "Neo4j Invalid input &#39;n&#39;: expected &quot;(&quot;, &quot;ALL&quot;, &quot;ANY&quot; or &quot;SHORTEST&quot;)"
    },
    {
      "tags": ["neo4j", "knowledge-graph"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1698775163,
          "creation_date": 1698775163,
          "answer_id": 77398164,
          "question_id": 77395340,
          "share_link": "https://stackoverflow.com/a/77398164",
          "body_markdown": "[As documented](https://neo4j.com/docs/bloom-user-guide/current/bloom-visual-tour/legend-panel/#_default_styling), you now set the properties to display in Bloom in the `Legend Panel`&#39;s `Text` tab.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RaItD.png",
          "link": "https://stackoverflow.com/questions/77395340/how-to-change-caption-of-nodes-from-nodetype-to-fully-specified-name-property/77398164#77398164",
          "title": "How to change caption of nodes from nodetype to fully specified name property?"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 18738502,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxMp4AsfMhUoKEfk3dmkzjnZ-M3q7AqnxTUDhN7=k-s256",
        "display_name": "Jos&#233; Luis Neves",
        "link": "https://stackoverflow.com/users/18738502/jos%c3%a9-luis-neves"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77398164,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698775163,
      "creation_date": 1698750271,
      "question_id": 77395340,
      "share_link": "https://stackoverflow.com/q/77395340",
      "body_markdown": "I am working with Snomed in Neo4j bloom. \r\nI used the steps from the tutorial https://medium.com/@john.newberry27/populating-a-snomed-ct-property-graph-with-synthetic-patient-data-a43a3a044649 to create the graph database. However, there is a step in the tutorial to change what property nodes use as caption in neo4j bloom that is represented in the following image:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHowever, following the same steps and going into the same location, I find only the option to exclude:[![enter image description here][2]][2]\r\n\r\nI am using the neo4j 2.10.1 version. Anybody has any ideas about why this is the case?\r\n\r\n  [1]: https://i.stack.imgur.com/9ZkXL.png\r\n  [2]: https://i.stack.imgur.com/OBf5w.png",
      "link": "https://stackoverflow.com/questions/77395340/how-to-change-caption-of-nodes-from-nodetype-to-fully-specified-name-property",
      "title": "How to change caption of nodes from nodetype to fully specified name property?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 17868,
            "user_id": 167745,
            "user_type": "registered",
            "accept_rate": 76,
            "profile_image": "https://i.stack.imgur.com/wBebv.jpg?s=256&g=1",
            "display_name": "Stewart",
            "link": "https://stackoverflow.com/users/167745/stewart"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698750817,
          "creation_date": 1698750817,
          "answer_id": 77395391,
          "question_id": 77395141,
          "share_link": "https://stackoverflow.com/a/77395391",
          "body_markdown": "Both queries have a `LIMIT 10`, but the second query is not qualified by any `WHERE` clause, so it can simply return you the first 10 it finds.\r\n\r\nIt just finds 10 and stops.\r\n\r\nThe first query, with the additional `WHERE`, means your returned 10 *must* have a path length &gt; 3, which means it must traverse all the shorter paths and discard them, keeping track in memory of the paths it has tried. You are only looking for the longer paths. So it is simply more computation effort. And maybe more computation effort than we have patience for waiting.\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77395141/why-does-this-neo4j-query-not-finish/77395391#77395391",
          "title": "Why does this neo4j query not finish?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698773318,
          "last_edit_date": 1698773318,
          "creation_date": 1698751612,
          "answer_id": 77395476,
          "question_id": 77395141,
          "share_link": "https://stackoverflow.com/a/77395476",
          "body_markdown": "The [answer][1] by Stewart correctly answers your question as to why the `WHERE` changes the performance. \r\n\r\nBut to actually improve the performance of your first query, move the criteria into the lower bound for the length of paths matched:\r\n```\r\nMATCH path = (start:A)-[*4..]-&gt;(end:A)\r\nWHERE start.fen = &#39;abc&#39;\r\nWITH DISTINCT path AS distinct_path\r\nRETURN distinct_path\r\nLIMIT 10\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77395391/2258090",
          "link": "https://stackoverflow.com/questions/77395141/why-does-this-neo4j-query-not-finish/77395476#77395476",
          "title": "Why does this neo4j query not finish?"
        }
      ],
      "owner": {
        "reputation": 6345,
        "user_id": 1099123,
        "user_type": "registered",
        "accept_rate": 55,
        "profile_image": "https://www.gravatar.com/avatar/41f5144169c49d431963661b24fa918d?s=256&d=identicon&r=PG",
        "display_name": "user1099123",
        "link": "https://stackoverflow.com/users/1099123/user1099123"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1698773318,
      "creation_date": 1698748502,
      "question_id": 77395141,
      "share_link": "https://stackoverflow.com/q/77395141",
      "body_markdown": "The following doesn&#39;t finish\r\n\r\n    MATCH path = (start:A)-[*]-&gt;(end:A)\r\n    WHERE start.fen = &#39;abc&#39;\r\n    WITH distinct path as distinct_path\r\n    WHERE length(distinct_path) &gt; 3\r\n    return distinct_path\r\n    LIMIT 10\r\n\r\nBut when removing the WHERE clause, it returns\r\n\r\n    MATCH path = (start:A)-[*]-&gt;(end:A)\r\n    WHERE start.fen = &#39;abc&#39;\r\n    WITH distinct path as distinct_path\r\n    return distinct_path\r\n    LIMIT 10\r\n\r\nWhat about the WHERE clause makes it not finish?",
      "link": "https://stackoverflow.com/questions/77395141/why-does-this-neo4j-query-not-finish",
      "title": "Why does this neo4j query not finish?"
    },
    {
      "tags": ["neo4j", "cypher", "graph-data-science"],
      "comments": [
        {
          "owner": {
            "reputation": 136,
            "user_id": 10768865,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Stephanie",
            "link": "https://stackoverflow.com/users/10768865/stephanie"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702563578,
          "post_id": 77394339,
          "comment_id": 136913230,
          "link": "https://stackoverflow.com/questions/77394339/how-to-create-a-copy-of-an-existing-graph-and-perform-operations-on-it#comment136913230_77394339"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22825304,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJ5YftK1e9SbtnRKTfxc24zkgzPgGVeRqGPi1He9Qhvmw=k-s256",
        "display_name": "malcolm.O",
        "link": "https://stackoverflow.com/users/22825304/malcolm-o"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 22825304,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJ5YftK1e9SbtnRKTfxc24zkgzPgGVeRqGPi1He9Qhvmw=k-s256",
        "display_name": "malcolm.O",
        "link": "https://stackoverflow.com/users/22825304/malcolm-o"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698741325,
      "creation_date": 1698741126,
      "last_edit_date": 1698741325,
      "question_id": 77394339,
      "share_link": "https://stackoverflow.com/q/77394339",
      "body_markdown": "I&#39;m new to neo4j and cypher.\r\n\r\nMy main question is: How to create a copy of an existing graph and perform operations on it?\r\n\r\nI have a huge graph that requires modifications. I do not want to mess up the original graph and would like to know how to create a copy of it to test my algorithms on the copy first, and then apply it to the real graph. Maybe there are other alternatives to &#39;copy&#39;.\r\n\r\nI also have a few other supportive questions:\r\n1. What is an in-memory graph and its usage? \r\n\r\n   If I have a graph populated with nodes `CREATE (:Node {name: &#39;Node 1&#39;})` will it be an in-memory graph?\r\n2. What is the usage of `graph.project` from the Graph Data Science library? I assume it is used to create sub-graphs. But then can I use `project` to create a copy of a graph?\r\n\r\nI was going through neo4j docs, but could not understand the functionality.",
      "link": "https://stackoverflow.com/questions/77394339/how-to-create-a-copy-of-an-existing-graph-and-perform-operations-on-it",
      "title": "How to create a copy of an existing graph and perform operations on it?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 19571,
            "user_id": 16582,
            "user_type": "registered",
            "accept_rate": 67,
            "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG",
            "display_name": "ravenspoint",
            "link": "https://stackoverflow.com/users/16582/ravenspoint"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698683852,
          "post_id": 77390261,
          "comment_id": 136433550,
          "link": "https://stackoverflow.com/questions/77390261/how-to-graph-relationships-between-movies-and-actors-that-they-performed-in-com#comment136433550_77390261"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698684079,
          "creation_date": 1698684079,
          "answer_id": 77390440,
          "question_id": 77390261,
          "share_link": "https://stackoverflow.com/a/77390440",
          "body_markdown": "Since your query did not return any nodes, relationships, or paths, no *graph visualization* is possible.\r\n\r\nFor example, if you want the Neo4j Browser to display the `a` nodes in a graph visualization, your `RETURN` clause will also have to include `a` as a term (not just `a.name`, which is only a string property and not the entire node). ",
          "link": "https://stackoverflow.com/questions/77390261/how-to-graph-relationships-between-movies-and-actors-that-they-performed-in-com/77390440#77390440",
          "title": "How to graph relationships between movies and actors (that they performed in common) in Neo4J movies database?"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 20324642,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4f67d7aefbf897789708d8ab5899e992?s=256&d=identicon&r=PG",
        "display_name": "Tadeo",
        "link": "https://stackoverflow.com/users/20324642/tadeo"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 51,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698684079,
      "creation_date": 1698682380,
      "last_edit_date": 1698683726,
      "question_id": 77390261,
      "share_link": "https://stackoverflow.com/q/77390261",
      "body_markdown": "I have a custom CSV with movies data with the following strucuture:\r\n\r\n    id,title,media_type,original_language,actor\r\n    1002185.0,A Million Miles Away,movie,en,Emma Fassler\r\n    447332.0,A Quiet Place,movie,en,Noah Jupe\r\n\r\nand i want to graph in neo4j the actors (names) that share one or more movies (title) between each other, the code where i load the data:\r\n\r\n    LOAD CSV WITH HEADERS FROM &quot;file:///movies_neo_graph/part-00000-c5c5507e-5501-4adb-87fc-38be1d908076-c000.csv&quot; AS row\r\n    CREATE (m:Movie)\r\n    SET m = row,\r\n    m.id = toInteger(row.id),\r\n    m.title = toString(row.title),\r\n    m.language = toString(row.original_language);\r\n    \r\n    LOAD CSV WITH HEADERS FROM &quot;file:///movies_neo_graph/part-00000-c5c5507e-5501-4adb-87fc-38be1d908076-c000.csv&quot; AS row\r\n    CREATE (a:Actor)\r\n    SET a = row,\r\n    a.name = toString(row.actor),\r\n    a.movie_id = toInteger(row.id);\r\n\r\nThen I setup the relationship between nodes Movie and Actor:\r\n\r\n    MATCH (a:Actor),(m:Movie)\r\n    WHERE a.movie_id = m.id\r\n    CREATE (a)-[:ACTED_IN]-&gt;(m);\r\n\r\nThis is my first time in Neo4J and i don&#39;t know how to perform the query, i tried with\r\n\r\n    MATCH (a:Actor)-[:ACTED_IN]-&gt;(m:Movie) \r\n    RETURN a.name AS actor, COLLECT(DISTINCT m.title) AS movies_acted, COUNT(m.title) AS movies_cnt\r\n    ORDER BY movies_cnt DESC\r\n    LIMIT 50;\r\n\r\nAnd the result is a table but not a graph:\r\n\r\n![Neo4J query table][1]\r\n\r\n  [1]: https://i.stack.imgur.com/Sa20k.png\r\n\r\nAny ideas? really appreciate the help",
      "link": "https://stackoverflow.com/questions/77390261/how-to-graph-relationships-between-movies-and-actors-that-they-performed-in-com",
      "title": "How to graph relationships between movies and actors (that they performed in common) in Neo4J movies database?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698691025,
              "post_id": 77390382,
              "comment_id": 136434866,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136434866_77390382"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698691186,
              "post_id": 77390382,
              "comment_id": 136434895,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136434895_77390382"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698693585,
              "post_id": 77390382,
              "comment_id": 136435319,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136435319_77390382"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698699544,
              "post_id": 77390382,
              "comment_id": 136436174,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136436174_77390382"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698699664,
              "post_id": 77390382,
              "comment_id": 136436190,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136436190_77390382"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 6333,
            "user_id": 4756173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
            "display_name": "Philippe Fanaro",
            "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699369707,
          "last_edit_date": 1699369707,
          "creation_date": 1698683528,
          "answer_id": 77390382,
          "question_id": 77389501,
          "share_link": "https://stackoverflow.com/a/77390382",
          "body_markdown": "You can use the APOC procedure [`apoc.do.when`](https://neo4j.com/labs/apoc/4.2/overview/apoc.do/apoc.do.when/) to do conditional if-then-else writes. There is also a more general procedure, [`apoc.do.case`](https://neo4j.com/labs/apoc/4.2/overview/apoc.do/apoc.do.case/) for more complex conditional writes.\r\n\r\nFor example:\r\n\r\n    CREATE (u:User)-[v:VOTES_ON {points: $points}]-&gt;(i:Item)\r\n    WITH u, v, i\r\n    CALL apoc.do.when(\r\n      $points &gt; 0,\r\n      &#39;SET i.points_up = COALESCE(i.points_up, 0) + points RETURN i&#39;,\r\n      &#39;SET i.points_down = COALESCE(i.points_down, 0) + points RETURN i&#39;,\r\n      { i: i, points: $points }\r\n    )\r\n    YIELD value AS _\r\n    SET i.points = COALESCE(i.points, 0) + $points\r\n    RETURN u, v, i\r\n\r\n(Note the `RETURN i` statement in the `apoc.do.when` call, so that we get back the value and then return it later on.)",
          "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#77390382",
          "title": "How to Conditionally SET in Cypher depending on parameter?"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77390382,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699369707,
      "creation_date": 1698676214,
      "last_edit_date": 1698676684,
      "question_id": 77389501,
      "share_link": "https://stackoverflow.com/q/77389501",
      "body_markdown": "When voting on a node, I would like to register the points related to the vote. However, I would also like to keep track, in separate properties, of the amount of negative and positive points.\r\n\r\nHere&#39;s a sketch of what I&#39;m trying to achieve, even though it doesn&#39;t work:\r\n\r\n```cypher\r\nCREATE   (u:User)\r\n        -[v:VOTES_ON{ points: $points }]\r\n       -&gt;(i:Item)\r\n\r\nCASE\r\n  WHEN $points &gt; 0 SET i.points_up = COALESCE(i.points_up, 0) + $points\r\n  ELSE SET i.points_down = COALESCE(i.points_down, 0) + $points\r\n\r\nSET i.points = COALESCE(i.points, 0) + $points\r\n       \r\nRETURN u, v, i\r\n```\r\n\r\n(I&#39;m using Neo4j&#39;s JavaScript&#39;s driver, that&#39;s the reason for `$points`.)\r\n\r\nIs there a way of doing this in Cypher?",
      "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter",
      "title": "How to Conditionally SET in Cypher depending on parameter?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "owner": {
        "reputation": 1,
        "user_id": 22238471,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/839db5c8673b76e9c687ecb9fdfcc0da?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "mona",
        "link": "https://stackoverflow.com/users/22238471/mona"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698680500,
      "creation_date": 1698648542,
      "last_edit_date": 1698680500,
      "question_id": 77386634,
      "share_link": "https://stackoverflow.com/q/77386634",
      "body_markdown": "I have deployed Neo4j version 5.12.0 on Kubernetes using helm charts in an EC2 server. In neo4j desktop (V 1.5.9) I have created a remote database connection. How to enable all apoc related plugins in the YAML file?\r\n\r\nWhen I run a particular Cypher query I&#39;m facing this error:\r\n\r\n&gt; Something went wrong: Neo4jError: Unknown function\r\n&gt; &#39;apoc.map.removeKey&#39; (line 9, column 59 (offset: 490)) [0] &quot;     \r\n&gt; attributes: CASE WHEN ecuProps IS NULL THEN {} ELSE\r\n&gt; apoc.map.removeKey(properties(ecuProps), &#39;name&#39;) END&quot;",
      "link": "https://stackoverflow.com/questions/77386634/how-to-enable-all-apoc-related-plugins-in-a-remote-neo4j-database-connection",
      "title": "How to enable all apoc related plugins in a remote Neo4j database connection?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698681881,
          "creation_date": 1698681881,
          "answer_id": 77390212,
          "question_id": 77385680,
          "share_link": "https://stackoverflow.com/a/77390212",
          "body_markdown": "In a `WITH` or `RETURN` clause, an [aggregating function](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/) (like [COLLECT](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/#functions-collect)) aggregates over the [grouping keys](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/#grouping-keys) (i.e., non-aggregating expressions) in the same clause.\r\n\r\nTherefore:\r\n\r\n 1. In `WITH p1, p2, interest, COUNT(interest) AS conto`:\r\n    - `conto` is the number of `interest` nodes associated with each unique set of `p1`, `p2`, and `interest` values.\r\n 2. In `RETURN p1.name, p2.name, COUNT(interest), conto, COLLECT(interest.name) AS interessi`:\r\n    - `COUNT(interest)` is the number of `interest` nodes associated with each unique set of `p1.name`, `p2.name`, and `conto` values.\r\n    - `interessi` is a collection of `interest.name` values associated with each unique set of `p1.name`, `p2.name`, and `conto` values.\r\n\r\nIn summary, since #1 and #2 have different grouping keys, the `COUNT(interest`) values are different as well.\r\n ",
          "link": "https://stackoverflow.com/questions/77385680/cypher-queries-misuse-of-the-with-clause/77390212#77390212",
          "title": "Cypher queries: misuse of the with clause"
        }
      ],
      "owner": {
        "reputation": 259,
        "user_id": 12743491,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/1420615ac458d23777a7d31172c467db?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Jenny",
        "link": "https://stackoverflow.com/users/12743491/jenny"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698681881,
      "creation_date": 1698625736,
      "last_edit_date": 1698680613,
      "question_id": 77385680,
      "share_link": "https://stackoverflow.com/q/77385680",
      "body_markdown": "I am now starting approaching Cypher and I have probably a trivial question; so i provide an example query to make you understand what i mean:\r\n\r\n    match (p1:Person)-[:works_on]-&gt;(project1:Project), (p2:Person)-[:works_on]-&gt;(project2:Project), (p1)-[:interested_in]-&gt;(interest:Skill)&lt;-[:interested_in]-(p2)\r\n    where id(p1)&gt;id(p2) \r\n    with p1,p2, interest, count(interest) as conto\r\n    return p1.name, p2.name, count(interest) ,conto,  collect(interest.name) as interessi\r\n\r\nresults:\r\n\r\n    ╒════════╤═════════╤═══════════════╤═════╤══════════════════════════╕\r\n    │p1.name │p2.name  │count(interest)│conto│interessi                 │\r\n    ╞════════╪═════════╪═══════════════╪═════╪══════════════════════════╡\r\n    │&quot;Sarah&quot; │&quot;Charlie&quot;│1              │2    │[&quot;DBMS&quot;]                │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Sarah&quot; │&quot;Ben&quot;    │2              │2    │[&quot;DBMS&quot;, &quot;TRAVEL&quot;]        │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Ben&quot;   │&quot;Charlie&quot;│1              │1    │[&quot;DBMS&quot;]                │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Arnold&quot;│&quot;Sarah&quot;  │3              │2    │[&quot;TRAVEL&quot;, &quot;JAVA&quot;, &quot;DBMS&quot;]│\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Arnold&quot;│&quot;Ben&quot;    │2              │1    │[&quot;TRAVEL&quot;, &quot;DBMS&quot;]        │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Arnold&quot;│&quot;Charlie&quot;│1              │1    │[&quot;DBMSs&quot;]                │\r\n\r\nThe thing I&#39;d like to understand is why the 2 columns `count(interest)` and `conto` differ. Why? what is the latter actually counting?",
      "link": "https://stackoverflow.com/questions/77385680/cypher-queries-misuse-of-the-with-clause",
      "title": "Cypher queries: misuse of the with clause"
    },
    {
      "tags": ["neo4j", "raft", "ongdb"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 41,
            "user_id": 9543759,
            "user_type": "registered",
            "profile_image": "https://lh4.googleusercontent.com/-1U732aa62rs/AAAAAAAAAAI/AAAAAAAAABU/Q2RdKahyOYE/photo.jpg?sz=256",
            "display_name": "Prathibha Nag",
            "link": "https://stackoverflow.com/users/9543759/prathibha-nag"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698727375,
          "creation_date": 1698727375,
          "answer_id": 77393259,
          "question_id": 77383547,
          "share_link": "https://stackoverflow.com/a/77393259",
          "body_markdown": "This is resolved. \r\nI had added one node at a time to the cluster so the first added node missed the new node IPs in the config. After adding all nodes in the current cluster, and restarting the neo4j server, the cluster was up.",
          "link": "https://stackoverflow.com/questions/77383547/neo4j-ongdb-member-is-not-getting-added-to-cluster-after-restart/77393259#77393259",
          "title": "neo4j ongdb: Member is not getting added to cluster after restart"
        }
      ],
      "owner": {
        "reputation": 41,
        "user_id": 9543759,
        "user_type": "registered",
        "profile_image": "https://lh4.googleusercontent.com/-1U732aa62rs/AAAAAAAAAAI/AAAAAAAAABU/Q2RdKahyOYE/photo.jpg?sz=256",
        "display_name": "Prathibha Nag",
        "link": "https://stackoverflow.com/users/9543759/prathibha-nag"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 21,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698727375,
      "creation_date": 1698586906,
      "last_edit_date": 1698694435,
      "question_id": 77383547,
      "share_link": "https://stackoverflow.com/q/77383547",
      "body_markdown": "I have restarted one of the CORE nodes of the cluster and it is unable to join the cluster.\r\nSeeing the following in logs:\r\n\r\n&gt; 2023-10-29 13:12:46.904+0000 INFO\r\n&gt; [o.n.c.d.SecureHazelcastCoreTopologyService] Discovering other core\r\n&gt; members in initial members set: [10.195.83.231:5000] 2023-10-29\r\n&gt; 13:12:47.071+0000 INFO [o.n.c.c.c.l.s.RecoveryProtocol] Skipping from\r\n&gt; index -1 to 1. 2023-10-29 13:12:47.089+0000 INFO\r\n&gt; [o.n.c.c.c.l.s.SegmentedRaftLog] log started with recovered state\r\n&gt; State{prevIndex=0, prevTerm=0, appendIndex=26} 2023-10-29\r\n&gt; 13:12:47.093+0000 INFO [o.n.c.c.c.m.RaftMembershipManager] Membership\r\n&gt; state before recovery:\r\n&gt; RaftMembershipState{committed=MembershipEntry{logIndex=26,\r\n&gt; members=[MemberId{f4425d42}, MemberId{eee36e32}, MemberId{456f7b24}]},\r\n&gt; appended=null, ordinal=10} 2023-10-29 13:12:47.093+0000 INFO\r\n&gt; [o.n.c.c.c.m.RaftMembershipManager] Recovering from: 26 to: 26\r\n&gt; 2023-10-29 13:12:47.096+0000 WARN [o.n.c.c.c.m.RaftMembershipManager]\r\n&gt; Appending member set was ignored. Current state:\r\n&gt; RaftMembershipState{committed=MembershipEntry{logIndex=26,\r\n&gt; members=[MemberId{f4425d42}, MemberId{eee36e32}, MemberId{456f7b24}]},\r\n&gt; appended=null, ordinal=10}, Appended set: MemberIdSet{\r\n&gt; members=[MemberId{f4425d42}, MemberId{eee36e32}, MemberId{456f7b24}]},\r\n&gt; Log index: 26\r\n&gt; \r\n&gt; 2023-10-29 13:12:47.096+0000 INFO [o.n.c.c.c.m.RaftMembershipManager]\r\n&gt; Membership state after recovery:\r\n&gt; RaftMembershipState{committed=MembershipEntry{logIndex=26,\r\n&gt; members=[MemberId{f4425d42}, MemberId{eee36e32}, MemberId{456f7b24}]},\r\n&gt; appended=null, ordinal=10} 2023-10-29 13:12:47.096+0000 INFO\r\n&gt; [o.n.c.c.c.m.RaftMembershipManager] Target membership: [] 2023-10-29\r\n&gt; 13:12:47.233+0000 INFO [o.n.c.n.Server] raft-server: bound to\r\n&gt; 10.195.83.231:7000 2023-10-29 13:12:48.301+0000 INFO [o.n.c.p.h.HandshakeServerInitializer] Installing handshake server\r\n&gt; local /10.195.83.231:7000 remote /10.195.83.187:52944 2023-10-29\r\n&gt; 13:12:48.525+0000 INFO [o.n.c.p.h.HandshakeServerInitializer]\r\n&gt; Installing handshake server local /10.195.83.231:7000 remote\r\n&gt; /10.195.83.187:52956 2023-10-29 13:12:48.560+0000 INFO\r\n&gt; [o.n.c.p.h.HandshakeServerInitializer] Installing handshake server\r\n&gt; local /10.195.83.231:7000 remote /10.195.83.219:44370 2023-10-29\r\n&gt; 13:22:46.907+0000 WARN [o.n.c.d.SecureHazelcastCoreTopologyService]\r\n&gt; The server has not been able to connect in a timely fashion to the\r\n&gt; cluster. Please consult the logs for more details. Rebooting the\r\n&gt; server may solve the problem.\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77383547/neo4j-ongdb-member-is-not-getting-added-to-cluster-after-restart",
      "title": "neo4j ongdb: Member is not getting added to cluster after restart"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698432045,
          "post_id": 77376071,
          "comment_id": 136409654,
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another#comment136409654_77376071"
        },
        {
          "owner": {
            "reputation": 3996,
            "user_id": 3897214,
            "user_type": "registered",
            "accept_rate": 56,
            "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Antony",
            "link": "https://stackoverflow.com/users/3897214/antony"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698432139,
          "post_id": 77376071,
          "comment_id": 136409672,
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another#comment136409672_77376071"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698434143,
          "post_id": 77376071,
          "comment_id": 136409975,
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another#comment136409975_77376071"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3996,
                "user_id": 3897214,
                "user_type": "registered",
                "accept_rate": 56,
                "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Antony",
                "link": "https://stackoverflow.com/users/3897214/antony"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698475966,
              "post_id": 77376560,
              "comment_id": 136413073,
              "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376560#comment136413073_77376560"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698434616,
          "last_edit_date": 1698434616,
          "creation_date": 1698433887,
          "answer_id": 77376560,
          "question_id": 77376071,
          "share_link": "https://stackoverflow.com/a/77376560",
          "body_markdown": "Your main problem is that relationships always have 1 and only 1 type. You need to reconsider how to carry out your use case.\r\n\r\nI also have a lot of observations.\r\n\r\n 1. `X` and `Y` are not defined, so queries 1 and 2 would fail anyway.\r\n 2. You are incorrectly using the term &quot;label&quot;, which only applies to nodes (for example, `c` has the label `Companies`). Every relationship has **1 and only 1** &quot;type&quot;.\r\n 3. The `SET` clause syntaxes you used are only for copying *properties*, not node labels or relationship types. In fact, you cannot change a relationship instance&#39;s type, so there is no way to do that in Cypher.\r\n 4. Your third query is missing a `SET` clause, which I assume was accidentally omitted from your question.\r\n 5. For better performance, filtering should always be done as soon as possible (like, right after the relevant `MATCH`).\r\n    - Option 1: move the `c.CompanyID = 477` test immediately after `MATCH\r\n    (c:Companies)-[r:Rel_Office]-(o:Companies)`.\r\n    - Option 2, combine the 2 `MATCH` clauses, like this: `MATCH (c:Companies)-[r:Rel_Office]-(o:Companies), (n:Companies)`\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376560#77376560",
          "title": "Neo4j/cypher - copy relationship labels to another"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698434769,
              "post_id": 77376601,
              "comment_id": 136410067,
              "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376601#comment136410067_77376601"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698434356,
          "creation_date": 1698434356,
          "answer_id": 77376601,
          "question_id": 77376071,
          "share_link": "https://stackoverflow.com/a/77376601",
          "body_markdown": "Your question can be treated as &quot;copy or duplicate all relationships from : Rel_Office into a new one called : Props.  Thus below query will work.\r\n\r\n    MATCH (c:Companies)-[r:Rel_Office]-(o:Companies)\r\n    MERGE (c)-[rn:Props]-(o)\r\n    SET rn = properties(r)\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ziald.png",
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376601#77376601",
          "title": "Neo4j/cypher - copy relationship labels to another"
        }
      ],
      "owner": {
        "reputation": 3996,
        "user_id": 3897214,
        "user_type": "registered",
        "accept_rate": 56,
        "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Antony",
        "link": "https://stackoverflow.com/users/3897214/antony"
      },
      "last_editor": {
        "reputation": 3996,
        "user_id": 3897214,
        "user_type": "registered",
        "accept_rate": 56,
        "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Antony",
        "link": "https://stackoverflow.com/users/3897214/antony"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1698476046,
      "creation_date": 1698428006,
      "last_edit_date": 1698476046,
      "question_id": 77376071,
      "share_link": "https://stackoverflow.com/q/77376071",
      "body_markdown": "I have done a number of different queries but am trying to copy *all* the relationships between my two nodes `r` to `rn` (where there is a Rel_Office label) but for some reason only the final query here works. I&#39;m using Neo4j Community 5.13.0.\r\n\r\n*Doesn&#39;t work*\r\n\r\n\tMATCH (c:Companies)-[r:Rel_Office]-(o:Companies) \r\n\tMATCH (n:Companies) WHERE c.CompanyID = X AND n.CompanyID = Y\r\n\tMERGE (n)-[rn:Props]-(o) \r\n\tSET rn = properties(r)\r\n\r\n*Doesn&#39;t work*\r\n\r\n\tMATCH (c:Companies)-[r:Rel_Office]-(o:Companies) \r\n\tMATCH (n:Companies) WHERE c.CompanyID = X AND n.CompanyID = Y\r\n\tMERGE (n)-[rn:Props]-(o) \r\n\tSET rn = r\r\n\r\n*Does work but limited to one label!*\r\n\r\n\tMATCH (c:Companies)-[r:Rel_Office]-(o:Companies) \r\n\tMATCH (n:Companies) WHERE c.CompanyID = 477 AND n.CompanyID = 9045\r\n\tMERGE (n)-[rn:Rel_Office]-(o) \r\n\r\n\r\nI suspect its something obvious, but please can someone explain how this should be working to do a full copy of all the labels/properties?",
      "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another",
      "title": "Neo4j/cypher - copy relationship labels to another"
    },
    {
      "tags": ["neo4j", "cypher", "csv-import"],
      "comments": [
        {
          "owner": {
            "reputation": 1,
            "user_id": -1,
            "user_type": "moderator",
            "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
            "display_name": "Community",
            "link": "https://stackoverflow.com/users/-1/community"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1698427227,
          "post_id": 77374200,
          "comment_id": 136409014,
          "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j#comment136409014_77374200"
        },
        {
          "owner": {
            "reputation": 3,
            "user_id": 22695083,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIbz5v9WUcVtiZjc3jj_yGeXR4j-EYL2oP06CUAJCaq0a4=k-s256",
            "display_name": "Santosh Jamale",
            "link": "https://stackoverflow.com/users/22695083/santosh-jamale"
          },
          "reply_to_user": {
            "reputation": 1,
            "user_id": -1,
            "user_type": "moderator",
            "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
            "display_name": "Community",
            "link": "https://stackoverflow.com/users/-1/community"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698577800,
          "post_id": 77374200,
          "comment_id": 136420928,
          "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j#comment136420928_77374200"
        },
        {
          "owner": {
            "reputation": 136,
            "user_id": 10768865,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Stephanie",
            "link": "https://stackoverflow.com/users/10768865/stephanie"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706106451,
          "post_id": 77374200,
          "comment_id": 137286438,
          "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j#comment137286438_77374200"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22695083,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIbz5v9WUcVtiZjc3jj_yGeXR4j-EYL2oP06CUAJCaq0a4=k-s256",
        "display_name": "Santosh Jamale",
        "link": "https://stackoverflow.com/users/22695083/santosh-jamale"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698410150,
      "creation_date": 1698410150,
      "question_id": 77374200,
      "share_link": "https://stackoverflow.com/q/77374200",
      "body_markdown": "I am facing an issue with importing multiple values for a property of node from csv file.\r\nFor example we have below values in csv file,\r\n\r\n| CarDriver   | Passengers |\r\n| -----       | -------    |\r\n| Ganesh      | Rajesh     |\r\n| Ganesh      | Sunil      |\r\n| Ganesh      | Mangesh    |\r\n| Suresh      | Mukesh     |\r\n| Suresh      | Nitesh     |\r\n\r\n\r\nCan anyone please suggest some solution for this issue?\r\n\r\nThanks,\r\nSantosh\r\n\r\nI tried to modify my query as per below two solutions from stackoverflow but it did not work,\r\n\r\nIt gave me below error, &quot;Cannot merge the following node because of null property value for &#39;id&#39;: (:Person {id: null})&quot;.",
      "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j",
      "title": "How to import multiple values for a property from csv file in Neo4j"
    },
    {
      "tags": ["neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 41484,
            "user_id": 728812,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=256&d=identicon&r=PG",
            "display_name": "Michael Hunger",
            "link": "https://stackoverflow.com/users/728812/michael-hunger"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1698338447,
          "last_edit_date": 1698338447,
          "creation_date": 1698322520,
          "answer_id": 77366917,
          "question_id": 77366735,
          "share_link": "https://stackoverflow.com/a/77366917",
          "body_markdown": "It is visible until you end its scope with a `WITH` statement or `RETURN`.\r\n\r\ne.g.\r\n\r\n    MATCH (p:Person)\r\n    UNWIND [1, 2, 3] AS x\r\n    WITH p // no x behind this WITH\r\n\r\nor keep it visible\r\n\r\n    MATCH (p:Person)\r\n    UNWIND [1, 2, 3] AS x\r\n    WITH p,x // x is still visible after\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77366735/what-is-the-scope-of-unwind-in-neo4j/77366917#77366917",
          "title": "What is the scope of unwind in neo4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 22807132,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJ5nIZRq7dm3BpCwPgkV6rid5DPxb_dLQ_Mr8tQx3Jy=k-s256",
        "display_name": "Trichian",
        "link": "https://stackoverflow.com/users/22807132/trichian"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77366917,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1698338447,
      "creation_date": 1698320855,
      "question_id": 77366735,
      "share_link": "https://stackoverflow.com/q/77366735",
      "body_markdown": "I wanted to know what is the scope of unwind variable?\r\nLike the unwind variable is accessible till where?\r\nI have this question since there is no marking of END for the unwind.\r\n\r\n|e.g|\r\n\r\nIf I have lengthy query, the below x not accessible where\r\nUNWIND [1, 2, 3] AS x\r\n\r\nThanks.\r\n\r\nI want to know where the unwind variable scope ends",
      "link": "https://stackoverflow.com/questions/77366735/what-is-the-scope-of-unwind-in-neo4j",
      "title": "What is the scope of unwind in neo4j"
    },
    {
      "tags": ["neo4j", "cypher", "spring-data-neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698338575,
          "last_edit_date": 1698338575,
          "creation_date": 1698262486,
          "answer_id": 77362433,
          "question_id": 77359271,
          "share_link": "https://stackoverflow.com/a/77362433",
          "body_markdown": "Since your original query returns a path, you can try using [apoc.path.expand](https://neo4j.com/docs/apoc/current/graph-querying/expand-paths/) instead of `apoc.path.subgraphAll`:\r\n\r\n    @Query(&quot;&quot;&quot;\r\n       MATCH (ord:Order {id: $orderId})\r\n       CALL apoc.path.expand(ord, null, null, 0, -1) YIELD path\r\n       RETURN path\r\n    &quot;&quot;&quot;)\r\n    List&lt;Order&gt; getOrders(@Param(&quot;orderId&quot;) Long orderId);\r\n\r\n*NOTE: The above specifies a lower bound of `0`, so a path containing just `ord` would be returned if that node has no relationships, which I think is maybe what you intended. But this behavior is different than your original query&#39;s, which used a (defaulted) lower bound of 1 and would return nothing if `ord` has no relationships. If the latter is what you intended, change my `0` to `1`.*\r\n\r\nAlternatively, if acceptable, a simple workaround would be to limit the length of the variable-length path search. For example, to limit the search to at most 10 hops, you could replace `[*]` with `[*..10]` (or, to use `0` lower bound: `[*0..10]`) in your original query. With my query, use `10` instead of `-1`.",
          "link": "https://stackoverflow.com/questions/77359271/running-apoc-subgraphall-in-spring-data-neo4j/77362433#77362433",
          "title": "Running APOC subGraphAll() in Spring Data Neo4j"
        }
      ],
      "owner": {
        "reputation": 431,
        "user_id": 7316385,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/1f73fa9ad138c2a629498256c2d203a8?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Can Cinar",
        "link": "https://stackoverflow.com/users/7316385/can-cinar"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1698338575,
      "creation_date": 1698235120,
      "question_id": 77359271,
      "share_link": "https://stackoverflow.com/q/77359271",
      "body_markdown": "I am using Spring Data Neo4j, and trying to execute the following code:\r\n\r\n        @Query(&quot;&quot;&quot;\r\n             MATCH (orders:Order {id:1})\r\n             CALL apoc.path.subgraphAll(orders, {})\r\n             YIELD nodes, relationships\r\n             RETURN  nodes, relationships\r\n            &quot;&quot;&quot;)\r\n    List&lt;Order&gt; getOrders(@Param(&quot;orderId&quot;) Long orderId);\r\n\r\nHowever, it returns only one Order with null fields instead of two with all fields populated.\r\n\r\nBefore, I was using the following code:\r\n\r\n          @Query(&quot;&quot;&quot;\r\n             MATCH path = (orders:Order {id: $orderId})-[*]-(commons)\r\n             RETURN path\r\n            &quot;&quot;&quot;)\r\n    List&lt;Order&gt; getOrders(@Param(&quot;orderId&quot;) Long orderId);\r\n\r\nHowever, it becomes prolonged after adding 10-20 nodes... So I either need to improve this query or somehow make Spring work with APOC procedures.\r\n\r\nI really appreciate it if you could helm me on this matter.\r\n\r\nThank you in advance!\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77359271/running-apoc-subgraphall-in-spring-data-neo4j",
      "title": "Running APOC subGraphAll() in Spring Data Neo4j"
    },
    {
      "tags": ["neo4j", "neo4j-graphql-js"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698253993,
          "post_id": 77359216,
          "comment_id": 136383033,
          "link": "https://stackoverflow.com/questions/77359216/error-access-on-database-neo4j-is-not-allowed-for-user-on-se-of-neo4j-graphql#comment136383033_77359216"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1698254863,
          "creation_date": 1698254863,
          "answer_id": 77361712,
          "question_id": 77359216,
          "share_link": "https://stackoverflow.com/a/77361712",
          "body_markdown": "That `database` config parameter [does not seem to be documented](https://neo4j.com/docs/api/javascript-driver/current/class/lib6/types.js~Config.html).\r\n\r\nTry following the [documented approach to specifying the database](https://neo4j.com/docs/graphql/current/driver-configuration/#_specifying_the_neo4j_database). That is, specify the database name the server should use when creating driver sessions:\r\n\r\n    await startStandaloneServer(server, {\r\n        context: async ({ req }) =&gt; ({ req, sessionConfig: { database: &quot;mydb_name&quot; }}),\r\n    });",
          "link": "https://stackoverflow.com/questions/77359216/error-access-on-database-neo4j-is-not-allowed-for-user-on-se-of-neo4j-graphql/77361712#77361712",
          "title": "Error ACCESS on database &#39;neo4j&#39; is not allowed for user on se of neo4j/graphql"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 18560912,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxbPYrKiebak2oNRYUAaZO_JBjxuGu0BG9W4JfP=k-s256",
        "display_name": "vetti ",
        "link": "https://stackoverflow.com/users/18560912/vetti"
      },
      "last_editor": {
        "reputation": 13,
        "user_id": 18560912,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxbPYrKiebak2oNRYUAaZO_JBjxuGu0BG9W4JfP=k-s256",
        "display_name": "vetti ",
        "link": "https://stackoverflow.com/users/18560912/vetti"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77361712,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702282388,
      "creation_date": 1698234696,
      "last_edit_date": 1702282388,
      "question_id": 77359216,
      "share_link": "https://stackoverflow.com/q/77359216",
      "body_markdown": "I am using this in Apollo GraphQL server:\r\n\r\n    const { Neo4jGraphQL } = require(&#39;@neo4j/graphql&#39;);\r\n\r\nAnd I am getting this error:  `Error  ACCESS on database &#39;neo4j&#39; is not allowed for user myuser`\r\n\r\nBut I am not referring to the `neo4j` database.  I have specified a different DB to the driver: &quot;mydb_name&quot;\r\n\r\n    const driver = neo4j.driver(uri, neo4j.auth.basic(user, password), {\r\n            database: &#39;mydb_name&#39;, // Specify your database name here\r\n        })\r\n\r\nI set the the Home DB of that user to &quot;mydb_name&quot;.\r\n\r\nWhy is th error referring to the `neo4j` DB? How to solve this?\r\n\r\nIf using directly with driver session query that working... But the  same with schema then getting error ",
      "link": "https://stackoverflow.com/questions/77359216/error-access-on-database-neo4j-is-not-allowed-for-user-on-se-of-neo4j-graphql",
      "title": "Error ACCESS on database &#39;neo4j&#39; is not allowed for user on se of neo4j/graphql"
    },
    {
      "tags": ["neo4j", "graph-databases"],
      "owner": {
        "reputation": 26,
        "user_id": 9817604,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9c1ec80bd5dd2d72425c303c42ef1c8a?s=256&d=identicon&r=PG",
        "display_name": "David Betancourt M.",
        "link": "https://stackoverflow.com/users/9817604/david-betancourt-m"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 23,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698180217,
      "creation_date": 1698180217,
      "question_id": 77355291,
      "share_link": "https://stackoverflow.com/q/77355291",
      "body_markdown": "I have performed a consistency check on a Neo4j dump file, which was generated from a Neo4j database (5.8.0 version). I ran the command: \r\n\r\n`sudo neo4j-admin database check --from-path=./ neo4j`\r\n\r\nChecking the report, it got errors like this:\r\n\r\n...\r\n```\r\nERROR Index inconsistency: Index has a leaked page that will never be reclaimed, pageId=208.\r\nIndex will be excluded from further consistency checks. Index file: /data1/dumps2/4459558985020293571/neo4j/schema/index/range-1.0/75/index-75.\r\n\r\nERROR Index inconsistency: Index has a leaked page that will never be reclaimed, pageId=247.\r\nIndex will be excluded from further consistency checks. Index file: /data1/dumps2/4459558985020293571/neo4j/schema/index/range-1.0/75/index-75.\r\n```\r\n...\r\n\r\nHow can I solve the inconsistency errors?\r\n\r\n\r\nI have searched for info, but almost none results I got in Google. I was expecting to solve the inconsistencies and then upload the dump into AuraDB remote database for Neo4j.",
      "link": "https://stackoverflow.com/questions/77355291/how-to-solve-error-index-inconsistency-index-has-a-leaked-page-that-will-never",
      "title": "How to solve ERROR Index inconsistency: Index has a leaked page that will never be reclaimed, pageId=X? Neo4j"
    },
    {
      "tags": ["python", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698170323,
          "post_id": 77353888,
          "comment_id": 136370372,
          "link": "https://stackoverflow.com/questions/77353888/cannot-connect-to-neo4j-in-python-to-push-data#comment136370372_77353888"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 5595816,
            "user_type": "registered",
            "profile_image": "https://lh5.googleusercontent.com/-Sm1ZDFRC7pQ/AAAAAAAAAAI/AAAAAAAAAIo/wv-tNaaDmDU/photo.jpg?sz=256",
            "display_name": "Samuel Fran&#231;a",
            "link": "https://stackoverflow.com/users/5595816/samuel-fran%c3%a7a"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698347812,
          "creation_date": 1698347812,
          "answer_id": 77369794,
          "question_id": 77353888,
          "share_link": "https://stackoverflow.com/a/77369794",
          "body_markdown": "Try to use &quot;neo4j+ssc&quot; on the uri like this \r\nURI = &quot;neo4j+ssc://838f9df7.databases.neo4j.io&quot;",
          "link": "https://stackoverflow.com/questions/77353888/cannot-connect-to-neo4j-in-python-to-push-data/77369794#77369794",
          "title": "Cannot connect to Neo4j in Python to push data"
        }
      ],
      "owner": {
        "reputation": 29,
        "user_id": 18566978,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjAj7isO-roI4iM4ZBFQYV91O-r1pLNJht_JBB6rg=k-s256",
        "display_name": "Benjamin Hammond",
        "link": "https://stackoverflow.com/users/18566978/benjamin-hammond"
      },
      "last_editor": {
        "reputation": 7046,
        "user_id": 14529779,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/Gx3Jf.jpg?s=256&g=1",
        "display_name": "XM01 - stands with Palestine",
        "link": "https://stackoverflow.com/users/14529779/xm01-stands-with-palestine"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 86,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698347812,
      "creation_date": 1698165150,
      "last_edit_date": 1698261644,
      "question_id": 77353888,
      "share_link": "https://stackoverflow.com/q/77353888",
      "body_markdown": "I am going slightly crazy trying to understand why I can&#39;t push data to my Neo4j database using CYPHER in Python.\r\n\r\nI am running basic testing code just to see if I can push data. Here is my testing code:\r\n\r\n```py\r\nimport logging\r\nfrom neo4j import GraphDatabase\r\n\r\n# Set up logging\r\nlogging.basicConfig(level=logging.DEBUG)  # Change the level to ERROR, WARNING, INFO, or DEBUG as needed\r\nlog = logging.getLogger(&quot;neo4j&quot;)\r\n\r\nclass Neo4jService:\r\n    def __init__(self, uri, user, password):\r\n        self._driver = GraphDatabase.driver(uri, auth=(user, password))\r\n        \r\n    def close(self):\r\n        log.debug(&quot;Closing driver.&quot;)\r\n        self._driver.close()\r\n        \r\n    def run_queries(self, queries):\r\n        log.debug(&quot;Running queries.&quot;)\r\n        with self._driver.session() as session:\r\n            for query in queries:\r\n                log.debug(f&quot;Executing query: {query}&quot;)\r\n                session.run(query)\r\n\r\ntry:\r\n    # Initialize the Neo4j service\r\n    URI = &quot;neo4j+s://838f9df7.databases.neo4j.io&quot;\r\n    AUTH = (&quot;neo4j&quot;, &quot;my_password&quot;)\r\n\r\n    log.info(&quot;Initializing driver.&quot;)\r\n    with GraphDatabase.driver(URI, auth=AUTH) as driver:\r\n        log.info(&quot;Verifying connectivity.&quot;)\r\n        driver.verify_connectivity()\r\n\r\n    summary = driver.execute_query(\r\n        &quot;MERGE (:Person {name: $name})&quot;,\r\n        name=&quot;Alice&quot;,\r\n        database_=&quot;neo4j&quot;,\r\n    ).summary\r\n\r\n    log.info(f&quot;Created {summary.counters.nodes_created} nodes in {summary.result_available_after} ms.&quot;)\r\n\r\nexcept Exception as e:\r\n    log.error(&quot;An error occurred:&quot;, exc_info=True)\r\n```\r\n\r\nWhatever I seem to do, I get an error like this:\r\n\r\n```\r\nneo4j.exceptions.ServiceUnavailable: Unable to retrieve routing information\r\n```\r\n\r\nI have tried manually telling the Neo4j to trust the certificate by saving the certificate as a file and including a trust setting in my code. But this didn&#39;t work. I have tried swithcing from neo4j+s to bolt or just neo4j. I have updated neo4j and python. I feel like I have been debugging for about two days. Whatever I do, nothing happens in my Neo4j database. Help appreciated!",
      "link": "https://stackoverflow.com/questions/77353888/cannot-connect-to-neo4j-in-python-to-push-data",
      "title": "Cannot connect to Neo4j in Python to push data"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698130399,
              "post_id": 77347595,
              "comment_id": 136362676,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#comment136362676_77347595"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698130432,
              "post_id": 77347595,
              "comment_id": 136362679,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#comment136362679_77347595"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698163528,
              "post_id": 77347595,
              "comment_id": 136369182,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#comment136369182_77347595"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698163831,
          "last_edit_date": 1698163831,
          "creation_date": 1698086458,
          "answer_id": 77347595,
          "question_id": 77347515,
          "share_link": "https://stackoverflow.com/a/77347595",
          "body_markdown": "It appears that there is no sequence of relationships from `parent` to `gap` that passes through a `FACT` relationship.\r\n\r\nIf that is true, then your query is working as expected and should not find any `FACT` relationships.\r\n\r\n#### Answer 1\r\n\r\nHere is one way to display each path `p` and a list of the &quot;factoids&quot; for the nodes in that path.\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    UNWIND NODES(p) AS n\r\n    RETURN p, REDUCE(\r\n      s = [], t IN COLLECT({n: n, facts: [(n)&lt;-[r:FACT]-(f) | {rel: f, fact: f}]}) |\r\n      CASE WHEN SIZE(t.facts) &gt; 0 THEN s + t ELSE s END) AS factoids\r\n\r\nA &quot;factoid&quot; is a map with these properties:\r\n  - `n` is a node in the path that has an incoming `FACT` relationship (even if that relationship is not on the path)\r\n  - `rel` is the `FACT` relationship\r\n  - `fact` is the source node of that `FACT` relationship\r\n\r\n#### Answer 2\r\n\r\n@Graphileon&#39;s fine answer is more compact, but its result contains a superfluous empty list for every path node that has no incoming `FACT` relationship.\r\n\r\nThis version of his answer uses [apoc.coll.removeAll](https://neo4j.com/docs/apoc/current/overview/apoc.coll/apoc.coll.removeAll/) to remove the empty lists:\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    RETURN p,\r\n           apoc.coll.removeAll(\r\n             [node IN NODES(p) | [fp = (node)&lt;-[:FACT]-(f) | fp ]],\r\n             [[]]) AS factPaths\r\n\r\nUsing`apoc.coll.removeAll` to remove empty lists is for convenience and readability, but not necessary. For example, we could use `REDUCE` instead, as in Answer #1.",
          "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#77347595",
          "title": "Displaying hidden nodes in Neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698108441,
              "post_id": 77348149,
              "comment_id": 136360856,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136360856_77348149"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698130357,
              "post_id": 77348149,
              "comment_id": 136362673,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136362673_77348149"
            },
            {
              "owner": {
                "reputation": 5335,
                "user_id": 1734996,
                "user_type": "registered",
                "accept_rate": 85,
                "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
                "display_name": "Graphileon",
                "link": "https://stackoverflow.com/users/1734996/graphileon"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698132307,
              "post_id": 77348149,
              "comment_id": 136363012,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136363012_77348149"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698145486,
              "post_id": 77348149,
              "comment_id": 136365337,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136365337_77348149"
            },
            {
              "owner": {
                "reputation": 5335,
                "user_id": 1734996,
                "user_type": "registered",
                "accept_rate": 85,
                "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
                "display_name": "Graphileon",
                "link": "https://stackoverflow.com/users/1734996/graphileon"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698145673,
              "post_id": 77348149,
              "comment_id": 136365362,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136365362_77348149"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "last_editor": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698132200,
          "last_edit_date": 1698132200,
          "creation_date": 1698093061,
          "answer_id": 77348149,
          "question_id": 77347515,
          "share_link": "https://stackoverflow.com/a/77348149",
          "body_markdown": "I would go for something like this:\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    RETURN p,\r\n           [node IN nodes(p) |\r\n    \t       [ factPath = (node)&lt;-[:FACT]-(f) | factPath ]\r\n    \t   ] AS factPaths\r\n\r\nSo you basically loop through the nodes on the path p, and pick up any incoming paths with FACT relationships\r\n\r\nIn case you want to filter out the empty lists (for nodes that do not have incoming FACT rels) it can be done with an additional WHERE\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    RETURN p,\r\n         [node IN nodes(p) WHERE EXISTS((node)&lt;-[:FACT]-()) |\r\n    \t       [ factPath = (node)&lt;-[:FACT]-(f) | factPath ]\r\n    \t ] AS factPaths\r\n\r\n NOTE: factPaths is returned as a nested array of paths. Depending on what you want to do with it (to the viz) or further processing, you may want to use apoc.coll.flatten() to ..eh .. flatten it",
          "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#77348149",
          "title": "Displaying hidden nodes in Neo4j"
        }
      ],
      "owner": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1698163831,
      "creation_date": 1698085429,
      "question_id": 77347515,
      "share_link": "https://stackoverflow.com/q/77347515",
      "body_markdown": "I have a query that shows the results from my large graph as follows:\r\n\r\n[![graph][1]][1]\r\n\r\nHere is my query to show the graph\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP) WHERE parent.name = &quot;Update Profile&quot; \r\n    and (gap.name contains &quot;CSRF&quot; )  RETURN p\r\n\r\nThe nodes R11_UP and R12_UP have an incoming edge of type FACT; this query is not displaying that. Here is what the graph looks like if I manually show these incoming edges:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI want to update my query to show these FACT nodes along with the other graph shown by this query. I am unable to design a query for it. I tried several queries, but none of them worked. I am always stuck with this graph at the end.\r\n\r\n  [1]: https://i.stack.imgur.com/nrhJ0.png\r\n  [2]: https://i.stack.imgur.com/r5ESA.png",
      "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j",
      "title": "Displaying hidden nodes in Neo4j"
    },
    {
      "tags": ["neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698093392,
          "creation_date": 1698093392,
          "answer_id": 77348188,
          "question_id": 77346710,
          "share_link": "https://stackoverflow.com/a/77348188",
          "body_markdown": "AFAIK, Cypher does not support dynamic labels. But the apoc library does: See \r\n\r\nhttps://neo4j.com/labs/apoc/4.1/overview/apoc.merge/apoc.merge.node/",
          "link": "https://stackoverflow.com/questions/77346710/neo4j-query-not-making-use-of-indexes/77348188#77348188",
          "title": "Neo4j query not making use of indexes"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 97,
                "user_id": 2461139,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/M2NBq.jpg?s=256&g=1",
                "display_name": "Prassi",
                "link": "https://stackoverflow.com/users/2461139/prassi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698129827,
              "post_id": 77349202,
              "comment_id": 136362594,
              "link": "https://stackoverflow.com/questions/77346710/neo4j-query-not-making-use-of-indexes/77349202#comment136362594_77349202"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1698118001,
          "last_edit_date": 1698118001,
          "creation_date": 1698114753,
          "answer_id": 77349202,
          "question_id": 77346710,
          "share_link": "https://stackoverflow.com/a/77349202",
          "body_markdown": "Neo4j does not require nodes to have consistent labeling, so every node can have any number of labels (including 0).\r\n\r\nNow, let&#39;s suppose the Cypher execution planner was &quot;super-smart&quot; and *could* automatically use indexes if you did not specify any labels. In that case, the planner would have to test *every matching node* for its labels, and then try to determine a single coherent plan that used a combination of indexes involving those labels to minimize execution time.\r\n\r\nSince this requires scanning all matching nodes just to come up with the execution plan, we have swamped any speedup we would get by executing the resulting plan with indexes.\r\n\r\nSo, a &quot;super-smart&quot; Cypher planner would be too slow to be of any use.",
          "link": "https://stackoverflow.com/questions/77346710/neo4j-query-not-making-use-of-indexes/77349202#77349202",
          "title": "Neo4j query not making use of indexes"
        }
      ],
      "owner": {
        "reputation": 97,
        "user_id": 2461139,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/M2NBq.jpg?s=256&g=1",
        "display_name": "Prassi",
        "link": "https://stackoverflow.com/users/2461139/prassi"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77349202,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1698118001,
      "creation_date": 1698077162,
      "question_id": 77346710,
      "share_link": "https://stackoverflow.com/q/77346710",
      "body_markdown": "I have several types of node labels (Asset1, Asset2, etc), all of which can be connected to any of the others; each asset has different fields but all have in common an `id` field. I am saving this data in CSV files to be loaded in Neo4j: node data is saved in asset1.csv, asset2.csv, etc, while relationship data is saved in a connection.csv file with the following header: `asset_1_id`, `asset_1_type`, `asset_2_id`, `asset_2_type`.\r\n\r\nLoading the nodes is easy:\r\n\r\n```cypher\r\nLOAD CSV WITH HEADERS FROM &#39;file:///assetN.csv&#39; AS row\r\nCREATE (n:AssetN {\r\n  id: row.id,\r\n  // other fields for AssetN\r\n})\r\n```\r\n\r\nBefore loading the nodes, I define separate indexes for each asset type:\r\n\r\n```cypher\r\nCREATE INDEX assetN_id IF NOT EXISTS FOR (n:AssetN) ON (n.id);\r\n```\r\n\r\nLoading the relationships is a bit trickier, because my first solution never terminates:\r\n\r\n```cypher\r\nLOAD CSV WITH HEADERS FROM &#39;file:///connection.csv&#39; AS row\r\nMATCH (asset1 { id: row.asset_1_id })\r\nMATCH (asset2 { id: row.asset_2_id }) \r\n    \r\nMERGE (asset1)-[:CONNECTED_TO]-(asset2)\r\n```\r\n\r\nIt seems that if I don&#39;t specify the label type, Neo4j does not look for an index in case it exists. I understand sometimes it may not exist (e.g. let&#39;s say there is another asset type without that index defined), but I would expect it to try and then default to a full scan otherwise.\r\n\r\nSo my second solution is to try and use APOC to read the labels dynamically from the CSV file:\r\n\r\n```cypher\r\nLOAD CSV WITH HEADERS FROM &#39;file:///connection.csv&#39; AS row\r\nCALL apoc.merge.node([row.asset_1_type], { mrid: row.asset_1_id }) YIELD node as asset1\r\nCALL apoc.merge.node([row.asset_2_type], { mrid: row.asset_2_id }) YIELD node as asset2   \r\n \r\nMERGE (asset1)-[:CONNECTED_TO]-(asset2)\r\n```\r\n\r\nBut this never terminates either, as it still does not seem to use the indexes.\r\n\r\nThe only solution I found so far that actually works is defining an additional label for each asset type (called Asset), defining a single index on Asset and then loading the relationship data:\r\n\r\n```cypher\r\nLOAD CSV WITH HEADERS FROM &#39;file:///connection.csv&#39; AS row\r\nMATCH (asset1:Asset { id: row.asset_1_id })\r\nMATCH (asset2:Asset { id: row.asset_2_id }) \r\n    \r\nMERGE (asset1)-[:CONNECTED_TO]-(asset2)\r\n```\r\n\r\nThis is extremely quick because it actually uses the index, but I don&#39;t like having to add a label to each node just to optimise loading the data.\r\n\r\nAre there other solutions I am not seeing?",
      "link": "https://stackoverflow.com/questions/77346710/neo4j-query-not-making-use-of-indexes",
      "title": "Neo4j query not making use of indexes"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698064118,
          "post_id": 77341501,
          "comment_id": 136353723,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136353723_77341501"
        },
        {
          "owner": {
            "reputation": 3,
            "user_id": 22352646,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
            "display_name": "SimG",
            "link": "https://stackoverflow.com/users/22352646/simg"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698091825,
          "post_id": 77341501,
          "comment_id": 136358995,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136358995_77341501"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698165984,
          "post_id": 77341501,
          "comment_id": 136369633,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136369633_77341501"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698166686,
          "post_id": 77341501,
          "comment_id": 136369755,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136369755_77341501"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22352646,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
        "display_name": "SimG",
        "link": "https://stackoverflow.com/users/22352646/simg"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 62,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698004696,
      "creation_date": 1698004696,
      "question_id": 77341501,
      "share_link": "https://stackoverflow.com/q/77341501",
      "body_markdown": "I have Officer nodes belonging to the same community (property community_probably_same_officer that I created with Graph Data Science). I would like to merge those nodes with apoc.refactor.mergeNodes.\r\nI cannot use the iterate apoc since it has a bug that I reported so this is a workaround.\r\n\r\nI wrote this code:\r\n\r\n```\r\nmatch (n:Officer)\r\nwith collect(distinct n.community_probably_same_officer) as idcom\r\nunwind idcom as unwidcom\r\nMATCH (n:Officer) where n.community_probably_same_officer=unwidcom\r\nWITH unwidcom, collect(n) AS nodicom\r\nCALL apoc.refactor.mergeNodes(nodicom,{\r\nproperties:&quot;discard&quot;, mergeRels:true, preserveExistingSelfRels:false})\r\nyield node\r\nreturn count(*)\r\n```\r\n\r\nand I have this error\r\n\r\nFailed to invoke procedure `apoc.refactor.mergeNodes`: Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Throwable.getMessage()&quot; because the return value of &quot;org.neo4j.graphdb.NotFoundException.getCause()&quot; is null\r\n\r\nWhen I used this code for other communities based on a different property it worked with no problems.\r\n\r\nThanks in advance.",
      "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes",
      "title": "Neo4J: Failed to invoke procedure `apoc.refactor.mergeNodes`"
    },
    {
      "tags": ["neo4j", "cypher", "memgraphdb"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6345,
                "user_id": 1099123,
                "user_type": "registered",
                "accept_rate": 55,
                "profile_image": "https://www.gravatar.com/avatar/41f5144169c49d431963661b24fa918d?s=256&d=identicon&r=PG",
                "display_name": "user1099123",
                "link": "https://stackoverflow.com/users/1099123/user1099123"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698494326,
              "post_id": 77341642,
              "comment_id": 136414608,
              "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77341642#comment136414608_77341642"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 3,
          "is_accepted": true,
          "score": 3,
          "last_activity_date": 1698007525,
          "creation_date": 1698007525,
          "answer_id": 77341642,
          "question_id": 77341203,
          "share_link": "https://stackoverflow.com/a/77341642",
          "body_markdown": "You can return pairs of endpoints in the results, in descending order of the number of paths between them, like so:\r\n```\r\nMATCH path = (start:Fen)-[*]-&gt;(end:Fen)\r\nWHERE start.Name = &#39;A&#39;\r\nRETURN start, end, count(*) AS count\r\nORDER BY count DESC\r\n```\r\nAs an aside, you depict your desired result in the form of `A -r-&gt; B`. Assuming by `-r-&gt;` you mean all the intermediate nodes and relationships in the path, then these would all be distinct and appear in separate rows.",
          "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77341642#77341642",
          "title": "How do I get the unique paths in a graph in memgraph/cypher?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698057637,
              "post_id": 77343237,
              "comment_id": 136352562,
              "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77343237#comment136352562_77343237"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 205,
            "user_id": 21138720,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0f2f11bd6cc32fc7f0497cb4e7aa9aa3?s=256&d=identicon&r=PG",
            "display_name": "GrandMel",
            "link": "https://stackoverflow.com/users/21138720/grandmel"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698044891,
          "creation_date": 1698044891,
          "answer_id": 77343237,
          "question_id": 77341203,
          "share_link": "https://stackoverflow.com/a/77343237",
          "body_markdown": "If you have a this type of dataset:\r\n\r\n    CREATE (:Node {name: &#39;A&#39;});\r\n    CREATE (:Node {name: &#39;B&#39;});\r\n    CREATE (:Node {name: &#39;C&#39;});\r\n    CREATE (:Node {name: &#39;D&#39;});\r\n    CREATE (:Node {name: &#39;E&#39;});\r\n    MATCH (a:Node {name: &#39;A&#39;}), (b:Node {name: &#39;B&#39;})\r\n    CREATE (a)-[:r1]-&gt;(b)\r\n    CREATE (a)-[:r2]-&gt;(b);\r\n    MATCH (a:Node {name: &#39;A&#39;}), (c:Node {name: &#39;C&#39;})\r\n    CREATE (a)-[:r3]-&gt;(c);\r\n    MATCH (d:Node {name: &#39;D&#39;}), (e:Node {name: &#39;E&#39;})\r\n    CREATE (d)-[:r4]-&gt;(e);\r\n    MATCH (b:Node {name: &#39;B&#39;}), (d:Node {name: &#39;D&#39;})\r\n    CREATE (b)-[:r5]-&gt;(d);\r\n    MATCH (c:Node {name: &#39;C&#39;}), (e:Node {name: &#39;E&#39;})\r\n    CREATE (c)-[:r6]-&gt;(e);\r\n\r\nThis should work in Memgraph:\r\n\r\n    MATCH (start:Node {name: &#39;A&#39;})-[r]-&gt;(end:Node)\r\n    WITH start, end, collect(r) AS rels\r\n    ORDER BY size(rels) DESC\r\n    RETURN start.name AS StartNode, end.name AS EndNode, size(rels) AS RelationshipCount\r\n\r\nAs result I get `A-&gt;B count:2`, `A-&gt;C count:1`\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77343237#77343237",
          "title": "How do I get the unique paths in a graph in memgraph/cypher?"
        }
      ],
      "owner": {
        "reputation": 6345,
        "user_id": 1099123,
        "user_type": "registered",
        "accept_rate": 55,
        "profile_image": "https://www.gravatar.com/avatar/41f5144169c49d431963661b24fa918d?s=256&d=identicon&r=PG",
        "display_name": "user1099123",
        "link": "https://stackoverflow.com/users/1099123/user1099123"
      },
      "last_editor": {
        "reputation": 205,
        "user_id": 21138720,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0f2f11bd6cc32fc7f0497cb4e7aa9aa3?s=256&d=identicon&r=PG",
        "display_name": "GrandMel",
        "link": "https://stackoverflow.com/users/21138720/grandmel"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 79,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 4,
      "accepted_answer_id": 77341642,
      "answer_count": 2,
      "score": 4,
      "last_activity_date": 1698513750,
      "creation_date": 1697999220,
      "last_edit_date": 1698513750,
      "question_id": 77341203,
      "share_link": "https://stackoverflow.com/q/77341203",
      "body_markdown": "Suppose I had two nodes: A and B. Now suppose I had two relations that are similar:\r\n\r\n```\r\nA -r1-&gt; B\r\nA -r2-&gt; B\r\n```\r\n\r\nHow do I make a query that returns just a path from A -&gt; B? The following query returns two paths that are identical. Can we merge the results?\r\n\r\n```\r\nMATCH path = (start:Fen)-[r*]-&gt;(end:Fen)\r\nWHERE start.Name = &#39;A&#39;\r\nRETURN DISTINCT(path)\r\n```\r\n\r\nWhat I am trying to solve is to find the most popular paths between nodes. so given the graph:\r\n\r\n```\r\nA -r1-&gt; B\r\nA -r2-&gt; B\r\nA -r3-&gt; C\r\n```\r\nthe query should return \r\n```\r\nA -r-&gt; B\r\nA -r-&gt; C\r\n```\r\nsince A -&gt; B is the most popular it appears first\r\n",
      "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher",
      "title": "How do I get the unique paths in a graph in memgraph/cypher?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698001007,
              "post_id": 77340950,
              "comment_id": 136346934,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136346934_77340950"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698006381,
              "post_id": 77340950,
              "comment_id": 136347466,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136347466_77340950"
            },
            {
              "owner": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698034308,
              "post_id": 77340950,
              "comment_id": 136349342,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136349342_77340950"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698057253,
              "post_id": 77340950,
              "comment_id": 136352506,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136352506_77340950"
            },
            {
              "owner": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698067946,
              "post_id": 77340950,
              "comment_id": 136354561,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136354561_77340950"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697994572,
          "creation_date": 1697994572,
          "answer_id": 77340950,
          "question_id": 77339992,
          "share_link": "https://stackoverflow.com/a/77340950",
          "body_markdown": "Paths are linear, so it isn&#39;t possible to have a result with `D` as part of the same path as `A`, `B` and `F` (without re-traversing the relationship that joins `B` and `D`—but that would yield a path with `B` appearing twice i.e. `A-&gt;B-&gt;D-&gt;B-&gt;F`). \r\n\r\nYou can assign the second pattern to another path variable e.g. `q` and return that along with `p`:\r\n```\r\nMATCH p = (:Service {name: &quot;A&quot;})-[r1:CAN_READ]-&gt;(n:Service)-[r2:CAN_WRITE]-&gt;\r\n            (:Service {name: &quot;F&quot;}),\r\n      q = (n)-[r3:CAN_WRITE]-&gt;(:Service {name: &quot;D&quot;}) \r\nRETURN p, q\r\n\r\nResults:\r\n╒══════════════════════════════════════════════════════════════════════╤═══════════════════════════════════════════════════════════╕\r\n│p                                                                     │q                                                          │\r\n╞══════════════════════════════════════════════════════════════════════╪═══════════════════════════════════════════════════════════╡\r\n│(:Service {name: &quot;A&quot;})-[:CAN_READ]-&gt;(:Service {name: &quot;B&quot;})-[:CAN_WRITE│(:Service {name: &quot;B&quot;})-[:CAN_WRITE]-&gt;(:Service {name: &quot;D&quot;})│\r\n│]-&gt;(:Service {name: &quot;F&quot;})                                             │                                                           │\r\n├──────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\r\n│(:Service {name: &quot;A&quot;})-[:CAN_READ]-&gt;(:Service {name: &quot;C&quot;})-[:CAN_WRITE│(:Service {name: &quot;C&quot;})-[:CAN_WRITE]-&gt;(:Service {name: &quot;D&quot;})│\r\n│]-&gt;(:Service {name: &quot;F&quot;})                                             │                                                           │\r\n└──────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\r\n```\r\n",
          "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#77340950",
          "title": "How to find paths between different services in Neo4j"
        }
      ],
      "owner": {
        "reputation": 43,
        "user_id": 9165128,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "basic",
        "link": "https://stackoverflow.com/users/9165128/basic"
      },
      "last_editor": {
        "reputation": 43,
        "user_id": 9165128,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "basic",
        "link": "https://stackoverflow.com/users/9165128/basic"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 45,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77340950,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697994572,
      "creation_date": 1697978777,
      "last_edit_date": 1697979124,
      "question_id": 77339992,
      "share_link": "https://stackoverflow.com/q/77339992",
      "body_markdown": "I&#39;m new to Neo4j and I&#39;m working on poc where there are multiple services that can read and write to each other and modeled with &lt;CAN_READ(INCOMING):CAN_WRITE(OUTGOING)&gt; directed relationships as shown in the image below. I want to find all paths from A to F through compute services which can read from A and write to Service F and compute service should also able to write data to Service D. So the query should able to return paths highlighted in green and purple.\r\n\r\nI have tried the below query which is giving Compute Services B,C and Storage Service A and Database Service F but Service D is not part of result path\r\n\r\nWhat I&#39;m trying to achieve is, I&#39;m trying to find the services that can read from a service and write to multiple other services with the same relations\r\n\r\n    Query : MATCH p= (m:Service WHERE m.name = &quot;A&quot;)-[r1:CAN_READ]-&gt;(n:Service)-[r2:CAN_WRITE]-&gt;(o:Service WHERE o.name = &quot;F&quot;),(n)-[r3:CAN_WRITE]-&gt;(t:Service WHERE t.name = &quot;D&quot;) RETURN p\r\n\r\n    Result Output Paths: (A)&lt;-[:CAN_READ]-(B)-[:WRITE_TO]-&gt;(F), (A)&lt;-[:CAN_READ]-(C)-[:WRITE_TO]-&gt;(F)\r\n\r\nHow to get the node D as part of output path? Will i able to get the node D as part of output or it will be omitted as it not part of the primary MATCH path ? Do I need to use any other functions or features of neo4j to achieve the same\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8kvbu.png",
      "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j",
      "title": "How to find paths between different services in Neo4j"
    },
    {
      "tags": ["java", "spring", "testing", "grails", "neo4j"],
      "owner": {
        "reputation": 27,
        "user_id": 13574344,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
        "display_name": "stackoverflow_user",
        "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
      },
      "last_editor": {
        "reputation": 27,
        "user_id": 13574344,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhGuIzJ2-1xF-utmOJhucA_rPsejZT_BlTMM9K7=k-s256",
        "display_name": "stackoverflow_user",
        "link": "https://stackoverflow.com/users/13574344/stackoverflow-user"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1697937295,
      "creation_date": 1697930101,
      "last_edit_date": 1697937295,
      "question_id": 77338120,
      "share_link": "https://stackoverflow.com/q/77338120",
      "body_markdown": "I&#39;m using testcontainer to test the neo4j-related functionalities in the application with Grails 3.3.2 and Spock.\r\n\r\nThe grails application config for Neo4j:\r\n\r\n    environments {\r\n       development {\r\n        grails {\r\n            neo4j {\r\n                url=&quot;bolt://dev-host:7687&quot;\r\n                username=&#39;xxx&#39;\r\n                password=&#39;xxx&#39;\r\n            }\r\n        }\r\n    }\r\n\r\nThe setup for Neo4j Spock integration test\r\n```\r\n@Testcontainers\r\nclass Test extends Specification {\r\n    static Neo4jContainer&lt;?&gt; container = new Neo4jContainer&lt;&gt;(&quot;neo4j:3.5&quot;)\r\n            .withoutAuthentication()\r\n\r\n    void setupSpec() {\r\n        container.start()\r\n        System.setProperty(&quot;grails.neo4j.url&quot;, container.getBoltUrl())\r\n    }\r\n    \r\n    void &quot;1. test something&quot;() {neo4jService.save(dummyData)}\r\n\r\n}\r\n```\r\nI have to change the application property source during the container setup so that the neo4j driver can find the correct database. In Spring/SpringBoot, we can use ```@DynamicPropertySource```. However, in Grails, I have to set the property manually.\r\n\r\n**Current Problem:**\r\n\r\nOnly when I don&#39;t have any neo4j configs in the application config, the test can find the right URL created by the testcontainer. If I use the config above, even though I set the system property and let it point to the testcontainer, the test is still going to use the ```bolt://dev-host:7687``` defined in the config file.\r\n\r\n\r\nAny idea on this? Thanks a lot.",
      "link": "https://stackoverflow.com/questions/77338120/using-neo4j-testcontainers-with-grails-and-spock-cant-find-correct-neo4j-datas",
      "title": "Using Neo4j Testcontainers With Grails and Spock, can&#39;t find correct neo4j datasource"
    },
    {
      "tags": ["import", "neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697925465,
          "creation_date": 1697925465,
          "answer_id": 77337939,
          "question_id": 77335429,
          "share_link": "https://stackoverflow.com/a/77337939",
          "body_markdown": "On Windows, a backslash (`\\`) in the path is taken to be a path-component separator. To treat is as a regular backslash, you need to escape it with another backslash.\r\n\r\nThis should work:\r\n\r\n    neo4j-admin database import full --nodes /import/data_header.csv,/import/data_\\\\d+.csv --overwrite-destination=true\r\n",
          "link": "https://stackoverflow.com/questions/77335429/bulk-neo4j-admin-import-from-csv-using-regex/77337939#77337939",
          "title": "bulk Neo4j admin import from csv using regex"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22774573,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKlkzIiiPUARmv4SHNI9R3NPscr1-QY3r4Ma4Nv7sY=k-s256",
        "display_name": "Mudit Shukla",
        "link": "https://stackoverflow.com/users/22774573/mudit-shukla"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697925465,
      "creation_date": 1697880643,
      "last_edit_date": 1697914575,
      "question_id": 77335429,
      "share_link": "https://stackoverflow.com/q/77335429",
      "body_markdown": "I am trying to import data from multiple csv files by matching regex pattern into neo4j database instance by neo4j admin import method, which is probably the fastest way to import data in neo4j. \r\n\r\nI am trying to use the below command to import the data in my neo4j database instance:\r\n \r\n\r\n    neo4j-admin database import full --nodes import/data_header.csv,import/data_\\d+\\.csv --overwrite-destination=true\r\n\r\nBut I am getting error something like this:\r\n\r\n    Invalid nodes file: import/data_header.csv,import/data_\\d+\\.csv (java.lang.IllegalStateException: Directory C:\\Program Files\\neo4j-community-5.12.0-windows\\neo4j-community-5.12.0\\import\\data_\\d+ of import/data_\\d+\\.csv doesn&#39;t exist)\r\n\r\nI am trying to import the data from all files that start with data_ and have any number after it.\r\nFor example, a valid file would be `data_1.csv`.\r\n\r\nI even tried with absolute path but that too did not yield any result.\r\n\r\nThanks for the help in advance.",
      "link": "https://stackoverflow.com/questions/77335429/bulk-neo4j-admin-import-from-csv-using-regex",
      "title": "bulk Neo4j admin import from csv using regex"
    },
    {
      "tags": ["python", "docker", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697828679,
          "post_id": 77333185,
          "comment_id": 136333342,
          "link": "https://stackoverflow.com/questions/77333185/flask-container-cant-access-localhost8080-but-can-access-localhost7474#comment136333342_77333185"
        },
        {
          "owner": {
            "reputation": 21200,
            "user_id": 3924803,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/M8lVF.jpg?s=256&g=1",
            "display_name": "Hans Kilian",
            "link": "https://stackoverflow.com/users/3924803/hans-kilian"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697880514,
          "post_id": 77333185,
          "comment_id": 136337145,
          "link": "https://stackoverflow.com/questions/77333185/flask-container-cant-access-localhost8080-but-can-access-localhost7474#comment136337145_77333185"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 20401213,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6673c04474bb8ff5a18cf4f45591b30b?s=256&d=identicon&r=PG",
            "display_name": "pythonmd661",
            "link": "https://stackoverflow.com/users/20401213/pythonmd661"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698076886,
          "post_id": 77333185,
          "comment_id": 136356510,
          "link": "https://stackoverflow.com/questions/77333185/flask-container-cant-access-localhost8080-but-can-access-localhost7474#comment136356510_77333185"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 20401213,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/6673c04474bb8ff5a18cf4f45591b30b?s=256&d=identicon&r=PG",
        "display_name": "pythonmd661",
        "link": "https://stackoverflow.com/users/20401213/pythonmd661"
      },
      "last_editor": {
        "reputation": 6749,
        "user_id": 6273251,
        "user_type": "registered",
        "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=256",
        "display_name": "Random Davis",
        "link": "https://stackoverflow.com/users/6273251/random-davis"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 40,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1697827975,
      "creation_date": 1697827807,
      "last_edit_date": 1697827975,
      "question_id": 77333185,
      "share_link": "https://stackoverflow.com/q/77333185",
      "body_markdown": "I am following this tutorial right here:https://github.com/elementsinteractive/flask-graphql-neo4j\r\n\r\nWhen I spin up the container everything seems to work fine and I am able to access localhost:7474, but I am not able to access localhost:8080. Also when I look at my docker container says this:\r\n```none\r\n2023-10-20 14:49:04 /bin/sh: /app/wait-for.sh: not found\r\n2023-10-20 14:49:04 Waiting for :...\r\n```",
      "link": "https://stackoverflow.com/questions/77333185/flask-container-cant-access-localhost8080-but-can-access-localhost7474",
      "title": "Flask container can&#39;t access localhost:8080, but can access localhost:7474"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1697809686,
          "post_id": 77331216,
          "comment_id": 136330121,
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j#comment136330121_77331216"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1697810243,
          "post_id": 77331216,
          "comment_id": 136330232,
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j#comment136330232_77331216"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697812966,
          "creation_date": 1697812966,
          "answer_id": 77331835,
          "question_id": 77331216,
          "share_link": "https://stackoverflow.com/a/77331835",
          "body_markdown": "You can sort the items on the list in below examples:\r\n\r\n1) Using UNWIND and COLLECT\r\n\r\n```\r\n    WITH  [ &quot;Coyote&quot;,&quot; Eastern Coyote&quot;]  as lst\r\n    UNWIND lst as l\r\n    WITH l ORDER by l\r\n    RETURN  collect(l) as sorted_lst\r\n```\r\n2) Using apoc function sort\r\n\r\n\r\n```\r\n    WITH  [ &quot;Coyote&quot;,&quot; Eastern Coyote&quot;]  as lst\r\n    RETURN apoc.coll.sort(lst) as sorted_lst\r\n```\r\n\r\nResult:\r\n\r\n    ╒════════════════════════════╕\r\n    │&quot;sorted_lst&quot;                │\r\n    ╞════════════════════════════╡\r\n    │[&quot; Eastern Coyote&quot;,&quot;Coyote&quot;]│\r\n    └────────────────────────────┘\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j/77331835#77331835",
          "title": "How string item order in neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697829616,
          "last_edit_date": 1697829616,
          "creation_date": 1697828517,
          "answer_id": 77333248,
          "question_id": 77331216,
          "share_link": "https://stackoverflow.com/a/77333248",
          "body_markdown": "In your question, you made some major mistakes:\r\n\r\n1. `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]` is a **list** of strings, not a string.\r\n2. `ORDER BY xxx DESC` sorts in **descending** order, not ascending.\r\n3. You said:\r\n\r\n    &gt; ... still not make sense, cause &quot;E&quot; is Larger than &quot;C&quot;\r\n\r\n   But the string &quot; Eastern Coyote&quot; actually starts with a **space** character, so you should have been comparing &quot; &quot; to &quot;C&quot;. The &quot; &quot; character has a lower lexical value than &quot;C&quot;. Therefore, `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]` is the correct answer after sorting the list items in **descending** order.\r\n\r\n\r\nYou need to double-check your string values to remove extraneous spaces.\r\n\r\nAlso, to return a list of the strings from `xxx` in **ascending** order (which is the default order), you can use this snippet:\r\n\r\n    ...\r\n    UNWIND xxx AS y\r\n    WITH y ORDER BY y\r\n    RETURN COLLECT(y) AS result\r\n\r\nOr, if you really want to return the list in **descending** order:\r\n\r\n    ...\r\n    UNWIND xxx AS y\r\n    WITH y ORDER BY y DESC\r\n    RETURN COLLECT(y) AS result",
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j/77333248#77333248",
          "title": "How string item order in neo4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 15858616,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/987018c9cecb2d014aacae331dfb2e9a?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Frank.H",
        "link": "https://stackoverflow.com/users/15858616/frank-h"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1697829616,
      "creation_date": 1697807745,
      "last_edit_date": 1697826293,
      "question_id": 77331216,
      "share_link": "https://stackoverflow.com/q/77331216",
      "body_markdown": "I ran a Cypher query with the clause:\r\n\r\n&gt; ORDER BY xxx DESC\r\n\r\nwhere `xxx` is a string, like `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]`. I want it ordered with first alphabet ASC, like this: `[&quot; Eastern Coyote&quot;,&quot;Coyote&quot;]`.\r\nbut the outcome is still this: `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]`.\r\n\r\nFYI: i asked chatgpt,it said order in neo4j is depends on alphabet&#39;s unicode, but it still not make sense, cause &quot;E&quot; is Larger than &quot;C&quot;",
      "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j",
      "title": "How string item order in neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697802612,
          "post_id": 77328455,
          "comment_id": 136328801,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136328801_77328455"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697824893,
          "post_id": 77328455,
          "comment_id": 136332862,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136332862_77328455"
        },
        {
          "owner": {
            "reputation": 23,
            "user_id": 22523452,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
            "display_name": "Garv",
            "link": "https://stackoverflow.com/users/22523452/garv"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697868213,
          "post_id": 77328455,
          "comment_id": 136336293,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136336293_77328455"
        },
        {
          "owner": {
            "reputation": 23,
            "user_id": 22523452,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
            "display_name": "Garv",
            "link": "https://stackoverflow.com/users/22523452/garv"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697868506,
          "post_id": 77328455,
          "comment_id": 136336310,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136336310_77328455"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698064350,
          "post_id": 77328455,
          "comment_id": 136353774,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136353774_77328455"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698336538,
          "post_id": 77328455,
          "comment_id": 136395563,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136395563_77328455"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1697914335,
          "last_edit_date": 1697914335,
          "creation_date": 1697825798,
          "answer_id": 77333022,
          "question_id": 77328455,
          "share_link": "https://stackoverflow.com/a/77333022",
          "body_markdown": "Your query seems to be spending most of its time scanning through all the possible `SubjectUserNode` candidates.\r\n\r\nSo, try adding an index on `User.NodeID`. The execution planner should be able to use that index to reduce the execution time.\r\n\r\n#### Addendum\r\n\r\nAlso, unless logically required, you should simplify your query to remove unnecessary filtering, which wastes time. For example, if all `User` nodes are also `Transaction` nodes, use `(SubjectUserNode:User ...)` instead of `(SubjectUserNode:User:Transaction ...)`.",
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query/77333022#77333022",
          "title": "How to Optimize this Neo4j Query"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "last_editor": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698340149,
          "last_edit_date": 1698340149,
          "creation_date": 1698336304,
          "answer_id": 77368647,
          "question_id": 77328455,
          "share_link": "https://stackoverflow.com/a/77368647",
          "body_markdown": "As per meeting with Garv (and also from @cybersam previous answer), removing :Transaction label on the query fixed the slow performance. The query is doing a table scan because all data in the database is labeled as Transaction.  After the fix, the run time is now 6ms vs 3.4s before. \r\n \r\n\r\n    MATCH (subjectUserNode:User{NodeID: &quot;2547:12109:000:381864&quot;})-[dimensionRelation:LegalEntity\r\n        WHERE dimensionRelation.Status = &quot;1&quot;\r\n    ]-&gt;(dimension:LegalEntity)&lt;-[udimensionRelation:LegalEntity\r\n        WHERE udimensionRelation.Status = &quot;1&quot;\r\n    ]-(user:User)-[roleRelationship:Role\r\n        WHERE roleRelationship.Status = &quot;1&quot;\r\n    ]-&gt;(role:Role{NodeID: &quot;2547:12122:000:70163&quot;})\r\n    RETURN user.TransactionID as UserID",
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query/77368647#77368647",
          "title": "How to Optimize this Neo4j Query"
        }
      ],
      "owner": {
        "reputation": 23,
        "user_id": 22523452,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
        "display_name": "Garv",
        "link": "https://stackoverflow.com/users/22523452/garv"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 60,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77333022,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1698340149,
      "creation_date": 1697778950,
      "question_id": 77328455,
      "share_link": "https://stackoverflow.com/q/77328455",
      "body_markdown": "I have this cypher query that I had written:\r\n\r\n    MATCH (SubjectUserNode:User:Transaction {NodeID: &quot;2547:12109:000:381864&quot;})-[dimensionRelation:LegalEntity\r\n        WHERE dimensionRelation.Status = &quot;1&quot;\r\n    ]-&gt;(dimension:LegalEntity:Transaction)&lt;-[udimensionRelation:LegalEntity\r\n        WHERE udimensionRelation.Status = &quot;1&quot;\r\n    ]-(User:User:Transaction)-[RoleRelationship:Role\r\n        WHERE RoleRelationship.Status = &quot;1&quot;\r\n    ]-&gt;(Role:Role:Transaction {NodeID: &quot;2547:12122:000:70163&quot;})\r\n    RETURN User.TransactionID as UserID\r\n\r\nIn this query, I&#39;m trying to get all those User nodes that are related to a given Role node(NodeID given) and are also related to the LegalEntity node which has a relation to the given User node(NodeID given).\r\n\r\nExample:\r\n\r\n[![Node image][1]][1]\r\n\r\nThe query profile is:\r\n\r\n[![Query Profile][2]][2]\r\n\r\nThe query is taking between 4-5 seconds to return the data and the number of nodes being returned is about 150.\r\n\r\nIs there anyway to improve this query like by using any apoc procedure? I can&#39;t think of any other way as according to me this is a simple query in itself. Also, indices are already created on the nodeID of each node type.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jnxtf.png\r\n  [2]: https://i.stack.imgur.com/XUgH7.png",
      "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query",
      "title": "How to Optimize this Neo4j Query"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697564752,
          "last_edit_date": 1697564752,
          "creation_date": 1697564318,
          "answer_id": 77311131,
          "question_id": 77311116,
          "share_link": "https://stackoverflow.com/a/77311131",
          "body_markdown": "Aggregation functions like `COUNT` can only be used in `WITH` and `RETURN` clauses.\r\n\r\nBut starting with neo4j 5.0 you can use the new [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/count/#:~:text=COUNT%20subquery%20with%20a%20UNION,not%20require%20the%20RETURN%20clause.). For example:\r\n\r\n    MATCH (childD:ChildD {id:123})\r\n    RETURN COUNT { (:Vacancy)&lt;-[:POTENTIAL_PROFILE]-(childD) } AS potentialJobablesCount",
          "link": "https://stackoverflow.com/questions/77311116/return-count-from-cypher-pattern-comprehension/77311131#77311131",
          "title": "Return count() from Cypher pattern comprehension"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77311131,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697564752,
      "creation_date": 1697564138,
      "question_id": 77311116,
      "share_link": "https://stackoverflow.com/q/77311116",
      "body_markdown": "Is it possible to return `count()` from Cypher pattern comprehension ?\r\n\r\nThe following query doesn&#39;t work:\r\n\r\n    [ (:Vacancy)&lt;-[rpp:POTENTIAL_PROFILE]-(childD) | count(rpp) ] AS potentialJobablesCount\r\n\r\nwith the following error:\r\n\r\n    Aggregation column contains implicit grouping expressions. For example, in &#39;RETURN n.a, n.a + n.b + count(*)&#39; the aggregation expression &#39;n.a + n.b + count(*)&#39; includes the implicit grouping key &#39;n.b&#39;. It may be possible to rewrite the query by extracting these grouping/aggregation expressions into a preceding WITH clause. Illegal expression(s): rpp\r\n",
      "link": "https://stackoverflow.com/questions/77311116/return-count-from-cypher-pattern-comprehension",
      "title": "Return count() from Cypher pattern comprehension"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 95,
                "user_id": 9240633,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/t0RDd.png?s=256&g=1",
                "display_name": "Duda Validator",
                "link": "https://stackoverflow.com/users/9240633/duda-validator"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697613688,
              "post_id": 77310912,
              "comment_id": 136300291,
              "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c/77310912#comment136300291_77310912"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 95,
                "user_id": 9240633,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/t0RDd.png?s=256&g=1",
                "display_name": "Duda Validator",
                "link": "https://stackoverflow.com/users/9240633/duda-validator"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697649196,
              "post_id": 77310912,
              "comment_id": 136307639,
              "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c/77310912#comment136307639_77310912"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697564057,
          "last_edit_date": 1697564057,
          "creation_date": 1697562129,
          "answer_id": 77310912,
          "question_id": 77309885,
          "share_link": "https://stackoverflow.com/a/77310912",
          "body_markdown": "You need to carefully read the [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/) clause documentation, as it is easy to use incorrectly and get unexpected results. For example, individual nodes and relationships should always be `MERGE`d separately.\r\n\r\nAlso, since your query `MATCH`es `Id` nodes at the outset, all `Id` nodes mentioned in the CSV file must already exist, or else some `line`s will do nothing. It is not clear if that is intentional.\r\n\r\nHere is a query that should work as expected (and create `Id` nodes as necessary). Note that I changed the node labels to mixed case to match the standard neo4j naming convention. Also, there is no need for a temporary node.\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;path&#39; AS line\r\n    MERGE (id:Id {id: line.ID})\r\n    WITH line, id\r\n    UNWIND SPLIT(line.Class, &quot; &quot;) AS cId\r\n    MERGE (class:Class {id: cId})\r\n    MERGE (id)-[r:HAS]-&gt;(class)\r\n    RETURN r",
          "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c/77310912#77310912",
          "title": "How to make nodes and form n to m relationship in neo4j when given &#39;m&#39; data is constructed in one csv column?"
        }
      ],
      "owner": {
        "reputation": 95,
        "user_id": 9240633,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/t0RDd.png?s=256&g=1",
        "display_name": "Duda Validator",
        "link": "https://stackoverflow.com/users/9240633/duda-validator"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77310912,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697564057,
      "creation_date": 1697552779,
      "last_edit_date": 1697562323,
      "question_id": 77309885,
      "share_link": "https://stackoverflow.com/q/77309885",
      "body_markdown": "I want to design a database in neo4j where I want to make nodes and relationships between other nodes. To explain it neatly please consider following scenario:\r\n\r\nFrom given csv file one column represents unique IDs and another column represents classes, where in some class column there is only one class whereas in many column there are many classes. \r\n\r\ni.e.\r\n\r\n    ---------------------\r\n    |  ID   |  Class    |\r\n    ---------------------\r\n    |  ID1  |  Class-A  |\r\n    ---------------------\r\n    |  ID2  |  Class-A  |\r\n    |       |  Class-B  |\r\n    |       |  Class-C  |\r\n    ---------------------\r\n\r\nFrom the above example data, the query must generate `(ID1)` node and `(Class-A)` node with HAS relationship. Same with `ID2`. `(ID2)--[HAS]--&gt;(Class-A)` , `(ID2)--[HAS]--&gt;(Class-B)` and so on. \r\n\r\n\r\n\r\n\r\nI was able to write following query.\r\n\r\n```\r\nload csv with headers from &#39;path&#39; as line\r\nmatch(id:ID{id:line.ID}), (temp:TEMP{id:line.Class})\r\n    with temp, split(temp.id, &quot; &quot;) as ids\r\n    unwind range(0,size(ids)-1) as i\r\nmerge(id)-[n:HAS]-&gt;(class:CLASS{id:ids[i]})\r\ndelete temp\r\nreturn n\r\n```\r\n\r\nI am able to create individual nodes from Class column, but it creates relationships with empty nodes and not with associated IDs.\r\n\r\nAny lead would be great help. \r\n\r\nI am new to database design.\r\nThanks",
      "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c",
      "title": "How to make nodes and form n to m relationship in neo4j when given &#39;m&#39; data is constructed in one csv column?"
    },
    {
      "tags": ["neo4j", "version", "compatibility"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "last_editor": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697473989,
          "last_edit_date": 1697473989,
          "creation_date": 1697465554,
          "answer_id": 77302699,
          "question_id": 77301601,
          "share_link": "https://stackoverflow.com/a/77302699",
          "body_markdown": "[`exists` has changed since Neo4j 5.0][1] to only check for graph pattern existence, not property.\r\n\r\nneovis.js must use this variant instead:\r\n\r\n```cypher\r\nMATCH (n) WHERE n.pagerank IS NOT NULL\r\n```\r\n\r\nNote: you can read the [documentation of `exists` for Neo4j 4.4][2], which indeed worked with properties as well.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/5/functions/predicate/#functions-exists\r\n  [2]: https://neo4j.com/docs/cypher-manual/4.4/functions/predicate/#functions-exists",
          "link": "https://stackoverflow.com/questions/77301601/is-neovis-js-version-2-1-0-incompatible-with-neo4j-version-5-12-0/77302699#77302699",
          "title": "Is neovis.js version 2.1.0 incompatible with neo4j version 5.12.0?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697476205,
          "creation_date": 1697476205,
          "answer_id": 77303790,
          "question_id": 77301601,
          "share_link": "https://stackoverflow.com/a/77303790",
          "body_markdown": "Neovis.js source code [contains this snippet](https://github.com/neo4j-contrib/neovis.js/blob/7815563f5c118040e0d21c0f7bfd7dfbcfa5938f/src/defaults.ts#L3) in `defaults.ts`:\r\n\r\n\tneo4j: {\r\n\t\tinitialQuery: `MATCH (n) WHERE exists(n.pagerank)\r\n                        WITH (n), RAND() AS random\r\n                        ORDER BY random LIMIT 3000\r\n                        OPTIONAL MATCH (n)-[r]-(m)\r\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\r\n                        RETURN n, r, m;`,\r\n        ...\r\n\r\nThat seems to be the cause of your error. You should probably create [an issue](https://github.com/neo4j-contrib/neovis.js/issues) for this.\r\n",
          "link": "https://stackoverflow.com/questions/77301601/is-neovis-js-version-2-1-0-incompatible-with-neo4j-version-5-12-0/77303790#77303790",
          "title": "Is neovis.js version 2.1.0 incompatible with neo4j version 5.12.0?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 11,
            "user_id": 2182284,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/c46d9a065d2878bf51d29b90172a72f5?s=256&d=identicon&r=PG",
            "display_name": "user2182284",
            "link": "https://stackoverflow.com/users/2182284/user2182284"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697503273,
          "creation_date": 1697503273,
          "answer_id": 77305617,
          "question_id": 77301601,
          "share_link": "https://stackoverflow.com/a/77305617",
          "body_markdown": "Thank you for your assistance.\r\n\r\nNeovis.js is compatible with Neo4j 5.12.0, with the exception of some deprecated syntax, such as `exists` mentioned above.\r\n\r\nMy error stemmed from the incorrect code `const vis = new NeoVis(config)`. It should have been `const vis = new NeoVis(config.value)`. I am using Vue3.js. Without the `.value`, Neovis.js cannot initialize the configuration and defaults to a Cypher clause containing `exists`. The error was resolved when I added `.value`, and my initial Cypher clause without `exists` will be executed.",
          "link": "https://stackoverflow.com/questions/77301601/is-neovis-js-version-2-1-0-incompatible-with-neo4j-version-5-12-0/77305617#77305617",
          "title": "Is neovis.js version 2.1.0 incompatible with neo4j version 5.12.0?"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 2182284,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c46d9a065d2878bf51d29b90172a72f5?s=256&d=identicon&r=PG",
        "display_name": "user2182284",
        "link": "https://stackoverflow.com/users/2182284/user2182284"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 120,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1697503273,
      "creation_date": 1697455742,
      "question_id": 77301601,
      "share_link": "https://stackoverflow.com/q/77301601",
      "body_markdown": "I am using neovis.js version 2.1.0 with neo4j version 5.12.0. When I tried accessing according to the examples, the neo4j server returned the following error:\r\n\r\n```\r\nNeo4jError: The property existence syntax `... exists(variable.property)` is no longer supported. Please use `variable.property IS NOT NULL` instead. (line 1, column 17 (offset: 16))\r\n&quot;MATCH (n) WHERE exists(n.pagerank)&quot;\r\n\r\n```\r\n\r\nIs there a known incompatibility between these versions?\r\n\r\nMy vue3.js code is as follows:\r\n\r\n```\r\n&lt;template&gt;\r\n  &lt;h3&gt;graph demo&lt;/h3&gt;\r\n  &lt;div id=&quot;graph&quot;&gt;&lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script setup&gt;\r\nimport NeoVis from &quot;neovis.js&quot;;\r\nimport { onMounted } from &quot;vue&quot;;\r\n\r\nconst config = ref({\r\n  containerId: &quot;graph&quot;,\r\n  neo4j: {\r\n    serverUrl: &quot;bolt://localhost:7687&quot;,\r\n    serverUser: &quot;neo4j&quot;,\r\n    serverPassword: &quot;neo4j_password&quot;,\r\n  },\r\n  labels: {},\r\n  relationships: {},\r\n  initialCypher: &quot;MATCH (n) return n&quot;,\r\n});\r\n\r\nnMounted(() =&gt; {\r\n  const vis = new NeoVis(config);\r\n  vis.render();\r\n});\r\n&lt;/script&gt;\r\n\r\n&lt;style scoped&gt;&lt;/style&gt;\r\n```",
      "link": "https://stackoverflow.com/questions/77301601/is-neovis-js-version-2-1-0-incompatible-with-neo4j-version-5-12-0",
      "title": "Is neovis.js version 2.1.0 incompatible with neo4j version 5.12.0?"
    },
    {
      "tags": ["security", "neo4j", "quarkus"],
      "comments": [
        {
          "owner": {
            "reputation": 743,
            "user_id": 1133928,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0fd2feecf2570851c3cadd0bf9b814b9?s=256&d=identicon&r=PG",
            "display_name": "Sergey Beryozkin",
            "link": "https://stackoverflow.com/users/1133928/sergey-beryozkin"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697476557,
          "post_id": 77300926,
          "comment_id": 136281918,
          "link": "https://stackoverflow.com/questions/77300926/what-is-the-best-way-to-create-user-config-at-first-user-login#comment136281918_77300926"
        },
        {
          "owner": {
            "reputation": 743,
            "user_id": 1133928,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0fd2feecf2570851c3cadd0bf9b814b9?s=256&d=identicon&r=PG",
            "display_name": "Sergey Beryozkin",
            "link": "https://stackoverflow.com/users/1133928/sergey-beryozkin"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697476958,
          "post_id": 77300926,
          "comment_id": 136281975,
          "link": "https://stackoverflow.com/questions/77300926/what-is-the-best-way-to-create-user-config-at-first-user-login#comment136281975_77300926"
        },
        {
          "owner": {
            "reputation": 22160,
            "user_id": 15619,
            "user_type": "registered",
            "accept_rate": 91,
            "profile_image": "https://www.gravatar.com/avatar/2f169a510b7cba5a57e86d520b268447?s=256&d=identicon&r=PG",
            "display_name": "Riduidel",
            "link": "https://stackoverflow.com/users/15619/riduidel"
          },
          "reply_to_user": {
            "reputation": 743,
            "user_id": 1133928,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0fd2feecf2570851c3cadd0bf9b814b9?s=256&d=identicon&r=PG",
            "display_name": "Sergey Beryozkin",
            "link": "https://stackoverflow.com/users/1133928/sergey-beryozkin"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697614925,
          "post_id": 77300926,
          "comment_id": 136300506,
          "link": "https://stackoverflow.com/questions/77300926/what-is-the-best-way-to-create-user-config-at-first-user-login#comment136300506_77300926"
        },
        {
          "owner": {
            "reputation": 743,
            "user_id": 1133928,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0fd2feecf2570851c3cadd0bf9b814b9?s=256&d=identicon&r=PG",
            "display_name": "Sergey Beryozkin",
            "link": "https://stackoverflow.com/users/1133928/sergey-beryozkin"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697714967,
          "post_id": 77300926,
          "comment_id": 136316070,
          "link": "https://stackoverflow.com/questions/77300926/what-is-the-best-way-to-create-user-config-at-first-user-login#comment136316070_77300926"
        }
      ],
      "owner": {
        "reputation": 22160,
        "user_id": 15619,
        "user_type": "registered",
        "accept_rate": 91,
        "profile_image": "https://www.gravatar.com/avatar/2f169a510b7cba5a57e86d520b268447?s=256&d=identicon&r=PG",
        "display_name": "Riduidel",
        "link": "https://stackoverflow.com/users/15619/riduidel"
      },
      "last_editor": {
        "reputation": 3719,
        "user_id": 175554,
        "user_type": "registered",
        "accept_rate": 40,
        "profile_image": "https://i.stack.imgur.com/SxFCX.jpg?s=256&g=1",
        "display_name": "ozkanpakdil",
        "link": "https://stackoverflow.com/users/175554/ozkanpakdil"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1697742857,
      "creation_date": 1697449506,
      "last_edit_date": 1697742857,
      "question_id": 77300926,
      "share_link": "https://stackoverflow.com/q/77300926",
      "body_markdown": "In my quarkus application, I want to have some data inserted in my database for each user.\r\n\r\nDatabase uses neo4j. As a consequence, I would like to have some code in my application which creates the various datas and send them in database.\r\n\r\nCurrently, I use the `RolesAugmentor`, as described in [Security Tips and Tricks][1]. Unfortunatly, as it is invoked for each request, we have multiple nodes generated for each new user.\r\nHow can I have data inserted only once for each user ?\r\n\r\n**EDIT 1** More clearly, I have a RolesAugmentor class containing the following code\r\n\r\n```java\r\n@ApplicationScoped\r\npublic class RolesAugmentor implements SecurityIdentityAugmentor {\r\n\r\n    @Override\r\n    public Uni&lt;SecurityIdentity&gt; augment(SecurityIdentity identity, AuthenticationRequestContext context) {\r\n        return Uni.createFrom().item(build(identity));\r\n        // Do &#39;return context.runBlocking(build(identity));&#39;\r\n        // if a blocking call is required to customize the identity\r\n    }\r\n    private Supplier&lt;SecurityIdentity&gt; build(SecurityIdentity identity) {\r\n        if (identity.isAnonymous()) {\r\n        \treturn () -&gt; identity;\r\n        } else {\r\n\t        // create a new builder and copy principal, attributes, credentials and roles\r\n\t        // from the original identity\r\n\t        QuarkusSecurityIdentity.Builder builder = QuarkusSecurityIdentity.builder(identity);\r\n\t\r\n\t        JWTCallerPrincipal caller = (JWTCallerPrincipal) identity.getPrincipal();\r\n\t        String email = caller.getClaim(&quot;email&quot;);\r\n\t        if (!isUserAlreadyInDB(email)) {\r\n\t\t        synchronized(RolesAugmentor.class) {\r\n\t\t\t        if (!isUserAlreadyInDB(email)) {\r\n\t\t\t            String name = caller.getClaim(&quot;given_name&quot;);\r\n\t\t\t            String famillyName = caller.getClaim(&quot;family_name&quot;);\r\n\t\t\t            addUserToDB(email, name, famillyName);\r\n\t\t\t        }\r\n\t\t        }\r\n\t        }\r\n\t\r\n\t        // add custom role source here\r\n\t        builder.addRoles(extractUserRoles(email));\r\n\t\r\n\t        return builder::build;\r\n        }\r\n    }\r\n\r\n```\r\n\r\nAnd I&#39;m 99% sure it&#39;s not the good place to add user creation code. Am I right? What is the correct way?\r\n\r\n  [1]: https://quarkus.io/guides/security-customization#security-identity-customization",
      "link": "https://stackoverflow.com/questions/77300926/what-is-the-best-way-to-create-user-config-at-first-user-login",
      "title": "What is the best way to create user config at first user login?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 629,
            "user_id": 10806063,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
            "display_name": "Nils",
            "link": "https://stackoverflow.com/users/10806063/nils"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697449750,
          "post_id": 77300899,
          "comment_id": 136276928,
          "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret#comment136276928_77300899"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 629,
                "user_id": 10806063,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
                "display_name": "Nils",
                "link": "https://stackoverflow.com/users/10806063/nils"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697530753,
              "post_id": 77303078,
              "comment_id": 136288057,
              "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret/77303078#comment136288057_77303078"
            },
            {
              "owner": {
                "reputation": 9094,
                "user_id": 12368154,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Charchit Kapoor",
                "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
              },
              "reply_to_user": {
                "reputation": 629,
                "user_id": 10806063,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
                "display_name": "Nils",
                "link": "https://stackoverflow.com/users/10806063/nils"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697618308,
              "post_id": 77303078,
              "comment_id": 136301131,
              "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret/77303078#comment136301131_77303078"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "last_editor": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697534835,
          "last_edit_date": 1697534835,
          "creation_date": 1697468703,
          "answer_id": 77303078,
          "question_id": 77300899,
          "share_link": "https://stackoverflow.com/a/77303078",
          "body_markdown": "You can try making the last `MATCH` optional, and then use `WITH` to filter the rows.\r\nLike this:\r\n\r\n    MATCH (n {id: &quot;exists&quot;})\r\n    CALL {\r\n        WITH n\r\n        OPTIONAL MATCH (n)--(m {id: &quot;mightExist&quot;})\r\n        CALL {\r\n            WITH m\r\n            OPTIONAL MATCH (m)--(o {id: &quot;does-not-exist&quot;})\r\n            WITH \r\n            CASE WHEN m IS NULL THEN NULL\r\n            WHEN m IS NOT NULL AND o IS NULL THEN m\r\n            ELSE o END AS inner\r\n            RETURN inner\r\n        }\r\n        RETURN inner\r\n    }\r\n    RETURN inner",
          "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret/77303078#77303078",
          "title": "How do I prevent a subquery from executing when an `OPTIONAL MATCH` does not return any rows"
        }
      ],
      "owner": {
        "reputation": 629,
        "user_id": 10806063,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
        "display_name": "Nils",
        "link": "https://stackoverflow.com/users/10806063/nils"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 60,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697534835,
      "creation_date": 1697449260,
      "question_id": 77300899,
      "share_link": "https://stackoverflow.com/q/77300899",
      "body_markdown": "Using this query:\r\n```cypher\r\nOPTIONAL MATCH (n {id: &quot;does-not-exist&quot;})\r\nCALL {\r\n    RETURN &quot;test&quot; as inner\r\n}\r\nRETURN inner\r\n```\r\nI would expect the subquery not to be executed and the outer `RETURN` to return no results. Instead, the subquery is executed once and the return value is `&quot;test&quot;`. I suppose it being `OPTIONAL` causes the whole query to continue with one empty row.  \r\nMy actual query looks more like this:\r\n```cypher\r\nMATCH (n {id: &quot;exists&quot;})\r\nCALL {\r\n    WITH n\r\n    OPTIONAL MATCH (n)--(m {id: &quot;mightExist&quot;})\r\n    CALL {\r\n        WITH m\r\n        MATCH (m)--(o {id: &quot;does-not-exist&quot;})\r\n        RETURN &quot;test&quot; as inner\r\n    }\r\n    RETURN inner\r\n}\r\nRETURN inner\r\n```  \r\nThis causes the query to return nothing as the deepest subquery does not `MATCH` anything. The deepest subquery is still called once because the behavior of `OPTIONAL MATCH`. I can&#39;t change the `OPTIONAL MATCH` to be `MATCH` because then the whole query would not return anything when that relation does not exist, even though it should.\r\n\r\n\r\n**Essentially, I&#39;m trying to return a nested relation of a node which may or may not exist as a relation to the root node. How can I do that?**\r\n\r\n\r\n*Note: I&#39;m trying to stay away from APOC as much as I can to reduce vendor lock-in, but if I absolutely must use something like `apoc.when`, I could.*",
      "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret",
      "title": "How do I prevent a subquery from executing when an `OPTIONAL MATCH` does not return any rows"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1697223556,
          "creation_date": 1697223556,
          "answer_id": 77290102,
          "question_id": 77289431,
          "share_link": "https://stackoverflow.com/a/77290102",
          "body_markdown": "GDS currently does not support `elementId()` values, so you will have to use `id()`.",
          "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77290102#77290102",
          "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1697250528,
          "creation_date": 1697250528,
          "answer_id": 77291412,
          "question_id": 77289431,
          "share_link": "https://stackoverflow.com/a/77291412",
          "body_markdown": "elementID is a string, but you can get the id as illustrated here:\r\n\r\n    match (n) return  toInteger(split(elementId(n),&#39;:&#39;)[2]) \r\n\r\n",
          "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77291412#77291412",
          "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 510,
                "user_id": 888367,
                "user_type": "registered",
                "accept_rate": 33,
                "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
                "display_name": "Andr&#233;s Meza-Escall&#243;n",
                "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698192851,
              "post_id": 77298404,
              "comment_id": 136373414,
              "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77298404#comment136373414_77298404"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 51,
            "user_id": 22051375,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "florentin",
            "link": "https://stackoverflow.com/users/22051375/florentin"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697402128,
          "creation_date": 1697402128,
          "answer_id": 77298404,
          "question_id": 77289431,
          "share_link": "https://stackoverflow.com/a/77298404",
          "body_markdown": "You can also pass the whole node to the procedure. lets GDS handle the rest on how to identify the node.",
          "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77298404#77298404",
          "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
        }
      ],
      "owner": {
        "reputation": 510,
        "user_id": 888367,
        "user_type": "registered",
        "accept_rate": 33,
        "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
        "display_name": "Andr&#233;s Meza-Escall&#243;n",
        "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 49,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77298404,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1697402128,
      "creation_date": 1697215438,
      "last_edit_date": 1697223571,
      "question_id": 77289431,
      "share_link": "https://stackoverflow.com/q/77289431",
      "body_markdown": "I have a graph projected from nodes and relationships &quot;(n1:Place)-[r:COST]-&gt;(n2:Place)&quot;.\r\nTo find the cheapest path between two nodes with names &#39;a&#39; and &#39;z&#39; I use [Dijkstra&#39;s shortest path algorithm][1]:\r\n\r\n    MATCH (start:Place) where &#39;a&#39; = start.name\r\n    MATCH (end:Place) where &#39;z&#39; = end.name\r\n    CALL gds.shortestPath.dijkstra.stream(&#39;my-graph&#39;,{\r\n        sourceNode: id(start),\r\n        targetNode: id(end),\r\n        relationshipWeightProperty: &#39;cost&#39;\r\n    })\r\n    YIELD nodeIds\r\n\r\nIt works perfectly, but I read that [id(node):int is deprecated][2] and in Neo4j 1.5.8 I should use the new [elementId(node):string][3] function instead. \r\n\r\n\r\n    MATCH (start:Place) where &#39;a&#39; = start.name\r\n    MATCH (end:Place) where &#39;z&#39; = end.name\r\n    CALL gds.shortestPath.dijkstra.stream(&#39;my-graph&#39;,{\r\n        sourceNode: elementId(start),\r\n        targetNode: elementId(end),\r\n        relationshipWeightProperty: &#39;cost&#39;\r\n    })\r\n    YIELD nodeIds\r\n\r\nHowever, since elementId() returns a string instead of an int, it causes an exception:\r\n\r\n    Failed to invoke procedure `gds.shortestPath.dijkstra.stream`: Caused by: java.lang.IllegalArgumentException: Expected a node or a node id for `sourceNode`. Got String. \r\n\r\n \r\n\r\nIs there another option that supports pathfinding using elementId() instead of id()? \r\n\r\n\r\n  [1]: https://neo4j.com/docs/graph-data-science/current/algorithms/dijkstra-source-target/\r\n  [2]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-id\r\n  [3]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-elementid",
      "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod",
      "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
    },
    {
      "tags": ["amazon-ec2", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1697165337,
          "post_id": 77284758,
          "comment_id": 136248483,
          "link": "https://stackoverflow.com/questions/77284758/neo4j-export-from-aura-to-aws-ec2-community-instance-corrupts-database#comment136248483_77284758"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 187,
            "user_id": 3234217,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
            "display_name": "Makarov",
            "link": "https://stackoverflow.com/users/3234217/makarov"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697256887,
          "creation_date": 1697256887,
          "answer_id": 77291596,
          "question_id": 77284758,
          "share_link": "https://stackoverflow.com/a/77291596",
          "body_markdown": "The issue was that I was running the `neo4j-admin database load` command as `root`\r\n**Solution:** \r\n\r\n    su neo4j             // this is the default user the ec2 neo4j template created for me\r\n    cd $HOME\r\n    wget &quot;url to backup&quot; // download of put .dump file here\r\n    pwd                  // To then add it the path of the neo4j load command\r\n    neo4j-admin database load --from-path=/var/lib/neo4j neo4j --overwrite-destination=true",
          "link": "https://stackoverflow.com/questions/77284758/neo4j-export-from-aura-to-aws-ec2-community-instance-corrupts-database/77291596#77291596",
          "title": "Neo4j export from Aura to AWS EC2 community instance corrupts database"
        }
      ],
      "owner": {
        "reputation": 187,
        "user_id": 3234217,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
        "display_name": "Makarov",
        "link": "https://stackoverflow.com/users/3234217/makarov"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697256887,
      "creation_date": 1697164325,
      "question_id": 77284758,
      "share_link": "https://stackoverflow.com/q/77284758",
      "body_markdown": "I&#39;m moving a database from Neo4j AURA to a Neo4j community edition instance hosted in AWS EC2.\r\n\r\n**The problem:**\r\nI export one of the AURA snapshots, it downloads a `neo4j.dump` file. When using the next command on the EC2 instance to **import / load** the file `neo4j-admin database load --from-path=/root neo4j --overwrite-destination=true` the process is okay but after that, I can&#39;t connect to the database using the browser or any driver anymore, the browser connects via `bolt` but it gives me an error that *neo4j database is no available use command* `:sysinfo` *for more information*\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAlso when running `neo4j-admin database check neo4j`\r\n\r\nGet:\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n**Notes:**\r\n- I have repeated the process by creating new EC2 Neo4j instances and the result is the same, I also tried in the Enterprise edition with no luck\r\n- If anyone is wondering why I&#39;m moving from AURA, the reason is the latency/connection time, our server is in Heroku, and with aura, every query takes up to &gt;300ms even just doing a simple MATCH, in the EC2 instance takes &lt;10ms.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CTUYJ.png\r\n  [2]: https://i.stack.imgur.com/Gvszp.png\r\n  [3]: https://i.stack.imgur.com/lyOzr.png",
      "link": "https://stackoverflow.com/questions/77284758/neo4j-export-from-aura-to-aws-ec2-community-instance-corrupts-database",
      "title": "Neo4j export from Aura to AWS EC2 community instance corrupts database"
    },
    {
      "tags": ["neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697135060,
          "post_id": 77273741,
          "comment_id": 136245113,
          "link": "https://stackoverflow.com/questions/77273741/neo4j-issues-with-gds-enterprise-license-file#comment136245113_77273741"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 11,
                "user_id": 17265089,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/E1qDn.jpg?s=256&g=1",
                "display_name": "William Hardison",
                "link": "https://stackoverflow.com/users/17265089/william-hardison"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697034246,
              "post_id": 77273909,
              "comment_id": 136229001,
              "link": "https://stackoverflow.com/questions/77273741/neo4j-issues-with-gds-enterprise-license-file/77273909#comment136229001_77273909"
            },
            {
              "owner": {
                "reputation": 51,
                "user_id": 22051375,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "florentin",
                "link": "https://stackoverflow.com/users/22051375/florentin"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 17265089,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/E1qDn.jpg?s=256&g=1",
                "display_name": "William Hardison",
                "link": "https://stackoverflow.com/users/17265089/william-hardison"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697126591,
              "post_id": 77273909,
              "comment_id": 136243600,
              "link": "https://stackoverflow.com/questions/77273741/neo4j-issues-with-gds-enterprise-license-file/77273909#comment136243600_77273909"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 51,
            "user_id": 22051375,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "florentin",
            "link": "https://stackoverflow.com/users/22051375/florentin"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697033855,
          "creation_date": 1697033855,
          "answer_id": 77273909,
          "question_id": 77273741,
          "share_link": "https://stackoverflow.com/a/77273909",
          "body_markdown": "Do you have the GDS plugin installed? \r\nWithout the jar in the plugins folder Neo4j would throw this exception",
          "link": "https://stackoverflow.com/questions/77273741/neo4j-issues-with-gds-enterprise-license-file/77273909#77273909",
          "title": "NEO4J issues with gds.enterprise.license.file"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 17265089,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/E1qDn.jpg?s=256&g=1",
        "display_name": "William Hardison",
        "link": "https://stackoverflow.com/users/17265089/william-hardison"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 86,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697044692,
      "creation_date": 1697032599,
      "last_edit_date": 1697044692,
      "question_id": 77273741,
      "share_link": "https://stackoverflow.com/q/77273741",
      "body_markdown": "I&#39;m trying to start my neo4j server but I ran into this issue below; yes my gds license is good and  I made sure to &quot;chown&quot; the file so neo4j is the owner.\r\n\r\n    neo4j.service - Neo4j Graph Database\r\n         Loaded: loaded (/usr/lib/systemd/system/neo4j.service; disabled; preset: disabled)\r\n         Active: failed (Result: exit-code) since Wed 2023-10-11 13:41:14 UTC; 6s ago\r\n       Duration: 1.666s\r\n        Process: 29539 ExecStart=/usr/share/neo4j/bin/neo4j console (code=exited, status=1/FAILURE)\r\n       Main PID: 29539 (code=exited, status=1/FAILURE)\r\n            CPU: 3.944s\r\n    \r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: Validating Neo4j configuration: /etc/neo4j/neo4j.conf\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: 1 issue found.\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: Error: Unrecognized setting. No declared setting with name: gds.enterprise.license_file. Cleanup the conf&gt;\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: Skipping Log4j validation due to previous issues.\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: Configuration file validation failed.\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: Configuration contains errors. This validation can be performed again using &#39;neo4j-admin server validate-&gt;\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal neo4j[29539]: Run with &#39;--verbose&#39; for a more detailed error message.\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal systemd[1]: neo4j.service: Main process exited, code=exited, status=1/FAILURE\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal systemd[1]: neo4j.service: Failed with result &#39;exit-code&#39;.\r\n    Oct 11 13:41:14 ip-172-31-2-140.us-gov-east-1.compute.internal systemd[1]: neo4j.service: Consumed 3.944s CPU time.\r\n\r\nI double checked my file in the neo4j.conf and it looks good to me:\r\n\r\n![enter image description here](https://i.stack.imgur.com/ELppM.png)\r\n",
      "link": "https://stackoverflow.com/questions/77273741/neo4j-issues-with-gds-enterprise-license-file",
      "title": "NEO4J issues with gds.enterprise.license.file"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697047480,
          "post_id": 77272847,
          "comment_id": 136231569,
          "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label#comment136231569_77272847"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697216358,
              "post_id": 77275116,
              "comment_id": 136256721,
              "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#comment136256721_77275116"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697222057,
              "post_id": 77275116,
              "comment_id": 136257677,
              "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#comment136257677_77275116"
            },
            {
              "owner": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697287692,
              "post_id": 77275116,
              "comment_id": 136262521,
              "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#comment136262521_77275116"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697221392,
          "last_edit_date": 1697221392,
          "creation_date": 1697044524,
          "answer_id": 77275116,
          "question_id": 77272847,
          "share_link": "https://stackoverflow.com/a/77275116",
          "body_markdown": "If you already have the data in your DB, you can use a query like the following. It also removes the redundant `infId` property after creating the relationships.\r\n\r\n    MATCH (s1:Style)\r\n    WITH s1, SPLIT(s1.infId, &#39;;&#39;) AS infs\r\n    MATCH (s2:Style)\r\n    WHERE s2.styId IN infs\r\n    CREATE (s1)-[:INFLUENCED_BY]-&gt;(s2)\r\n    REMOVE s1.infId // Remove redundant infId property\r\n\r\nBeforehand, you should create an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) on the `styId` property of `Style`, to speed up the query:\r\n\r\n    CREATE INDEX Style_styId FOR (s:Style) ON (s.styId)\r\n\r\n#### Alternate suggestion\r\n\r\nBut, even better, you should have created the data model you wanted when ingesting the data into your DB, instead of fixing up the DB afterwards.\r\n\r\nThere are multiple [ways to import CSV](https://neo4j.com/docs/getting-started/data-import/csv-import/) into neo4j. The simplest is via [LOAD CSV](https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/), so here is an example. Assuming your CSV file has a header row:\r\n\r\n    CALL {\r\n      LOAD CSV WITH HEADERS FROM &#39;file:///styles.csv&#39; AS r\r\n      CREATE (s:Style {id: r.styId, name: r.Style, dates: r.Dates, influences: SPLIT(r.Influences, &#39;;&#39;)})\r\n      MERGE (loc:Location {name: r.Location})\r\n      CREATE (s)-[:LOCATION]-&gt;(l)\r\n    }\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///styles.csv&#39; AS row\r\n    MATCH (s1:Style)\r\n    WHERE s1.id = row.styId\r\n    WITH s1, SPLIT(s1.infId, &#39;;&#39;) AS infs\r\n    MATCH (s2:Style)\r\n    WHERE s2.id IN infs\r\n    CREATE (s1)-[:INFLUENCED_BY]-&gt;(s2)\r\n\r\nYou may also want to create an index on `Location.name` if you have more than a few locations.\r\n\r\nNote that this creates a slightly different data model than yours, in that:\r\n - each `Style` node points to a unique `Location` node\r\n - the `influences` property (which you may want to omit) is a list of strings\r\n - the `styId` is stored as the `id` property (since it is obvious that the id is for a style). This requires that your id index is created like this:\r\n\r\n       CREATE INDEX Style_id FOR (s:Style) ON (s.id)\r\n\r\nThe ingestion is done with 2 imports from the CSV file; the first is for creating all the `Style` nodes, and the second is for creating all the `INFLUENCED_BY` relationships. The [CALL subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/call-subquery/) is used to cleanly separate the 2 `LOAD CSV` invocations (otherwise, you would need to perform an aggregation between them just to reduce the number of rows back down to 1).\r\n\r\nThe above solution assumes you do not have a lot of styles, and so it does everything in a single transaction. If you have a lot of styles, you will have to change (and perhaps split up) the query to avoid running out of memory and/or taking too long.",
          "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#77275116",
          "title": "Creating relationships between nodes of the same label?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1697162046,
          "creation_date": 1697162046,
          "answer_id": 77284656,
          "question_id": 77272847,
          "share_link": "https://stackoverflow.com/a/77284656",
          "body_markdown": "Remember, your relationships can have properties and they too can be indexed. A major advantage of graphs is the relationships, unlike a RBDS database, are not mere connections. They have knowledge. This can be used for provenance, filtered traversals, storing unique data that should not be in the connected nodes, etc. \r\n\r\nIf you want examples, look at how this was done with DNA segments that are used in matching persons in genealogy. With a well developed knowledge graph you create amazing vale ... such as re-creating your ancestor&#39;s DNA\r\n\r\n[https://www.wai.md/post/the-field-of-dreams-ancestor-avatars][1]\r\n\r\n\r\n  [1]: https://www.wai.md/post/the-field-of-dreams-ancestor-avatars",
          "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77284656#77284656",
          "title": "Creating relationships between nodes of the same label?"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 22671757,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
        "display_name": "anji",
        "link": "https://stackoverflow.com/users/22671757/anji"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77275116,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1697221392,
      "creation_date": 1697025443,
      "last_edit_date": 1697043054,
      "question_id": 77272847,
      "share_link": "https://stackoverflow.com/q/77272847",
      "body_markdown": "I have a database of architectural style periods, imported from a csv. Each `Style` has a `styId`, and an `infId` which shows the previous styles that have influenced it.\r\n\r\nI would like to create relationships between the styles if they are mentioned as an influence, like so:\r\n\r\n#### Anglo-saxon style influenced by Roman style\r\n\r\n![Anglo-saxon style influenced by Roman style](https://i.stack.imgur.com/f6WR5.png)\r\n\r\n#### styId and infId with matching values\r\n\r\n![styId and infId with matching values](https://i.stack.imgur.com/eUgyT.png)\r\n\r\nI know that this will be a case of matching the `styId` to the `infId` but I am not a data scientist and very new to NEO4j. I can do this by manually specifying relationships, but I&#39;m building this dataset myself and plan to add more entries later, so if there is a best practice to creating these relationships by going off of the `styId` and `infId` alone I&#39;d much prefer that option.\r\n\r\nThanks for any help, let me know if anything is unclear.",
      "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label",
      "title": "Creating relationships between nodes of the same label?"
    },
    {
      "tags": ["neo4j", "liquibase", "liquibase-maven-plugin", "neo4j-aura"],
      "comments": [
        {
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697025344,
          "post_id": 77272286,
          "comment_id": 136227010,
          "link": "https://stackoverflow.com/questions/77272286/why-am-i-getting-classcastexception-when-running-liquibase#comment136227010_77272286"
        },
        {
          "owner": {
            "reputation": 5,
            "user_id": 22331646,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtesEqX1eyr1hDYJLzMFiQ5RYz1R1gV_inXdFNK4pQXdv_pQ=k-s256",
            "display_name": "Sabi Franjo",
            "link": "https://stackoverflow.com/users/22331646/sabi-franjo"
          },
          "reply_to_user": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697441007,
          "post_id": 77272286,
          "comment_id": 136275431,
          "link": "https://stackoverflow.com/questions/77272286/why-am-i-getting-classcastexception-when-running-liquibase#comment136275431_77272286"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1697025300,
          "creation_date": 1697025300,
          "answer_id": 77272821,
          "question_id": 77272286,
          "share_link": "https://stackoverflow.com/a/77272821",
          "body_markdown": "You are using the wrong driver.\r\nIt should be `liquibase.ext.neo4j.database.jdbc.Neo4jDriver`.\r\nI should probably rework [the documentation section on this][1].\r\n\r\n\r\n  [1]: https://www.neo4j.com/labs/liquibase/docs/reference-configuration/",
          "link": "https://stackoverflow.com/questions/77272286/why-am-i-getting-classcastexception-when-running-liquibase/77272821#77272821",
          "title": "Why am I getting ClassCastException when running Liquibase?"
        }
      ],
      "owner": {
        "reputation": 5,
        "user_id": 22331646,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtesEqX1eyr1hDYJLzMFiQ5RYz1R1gV_inXdFNK4pQXdv_pQ=k-s256",
        "display_name": "Sabi Franjo",
        "link": "https://stackoverflow.com/users/22331646/sabi-franjo"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 79,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77272821,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697025300,
      "creation_date": 1697020894,
      "question_id": 77272286,
      "share_link": "https://stackoverflow.com/q/77272286",
      "body_markdown": "I&#39;m trying to configure Liquibase to work with our neo4j Aura instance. The first time I run it, it   works fine, but every subsequent time I am getting this error:\r\n\r\n\r\n```\r\n[ERROR] Failed to execute goal org.liquibase:liquibase-maven-plugin:4.24.0:update (default) on project liquibase: \r\n[ERROR] Error setting up or running Liquibase:\r\n[ERROR] java.lang.ClassCastException: class java.time.ZonedDateTime cannot be cast to class java.sql.Timestamp (java.time.ZonedDateTime is in module java.base of loader &#39;bootstrap&#39;; java.sql.Timestamp is in module java.sql of loader &#39;platform&#39;)\r\n\r\n```\r\n\r\nThe version of liquibase and the neo4j extension is 4.24.0, the plugin configuration in maven is like this:\r\n\r\n```\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n                &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${liquibase.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;changeLogFile&gt;liquibase/changelog.xml&lt;/changeLogFile&gt;\r\n                    &lt;url&gt;jdbc:neo4j:neo4j+s://MYAURAURL:7687&lt;/url&gt;\r\n                    &lt;driver&gt;org.neo4j.jdbc.boltrouting.BoltRoutingNeo4jDriver&lt;/driver&gt;\r\n                    &lt;username&gt;neo4j&lt;/username&gt;\r\n                    &lt;password&gt;MYAURAPASS&lt;/password&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;process-resources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;update&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nI&#39;m guessing it&#39;s trying to cast these that show up in the database:\r\ndateCreated: 2023-10-11T10:32:17.024000000Z\r\ndateUpdated: 2023-10-11T10:33:24.253000000Z\r\nBut that isn&#39;t anything that I&#39;ve defined explicitly. \r\n\r\nI&#39;ve tried running with previous versions of the liquibase plugin. It either gives the same message or doesn&#39;t run at all.",
      "link": "https://stackoverflow.com/questions/77272286/why-am-i-getting-classcastexception-when-running-liquibase",
      "title": "Why am I getting ClassCastException when running Liquibase?"
    },
    {
      "tags": ["python", "neo4j", "graph-databases", "py2neo"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 103,
                "user_id": 7864196,
                "user_type": "registered",
                "profile_image": "https://lh5.googleusercontent.com/-MRs4gF3pufo/AAAAAAAAAAI/AAAAAAAAAF8/d9LeeXorzuM/photo.jpg?sz=256",
                "display_name": "Tinashe Muchabaiwa",
                "link": "https://stackoverflow.com/users/7864196/tinashe-muchabaiwa"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697008304,
              "post_id": 77270610,
              "comment_id": 136223793,
              "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork/77270610#comment136223793_77270610"
            },
            {
              "owner": {
                "reputation": 1124,
                "user_id": 437958,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ee840954b7e0fa137fa44b1ab5fb1c3f?s=256&d=identicon&r=PG",
                "display_name": "akollegger",
                "link": "https://stackoverflow.com/users/437958/akollegger"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699016804,
              "post_id": 77270610,
              "comment_id": 136481082,
              "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork/77270610#comment136481082_77270610"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 186,
            "user_id": 1802600,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/f0Tx6.jpg?s=256&g=1",
            "display_name": "chintan-p-bhatt",
            "link": "https://stackoverflow.com/users/1802600/chintan-p-bhatt"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 5,
          "is_accepted": true,
          "score": 5,
          "last_activity_date": 1697005379,
          "creation_date": 1697005379,
          "answer_id": 77270610,
          "question_id": 77270468,
          "share_link": "https://stackoverflow.com/a/77270610",
          "body_markdown": "You can see updates here https://community.neo4j.com/t/farewell-py2neo-what-happens-now/64419\r\n\r\nCopied from Above link, \r\n\r\n - https://github.com/overhangio/py2neo,\r\n - https://github.com/SarLecobee/py2neo,    \r\n - https://github.com/neo4j-field/py2neo,\r\n\r\nAnd One can see here as well, https://www.reddit.com/r/Neo4j/comments/174jl66/py2neo_no_longer_available/",
          "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork/77270610#77270610",
          "title": "Looking for a Py2neo fork"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 103,
                "user_id": 7864196,
                "user_type": "registered",
                "profile_image": "https://lh5.googleusercontent.com/-MRs4gF3pufo/AAAAAAAAAAI/AAAAAAAAAF8/d9LeeXorzuM/photo.jpg?sz=256",
                "display_name": "Tinashe Muchabaiwa",
                "link": "https://stackoverflow.com/users/7864196/tinashe-muchabaiwa"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1697099474,
              "post_id": 77275372,
              "comment_id": 136237723,
              "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork/77275372#comment136237723_77275372"
            },
            {
              "owner": {
                "reputation": 331,
                "user_id": 22661098,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/888742f5f2ec4c7617d7232596e1f310?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Graph Dveler",
                "link": "https://stackoverflow.com/users/22661098/graph-dveler"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1697184752,
              "post_id": 77275372,
              "comment_id": 136250606,
              "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork/77275372#comment136250606_77275372"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 560,
            "user_id": 4888809,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/6IGf0.jpg?s=256&g=1",
            "display_name": "buda",
            "link": "https://stackoverflow.com/users/4888809/buda"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 3,
          "is_accepted": false,
          "score": 3,
          "last_activity_date": 1697047023,
          "creation_date": 1697047023,
          "answer_id": 77275372,
          "question_id": 77270468,
          "share_link": "https://stackoverflow.com/a/77275372",
          "body_markdown": "https://github.com/memgraph/gqlalchemy is also an Object Graph Mapper (equivalent to the `py2neo`) maintained by memgraph.com. It&#39;s compatible with py2neo, but maybe an option is to migrate because the project will be maintained.\r\n\r\nDISCLAIMER: I&#39;m the co-founder and CTO of Memgraph",
          "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork/77275372#77275372",
          "title": "Looking for a Py2neo fork"
        }
      ],
      "owner": {
        "reputation": 103,
        "user_id": 7864196,
        "user_type": "registered",
        "profile_image": "https://lh5.googleusercontent.com/-MRs4gF3pufo/AAAAAAAAAAI/AAAAAAAAAF8/d9LeeXorzuM/photo.jpg?sz=256",
        "display_name": "Tinashe Muchabaiwa",
        "link": "https://stackoverflow.com/users/7864196/tinashe-muchabaiwa"
      },
      "last_editor": {
        "reputation": 2015,
        "user_id": 19579546,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/zJG4N.png?s=256&g=1",
        "display_name": "Stefan - brox IT-Solutions",
        "link": "https://stackoverflow.com/users/19579546/stefan-brox-it-solutions"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 246,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77270610,
      "answer_count": 2,
      "score": 2,
      "last_activity_date": 1697094451,
      "creation_date": 1697003456,
      "last_edit_date": 1697094451,
      "question_id": 77270468,
      "share_link": "https://stackoverflow.com/q/77270468",
      "body_markdown": "Unfortunately due to some internal politics within neo4j, the py2neo project is now EOL and was deleted from pypi. See this [twitter thread](https://twitter.com/technige/status/1659452229659643906).\r\n\r\nIs there anyone who might have forked the GitHub repository? ",
      "link": "https://stackoverflow.com/questions/77270468/looking-for-a-py2neo-fork",
      "title": "Looking for a Py2neo fork"
    },
    {
      "tags": ["neo4j", "graphql", "gatsby", "neo4j-aura"],
      "comments": [
        {
          "owner": {
            "reputation": 5575,
            "user_id": 1589379,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/97b91b8f4370a522bd199e2921871898?s=256&d=identicon&r=PG",
            "display_name": "Tony Chiboucas",
            "link": "https://stackoverflow.com/users/1589379/tony-chiboucas"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1697114401,
          "post_id": 77267313,
          "comment_id": 136240660,
          "link": "https://stackoverflow.com/questions/77267313/how-to-connect-to-auradb-from-a-gatsby-based-pages#comment136240660_77267313"
        }
      ],
      "owner": {
        "reputation": 4610,
        "user_id": 424953,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/df2d607316cab93fe7ba5a47815bc1a0?s=256&d=identicon&r=PG",
        "display_name": "Aur&#233;lien B",
        "link": "https://stackoverflow.com/users/424953/aur%c3%a9lien-b"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696953445,
      "creation_date": 1696953445,
      "question_id": 77267313,
      "share_link": "https://stackoverflow.com/q/77267313",
      "body_markdown": "I&#39;m building a website with Gatsby. It will be fully static.\r\nI use a Neo4J base hosted (aka an AuraDB free instance) to store data needed for the website.\r\n\r\nI&#39;m trying to get things working together but I end up with a 403 when trying to get some data from the DB.\r\n\r\nBeginning of my gatsby-node.js\r\n\r\n    const neo4j = require(&#39;neo4j-driver&#39;);\r\n    const neo4jUri = &#39;neo4j+s://myurl.io&#39;;\r\n    const neo4jUser = &#39;myneo4juser&#39;;\r\n    const neo4jPassword = &#39;mypassword&#39;;\r\n    const driver = neo4j.driver(neo4jUri, \r\n    neo4j.auth.basic(neo4jUser, neo4jPassword));\r\n    const session = driver.session();\r\n    session\r\n      .run(&#39;MATCH (n:Node) RETURN n&#39;)\r\n      .then((result) =&gt; {\r\n        result.records.forEach((record) =&gt; {\r\n          const nodeData = record.get(&#39;n&#39;).properties;\r\n          console.log(&quot;DEALING WITH A NODE&quot;);\r\n          const node = {\r\n            ...nodeData,\r\n            // Define required fields such as id, parent, children, etc.\r\n            id: `${nodeData.id}`,\r\n            parent: null,\r\n            children: [],\r\n            internal: {\r\n              type: &#39;Neo4jNodeTEST&#39;, // Define your node type\r\n              content: JSON.stringify(nodeData),\r\n              contentDigest: createContentDigest(nodeData),\r\n            },\r\n          };\r\n        \r\n          // Create the Gatsby node\r\n          createNode(node);\r\n        });\r\n      })\r\n      .catch((error) =&gt; {\r\n        console.error(&#39;Error executing Neo4j query&#39;, error);\r\n      })\r\n      .finally(() =&gt; {\r\n        console.log(&#39;closing neo4j session&#39;);\r\n        session.close();\r\n      });\r\n    (...)\r\n\r\nAnd the plugin part of gatsby-config.js if it&#39;s helping\r\n\r\n    plugins: [\r\n        &quot;gatsby-plugin-sitemap&quot;,\r\n        &quot;gatsby-plugin-sass&quot;,\r\n        `gatsby-transformer-yaml`,\r\n        {\r\n          resolve: `gatsby-source-filesystem`,\r\n          options: {\r\n            path: `${__dirname}/content/`,\r\n          },\r\n        },\r\n        {\r\n          resolve: &quot;gatsby-source-graphql&quot;,\r\n          options: {\r\n            // Arbitrary name for the remote schema Query type\r\n            typeName: &quot;allCompanyRepoYaml&quot;,\r\n            // Field under which the remote schema will be accessible. You&#39;ll use this in your Gatsby query\r\n            fieldName: &quot;edges&quot;,\r\n            // Url to query from\r\n            url: &quot;https://api.neo4j.io&quot;,\r\n          },\r\n        },\r\n      ]\r\n\r\n\r\nAny idea on when I should investigate to make things work?",
      "link": "https://stackoverflow.com/questions/77267313/how-to-connect-to-auradb-from-a-gatsby-based-pages",
      "title": "How to connect to AuraDB from a Gatsby-based pages"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696948574,
              "post_id": 77260862,
              "comment_id": 136216183,
              "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files/77260862#comment136216183_77260862"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696949704,
              "post_id": 77260862,
              "comment_id": 136216443,
              "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files/77260862#comment136216443_77260862"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696877429,
          "last_edit_date": 1696877429,
          "creation_date": 1696873776,
          "answer_id": 77260862,
          "question_id": 77260454,
          "share_link": "https://stackoverflow.com/a/77260862",
          "body_markdown": "[Your graph](https://i.stack.imgur.com/J5RN1.png) is inconsistent with the Cypher code you have shown. It has have a `Style` node that has a `name` property and is missing `Style`, `Dates`, and `Location` properties. You need to fix what is creating these inconsistent `Style` nodes, since `MERGE (s:Style {Style: stylesheet.Style, Dates: stylesheet.`Dates`, Location: stylesheet.Location})` will never match such a `Style` node.\r\n\r\n### Some MERGE best practices\r\n\r\n 1.   Multiple [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/) clauses for the same label should all specify the same set of properties, since a `MERGE` clause with more properties will not match a node created by a `MERGE` clause with fewer properties.\r\n\r\n 2. Ideally, a `MERGE` clause should only specify the minimum properties needed (if any) to uniquely identify a node (or relationship).\r\n\r\n    For example, instead of:\r\n\r\n        MERGE (a:Architect {Architect: architectsheet.Name, Born: architectsheet.Born, Died: architectsheet.Died, Description: architectsheet.Description})\r\n\r\n    it would be safer to use this (assuming architect names are unique -- which is a bad assumption, by the way):\r\n\r\n        MERGE (a:Architect {Architect: architectsheet.Name})\r\n        ON CREATE SET s += {Born: architectsheet.Born, Died: architectsheet.Died, Description: architectsheet.Description}\r\n\r\n    or, even better, since architects can have the same name (but this option requires your non-Architects csv files to reference an architect using an id instead of a name):\r\n\r\n        MERGE (s:Style {id: architectsheet.archId})\r\n        ON CREATE SET s += {Architect: architectsheet.Name, Style: Dates: stylesheet.`Dates`, Location: stylesheet.Location}\r\n3. Do not use `MERGE` when you do not have data for all the properties needed to populate the node.",
          "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files/77260862#77260862",
          "title": "How do I merge duplicate nodes as I load them in from multiple csv files?"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 22671757,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
        "display_name": "anji",
        "link": "https://stackoverflow.com/users/22671757/anji"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77260862,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1696877429,
      "creation_date": 1696869145,
      "last_edit_date": 1696871629,
      "question_id": 77260454,
      "share_link": "https://stackoverflow.com/q/77260454",
      "body_markdown": "Sorry if this is difficult to parse, have only been using NEO4j for a few days.\r\nI&#39;m trying to build a database from multiple csv files. &#39;styles.csv&#39; includes notable architects and buildings. The architect and buildings csv files have additional info on their respective entries.\r\n\r\n### Examples of data structures\r\n\r\n#### Styles csv\r\n![Styles csv snapshot][1]\r\n\r\n#### Buildings csv\r\n![Buildings csv snapshot][2]\r\n\r\n#### Architects csv\r\n![Architects csv snapshot][3]\r\n\r\nHowever, when I import the csv files sequentially it creates duplicate nodes for each node with the same name value. For example, [here it is creating a node for the &#39;roman&#39; style.][4]\r\n\r\nI am loading each csv sequentially and unwinding where there are cells with multiple values.\r\n\r\n\r\n```\r\nLOAD CSV WITH HEADERS FROM &#39;file:///restructured_data_styles.csv&#39; AS stylesheet\r\nMERGE (s:Style {Style: stylesheet.Style, Dates: stylesheet.`Dates`, Location: stylesheet.Location})\r\nWITH s, stylesheet\r\nUNWIND split(stylesheet.`Examples`, &#39;;&#39;) AS stylebuildings\r\nMERGE (buildings:Building{name:stylebuildings})\r\nMERGE (s)-[rbs:BUILT_IN_STYLE]-&gt;(buildings)\r\n```\r\n\r\n```\r\nLOAD CSV WITH HEADERS FROM &#39;file:///restructured_data_architects.csv&#39; AS architectsheet\r\nMERGE (a:Architect {Architect: architectsheet.Name, Born: architectsheet.Born, Died: architectsheet.Died, Description: architectsheet.Description})\r\nWITH a, architectsheet\r\nUNWIND split(architectsheet.`Buildings`, &#39;;&#39;) AS architectbuildings\r\nMERGE (buildings:Building{name:architectbuildings})\r\nMERGE (a)-[rab:NOTABLE_PROJECTS]-&gt;(buildings)\r\n\r\n```\r\n\r\nWhat I want is to load each csv and have neo4j add the additional information provided by each csv file, but also merge the duplicate nodes created while maintaining the relationships already present.\r\nAs it stands, the relationships built within files are fine, but I&#39;m having trouble linking these nodes and relationships *between* the csvs. Does that make sense? Will clarify further if not! Thanks!\r\n\r\nNodes are being created, but they don&#39;t merge based on their name values. Have looked into APOC refactoring but I am very new to this (and also not a data scientist!) - a dumbed down explanation would be very helpful.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ea5oP.png\r\n  [2]: https://i.stack.imgur.com/g71dM.png\r\n  [3]: https://i.stack.imgur.com/a5Yms.png\r\n  [4]: https://i.stack.imgur.com/J5RN1.png",
      "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files",
      "title": "How do I merge duplicate nodes as I load them in from multiple csv files?"
    },
    {
      "tags": ["python", "docker", "neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 15348,
                "user_id": 1497139,
                "user_type": "registered",
                "accept_rate": 68,
                "profile_image": "https://i.stack.imgur.com/3FVKA.png?s=256&g=1",
                "display_name": "Wolfgang Fahl",
                "link": "https://stackoverflow.com/users/1497139/wolfgang-fahl"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696924456,
              "post_id": 77261382,
              "comment_id": 136211403,
              "link": "https://stackoverflow.com/questions/77259921/neo4j-exceptions-serviceunavailable-connection-to-127-0-0-17687-closed-without/77261382#comment136211403_77261382"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 1,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": -1,
          "last_activity_date": 1696880378,
          "creation_date": 1696880378,
          "answer_id": 77261382,
          "question_id": 77259921,
          "share_link": "https://stackoverflow.com/a/77261382",
          "body_markdown": "If you have TLS enabled, then you need to use a different bolt [URI scheme](https://neo4j.com/docs/bolt/current/driver-api/#uri-schemes). For example, `bolt+s`.\r\n\r\nFrom the docs:\r\n\r\n&gt; ## URI schemes\r\n&gt; #### No TLS enabled:\r\n&gt; \r\n&gt; - `bolt`: connect to a single Neo4j instance.\r\n&gt; - `neo4j`: connect to a Neo4j instance and use the routing table\r\n&gt; information for further connections.\r\n&gt; \r\n&gt; #### Enable TLS and allow self-signed certificate authority:\r\n&gt; \r\n&gt; - `bolt+ssc`\r\n&gt; - `neo4j+ssc`\r\n&gt; \r\n&gt; #### Enable TLS and only allow system enabled certificate authority and verify hostname:\r\n&gt; \r\n&gt; - `bolt+s`\r\n&gt; - `neo4j+s`\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77259921/neo4j-exceptions-serviceunavailable-connection-to-127-0-0-17687-closed-without/77261382#77261382",
          "title": "neo4j.exceptions.ServiceUnavailable Connection to 127.0.0.1:7687 closed without handshake response"
        }
      ],
      "owner": {
        "reputation": 15348,
        "user_id": 1497139,
        "user_type": "registered",
        "accept_rate": 68,
        "profile_image": "https://i.stack.imgur.com/3FVKA.png?s=256&g=1",
        "display_name": "Wolfgang Fahl",
        "link": "https://stackoverflow.com/users/1497139/wolfgang-fahl"
      },
      "last_editor": {
        "reputation": 15348,
        "user_id": 1497139,
        "user_type": "registered",
        "accept_rate": 68,
        "profile_image": "https://i.stack.imgur.com/3FVKA.png?s=256&g=1",
        "display_name": "Wolfgang Fahl",
        "link": "https://stackoverflow.com/users/1497139/wolfgang-fahl"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 220,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696880378,
      "creation_date": 1696863811,
      "last_edit_date": 1696872485,
      "question_id": 77259921,
      "share_link": "https://stackoverflow.com/q/77259921",
      "body_markdown": "I keep getting\r\n```\r\nneo4j.exceptions.ServiceUnavailable: Couldn&#39;t connect to localhost:7687 (resolved to ()):\r\nConnection to 127.0.0.1:7687 closed without handshake response\r\n```\r\nwithout a proper explanation why the service is considered to be unavailable. I am using the official neoj4:latest docker image as outlined below. The check for the port to be available is positive and the web environment works fine at port 7474 happily connecting to port 7687. Just the python driver complains.\r\n\r\nInterestingly the CI test works of github fine - just the test in my Jenkins environment on a local ubuntu server reports the problem. \r\n\r\n**What might be the cause of this misbehavior?**\r\n\r\n\r\n**My Environment**\r\nPython Version: Python 3.10.12 (main, Jun 11 2023, 05:26:28) [GCC 11.4.0]\r\nDriver Version: Name: neo4j Version: 5.10.0\r\nSummary: Neo4j Bolt driver for Python\r\nServer Version and Edition: neo4j:latest docker images\r\nOperating System:Distributor ID:\tUbuntu\r\nDescription:\tUbuntu 22.04.3 LTS\r\nRelease:\t22.04\r\nCodename:\tjammy\r\n\r\nIssue to be addressed: https://github.com/WolfgangFahl/pyCEURmake/issues/84.\r\nYou&#39;ll  also find the source code of the snippets below in the above project.\r\n\r\n**Script to start neo4j**\r\nsee https://github.com/WolfgangFahl/pyCEURmake/blob/main/scripts/neo4j\r\n```bash\r\n#!/bin/bash\r\n# WF 2023-07-15\r\n\r\n# Stop and remove any existing Neo4j container\r\ndocker stop neo4j-instance\r\ndocker rm neo4j-instance\r\n\r\n# Run the Neo4j container\r\n# https://neo4j.com/developer/docker-run-neo4j/\r\ndocker run -d --name neo4j-instance \\\r\n  --publish=7474:7474 --publish=7687:7687 \\\r\n  --env NEO4J_AUTH=neo4j/password \\\r\n  --volume=$HOME/neo4j/data:/data \\\r\n  neo4j:latest\r\n\r\n# Function to display a progress bar\r\ndisplay_progress() {\r\n  local progress=$1\r\n  local max_progress=$2\r\n  local bar_length=40\r\n  local filled_length=$((progress * bar_length / max_progress))\r\n  local empty_length=$((bar_length - filled_length))\r\n\r\n  # Build the progress bar string\r\n  local bar=&quot;[&quot;\r\n  bar+=&quot;$(printf &quot;%${filled_length}s&quot; | tr &#39; &#39; &#39;#&#39;)&quot;\r\n  bar+=&quot;$(printf &quot;%${empty_length}s&quot; | tr &#39; &#39; &#39;-&#39;)&quot;\r\n  bar+=&quot;]&quot;\r\n\r\n  # Print the progress bar\r\n  printf &quot;\\r%s %d%%&quot; &quot;$bar&quot; $((progress * 100 / max_progress))\r\n}\r\n\r\n# Wait for Neo4j to start\r\nprogress=0\r\nmax_progress=20\r\nsleep_duration=0.5\r\nwhile [ &quot;$(docker inspect -f &#39;{{.State.Running}}&#39; neo4j-instance 2&gt;/dev/null)&quot; != &quot;true&quot; ] &amp;&amp; [ $progress -lt $max_progress ]; do\r\n  display_progress $progress $max_progress\r\n  ((progress++))\r\n  sleep $sleep_duration\r\ndone\r\n\r\n# Clear the progress bar line\r\nprintf &quot;\\r%${COLUMNS}s\\r&quot;\r\n\r\nif [ &quot;$(docker inspect -f &#39;{{.State.Running}}&#39; neo4j-instance 2&gt;/dev/null)&quot; == &quot;true&quot; ]; then\r\n  echo &quot;Neo4j is running.&quot;\r\nelse\r\n  echo &quot;Failed to start Neo4j.&quot;\r\nfi\r\n\r\n# Display the logs to check the status\r\ndocker logs neo4j-instance\r\n```\r\n\r\n**neo4j wrapper class**\r\n```python\r\nimport argparse\r\nimport json\r\nimport os\r\nimport re\r\nimport requests\r\nimport socket\r\nimport sys\r\n\r\nfrom typing import List, Optional\r\nfrom dataclasses import dataclass, field\r\nfrom neo4j import GraphDatabase\r\nfrom neo4j.exceptions import ServiceUnavailable, AuthError, ConfigurationError\r\n\r\n\r\nclass Neo4j:\r\n    &quot;&quot;&quot;\r\n    Neo4j wrapper class\r\n    &quot;&quot;&quot;\r\n    def __init__(self,host:str=&quot;localhost&quot;,bolt_port:int=7687,auth=(&quot;neo4j&quot;, &quot;password&quot;),encrypted:bool=False):\r\n        &quot;&quot;&quot;\r\n        constructor\r\n        &quot;&quot;&quot;\r\n        self.driver = None\r\n        self.error = None\r\n        self.host=host\r\n        self.bolt_port=bolt_port\r\n        self.encrypted=encrypted\r\n        try:\r\n            uri=f&quot;bolt://{host}:{bolt_port}&quot;      \r\n            if not Neo4j.is_port_available(host,bolt_port):\r\n                raise ValueError(f&quot;port at {uri} not available&quot;)\r\n            self.driver = GraphDatabase.driver(uri, auth=auth,encrypted=encrypted)\r\n        except (ServiceUnavailable, AuthError, ConfigurationError) as e:\r\n            self.error = e\r\n         \r\n    @classmethod   \r\n    def is_port_available(cls,host, port:int)-&gt;bool:\r\n        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n        sock.settimeout(1)  # 1 Second Timeout\r\n        try:\r\n            sock.connect((host, port))\r\n        except socket.error:\r\n            return False\r\n        return True\r\n\r\n    def close(self):\r\n        if self.driver is not None:\r\n            self.driver.close()\r\n\r\n@dataclass\r\nclass Volume:\r\n    &quot;&quot;&quot;\r\n    Represents a volume with its attributes.\r\n    &quot;&quot;&quot;\r\n\r\n    acronym: str\r\n    title: str\r\n    loctime: str\r\n    editors: List[&#39;Editor&#39;] = field(default_factory=list)\r\n\r\n    @classmethod\r\n    def from_json(cls, json_data):\r\n        &quot;&quot;&quot;\r\n        Create a Volume instance from JSON data.\r\n\r\n        Args:\r\n            json_data (dict): The JSON data representing the volume.\r\n\r\n        Returns:\r\n            Volume: The Volume instance created from the JSON data.\r\n        &quot;&quot;&quot;\r\n        editor_names = json_data.get(&#39;editors&#39;)\r\n        if editor_names:\r\n            editor_names = editor_names.split(&quot;,&quot;)\r\n        else:\r\n            editor_names = []\r\n        editors = [Editor(name=name.strip()) for name in editor_names]\r\n        return cls(\r\n            acronym=json_data.get(&#39;acronym&#39;),\r\n            title=json_data.get(&#39;title&#39;),\r\n            loctime=json_data.get(&#39;loctime&#39;),\r\n            editors=editors\r\n        )\r\n\r\n    def create_node(self, tx) -&gt; int:\r\n        &quot;&quot;&quot;\r\n        Create a Volume node in Neo4j.\r\n    \r\n        Args:\r\n            tx: The Neo4j transaction.\r\n    \r\n        Returns:\r\n            int: The ID of the created node.\r\n        &quot;&quot;&quot;\r\n        query = &quot;&quot;&quot;\r\n        CREATE (v:Volume {acronym: $acronym, title: $title, loctime: $loctime})\r\n        RETURN id(v) as node_id\r\n        &quot;&quot;&quot;\r\n        parameters = {\r\n            &quot;acronym&quot;: self.acronym,\r\n            &quot;title&quot;: self.title,\r\n            &quot;loctime&quot;: self.loctime\r\n        }\r\n        result = tx.run(query, parameters)\r\n        record = result.single()\r\n        if record is not None:\r\n            return record[&quot;node_id&quot;]\r\n        else:\r\n            return None\r\n\r\n\r\n    @staticmethod\r\n    def load_json_file(source: str) -&gt; List[&#39;Volume&#39;]:\r\n        &quot;&quot;&quot;\r\n        Load volumes from the source JSON file.\r\n\r\n        Args:\r\n            source (str): Path to the source JSON file.\r\n\r\n        Returns:\r\n            List[Volume]: The list of loaded volumes.\r\n        &quot;&quot;&quot;\r\n        with open(source, &#39;r&#39;) as file:\r\n            json_data = json.load(file)\r\n\r\n        volumes = [Volume.from_json(volume_data) for volume_data in json_data]\r\n        return volumes\r\n    \r\n    @classmethod\r\n    def default_source(cls)-&gt;str:\r\n        &quot;&quot;&quot;\r\n        get the default source\r\n        &quot;&quot;&quot;\r\n        default_source = os.path.expanduser(&#39;~/.ceurws/volumes.json&#39;)\r\n        return default_source\r\n    \r\n    @classmethod\r\n    def parse_args(cls,argv:list=None):\r\n        &quot;&quot;&quot;\r\n        Parse command line arguments.\r\n        \r\n        Args:\r\n            argv(list): command line arguments\r\n\r\n        Returns:\r\n            argparse.Namespace: The parsed command line arguments.\r\n        &quot;&quot;&quot;\r\n        \r\n        default_source = cls.default_source()\r\n        parser = argparse.ArgumentParser(description=&quot;Volume/Editor/Location Information&quot;)\r\n        parser.add_argument(&#39;--source&#39;, default=default_source, help=&quot;Source JSON file path&quot;)\r\n        # Add progress option\r\n        parser.add_argument(&#39;--progress&#39;, action=&#39;store_true&#39;, help=&quot;Display progress information&quot;)\r\n  \r\n        return parser.parse_args(argv)\r\n\r\n    @staticmethod\r\n    def main(argv=None):\r\n        if argv is None:\r\n            argv=sys.argv[1:]\r\n        args = Volume.parse_args(argv)\r\n        volumes = Volume.load_json_file(args.source)\r\n\r\n        # Connect to Neo4j\r\n        driver = GraphDatabase.driver(&quot;bolt://localhost:7687&quot;, auth=(&quot;neo4j&quot;, &quot;password&quot;))\r\n        with driver.session() as session:\r\n            for volume in volumes:\r\n                volume_node_id = volume.create_node(session)\r\n                for editor in volume.editors:\r\n                    editor.search_by_name()\r\n                    editor.create_node(session, volume_node_id)\r\n\r\n\r\n@dataclass\r\nclass Editor:\r\n    &quot;&quot;&quot;\r\n    Represents an editor with their name and ORCID.\r\n    &quot;&quot;&quot;\r\n\r\n    name: str\r\n    orcid: str = None\r\n    likelihood: float = None\r\n\r\n    @classmethod\r\n    def from_json(cls, json_data):\r\n        &quot;&quot;&quot;\r\n        Create an Editor instance from JSON data.\r\n\r\n        Args:\r\n            json_data (dict): The JSON data representing the editor.\r\n\r\n        Returns:\r\n            Editor: The Editor instance created from the JSON data.\r\n        &quot;&quot;&quot;\r\n        return cls(\r\n            name=json_data.get(&#39;name&#39;),\r\n            orcid=json_data.get(&#39;orcid&#39;)\r\n        )\r\n\r\n    def search_by_name(self):\r\n        &quot;&quot;&quot;\r\n        Search the editor by name using the ORCID API and calculate the likelihood.\r\n        &quot;&quot;&quot;\r\n        if self.name:\r\n            url = f&quot;https://pub.orcid.org/v3.0/search/?q={self.name}&quot;\r\n            headers = {\r\n                &quot;Accept&quot;: &quot;application/json&quot;\r\n            }\r\n            response = requests.get(url, headers=headers)\r\n            if response.status_code == 200:\r\n                data = response.json()\r\n                num_results = data.get(&quot;num-found&quot;, 0)\r\n                self.likelihood = num_results / 10  # Arbitrary calculation, adjust as needed\r\n\r\n    def create_node(self, tx, volume_node_id: int) -&gt; int:\r\n        &quot;&quot;&quot;\r\n        Create an Editor node in Neo4j and establish a relationship with a Volume node.\r\n    \r\n        Args:\r\n            tx: The Neo4j transaction.\r\n            volume_node_id (int): The ID of the volume node.\r\n    \r\n        Returns:\r\n            int: The ID of the created Editor node.\r\n        &quot;&quot;&quot;\r\n        query = &quot;&quot;&quot;\r\n        MATCH (v:Volume)\r\n        WHERE id(v) = $volume_node_id\r\n        CREATE (v)-[:HAS_EDITOR]-&gt;(e:Editor {name: $name, orcid: $orcid, likelihood: $likelihood})\r\n        RETURN id(e) as node_id\r\n        &quot;&quot;&quot;\r\n        parameters = {\r\n            &quot;volume_node_id&quot;: volume_node_id,\r\n            &quot;name&quot;: self.name,\r\n            &quot;orcid&quot;: self.orcid,\r\n            &quot;likelihood&quot;: self.likelihood\r\n        }\r\n        result = tx.run(query, parameters)\r\n        record = result.single()\r\n        if record is not None:\r\n            return record[&quot;node_id&quot;]\r\n        else:\r\n            return None\r\n\r\n\r\n\r\n@dataclass\r\nclass Location:\r\n    city: str\r\n    country: str\r\n    date: str\r\n\r\n    @staticmethod\r\n    def parse(location_str: str) -&gt; Optional[&#39;Location&#39;]:\r\n        &quot;&quot;&quot;\r\n        Parse a location string of the format &quot;City, Country, Date&quot;\r\n\r\n        Args:\r\n            location_str: The location string to parse.\r\n\r\n        Returns:\r\n            A Location object or None if the string could not be parsed.\r\n        &quot;&quot;&quot;\r\n        match = re.match(r&#39;^(.*), (.*), (.*)$&#39;, location_str)\r\n        if match:\r\n            city, country, date = match.groups()\r\n            return Location(city, country, date)\r\n        else:\r\n            return None\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    Volume.main()\r\n```\r\n\r\n**unittest**\r\n```python\r\nimport json\r\nfrom ceurws.volume_neo4j import Neo4j,Volume, Editor\r\nfrom ceurws.location import LocationLookup\r\nfrom tests.basetest import Basetest\r\n\r\nclass TestVolumeEditorLocation(Basetest):\r\n    &quot;&quot;&quot;\r\n    Unit tests for Volume, Editor, and Location classes.\r\n    &quot;&quot;&quot;\r\n    \r\n    def setUp(self, debug=False, profile=True):\r\n        Basetest.setUp(self, debug=debug, profile=profile)\r\n        self.neo4j=Neo4j()\r\n        \r\n    def tearDown(self):\r\n        Basetest.tearDown(self)\r\n        self.neo4j.close()\r\n        \r\n    def test_neo4j_available(self):\r\n        &quot;&quot;&quot;\r\n        test the port availability\r\n        &quot;&quot;&quot;\r\n        for service,port in [(&quot;bolt&quot;,self.neo4j.bolt_port),(&quot;http&quot;,7474)]:\r\n            available=Neo4j.is_port_available(self.neo4j.host, port)\r\n            self.assertTrue(available,f&quot;{service} service at {port}&quot;)\r\n            \r\n    def create_test_volume(self, year: int=2023) -&gt; int:\r\n        &quot;&quot;&quot;\r\n        Creates a test Volume node for the given year.\r\n    \r\n        Args:\r\n            year (int): The year for which to create the Volume.\r\n    \r\n        Returns:\r\n            int: The ID of the created Volume node.\r\n        &quot;&quot;&quot;\r\n        with self.neo4j.driver.session() as session:\r\n            with session.begin_transaction() as tx:\r\n                acronym = f&quot;CILC {year}&quot;\r\n                title = f&quot;Proceedings of the {year-1985}th Italian Conference on Computational Logic&quot;\r\n                loctime = f&quot;Some City, Italy, June 21-23, {year}&quot;\r\n                volume = Volume(acronym=acronym, title=title, loctime=loctime)\r\n                volume_id = volume.create_node(tx)\r\n            return volume_id\r\n\r\n    def test_volume_create_node(self):\r\n        &quot;&quot;&quot;\r\n        Test the create_node method of the Volume class.\r\n        &quot;&quot;&quot;\r\n        volume_id=self.create_test_volume()\r\n        self.assertIsNotNone(volume_id)\r\n        \r\n    def test_editor_create_editor_node(self):\r\n        &quot;&quot;&quot;\r\n        Test the create_editor_node method of the Editor class.\r\n        &quot;&quot;&quot;\r\n        volume_id_2023 = self.create_test_volume(2023)\r\n        volume_id_2024 = self.create_test_volume(2024)\r\n    \r\n        with self.neo4j.driver.session() as session:\r\n            with session.begin_transaction() as tx:\r\n                # Test creating one editor for multiple volumes\r\n                editor = Editor(name=&quot;John Doe&quot;, likelihood=0.8)\r\n                editor_id_2023 = editor.create_node(tx, volume_id_2023)\r\n                editor_id_2024 = editor.create_node(tx, volume_id_2024)\r\n        \r\n                self.assertIsNotNone(editor_id_2023)\r\n                self.assertIsNotNone(editor_id_2024)\r\n            \r\n    def test_location_lookup(self):\r\n        &quot;&quot;&quot;\r\n        Test the lookup method of the LocationLookup class.\r\n        &quot;&quot;&quot;\r\n        location_lookup = LocationLookup()\r\n        location = location_lookup.lookup(&quot;Amsterdam, Netherlands&quot;)\r\n        self.assertIsNotNone(location)\r\n        self.assertEqual(location.name, &quot;Amsterdam&quot;)\r\n        self.assertEqual(location.country.iso, &quot;NL&quot;)\r\n\r\n    def test_parse_args(self):\r\n        &quot;&quot;&quot;\r\n        Test the parse_args function.\r\n        &quot;&quot;&quot;\r\n        source=Volume.default_source()\r\n        args = Volume.parse_args([&quot;--source&quot;, source])\r\n        self.assertEqual(args.source, source)\r\n\r\n    def test_json_loading(self):\r\n        &quot;&quot;&quot;\r\n        Test the JSON loading from a file.\r\n        &quot;&quot;&quot;\r\n        with open(Volume.default_source()) as file:\r\n            json_data = json.load(file)\r\n        self.assertIsNotNone(json_data)\r\n        pass\r\n```\r\n",
      "link": "https://stackoverflow.com/questions/77259921/neo4j-exceptions-serviceunavailable-connection-to-127-0-0-17687-closed-without",
      "title": "neo4j.exceptions.ServiceUnavailable Connection to 127.0.0.1:7687 closed without handshake response"
    },
    {
      "tags": ["neo4j", "neo4jclient", "gds"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696964829,
          "post_id": 77256767,
          "comment_id": 136219176,
          "link": "https://stackoverflow.com/questions/77256767/gds-run-cypher-on-a-projected-graph#comment136219176_77256767"
        }
      ],
      "owner": {
        "reputation": 525,
        "user_id": 2744662,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c3dc4268cf36811652fc19681e2f344e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "matlibplotter",
        "link": "https://stackoverflow.com/users/2744662/matlibplotter"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 66,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696834234,
      "creation_date": 1696834234,
      "question_id": 77256767,
      "share_link": "https://stackoverflow.com/q/77256767",
      "body_markdown": "How do I query my projected graph? Ideally, I want to be able to do this:\r\n\r\n```\r\n# We put this simple graph in our database\r\ngds.run_cypher(\r\n  &quot;&quot;&quot;\r\n  CREATE\r\n    (m: City {name: &quot;Malm&#246;&quot;}),\r\n    (l: City {name: &quot;London&quot;}),\r\n    (s: City {name: &quot;San Mateo&quot;}),\r\n\r\n    (m)-[:FLY_TO]-&gt;(l),\r\n    (l)-[:FLY_TO]-&gt;(m),\r\n    (l)-[:FLY_TO]-&gt;(s),\r\n    (s)-[:FLY_TO]-&gt;(l)\r\n  &quot;&quot;&quot;\r\n)\r\n\r\n# We estimate required memory of the operation\r\nres = gds.graph.project.estimate(\r\n    [&quot;City&quot;],                   #  Node projection\r\n    &quot;FLY_TO&quot;,                   #  Relationship projection\r\n    readConcurrency=4           #  Configuration parameters\r\n)\r\nassert res[&quot;bytesMax&quot;] &lt; 1e12\r\n\r\nG, result = gds.graph.project(\r\n    &quot;offices&quot;,                  #  Graph name\r\n    [&quot;City&quot;],                   #  Node projection\r\n    &quot;FLY_TO&quot;,                   #  Relationship projection\r\n    readConcurrency=4           #  Configuration parameters\r\n)\r\n\r\nres = gds.run_cypher(&lt;some cypher on G&gt;)\r\n```\r\n\r\nAccording to [GDS documentation][1], it looks like I need to use gds.alpha.create.cypherdb(), but I only have read-only access.\r\n\r\nWhat is a good way to run cypher queries on a projected graph? The other methods have the mutate mode where it takes in the projected graph object as an argument, but I don&#39;t see such documentation for just running cypher via run_cypher().\r\n\r\n\r\n  [1]: https://neo4j.com/docs/graph-data-science/current/management-ops/create-cypher-db/",
      "link": "https://stackoverflow.com/questions/77256767/gds-run-cypher-on-a-projected-graph",
      "title": "gds.run_cypher() on a projected graph"
    },
    {
      "tags": ["recursion", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 53,
                "user_id": 13685040,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/50d1ff235a58e2d5c5ac7b2c2db90eab?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "snakebite-382",
                "link": "https://stackoverflow.com/users/13685040/snakebite-382"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696885402,
              "post_id": 77261015,
              "comment_id": 136207815,
              "link": "https://stackoverflow.com/questions/77256130/cypher-query-to-get-a-nested-array-of-nodes-at-each-level-of-a-tree-of-nodes/77261015#comment136207815_77261015"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1696875559,
          "creation_date": 1696875559,
          "answer_id": 77261015,
          "question_id": 77256130,
          "share_link": "https://stackoverflow.com/a/77261015",
          "body_markdown": "This query uses the APOC procedure [apoc.convert.toTree](https://neo4j.com/docs/apoc/current/overview/apoc.convert/apoc.convert.toTree/) to generate a tree:\r\n\r\n    MATCH p = (post:POST)&lt;-[:COMMENTED_ON]-(:COMMENT)-[:REPLIED_TO|COMMENTED_ON *0..]-(:COMMENT)\r\n    WHERE ID(post) = 5\r\n    WITH COLLECT(p) AS paths\r\n    CALL apoc.convert.toTree(paths) YIELD value\r\n    RETURN value\r\n\r\nRead [the docs](https://neo4j.com/docs/apoc/current/overview/apoc.convert/apoc.convert.toTree/) to see how to configure the properties that are included or excluded from the generated tree.",
          "link": "https://stackoverflow.com/questions/77256130/cypher-query-to-get-a-nested-array-of-nodes-at-each-level-of-a-tree-of-nodes/77261015#77261015",
          "title": "Cypher Query to get a nested array of nodes at each level of a tree of nodes"
        }
      ],
      "owner": {
        "reputation": 53,
        "user_id": 13685040,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/50d1ff235a58e2d5c5ac7b2c2db90eab?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "snakebite-382",
        "link": "https://stackoverflow.com/users/13685040/snakebite-382"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 24,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77261015,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696875559,
      "creation_date": 1696822048,
      "question_id": 77256130,
      "share_link": "https://stackoverflow.com/q/77256130",
      "body_markdown": "I have a series of comments and replies, each comment can have multiple replies and each reply can in turn have any number of nested or immediate replies.\r\n\r\nHere is some sample data graphed:\r\n[![][1]][1]\r\n\r\nHere I have one post with 4 comments, each replied to the previous comment\r\nI would like to write a query so I can get them returned as nested lists like so\r\n```JSON\r\nPost = {\r\n   ...\r\n   comments: [\r\n      comment: {\r\n          ...\r\n          replies: [\r\n              comment: {\r\n                  ...\r\n                  replies: [\r\n                      comment : {\r\n                         etc\r\n                  ]\r\n              }\r\n          ]\r\n      }\r\n   ]\r\n}\r\n```\r\nWhere each comment has a list of replies and each of those replies has replies you get the point\r\n\r\nI&#39;m very new to using cypher I&#39;m more familiar with mongoDB so this is the query I have so far\r\n```\r\nMATCH tree1 = (post:POST)&lt;-[:COMMENTED_ON]-(comment:COMMENT)\r\nOPTIONAL MATCH tree2 = (comment)&lt;-[replied_to:REPLIED_TO *]-(reply:COMMENT)\r\nWHERE ID(post) = 5\r\nRETURN nodes(tree1), nodes(tree2)\r\n```\r\nWhich gets all the nodes, but it&#39;s just the list of nodes, with a lot of repeats\r\nI&#39;ve done a lot of googling, and I looked at the FOREACH functionality but I&#39;m not sure how I would properly apply it here. I can almost definitely write a query that I can then use code to turn into the structure I need it to be in but it would be nice if I could write a query to do that for me or at least one that returns the nodes in a format where it&#39;s easier to do that \r\n\r\n  [1]: https://i.stack.imgur.com/1yWhz.png",
      "link": "https://stackoverflow.com/questions/77256130/cypher-query-to-get-a-nested-array-of-nodes-at-each-level-of-a-tree-of-nodes",
      "title": "Cypher Query to get a nested array of nodes at each level of a tree of nodes"
    },
    {
      "tags": ["neo4j", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696802630,
          "post_id": 77255284,
          "comment_id": 136196317,
          "link": "https://stackoverflow.com/questions/77255284/neo-clienterror-procedure-procedurenotfound-apoc-nodes-cycles#comment136196317_77255284"
        },
        {
          "owner": {
            "reputation": 325,
            "user_id": 14479366,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0d2912083d0030aca8e95725603b005f?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Mohammed",
            "link": "https://stackoverflow.com/users/14479366/mohammed"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696832748,
          "post_id": 77255284,
          "comment_id": 136198332,
          "link": "https://stackoverflow.com/questions/77255284/neo-clienterror-procedure-procedurenotfound-apoc-nodes-cycles#comment136198332_77255284"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696871101,
          "post_id": 77255284,
          "comment_id": 136205577,
          "link": "https://stackoverflow.com/questions/77255284/neo-clienterror-procedure-procedurenotfound-apoc-nodes-cycles#comment136205577_77255284"
        },
        {
          "owner": {
            "reputation": 325,
            "user_id": 14479366,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0d2912083d0030aca8e95725603b005f?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Mohammed",
            "link": "https://stackoverflow.com/users/14479366/mohammed"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696937204,
          "post_id": 77255284,
          "comment_id": 136213733,
          "link": "https://stackoverflow.com/questions/77255284/neo-clienterror-procedure-procedurenotfound-apoc-nodes-cycles#comment136213733_77255284"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696949435,
          "post_id": 77255284,
          "comment_id": 136216378,
          "link": "https://stackoverflow.com/questions/77255284/neo-clienterror-procedure-procedurenotfound-apoc-nodes-cycles#comment136216378_77255284"
        }
      ],
      "owner": {
        "reputation": 325,
        "user_id": 14479366,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0d2912083d0030aca8e95725603b005f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Mohammed",
        "link": "https://stackoverflow.com/users/14479366/mohammed"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 5,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 70,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696946378,
      "creation_date": 1696797973,
      "last_edit_date": 1696946378,
      "question_id": 77255284,
      "share_link": "https://stackoverflow.com/q/77255284",
      "body_markdown": "I am having an error when trying to use APOC library function apoc.nodes.cycles. It says that there is no procedure found with that name. When listing the procedures found I get the following [![List of procedures][1]][1]\r\n\r\nAs you can see there is no procedure called apoc.nodes.cycles even tho the [documentation][2] says otherwise. When calling apoc.version() I get version 5.12.0 and my neo4j version is 5.3.0. I am using Neo4j Desktop 1.5.9. What am I doing wrong? Please help!\r\n\r\n\r\n**EDIT**\r\n\r\nNow I am a bit confused. When I said I am running Neo4J version 5.3.0 I was referring to this: ![picture][3].\r\n\r\nBut now that I found another one saying I am running version 5.12.0: ![New pic][4][4].\r\n\r\nThis means I am running compatible as per @cybersam comment. But still not able to find the procedure. \r\n\r\n  [1]: https://i.stack.imgur.com/ecpsz.png\r\n  [2]: https://neo4j.com/docs/apoc/current/overview/apoc.nodes/\r\n  [3]: https://i.stack.imgur.com/vgbkn.png\r\n  [4]: https://i.stack.imgur.com/4QArM.png",
      "link": "https://stackoverflow.com/questions/77255284/neo-clienterror-procedure-procedurenotfound-apoc-nodes-cycles",
      "title": "Neo.ClientError.Procedure.ProcedureNotFound &quot;apoc.nodes.cycles&quot;"
    },
    {
      "tags": [
        "express",
        "neo4j",
        "neo4j-ogm",
        "ecmascript-next",
        "ecmascript-2021"
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 453,
            "user_id": 2477612,
            "user_type": "registered",
            "accept_rate": 50,
            "profile_image": "https://www.gravatar.com/avatar/16825c06a5ff913465d214b92a8ed22a?s=256&d=identicon&r=PG",
            "display_name": "Naveen Karnam",
            "link": "https://stackoverflow.com/users/2477612/naveen-karnam"
          },
          "last_editor": {
            "reputation": 453,
            "user_id": 2477612,
            "user_type": "registered",
            "accept_rate": 50,
            "profile_image": "https://www.gravatar.com/avatar/16825c06a5ff913465d214b92a8ed22a?s=256&d=identicon&r=PG",
            "display_name": "Naveen Karnam",
            "link": "https://stackoverflow.com/users/2477612/naveen-karnam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696939265,
          "last_edit_date": 1696939265,
          "creation_date": 1696913513,
          "answer_id": 77263019,
          "question_id": 77254191,
          "share_link": "https://stackoverflow.com/a/77263019",
          "body_markdown": "I figured out the issue after retracing all the steps I made. \r\nUnfortunately, it is not related to any of the details I had posted. Partly the reason it took me so long to debug. \r\n\r\nHowever, it is not really the solution for it. \r\nI had added a field on schema (which is used to instantiate the driver - variable ```typeDefs```). So, ```ObjectGraphMap.init()``` fails.\r\nAlas, Neo4j does not (yet) have the flexible schema integration with graphql. It may be not that bad as it can get pretty dynamic and error-prone without hard-fixing the schema. \r\n\r\n**PS:** Stacktrace needs to improve though. Not actually accepting this as an answer because there seems to be something to address on ES. Check this [out][1] and this [too][2]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71500702/the-promise-rejected-with-the-reason-object-array-code-err-unhandled-r\r\n  [2]: https://github.com/nodejs/node/issues/43326",
          "link": "https://stackoverflow.com/questions/77254191/unhandledpromiserejection-while-ogm-initialize-on-neo4j-graphql-express-server/77263019#77263019",
          "title": "UnhandledPromiseRejection while OGM initialize on Neo4j GraphQL Express Server"
        }
      ],
      "owner": {
        "reputation": 453,
        "user_id": 2477612,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/16825c06a5ff913465d214b92a8ed22a?s=256&d=identicon&r=PG",
        "display_name": "Naveen Karnam",
        "link": "https://stackoverflow.com/users/2477612/naveen-karnam"
      },
      "last_editor": {
        "reputation": 453,
        "user_id": 2477612,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/16825c06a5ff913465d214b92a8ed22a?s=256&d=identicon&r=PG",
        "display_name": "Naveen Karnam",
        "link": "https://stackoverflow.com/users/2477612/naveen-karnam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 65,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696939265,
      "creation_date": 1696778777,
      "last_edit_date": 1696913794,
      "question_id": 77254191,
      "share_link": "https://stackoverflow.com/q/77254191",
      "body_markdown": "I am using express with Neo4j graphql. \r\n\r\nSeeing this exception without specific line indications in my code. \r\n\r\n    node:internal/process/promises:289\r\n                triggerUncaughtException(err, true /* fromPromise */);\r\n                ^\r\n    \r\n    [UnhandledPromiseRejection: This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason &quot;[object Array]&quot;.] {   code: &#39;ERR_UNHANDLED_REJECTION&#39; }\r\n    \r\n    Node.js v20.3.0\r\n\r\n\r\n1. I have graph data models defined in **&quot;graph-data-models.js&quot;**\r\n\r\n        ...        \r\n        const driver = neo4j.driver(\r\n        ...\r\n        );\r\n    \r\n        const ObjectGraphMap = new OGM({ typeDefs, driver });\r\n        const Challenge = ObjectGraphMap.model(&quot;Challenge&quot;);\r\n        ...\r\n2. Express Server on **&quot;app.js&quot;**. Server should start from here. I run ```node app.js```.\r\n\r\n    ```\r\n    ...\r\n    try {\r\n        await ObjectGraphMap.init();\r\n        app.listen(port, () =&gt; {\r\n            logger.info(`Data API App listening at http://localhost:${port}`);\r\n        });\r\n    } catch(e) {\r\n        logger.error(&quot;OGM init failed&quot;,e);\r\n    }\r\n    ```\r\n 3. API Definitions in **&quot;api.js&quot;**\r\n```\r\n...\r\napp = express()\r\n...\r\napp.get(&quot;/challenges&quot;, getChallenges);\r\n...\r\n```\r\n4. Data Models used in **&quot;api-impl.js&quot;**\r\n```\r\n...\r\nconst getChallenges = async (req, res) =&gt; {\r\n    try {\r\n      ...  \r\n      Challenge.find({\r\n            ... }\r\n        })\r\n        .then((challenge) =&gt; {\r\n           ...\r\n        })\r\n        .catch((err) =&gt; {\r\n        ...\r\n        });\r\n    } catch (error) {\r\n        ...\r\n    } \r\n}\r\n...\r\n```\r\n\r\nIt looks to me like something more than just wrapping around a try-catch at all places. How can I debug and find out the issue? OGM init needs some change but then-catch model on **&quot;app.js&quot;** like.\r\n```\r\n...\r\nObjectGraphMap.init()\r\n    .then(() =&gt; {\r\n    ...\r\n    }) \r\n    .catch(() =&gt; {\r\n    ...\r\n    })\r\n...\r\n```\r\ndoes not cut it.  ",
      "link": "https://stackoverflow.com/questions/77254191/unhandledpromiserejection-while-ogm-initialize-on-neo4j-graphql-express-server",
      "title": "UnhandledPromiseRejection while OGM initialize on Neo4j GraphQL Express Server"
    },
    {
      "tags": ["neo4j", "langchain"],
      "owner": {
        "reputation": 487,
        "user_id": 814044,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/e1b69b6f2b931f525db3b0fa0362c6aa?s=256&d=identicon&r=PG",
        "display_name": "Paris Char",
        "link": "https://stackoverflow.com/users/814044/paris-char"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 136,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696778059,
      "creation_date": 1696778059,
      "question_id": 77254152,
      "share_link": "https://stackoverflow.com/q/77254152",
      "body_markdown": "How can I return all documents from a neo4j vector store in langchain?\r\nIs there a wildcard I can use with the neo4jVector.search() function to return a list of all document objects?\r\n\r\nI want to be able to know which documents were already added before I add more pdfs in the vectorstore from a folder that contains pdfs added already in the store previously.\r\n\r\nthank you!",
      "link": "https://stackoverflow.com/questions/77254152/how-to-return-all-documents-from-a-neo4j-vector-store-in-langchain",
      "title": "How to return all documents from a neo4j vector store in langchain?"
    },
    {
      "tags": ["neo4j"],
      "owner": {
        "reputation": 1,
        "user_id": 17989452,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/6d6efc24298b6930e31b439cc08fadbe?s=256&d=identicon&r=PG",
        "display_name": "Reid",
        "link": "https://stackoverflow.com/users/17989452/reid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 20,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696658929,
      "creation_date": 1696658929,
      "question_id": 77248582,
      "share_link": "https://stackoverflow.com/q/77248582",
      "body_markdown": "neo4j 5 provides HTTP API here https://neo4j.com/docs/http-api/current/transactions/\r\nit can execute multiple queries, but in the description, the multiple queries runs in sequence.\r\nI want to run 20 read queries, it will be slow, is there any way to run them coroutine or parallel? \r\n\r\n\r\nUse Golang HTTP to run 20 queries in a http request, it is slowly.",
      "link": "https://stackoverflow.com/questions/77248582/neo4j-5-http-api-how-to-send-multiple-queries-coroutine",
      "title": "neo4j 5 HTTP API how to send multiple queries coroutine?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 187,
                "user_id": 3234217,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
                "display_name": "Makarov",
                "link": "https://stackoverflow.com/users/3234217/makarov"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696629298,
              "post_id": 77246728,
              "comment_id": 136182799,
              "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph/77246728#comment136182799_77246728"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1696618131,
          "last_edit_date": 1696618131,
          "creation_date": 1696617728,
          "answer_id": 77246728,
          "question_id": 77246324,
          "share_link": "https://stackoverflow.com/a/77246728",
          "body_markdown": "This query will return a list of the highest level (&quot;visible&quot;) spaces of which a `User` is a member:\r\n\r\n    MATCH (user:User {auth_token: $auth_token})-[:MEMBER_OF]-&gt;(space)\r\n    WITH user, COLLECT(space) AS spaces\r\n    RETURN user, REDUCE(vs = [], s IN spaces |\r\n      CASE WHEN NONE(a IN [(s)&lt;-[:PARENT_OF*]-(ancestor)|ancestor] WHERE a IN spaces)\r\n      THEN vs + s\r\n      ELSE vs END\r\n    ) AS visibleSpaces\r\n\r\nIt ignores the `pod_state` property, as you did not specify how that should be used.",
          "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph/77246728#77246728",
          "title": "NEO4J query clause in a tree like membership graph"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 187,
            "user_id": 3234217,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
            "display_name": "Makarov",
            "link": "https://stackoverflow.com/users/3234217/makarov"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696629493,
          "creation_date": 1696629493,
          "answer_id": 77247558,
          "question_id": 77246324,
          "share_link": "https://stackoverflow.com/a/77247558",
          "body_markdown": "This is the final query:\r\n\r\nI added some extra logic to fit my needs, but also `UNWIND` the original result to be able to `ORDER BY` and paginate with `SKIP` and `LIMIT`.\r\n\r\n        MATCH (user:User {auth_token: $auth_token})-[:MEMBER_OF]-&gt;(space)\r\n         WHERE space.pod_state IN [&#39;active&#39;, &#39;pending&#39;] AND space.pod_type IN [&#39;standard&#39;, &#39;readonly&#39;]\r\n         WITH user, COLLECT(space) AS spaces\r\n         WITH REDUCE(vs = [], s IN spaces |\r\n          CASE WHEN NONE(a IN [(s)&lt;-[:PARENT_OF*]-(ancestor)|ancestor] WHERE a IN spaces)\r\n          THEN vs + s\r\n          ELSE vs END\r\n        ) AS visibleSpaces\r\n        UNWIND visibleSpaces AS space\r\n        WITH space\r\n        RETURN space\r\n        ORDER BY datetime(space.last_active) DESC\r\n        SKIP toInteger($page) \r\n        LIMIT 50",
          "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph/77247558#77247558",
          "title": "NEO4J query clause in a tree like membership graph"
        }
      ],
      "owner": {
        "reputation": 187,
        "user_id": 3234217,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
        "display_name": "Makarov",
        "link": "https://stackoverflow.com/users/3234217/makarov"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77246728,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1696629493,
      "creation_date": 1696612280,
      "last_edit_date": 1696616805,
      "question_id": 77246324,
      "share_link": "https://stackoverflow.com/q/77246324",
      "body_markdown": "So I have this graph structure where many &quot;Top level&quot; and subspaces spaces can exist like this:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kOPCH.png\r\n\r\nI have the next cypher query:\r\n\r\n    MATCH (user:User {auth_token: $auth_token}) \r\n          MATCH (space:Space)\r\n          WHERE (\r\n            (NOT (space)&lt;-[:PARENT_OF]-(:Space) AND (user)-[:MEMBER_OF]-&gt;(space) AND space.pod_state IN [&#39;active&#39;, &#39;pending&#39;] AND space.pod_type IN [&#39;standard&#39;, &#39;readonly&#39;])\r\n            OR\r\n            (EXISTS {MATCH (parent:Space)-[:PARENT_OF*]-&gt;(space)&lt;-[:MEMBER_OF]-(user) WHERE NOT (user)-[:MEMBER_OF]-&gt;(parent) AND space.pod_state IN [&#39;active&#39;, &#39;pending&#39;] AND space.pod_type IN [&#39;standard&#39;, &#39;readonly&#39;]})\r\n          )\r\n          RETURN space\r\n    \r\nWhat I need in this case is the list of spaces (blue) that a user can see (yellow) \r\nSo:\r\n - Simon DDD should only see &quot;TOP LEVEL SPACE&quot; even when he is also a member of &quot;LEVEL 2 SPACE&quot; he should see the space with the highest level in every hierarchy.\r\n - Simon LALALA on the other hand should see &quot;LEVEL 2 SPACE&quot; since he is only a member of that space.\r\n\r\nIn the query provided SIMON DDD is getting both &quot;TOP LEVEL SPACE&quot; and &quot;LEVEL 2 SPACE&quot;\r\nSIMON LALALA is okay since he is only a member of one space in the path\r\n\r\nAlso, the query works fine if, for example, SIMON DDD is a member of the &quot;LEVEL 1 SPACE A&quot; because the &quot;NOT&quot; clause on the query will work, which means if the user is a MEMBER OF every space in the path only shows the top level space",
      "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph",
      "title": "NEO4J query clause in a tree like membership graph"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696608768,
          "creation_date": 1696608768,
          "answer_id": 77245988,
          "question_id": 77245127,
          "share_link": "https://stackoverflow.com/a/77245988",
          "body_markdown": "`MERGE` is not suitable for your use case. Here is one way to ensure a `Position` node with the exact set of properties you want exists. The query assumes that the desired properties are passed to the query in a `props` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) (e.g., `{symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, location:&quot;zzz&quot;, effective: false}`)\r\n\r\n    OPTIONAL MATCH (p:Position)\r\n    WHERE PROPERTIES(p) = $props\r\n    CALL {\r\n      WITH p\r\n      WITH p WHERE p IS NULL\r\n      CREATE (q:Position)\r\n      SET q = $props\r\n      RETURN result\r\n      UNION\r\n      WITH p\r\n      WITH p WHERE p IS NOT NULL\r\n      RETURN p AS result\r\n    }\r\n    RETURN ID(result)",
          "link": "https://stackoverflow.com/questions/77245127/inserting-general-entities-in-neo4j-using-merge-matching-issue-with-similar-nod/77245988#77245988",
          "title": "Inserting General Entities in Neo4j Using MERGE: Matching Issue with Similar Nodes"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22695803,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d5361fa477fa6781e54d650af857f050?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Gabriel Nogueira",
        "link": "https://stackoverflow.com/users/22695803/gabriel-nogueira"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 22695803,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d5361fa477fa6781e54d650af857f050?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Gabriel Nogueira",
        "link": "https://stackoverflow.com/users/22695803/gabriel-nogueira"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696608768,
      "creation_date": 1696601281,
      "last_edit_date": 1696601444,
      "question_id": 77245127,
      "share_link": "https://stackoverflow.com/q/77245127",
      "body_markdown": "I&#39;m using Neo4j to relate data extracted from official government documents, and I&#39;m developing a Python program to automate this process. However, there are cases where a more general entity is extracted, like `(:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, effective: false})`. When I attempt to insert it into the database using a query like:\r\n\r\n```cypher\r\nMERGE (c:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, effective: false})\r\nRETURN ID(c)\r\n```\r\n\r\nThe `MERGE` clause ends up matching a node of the type `(:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, location:&quot;zzz&quot;, effective: false})`.\r\n\r\nHow can I modify my Cypher query to ensure that the node `(c:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, effective: false})` is inserted into the database? In this case, using `CREATE` alone is not sufficient, as similar nodes might be extracted again.\r\n\r\nI encountered a similar issue in [this post](https://stackoverflow.com/questions/38190061/merge-node-with-null-property-neo4j). However, the provided solution doesn&#39;t work in my case because the `WHERE` clause returns nothing.",
      "link": "https://stackoverflow.com/questions/77245127/inserting-general-entities-in-neo4j-using-merge-matching-issue-with-similar-nod",
      "title": "Inserting General Entities in Neo4j Using MERGE: Matching Issue with Similar Nodes"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 878,
            "user_id": 3952697,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6f711663b08cbcc7ea756a11d7857b16?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Dave Fauth",
            "link": "https://stackoverflow.com/users/3952697/dave-fauth"
          },
          "last_editor": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696595685,
          "last_edit_date": 1696595685,
          "creation_date": 1696594522,
          "answer_id": 77244356,
          "question_id": 77244145,
          "share_link": "https://stackoverflow.com/a/77244356",
          "body_markdown": "I think this will work for you:\r\n\r\n```\r\nMATCH (mt:MoneyTransfer)&lt;-[s:SEND]-(:BankAccount)&lt;-[hba:HAS_BANKACCOUNT]-(ah:AccountHolder) \r\nWHERE (mt.TransactionDate &lt;= date(&quot;2023-09-30&quot;) \r\nAND mt.TransactionDate &gt;= date(&quot;2023-09-01&quot;)) \r\nwith ah.Name as AccountHolder, AVG(mt.MoneyTransferAmount) as avgTransfer \r\nwhere avgTransfer &gt; 1000\r\nRETURN AccountHolder, avgTransfer;\r\n```\r\n",
          "link": "https://stackoverflow.com/questions/77244145/how-to-apply-conditions-on-return-values-in-neo4j-cypher/77244356#77244356",
          "title": "How to apply conditions on return values in Neo4j cypher"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696619827,
          "creation_date": 1696619827,
          "answer_id": 77246900,
          "question_id": 77244145,
          "share_link": "https://stackoverflow.com/a/77246900",
          "body_markdown": "This query will return a list of the names of the account holders that met a threshold transfer amount, and another list of the ones who did not.\r\n\r\n    MATCH (mt:MoneyTransfer)&lt;-[:SEND]-(:BankAccount)&lt;-[:HAS_BANKACCOUNT]-(ah:AccountHolder)\r\n    WHERE date($start) &lt;= mt.TransactionDate &lt;= date($end)\r\n    WITH ah.Name as accountHolder, AVG(mt.MoneyTransferAmount) AS avgTransfer\r\n    RETURN avgTransfer &gt;= $amount AS metThresholdAmount, COLLECT(accountHolder) AS accountHolders\r\n\r\nThe query assumes that the string `start` and `end` dates, and the threshold `amount` are passed as [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/).\r\n\r\nFor example, if there are 2 account holders, the result would look something like this:\r\n\r\n    ╒══════════════════╤══════════════╕\r\n    │metThresholdAmount│accountHolders│\r\n    ╞══════════════════╪══════════════╡\r\n    │true              │[&quot;Fred&quot;]      │\r\n    ├──────────────────┼──────────────┤\r\n    │false             │[&quot;Wilma&quot;]     │\r\n    └──────────────────┴──────────────┘",
          "link": "https://stackoverflow.com/questions/77244145/how-to-apply-conditions-on-return-values-in-neo4j-cypher/77246900#77246900",
          "title": "How to apply conditions on return values in Neo4j cypher"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22695083,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIbz5v9WUcVtiZjc3jj_yGeXR4j-EYL2oP06CUAJCaq0a4=k-s256",
        "display_name": "Santosh Jamale",
        "link": "https://stackoverflow.com/users/22695083/santosh-jamale"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77244356,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1696619827,
      "creation_date": 1696592412,
      "last_edit_date": 1696607459,
      "question_id": 77244145,
      "share_link": "https://stackoverflow.com/q/77244145",
      "body_markdown": "I have a query as follows which returns account holder with their monthly average transaction amount.\r\n\r\n```\r\nMATCH (mt:MoneyTransfer)&lt;-[s:SEND]-(:BankAccount)&lt;-[hba:HAS_BANKACCOUNT]-(ah:AccountHolder)\r\nWHERE (mt.TransactionDate &lt;= date(&quot;2023-09-30&quot;) AND mt.TransactionDate &gt;= date(&quot;2023-09-01&quot;))\r\nRETURN ah.Name as AccountHolder, AVG(mt.MoneyTransferAmount);\r\n```\r\n\r\nHow to apply condition on above output so that I will get account holders whose average monthly money transfer amount (`AVG(mt.MoneyTransferAmount)`) is greater or less than any certain amount?\r\n\r\nI tried multiple things but nothing worked for me.",
      "link": "https://stackoverflow.com/questions/77244145/how-to-apply-conditions-on-return-values-in-neo4j-cypher",
      "title": "How to apply conditions on return values in Neo4j cypher"
    },
    {
      "tags": ["java", "testing", "neo4j", "neo4j-apoc", "apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 497,
                "user_id": 310423,
                "user_type": "registered",
                "accept_rate": 82,
                "profile_image": "https://www.gravatar.com/avatar/c068c66820d62f5e3e2b23e4327c6ebb?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "pilsdumps",
                "link": "https://stackoverflow.com/users/310423/pilsdumps"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696952478,
              "post_id": 77247307,
              "comment_id": 136216993,
              "link": "https://stackoverflow.com/questions/77242976/neo4j-procedure-testing-with-apoc-does-not-compile/77247307#comment136216993_77247307"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696625797,
          "last_edit_date": 1696625797,
          "creation_date": 1696625424,
          "answer_id": 77247307,
          "question_id": 77242976,
          "share_link": "https://stackoverflow.com/a/77247307",
          "body_markdown": "First of all, you should ensure that your neo4j dependencies have compatible versions. You are currently using wildly different versions:\r\n  - Version 5.12.0 of `neo4j`\r\n  - Version 5.3.0 of `neo4j-java-driver`\r\n  - Version 4.4.0.1 of `apoc`.\r\n\r\nTo keep all 3 dependencies consistent, the correct dependencies for the latter 2 artifacts are as follows (notice that the `artifactId` for core apoc is `apoc-core` in 5.x):\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.neo4j.driver&lt;/groupId&gt;\r\n        &lt;artifactId&gt;neo4j-java-driver&lt;/artifactId&gt;\r\n        &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n        &lt;artifactId&gt;apoc-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIn general, to use an APOC core function (or procedure) in your embedded server, you need to find the APOC core class that implements the function (or procedure). To do that, you can:\r\n\r\n 1. Select the [Tag](https://github.com/neo4j/apoc/tags) of the version\r\n    you are using in the APOC core github repo.\r\n 2. Search for the name of the function (or procedure). For example, for `apoc.text.code`, look for a match that looks like\r\n    `@UserFunction(&quot;apoc.text.code&quot;)`.\r\n 3. Get the name of the APOC class (including the package) that implements what you are looking for. For example,\r\n    `apoc.text.Strings`.\r\n 4. In your class that calls `newInProcessBuilder`, add an `import` of that APOC class.\r\n 5. Call the builder&#39;s `withFunction` (or `withProcedure`) method and pass it the APOC class. For example, `withFunction(Strings.class)`.",
          "link": "https://stackoverflow.com/questions/77242976/neo4j-procedure-testing-with-apoc-does-not-compile/77247307#77247307",
          "title": "neo4j procedure testing with apoc does not compile"
        }
      ],
      "owner": {
        "reputation": 497,
        "user_id": 310423,
        "user_type": "registered",
        "accept_rate": 82,
        "profile_image": "https://www.gravatar.com/avatar/c068c66820d62f5e3e2b23e4327c6ebb?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "pilsdumps",
        "link": "https://stackoverflow.com/users/310423/pilsdumps"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 77,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77247307,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696625797,
      "creation_date": 1696581087,
      "question_id": 77242976,
      "share_link": "https://stackoverflow.com/q/77242976",
      "body_markdown": "I&#39;ve a project where I can successfully test my user procedure written using the neo4j traversal framework based on example testing projects.\r\n\r\nThe relevant part of the pom file is\r\n\r\n\r\n```\r\n...\r\n  &lt;neo4j.version&gt;5.12.0&lt;/neo4j.version&gt;\r\n  &lt;neo4j-java-driver.version&gt;5.3.0&lt;/neo4j-java-driver.version&gt;\r\n&lt;/properties&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j&lt;/artifactId&gt;\r\n      &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j.test&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j-harness&lt;/artifactId&gt;\r\n      &lt;version&gt;${neo4j.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j.driver&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j-java-driver&lt;/artifactId&gt;\r\n      &lt;version&gt;${neo4j-java-driver.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.neo4j.procedure/apoc --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j.procedure&lt;/groupId&gt;\r\n      &lt;artifactId&gt;apoc&lt;/artifactId&gt;\r\n      &lt;version&gt;4.4.0.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n...\r\n```\r\n\r\nI&#39;ve set up the embeddedDatabaseServer like this\r\n\r\n```\r\n@BeforeEach\r\nvoid initializeNeo4j() throws IOException {\r\n    \r\n    var sw = new StringWriter();\r\n    try (var in = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;/getNode/tvlike_test_data.cypher&quot;)))) {\r\n        in.transferTo(sw);\r\n        sw.close();\r\n    }\r\n    //split into each statement so can be run one by one\r\n    List&lt;String&gt; statements = Arrays.asList(sw.toString().split(&quot;;\\r\\n&quot;));\r\n\r\n    var builder = Neo4jBuilders.newInProcessBuilder()\r\n            .withDisabledServer()\r\n            .withProcedure(GetNode.class);\r\n\r\n    for (String statement : statements) {\r\n        builder.withFixture(statement);\r\n    }\r\n    \r\n    this.embeddedDatabaseServer = builder.build();\r\n}\r\n```\r\nand the tests run successfully e.g.\r\n\r\n```\r\n@Test\r\nvoid TryIt() {\r\n            try (\r\n                    var driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI());\r\n                    var session = driver.session()\r\n    \r\n            ) {\r\n    \r\n                var results = session.run(&quot;&quot;&quot;\r\n                                match(u:User{userId:&#39;u1&#39;})\r\n                                where u.isEnabled = true\r\n                                match(n:Trial{id: &#39;tr1&#39;})\r\n                                call cctc.getNode(n, u, { includeFoundPermissions : true }) \r\n                                    yield allNodePerms, allPropPerms\r\n                                return allNodePerms, allPropPerms&quot;&quot;&quot;)\r\n                        .single();\r\n                var resMap = results.asMap();\r\n    \r\n                //\r\n                var allNodePerms = (List&lt;Map&lt;String, Object&gt;&gt;) resMap.get(&quot;allNodePerms&quot;);\r\n                assertThat(allNodePerms.size()).isEqualTo(1);\r\n            }\r\n        }\r\n```\r\n\r\nI&#39;d like to include apoc procs and functions in my testing, but I can&#39;t add the necessary infrastructure successfully. For example, running this\r\n\r\n```\r\n@Test\r\nvoid TryIt2() {\r\n    try (\r\n            var driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI());\r\n            var session = driver.session()\r\n\r\n    ) {\r\n\r\n        var results = session.run(&quot;&quot;&quot;\r\n                        return apoc.text.code(103) AS output&quot;&quot;&quot;)\r\n                .single();\r\n\r\n        assertThat(results.get(&quot;output&quot;)).isEqualTo(&quot;g&quot;);\r\n    }}\r\n```\r\n\r\ngives the error \r\n\r\n&gt; org.neo4j.driver.exceptions.ClientException: Unknown function\r\n&gt; &#39;apoc.text.code&#39; (line 1, column 8 (offset: 7)) &quot;return\r\n&gt; apoc.text.code(102) AS output&quot;\r\n\r\nas you&#39;d expect.\r\n\r\nThe question is how do I add the apoc library into the embedded server in the set up step? I&#39;ve tried many examples found in various samples but without success.\r\n\r\nThe pom file already includes the dependency for the apoc procedures. I&#39;ve tried amending the @BeforeEach method in various ways, \r\ne.g.\r\n\r\n - https://github.com/Lukasmp3/neo4j-apoc-testing/commit/6ff0b3e92c4ca1b04f190638a6dcf280270a5f50\r\n - https://github.com/michael-simons/neo4j-examples-and-tips/blob/master/examples/testing-ogm-against-embedded-with-apoc/src/test/java/org/neo4j/tips/testing/testing_ogm_against_embedded_with_apoc/ApplicationTests.java\r\n - https://github.com/neo4j-contrib/rabbithole/blob/3.0/src/main/java/org/neo4j/community/console/Neo4jService.java#L55\r\n\r\nbut without success.\r\n\r\nHow can I amend this\r\n```\r\n        var builder = Neo4jBuilders.newInProcessBuilder()\r\n                .withDisabledServer()\r\n                .withProcedure(GetNode.class);\r\n``` \r\nin my initializeNeo4j method to include apoc?\r\n",
      "link": "https://stackoverflow.com/questions/77242976/neo4j-procedure-testing-with-apoc-does-not-compile",
      "title": "neo4j procedure testing with apoc does not compile"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 3748,
            "user_id": 1643749,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://www.gravatar.com/avatar/5bd4a4b0d684b21f42c79c5e5b4adf3d?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Apidcloud",
            "link": "https://stackoverflow.com/users/1643749/apidcloud"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696601462,
          "post_id": 77242556,
          "comment_id": 136178198,
          "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j#comment136178198_77242556"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696602200,
          "post_id": 77242556,
          "comment_id": 136178370,
          "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j#comment136178370_77242556"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 214,
                "user_id": 8511812,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
                "display_name": "v2belleville",
                "link": "https://stackoverflow.com/users/8511812/v2belleville"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696934775,
              "post_id": 77247988,
              "comment_id": 136213262,
              "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j/77247988#comment136213262_77247988"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696640908,
          "creation_date": 1696640908,
          "answer_id": 77247988,
          "question_id": 77242556,
          "share_link": "https://stackoverflow.com/a/77247988",
          "body_markdown": "If you [install](https://neo4j.com/docs/graph-data-science/current/installation/) the Neo4j Graph Data Science (GDS) plugin, you can use community detection algorithms. In particular, the [Weakly Connected Components](https://neo4j.com/docs/graph-data-science/current/algorithms/wcc/) (WCC) algorithm will be useful for you use case. Here is a snippet from its documentation:\r\n\r\n&gt; The Weakly Connected Components (WCC) algorithm finds sets of\r\n&gt; connected nodes in directed and undirected graphs. Two nodes are\r\n&gt; connected, if there exists a path between them. The set of all nodes\r\n&gt; that are connected with each other form a component. In contrast to\r\n&gt; Strongly Connected Components (SCC), the direction of relationships on\r\n&gt; the path between two nodes is not considered.\r\n\r\nFor example, if you only care about `Img` nodes (with `name` properties) and `DISTANCE` relationships, you can do something like this:\r\n\r\n    // Create an in-memory GDS projection for the Img nodes and DISTANCE relationships\r\n    CALL gds.graph.project(&#39;imgs&#39;, &#39;Img&#39;, &#39;DISTANCE&#39;) YIELD graphName\r\n    // Run WCC algorithm to find each &quot;component&quot;, in which every pair of nodes is connected by some path (ignoring directionality)\r\n    CALL gds.wcc.stream(&#39;imgs&#39;, {}) YIELD nodeId, componentId\r\n    // For each component, collect a list of the names of all nodes in that component\r\n    WITH componentId, COLLECT(gds.util.asNode(nodeId).name) AS names\r\n    // Collect all those lists into an outer list (this is the result you asked for)\r\n    RETURN COLLECT(names) AS result\r\n\r\nThe GDS projection will keep taking up memory on the server until your drop the projection or restart neo4j. To drop the projection named &quot;imgs&quot;, do this:\r\n\r\n    CALL gds.graph.drop(&#39;imgs&#39;)\r\n\r\nThe above is barely scratching the surface of GDS, but should give you a leg up on implementing your use case.",
          "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j/77247988#77247988",
          "title": "How do you return clusters in Neo4j?"
        }
      ],
      "owner": {
        "reputation": 23,
        "user_id": 11299860,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf548f99e2b8bb58af4786719c14a69f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "svk003",
        "link": "https://stackoverflow.com/users/11299860/svk003"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 76,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1696654275,
      "creation_date": 1696577166,
      "last_edit_date": 1696654275,
      "question_id": 77242556,
      "share_link": "https://stackoverflow.com/q/77242556",
      "body_markdown": "I&#39;m very new for neo4j.\r\n\r\nNeed to get output as array for already grouped nodes.[![enter image description here](https://i.stack.imgur.com/O8Y1j.png)](https://i.stack.imgur.com/O8Y1j.png)\r\n\r\nIn attached image having 13 node groups.\r\n\r\nFor example,\r\n\r\n\\[&#39;img8&#39;,&#39;img9&#39;,&#39;img47&#39;,&#39;img50&#39;,&#39;img51&#39;\\] is one set\r\n\r\n\\[&#39;img20&#39;, &#39;img21&#39;\\] is another set.\r\n\r\nLike this we are having 13 node sets in attached image.\r\n\r\nI need output like.\r\n\r\n\\[\\[set1\\],\\[set2\\],.....,\\[set13\\]\\]",
      "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j",
      "title": "How do you return clusters in Neo4j?"
    },
    {
      "tags": ["docker", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696527702,
          "post_id": 77239190,
          "comment_id": 136168068,
          "link": "https://stackoverflow.com/questions/77239190/neo4j-docker-admin-import-cannot-start-container#comment136168068_77239190"
        },
        {
          "owner": {
            "reputation": 57,
            "user_id": 22659125,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
            "display_name": "iuhztr tzhjzuk",
            "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696528230,
          "post_id": 77239190,
          "comment_id": 136168155,
          "link": "https://stackoverflow.com/questions/77239190/neo4j-docker-admin-import-cannot-start-container#comment136168155_77239190"
        }
      ],
      "owner": {
        "reputation": 57,
        "user_id": 22659125,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
        "display_name": "iuhztr tzhjzuk",
        "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
      },
      "last_editor": {
        "reputation": 57,
        "user_id": 22659125,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
        "display_name": "iuhztr tzhjzuk",
        "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 42,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696528697,
      "creation_date": 1696525318,
      "last_edit_date": 1696528697,
      "question_id": 77239190,
      "share_link": "https://stackoverflow.com/q/77239190",
      "body_markdown": "I want to run a neo4j database in docker and import data with the use of `neo4j-admin import` tool. I created a docker container with neo4j community edition with the following command:\r\n\r\n ``` \r\n     docker run --publish=7474:7474 --publish=7687:7687 \\\r\n     --volume=C:/mydir/import:/import \\\r\n     --env NEO4J_AUTH=neo4j/password \\\r\n     neo4j:5.11.0-community \\\r\n     bin/neo4j-admin database import full --id-type=INTEGER --nodes=NodeA=/import/nodesa.csv --nodes=NodeB=/import/nodesb.csv --relationships=RELA=/import/rels.csv --multiline-fields=true\r\n```\r\n\r\nThis created the container and populated the database (the import finished succesfully):\r\n ``` \r\nIMPORT DONE in 13s 945ms.\r\nImported:\r\n  75650 nodes\r\n  95438 relationships\r\n  255509 properties\r\nPeak memory usage: 547.9MiB\r\n ``` \r\n\r\nBut when I checked in the docker desktop the container was not running. I cannot strat the container, because it wants to re-import the data and I get the following error:\r\n\r\n    java.lang.RuntimeException: java.nio.file.DirectoryNotEmptyException: /data/databases/neo4j already contains data, cannot do import here\r\n\r\nWhy is this so and how can I run neo4j in docker and use the import tool. Or start the container after executing the above mentioned command.\r\nI am using community edition of the database, is this maybe the problem; see: [The neo4j-admin database import command: command-line tool useful for straightforward loading of large datasets. Works with Neo4j Desktop, Neo4j EE Docker image and local installations.](https://neo4j.com/docs/getting-started/data-import/csv-import/)\r\nBut I find it kind of odd that in the console I get the message that the database was imported.\r\n\r\n\r\nEdit (logs from docker desktop after re-starting the container):\r\n ``` \r\n2023-10-05 19:47:47 Neo4j version: 5.11.0\r\n2023-10-05 19:47:47 Importing the contents of these files into /data/databases/neo4j:\r\n2023-10-05 19:47:47 Nodes:\r\n2023-10-05 19:47:47   [NodeA]:\r\n2023-10-05 19:47:47   /import/nodea.csv\r\n2023-10-05 19:47:47 \r\n2023-10-05 19:47:47   [NodeB]:\r\n2023-10-05 19:47:47   /import/nodeb.csv\r\n2023-10-05 19:47:47 \r\n2023-10-05 19:47:47 Relationships:\r\n2023-10-05 19:47:47   RELA:\r\n2023-10-05 19:47:47   /import/rels.csv\r\n2023-10-05 19:47:47 \r\n2023-10-05 19:47:47 \r\n2023-10-05 19:47:47 Available resources:\r\n2023-10-05 19:47:47   Total machine memory: 11.70GiB\r\n2023-10-05 19:47:48   Free machine memory: 10.06GiB\r\n2023-10-05 19:47:48   Max heap memory : 2.601GiB\r\n2023-10-05 19:47:48   Max worker threads: 8\r\n2023-10-05 19:47:48   Configured max memory: 6.760GiB\r\n2023-10-05 19:47:48   High parallel IO: true\r\n2023-10-05 19:47:48 \r\n2023-10-05 19:47:52 \r\n2023-10-05 19:47:52 IMPORT FAILED in 0ms. \r\n2023-10-05 19:47:52 Data statistics is not available.\r\n2023-10-05 19:47:52 Peak memory usage: 0B\r\n2023-10-05 19:47:52 Database already exist. Re-run with `--overwrite-destination` to remove the database prior to import\r\n2023-10-05 19:47:52 Caused by:/data/databases/neo4j already contains data, cannot do import here\r\n2023-10-05 19:47:52 \r\n2023-10-05 19:47:52 WARNING Import failed. The store files in /data/databases/neo4j are left as they are, although they are likely in an unusable state. Starting a database on these store files will likely fail or observe inconsistent records so start at your own risk or delete the store manually\r\n2023-10-05 19:47:52 java.lang.RuntimeException: java.nio.file.DirectoryNotEmptyException: /data/databases/neo4j already contains data, cannot do import here\r\n2023-10-05 19:47:52 at org.neo4j.importer.CsvImporter.andPrintError(CsvImporter.java:358)\r\n2023-10-05 19:47:52 at org.neo4j.importer.CsvImporter.doImport(CsvImporter.java:268)\r\n2023-10-05 19:47:52 at org.neo4j.importer.CsvImporter.doImport(CsvImporter.java:181)\r\n2023-10-05 19:47:52 at org.neo4j.importer.ImportCommand$Base.doExecute(ImportCommand.java:405)\r\n2023-10-05 19:47:52 at org.neo4j.importer.ImportCommand$Full.execute(ImportCommand.java:531)\r\n2023-10-05 19:47:52 at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n2023-10-05 19:47:52 at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n2023-10-05 19:47:52 at picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n2023-10-05 19:47:52 at picocli.CommandLine.access$1500(CommandLine.java:148)\r\n2023-10-05 19:47:52 at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n2023-10-05 19:47:52 at picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n2023-10-05 19:47:52 at picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n2023-10-05 19:47:52 at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n2023-10-05 19:47:52 at picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n2023-10-05 19:47:52 at picocli.CommandLine.execute(CommandLine.java:2170)\r\n2023-10-05 19:47:52 at org.neo4j.cli.AdminTool.execute(AdminTool.java:94)\r\n2023-10-05 19:47:52 at org.neo4j.cli.AdminTool.main(AdminTool.java:82)\r\n2023-10-05 19:47:52 Caused by: java.nio.file.DirectoryNotEmptyException: /data/databases/neo4j already contains data, cannot do import here\r\n2023-10-05 19:47:52 at org.neo4j.internal.batchimport.store.BatchingNeoStores.assertDatabaseIsNonExistent(BatchingNeoStores.java:230)\r\n2023-10-05 19:47:52 at org.neo4j.internal.batchimport.store.BatchingNeoStores.createNew(BatchingNeoStores.java:203)\r\n2023-10-05 19:47:52 at org.neo4j.internal.batchimport.ParallelBatchImporter.doImport(ParallelBatchImporter.java:131)\r\n2023-10-05 19:47:52 at org.neo4j.importer.CsvImporter.doImport(CsvImporter.java:264)\r\n2023-10-05 19:47:52 ... 15 more\r\n\r\n ``` ",
      "link": "https://stackoverflow.com/questions/77239190/neo4j-docker-admin-import-cannot-start-container",
      "title": "Neo4j docker - admin import - cannot start container"
    },
    {
      "tags": ["docker", "neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 22659125,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
                "display_name": "iuhztr tzhjzuk",
                "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696519604,
              "post_id": 77233591,
              "comment_id": 136166452,
              "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep/77233591#comment136166452_77233591"
            },
            {
              "owner": {
                "reputation": 57,
                "user_id": 22659125,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
                "display_name": "iuhztr tzhjzuk",
                "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696519703,
              "post_id": 77233591,
              "comment_id": 136166474,
              "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep/77233591#comment136166474_77233591"
            },
            {
              "owner": {
                "reputation": 57,
                "user_id": 22659125,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
                "display_name": "iuhztr tzhjzuk",
                "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696519915,
              "post_id": 77233591,
              "comment_id": 136166509,
              "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep/77233591#comment136166509_77233591"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 22659125,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
                "display_name": "iuhztr tzhjzuk",
                "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696525214,
              "post_id": 77233591,
              "comment_id": 136167567,
              "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep/77233591#comment136167567_77233591"
            },
            {
              "owner": {
                "reputation": 57,
                "user_id": 22659125,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
                "display_name": "iuhztr tzhjzuk",
                "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696527623,
              "post_id": 77233591,
              "comment_id": 136168046,
              "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep/77233591#comment136168046_77233591"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1696463867,
          "creation_date": 1696463867,
          "answer_id": 77233591,
          "question_id": 77233349,
          "share_link": "https://stackoverflow.com/a/77233591",
          "body_markdown": "In the container, your command line needs to use the absolute address for the `import` directory. In your case, just insert &#39;/&#39; before the 3 `import`s:\r\n\r\n    bin/neo4j-admin database import full --id-type=INTEGER --nodes=NodeA=/import/nodes.csv --nodes=NodeB=/import/nodesB.csv --relationships=RELA=/import/rels.csv --multiline-fields=true",
          "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep/77233591#77233591",
          "title": "neo4j-admin import command not working in docker (java.lang.IllegalArgumentException: File &#39;import/nodes.csv&#39; doesn&#39;t exist)"
        }
      ],
      "owner": {
        "reputation": 57,
        "user_id": 22659125,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKGtvM572iuBUgp9O5TqFRwleGI6NZhLxXDQrLIVI9f=k-s256",
        "display_name": "iuhztr tzhjzuk",
        "link": "https://stackoverflow.com/users/22659125/iuhztr-tzhjzuk"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 99,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77233591,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696463867,
      "creation_date": 1696458810,
      "question_id": 77233349,
      "share_link": "https://stackoverflow.com/q/77233349",
      "body_markdown": "I am trying to load some csv data with the help of the `neo4j-admin import` command into neo4j running in docker.\r\nFirst I ran the following docker run command:\r\n```\r\ndocker run \\\r\n    --publish=7474:7474 --publish=7687:7687 \\\r\n    --volume=C:/my_dir:/import \\\r\n    --env NEO4J_AUTH=neo4j/password \\\r\n    neo4j:5.11.0-community \\\r\n```\r\n\r\nAfter the container was created and started I executed the import command in the docker desktop&#39;s neo4j container terminal.\r\n```\r\nbin/neo4j-admin database import full --id-type=INTEGER --nodes=NodeA=import/nodes.csv --nodes=NodeB=import/nodesB.csv --relationships=RELA=import/rels.csv --multiline-fields=true\r\n```\r\nBut I get the following error:\r\n\r\n```\r\nInvalid value for option &#39;--nodes&#39; at index 0 ([&lt;label&gt;[:&lt;label&gt;]...=]&lt;files&gt;): Invalid nodes file: NodeA=import/nodes.csv (java.lang.IllegalArgumentException: File &#39;import/nodes.csv&#39; doesn&#39;t exist)\r\n```\r\n\r\n\r\n\r\nI checked the import folder of the docker container and the folder is mounted and all the csv files are in it. So I do not know why the import is not working.\r\n\r\nI have also installed the same neo4j version locally (windows), where I could successfully import the database with the same `neo4j-admin import` command mentioned above and the same csv files. But I could not make it work using docker.\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77233349/neo4j-admin-import-command-not-working-in-docker-java-lang-illegalargumentexcep",
      "title": "neo4j-admin import command not working in docker (java.lang.IllegalArgumentException: File &#39;import/nodes.csv&#39; doesn&#39;t exist)"
    },
    {
      "tags": ["neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 1,
            "user_id": -1,
            "user_type": "moderator",
            "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
            "display_name": "Community",
            "link": "https://stackoverflow.com/users/-1/community"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696460357,
          "post_id": 77233161,
          "comment_id": 136157541,
          "link": "https://stackoverflow.com/questions/77233161/installation-issue-with-neo4j-desktop-setup-1-5-9-in-windows-11#comment136157541_77233161"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696462967,
          "post_id": 77233161,
          "comment_id": 136157747,
          "link": "https://stackoverflow.com/questions/77233161/installation-issue-with-neo4j-desktop-setup-1-5-9-in-windows-11#comment136157747_77233161"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 22685620,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/847a204b39682532474ae71f8a3916d2?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Ajit Singh Yadav",
            "link": "https://stackoverflow.com/users/22685620/ajit-singh-yadav"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696510910,
          "post_id": 77233161,
          "comment_id": 136164311,
          "link": "https://stackoverflow.com/questions/77233161/installation-issue-with-neo4j-desktop-setup-1-5-9-in-windows-11#comment136164311_77233161"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 22685620,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/847a204b39682532474ae71f8a3916d2?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Ajit Singh Yadav",
            "link": "https://stackoverflow.com/users/22685620/ajit-singh-yadav"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696510657,
          "creation_date": 1696510657,
          "answer_id": 77237327,
          "question_id": 77233161,
          "share_link": "https://stackoverflow.com/a/77237327",
          "body_markdown": "problem resolved \r\nThanks \r\n\r\nProblem was PowerShell. It was not correctly installing \r\n",
          "link": "https://stackoverflow.com/questions/77233161/installation-issue-with-neo4j-desktop-setup-1-5-9-in-windows-11/77237327#77237327",
          "title": "installation issue with Neo4j Desktop Setup 1.5.9 in windows 11"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22685620,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/847a204b39682532474ae71f8a3916d2?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Ajit Singh Yadav",
        "link": "https://stackoverflow.com/users/22685620/ajit-singh-yadav"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 72,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696510657,
      "creation_date": 1696455946,
      "last_edit_date": 1696462714,
      "question_id": 77233161,
      "share_link": "https://stackoverflow.com/q/77233161",
      "body_markdown": "![screen capture](https://i.stack.imgur.com/alI7e.png)\r\n\r\nWhile installing Neo4j Desktop Setup 1.5.9 in windows 11 i have facing this issue. Not able to go thru this step.\r\n\r\n\r\n![enter image description here](https://i.stack.imgur.com/fNV7P.png)\r\n![enter image description here](https://i.stack.imgur.com/QiBlm.png)\r\n\r\nI have added Path to environ variable. I have added PowerShell path. but still not able to resolve the issue. please guide me to resolve it .\r\nThank you \r\n\r\n[This is log.log file](https://drive.google.com/file/d/1hYT_Ar8xfAzPkTbY86s5TXm84QwbiklK/view?usp=drive_link) \r\n",
      "link": "https://stackoverflow.com/questions/77233161/installation-issue-with-neo4j-desktop-setup-1-5-9-in-windows-11",
      "title": "installation issue with Neo4j Desktop Setup 1.5.9 in windows 11"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696332898,
          "post_id": 77221688,
          "comment_id": 136136560,
          "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j#comment136136560_77221688"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 20630792,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu2deeksK5xw2EENJ36MpdAEVct6_iZ2dudXnhFl=k-s256",
            "display_name": "Mittal Vaghela",
            "link": "https://stackoverflow.com/users/20630792/mittal-vaghela"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696336482,
          "post_id": 77221688,
          "comment_id": 136137272,
          "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j#comment136137272_77221688"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696358484,
          "creation_date": 1696358484,
          "answer_id": 77224777,
          "question_id": 77221688,
          "share_link": "https://stackoverflow.com/a/77224777",
          "body_markdown": "1. The first 3 `MATCH` clauses did not use a colon in front of the relationship type. For example, `[provid_by]` should be `[:provid_by]`. This may or may not have caused a difference in the results, but it would have slowed down the query.\r\n\r\n2. Another issue, and it is a big one, is that `UNION` can only add rows to the ultimate result. It cannot filter out any rows provided by other `UNION` terms.\r\n\r\n3. Also, it is not clear why you have the last 3 `UNION`s. They would only add a lot of nodes that do not pass your stated criteria.\r\n\r\nThis simpler query may be sufficient:\r\n\r\n    MATCH (node:service)\r\n    WHERE\r\n     (\r\n       NONE(n IN [(node)-[:provid_by]-&gt;(dst:provider)|dst.name] WHERE n =~ &quot;(?i)Adani Transmission Limited&quot;) OR\r\n       NONE(n IN [(node)-[:address_in]-&gt;(dst:Address)|dst.name] WHERE n =~ &quot;(?i)Formosa&quot;)\r\n     ) AND\r\n     NONE(n IN [(node)-[:depen_on]-&gt;(dst:res)|dst.name] WHERE n =~ &quot;(?i)Video interview data&quot;)\r\n    RETURN node\r\n    ORDER BY node.createdAt DESC",
          "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j/77224777#77224777",
          "title": "How to write or with not query in neo4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 20630792,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu2deeksK5xw2EENJ36MpdAEVct6_iZ2dudXnhFl=k-s256",
        "display_name": "Mittal Vaghela",
        "link": "https://stackoverflow.com/users/20630792/mittal-vaghela"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77224777,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696358484,
      "creation_date": 1696330947,
      "last_edit_date": 1696357653,
      "question_id": 77221688,
      "share_link": "https://stackoverflow.com/q/77221688",
      "body_markdown": "I want to perform this query in neo4j but i&#39;m not getting proper.\r\n\r\nNOT((service provid_by Adani Transmission Limited AND service address_in Formosa) OR service depen_on Video interview data)\r\n\r\n#### Cypher query  \r\n\r\n```\r\nMATCH (node:service )-[provid_by]-&gt;(dst:provider)\r\nWITH DISTINCT node, COLLECT(DISTINCT TOLOWER(dst.name)) AS names\r\nWHERE NONE(name IN names WHERE name IN [&quot;adani transmission limited&quot;]) OR size(names) = 0\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service )-[address_in]-&gt;(dst:Address)\r\nWITH DISTINCT node, COLLECT(DISTINCT TOLOWER(dst.name)) AS names\r\nWHERE NONE(name IN names WHERE name IN [&quot;formosa&quot;]) OR size(names) = 0\r\nWITH DISTINCT node\r\nMATCH (node:service)-[depen_on]-&gt;(dst:res)\r\nWITH DISTINCT node, COLLECT(DISTINCT TOLOWER(dst.name)) AS names\r\nWHERE NONE(name IN names WHERE name IN [&quot;video interview data&quot;]) OR size(names) = 0\r\nWITH DISTINCT node\r\nWITH DISTINCT node\r\nORDER BY node.createdAt DESC\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service) WHERE NOT (node)-[:provid_by]-&gt;(:Participant)\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service)\r\nWHERE NOT (node)-[:address_in]-&gt;(:Address)\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service)\r\nWHERE NOT (node)-[:depen_on]-&gt;(:res)\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\n```",
      "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j",
      "title": "How to write or with not query in neo4j"
    },
    {
      "tags": ["neo4j", "cypher", "constraints"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696267986,
              "post_id": 77215248,
              "comment_id": 136128387,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136128387_77215248"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696281843,
              "post_id": 77215248,
              "comment_id": 136130775,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136130775_77215248"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 20132179,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
                "display_name": "Boris Buklov",
                "link": "https://stackoverflow.com/users/20132179/boris-buklov"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700084964,
              "post_id": 77215248,
              "comment_id": 136612842,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136612842_77215248"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700090363,
              "post_id": 77215248,
              "comment_id": 136613550,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136613550_77215248"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696324504,
          "last_edit_date": 1696324504,
          "creation_date": 1696246303,
          "answer_id": 77215248,
          "question_id": 77215052,
          "share_link": "https://stackoverflow.com/a/77215248",
          "body_markdown": "You can&#39;t create a `CONSTRAINT` on node-relationship-node combinations. \r\n\r\nIt could be enforced in a DML statement for creating the relationship. For example:\r\n```\r\nMATCH (p:Person { name: &quot;Claudia&quot; })\r\nWHERE NOT EXISTS { (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;}) }\r\nCREATE (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;, experience: &quot;2 years&quot;})\r\n```\r\nThis assumes the hobby might not already exist. ",
          "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#77215248",
          "title": "How can I create a constraint on pairs of nodes based on their labels and attributes?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 20132179,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
                "display_name": "Boris Buklov",
                "link": "https://stackoverflow.com/users/20132179/boris-buklov"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696257754,
              "post_id": 77215322,
              "comment_id": 136126521,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215322#comment136126521_77215322"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696247173,
          "creation_date": 1696247173,
          "answer_id": 77215322,
          "question_id": 77215052,
          "share_link": "https://stackoverflow.com/a/77215322",
          "body_markdown": "One option would be to change the data model slightly (don&#39;t know if that is a feasible option for you) so that you make Hobby unique by name for all. So there would only be one Hobby node with name &quot;football&quot; and all who likes football would point to the same node. That way you could have a uniqueness constraint on the name of Hobby.\r\n\r\nWith this model you would move the experience property to the relationship instead (so that the LIKES relationship would have the experience property).\r\n\r\nHowever, this would not prevent the same person node to have multiple LIKES relationships to the same Hobby, but at least the same Hobby would only exist once.",
          "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215322#77215322",
          "title": "How can I create a constraint on pairs of nodes based on their labels and attributes?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 20132179,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
        "display_name": "Boris Buklov",
        "link": "https://stackoverflow.com/users/20132179/boris-buklov"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 20132179,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
        "display_name": "Boris Buklov",
        "link": "https://stackoverflow.com/users/20132179/boris-buklov"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1700084855,
      "creation_date": 1696244277,
      "last_edit_date": 1700084855,
      "question_id": 77215052,
      "share_link": "https://stackoverflow.com/q/77215052",
      "body_markdown": "Let&#39;s say i have two different nodes in my DB:\r\n\r\n```none\r\n(p:person {name: &quot;Claudia&quot;})-[:likes]-&gt;(h:hobby {name: &quot;football&quot;, experience: &quot;2 years&quot;})\r\n```\r\n\r\nMy goal is to make each person&#39;s hobby unique by its `name` attribute, but at the same time I want to be able to create another `(h:hobby {name: &quot;football&quot;})` node, related to some other `person` and it would be 2 different nodes (it&#39;s important!).\r\n\r\nHow can I do that?\r\n\r\nI tried:\r\n```\r\nCREATE CONSTRAINT FOR (h:hobby),(p:person) REQUIRE (p:person)-[:likes]-&gt;(h.name) IS UNIQUE\r\n```\r\nbut it doesn&#39;t even work, giving me:\r\n\r\n```none\r\nInvalid input &#39;(&#39;: expected &quot;)&quot; or an identifier (line 2, column 6 (offset: 24))\r\n&quot;FOR ((h:hobby),(p:person))&quot;\r\n```\r\n\r\n**SOLUTION:**\r\n\r\nIn [Finbar&#39;s Good answer](https://stackoverflow.com/a/77215248/20132179) I found useful statement: `WHERE NOT EXISTS`.\r\n\r\nI can guarantee each `person` has only one related `(h:hobby {name: &quot;football&quot;})` node using this statement and I can add `uuid` property for each `hobby` node I create to make sure it&#39;s unique  within the database:\r\n```cypher\r\nMATCH (p:Person { name: &quot;Claudia&quot; })\r\nWHERE NOT EXISTS { (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;}) }\r\nCREATE (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;, experience: &quot;2 years&quot;, id: apoc.create.uuid()})\r\n```",
      "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib",
      "title": "How can I create a constraint on pairs of nodes based on their labels and attributes?"
    },
    {
      "tags": ["python", "neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696282866,
          "post_id": 77214504,
          "comment_id": 136130925,
          "link": "https://stackoverflow.com/questions/77214504/rendering-neo4j-graph-output-in-my-web-browser#comment136130925_77214504"
        }
      ],
      "owner": {
        "reputation": 115,
        "user_id": 12753662,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4b803e394085b7ffe46b50829d6cf54f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Jegatheesan",
        "link": "https://stackoverflow.com/users/12753662/jegatheesan"
      },
      "last_editor": {
        "reputation": 5787,
        "user_id": 4370109,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=256&g=1",
        "display_name": "Brian Tompsett - 汤莱恩",
        "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 19,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696239775,
      "creation_date": 1696238911,
      "last_edit_date": 1696239775,
      "question_id": 77214504,
      "share_link": "https://stackoverflow.com/q/77214504",
      "body_markdown": "I have a requirement to write a Python code that fetches neo4j graphical output and show it in my web browser. I have used API and wrote a Python code that display the neo4j output as JSON but I would like to have it as a graph visual output in my web browser.\r\n\r\nCan you please help on this?",
      "link": "https://stackoverflow.com/questions/77214504/rendering-neo4j-graph-output-in-my-web-browser",
      "title": "Rendering Neo4j graph output in my web browser"
    },
    {
      "tags": ["neo4j", "cypher", "query-optimization"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1696198683,
          "creation_date": 1696198683,
          "answer_id": 77212510,
          "question_id": 77212102,
          "share_link": "https://stackoverflow.com/a/77212510",
          "body_markdown": "Your query creates a cartesian product between all :Profile nodes and the :Vacency:Decision node, then expands from each one of them checking that they&#39;re not connected.\r\n\r\nIt would likely be more efficient to match to the possible profiles from v, then match to all :Profile nodes that are NOT those. Something like this:\r\n\r\n    PROFILE\r\n    MATCH (v:Vacancy:Decision {id: 17210})&lt;-[:POSSIBLE_PROFILE]-(possible)\r\n    WITH v, collect(possible) as toExclude\r\n    MATCH (p:Profile)\r\n    WHERE NOT p IN toExclude\r\n    RETURN p, v;",
          "link": "https://stackoverflow.com/questions/77212102/neo4j-cypher-query-db-hits-optimization/77212510#77212510",
          "title": "Neo4j Cypher query DB hits optimization"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696198683,
      "creation_date": 1696190251,
      "question_id": 77212102,
      "share_link": "https://stackoverflow.com/q/77212102",
      "body_markdown": "I have the following Cypher query:\r\n\r\n    PROFILE MATCH (p:Profile)  MATCH (v:Vacancy:Decision {id: 17210})\r\n    WHERE NOT exists((v)&lt;-[:POSSIBLE_PROFILE]-(p))\r\n    RETURN p, v;\r\n\r\nand only 5000 Profiles in my test DB.\r\n\r\nThe plan:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI&#39;m concerned about the number of DB hits highlighted in the green rectangle. Could you please show me how to optimize this query?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dz2FS.png",
      "link": "https://stackoverflow.com/questions/77212102/neo4j-cypher-query-db-hits-optimization",
      "title": "Neo4j Cypher query DB hits optimization"
    },
    {
      "tags": ["neo4j"],
      "owner": {
        "reputation": 1,
        "user_id": 22664342,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJ5ZBF4CUuqkFReS6G3uFKOkiq29VBMNP4QkW7oQJ6bKE4=k-s256",
        "display_name": "joon4620",
        "link": "https://stackoverflow.com/users/22664342/joon4620"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 24,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1696132133,
      "creation_date": 1696132133,
      "question_id": 77209159,
      "share_link": "https://stackoverflow.com/q/77209159",
      "body_markdown": "I&#39;m running Ubuntu 22.04 on the VirtualBox, and when I try to log into the neo4j browser and create a new password, I get an error that says \r\n\r\n&quot;Neo.DatabaseError.General.UnknownError: Could not initialize class org.eclipse.collections.impl.utility.LazyIterate&quot;\r\n\r\nI have downloaded java via &quot;sudo apt-get install openjdk-17-jdk, and I have also tried manally downloading a package from Oracle, but it didn&#39;t help.\r\n\r\nI would deeply appreciate any guidance on fixing this problem.\r\n\r\nThank you\r\n",
      "link": "https://stackoverflow.com/questions/77209159/neo-databaseerror-general-unknownerror-could-not-initialize-class-org-eclipse-c",
      "title": "Neo.DatabaseError.General.UnknownError: Could not initialize class org.eclipse.collections.impl.utility.LazyIterate"
    },
    {
      "tags": ["python", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 19443460,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
                "display_name": "Kevin Paul Babu",
                "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696180359,
              "post_id": 77209175,
              "comment_id": 136117476,
              "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77209175#comment136117476_77209175"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696132685,
          "creation_date": 1696132685,
          "answer_id": 77209175,
          "question_id": 77206137,
          "share_link": "https://stackoverflow.com/a/77209175",
          "body_markdown": "The code return_name(n) should be n.return_name",
          "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77209175#77209175",
          "title": "How to update the existing nodes in neo4j using python"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696185598,
          "last_edit_date": 1696185598,
          "creation_date": 1696185226,
          "answer_id": 77211803,
          "question_id": 77206137,
          "share_link": "https://stackoverflow.com/a/77211803",
          "body_markdown": "There are a few errors (and areas for improvement) in your `query`:\r\n\r\n    query = (\r\n        &quot;MATCH (n) WHERE return_name(n) = $return_name&quot;\r\n        &quot;SET n.profile_id = $new_profile_id, &quot;\r\n        &quot;    n.message = $new_message, &quot;\r\n        &quot;    n.processing_flag = $new_processing_flag &quot;\r\n    )\r\n\r\n1. As $jose_bacoy stated, `return_name(n)` should be `n.return_name`, since `return_name` is a property of `Message` nodes, and Cypher has no `return_name` function.\r\n\r\n2. `query` must have whitespace before the `SET` clause. Your query string contains the snippet `... $return_nameSET ...`, which has no whitespace before `SET`, so the query will fail to parse properly. You can actually see this issue in the query shown by the error message.\r\n\r\n3. For efficiency and to avoid unintentional matches, you should use the node label `Message` to qualify `n`. That is, `MATCH (n:Message)` instead of `MATCH (n)`.\r\n\r\nHere is a corrected version of your query:\r\n\r\n    query = (\r\n        &quot;MATCH (n:Message) WHERE n.return_name = $return_name &quot;\r\n        &quot;SET n.profile_id = $new_profile_id, &quot;\r\n        &quot;    n.message = $new_message, &quot;\r\n        &quot;    n.processing_flag = $new_processing_flag &quot;\r\n    )",
          "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77211803#77211803",
          "title": "How to update the existing nodes in neo4j using python"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 2445,
                "user_id": 21144042,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/4SIEF.jpg?s=256&g=1",
                "display_name": "Diego Borba",
                "link": "https://stackoverflow.com/users/21144042/diego-borba"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696250562,
              "post_id": 77212219,
              "comment_id": 136125057,
              "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77212219#comment136125057_77212219"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 22214354,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/96faa0d16e180bc41836018844e66c62?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Jonathan Giffard",
            "link": "https://stackoverflow.com/users/22214354/jonathan-giffard"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696192079,
          "creation_date": 1696192079,
          "answer_id": 77212219,
          "question_id": 77206137,
          "share_link": "https://stackoverflow.com/a/77212219",
          "body_markdown": "As well as the other guidance already given, you might want to try using .execute_query with the Python driver. See https://neo4j.com/docs/python-manual/current/query-simple/ for more details",
          "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77212219#77212219",
          "title": "How to update the existing nodes in neo4j using python"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 19443460,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
        "display_name": "Kevin Paul Babu",
        "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 80,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1696192079,
      "creation_date": 1696060493,
      "question_id": 77206137,
      "share_link": "https://stackoverflow.com/q/77206137",
      "body_markdown": "I&#39;ve successfully managed to display and create nodes in Neo4j using Python, but I&#39;m struggling to update nodes in Neo4j using Python. I&#39;ve attempted to seek assistance from ChatGPT, but I&#39;m still unable to figure out how to update nodes in Neo4j\r\nThis is the python code\r\n```\r\nfrom neo4j import GraphDatabase\r\n\r\n\r\nclass Neo4jConnector:\r\n    def __init__(self, uri, user, password):\r\n        self._driver = GraphDatabase.driver(uri, auth=(user, password))\r\n\r\n    def close(self):\r\n        self._driver.close()\r\n\r\n    @property\r\n    def driver(self):\r\n        return self._driver\r\n\r\n\r\ndef create_node(neo4j_conn, sender, receiver, message, profile_id, rule_type, processing_flag, return_name):\r\n    query = (\r\n        &quot;CREATE (n:Message {sender: $sender, receiver: $receiver, &quot;\r\n        &quot;message: $message, profile_id: $profile_id, rule_type: $rule_type, &quot;\r\n        &quot;processing_flag: $processing_flag,return_name:$return_name})&quot;\r\n    )\r\n\r\n    with neo4j_conn._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, sender=sender, receiver=receiver,\r\n                                                    message=message, profile_id=profile_id,\r\n                                                    rule_type=rule_type, processing_flag=processing_flag,\r\n                                                    return_name=return_name))\r\n\r\n\r\ndef display_nodes(neo4j_conn):\r\n    query = &quot;MATCH (n:Message) RETURN n&quot;\r\n\r\n    with neo4j_conn._driver.session() as session:\r\n        result = session.run(query)\r\n        for record in result:\r\n            node = record[&quot;n&quot;]\r\n            print(node)\r\n\r\n\r\ndef get_nodes_by_processing_flag(tx, processing_flag):\r\n    query = (\r\n        &quot;MATCH (node:Message) &quot;\r\n        &quot;WHERE node.processing_flag = $processing_flag &quot;\r\n        &quot;RETURN node&quot;\r\n    )\r\n    result = []\r\n    for record in tx.run(query, processing_flag=processing_flag):\r\n        result.append(record[&quot;node&quot;])\r\n    return result\r\n\r\n\r\ndef update_node(tx, new_profile_id, new_message, new_processing_flag, return_name):\r\n    query = (\r\n        &quot;MATCH (n) WHERE return_name(n) = $return_name&quot;\r\n        &quot;SET n.profile_id = $new_profile_id, &quot;\r\n        &quot;    n.message = $new_message, &quot;\r\n        &quot;    n.processing_flag = $new_processing_flag &quot;\r\n    )\r\n    tx.run(query,  new_profile_id=new_profile_id, new_message=new_message,\r\n           new_processing_flag=new_processing_flag, return_name=return_name)\r\n\r\n\r\ndef main():\r\n    uri = &quot;bolt://localhost:7687&quot;  # Update with your Neo4j server URI\r\n    user = &quot;admin&quot;  # Update with your Neo4j username\r\n    password = &quot;password&quot;  # Update with your Neo4j password\r\n\r\n    connector = Neo4jConnector(uri, user, password)\r\n\r\n    while True:\r\n        print(&quot;1. Create Node&quot;)\r\n        print(&quot;2. Display Nodes&quot;)\r\n        print(&quot;3. Get Nodes by Processing Flag&quot;)\r\n        print(&quot;4. Update Node&quot;)\r\n        print(&quot;5. Quit&quot;)\r\n\r\n        choice = input(&quot;Enter your choice: &quot;)\r\n\r\n        if choice == &quot;1&quot;:\r\n            sender = input(&quot;Enter sender: &quot;)\r\n            receiver = input(&quot;Enter receiver: &quot;)\r\n            message = input(&quot;Enter message: &quot;)\r\n            profile_id = input(&quot;Enter profile_id: &quot;)\r\n            rule_type = input(&quot;Enter rule_type: &quot;)\r\n            processing_flag = input(&quot;Enter processing_flag: &quot;)\r\n            return_name = sender + rule_type + receiver\r\n            create_node(connector, sender, receiver, message, profile_id, rule_type, processing_flag, return_name)\r\n\r\n        elif choice == &quot;2&quot;:\r\n            display_nodes(connector)\r\n\r\n        elif choice == &quot;3&quot;:\r\n            user_input = input(&quot;Enter the processing flag: &quot;)\r\n            with connector._driver.session() as session:\r\n                nodes = session.read_transaction(get_nodes_by_processing_flag, user_input)\r\n\r\n            if nodes:\r\n                print(f&quot;Nodes with processing flag &#39;{user_input}&#39;:&quot;)\r\n                for node in nodes:\r\n                    print(node)\r\n            else:\r\n                print(f&quot;No nodes found with processing flag &#39;{user_input}&#39;.&quot;)\r\n\r\n        elif choice == &quot;4&quot;:\r\n            return_name = input(&quot;Enter return name: &quot;)\r\n            new_profile_id = input(&quot;Enter new profile_id: &quot;)\r\n            new_message = input(&quot;Enter new message: &quot;)\r\n            new_processing_flag = input(&quot;Enter new processing_flag: &quot;)\r\n            with connector.driver.session() as session:\r\n                session.write_transaction(update_node,  new_profile_id, new_message,\r\n                                          new_processing_flag, return_name)\r\n            print(&quot;Node updated successfully.&quot;)\r\n\r\n        elif choice == &quot;5&quot;:\r\n            connector.close()\r\n            break\r\n\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    main()\r\n\r\n```\r\n\r\n\r\nThis was the error from the code\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\main.py&quot;, line 120, in &lt;module&gt;\r\n    main()\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\main.py&quot;, line 110, in main\r\n    session.write_transaction(update_node,  new_profile_id, new_message,\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_meta.py&quot;, line 209, in inner\r\n    return f(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\session.py&quot;, line 791, in write_transaction\r\n    return self._run_transaction(\r\n           ^^^^^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\session.py&quot;, line 550, in _run_transaction\r\n    result = transaction_function(tx, *args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\main.py&quot;, line 59, in update_node\r\n    tx.run(query,  new_profile_id=new_profile_id, new_message=new_message,\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\transaction.py&quot;, line 164, in run\r\n    result._tx_ready_run(query, parameters)\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\result.py&quot;, line 116, in _tx_ready_run\r\n    self._run(query, parameters, None, None, None, None, None, None)\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\result.py&quot;, line 166, in _run\r\n    self._attach()\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\result.py&quot;, line 274, in _attach\r\n    self._connection.fetch_message()\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_common.py&quot;, line 180, in inner\r\n    func(*args, **kwargs)\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_bolt.py&quot;, line 851, in fetch_message\r\n    res = self._process_message(tag, fields)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_bolt5.py&quot;, line 376, in _process_message\r\n    response.on_failure(summary_metadata or {})\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_common.py&quot;, line 247, in on_failure\r\n    raise Neo4jError.hydrate(**metadata)\r\nneo4j.exceptions.CypherSyntaxError: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input &#39;n&#39;: expected\r\n  &quot;!=&quot;\r\n  &quot;%&quot;\r\n  &quot;*&quot;\r\n  &quot;+&quot;\r\n  &quot;-&quot;\r\n  &quot;.&quot;\r\n  &quot;/&quot;\r\n  &quot;:&quot;\r\n  &quot;&lt;&quot;\r\n  &quot;&lt;=&quot;\r\n  &quot;&lt;&gt;&quot;\r\n  &quot;=&quot;\r\n  &quot;=~&quot;\r\n  &quot;&gt;&quot;\r\n  &quot;&gt;=&quot;\r\n  &quot;AND&quot;\r\n  &quot;CALL&quot;\r\n  &quot;CONTAINS&quot;\r\n  &quot;CREATE&quot;\r\n  &quot;DELETE&quot;\r\n  &quot;DETACH&quot;\r\n  &quot;ENDS&quot;\r\n  &quot;FOREACH&quot;\r\n  &quot;IN&quot;\r\n  &quot;IS&quot;\r\n  &quot;LOAD&quot;\r\n  &quot;MATCH&quot;\r\n  &quot;MERGE&quot;\r\n  &quot;OPTIONAL&quot;\r\n  &quot;OR&quot;\r\n  &quot;REMOVE&quot;\r\n  &quot;RETURN&quot;\r\n  &quot;SET&quot;\r\n  &quot;STARTS&quot;\r\n  &quot;UNION&quot;\r\n  &quot;UNWIND&quot;\r\n  &quot;USE&quot;\r\n  &quot;WITH&quot;\r\n  &quot;XOR&quot;\r\n  &quot;[&quot;\r\n  &quot;^&quot;\r\n  &lt;EOF&gt; (line 1, column 50 (offset: 49))\r\n&quot;MATCH (n) WHERE return_name(n) = $return_nameSET n.profile_id = $new_profile_id,     n.message = $new_message,     n.processing_flag = $new_processing_flag&quot;\r\n                                                  ^}\r\n```\r\n ",
      "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python",
      "title": "How to update the existing nodes in neo4j using python"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc", "apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 214,
                "user_id": 8511812,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
                "display_name": "v2belleville",
                "link": "https://stackoverflow.com/users/8511812/v2belleville"
              },
              "reply_to_user": {
                "reputation": 299,
                "user_id": 2167741,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/edb162a96cd10ea3e2185fa6976a322c?s=256&d=identicon&r=PG",
                "display_name": "user2167741",
                "link": "https://stackoverflow.com/users/2167741/user2167741"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1695929679,
              "post_id": 77197477,
              "comment_id": 136092859,
              "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate/77197477#comment136092859_77197477"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1695926475,
          "creation_date": 1695926475,
          "answer_id": 77197477,
          "question_id": 77196825,
          "share_link": "https://stackoverflow.com/a/77197477",
          "body_markdown": "in the split, the single quotes around the coma are messing up with opening and closing the 3 strings for periodic iterate\r\n\r\nuse double quotes and you should be good...",
          "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate/77197477#77197477",
          "title": "Splitting string with apoc.periodic.iterate"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 299,
            "user_id": 2167741,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/edb162a96cd10ea3e2185fa6976a322c?s=256&d=identicon&r=PG",
            "display_name": "user2167741",
            "link": "https://stackoverflow.com/users/2167741/user2167741"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1695926482,
          "creation_date": 1695926482,
          "answer_id": 77197478,
          "question_id": 77196825,
          "share_link": "https://stackoverflow.com/a/77197478",
          "body_markdown": "This needs a double quote for the split function. Namely,\r\nsplit(csv.patients,&quot;,&quot;) as pts\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate/77197478#77197478",
          "title": "Splitting string with apoc.periodic.iterate"
        }
      ],
      "owner": {
        "reputation": 299,
        "user_id": 2167741,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/edb162a96cd10ea3e2185fa6976a322c?s=256&d=identicon&r=PG",
        "display_name": "user2167741",
        "link": "https://stackoverflow.com/users/2167741/user2167741"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77197477,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1695926482,
      "creation_date": 1695919180,
      "question_id": 77196825,
      "share_link": "https://stackoverflow.com/q/77196825",
      "body_markdown": "I am encountering errors when including a function to split a string inside apoc.periodic.iterate in Neo4j. Namely, here is my query which runs fine:\r\n\r\n```\r\nWITH collect(file.URL) AS fileURLs\r\nUNWIND fileURLs AS fileURL\r\nCALL apoc.periodic.iterate(\r\n&#39;\r\nCALL apoc.load.csv($url) YIELD map AS csv\r\nRETURN csv\r\n&#39;,\r\n&#39;\r\nWITH round(toFloat(csv.dendrogram_height),3,&quot;HALF_UP&quot;) as height, csv.gene_name as gene, csv.event_no as event, csv.samples as sp, round(toFloat(csv.median_ge),3,&quot;HALF_UP&quot;) as me, csv.no_of_samples as no_s, csv.leaf_status as leaf, csv.patients as pts, csv.no_of_uniq_patients as no_pt, round((toFloat(csv.log2fc)),3,&quot;HALF_UP&quot;) as log2, round(toFloat(csv.padj_deseq2),3,&quot;HALF_UP&quot;) as padj, csv.up_or_down as up\r\nCREATE (:Expression:Primary {name: gene, event_no: event, dendrogram_height: height, samples: sp, median_exp: me, no_of_samples: no_s, leaf_status: leaf, patients: pts, no_of_unique_patients: no_pt, log2fc: log2, padj_deseq2: padj, up_or_down: up});\r\n&#39;,\r\n{batchSize:10000,parallel:true,params:{url:fileURL}}) YIELD batches, total\r\nRETURN batches, total;\r\n```\r\n\r\nBut when I include the function ```split``` (or ```apoc.text.split``` for that matter) in the ```WITH``` statement, namely,\r\n\r\n```\r\nMATCH (file:File) WITH file\r\nWITH collect(file.URL) AS fileURLs\r\nUNWIND fileURLs AS fileURL\r\nCALL apoc.periodic.iterate(\r\n&#39;\r\nCALL apoc.load.csv($url) YIELD map AS csv\r\nRETURN csv\r\n&#39;,\r\n&#39;\r\nWITH round(toFloat(csv.dendrogram_height),3,&quot;HALF_UP&quot;) as height, csv.gene_name as gene, csv.event_no as event, csv.samples as sp, round(toFloat(csv.median_ge),3,&quot;HALF_UP&quot;) as me, csv.no_of_samples as no_s, csv.leaf_status as leaf, split(csv.patients,&#39;,&#39;) as pts, csv.no_of_uniq_patients as no_pt, round((toFloat(csv.log2fc)),3,&quot;HALF_UP&quot;) as log2, round(toFloat(csv.padj_deseq2),3,&quot;HALF_UP&quot;) as padj, csv.up_or_down as up\r\nCREATE (:Expression:Primary {name: gene, event_no: event, dendrogram_height: height, samples: sp, median_exp: me, no_of_samples: no_s, leaf_status: leaf, patients: pts, no_of_unique_patients: no_pt, log2fc: log2, padj_deseq2: padj, up_or_down: up});\r\n&#39;,\r\n{batchSize:10000,parallel:true,params:{url:fileURL}}) YIELD batches, total\r\nRETURN batches, total;\r\n\r\n```\r\nI get an error saying:\r\n\r\n```\r\n\r\nProcedure call provides too many arguments: got 4 expected no more than 3.\r\n\r\nProcedure apoc.periodic.iterate has signature: apoc.periodic.iterate(cypherIterate :: STRING?, cypherAction :: STRING?, config :: MAP?) :: batches :: INTEGER?, total :: INTEGER?, timeTaken :: INTEGER?, committedOperations :: INTEGER?, failedOperations :: INTEGER?, failedBatches :: INTEGER?, retries :: INTEGER?, errorMessages :: MAP?, batch :: MAP?, operations :: MAP?, wasTerminated :: BOOLEAN?, failedParams :: MAP?, updateStatistics :: MAP?\r\nmeaning that it expects at least 3 arguments of types STRING?, STRING?, MAP?\r\nDescription: Runs the second statement for each item returned by the first statement.\r\nThis procedure returns the number of batches and the total number of processed rows. (line 4, column 1 (offset: 90))\r\n&quot;CALL apoc.periodic.iterate(&quot;\r\n ^\r\n```\r\n\r\nThe only difference is the ```split``` function in ```split(csv.patients,&#39;,&#39;)``` than ```csv.patients``` in the second query chunk.\r\n\r\nHow to resolve this? Thanks.",
      "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate",
      "title": "Splitting string with apoc.periodic.iterate"
    },
    {
      "tags": ["neo4j", "cypher", "graph-databases", "graph-data-science"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1694797219,
          "post_id": 77109331,
          "comment_id": 135943125,
          "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c#comment135943125_77109331"
        },
        {
          "owner": {
            "reputation": 3,
            "user_id": 22475005,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtews4SAMBHNYQ_IP7U_Dxtk9Fm7eas_IdeWXiv8GD84-Q=k-s256",
            "display_name": "Hao Chen",
            "link": "https://stackoverflow.com/users/22475005/hao-chen"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695044327,
          "post_id": 77109331,
          "comment_id": 135967587,
          "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c#comment135967587_77109331"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695067009,
          "post_id": 77109331,
          "comment_id": 135971987,
          "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c#comment135971987_77109331"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694794997,
              "post_id": 77109531,
              "comment_id": 135942708,
              "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77109531#comment135942708_77109531"
            },
            {
              "owner": {
                "reputation": 3,
                "user_id": 22475005,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtews4SAMBHNYQ_IP7U_Dxtk9Fm7eas_IdeWXiv8GD84-Q=k-s256",
                "display_name": "Hao Chen",
                "link": "https://stackoverflow.com/users/22475005/hao-chen"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695044427,
              "post_id": 77109531,
              "comment_id": 135967613,
              "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77109531#comment135967613_77109531"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 5354,
            "user_id": 8212173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/9a9b521e42700f800145a6a57c9b860f?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "amanb",
            "link": "https://stackoverflow.com/users/8212173/amanb"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1694750612,
          "creation_date": 1694750612,
          "answer_id": 77109531,
          "question_id": 77109331,
          "share_link": "https://stackoverflow.com/a/77109531",
          "body_markdown": "You can get extended information about a specific native named graph by yielding and returning additional fields like `schemaWithOrientation` from the output of `CALL gds.graph.list()`. For example, `schemaWithOrientation` returns the Node labels, relationship types, relationship orientation and properties contained in the projected graph. You can refer to the full list here: https://neo4j.com/docs/graph-data-science/current/graph-list/\r\n\r\nExample:\r\n\r\n    CALL gds.graph.list(&#39;personsNative&#39;)\r\n    YIELD graphName, schemaWithOrientation, configuration\r\n    RETURN graphName, schemaWithOrientation, configuration.nodeProjection AS nodeProjection",
          "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77109531#77109531",
          "title": "Is there a method to access specific node and relationship data within a graph catalog in neo4j GDS?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 3,
                "user_id": 22475005,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtews4SAMBHNYQ_IP7U_Dxtk9Fm7eas_IdeWXiv8GD84-Q=k-s256",
                "display_name": "Hao Chen",
                "link": "https://stackoverflow.com/users/22475005/hao-chen"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695044728,
              "post_id": 77110640,
              "comment_id": 135967696,
              "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77110640#comment135967696_77110640"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 51,
            "user_id": 22051375,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "florentin",
            "link": "https://stackoverflow.com/users/22051375/florentin"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1694764957,
          "creation_date": 1694764957,
          "answer_id": 77110640,
          "question_id": 77109331,
          "share_link": "https://stackoverflow.com/a/77110640",
          "body_markdown": "You can also use inspect the content of nodes by streaming them back (see https://neo4j.com/docs/graph-data-science/current/graph-catalog-node-ops/).\r\nSame works for relationships (see https://neo4j.com/docs/graph-data-science/current/graph-catalog-relationship-ops/).\r\n\r\nFurther if you are good with Cypher, you can also try out Cypher on GDS (https://neo4j.com/docs/graph-data-science/current/management-ops/create-cypher-db/).",
          "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77110640#77110640",
          "title": "Is there a method to access specific node and relationship data within a graph catalog in neo4j GDS?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 3,
                "user_id": 22475005,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtews4SAMBHNYQ_IP7U_Dxtk9Fm7eas_IdeWXiv8GD84-Q=k-s256",
                "display_name": "Hao Chen",
                "link": "https://stackoverflow.com/users/22475005/hao-chen"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695085062,
              "post_id": 77130068,
              "comment_id": 135973980,
              "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77130068#comment135973980_77130068"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1695067284,
          "last_edit_date": 1695067284,
          "creation_date": 1695066964,
          "answer_id": 77130068,
          "question_id": 77109331,
          "share_link": "https://stackoverflow.com/a/77130068",
          "body_markdown": "Unfortunately, GDS does not provide a way currently (in GDS 2.4.4) to get relationship IDs out of a projection.\r\n\r\nBut there is a somewhat ugly workaround. You can add to every relationship of interest a special property (say, `_relId`) containing that relationship&#39;s native ID. Then you can include that property when creating the projection, and get back that property after you generate your GDS results.\r\n\r\nFor example, in your use case:\r\n\r\n - Add `_relId` to all relationships (since they are all of interest in your use case).\r\n\r\n       MATCH ()-[r]-&gt;()\r\n       SET r._relId = ID(r)\r\n\r\n - Project, and include `_relId` property.\r\n\r\n       MATCH (source)\r\n       OPTIONAL MATCH (source)-[r]-&gt;(target)\r\n       WITH gds.graph.project(\r\n         &#39;graph_0&#39;,\r\n         source,\r\n         target,\r\n         {\r\n           sourceNodeLabels: labels(source),\r\n           targetNodeLabels: labels(target),\r\n           relationshipType: type(r),\r\n           relationshipProperties: r { ._relId }\r\n         }\r\n       ) AS g\r\n       RETURN g.graphName AS graph, g.nodeCount AS nodes, g.relationshipCount AS rels\r\n\r\n - Run random walk.\r\n\r\n       MATCH (start:Buyer {name: &#39;Alice&#39;})\r\n       CALL gds.graph.sample.rwr(&#39;mySample&#39;, &#39;graph_0&#39;, { samplingRatio: 0.66, startNodes: [id(start)] })\r\n       YIELD nodeCount, relationshipCount\r\n       RETURN nodeCount, relationshipCount\r\n\r\n - Get relationships from output projection `mySample`, including the native relationship IDs (`relNativeId` in the result).\r\n\r\n       CALL gds.graph.relationshipProperties.stream(&#39;mySample&#39;, [&#39;_relId&#39;])\r\n       YIELD sourceNodeId, targetNodeId, relationshipType, propertyValue\r\n       RETURN sourceNodeId, targetNodeId, relationshipType, TOINTEGER(propertyValue) AS relNativeId\r\n\r\nHere is a sample result:\r\n\r\n    ╒════════════╤════════════╤════════════════╤═══════════╕\r\n    │sourceNodeId│targetNodeId│relationshipType│relNativeId│\r\n    ╞════════════╪════════════╪════════════════╪═══════════╡\r\n    │171         │172         │&quot;PAYS&quot;          │256        │\r\n    ├────────────┼────────────┼────────────────┼───────────┤\r\n    │171         │172         │&quot;PAYS&quot;          │253        │\r\n    ├────────────┼────────────┼────────────────┼───────────┤\r\n    │171         │172         │&quot;PAYS&quot;          │257        │\r\n    ├────────────┼────────────┼────────────────┼───────────┤\r\n    │171         │172         │&quot;PAYS&quot;          │255        │\r\n    ├────────────┼────────────┼────────────────┼───────────┤\r\n    │171         │172         │&quot;PAYS&quot;          │258        │\r\n    ├────────────┼────────────┼────────────────┼───────────┤\r\n    │171         │172         │&quot;PAYS&quot;          │254        │\r\n    └────────────┴────────────┴────────────────┴───────────┘\r\n\r\nCaveat: If you delete a projected relationship from the DB, then its projection (including its `_relId` value) will be invalid. In fact, the stale `_relId` value would either refer to nothing, or refer to some random new relationship.",
          "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c/77130068#77130068",
          "title": "Is there a method to access specific node and relationship data within a graph catalog in neo4j GDS?"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22475005,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtews4SAMBHNYQ_IP7U_Dxtk9Fm7eas_IdeWXiv8GD84-Q=k-s256",
        "display_name": "Hao Chen",
        "link": "https://stackoverflow.com/users/22475005/hao-chen"
      },
      "last_editor": {
        "reputation": 3,
        "user_id": 22475005,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtews4SAMBHNYQ_IP7U_Dxtk9Fm7eas_IdeWXiv8GD84-Q=k-s256",
        "display_name": "Hao Chen",
        "link": "https://stackoverflow.com/users/22475005/hao-chen"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 166,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77130068,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1695067284,
      "creation_date": 1694745757,
      "last_edit_date": 1695044845,
      "question_id": 77109331,
      "share_link": "https://stackoverflow.com/q/77109331",
      "body_markdown": "In Neo4j Graph Data Science (GDS), each graph can have a corresponding projection. How can I obtain detailed information about the actual nodes and relationships stored within a specific projection? Is there a method to access specific node and relationship data within a projection?\r\n\r\nFor a specific graph catalog projection, `graph_0`, I can use `CALL gds.graph.list(&#39;graph_0&#39;)` to retrieve basic information about the projection, such as the number of nodes and relationships. However, no detailed information about nodes and relations is listed.\r\n\r\n\r\n------- add an example to explain more detail -----------\r\n\r\n 1. create a simple graph with following cypher command:\r\n```\r\nCREATE\r\n  (alice:Buyer {name: &#39;Alice&#39;}),\r\n  (instrumentSeller:Seller {name: &#39;Instrument Seller&#39;}),\r\n  (bob:Buyer {name: &#39;Bob&#39;}),\r\n  (carol:Buyer {name: &#39;Carol&#39;}),\r\n  (alice)-[:PAYS { amount: 1.0}]-&gt;(instrumentSeller),\r\n  (alice)-[:PAYS { amount: 2.0}]-&gt;(instrumentSeller),\r\n  (alice)-[:PAYS { amount: 3.0}]-&gt;(instrumentSeller),\r\n  (alice)-[:PAYS { amount: 4.0}]-&gt;(instrumentSeller),\r\n  (alice)-[:PAYS { amount: 5.0}]-&gt;(instrumentSeller),\r\n  (alice)-[:PAYS { amount: 6.0}]-&gt;(instrumentSeller),\r\n\r\n  (bob)-[:PAYS { amount: 3.0}]-&gt;(instrumentSeller),\r\n  (bob)-[:PAYS { amount: 4.0}]-&gt;(instrumentSeller),\r\n  (carol)-[:PAYS { amount: 5.0}]-&gt;(bob),\r\n  (carol)-[:PAYS { amount: 6.0}]-&gt;(bob)\r\n```\r\n[example graph][1]\r\n\r\n2. project it.\r\n\r\n```\r\nMATCH (source)\r\nOPTIONAL MATCH (source)-[r]-&gt;(target)\r\nWITH gds.graph.project(\r\n&#39;graph_0&#39;,\r\nsource,\r\ntarget,\r\n{\r\nsourceNodeLabels: labels(source),\r\ntargetNodeLabels: labels(target),\r\nrelationshipType: type(r)\r\n}\r\n) AS g\r\nRETURN g.graphName AS graph, g.nodeCount AS nodes, g.relationshipCount AS rels\r\n\r\n// return: \r\n//graph\t    nodes\trels\r\n//&quot;graph_0&quot;\t4\t    10\r\n```\r\n\r\n3. run a random walk algorithm on the example graph\r\n```\r\nMATCH (start:Buyer {name: &#39;Alice&#39;})\r\nCALL gds.graph.sample.rwr(&#39;mySample&#39;, &#39;graph_0&#39;, { samplingRatio: 0.66, startNodes: [id(start)] })\r\nYIELD nodeCount, relationshipCount\r\nRETURN nodeCount, relationshipCount\r\n// return:\r\n// nodeCount\trelationshipCount\r\n// 3\t        8\r\n```\r\n\r\n4. In this example, there are multiple relations with the same type between two nodes, e.g. `PAYS` between `Alice` and `Instrument Seller`. I want to know which relationships (identified with relationship ID) are sampled in this sampling process. However, the current provided methods can only figure out which type of relations are sampled, instead of exact relationship IDs.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UQIV6.png",
      "link": "https://stackoverflow.com/questions/77109331/is-there-a-method-to-access-specific-node-and-relationship-data-within-a-graph-c",
      "title": "Is there a method to access specific node and relationship data within a graph catalog in neo4j GDS?"
    },
    {
      "tags": ["neo4j", "cypher", "query-optimization"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 793,
                "user_id": 4414246,
                "user_type": "registered",
                "accept_rate": 60,
                "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
                "display_name": "David A Stumpf",
                "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694529342,
              "post_id": 77077498,
              "comment_id": 135901205,
              "link": "https://stackoverflow.com/questions/77076783/neo4j-multilabel-modes-and-query-performance/77077498#comment135901205_77077498"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1694454660,
          "last_edit_date": 1694454660,
          "creation_date": 1694372262,
          "answer_id": 77077498,
          "question_id": 77076783,
          "share_link": "https://stackoverflow.com/a/77077498",
          "body_markdown": "A uniqueness constraint creates a RANGE index. RANGE indexes internally use the B+ tree algorithm, which have O(log n) complexity.\r\n\r\n`log2` of 1K is about 10, and `log2` of 1G is about 30. It is up to you to decide whether a factor of 3 is significant enough to warrant creating another index. Creating an extra index for only 1K nodes should not take up much storage, so that should not be a concern. You may want to try it to see if it is worth it.",
          "link": "https://stackoverflow.com/questions/77076783/neo4j-multilabel-modes-and-query-performance/77077498#77077498",
          "title": "Neo4j multilabel modes and query performance"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 28,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77077498,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1694454660,
      "creation_date": 1694360142,
      "question_id": 77076783,
      "share_link": "https://stackoverflow.com/q/77076783",
      "body_markdown": "Let&#39;s say I have a Decision base node with a defined ID:\r\n\r\n    @NodeEntity\r\n    public class Decision {\r\n    \r\n        @Id\r\n        @Index(unique = true)\r\n        private Long id;\r\n    \r\n    }\r\n\r\nI have defined a `UNIQUE INDEX on Decision.id`. \r\n\r\nAdditionally, I have two nodes derived from Decision:\r\n\r\n    @NodeEntity\r\n    public class Profile extends Decision {\r\n    }\r\n    \r\n    @NodeEntity\r\n    public class Notification extends Decision{\r\n    }\r\n\r\n\r\nLet&#39;s consider a scenario where I have `1000 Profiles` in my database and `1 billion Notifications`. Will querying Profiles by a Cypher query be significantly affected by the presence of 1 billion Notification nodes because they share the same common label &#39;Decision&#39;?\r\n\r\nShould I also add a UNIQUE INDEX on &#39;Profile.id&#39; and &#39;Notification.id,&#39; even if they inherit it from the &#39;Decision&#39; node?",
      "link": "https://stackoverflow.com/questions/77076783/neo4j-multilabel-modes-and-query-performance",
      "title": "Neo4j multilabel modes and query performance"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1694425449,
          "creation_date": 1694425449,
          "answer_id": 77080535,
          "question_id": 77071847,
          "share_link": "https://stackoverflow.com/a/77080535",
          "body_markdown": "You can&#39;t connect a real node with a virtual node using a real relationship (see [3rd paragraph in the docs][1]). \r\n\r\nBut you can connect it with a virtual relationship:\r\n\r\n```\r\nCALL apoc.create.vRelationship(virtual_start, &#39;VIRTUAL_START&#39;, {}, virtual_analysis)\r\nCALL apoc.create.vRelationship(virtual_analysis, &#39;VIRTUAL_END&#39;, {}, virtual_end)\r\n```\r\n\r\nFor more, check out the [docs on apoc.create.vRelationship][2].\r\n\r\n\r\n  [1]: https://neo4j.com/labs/apoc/4.4/virtual/\r\n  [2]: https://neo4j.com/labs/apoc/4.4/overview/apoc.create/apoc.create.vRelationship/",
          "link": "https://stackoverflow.com/questions/77071847/unable-to-load-node-4db8c4fa-error-when-i-using-call-apoc-create-vnode/77080535#77080535",
          "title": "Unable to load NODE 4:db8c4fa***.. error when i using CALL apoc.create.vNode"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 20800420,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp5G9FpOar6uCDtchJME9YJUtTaloHiqWujzLNOqfQ=k-s256",
        "display_name": "nan yoo",
        "link": "https://stackoverflow.com/users/20800420/nan-yoo"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77080535,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1694425449,
      "creation_date": 1694256119,
      "question_id": 77071847,
      "share_link": "https://stackoverflow.com/q/77071847",
      "body_markdown": "Here&#39;s a cypher that finds a pattern, creates a virtual node, and then creates a relationship with the real node.\r\n\r\n```\r\nMATCH (account:Account:Iam)-[:DATE]-&gt;(date:Date)-[:ACTED]-(start_log:Log)-[:ACTED*1..]-&gt;(end_log:Log)-[:DETECTED]-&gt;(rule:Rule)\r\nWHERE account.name = &#39;ar_hk&#39;\r\n\r\nWITH account, date, start_log, end_log, rule\r\n\r\nMATCH path=(start_log)-[:ACTED*]-&gt;(end_log)\r\n\r\nWITH account, date, start_log, end_log, rule, path\r\n\r\nWITH account, date, start_log, end_log, rule, path,\r\n     nodes(path) AS all_nodes\r\n\r\nWITH account, date, start_log, end_log, rule, path, all_nodes,\r\n     all_nodes[0] AS virtual_start,\r\n     all_nodes[-1] AS virtual_end\r\n\r\nWITH account, date, start_log, end_log, rule, virtual_start, virtual_end, length(path) AS path_length\r\n\r\nCALL apoc.create.vNode([&#39;Analysis&#39;], {path_length: path_length}) YIELD node AS virtual_analysis\r\n\r\nCREATE (virtual_start)-[:VIRTUAL_START]-&gt;(virtual_analysis)\r\nCREATE (virtual_analysis)-[:VIRTUAL_END]-&gt;(virtual_end)\r\n\r\nRETURN account, date, start_log, end_log, rule, virtual_analysis\r\n```\r\n\r\nThe error &#39;Unable to load NODE 4:db8c4fa9-255d-4df3-a0e1-0818e92d3b53:-2369&#39; occurs.\r\n\r\nHere is my second cypher :\r\n\r\n```\r\nMATCH (account:Account:Iam)-[:DATE]-&gt;(date:Date)-[:ACTED]-(start_log:Log)-[:ACTED*1..]-&gt;(end_log:Log)-[:DETECTED]-&gt;(rule:Rule)\r\nWHERE account.name = &#39;ar_hk&#39;\r\n\r\nWITH account, date, start_log, end_log, rule\r\n\r\nMATCH path=(start_log)-[:ACTED*]-&gt;(end_log)\r\n\r\nWITH account, date, start_log, end_log, rule, path\r\n\r\nWITH account, date, start_log, end_log, rule, path,\r\n     nodes(path) AS all_nodes\r\n\r\nWITH account, date, start_log, end_log, rule, path, all_nodes,\r\n     all_nodes[0] AS virtual_start,\r\n     all_nodes[-1] AS virtual_end\r\n\r\nCALL apoc.create.vNode([&#39;Analysis&#39;], {path_length: length(path)}) YIELD node as virtual_analysis\r\n\r\nWITH account, date, start_log, end_log, rule, virtual_start, virtual_analysis, virtual_end\r\n\r\nCREATE (virtual_start)-[:START]-&gt;(virtual_analysis)-[:END]-&gt;(virtual_end)\r\n\r\nRETURN account, date, start_log, end_log, rule, virtual_analysis\r\n```\r\n\r\nbut, The error &#39;Unable to load NODE 4:db8c4fa9-255d-4df3-a0e1-0818e92d3b53:-2369&#39; still occurs.\r\n\r\nWhat did I do wrong?\r\n\r\nSimilar questions have been created before, but I don&#39;t think there are any questions about virtual nodes and virtual relationships.",
      "link": "https://stackoverflow.com/questions/77071847/unable-to-load-node-4db8c4fa-error-when-i-using-call-apoc-create-vnode",
      "title": "Unable to load NODE 4:db8c4fa***.. error when i using CALL apoc.create.vNode"
    },
    {
      "tags": ["neo4j", "cypher", "neovis"],
      "comments": [
        {
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1694091763,
          "post_id": 77059791,
          "comment_id": 135847605,
          "link": "https://stackoverflow.com/questions/77059791/how-to-show-relationship-for-specific-node-in-cypher-neo4j-with-neovis-js#comment135847605_77059791"
        }
      ],
      "owner": {
        "reputation": 4080,
        "user_id": 2090784,
        "user_type": "registered",
        "accept_rate": 68,
        "profile_image": "https://i.stack.imgur.com/7dYKM.png?s=256&g=1",
        "display_name": "Yugesh",
        "link": "https://stackoverflow.com/users/2090784/yugesh"
      },
      "last_editor": {
        "reputation": 4080,
        "user_id": 2090784,
        "user_type": "registered",
        "accept_rate": 68,
        "profile_image": "https://i.stack.imgur.com/7dYKM.png?s=256&g=1",
        "display_name": "Yugesh",
        "link": "https://stackoverflow.com/users/2090784/yugesh"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 83,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1694094073,
      "creation_date": 1694091225,
      "last_edit_date": 1694094073,
      "question_id": 77059791,
      "share_link": "https://stackoverflow.com/q/77059791",
      "body_markdown": "Is there a way to get a relationships of specific node only in **neovis.js**. From the **Movie** sample limited the node to **2**. Now we have two movie nodes **The Matrix** and **The Matrix Reloaded**, want to show the relationship of the **The Matrix** node only, not for **The Matrix Reloaded**.\r\n\r\n    MATCH (n:Movie) WITH n limit 2 OPTIONAL MATCH (n:Movie{title:&#39;The Matrix&#39;})-[r]-(b) RETURN n,r,b\r\n\r\n**Expecting a relationship like this image.**\r\n\r\n[![Expected Result][1]][1]\r\n\r\n\r\nBut my query return relationship for both nodes.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lr3Jy.png\r\n  [2]: https://i.stack.imgur.com/X8rfQ.png\r\n\r\nHow to achive this in neovis.js?",
      "link": "https://stackoverflow.com/questions/77059791/how-to-show-relationship-for-specific-node-in-cypher-neo4j-with-neovis-js",
      "title": "How to show Relationship for specific node in cypher neo4j with neovis.js?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701976237,
          "creation_date": 1701976237,
          "answer_id": 77622570,
          "question_id": 77058102,
          "share_link": "https://stackoverflow.com/a/77622570",
          "body_markdown": "I would lean towards using something like `CALL apoc.cypher.run(rule.condition,{}) YIELD value as condition` for running and evaluating your condition. The issue with your current condition syntax is that it isn&#39;t valid Cypher.\r\n\r\nThen you could use something like `CALL apoc.do.when()` to run the action Cypher based on value of condition. However, this means you would need to re-select the condition data again because running a generic `create (a)-[:subClassOf]-&gt;(c)` will do this across the whole data set, rather than only where (a)--&gt;(b)--&gt;(c). So I&#39;d recommend updating the action Cypher to select the subset of data and create the new relationship.\r\n\r\nIt would look something like this:\r\n```\r\ncreate (a:Class {name:&#39;A&#39;})-[:subClassOf]-&gt;(b:Class {name:&#39;B&#39;}) \r\ncreate (b)-[:subClassOf]-&gt;(c:Class {name:&#39;C&#39;}) \r\ncreate (rule:Rule {name:&#39;Rule1&#39;,\r\n       condition:&#39;RETURN exists((:Class)-[:subClassOf]-&gt;(:Class)-[:subClassOf]-&gt;(:Class)) AS test&#39;, \r\n       action:&#39;MATCH (a:Class)-[:subClassOf]-&gt;(b:Class)-[:subClassOf]-&gt;(c:Class) MERGE (a)-[r:subClassOf]-&gt;(c)&#39;})\r\n\r\nMATCH (rule:Rule {name: &#39;Rule1&#39;})\r\nCALL apoc.cypher.run(rule.condition,{}) YIELD value\r\nWITH rule, value.test as condition\r\nCALL apoc.do.when(condition, &quot;CALL apoc.cypher.runSchema(rule.action,{}) YIELD value RETURN value&quot;, &quot;RETURN &#39;no action taken&#39;&quot;, {rule:rule}) YIELD value\r\nRETURN value;\r\n```",
          "link": "https://stackoverflow.com/questions/77058102/how-to-store-and-use-rules-as-string-in-neo4j-node-property/77622570#77622570",
          "title": "How to store and use rules as string in neo4j node property"
        }
      ],
      "owner": {
        "reputation": 117,
        "user_id": 16125604,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/919a451e942733612b2dcf082b18212c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "joylix",
        "link": "https://stackoverflow.com/users/16125604/joylix"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 68,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1701976237,
      "creation_date": 1694077271,
      "question_id": 77058102,
      "share_link": "https://stackoverflow.com/q/77058102",
      "body_markdown": "    create (a:Class {name:&#39;A&#39;})-[:subClassOf]-&gt;(b:Class {name:&#39;B&#39;}) \r\n    create (b)-[:subClassOf]-&gt;(c:Class {name:&#39;C&#39;}) \r\n    create (rule:Rule {name:&#39;Rule1&#39;,\r\n           condition:&#39;exists( (a:Class)-[:subClassOf]-&gt;(b:Class) ) AND exists(  (b:Class)-[:subClassOf]-&gt;(c:Class) )&#39;, \r\n           action:&#39;create (a)-[:subClassOf]-&gt;(c)&#39;})\r\n \r\n\r\n\r\nI try to save the rule data as a string in the node properties, not in the backend program, and then create a query, read the conditions in the rule, and if it returns true, execute the action, for example:\r\n    if exists any A-[:subClassOf]-&gt;B AND B-[:subClassOf]-&gt;C, then create A-[:subClassOf]-&gt;C.\r\n\r\nI wrote a query like follows:\r\n\r\n    MATCH (rule:Rule)\r\n    WHERE rule.name = &#39;Rule1&#39;\r\n    WITH rule, toBoolean(rule.condition) AS condition\r\n    WHERE condition\r\n    CALL apoc.cypher.run(rule.action) YIELD value\r\n    RETURN value\r\n    \r\nBut this query doesn&#39;t seem to return any results, how should I do it correctly?   Thanks for help!\r\n",
      "link": "https://stackoverflow.com/questions/77058102/how-to-store-and-use-rules-as-string-in-neo4j-node-property",
      "title": "How to store and use rules as string in neo4j node property"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1804,
                "user_id": 2092445,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/05e055707941d1ac4682581c874546b2?s=256&d=identicon&r=PG",
                "display_name": "Naxi",
                "link": "https://stackoverflow.com/users/2092445/naxi"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1694019959,
              "post_id": 77053626,
              "comment_id": 135837498,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77053626#comment135837498_77053626"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1694022776,
              "post_id": 77053626,
              "comment_id": 135838019,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77053626#comment135838019_77053626"
            },
            {
              "owner": {
                "reputation": 15053,
                "user_id": 18482310,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "nimrod serok",
                "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694023086,
              "post_id": 77053626,
              "comment_id": 135838074,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77053626#comment135838074_77053626"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "last_editor": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1694104178,
          "last_edit_date": 1694104178,
          "creation_date": 1694016177,
          "answer_id": 77053626,
          "question_id": 77053234,
          "share_link": "https://stackoverflow.com/a/77053626",
          "body_markdown": "One option is using `APOC`. One of the advantages is that it easily gives you only the &quot;end&quot; nodes that you want:\r\n```\r\nMATCH(n:Account{name:&#39;account.b&#39;})\r\nCALL apoc.path.subgraphAll(n, {\r\n    relationshipFilter:&quot;RESULTS_FROM&gt;|DEPENDS_ON&gt;&quot;,\r\n    labelFilter: &quot;&gt;Account&quot;\r\n})\r\nYIELD nodes\r\nRETURN nodes\r\n```\r\nreturns: \r\n```\r\n╒════════════════════════════════════════════════════════════════╕\r\n│nodes                                                           │\r\n╞════════════════════════════════════════════════════════════════╡\r\n│[(:Account {name: &quot;account.y&quot;}), (:Account {name: &quot;account.c&quot;})]│\r\n└────────────────────────────────────────────────────────────────┘\r\n```\r\n**EDIT:**\r\n`relationshipFilter` was changed from `&gt;` to `RESULTS_FROM&gt;|DEPENDS_ON&gt;` according to @cybersam&#39;s remark\r\n",
          "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77053626#77053626",
          "title": "How to write a cypher query which recursively traverses a graph in Neo4j to find all the nodes visited"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 15053,
                "user_id": 18482310,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "nimrod serok",
                "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694023632,
              "post_id": 77054255,
              "comment_id": 135838159,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77054255#comment135838159_77054255"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 15053,
                "user_id": 18482310,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "nimrod serok",
                "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1694024477,
              "post_id": 77054255,
              "comment_id": 135838290,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77054255#comment135838290_77054255"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 15053,
                "user_id": 18482310,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "nimrod serok",
                "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1694103920,
              "post_id": 77054255,
              "comment_id": 135850526,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77054255#comment135850526_77054255"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1694103865,
          "last_edit_date": 1694103865,
          "creation_date": 1694022955,
          "answer_id": 77054255,
          "question_id": 77053234,
          "share_link": "https://stackoverflow.com/a/77054255",
          "body_markdown": "You can just use a [variable-length relationship](https://neo4j.com/docs/cypher-manual/current/patterns/reference/#variable-length-relationships) to find all nodes that match the specified pattern (both `Calculation` and `Account` nodes):\r\n\r\n    MATCH (:Account {name: &#39;account.b&#39;})-[:RESULTS_FROM|DEPENDS_ON*]-&gt;(n)\r\n    RETURN n\r\n\r\nIf you only want `Account` nodes, use this instead:\r\n\r\n    MATCH (:Account {name: &#39;account.b&#39;})-[:RESULTS_FROM|DEPENDS_ON*]-&gt;(n:Account)\r\n    RETURN n",
          "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77054255#77054255",
          "title": "How to write a cypher query which recursively traverses a graph in Neo4j to find all the nodes visited"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1804,
                "user_id": 2092445,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/05e055707941d1ac4682581c874546b2?s=256&d=identicon&r=PG",
                "display_name": "Naxi",
                "link": "https://stackoverflow.com/users/2092445/naxi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694097668,
              "post_id": 77060539,
              "comment_id": 135849161,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77060539#comment135849161_77060539"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1804,
                "user_id": 2092445,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/05e055707941d1ac4682581c874546b2?s=256&d=identicon&r=PG",
                "display_name": "Naxi",
                "link": "https://stackoverflow.com/users/2092445/naxi"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1694097885,
              "post_id": 77060539,
              "comment_id": 135849231,
              "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77060539#comment135849231_77060539"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1694097672,
          "last_edit_date": 1694097672,
          "creation_date": 1694097167,
          "answer_id": 77060539,
          "question_id": 77053234,
          "share_link": "https://stackoverflow.com/a/77060539",
          "body_markdown": "You can be more specific about the pattern you&#39;re looking for by using a [quantified path pattern][1]:\r\n```\r\nMATCH (:Account {name:&#39;account.b&#39;}) \r\n      (()-[:RESULTS_FROM]-&gt;(:Calculation)-[:DEPENDS_ON]-&gt;(:Account))+ (n)\r\nRETURN collect(n)\r\n```\r\nBeing more specific with patterns generally means faster.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/patterns/reference/#quantified-path-patterns",
          "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find/77060539#77060539",
          "title": "How to write a cypher query which recursively traverses a graph in Neo4j to find all the nodes visited"
        }
      ],
      "owner": {
        "reputation": 1804,
        "user_id": 2092445,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/05e055707941d1ac4682581c874546b2?s=256&d=identicon&r=PG",
        "display_name": "Naxi",
        "link": "https://stackoverflow.com/users/2092445/naxi"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 74,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77053626,
      "answer_count": 3,
      "score": 2,
      "last_activity_date": 1694104178,
      "creation_date": 1694013093,
      "question_id": 77053234,
      "share_link": "https://stackoverflow.com/q/77053234",
      "body_markdown": "I have created a graph in neo4j community edition running in a docker container in my local using below cypher.\r\n\r\n    create (a:Account{name:&#39;account.a&#39;}),\r\n    (b:Account{name:&#39;account.b&#39;}),\r\n    (c:Account{name:&#39;account.c&#39;}),\r\n    (d:Account{name:&#39;account.d&#39;}),\r\n    (e:Account{name:&#39;account.e&#39;}),\r\n    (f:Account{name:&#39;account.f&#39;}),\r\n    (x:Account{name:&#39;account.x&#39;}),\r\n    (y:Account{name:&#39;account.y&#39;}),\r\n    (cas:Calculation{name:&#39;account.a:simple_interest&#39;}),\r\n    (cac:Calculation{name:&#39;account.a:compound_interest&#39;}),\r\n    (cbs:Calculation{name:&#39;account.b:simple_interest&#39;}),\r\n    (cbc:Calculation{name:&#39;account.b:compound_interest&#39;}),\r\n    (cxs:Calculation{name:&#39;account.x:simple_interest&#39;}),\r\n    (cxc:Calculation{name:&#39;account.x:compound_interest&#39;}),\r\n    (a)-[:RESULTS_FROM]-&gt;(cas),\r\n    (a)-[:RESULTS_FROM]-&gt;(cac),\r\n    (b)-[:RESULTS_FROM]-&gt;(cbs),\r\n    (b)-[:RESULTS_FROM]-&gt;(cbc),\r\n    (x)-[:RESULTS_FROM]-&gt;(cxs),\r\n    (x)-[:RESULTS_FROM]-&gt;(cxc),\r\n    (cas)-[:DEPENDS_ON]-&gt;(d),\r\n    (cas)-[:DEPENDS_ON]-&gt;(e),\r\n    (cbs)-[:DEPENDS_ON]-&gt;(c),\r\n    (cbc)-[:DEPENDS_ON]-&gt;(y),\r\n    (cac)-[:DEPENDS_ON]-&gt;(f),\r\n    (cac)-[:DEPENDS_ON]-&gt;(d),\r\n    (cxs)-[:DEPENDS_ON]-&gt;(d),\r\n    (cxc)-[:DEPENDS_ON]-&gt;(d)\r\n\r\nThere are two kinds of nodes in the graph - **Account** and **Calculation**.\r\n**Account** node has a &quot;RESULTS_FROM&quot; relation to **Calculation** node with the same name + interest type. A **Calculation** node has a &quot;DEPENDS_ON&quot; relation with &#39;n&#39; number of other **Account** nodes.\r\n\r\nBelow is how the graph looks like.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rtlY4.png\r\n\r\nI need to write a cypher which starts at an Account node and finds all it&#39;s dependencies in the entire graph. A dependency in this context is the Calculation node(s) it &quot;RESULTS_FROM&quot; and the Account nodes that those Calculation node(s) &quot;DEPENDS_ON&quot;. It should do this recursively in all direction until it finds an Account node which doesn&#39;t have any &quot;RESULTS_FROM&quot; relation to any other Calculation nodes.\r\n\r\nIn the snapshot, if I start at &quot;account.b&quot;, it will follow both &quot;RESULTS_FROM&quot; relation (via blue Calculation nodes) which then point to &quot;account.y&quot; and &quot;account.c&quot; via &quot;DEPENDS_ON&quot;.\r\n\r\nSo the output should be - account.y and account.c\r\n\r\nSimilarly, the output for &quot;account.x&quot; should be &quot;account.d&quot;. We stop when any Account doesn&#39;t &quot;RESULT_FROM&quot; any Calculation.\r\n\r\nI tried different things like below but I am not sure what&#39;s the ideal way to do this.\r\n\r\n    MATCH (startNode:YourLabel {name: &#39;account.a&#39;})\r\n    CALL {\r\n      WITH [startNode] AS nodes, [] AS rels\r\n      UNWIND nodes AS node\r\n      FOREACH(ignoreMe IN [1] |\r\n        MATCH (node)-[r]-&gt;(relatedNode)\r\n        WHERE NOT relatedNode IN nodes\r\n        SET nodes = nodes + relatedNode\r\n        SET rels = rels + r\r\n      )\r\n    }\r\n    RETURN DISTINCT nodes AS reachableNodes\r\n\r\nps- the data here is just a sample and in reality, the graph will have 100s of Account and Calculation nodes. The Relations between the nodes remain the same though. And no Calculation node will depend on a Account node with the same name + interest_type",
      "link": "https://stackoverflow.com/questions/77053234/how-to-write-a-cypher-query-which-recursively-traverses-a-graph-in-neo4j-to-find",
      "title": "How to write a cypher query which recursively traverses a graph in Neo4j to find all the nodes visited"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1694010120,
          "post_id": 77050646,
          "comment_id": 135835309,
          "link": "https://stackoverflow.com/questions/77050646/how-to-store-a-condition-as-a-string-in-node-property-or-relationship-property-a#comment135835309_77050646"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 117,
                "user_id": 16125604,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/919a451e942733612b2dcf082b18212c?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "joylix",
                "link": "https://stackoverflow.com/users/16125604/joylix"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694052154,
              "post_id": 77053916,
              "comment_id": 135841615,
              "link": "https://stackoverflow.com/questions/77050646/how-to-store-a-condition-as-a-string-in-node-property-or-relationship-property-a/77053916#comment135841615_77053916"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1694031851,
          "last_edit_date": 1694031851,
          "creation_date": 1694019043,
          "answer_id": 77053916,
          "question_id": 77050646,
          "share_link": "https://stackoverflow.com/a/77053916",
          "body_markdown": "The following query may work for you. It assumes that you first change your data model to replace the very complex relationship pattern `[:hasOrgan {condition:&#39;Exists (({x})-[:isInstanceOf]-&gt;(bird))&#39;}]` with the much simpler `[:hasOrgan {ifClass: &#39;bird&#39;}]`.\r\n\r\n    MATCH (cls:Class)-[hasOrgan:hasOrgan]-&gt;(organ:organ)\r\n    WHERE hasOrgan.ifClass IS NOT NULL\r\n    MATCH p=(inst:instance)-[:isInstanceOf]-&gt;()-[:isSubClassOf*0..]-&gt;(cls)-[:isSubClassOf*0..]-&gt;(clsN)\r\n    WHERE\r\n      NOT (clsN)-[:isSubClassOf]-&gt;() AND\r\n      ANY(c IN TAIL(NODES(p)) WHERE hasOrgan.ifClass = c.name)\r\n    MERGE (inst)-[:hasOrgan]-&gt;(organ)\r\n\r\nThe query does this, in order:\r\n1. Find each `hasOrgan` relationship having the `ifClass` property and the associated class `cls` and organ `organ`.\r\n2. Find all the classes of each `instance` that is (directly or indirectly) in the class `cls`, and filter out an instance if it does not belong to the class specified by `hasOrgan.ifClass`.\r\n3. Use `MERGE` to create the `hasOrgan` relationship, if it does not already exist.",
          "link": "https://stackoverflow.com/questions/77050646/how-to-store-a-condition-as-a-string-in-node-property-or-relationship-property-a/77053916#77053916",
          "title": "How to store a condition as a string in node property or relationship property and use it in a query?"
        }
      ],
      "owner": {
        "reputation": 117,
        "user_id": 16125604,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/919a451e942733612b2dcf082b18212c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "joylix",
        "link": "https://stackoverflow.com/users/16125604/joylix"
      },
      "last_editor": {
        "reputation": 117,
        "user_id": 16125604,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/919a451e942733612b2dcf082b18212c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "joylix",
        "link": "https://stackoverflow.com/users/16125604/joylix"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77053916,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1694031851,
      "creation_date": 1693992225,
      "last_edit_date": 1693993155,
      "question_id": 77050646,
      "share_link": "https://stackoverflow.com/q/77050646",
      "body_markdown": "    create (bird:Class {name:&#39;bird&#39;})-[:isSubClassOf]-&gt;(animal:Class {name:&#39;animal&#39;})\r\n    create (animal)-[:hasOrgan {condition:&#39;Exists (({x})-[:isInstanceOf]-&gt;(bird))&#39;}]-&gt;(wing:organ {name:&#39;wing&#39;})\r\n    create (x:bird:instance {name:&#39;pigeon_1&#39;})-[:isInstanceOf]-&gt;(bird)\r\n\r\nHow to create a query to read the value of the condition expression and decide whether to create (pigeon_1)-[:hasOrgan]-&gt;(:wing) based on its value\r\nMATCH (bird:Class {name:&#39;bird&#39;})-[:isSubClassOf]-&gt;(animal:Class {name:&#39;animal&#39;})\r\n\r\nI created the following query but got an error, how should I fix it?\r\n\r\n    MATCH (animal)-[hasOrgan:hasOrgan]-&gt;(wing:organ)\r\n    WHERE hasOrgan.condition IS NOT NULL\r\n    WITH x, hasOrgan, wing, hasOrgan.condition AS condition\r\n    CALL apoc.cypher.doIt(&#39;RETURN &#39; + condition + &#39; AS value&#39;, {x: x, wing: wing})\r\n    YIELD value\r\n    WITH x, hasOrgan, wing, value AS conditionValue\r\n    WHERE conditionValue\r\n    CREATE (x)-[:hasOrgan]-&gt;(wing)",
      "link": "https://stackoverflow.com/questions/77050646/how-to-store-a-condition-as-a-string-in-node-property-or-relationship-property-a",
      "title": "How to store a condition as a string in node property or relationship property and use it in a query?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc", "neodash"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693930643,
              "post_id": 77045395,
              "comment_id": 135823298,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77045395#comment135823298_77045395"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693953266,
              "post_id": 77045395,
              "comment_id": 135826965,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77045395#comment135826965_77045395"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693999441,
              "post_id": 77045395,
              "comment_id": 135832797,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77045395#comment135832797_77045395"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1693999278,
          "last_edit_date": 1693999278,
          "creation_date": 1693924049,
          "answer_id": 77045395,
          "question_id": 77044901,
          "share_link": "https://stackoverflow.com/a/77045395",
          "body_markdown": "You can use the `COUNT` subquery (available since Neo4j 5.3) to inline the count of neighbours to the `SET` clause.\r\n\r\nThis example is equivalent to the initial query, minus returning the original graph:\r\n```\r\nMATCH (n)-[r]-&gt;(c:!_event)\r\nWITH collect(DISTINCT n) + collect(DISTINCT c) AS ncs, collect(r) AS rs\r\nUNWIND ncs AS nc\r\nSET nc.counter = COUNT { (nc)-[r WHERE r IN rs]-() }\r\n```\r\nThe `COUNT` subquery does mean DB hits. As an alternative, you can avoid subsequent DB hits by just counting the relationships in the first `MATCH`:\r\n```\r\nMATCH (n:A)--&gt;(c:!_event)\r\nWITH collect(n) + collect(c) AS ncs\r\nUNWIND ncs AS nc\r\nWITH nc, count(*) AS counter\r\nSET nc.counter = counter\r\n``` ",
          "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77045395#77045395",
          "title": "Concise way to Add virtual property with neighbour count to each result node in Cypher"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693937710,
              "post_id": 77046822,
              "comment_id": 135824653,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#comment135824653_77046822"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693937768,
              "post_id": 77046822,
              "comment_id": 135824660,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#comment135824660_77046822"
            },
            {
              "owner": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693937991,
              "post_id": 77046822,
              "comment_id": 135824690,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#comment135824690_77046822"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693938181,
              "post_id": 77046822,
              "comment_id": 135824725,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#comment135824725_77046822"
            },
            {
              "owner": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693938780,
              "post_id": 77046822,
              "comment_id": 135824833,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#comment135824833_77046822"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 817,
                "user_id": 2231299,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
                "display_name": "Myoch",
                "link": "https://stackoverflow.com/users/2231299/myoch"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693940267,
              "post_id": 77046822,
              "comment_id": 135825070,
              "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#comment135825070_77046822"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1693937570,
          "last_edit_date": 1693937570,
          "creation_date": 1693937214,
          "answer_id": 77046822,
          "question_id": 77044901,
          "share_link": "https://stackoverflow.com/a/77046822",
          "body_markdown": "The query below only needs one `MATCH`, and does not need APOC. The [CALL subqueries](https://neo4j.com/docs/cypher-manual/current/clauses/call-subquery/) do not return anything, and therefore leave the single outer row as-is. \r\n\r\n    .\r\n    .\r\n    .\r\n    MATCH (n)-[rel]-&gt;(:!_event) //n was defined earlier, and here we exclude _events\r\n    WITH COLLECT(rel) as rels\r\n    CALL {\r\n      WITH rels\r\n      UNWIND rels AS r\r\n      WITH STARTNODE(r) AS n, COUNT(*) AS countC\r\n      SET n.counter = countC\r\n    }\r\n    CALL {\r\n      WITH rels\r\n      UNWIND rels AS r\r\n      WITH ENDNODE(r) AS c, COUNT(*) AS countN\r\n      SET c.counter = countN\r\n    }\r\n    UNWIND rels AS r\r\n    RETURN STARTNODE(r) AS n, r, ENDNODE(r) AS c",
          "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in/77046822#77046822",
          "title": "Concise way to Add virtual property with neighbour count to each result node in Cypher"
        }
      ],
      "owner": {
        "reputation": 817,
        "user_id": 2231299,
        "user_type": "registered",
        "accept_rate": 45,
        "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
        "display_name": "Myoch",
        "link": "https://stackoverflow.com/users/2231299/myoch"
      },
      "last_editor": {
        "reputation": 817,
        "user_id": 2231299,
        "user_type": "registered",
        "accept_rate": 45,
        "profile_image": "https://www.gravatar.com/avatar/a3fabd37bde33bac5732c75cb1fcf8ba?s=256&d=identicon&r=PG",
        "display_name": "Myoch",
        "link": "https://stackoverflow.com/users/2231299/myoch"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77046822,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1693999278,
      "creation_date": 1693920338,
      "last_edit_date": 1693930808,
      "question_id": 77044901,
      "share_link": "https://stackoverflow.com/q/77044901",
      "body_markdown": "I&#39;m using NeoDash, and I want to generate a graph report where each node size is weighted by the number of neighbors.\r\n\r\nSo this count must become a property of the node to be analyzed by NeoDash properly.\r\n\r\nNow, after 4 hours, I finally succeeded with the following query, but I&#39;m pretty sure there should be a more elegant and concise way to do the same, right?\r\n\r\n```\r\n  MATCH path=(n)-[r]-&gt;(c) //n is already from a subset, and here we exclude _events\r\n    WHERE NOT c:_event\r\n\r\nWITH collect(distinct n) as listN, collect(distinct c) as listC\r\n  UNWIND listN as n\r\n    MATCH (n)-[r]-&gt;(c) WHERE c in listC\r\n\r\nWITH listN, listC, n, count(c) as countC\r\n  SET n.counter=countC\r\n\r\nWITH collect(n) as listN, listC\r\n  UNWIND listC as c\r\n    MATCH (n)-[r]-&gt;(c) WHERE n in listN\r\n\r\nWITH c, count(n) as countN, listN\r\n  SET c.counter=countN\r\n\r\nWITH collect(c) as listC, listN\r\n  MATCH (n)-[r]-&gt;(c)\r\n    WHERE n in listN \r\n      and c in listC\r\n\r\nRETURN n,r,c\r\n```\r\n\r\nor is there an apoc shortcut for that?\r\n",
      "link": "https://stackoverflow.com/questions/77044901/concise-way-to-add-virtual-property-with-neighbour-count-to-each-result-node-in",
      "title": "Concise way to Add virtual property with neighbour count to each result node in Cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1693892051,
          "post_id": 77040693,
          "comment_id": 135815352,
          "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships#comment135815352_77040693"
        },
        {
          "owner": {
            "reputation": 6333,
            "user_id": 4756173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
            "display_name": "Philippe Fanaro",
            "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
          },
          "reply_to_user": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1693912272,
          "post_id": 77040693,
          "comment_id": 135819008,
          "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships#comment135819008_77040693"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1693934126,
          "post_id": 77040693,
          "comment_id": 135824008,
          "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships#comment135824008_77040693"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693913962,
              "post_id": 77042079,
              "comment_id": 135819344,
              "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships/77042079#comment135819344_77042079"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693914117,
              "post_id": 77042079,
              "comment_id": 135819380,
              "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships/77042079#comment135819380_77042079"
            },
            {
              "owner": {
                "reputation": 176,
                "user_id": 21624328,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
                "display_name": "Christoffer Bergman",
                "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1693922138,
              "post_id": 77042079,
              "comment_id": 135821288,
              "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships/77042079#comment135821288_77042079"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "last_editor": {
            "reputation": 6333,
            "user_id": 4756173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
            "display_name": "Philippe Fanaro",
            "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1693913815,
          "last_edit_date": 1693913815,
          "creation_date": 1693894385,
          "answer_id": 77042079,
          "question_id": 77040693,
          "share_link": "https://stackoverflow.com/a/77042079",
          "body_markdown": "Not sure exactly what you want to query and what you want the result to be. But if you want to do something similar to `apoc.refactor.collapseNode()` but as a virtual path instead of modifying the graph then maybe something like this could work (this query is based on the nodes and relationships you created in your example above with John Doe and Philippe Fanaro and creates a path from the &quot;Designing&quot;-book to the &quot;System&quot;-book with a virtual relationship called &quot;:CONNECTION&quot;)?\r\n\r\n```cypher\r\nMATCH (n1)-[:CONNECTION_ORIGIN]-&gt;(r)-[:CONNECTION_DESTINATION]-&gt;(n2)\r\n\r\nWITH n1, apoc.create.vRelationship(n1, &quot;CONNECTION&quot;, {}, n2) AS rel\r\n\r\nRETURN apoc.path.create(n1, [rel])\r\n```\r\n\r\nOr, while adding the connection properties into the collapsed relationship and also returning the users:\r\n\r\n```cypher\r\nMATCH (n1:Item)\r\n       -[:CONNECTION_ORIGIN]\r\n      -&gt;(r:Connection)\r\n       -[:CONNECTION_DESTINATION]\r\n      -&gt;(n2:Item),\r\n      (r)-[:CONNECTED_BY]-(u:User)\r\n\r\nWITH u, \r\n     n1, \r\n     apoc.create.vRelationship(\r\n       n1, \r\n       &quot;CONNECTION&quot;, \r\n       apoc.map.merge(\r\n         properties(r), \r\n         { connected_by: u.id }\r\n       ), \r\n       n2\r\n     ) AS rel\r\n\r\nRETURN u, apoc.path.create(n1, [rel])\r\n```\r\n\r\nWhich yields the following:\r\n\r\n[![results][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W986q.png",
          "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships/77042079#77042079",
          "title": "Query for Collapsing Node in Path with Multiple Relationships"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 99,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77042079,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1693913815,
      "creation_date": 1693862940,
      "last_edit_date": 1693912222,
      "question_id": 77040693,
      "share_link": "https://stackoverflow.com/q/77040693",
      "body_markdown": "In my DB, my connections between item nodes are done through a three-way node-connection, like the one highlighted below. I chose it this way because I don&#39;t think there&#39;s a way to do a three-way arrow or relationship.\r\n\r\n[![example graph][1]][1]\r\n\r\nAnyways, I don&#39;t think this modeling is a problem in itself. But I would like to query this graph in a way that I ditch the `CONNECTED_BY` relationship and collapse the connection path (e.g. the higlighted node in the picture) down to a simple relationship. How do I do it with Cypher in Neo4j?\r\n\r\nI know there&#39;s the [`apoc.refactor.collapseNode` procedure](https://neo4j.com/labs/apoc/4.4/graph-updates/graph-refactoring/collapse-node-to-relationship/), but, as far as I know, it actually mutates the database? Is there a way to use solely as a query? Not to mention that, in my case, I would have to omit the other relationships on the collapsed node somehow.\r\n\r\nHere&#39;s an example of how to reproduce what I have:\r\n\r\n```cypher\r\n// Users\r\n\r\n// #1\r\nCREATE (:User{name: &quot;philippe_fanaro&quot;});\r\nCREATE (:User{name: &quot;john_doe&quot;});\r\n\r\n// Items\r\n\r\n// #1\r\nMATCH  (u:User{name: &quot;john_doe&quot;})\r\nCREATE (u)-[:CREATED]-&gt;(:Item{title: &quot;Designing Data-Intensive Applications&quot;});\r\n\r\n// #2\r\nMATCH  (u:User{name: &quot;philippe_fanaro&quot;})\r\nCREATE (u)-[:CREATED]-&gt;(:Item{title: &quot;System Design Interview – An insider&#39;s guide&quot;});\r\n\r\n// Connections\r\n\r\n// #1\r\nMATCH  (i1:Item), (i2:Item), (u:User{name: &quot;philippe_fanaro&quot;})\r\nWHERE  i1.title CONTAINS &quot;Designing&quot;\r\n  AND  i2.title CONTAINS &quot;System&quot;\r\nCREATE (i1)- [:CONNECTION_ORIGIN]\r\n           -&gt;(c:Connection{title: &quot;Relation&quot;})\r\n           - [:CONNECTION_DESTINATION]-&gt;(i2),\r\n       (c)-[:CONNECTED_BY]-&gt;(u);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DSVuv.png\r\n",
      "link": "https://stackoverflow.com/questions/77040693/query-for-collapsing-node-in-path-with-multiple-relationships",
      "title": "Query for Collapsing Node in Path with Multiple Relationships"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1693581940,
          "post_id": 77022572,
          "comment_id": 135784543,
          "link": "https://stackoverflow.com/questions/77022572/security-of-json-in-neo4j-array-property#comment135784543_77022572"
        },
        {
          "owner": {
            "reputation": 3996,
            "user_id": 3897214,
            "user_type": "registered",
            "accept_rate": 56,
            "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Antony",
            "link": "https://stackoverflow.com/users/3897214/antony"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1693582954,
          "post_id": 77022572,
          "comment_id": 135784775,
          "link": "https://stackoverflow.com/questions/77022572/security-of-json-in-neo4j-array-property#comment135784775_77022572"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1693588152,
          "post_id": 77022572,
          "comment_id": 135785640,
          "link": "https://stackoverflow.com/questions/77022572/security-of-json-in-neo4j-array-property#comment135785640_77022572"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1693593771,
          "last_edit_date": 1693593771,
          "creation_date": 1693587799,
          "answer_id": 77024890,
          "question_id": 77022572,
          "share_link": "https://stackoverflow.com/a/77024890",
          "body_markdown": "You cannot expect Neo4j to magically protect you somehow if some random string is not legit (whatever that happens to mean, to you).\r\n\r\nIf you want to limit potential damage, you have to parse the string and verify that it is indeed a JSON object (instead of, say, executable code) with the expected properties and that their values have the right format.\r\n\r\n*Aside: If you need to do DB queries on the data in the contacts list, you should not store the contact info in serialized strings.*\r\n\r\n#### Sample query\r\n\r\nHere is a sample query (where `$cId` and `$contacts` are parameters):\r\n\r\n    MATCH (company:Companies)\r\n    WHERE company.CompanyID = $cId\r\n    UNWIND $contacts AS contact\r\n    WITH apoc.convert.fromJsonMap(contact) AS c\r\n    WITH c, TOINTEGER(c.Main) AS intMain\r\n    WHERE\r\n      c.Name IS NOT NULL AND c.Email IS NOT NULL AND\r\n      c.Email =~ &quot;^([a-zA-Z0-9_\\\\-\\\\.]+)@([a-zA-Z0-9_\\\\-\\\\.]+)\\\\.([a-zA-Z]{2,5})$&quot;\r\n    WITH c, COLLECT(\r\n      apoc.convert.toJson(CASE WHEN intMain IS NULL\r\n        THEN c{.Name, .Email}\r\n        ELSE c{.Name, .Email, .Main} END)) AS cleanContacts\r\n    SET c.Contacts = cleanContacts\r\n\r\nThis query only stores contacts:\r\n - That have both the `Name` and `Email` properties.\r\n - Where the `Email` value has the expected format (you can tweak the regular expression).\r\n\r\nAnd, if there is a `Main` property, it is used only if its value can be converted to an integer.\r\n\r\nAll other properties are dropped.\r\n\r\nIt stores a new contacts array that contains only validated (stringified JSON) data. The query will fail with an error if `apoc.convert.fromJsonMap` cannot parse any strings in the `$contacts` list. ",
          "link": "https://stackoverflow.com/questions/77022572/security-of-json-in-neo4j-array-property/77024890#77024890",
          "title": "Security of JSON in Neo4j array property"
        }
      ],
      "owner": {
        "reputation": 3996,
        "user_id": 3897214,
        "user_type": "registered",
        "accept_rate": 56,
        "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Antony",
        "link": "https://stackoverflow.com/users/3897214/antony"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1693593771,
      "creation_date": 1693566269,
      "question_id": 77022572,
      "share_link": "https://stackoverflow.com/q/77022572",
      "body_markdown": "I have code that successfully does the following:\r\n\r\n\tMATCH (c:Companies) WHERE c.CompanyID = &quot;1234&quot; SET c.Contacts = [&#39;{&quot;Name&quot;:&quot;Test&quot;,&quot;Email&quot;:&quot;t1@test.com&quot;,&quot;Main&quot;:&quot;0&quot;}&#39;,&#39;{&quot;Name&quot;:&quot;Test 2&quot;,&quot;Email&quot;:&quot;t2@test.com&quot;}&#39;]\r\n\r\nThis works perfectly fine. My concern however is over how can I secure the values of the Array from being hacked/injected?\r\n\r\nThe typical response would be to use parameters such as:\r\n\r\n\tMATCH (c:Companies) WHERE c.CompanyID = &quot;1234&quot; SET c.Contacts = [&#39;$Element1&#39;,&#39;$Element2&#39;]\r\n\r\nHowever this would only replace the values with the JSON I&#39;ve already received from the user. Is there any way *apart from* sanitising the input myself to secure this through Neo4j? Would sub-parameters be possible::\r\n\r\n\tMATCH (c:Companies) WHERE c.CompanyID = &quot;1234&quot; SET c.Contacts = [&#39;$Element1&#39;,&#39;$Element2&#39;]\r\n\t&#39;Element1&#39;\t=&gt; &#39;{&quot;Name&quot;:&quot;$Name1&quot;,&quot;Email&quot;:&quot;$Email1&quot;,&quot;Main&quot;:&quot;0/1&quot;}&#39;\r\n\r\nI just want to make sure I&#39;m on the right track and secure.\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77022572/security-of-json-in-neo4j-array-property",
      "title": "Security of JSON in Neo4j array property"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 374,
                "user_id": 4985560,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/1ed8dbb96258d40daeedb4580ccd34f1?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nithin A",
                "link": "https://stackoverflow.com/users/4985560/nithin-a"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693473985,
              "post_id": 77010562,
              "comment_id": 135766869,
              "link": "https://stackoverflow.com/questions/77007909/neo4j-cypher-query-optional-match-with-multiple-case-when-then/77010562#comment135766869_77010562"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 374,
                "user_id": 4985560,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/1ed8dbb96258d40daeedb4580ccd34f1?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nithin A",
                "link": "https://stackoverflow.com/users/4985560/nithin-a"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693493674,
              "post_id": 77010562,
              "comment_id": 135771200,
              "link": "https://stackoverflow.com/questions/77007909/neo4j-cypher-query-optional-match-with-multiple-case-when-then/77010562#comment135771200_77010562"
            },
            {
              "owner": {
                "reputation": 374,
                "user_id": 4985560,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/1ed8dbb96258d40daeedb4580ccd34f1?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nithin A",
                "link": "https://stackoverflow.com/users/4985560/nithin-a"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693536734,
              "post_id": 77010562,
              "comment_id": 135777276,
              "link": "https://stackoverflow.com/questions/77007909/neo4j-cypher-query-optional-match-with-multiple-case-when-then/77010562#comment135777276_77010562"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 374,
                "user_id": 4985560,
                "user_type": "registered",
                "accept_rate": 45,
                "profile_image": "https://www.gravatar.com/avatar/1ed8dbb96258d40daeedb4580ccd34f1?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Nithin A",
                "link": "https://stackoverflow.com/users/4985560/nithin-a"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693541993,
              "post_id": 77010562,
              "comment_id": 135777578,
              "link": "https://stackoverflow.com/questions/77007909/neo4j-cypher-query-optional-match-with-multiple-case-when-then/77010562#comment135777578_77010562"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1693421194,
          "last_edit_date": 1693421194,
          "creation_date": 1693419313,
          "answer_id": 77010562,
          "question_id": 77007909,
          "share_link": "https://stackoverflow.com/a/77010562",
          "body_markdown": "There are several issues with your code. Here are some major ones:\r\n\r\n 1. Your first `WITH` does not specify `parentNode`, so the second `OPTIONAL MATCH` has to find all possible matching nodes instead of re-using the `parentNode` found earlier. This is obviously bad for your results and slows down the query.\r\n 2. Each `MATCH` clause (whether `OPTIONAL` or not) will cause a multiplication in the number of working rows unless you do something to prevent that (like doing an aggregation in between `MATCH` clauses). For example, if you already have 5 rows and a `MATCH` generates 10 results, then you end up with 50 rows. This will obviously greatly skew the eventual sum.\r\n\r\nHere is a query that should work better (and it also addresses some other inefficiencies):\r\n\r\n    MATCH (:Type1 {id: &#39;1234&#39;})-[:REL_W]-&gt;(:Type2)&lt;-[:REL_P]-(t2:Type2)\r\n    CALL {\r\n      WITH t2\r\n      MATCH (t2:Type3)-[:REL_W]-&gt;(qnode:Type1:Static)\r\n      RETURN SUM(TOFLOAT(qnode.value)) AS qSum\r\n    }\r\n    CALL {\r\n      WITH t2\r\n      MATCH (t2:Type4)-[:REL_I]-(:Type2)&lt;-[:REL_W]-(lnode:Type1:Static)\r\n      RETURN SUM(TOFLOAT(lnode.value)) AS lSum\r\n    }\r\n    RETURN qSum + lSum AS weight\r\n\r\nAlso, you should should consider changing the stored `value` properties to floating point (instead of what I assume are strings). That will allow you to remove the `TOFLOAT`s and speed up your query.",
          "link": "https://stackoverflow.com/questions/77007909/neo4j-cypher-query-optional-match-with-multiple-case-when-then/77010562#77010562",
          "title": "Neo4j Cypher query Optional match with multiple CASE WHEN THEN"
        }
      ],
      "owner": {
        "reputation": 374,
        "user_id": 4985560,
        "user_type": "registered",
        "accept_rate": 45,
        "profile_image": "https://www.gravatar.com/avatar/1ed8dbb96258d40daeedb4580ccd34f1?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Nithin A",
        "link": "https://stackoverflow.com/users/4985560/nithin-a"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 78,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1693421194,
      "creation_date": 1693397417,
      "question_id": 77007909,
      "share_link": "https://stackoverflow.com/q/77007909",
      "body_markdown": "The scenario is to get the sum of values of the nodes matched using multiple optional matches and then the value is selected based on the matching case\r\n\r\n    MATCH (a:Type1 {id: &#39;1234&#39;})-[:REL_W]-&gt;(parentNode:Type2)\r\n    OPTIONAL MATCH (parentNode)&lt;-[:REL_P]-(:Type2:Type3)-[:REL_W]-&gt;(qnode:Type1)\r\n    WITH qnode AS qwt\r\n    OPTIONAL MATCH (parentNode)&lt;-[:REL_P]-(:Type2:Type4)-[:REL_I]-(:Type2)&lt;-[:REL_W]-(lnode:Type1)\r\n    WITH qwt, lnode AS lwt\r\n    WITH qwt, lwt,\r\n         CASE\r\n             WHEN qwt IS NOT NULL AND &#39;Static&#39; IN labels(qwt)\r\n             THEN toFloat(qwt.value)\r\n             WHEN lwt IS NOT NULL AND &#39;Static&#39; IN labels(lwt)\r\n             THEN toFloat(lwt.value)\r\n             ELSE 0\r\n         END AS childWeight\r\n    RETURN sum(childWeight) AS weight;\r\n\r\nThe problem with this code is always the second CASE is not executed. The optional match is retuning qwt and lwt nodes and then data is also correct. If we make the &#39;lwt&#39; case the first one then it is executing but &#39;qwt&#39; case will not execute. \r\n\r\n",
      "link": "https://stackoverflow.com/questions/77007909/neo4j-cypher-query-optional-match-with-multiple-case-when-then",
      "title": "Neo4j Cypher query Optional match with multiple CASE WHEN THEN"
    },
    {
      "tags": ["neo4j", "cypher", "database-migration", "apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 113,
            "user_id": 865766,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/25a4b09191477dd1b8c2529066adae77?s=256&d=identicon&r=PG",
            "display_name": "DeeperUnderstanding",
            "link": "https://stackoverflow.com/users/865766/deeperunderstanding"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1699437668,
          "post_id": 76983191,
          "comment_id": 136530281,
          "link": "https://stackoverflow.com/questions/76983191/neo4j-migration-from-5-5-0-to-5-11-0-failed-to-invoke-procedure-apoc-cypher-m#comment136530281_76983191"
        },
        {
          "owner": {
            "reputation": 24739,
            "user_id": 1219755,
            "user_type": "registered",
            "accept_rate": 84,
            "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
            "display_name": "alexanoid",
            "link": "https://stackoverflow.com/users/1219755/alexanoid"
          },
          "reply_to_user": {
            "reputation": 113,
            "user_id": 865766,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/25a4b09191477dd1b8c2529066adae77?s=256&d=identicon&r=PG",
            "display_name": "DeeperUnderstanding",
            "link": "https://stackoverflow.com/users/865766/deeperunderstanding"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699452662,
          "post_id": 76983191,
          "comment_id": 136533111,
          "link": "https://stackoverflow.com/questions/76983191/neo4j-migration-from-5-5-0-to-5-11-0-failed-to-invoke-procedure-apoc-cypher-m#comment136533111_76983191"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1693056641,
      "creation_date": 1693056641,
      "question_id": 76983191,
      "share_link": "https://stackoverflow.com/q/76983191",
      "body_markdown": "I&#39;m trying to migrate from Neo4j `5.5.0` to `5.11.0` (also tried 5.10.0)\r\n\r\nThe following query works fine on Neo4j `5.5.0`:\r\n\r\n    MATCH  ( childD:Vacancy )  WITH collect({`childD`: childD}) as childDDgRdgd  \r\n    CALL apoc.cypher.mapParallel2(&quot; WITH _.childD as childD \r\n    WHERE  ( coalesce(size(childD.employmentIds), 0) &lt;= 0  \r\n    OR  exists { MATCH (childD)-[:EMPLOYMENT_AS]-(req0:Requirable) \r\n    WHERE req0.id IN $reqParam0}  )  AND  ( coalesce(size(childD.locationIds), 0) &lt;= 0  \r\n    OR  exists { MATCH (childD)-[:LOCATED_IN]-(req1:Requirable) \r\n    WHERE req1.id IN $reqParam1}  )  AND  (childD.`status` = $status5)  \r\n    AND  (childD.`active` = $active4)  AND ( (childD.`hourlyRateUsd` &gt;= $hourlyRateUsd2)  \r\n    OR  (childD.`salaryUsd` &gt;= $salaryUsd3) ) \r\n    WITH childD RETURN childD  &quot;, {`reqParam1`:[6, 7], `reqParam0`:[26], `active4`:true, `salaryUsd3`:13088, `hourlyRateUsd2`:96, `status5`:&#39;APPROVED&#39;}, childDDgRdgd, 6, 100) YIELD value as value   \r\n    WITH value.childD as childD  \r\n    return childD\r\n\r\nBut fails on Neo4j `5.11.0` with:\r\n\r\n    Failed to invoke procedure `apoc.cypher.mapParallel2`: Caused by: java.lang.RuntimeException: Error polling, timeout of 10 seconds reached.\r\n\r\nI also tried to extend the timeout to 100, but with the same result.\r\n\r\nHas anything changed between Neo4j `5.5.0` and Neo4j `5.11.0`? Maybe some additional configurations are required or something like that?\r\n\r\nFor my tests, I&#39;m running Neo4j in Docker with:                           \r\n\r\n&lt;NEO4J_db_memory_transaction_total_max&gt;0&lt;/NEO4J_db_memory_transaction_total_max&gt;                               &lt;NEO4J_server_memory_pagecache_size&gt;2G&lt;/NEO4J_server_memory_pagecache_size&gt;                                 &lt;NEO4J_server_memory_heap_initial__size&gt;5G&lt;/NEO4J_server_memory_heap_initial__size&gt;                                     &lt;NEO4J_server_memory_heap_max__size&gt;5G&lt;/NEO4J_server_memory_heap_max__size&gt;\r\n\r\nPlease help, thanks!",
      "link": "https://stackoverflow.com/questions/76983191/neo4j-migration-from-5-5-0-to-5-11-0-failed-to-invoke-procedure-apoc-cypher-m",
      "title": "Neo4j migration from 5.5.0 to 5.11.0 - Failed to invoke procedure `apoc.cypher.mapParallel2`: Caused by:RuntimeException: Error polling, timeout"
    },
    {
      "tags": ["go", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1590,
                "user_id": 13461183,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GihfYoKl72lOc6xc_dGQd5FmsJJ5EDfDK1cTrW8BYI=k-s256",
                "display_name": "RemcoE33",
                "link": "https://stackoverflow.com/users/13461183/remcoe33"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692998038,
              "post_id": 76980193,
              "comment_id": 135706753,
              "link": "https://stackoverflow.com/questions/76979959/cypher-to-find-multiple-lowest-nodes/76980193#comment135706753_76980193"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1590,
                "user_id": 13461183,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GihfYoKl72lOc6xc_dGQd5FmsJJ5EDfDK1cTrW8BYI=k-s256",
                "display_name": "RemcoE33",
                "link": "https://stackoverflow.com/users/13461183/remcoe33"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1693008692,
              "post_id": 76980193,
              "comment_id": 135707742,
              "link": "https://stackoverflow.com/questions/76979959/cypher-to-find-multiple-lowest-nodes/76980193#comment135707742_76980193"
            },
            {
              "owner": {
                "reputation": 1590,
                "user_id": 13461183,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GihfYoKl72lOc6xc_dGQd5FmsJJ5EDfDK1cTrW8BYI=k-s256",
                "display_name": "RemcoE33",
                "link": "https://stackoverflow.com/users/13461183/remcoe33"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693046528,
              "post_id": 76980193,
              "comment_id": 135710132,
              "link": "https://stackoverflow.com/questions/76979959/cypher-to-find-multiple-lowest-nodes/76980193#comment135710132_76980193"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1692993452,
          "creation_date": 1692993452,
          "answer_id": 76980193,
          "question_id": 76979959,
          "share_link": "https://stackoverflow.com/a/76980193",
          "body_markdown": "You&#39;re basically looking at the following query : \r\n\r\n&gt; MATCH Categorie nodes where their id is in the given list of ids and those nodes shouldn&#39;t be the parent of any other Categorie\r\n\r\nBased on your model, you&#39;re looking at adding a predicate that Categorie nodes do not have an `INCOMING` relationship of type `CHILD_OF`\r\n\r\n```\r\nWITH [1,5,9,12] AS categoryIds\r\nMATCH (n:Categorie)\r\nWHERE n.id IN categoryIds\r\nAND NOT ()-[:CHILD_OF]-&gt;(n)\r\nRETURN n.id\r\n```",
          "link": "https://stackoverflow.com/questions/76979959/cypher-to-find-multiple-lowest-nodes/76980193#76980193",
          "title": "Cypher to find (multiple) &quot;lowest&quot; nodes"
        }
      ],
      "owner": {
        "reputation": 1590,
        "user_id": 13461183,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GihfYoKl72lOc6xc_dGQd5FmsJJ5EDfDK1cTrW8BYI=k-s256",
        "display_name": "RemcoE33",
        "link": "https://stackoverflow.com/users/13461183/remcoe33"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 45,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76980193,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1693008341,
      "creation_date": 1692990537,
      "question_id": 76979959,
      "share_link": "https://stackoverflow.com/q/76979959",
      "body_markdown": "**Case:**\r\n\r\nI&#39;ve nodes `Categories` that looks like below and i created a relation from category to parent.\r\n\r\n```cypher\r\nCREATE(p1:Categorie {\r\n  id: 2,\r\n  parent_id: 1,\r\n  name: &quot;Kids&quot;,\r\n  is_active: true ,\r\n  position: 1,\r\n  level: 1,\r\n})\r\nCREATE(c1:Categorie {\r\n  id: 5,\r\n  parent_id: 2,\r\n  name: &quot;Toys&quot;,\r\n  is_active: true ,\r\n  position: 1,\r\n  level: 2,\r\n})\r\n\r\n//New root category\r\nCREATE(p2:Categorie {\r\n  id: 9,\r\n  parent_id: 1,\r\n  name: &quot;Holiday&quot;,\r\n  is_active: true ,\r\n  position: 1,\r\n  level: 1,\r\n})\r\nCREATE(c2:Categorie {\r\n  id: 12,\r\n  parent_id: 9,\r\n  name: &quot;Water&quot;,\r\n  is_active: true ,\r\n  position: 1,\r\n  level: 2,\r\n})\r\n\r\n\r\nCREATE(c1)-[:CHILD_OF]-&gt;(p1)\r\nCREATE(c2)-[:CHILD_OF]-&gt;(p2)\r\n```\r\n\r\nThen I have products that hase an array of `categorie_ids` like this:\r\n\r\n```json\r\n{\r\n    &quot;sku&quot;: &quot;abc&quot;,\r\n    &quot;name&quot;: &quot;Electric boot&quot;,\r\n    &quot;categorie_ids&quot;: [ \r\n        1,\r\n        5,\r\n        9,\r\n        12\r\n    ]\r\n}\r\n```\r\n\r\nThe API gives all the ids back that the product is &quot;in&quot;. For me this so much clutter in all the relationships. This example is minimum but in reality this could be up to twenty relations per product.\r\n\r\n**Question/Problem:**\r\n\r\nI would like to create a relation to the lowest node(s) in the categories. In this case the product has two main categories and thus two bottom categories. So I would like to create a relation to id 12 and 5.\r\n\r\nI just can&#39;t wrap my head around the cypher query. Can someone shine some light on this?",
      "link": "https://stackoverflow.com/questions/76979959/cypher-to-find-multiple-lowest-nodes",
      "title": "Cypher to find (multiple) &quot;lowest&quot; nodes"
    },
    {
      "tags": ["neo4j", "cypher", "database-migration", "neo4j-apoc"],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "last_editor": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 68,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1692963236,
      "creation_date": 1692949125,
      "last_edit_date": 1692963236,
      "question_id": 76975204,
      "share_link": "https://stackoverflow.com/q/76975204",
      "body_markdown": "I&#39;m attempting to upgrade from `Neo4j 5.5.0` to Neo4j `5.10.0`, but currently my tests on this version are failing with the following error:\r\n\r\n    org.neo4j.driver.exceptions.DatabaseException: Access to record Node[79841,used=false,created=false,rel=-1,prop=-1,labels=Inline(0x0:[]),light,fixedRefs=false] went out of bounds of the page. The record size is 15 bytes, and the access was at offset 1875 bytes into page 146, and the pages have a capacity of 8192 bytes. The mapped store file in question is /data/databases/neo4j/neostore.nodestore.db\r\n\tat org.neo4j.driver.internal.util.Futures.blockingGet(Futures.java:110) ~[neo4j-java-driver-5.11.0.jar:5.11.0-ea56edc8c126b032c4a7dd8c4c571ec35419ca44]\r\n\tat org.neo4j.driver.internal.InternalResult.blockingGet(InternalResult.java:111) ~[neo4j-java-driver-5.11.0.jar:5.11.0-ea56edc8c126b032c4a7dd8c4c571ec35419ca44]\r\n\tat org.neo4j.driver.internal.InternalResult.list(InternalResult.java:87) ~[neo4j-java-driver-5.11.0.jar:5.11.0-ea56edc8c126b032c4a7dd8c4c571ec35419ca44]\r\n\tat org.neo4j.ogm.drivers.bolt.response.RestModelResponse.&lt;init&gt;(RestModelResponse.java:49) ~[neo4j-ogm-bolt-driver-4.0.6.jar:4.0.6]\r\n\tat org.neo4j.ogm.drivers.bolt.request.BoltRequest.execute(BoltRequest.java:169) ~[neo4j-ogm-bolt-driver-4.0.6.jar:4.0.6]\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.lambda$query$0(ExecuteQueriesDelegate.java:147) ~[neo4j-ogm-core-4.0.6.jar:4.0.6]\r\n\tat org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:600) ~[neo4j-ogm-core-4.0.6.jar:4.0.6]\r\n\tat org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:574) ~[neo4j-ogm-core-4.0.6.jar:4.0.6]\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.query(ExecuteQueriesDelegate.java:145) ~[neo4j-ogm-core-4.0.6.jar:4.0.6]\r\n\tat org.neo4j.ogm.session.Neo4jSession.query(Neo4jSession.java:445) ~[neo4j-ogm-core-4.0.6.jar:4.0.6]\r\n\r\nWhat may be wrong and how to fix/configure it? On `Neo4j 5.5.0` everything is working fine.\r\n\r\n**UPDATED**\r\n\r\nFound another issue - I&#39;m using the Neo4j Docker image with the docker-maven-plugin:\r\n\r\n    &lt;image&gt;\r\n        &lt;name&gt;neo4j:${neo4j.version}&lt;/name&gt;\r\n        &lt;alias&gt;neo4j&lt;/alias&gt;\r\n        &lt;run&gt;\r\n            &lt;ports&gt;\r\n                &lt;port&gt;${neo4j.http.port}:7474&lt;/port&gt;\r\n                &lt;port&gt;${neo4j.bolt.port}:7687&lt;/port&gt;\r\n            &lt;/ports&gt;\r\n            &lt;volumes&gt;\r\n                &lt;bind&gt;\r\n                    &lt;volume&gt;\r\n                        ${project.basedir}/../docs/graphaware/plugins/${neo4j.version}:/plugins\r\n                    &lt;/volume&gt;\r\n                &lt;/bind&gt;\r\n            &lt;/volumes&gt;\r\n            &lt;env&gt;\r\n                &lt;NEO4J_AUTH&gt;${neo4j.username}/${neo4j.password}&lt;/NEO4J_AUTH&gt;\r\n                &lt;NEO4J_db_memory_transaction_total_max&gt;0&lt;/NEO4J_db_memory_transaction_total_max&gt;\r\n                &lt;NEO4J_server_memory_pagecache_size&gt;2G&lt;/NEO4J_server_memory_pagecache_size&gt;\r\n                &lt;NEO4J_server_memory_heap_initial__size&gt;5G&lt;/NEO4J_server_memory_heap_initial__size&gt;\r\n                &lt;NEO4J_server_memory_heap_max__size&gt;5G&lt;/NEO4J_server_memory_heap_max__size&gt;\r\n    \r\n                &lt;NEO4J_dbms_security_procedures_unrestricted&gt;apoc.*&lt;/NEO4J_dbms_security_procedures_unrestricted&gt;\r\n            &lt;/env&gt;\r\n            &lt;wait&gt;\r\n                &lt;http&gt;\r\n                    &lt;url&gt;http://${docker.host.address}:${neo4j.http.port}/browser&lt;/url&gt;\r\n                &lt;/http&gt;\r\n                &lt;time&gt;1200000&lt;/time&gt;\r\n            &lt;/wait&gt;\r\n        &lt;/run&gt;\r\n    &lt;/image&gt;\r\n\r\n\r\nWhen I use Neo4j version `5.5.0`, the following query works fine:\r\n\r\n    MATCH  ( childD:Vacancy )  \r\n    WITH collect({`childD`: childD}) as childDDgRdgd  \r\n    CALL apoc.cypher.mapParallel2(&quot; \r\n    WITH _.childD as childD WHERE  (childD.`active` = $active0)  AND  (childD.`status` = $status1)  \r\n    WITH childD \r\n    RETURN childD  &quot;, {`status1`:&#39;APPROVED&#39;, `active0`:true}, childDDgRdgd, 6, 10) \r\n    YIELD value as value   \r\n    WITH value.childD as childD   \r\n    return childD\r\n\r\nHowever, when I switch the Neo4j version to `5.10.0` for the Docker plugin, the query fails with the following exception:\r\n\r\n    Failed to invoke procedure `apoc.cypher.mapParallel2`: Caused by: java.lang.RuntimeException: Error polling, timeout of 10 seconds reached.\r\n\r\nI also added it to the plugins directory:\r\n\r\n    apoc-5.10.0-extended.jar\r\n    apoc-5.10.1-core.jar\r\n\r\nWhat am I doing wrong?\r\n",
      "link": "https://stackoverflow.com/questions/76975204/neo4j-access-to-record-went-out-of-bounds-of-the-page-migration-neo4j-5-5-0-to",
      "title": "Neo4j Access to record went out of bounds of the page. Migration Neo4j 5.5.0 to 5.10.0"
    },
    {
      "tags": ["neo4j", "cypher", "pattern-matching", "shortest-path"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1692892898,
          "creation_date": 1692892898,
          "answer_id": 76971083,
          "question_id": 76967760,
          "share_link": "https://stackoverflow.com/a/76971083",
          "body_markdown": "There was [a somewhat related issue with the EXISTS subquery](https://github.com/neo4j/neo4j/issues/13098) in version 5.6 that was supposed to be fixed in Neo4j 5.11. And indeed, I tested the sample query provided by that issue in 5.11 and it did not generate any error. But that query did not involve the `shortestPath` function.\r\n\r\nHowever, your 2 queries, which seem reasonable to me, continue to cause the same errors in 5.11. The issue seem related to processing of the `shortestPath` function. If you replaced the first clause of each query with `MATCH (startNode:Node {id : 1})-[:Relationship*]-(endNode:Node {id : 2})`, the errors go away.\r\n\r\nYou should create a [new issue](https://github.com/neo4j/neo4j/issues/new/choose) for the `shortestPath` function, and use your 2 queries (or something simpler) as examples.",
          "link": "https://stackoverflow.com/questions/76967760/how-to-find-the-shortest-path-not-containing-a-pattern/76971083#76971083",
          "title": "How to find the shortest path not containing a pattern?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 22439757,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/4dddb8ac7fda99bf472588e762b55a7e?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "oneStoic",
            "link": "https://stackoverflow.com/users/22439757/onestoic"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1700133272,
          "creation_date": 1700133272,
          "answer_id": 77494339,
          "question_id": 76967760,
          "share_link": "https://stackoverflow.com/a/77494339",
          "body_markdown": "After explaining [the problem on the Neo4j GitHub](https://github.com/neo4j/neo4j/issues/13286), the Neo4j team addressed this bug and declared that it has been **fixed in the 5.15 release.** I have not personally verified nor tested this.",
          "link": "https://stackoverflow.com/questions/76967760/how-to-find-the-shortest-path-not-containing-a-pattern/77494339#77494339",
          "title": "How to find the shortest path not containing a pattern?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22439757,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4dddb8ac7fda99bf472588e762b55a7e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "oneStoic",
        "link": "https://stackoverflow.com/users/22439757/onestoic"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 22439757,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4dddb8ac7fda99bf472588e762b55a7e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "oneStoic",
        "link": "https://stackoverflow.com/users/22439757/onestoic"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77494339,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1700133272,
      "creation_date": 1692867799,
      "last_edit_date": 1692869416,
      "question_id": 76967760,
      "share_link": "https://stackoverflow.com/q/76967760",
      "body_markdown": "I am using Neo4j 5.9.0 community\r\n\r\n**Problem description** :\r\nMy graph only has one type of relationship [:Relationship], and one type of node (:Node).\r\nI want to find the shortest path between two nodes, but I do not want the shortest path returned to contain this pattern : **(:Node)&lt;-[:Relationship]-(:Node)-[:Relationship]-&gt;(:Node)**\r\n\r\nI have read [here](https://neo4j.com/docs/cypher-manual/current/patterns/concepts/) that\r\n&gt; If the MATCH clause of the shortestPath function includes a WHERE clause, a shortest path that satisfies the WHERE clause conditions is returned if one exists.\r\n\r\nso this should be possible, and I have tested without using the shortestPath function that paths that verify this requirement indeed exist in my graph.\r\n\r\n**What I have tried:**\r\nI have tested mutliple ways to filter the shortest path returned, but none of them were successful.\r\nI tried using the **exists{}** subquery:\r\n\r\n```\r\nmatch p = shortestPath((startNode:Node {id : 1})-[:Relationship*]-(endNode:Node {id : 2})) \r\nwhere none(pathNode in nodes(p) where exists{\r\nmatch (n1:Node)&lt;-[:Relationship]-(pathNode)-[:Relationship]-&gt;(n2:Node)\r\nwhere ((n1 in nodes(p)) and (n2 in nodes(p)))\r\n}) \r\nreturn p\r\n```\r\nwhich returns &#39;Unknown expression type during transformation (class org.neo4j.cypher.internal.ir.ast.ExistsIRExpression)&#39;,\r\n\r\nas well as using **isEmpty()** predicate function :\r\n\r\n```\r\nmatch p = shortestPath((startNode:Node {id : 1})-[:Relationship*]-(endNode:Node {id : 2}))\r\nwhere isEmpty ([(n1)&lt;-[:Relationship]-(n2)-[:Relationship]-&gt;(n3) where ((n1 in nodes(p)) and (n2 in nodes(p)) and (n3 in nodes(p))) | n2.id])\r\nreturn p\r\n```\r\nwhich returns &#39;Unknown expression type during transformation (class org.neo4j.cypher.internal.ir.ast.ListIRExpression)&#39;\r\n\r\nI do not understand why the queries above do not work properly. Any help would be appreciated, thank you.\r\n",
      "link": "https://stackoverflow.com/questions/76967760/how-to-find-the-shortest-path-not-containing-a-pattern",
      "title": "How to find the shortest path not containing a pattern?"
    },
    {
      "tags": ["neo4j", "cypher", "graph-data-science"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692759319,
          "post_id": 76957864,
          "comment_id": 135666775,
          "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection#comment135666775_76957864"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 22432309,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfnRPmNnZ1Fgxg2EN2ttTxlsjn3PO0NWeGsRP_ccKHLSQ=k-s256",
            "display_name": "熊湘毅",
            "link": "https://stackoverflow.com/users/22432309/%e7%86%8a%e6%b9%98%e6%af%85"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692762772,
          "post_id": 76957864,
          "comment_id": 135667061,
          "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection#comment135667061_76957864"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692780122,
          "post_id": 76957864,
          "comment_id": 135669554,
          "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection#comment135669554_76957864"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 22432309,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfnRPmNnZ1Fgxg2EN2ttTxlsjn3PO0NWeGsRP_ccKHLSQ=k-s256",
            "display_name": "熊湘毅",
            "link": "https://stackoverflow.com/users/22432309/%e7%86%8a%e6%b9%98%e6%af%85"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692943881,
          "post_id": 76957864,
          "comment_id": 135695867,
          "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection#comment135695867_76957864"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692986577,
          "post_id": 76957864,
          "comment_id": 135704958,
          "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection#comment135704958_76957864"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 22432309,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfnRPmNnZ1Fgxg2EN2ttTxlsjn3PO0NWeGsRP_ccKHLSQ=k-s256",
                "display_name": "熊湘毅",
                "link": "https://stackoverflow.com/users/22432309/%e7%86%8a%e6%b9%98%e6%af%85"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1692943592,
              "post_id": 76962783,
              "comment_id": 135695822,
              "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection/76962783#comment135695822_76962783"
            },
            {
              "owner": {
                "reputation": 51,
                "user_id": 22051375,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "florentin",
                "link": "https://stackoverflow.com/users/22051375/florentin"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 22432309,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfnRPmNnZ1Fgxg2EN2ttTxlsjn3PO0NWeGsRP_ccKHLSQ=k-s256",
                "display_name": "熊湘毅",
                "link": "https://stackoverflow.com/users/22432309/%e7%86%8a%e6%b9%98%e6%af%85"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693039649,
              "post_id": 76962783,
              "comment_id": 135709554,
              "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection/76962783#comment135709554_76962783"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 51,
            "user_id": 22051375,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "florentin",
            "link": "https://stackoverflow.com/users/22051375/florentin"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1692804042,
          "creation_date": 1692804042,
          "answer_id": 76962783,
          "question_id": 76957864,
          "share_link": "https://stackoverflow.com/a/76962783",
          "body_markdown": "Can you check the installed GDS version? (RETURN gds.version())\r\nThe current docs point to 2.4 but I suspect you have an older version installed. ",
          "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection/76962783#76962783",
          "title": "Neo4j GDS: Cannot use Cypher to make a complex projection"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22432309,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfnRPmNnZ1Fgxg2EN2ttTxlsjn3PO0NWeGsRP_ccKHLSQ=k-s256",
        "display_name": "熊湘毅",
        "link": "https://stackoverflow.com/users/22432309/%e7%86%8a%e6%b9%98%e6%af%85"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 5,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 89,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1692804042,
      "creation_date": 1692757209,
      "last_edit_date": 1692758686,
      "question_id": 76957864,
      "share_link": "https://stackoverflow.com/q/76957864",
      "body_markdown": "The following query from the [GDS documentation](https://neo4j.com/docs/graph-data-science/current/management-ops/projections/graph-project-cypher-projection/#graph-project-cypher-projection-filtered) shows how to create a GDS projection via Cypher:\r\n\r\n```\r\nMATCH (source) OPTIONAL MATCH (source)-[r:READ]-&gt;(target)\r\nWHERE r.numberOfPages IS NOT NULL\r\nWITH gds.graph.project(&#39;existingNumberOfPages&#39;, source, target, { relationshipProperties: r { .numberOfPages } }) AS g\r\nRETURN\r\n  g.graphName AS graph, g.nodeCount AS nodes, g.relationshipCount AS rels\r\n```\r\n\r\nThis is my code and i want to create a customized projection:\r\n\r\n```neo4j\r\nMATCH (n)-[r]-(m) \r\nWHERE type(r) IN [\r\n    &#39;Environment_related_eQTL&#39;,\r\n    &#39;GO term\\&#39;s relationshipbiological_process&#39;,\r\n    &#39;GO term\\&#39;s relationshipcellular_component&#39;,\r\n    &#39;GO term\\&#39;s relationshipmolecular_function&#39;,\r\n    &#39;Gene and GO\\&#39;s biological_process term relationship&#39;,\r\n    &#39;Gene and GO\\&#39;s cellular_component term relationship&#39;,\r\n    &#39;Gene and GO\\&#39;s molecular_function term relationship&#39;,\r\n    &#39;Genes_regulated_by_methylation&#39;,\r\n    &#39;Phenotypes_affected_by_snp&#39;,\r\n    &#39;SNP_belongTo_Gene&#39;,\r\n    &#39;TF_regulates&#39;,\r\n    &#39;TranseQTL_belongTo_Gene&#39;,\r\n    &#39;TranseQTL_to_gene&#39;,\r\n    &#39;ciseQTL_belongTo_Gene&#39;,\r\n    &#39;ciseQTL_influence_Gene&#39;,\r\n    &#39;environmenteqtl_id_on&#39;,\r\n    &#39;gene_to_TFfamily&#39;,\r\n    &#39;subaloaction&#39;,\r\n    &#39;Gene_Phenotypes_affected_by_Gene_from_twas_araPhenotype&#39;\r\n]\r\nWITH COLLECT(DISTINCT id(n)) + COLLECT(DISTINCT id(m)) AS allNodeIDs\r\nMATCH (source)-[r]-&gt;(target) WHERE  id(source) IN allNodeIDs AND id(target) IN allNodeIDs AND type(r) IN [\r\n    &#39;Environment_related_eQTL&#39;,\r\n    &#39;GO term\\&#39;s relationshipbiological_process&#39;,\r\n    &#39;GO term\\&#39;s relationshipcellular_component&#39;,\r\n    &#39;GO term\\&#39;s relationshipmolecular_function&#39;,\r\n    &#39;Gene and GO\\&#39;s biological_process term relationship&#39;,\r\n    &#39;Gene and GO\\&#39;s cellular_component term relationship&#39;,\r\n    &#39;Gene and GO\\&#39;s molecular_function term relationship&#39;,\r\n    &#39;Genes_regulated_by_methylation&#39;,\r\n    &#39;Phenotypes_affected_by_snp&#39;,\r\n    &#39;SNP_belongTo_Gene&#39;,\r\n    &#39;TF_regulates&#39;,\r\n    &#39;TranseQTL_belongTo_Gene&#39;,\r\n    &#39;TranseQTL_to_gene&#39;,\r\n    &#39;ciseQTL_belongTo_Gene&#39;,\r\n    &#39;ciseQTL_influence_Gene&#39;,\r\n    &#39;environmenteqtl_id_on&#39;,\r\n    &#39;gene_to_TFfamily&#39;,\r\n    &#39;subaloaction&#39;,\r\n    &#39;Gene_Phenotypes_affected_by_Gene_from_twas_araPhenotype&#39;,\r\n    &#39;PPI&#39;,\r\n    &#39;TF_regulates&#39;\r\n]\r\nWITH gds.graph.project(\r\n  &#39;graphdealj&#39;,\r\n  source,\r\n  target,\r\n  {\r\n    sourceNodeLabels: labels(source),\r\n    targetNodeLabels: labels(target),\r\n    relationshipType: type(r)\r\n  }\r\n) AS g\r\nRETURN g.graphName AS graph, g.nodeCount AS nodes, g.relationshipCount AS rels\r\n```\r\n\r\nBut I get this error:\r\n\r\n```\r\nUnknown function &#39;gds.graph.project&#39; (line 47, column 6 (offset: 1700))\r\n&quot;    &#39;TF_regulates&#39;&quot;\r\n                   ^\r\n```\r\n\r\n\r\n\r\n\r\nI am absolutely certain that I have installed GDS, as I&#39;m able to successfully execute other methods of projection and various algorithms. Also, the part of the query before the final GDS section executes without any issues:\r\n\r\n![](https://i.stack.imgur.com/MEINZ.png)\r\n\r\nI tried adding a `call` after `with`, but it didn&#39;t work, but I can guarantee that the code is executed normally before the last `with`. You can see that the picture has output",
      "link": "https://stackoverflow.com/questions/76957864/neo4j-gds-cannot-use-cypher-to-make-a-complex-projection",
      "title": "Neo4j GDS: Cannot use Cypher to make a complex projection"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 143,
                "user_id": 10570318,
                "user_type": "registered",
                "profile_image": "https://lh4.googleusercontent.com/-61NLq-CfCCQ/AAAAAAAAAAI/AAAAAAAAAEA/r7rXAeyr7NQ/photo.jpg?sz=256",
                "display_name": "BeatEngine",
                "link": "https://stackoverflow.com/users/10570318/beatengine"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692710218,
              "post_id": 76952360,
              "comment_id": 135659045,
              "link": "https://stackoverflow.com/questions/76952071/neo4j-unwind-create-runs-endless/76952360#comment135659045_76952360"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1692699918,
          "creation_date": 1692699918,
          "answer_id": 76952360,
          "question_id": 76952071,
          "share_link": "https://stackoverflow.com/a/76952360",
          "body_markdown": "You&#39;ve got 7 nested loops here, that account for 13^7 iterations, i.e. more than 62 million iterations. Either the query never completes because it runs out of memory or it just needs (a lot of) time.\r\n\r\nIf you only need to create 13 `CT11000000` nodes, you could instead define a single `UNWIND` with a single list of 13 maps:\r\n\r\n```\r\nUNWIND [\r\n    {A: 6432013617038820698, B: 1, C: &#39;1000000&#39;, D: &#39;Attribute101&#39;, E: 4, F: &#39;1000161&#39;, G: 1}\r\n    // [...] + 12 other maps\r\n] AS attributes\r\nCREATE (:CT11000000 {VA: attributes.A, VB: attributes.B, VC: attributes.C, VD: attributes.D, VE: attributes.E, VF: attributes.F, VG: attributes.G})\r\n```\r\n\r\nSide note: please have a look at the [Cypher style guide][1], the label and properties&#39; case are quite unusual here\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/styleguide/#cypher-styleguide-casing",
          "link": "https://stackoverflow.com/questions/76952071/neo4j-unwind-create-runs-endless/76952360#76952360",
          "title": "NEO4J UNWIND CREATE runs endless"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1692737468,
          "creation_date": 1692737468,
          "answer_id": 76956788,
          "question_id": 76952071,
          "share_link": "https://stackoverflow.com/a/76956788",
          "body_markdown": "A simpler alternative to @fbiville&#39;s query:\r\n\r\n    UNWIND [\r\n        {va: 6432013617038820698, vb: 1, vc: &#39;1000000&#39;, vc: &#39;Attribute101&#39;, vc: 4, vc: &#39;1000161&#39;, vc: 1}\r\n        // [...] + 12 other maps\r\n    ] AS attributes\r\n    CREATE (n:CT11000000)\r\n    SET n = attributes",
          "link": "https://stackoverflow.com/questions/76952071/neo4j-unwind-create-runs-endless/76956788#76956788",
          "title": "NEO4J UNWIND CREATE runs endless"
        }
      ],
      "owner": {
        "reputation": 143,
        "user_id": 10570318,
        "user_type": "registered",
        "profile_image": "https://lh4.googleusercontent.com/-61NLq-CfCCQ/AAAAAAAAAAI/AAAAAAAAAEA/r7rXAeyr7NQ/photo.jpg?sz=256",
        "display_name": "BeatEngine",
        "link": "https://stackoverflow.com/users/10570318/beatengine"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 37,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76952360,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1692737536,
      "creation_date": 1692697773,
      "last_edit_date": 1692737536,
      "question_id": 76952071,
      "share_link": "https://stackoverflow.com/q/76952071",
      "body_markdown": "I have a problem with the execution of the following code:\r\n\r\n    public static void create(final Session session, final String nodeName, final Map&lt;String, List&lt;Object&gt;&gt; attributes) {\r\n            final String create = getCreate(nodeName, attributes);\r\n            Logger.getLogger(&quot;Neo4jCommands&quot;).log(Level.FINE, &quot;Creating node &quot; + nodeName);\r\n            try {\r\n                session.executeWriteWithoutResult(tx -&gt; {\r\n                    var query = new Query(create);\r\n                    tx.run(query);\r\n                }, TransactionConfig.builder().withTimeout(Duration.of(30, ChronoUnit.SECONDS)).build());\r\n            } catch (final Exception e) {\r\n                if (create.length() &gt; 3000) {\r\n                    Logger.getLogger(&quot;Neo4jCommands&quot;).log(Level.SEVERE, &quot;Failed create: &quot; + create.substring(0, 3000));\r\n                    ;\r\n                } else {\r\n                    Logger.getLogger(&quot;Neo4jCommands&quot;).log(Level.SEVERE, &quot;Failed create: &quot; + create);\r\n                }\r\n                throw new RuntimeException(e);\r\n            } finally {\r\n                session.close();\r\n            }\r\n        }\r\n\r\nThe following cypher query runs endless:\r\n\r\n    UNWIND [6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698, 6432013617038820698] AS A\r\n    UNWIND [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13] AS B\r\n    UNWIND [&#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;, &#39;1000000&#39;] AS C\r\n    UNWIND [&#39;Attribute101&#39;, &#39;Attribute102&#39;, &#39;Attribute103&#39;, &#39;Attribute104&#39;, &#39;Attribute105&#39;, &#39;Attribute106&#39;, &#39;Attribute107&#39;, &#39;Attribute108&#39;, &#39;Attribute109&#39;, &#39;Attribute110&#39;, &#39;Attribute111&#39;, &#39;Attribute112&#39;, &#39;Attribute113&#39;] AS D\r\n    UNWIND [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4] AS E\r\n    UNWIND [&#39;1000161&#39;, &#39;1000162Text&#39;, &#39;1000163&#39;, &#39;1000164Text&#39;, &#39;1000165&#39;, &#39;1000166Text&#39;, &#39;1000167&#39;, &#39;1000168Text&#39;, &#39;1000169&#39;, &#39;1000170Text&#39;, &#39;1000171&#39;, &#39;1000172Text&#39;, &#39;1000173&#39;] AS F\r\n    UNWIND [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1] AS G\r\n    CREATE (:CT11000000 {VA: A, VB: B, VC: C, VD: D, VE: E, VF: F, VG: G})\r\n\r\nThank you for help!",
      "link": "https://stackoverflow.com/questions/76952071/neo4j-unwind-create-runs-endless",
      "title": "NEO4J UNWIND CREATE runs endless"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692651624,
              "post_id": 76948661,
              "comment_id": 135650337,
              "link": "https://stackoverflow.com/questions/76948545/neo4j-cypher-pattern-comprehension-in-return-statement/76948661#comment135650337_76948661"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692652152,
              "post_id": 76948661,
              "comment_id": 135650429,
              "link": "https://stackoverflow.com/questions/76948545/neo4j-cypher-pattern-comprehension-in-return-statement/76948661#comment135650429_76948661"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1692652134,
          "last_edit_date": 1692652134,
          "creation_date": 1692651429,
          "answer_id": 76948661,
          "question_id": 76948545,
          "share_link": "https://stackoverflow.com/a/76948661",
          "body_markdown": "If you are using Neo4j 5.6+, you can use the [COLLECT subquery](https://neo4j.com/docs/cypher-manual/current/syntax/expressions/#collect-subqueries). Here is a sample snippet:\r\n\r\n    ...\r\n    RETURN COLLECT {\r\n        MATCH (rc:Criterion)\r\n        WHERE rc.id IN childD.replaceableCriterionIds\r\n        RETURN {entity: rc}\r\n    } AS decisionReplaceableCriteria\r\n\r\nIn prior versions of Neo4j, you can try a hack:\r\n\r\n    ...\r\n    RETURN [ (rc:Criterion)-[*0]-&gt;() WHERE rc.id IN childD.replaceableCriterionIds | {entity: rc} ] AS decisionReplaceableCriteria\r\n\r\nThis uses a [variable-length path](https://neo4j.com/docs/cypher-manual/current/patterns/primer/#variable-length-paths) pattern specifying a length of 0. If you want to see if this variable-length path pattern causes any DB hits, [PROFILE](https://neo4j.com/docs/cypher-manual/current/query-tuning/query-profile/) your query and look at the `VarLengthExpand` operation&#39;s &quot;db hits&quot;.",
          "link": "https://stackoverflow.com/questions/76948545/neo4j-cypher-pattern-comprehension-in-return-statement/76948661#76948661",
          "title": "Neo4j Cypher Pattern comprehension in return statement"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76948661,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1692652134,
      "creation_date": 1692649787,
      "question_id": 76948545,
      "share_link": "https://stackoverflow.com/q/76948545",
      "body_markdown": "I need to add to my Cypher query&#39;s return statement the following  Pattern comprehension:\r\n\r\n    [ (rc:Criterion) WHERE rc.id IN childD.replaceableCriterionIds | {entity: rc} ] AS decisionReplaceableCriteria\r\n\r\nbut it fails with the following exception:\r\n\r\n    Caused by: org.neo4j.driver.exceptions.ClientException: Invalid input &#39;WHERE&#39;: expected &quot;-&quot;, &quot;&lt;&quot;, &lt;ARROW_LEFT_HEAD&gt; or &lt;ARROW_LINE&gt; \r\n\r\nIt only works when I&#39;m adding the redundant relationship with another node\r\n\r\n    [ (rc:Criterion)-[:CREATED_BY]-&gt;(:User) WHERE rc.id IN childD.replaceableCriterionIds | {entity: rc} ] AS decisionReplaceableCriteria\r\n\r\nThe following part is absolutely redundant for my needs:\r\n\r\n    -[:CREATED_BY]-&gt;(:User)\r\n\r\nIs it possible to rewrite my pattern comprehension to avoid such redundant syntax?",
      "link": "https://stackoverflow.com/questions/76948545/neo4j-cypher-pattern-comprehension-in-return-statement",
      "title": "Neo4j Cypher Pattern comprehension in return statement"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692641318,
          "post_id": 76941753,
          "comment_id": 135648521,
          "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls#comment135648521_76941753"
        },
        {
          "owner": {
            "reputation": 24739,
            "user_id": 1219755,
            "user_type": "registered",
            "accept_rate": 84,
            "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
            "display_name": "alexanoid",
            "link": "https://stackoverflow.com/users/1219755/alexanoid"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692650191,
          "post_id": 76941753,
          "comment_id": 135650109,
          "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls#comment135650109_76941753"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692645932,
              "post_id": 76947841,
              "comment_id": 135649301,
              "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls/76947841#comment135649301_76947841"
            },
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692650087,
              "post_id": 76947841,
              "comment_id": 135650090,
              "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls/76947841#comment135650090_76947841"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692650200,
              "post_id": 76947841,
              "comment_id": 135650113,
              "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls/76947841#comment135650113_76947841"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692650539,
              "post_id": 76947841,
              "comment_id": 135650166,
              "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls/76947841#comment135650166_76947841"
            },
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692650696,
              "post_id": 76947841,
              "comment_id": 135650187,
              "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls/76947841#comment135650187_76947841"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1692642428,
          "last_edit_date": 1692642428,
          "creation_date": 1692642012,
          "answer_id": 76947841,
          "question_id": 76941753,
          "share_link": "https://stackoverflow.com/a/76947841",
          "body_markdown": "Your second snippet does not have an equivalent to the `size(cGroups) &gt;= size(childD.detailedCriterionIds)` test, so it will not always produce the same result.\r\n\r\nIn order to do that test, you need to calculate the number of `cGroups`. Therefore, there may not be a better approach than what you are already doing in the first snippet.\r\n\r\n*Minor nit: the `WITH childD, childDStat, cGroup` clause is redundant.*",
          "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls/76947841#76947841",
          "title": "Neo4j Cypher reduce UNWINDs calls"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "last_editor": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 63,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76947841,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1692642428,
      "creation_date": 1692575912,
      "last_edit_date": 1692615700,
      "question_id": 76941753,
      "share_link": "https://stackoverflow.com/q/76941753",
      "body_markdown": "I have the following Cypher query:\r\n\r\n    UNWIND childD.detailedCriterionIds as dCId\r\n    WITH childD, childDStat, dCId + coalesce(childDStat[&#39;replaceableCriterionIds.&#39; + dCId],[]) as cGroup\r\n    WITH childD, childDStat, cGroup\r\n    WHERE NOT AlL(x IN cGroup WHERE x IN $zeroCriterionIds )\r\n    WITH childD, childDStat, collect(cGroup) as cGroups\r\n    WHERE size(cGroups) &gt;= size(childD.detailedCriterionIds)\r\n    \r\n    WITH childD, childDStat, cGroups\r\n    UNWIND cGroups as cGroup\r\n    WITH childD, childDStat, cGroup\r\n    WHERE ANY(x IN cGroup WHERE x IN $detailedCriterionIds)\r\n    WITH childD, childDStat, collect(cGroup) as cGroups\r\n    WHERE size(cGroups) &gt; 0\r\n\r\nAs you can see, I use 2 UNWINDs there. Is it possible to optimize this query to avoid the second UNWIND? If so, could you please show how?\r\n\r\nI tried the following, but it produced a different result:\r\n\r\n    UNWIND childD.detailedCriterionIds as dCId\r\n    WITH childD, childDStat, dCId + coalesce(childDStat[&#39;replaceableCriterionIds.&#39; + dCId],[]) as cGroup\r\n    WITH childD, childDStat, cGroup\r\n    WHERE NOT AlL(x IN cGroup WHERE x IN $zeroCriterionIds )\r\n    AND ANY(x IN cGroup WHERE x IN $detailedCriterionIds)\r\n    WITH childD, childDStat, collect(cGroup) as cGroups\r\n    WHERE size(cGroups) &gt; 0\r\n\r\nWhere is my mistake?",
      "link": "https://stackoverflow.com/questions/76941753/neo4j-cypher-reduce-unwinds-calls",
      "title": "Neo4j Cypher reduce UNWINDs calls"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 336,
                "user_id": 7249598,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://lh6.googleusercontent.com/-MP75NqfKzXc/AAAAAAAAAAI/AAAAAAAAAEs/tjRRDkY0Q2s/photo.jpg?sz=256",
                "display_name": "Learn on hard way",
                "link": "https://stackoverflow.com/users/7249598/learn-on-hard-way"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692667622,
              "post_id": 76941307,
              "comment_id": 135652004,
              "link": "https://stackoverflow.com/questions/76937217/issue-creating-temparticle-in-neo4j-cypher-query/76941307#comment135652004_76941307"
            },
            {
              "owner": {
                "reputation": 214,
                "user_id": 8511812,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
                "display_name": "v2belleville",
                "link": "https://stackoverflow.com/users/8511812/v2belleville"
              },
              "reply_to_user": {
                "reputation": 336,
                "user_id": 7249598,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://lh6.googleusercontent.com/-MP75NqfKzXc/AAAAAAAAAAI/AAAAAAAAAEs/tjRRDkY0Q2s/photo.jpg?sz=256",
                "display_name": "Learn on hard way",
                "link": "https://stackoverflow.com/users/7249598/learn-on-hard-way"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692895915,
              "post_id": 76941307,
              "comment_id": 135689715,
              "link": "https://stackoverflow.com/questions/76937217/issue-creating-temparticle-in-neo4j-cypher-query/76941307#comment135689715_76941307"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1692565011,
          "creation_date": 1692565011,
          "answer_id": 76941307,
          "question_id": 76937217,
          "share_link": "https://stackoverflow.com/a/76941307",
          "body_markdown": "Yes, you never get to the case when rel is null because it does not go past the optional match, if there is no match for the pattern.\r\n\r\nYou can try with this data:\r\n\r\n    create (:Store {id:22,name:&quot;STORE DEMO NAME&quot;})-[:HAS_ARTICLE ]-&gt;(:Article {price :30,name:&quot;Candy&quot;,date:&quot;2023-12-13&quot;});\r\n    :param {&quot;data&quot;:[{&quot;store_id&quot;: 22, &quot;article_name&quot;: &quot;Candy&quot;, &quot;date&quot;: &quot;2023-12-14&quot;, &quot;price&quot;: 32},{&quot;store_id&quot;: 22, &quot;article_name&quot;: &quot;Chocolate&quot;, &quot;date&quot;: &quot;2023-12-14&quot;, &quot;price&quot;: 32},{&quot;store_id&quot;: 22, &quot;article_name&quot;: &quot;Chocolate&quot;, &quot;date&quot;: &quot;2023-12-12&quot;, &quot;price&quot;: 25}]}\r\n\r\nthen run this \r\n\r\n    unwind $data as art\r\n    match (store:Store {id: art.store_id})\r\n    merge (store)-[rel:HAS_ARTICLE]-&gt;(article:Article {name:art.article_name})\r\n    on create set article.date=art.date,article.price=art.price\r\n    with art,article where article.date&lt;art.date\r\n    set article.date=art.date,article.price=art.price\r\n\r\nits all in `merge` that creates the part of the pattern that does not exists. it&#39;s a bit tricky to figure out, I found this video helpful to understand how it works https://www.youtube.com/watch?v=w42uqxGd7qM&amp;t=12s\r\n\r\nI did not put the date on the relationship because I could not understand why you need it beside the one on the article\r\n\r\nthe first line of data updates &quot;candy&quot;, the second creates &quot;chocolate&quot; the third is ignored because the date is earlier than the one chocolate was created with",
          "link": "https://stackoverflow.com/questions/76937217/issue-creating-temparticle-in-neo4j-cypher-query/76941307#76941307",
          "title": "Issue Creating TempArticle in Neo4j Cypher Query"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 336,
                "user_id": 7249598,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://lh6.googleusercontent.com/-MP75NqfKzXc/AAAAAAAAAAI/AAAAAAAAAEs/tjRRDkY0Q2s/photo.jpg?sz=256",
                "display_name": "Learn on hard way",
                "link": "https://stackoverflow.com/users/7249598/learn-on-hard-way"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692667712,
              "post_id": 76947709,
              "comment_id": 135652014,
              "link": "https://stackoverflow.com/questions/76937217/issue-creating-temparticle-in-neo4j-cypher-query/76947709#comment135652014_76947709"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1692675610,
          "last_edit_date": 1692675610,
          "creation_date": 1692640733,
          "answer_id": 76947709,
          "question_id": 76937217,
          "share_link": "https://stackoverflow.com/a/76947709",
          "body_markdown": "When `rel` is `NULL`, then `shouldCreateTempArticle` will be true and `shouldUpdateRel` false. But when `shouldUpdateRel` is false, the `WHERE shouldUpdateRel` clause in your query aborts the query (for the relevant rows). Therefore, when `shouldUpdateRel` is false the `shouldCreateTempArticle `logic that occurs later in your query will never get processed.\r\n\r\nHere is a solution that uses two [CALL subquery](https://neo4j.com/docs/cypher-manual/current/clauses/call-subquery/) clauses to avoid the two subqueries interfering with each other or the final return value:\r\n\r\n    MATCH (store:Store {store_id: $store_id})\r\n    OPTIONAL MATCH (store)-[rel:HAS_ARTICLE {article_name: $article_name}]-&gt;(article)\r\n    WITH *,\r\n      rel IS NOT NULL AND rel.date &lt; date($new_date) AS shouldUpdateRel,\r\n      rel IS NULL AS shouldCreateTempArticle\r\n    CALL {\r\n        WITH *\r\n        WITH * WHERE shouldUpdateRel\r\n        SET rel.date = date($new_date)\r\n        SET rel.prev_price = rel.price\r\n        SET rel.price = $new_price \r\n        SET rel.article_name =  $article_name\r\n    }\r\n    CALL {\r\n        WITH *\r\n        WITH * WHERE shouldCreateTempArticle\r\n        CREATE (tempArticle:TempArticle {article_name: $article_name, article_description: $article_description})\r\n        MERGE (store)-[newRel:HAS_ARTICLE]-&gt;(tempArticle)\r\n        SET newRel.date = date($new_date)\r\n        SET newRel.price = $new_price\r\n        SET newRel.article_name =  $article_name\r\n    }\r\n    RETURN store, article, shouldUpdateRel, shouldCreateTempArticle\r\n\r\n The query also returns both flags (`shouldUpdateRel` and `shouldCreateTempArticle`) as a hint as to what was done.",
          "link": "https://stackoverflow.com/questions/76937217/issue-creating-temparticle-in-neo4j-cypher-query/76947709#76947709",
          "title": "Issue Creating TempArticle in Neo4j Cypher Query"
        }
      ],
      "owner": {
        "reputation": 336,
        "user_id": 7249598,
        "user_type": "registered",
        "accept_rate": 47,
        "profile_image": "https://lh6.googleusercontent.com/-MP75NqfKzXc/AAAAAAAAAAI/AAAAAAAAAEs/tjRRDkY0Q2s/photo.jpg?sz=256",
        "display_name": "Learn on hard way",
        "link": "https://stackoverflow.com/users/7249598/learn-on-hard-way"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76947709,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1692675610,
      "creation_date": 1692482978,
      "question_id": 76937217,
      "share_link": "https://stackoverflow.com/q/76937217",
      "body_markdown": "Question:\r\n\r\nI&#39;m working on a Neo4j Cypher query that aims to update or create relationships between a store and articles. The goal is to update an existing relationship if its date is older than a new date, and if the relationship does not exist, create a new TempArticle node and establish a relationship. However, the code I&#39;ve written doesn&#39;t seem to be working as expected.\r\n\r\n        :param { store_id: 22, article_name: &quot;Candy shop&quot;, new_date: &quot;2023-12-14&quot;, new_price: 32, article_description: &quot;&quot; };\r\n    \r\n    MERGE (s:Store {store_id: $store_id, name: &quot;STORE DEMO NAME&quot;}); // testing store\r\n    \r\n    MATCH (store:Store {store_id: $store_id})\r\n    OPTIONAL MATCH (store)-[rel:HAS_ARTICLE {article_name: $article_name}]-&gt;(article)\r\n    WITH store, rel, article,\r\n         CASE\r\n             WHEN rel IS NOT NULL AND rel.date &lt; date($new_date) THEN true\r\n             ELSE false\r\n         END AS shouldUpdateRel,\r\n         CASE\r\n             WHEN rel IS NULL THEN true\r\n             ELSE false\r\n         END AS shouldCreateTempArticle\r\n    WITH store, rel, article, shouldUpdateRel, shouldCreateTempArticle\r\n    WHERE shouldUpdateRel\r\n    SET rel.date = date($new_date)\r\n    SET rel.prev_price = rel.price\r\n    SET rel.price = $new_price \r\n    SET rel.article_name =  $article_name\r\n    \r\n    WITH store, article, shouldCreateTempArticle\r\n    WHERE shouldCreateTempArticle\r\n    CREATE (tempArticle:TempArticle {article_name: $article_name, article_description: $article_description})\r\n    MERGE (store)-[newRel:HAS_ARTICLE]-&gt;(tempArticle)\r\n    SET newRel.date = date($new_date)\r\n    SET newRel.price = $new_price\r\n    SET newRel.article_name =  $article_name\r\n    RETURN store, article, shouldCreateTempArticle\r\n\r\nProblem:\r\n\r\nThe code is expected to update existing relationships and create a TempArticle node with a new relationship when necessary. However, I&#39;ve noticed that while the relationship update part seems to work correctly, the TempArticle creation part doesn&#39;t behave as expected. Despite the logic suggesting that it should create a TempArticle when shouldCreateTempArticle is true, it doesn&#39;t.\r\n\r\nExpected Outcome:\r\n\r\nWhen shouldCreateTempArticle is true, a new TempArticle node should be created along with a relationship to the store.\r\n\r\nCurrent Outcome:\r\nDespite the logic and conditions being set, the TempArticle node is not being created as expected.\r\n\r\nI would appreciate any insights or suggestions on what might be causing this issue and how to resolve it. Thank you in advance for your assistance!",
      "link": "https://stackoverflow.com/questions/76937217/issue-creating-temparticle-in-neo4j-cypher-query",
      "title": "Issue Creating TempArticle in Neo4j Cypher Query"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "last_editor": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1692370679,
          "last_edit_date": 1692370679,
          "creation_date": 1692369563,
          "answer_id": 76930320,
          "question_id": 76930230,
          "share_link": "https://stackoverflow.com/a/76930320",
          "body_markdown": "Your fist query:\r\n`MATCH (u:USER {name:&quot;abcd&quot;}) RETURN u` is only good for simple specific cases, while the second query: `MATCH (u:USER} WHERE u.name = &quot;abcd&quot; RETURN u` is for the general case.\r\nIf you have a case where you only want to match a node with a very simple condition, like `name = &quot;abcd&quot;`, both will work. \r\n\r\nFor more complicated conditions use `WHERE`. For example:\r\n```\r\nMATCH (u:USER)\r\nWHERE (u.name = &quot;abcd&quot; AND u.age &gt; 27) OR (u.name = &quot;abcde&quot; AND u.age &gt; 28)\r\nRETURN u\r\n```\r\n\r\nInside a `WHERE` clause you can use boolean operators like `AND`, `OR`, `XOR`, and `NOT`.\r\nyou can also use `IN` and `CONTAINS`\r\n\r\nFor more information, check out the [documentation](https://neo4j.com/docs/cypher-manual/current/clauses/where/)",
          "link": "https://stackoverflow.com/questions/76930230/when-to-use-where-in-cypher-neo4j/76930320#76930320",
          "title": "When to use WHERE in Cypher Neo4j?"
        }
      ],
      "owner": {
        "reputation": 310,
        "user_id": 12051334,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/020ccdb22791f6a926ed57d4ba65e7c9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Rishabh Raghwendra",
        "link": "https://stackoverflow.com/users/12051334/rishabh-raghwendra"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76930320,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1692370679,
      "creation_date": 1692368824,
      "question_id": 76930230,
      "share_link": "https://stackoverflow.com/q/76930230",
      "body_markdown": "I was going through docs and a 2-month-old youtube video on neo4j for beginners. \r\nI want to find a user from the database using his name. So here are two way of doing this:\r\n\r\nDocs way: `MATCH (u:USER {name:&quot;abcd&quot;}) RETURN u`.\r\n\r\nYoutube video way: `MATCH (u:USER} WHERE u.name = &quot;abcd&quot; RETURN u`\r\n\r\nBoth ways do the job but I am confused about which one to use when or not. May anyone tell me when to use which one and what the fundamental difference is in them? Are both methods safe to use?",
      "link": "https://stackoverflow.com/questions/76930230/when-to-use-where-in-cypher-neo4j",
      "title": "When to use WHERE in Cypher Neo4j?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "last_editor": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1692368253,
          "last_edit_date": 1692368253,
          "creation_date": 1692367938,
          "answer_id": 76930122,
          "question_id": 76929932,
          "share_link": "https://stackoverflow.com/a/76930122",
          "body_markdown": "There are several ways to go. Since you want to have all the types of the data even if it is `0`, one option is:\r\n```\r\nMATCH (n:NODE)\r\nOPTIONAL MATCH (n)-[r]-(m:NODE)\r\nWHERE \r\n    type(r) IN [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]\r\nWITH \r\n    CASE type(r) WHEN &#39;A&#39; THEN 1 ELSE 0 END AS cA, \r\n    CASE type(r) WHEN &#39;B&#39; THEN 1 ELSE 0 END AS cB,\r\n    CASE type(r) WHEN &#39;C&#39; THEN 1 ELSE 0 END AS cC,\r\n    n.key AS Node\r\nRETURN Node, SUM(cA) AS countA, SUM(cB) AS countB, SUM(cC) AS countC\r\n```\r\nWhich for sample data:\r\n```\r\nMERGE (n0:NODE {key:&#39;n0&#39;})\r\nMERGE (n1:NODE {key:&#39;n1&#39;}) \r\nMERGE (n2:NODE {key:&#39;n2&#39;}) \r\nMERGE (n3:NODE {key:&#39;n3&#39;}) \r\nMERGE (n4:NODE {key:&#39;n4&#39;})    \r\n\r\nMERGE(n0)-[:A]-(n1)\r\nMERGE(n0)-[:A]-(n2)\r\nMERGE(n0)-[:B]-(n3)\r\nMERGE(n1)-[:B]-(n2)\r\n```\r\nReturns:\r\n```\r\n╒══════╤════════╤════════╤════════╕\r\n│&quot;Node&quot;│&quot;countA&quot;│&quot;countB&quot;│&quot;countC&quot;│\r\n╞══════╪════════╪════════╪════════╡\r\n│&quot;n0&quot;  │2       │1       │0       │\r\n├──────┼────────┼────────┼────────┤\r\n│&quot;n1&quot;  │1       │1       │0       │\r\n├──────┼────────┼────────┼────────┤\r\n│&quot;n2&quot;  │1       │1       │0       │\r\n├──────┼────────┼────────┼────────┤\r\n│&quot;n3&quot;  │0       │1       │0       │\r\n├──────┼────────┼────────┼────────┤\r\n│&quot;n4&quot;  │0       │0       │0       │\r\n└──────┴────────┴────────┴────────┘\r\n```\r\n*Note that your approach in the question, will not return &quot;n4&quot; as it has no relationships and your query only match nodes with a relationship.",
          "link": "https://stackoverflow.com/questions/76929932/return-a-count-of-every-edge-type-leaving-a-node-in-neo4j/76930122#76930122",
          "title": "Return a count of every edge type leaving a node in neo4j"
        }
      ],
      "owner": {
        "reputation": 336,
        "user_id": 6136888,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://www.gravatar.com/avatar/78723bd4ac0b7750dff3811181d41546?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Zaya",
        "link": "https://stackoverflow.com/users/6136888/zaya"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76930122,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1692368253,
      "creation_date": 1692366289,
      "question_id": 76929932,
      "share_link": "https://stackoverflow.com/q/76929932",
      "body_markdown": "Given a node with several types of outbound edges, let&#39;s say of types `[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;]`, how would I use cypher to query a neo4j database to return the counts of every edge. \r\n\r\nE.g. if I have a graph like \r\n\r\n    (n0:NODE) -[:A]- (n1:NODE)\r\n    (n0:NODE) -[:A]- (n2:NODE)\r\n    (n0:NODE) -[:B]- (n3:NODE)\r\n    (n1:NODE) -[:B]- (n2:NODE)\r\n    (n4:NODE) // No edges\r\n\r\nAssuming these edges are all bidirectional, I would want the query to return  \r\n\r\n    Node, count(A), count(B), count(C) \r\n    n0,   2,        1,        0\r\n    n1,   1,        1,        0\r\n    n2,   1,        1,        0\r\n    n3,   0,        1,        0 \r\n    n4,   0,        0,        0\r\n\r\nFor all nodes with label `NODE`. \r\n\r\nI&#39;m using this right now, which is okay, but it puts all the different edge types on different rows, so I have to iterate through all of them in post processing to build out the table that I want: \r\n\r\n    MATCH (n:NODE) -[r]- ()\r\n    WHERE \r\n        type(r) in [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]\r\n    RETURN \r\n        id(n) as nid,\r\n        type(r) as rtype, \r\n        count(r) as cnt\r\n\r\nIs there a way to get these all in one row like in my example?",
      "link": "https://stackoverflow.com/questions/76929932/return-a-count-of-every-edge-type-leaving-a-node-in-neo4j",
      "title": "Return a count of every edge type leaving a node in neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 11,
                "user_id": 7895932,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/f077a1048ccdcde26be536be46db4de7?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "SIVASANKARI",
                "link": "https://stackoverflow.com/users/7895932/sivasankari"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692352585,
              "post_id": 76928050,
              "comment_id": 135614421,
              "link": "https://stackoverflow.com/questions/76926899/what-causes-neo4j-error-illegal-char-at-index-3/76928050#comment135614421_76928050"
            },
            {
              "owner": {
                "reputation": 176,
                "user_id": 21624328,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
                "display_name": "Christoffer Bergman",
                "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 7895932,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/f077a1048ccdcde26be536be46db4de7?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "SIVASANKARI",
                "link": "https://stackoverflow.com/users/7895932/sivasankari"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1692359800,
              "post_id": 76928050,
              "comment_id": 135615761,
              "link": "https://stackoverflow.com/questions/76926899/what-causes-neo4j-error-illegal-char-at-index-3/76928050#comment135615761_76928050"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1692350648,
          "creation_date": 1692350648,
          "answer_id": 76928050,
          "question_id": 76926899,
          "share_link": "https://stackoverflow.com/a/76928050",
          "body_markdown": "I don&#39;t have Windows, so I can&#39;t test your query as it is.\r\n\r\nI do have two different theories, though.\r\n\r\nThere is a security restriction that prevents LOAD CSV from reading from any directory on the local system, but only things under the import folder. It might be that you used to use an older version that didn&#39;t have this security restriction before.\r\n\r\nThis is controlled by this config in neo4j.conf: &lt;br&gt;\r\n&lt;code&gt;server.directories.import=import&lt;/code&gt;\r\n\r\nRemove or comment it out to get access to the entire file system (but please consider the security implications of that).\r\n\r\nIf that is not the case, it could be because you have &lt;code&gt;:&lt;/code&gt; in the column names of the CSV.\r\n\r\nThis was fixed in Neo4j 5.5.0. Now this works if the header entry also specifies a property type, e.g. &lt;code&gt;my-key:with-colons:string&lt;/code&gt;",
          "link": "https://stackoverflow.com/questions/76926899/what-causes-neo4j-error-illegal-char-at-index-3/76928050#76928050",
          "title": "What causes Neo4j error: Illegal char &lt;:&gt; at index 3"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 7895932,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f077a1048ccdcde26be536be46db4de7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "SIVASANKARI",
        "link": "https://stackoverflow.com/users/7895932/sivasankari"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 56,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1692929048,
      "creation_date": 1692340044,
      "last_edit_date": 1692929048,
      "question_id": 76926899,
      "share_link": "https://stackoverflow.com/q/76926899",
      "body_markdown": "\r\n    LOAD CSV WITH HEADERS FROM &quot;file:///‪C:/Users/SESA472806/Desktop/CustomerTagDB_IOAssgiment_M91_with_IO_Allocation_LAST_4.csv&quot; as line\r\n    with line, line.`Plant Name` as plnt\r\n\r\n    Call{    \r\n         with line, plnt\r\n         merge(p:Plant{Name : plnt})\r\n         SET p.validCount =&#39;null&#39;, p.projectName = &#39;Null&#39;, p.projectId = &#39;Null&#39;, p.progress =&#39;Null&#39;, p.modelValidCount = &#39;Null&#39;,     p.modelinstabceCount = &#39;Null&#39;, p.modelBadCount = &#39;Null&#39;, p.isPropagated = &#39;Null&#39; , p.isCustomerLoaded = &#39;Null&#39;, p.isControlLoaded = &#39;Null&#39;, p.instanceCount = &#39;Null&#39;, p.CutomerDbPath = &#39;Null&#39;, p.ControlDbPath = &#39;Null&#39;, p.badCount = &#39;Null&#39;, p.AmlPath = &#39;Null&#39; , p.allProjectPath = &#39;Null&#39;\r\n         return p\r\n    }\r\n    return p\r\n\r\n\r\n#### ERROR\r\n\r\n\r\n    Illegal char &lt;:&gt; at index 3: /‪C:/Users/SESA472806/Desktop/CustomerTagDB_IOAssgiment_M91_with_IO_Allocation_LAST_4.csv ? What is the error in neo4j\r\n\r\n\r\nI don&#39;t understand the error. I have used the same code before.\r\n",
      "link": "https://stackoverflow.com/questions/76926899/what-causes-neo4j-error-illegal-char-at-index-3",
      "title": "What causes Neo4j error: Illegal char &lt;:&gt; at index 3"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 1007,
            "user_id": 3601357,
            "user_type": "registered",
            "accept_rate": 80,
            "profile_image": "https://i.stack.imgur.com/rq1wv.jpg?s=256&g=1",
            "display_name": "ScottyJ",
            "link": "https://stackoverflow.com/users/3601357/scottyj"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692279264,
          "post_id": 76921714,
          "comment_id": 135603774,
          "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher#comment135603774_76921714"
        },
        {
          "owner": {
            "reputation": 81,
            "user_id": 11359133,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Leyla Elkhamlichi",
            "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
          },
          "reply_to_user": {
            "reputation": 1007,
            "user_id": 3601357,
            "user_type": "registered",
            "accept_rate": 80,
            "profile_image": "https://i.stack.imgur.com/rq1wv.jpg?s=256&g=1",
            "display_name": "ScottyJ",
            "link": "https://stackoverflow.com/users/3601357/scottyj"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692279305,
          "post_id": 76921714,
          "comment_id": 135603782,
          "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher#comment135603782_76921714"
        },
        {
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692281485,
          "post_id": 76921714,
          "comment_id": 135604320,
          "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher#comment135604320_76921714"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1692283420,
          "creation_date": 1692283420,
          "answer_id": 76922614,
          "question_id": 76921714,
          "share_link": "https://stackoverflow.com/a/76922614",
          "body_markdown": "As far as I understand, you may want something like this:\r\n```\r\nMATCH (b:BOC_beroep)-[r:MAPS_TO]-&gt;(s:Soft_Skill)\r\nWITH SUM(1) AS total, r.type AS type, COLLECT(r.b) AS type_sum\r\nWITH REDUCE(total=0, number in type_sum | total + number) AS type_sum, type, total\r\nWITH COLLECT ({type: type, type_sum: toFloat(type_sum)}) AS data, SUM(total) AS total\r\nUNWIND data AS d\r\nWITH d.type_sum / total * 100 AS percent, d.type AS type\r\nRETURN percent, type\r\nORDER BY percent DESC\r\n```\r\nWhich for sample data:\r\n```\r\nMERGE (a1:BOC_beroep {occupation: &#39;dokter&#39;, code_occupation: &#39;sk_565&#39;})  \r\nMERGE (a2:Soft_Skill {skill_code: &#39;sk_687&#39;, name: &#39;leren&#39;}) \r\nMERGE (a1)-[:MAPS_TO{type:&quot;optioneel&quot;, b:0.5, k:1}]-(a2)\r\nMERGE (a1)-[:MAPS_TO{type:&quot;optioneel&quot;, b:0.5, k:2}]-(a2)\r\nMERGE (a1)-[:MAPS_TO{type:&quot;essentieel&quot;, b:1, k:3}]-(a2)\r\nMERGE (a1)-[:MAPS_TO{type:&quot;essentieel&quot;, b:1, k:4}]-(a2)\r\n```\r\nReturns:\r\n```\r\n╒═════════╤════════════╕\r\n│&quot;percent&quot;│&quot;type&quot;      │\r\n╞═════════╪════════════╡\r\n│50.0     │&quot;essentieel&quot;│\r\n├─────────┼────────────┤\r\n│25.0     │&quot;optioneel&quot; │\r\n└─────────┴────────────┘\r\n```",
          "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76922614#76922614",
          "title": "calculation of percentage from a column is table neo4j/Cypher"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692337669,
              "post_id": 76923616,
              "comment_id": 135611948,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135611948_76923616"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692374743,
              "post_id": 76923616,
              "comment_id": 135619050,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135619050_76923616"
            },
            {
              "owner": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692600969,
              "post_id": 76923616,
              "comment_id": 135640134,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135640134_76923616"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1692637754,
              "post_id": 76923616,
              "comment_id": 135647879,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135647879_76923616"
            },
            {
              "owner": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693918208,
              "post_id": 76923616,
              "comment_id": 135820322,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135820322_76923616"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1693929977,
              "post_id": 76923616,
              "comment_id": 135823142,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135823142_76923616"
            },
            {
              "owner": {
                "reputation": 81,
                "user_id": 11359133,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Leyla Elkhamlichi",
                "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1694001865,
              "post_id": 76923616,
              "comment_id": 135833239,
              "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#comment135833239_76923616"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 7,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1692374377,
          "last_edit_date": 1692374377,
          "creation_date": 1692291215,
          "answer_id": 76923616,
          "question_id": 76921714,
          "share_link": "https://stackoverflow.com/a/76923616",
          "body_markdown": "Your `MAPS_TO` relationships apparently store the `b` property as a string, so any query must always convert it to a float to do math with it. Also, the math in your query is wrong - `r.b` should be in the numerator and `total` should be in the denominator.\r\n\r\nThis query may work for you:\r\n\r\n    MATCH (b:BOC_beroep)-[r:MAPS_TO]-&gt;(s:Soft_Skill)\r\n    WITH b.beroepstitel AS beorep, r.type AS type, s.name AS skill, SUM(TOFLOAT(r.b)) AS weight\r\n    WITH SUM(weight) As total, COLLECT([beorep, type, skill, weight]) AS data\r\n    UNWIND data AS datum\r\n    RETURN\r\n      datum[0] AS beroep,\r\n      datum[1] AS type,\r\n      datum[2] AS skill,\r\n      datum[3]/total*100 AS percent\r\n    ORDER BY percent desc\r\n\r\nThe first `WITH` clause sums all the weights for a given `beorep`, `type`, and `skill`. The second `WITH` clause calculates a total of all the weights and collects all the other data needed. The rest of the query is straightforward.\r\n\r\nHere is a sample result:\r\n\r\n    ╒════════╤════════════╤═══════╤═════════════════╕\r\n    │beroep  │type        │skill  │percent          │\r\n    ╞════════╪════════════╪═══════╪═════════════════╡\r\n    │&quot;dokter&quot;│&quot;essentieel&quot;│&quot;leren&quot;│66.66666666666666│\r\n    ├────────┼────────────┼───────┼─────────────────┤\r\n    │&quot;dokter&quot;│&quot;optioneel&quot; │&quot;leren&quot;│33.33333333333333│\r\n    └────────┴────────────┴───────┴─────────────────┘\r\n\r\n#### Recommendations\r\n\r\n 1. If you stored the `b` property as a float instead of a string, you can avoid the cost of doing `TOFLOAT` conversions all the time. You can easily convert all the stored weights this way:\r\n\r\n        MATCH ()-[r:MAPS_TO]-&gt;()\r\n        SET r.b = TOFLOAT(r.b)\r\n\r\n 2. If `type` only has 2 possible values, it would require less storage space to store that property as a boolean (named, say, `isRequired`) instead. This can also simplify queries using that property. You can easily convert that property this way:\r\n\r\n        MATCH ()-[r:MAPS_TO]-&gt;()\r\n        SET r.isRequired = CASE r.type WHEN &#39;essentieel&#39; THEN true ELSE false END\r\n        REMOVE r.type\r\n\r\n",
          "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher/76923616#76923616",
          "title": "calculation of percentage from a column is table neo4j/Cypher"
        }
      ],
      "owner": {
        "reputation": 81,
        "user_id": 11359133,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0039c046e7746346bd03f24210d9bb5e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Leyla Elkhamlichi",
        "link": "https://stackoverflow.com/users/11359133/leyla-elkhamlichi"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 76,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76923616,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1692374377,
      "creation_date": 1692276702,
      "last_edit_date": 1692289478,
      "question_id": 76921714,
      "share_link": "https://stackoverflow.com/q/76921714",
      "body_markdown": "I want to calculate percentage of how much each type of skill is present for each occupation. \r\nI made a have different nodes occupation and Soft_skills they have an relationship [r:MAPS_TO] the relationship has two property type(&#39;essentieel&#39;, &#39;optioneel&#39;)and b (this kind of weight essentieel =1.0 and optioneel =0.5)\r\n\r\nsee below een example of the file that i&#39;m using \r\n\r\n|occupation|code_occupation|skill_code|name |type    |b\r\n|----------|----------------|---------|---- |--------|---\r\n|dokter    | sk_565         |sk_687   |leren|optioneel|0.5\r\n|dokter    | sk_565         |sk_687   |leren|optioneel|0.5\r\n|dokter    | sk_565         |sk_687   |leren|essentieel|1.0\r\n|dokter    | sk_565         |sk_687   |leren|essentieel|1.0\r\n\r\n\r\ni made a query where i can calculate what the sum is for each occupation see below my query:\r\n\r\n```\r\nmatch (b:BOC_beroep)-[r:MAPS_TO]-(s:Soft_Skill)                                                     \r\nreturn b.beroepstitel as beroep,                             \r\nsum(toFloat(r.b)) as sum order by sum desc                         \r\nlimit 10\r\n```\r\nthis is my output \r\n\r\n|beroep|sum\r\n|------|----\r\n|Doker | 5\r\n|Kapper| 7\r\n\r\nknow i want to achieve what the percentage is of the type of skill my calculation will be \r\n```\r\nDokter have in total 4 skills en the percentage of each skill is \r\n2/4 * 100 = 50% essentieel \r\n1/4 * 100 = 25% optioneel \r\n\r\ni was trying to make a new calculation with this query:\r\n\r\n  MATCH (b:BOC_beroep)-[r:MAPS_TO]-&gt;(s:Soft_skill)\r\n  WITH SUM(toFloat(r.b)) As total\r\n  MATCH (b:BOC_beroep)-[r:MAPS_TO]-&gt;(s:Soft_Skill)\r\n  RETURN b.beroepstitel  AS beroep, \r\n  (toFloat(total/(r.b)))*100 AS percent\r\n  order by percent desc\r\n```\r\n\r\nMy output is Cannot divide &#39;Long&#39; by &#39;string&#39;\r\nI don&#39;t understand the erorr \r\n\r\n\r\ni was inspired by this question and answer\r\nHere&#39;s an inline link to [stackoverflow](https://stackoverflow.com/questions/37902749/how-to-group-by-and-calculate-percentage-using-cypher-queries-in-neo4j).\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76921714/calculation-of-percentage-from-a-column-is-table-neo4j-cypher",
      "title": "calculation of percentage from a column is table neo4j/Cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692187947,
          "post_id": 76910603,
          "comment_id": 135589289,
          "link": "https://stackoverflow.com/questions/76910603/cypher-query-warning-give-inconsistent-result-when-fix#comment135589289_76910603"
        },
        {
          "owner": {
            "reputation": 796,
            "user_id": 11399551,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/3b5901a38c264794ef8cbe31a2ecd076?s=256&d=identicon&r=PG",
            "display_name": "Thinh Tran",
            "link": "https://stackoverflow.com/users/11399551/thinh-tran"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1692691788,
          "post_id": 76910603,
          "comment_id": 135654888,
          "link": "https://stackoverflow.com/questions/76910603/cypher-query-warning-give-inconsistent-result-when-fix#comment135654888_76910603"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1692190305,
          "creation_date": 1692190305,
          "answer_id": 76913741,
          "question_id": 76910603,
          "share_link": "https://stackoverflow.com/a/76913741",
          "body_markdown": "The deprecated syntax on line 4 can be also done when you aggregate the data.values after you define the dictionary {column: , value:}\r\n\r\nThus, no need to do the collect in line 4 since it is a duplication of the collect in line 5 later on. Instead, define the columns in line 5 so that will be in line with what you want on line 6. See updated query below.\r\n\r\n\r\n\r\n    1 MATCH (n:test) with n limit 100\r\n    2 WITH DISTINCT n, keys(n) AS allKeys\r\n    3 UNWIND allKeys AS key\r\n    4 with n, \r\n        CASE\r\n            WHEN key STARTS WITH &#39;prop.title&#39; THEN {column: &#39;title&#39;, value: n[key]}\r\n            WHEN key STARTS WITH &#39;prop.keywords&#39; THEN {column: &#39;keywords&#39;, value: n[key]}\r\n        END AS data\r\n    5 WITH n, data.column as columns, collect(data.value) as values  \r\n    6 RETURN n.id as id, apoc.map.fromPairs(collect([columns, values]))",
          "link": "https://stackoverflow.com/questions/76910603/cypher-query-warning-give-inconsistent-result-when-fix/76913741#76913741",
          "title": "Cypher query warning give inconsistent result when fix"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 66,
            "user_id": 22399046,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtef2pcA5qRCZfoFhzQFR9KkVGKspnu9dEd5GlpGkMTFcg=k-s256",
            "display_name": "Linn&#233;a Andersson",
            "link": "https://stackoverflow.com/users/22399046/linn%c3%a9a-andersson"
          },
          "last_editor": {
            "reputation": 66,
            "user_id": 22399046,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtef2pcA5qRCZfoFhzQFR9KkVGKspnu9dEd5GlpGkMTFcg=k-s256",
            "display_name": "Linn&#233;a Andersson",
            "link": "https://stackoverflow.com/users/22399046/linn%c3%a9a-andersson"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 5,
          "is_accepted": true,
          "score": 5,
          "last_activity_date": 1692190815,
          "last_edit_date": 1692190815,
          "creation_date": 1692190771,
          "answer_id": 76913801,
          "question_id": 76910603,
          "share_link": "https://stackoverflow.com/a/76913801",
          "body_markdown": "I believe you could rewrite your query to something like this:\r\n\r\n    MATCH (n:test) with n limit 100 \r\n    WITH DISTINCT n, keys(n) AS allKeys\r\n    UNWIND allKeys AS key\r\n    WITH n, \r\n        // Note: in the original query you used the aggregation expression `collect` which made `key` an implicit grouping key.\r\n        CASE\r\n          WHEN key STARTS WITH &#39;prop.title&#39; THEN {column: &#39;title&#39;, value:n[key]}\r\n          WHEN key STARTS WITH &#39;prop.keywords&#39; THEN {column: &#39;keywords&#39;, value:n[key]}\r\n        END AS data\r\n    WITH n, data.column AS column, collect(data.value) as values\r\n    RETURN n.id, apoc.map.fromPairs(COLLECT([column, values]))\r\n\r\nThe problem with your original query was that you used non-grouping keys outside of an aggregation expression, so called &quot;implicit grouping keys&quot;. Prior to neo4j 5.0 we allowed implicit grouping keys, but as that can get very confusing it was removed in 5.0. You can read more about the confusion with implicit grouping keys here: https://opencypher.org/articles/2017/07/27/ocig1-aggregations-article/\r\n\r\nSo, let&#39;s take this step-by-step:\r\n\r\nAssume that you have a single node:\r\n\r\n    CREATE (:test{`prop.title1`:&quot;title1&quot;, `prop.title2`:&quot;title2&quot;, `prop.keywords`:&quot;hey!&quot;})\r\n\r\nAfter this part of the query:\r\n\r\n    MATCH (n:test) with n limit 100\r\n    WITH DISTINCT n, keys(n) AS allKeys\r\n    UNWIND allKeys AS key\r\n\r\nYou have:\r\n\r\n| n   | key             | allKeys                                         |\r\n| ---- | --------------- | ----------------------------------------------- |\r\n| n | &quot;prop.title1&quot;   | \\[&quot;prop.title1&quot;, &quot;prop.title2&quot;, &quot;prop.keywords&quot;] |\r\n| n | &quot;prop.title2&quot;   | \\[&quot;prop.title1&quot;, &quot;prop.title2&quot;, &quot;prop.keywords&quot;] |\r\n| n | &quot;prop.keywords&quot; | \\[&quot;prop.title1&quot;, &quot;prop.title2&quot;, &quot;prop.keywords&quot;]` |\r\n\r\nLet&#39;s have a look at the next part of the original query: \r\n\r\n    with n, \r\n    CASE\r\n        WHEN key STARTS WITH &#39;prop.title&#39; THEN {column: &#39;title&#39;, value: collect(n[key])}\r\n        WHEN key STARTS WITH &#39;prop.keywords&#39; THEN {column: &#39;keywords&#39;, value: collect(n[key])}\r\n    END AS data\r\n\r\nthe explicit grouping keys are the projected variables/properties that does not contain any aggregations - which in this case is `n`. That means that all other variables which are used outside of an aggregation expression are &quot;implicit&quot; grouping keys - in your case the implicit grouping key is `key`. Implicit grouping keys are no longer supported from 5.0. But, instead of adding it as an explicit grouping key, you can remove the aggregation expression &quot;collect&quot;:\r\n\r\n\r\n    WITH n, \r\n         CASE\r\n           WHEN key STARTS WITH &#39;prop.title&#39; THEN {column: &#39;title&#39;, value:n[key]}\r\n           WHEN key STARTS WITH &#39;prop.keywords&#39; THEN {column: &#39;keywords&#39;, value:n[key]}\r\n         END AS data\r\n\r\nThis would mean that we know have:\r\n\r\n| n | data                                |\r\n| ---- | ----------------------------------- |\r\n| n | {column: &quot;title&quot;, value: &quot;title1&quot;}  |\r\n| n | {column: &quot;title&quot;, value: &quot;title2&quot; } |\r\n| n | {column: &quot;keywords&quot;, value: &quot;hey!&quot;}` |\r\n\r\nIf you now look at the next part of the original query:\r\n\r\n    with n, data, collect(data.value) as values\r\n\r\nYou again have the aggregation expression `collect` with grouping keys `n` and `data`. But you don&#39;t want to group on the full `data` object, instead you want to collect all `data.values` grouped by `n` and `data.column`:\r\n\r\n    WITH n, data.column AS column, collect(data.value) as values\r\n\r\nWhich gives us:\r\n\r\n| n | column            |  values |\r\n| ---- | --------------- | -------- |\r\n| n | &quot;title&quot; | [&quot;title1&quot;, &quot;title2&quot;]   |\r\n| n | &quot;keywords&quot; | [&quot;hey!&quot;] |\r\n\r\n\r\nI hope this made it a bit more clear",
          "link": "https://stackoverflow.com/questions/76910603/cypher-query-warning-give-inconsistent-result-when-fix/76913801#76913801",
          "title": "Cypher query warning give inconsistent result when fix"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1692208758,
          "creation_date": 1692208758,
          "answer_id": 76916010,
          "question_id": 76910603,
          "share_link": "https://stackoverflow.com/a/76916010",
          "body_markdown": "This simpler query may work for your use case:\r\n\r\n    MATCH (n:test) WITH n LIMIT 100\r\n    UNWIND KEYS(n) AS key\r\n    WITH n, key, CASE\r\n      WHEN key STARTS WITH &#39;prop.title&#39; THEN &#39;title&#39;\r\n      WHEN key STARTS WITH &#39;prop.keywords&#39; THEN &#39;keywords&#39;\r\n      END AS type\r\n    WHERE type IS NOT NULL\r\n    WITH n, type, COLLECT(n[key]) AS values\r\n    RETURN n.id, apoc.map.fromPairs(COLLECT([type, values]))\r\n\r\nThe `WITH DISTINCT n, ...` clause did not do anything (and was deleted), since we already know from the preceding `MATCH` clause that all `n` values would be distinct.",
          "link": "https://stackoverflow.com/questions/76910603/cypher-query-warning-give-inconsistent-result-when-fix/76916010#76916010",
          "title": "Cypher query warning give inconsistent result when fix"
        }
      ],
      "owner": {
        "reputation": 796,
        "user_id": 11399551,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3b5901a38c264794ef8cbe31a2ecd076?s=256&d=identicon&r=PG",
        "display_name": "Thinh Tran",
        "link": "https://stackoverflow.com/users/11399551/thinh-tran"
      },
      "last_editor": {
        "reputation": 796,
        "user_id": 11399551,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3b5901a38c264794ef8cbe31a2ecd076?s=256&d=identicon&r=PG",
        "display_name": "Thinh Tran",
        "link": "https://stackoverflow.com/users/11399551/thinh-tran"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 162,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 76913801,
      "answer_count": 3,
      "score": 2,
      "last_activity_date": 1692208758,
      "creation_date": 1692161500,
      "last_edit_date": 1692161842,
      "question_id": 76910603,
      "share_link": "https://stackoverflow.com/q/76910603",
      "body_markdown": "When I run this query:\r\n```\r\nMATCH (n:test) with n limit 100\r\nWITH DISTINCT n, keys(n) AS allKeys\r\nUNWIND allKeys AS key\r\nwith n, \r\n    CASE\r\n        WHEN key STARTS WITH &#39;prop.title&#39; THEN {column: &#39;title&#39;, value: collect(n[key])}\r\n        WHEN key STARTS WITH &#39;prop.keywords&#39; THEN {column: &#39;keywords&#39;, value: collect(n[key])}\r\n    END AS data\r\nwith n, data, collect(data.value) as values\r\nRETURN n.id, apoc.map.fromPairs(COLLECT([data.column, values]))\r\n```\r\nThis query purpose is to find all the property with given prefix and group their value into an object with apoc. An example result would be like so: [![Correct result][1]][1]\r\n\r\nMy issue start when Cypher give me this warning: `This feature is deprecated and will be removed in future versions.` with status code `Neo.ClientNotification.Statement.FeatureDeprecationWarning`\r\n[![This is the warning that I get when running the previous query][2]][2]\r\nThen I try to fix the query by adding the `key` to the `WITH` keyword, like so: `WITH n, key, CASE ...`\r\nBut now the value in my object (`collect(n[key])`) does not return all of the value anymore and only the last one. I guess the rest have been overrides. [![Wrong result][3]][3]\r\n\r\nDoes anyone knows how to fix this but still remove the warning?\r\n\r\nEDIT: I found out that by changing `n` to `*` in the first query without the `key` added, I get the same wrong result. Also add pictures.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ffCF3.png\r\n  [2]: https://i.stack.imgur.com/IvsrR.png\r\n  [3]: https://i.stack.imgur.com/yhPPA.png",
      "link": "https://stackoverflow.com/questions/76910603/cypher-query-warning-give-inconsistent-result-when-fix",
      "title": "Cypher query warning give inconsistent result when fix"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1691911723,
              "post_id": 76891240,
              "comment_id": 135553043,
              "link": "https://stackoverflow.com/questions/76891207/cypher-reusing-information-with-exists-as-varname-and-then-use-varname-fail/76891240#comment135553043_76891240"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 5,
            "user_id": 19900735,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a-/AFdZucoRdN8MF5N5gwwFijn_xkjbl6If9GQa0v_OEtPkIA=k-s256",
            "display_name": "Shooper",
            "link": "https://stackoverflow.com/users/19900735/shooper"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1691876721,
          "creation_date": 1691876721,
          "answer_id": 76891240,
          "question_id": 76891207,
          "share_link": "https://stackoverflow.com/a/76891240",
          "body_markdown": "Despite that the query is not optimal \r\nthe error is  simply the semicolon i put in in line 5\r\n\r\nafter removing it, i get the expected result.\r\n\r\nI hope the snippet helps someone anyways, for optimization ideas please reply\r\n",
          "link": "https://stackoverflow.com/questions/76891207/cypher-reusing-information-with-exists-as-varname-and-then-use-varname-fail/76891240#76891240",
          "title": "Cypher, Reusing information, with EXISTS{} as varname and then use varname, fails"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 5,
                "user_id": 19900735,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AFdZucoRdN8MF5N5gwwFijn_xkjbl6If9GQa0v_OEtPkIA=k-s256",
                "display_name": "Shooper",
                "link": "https://stackoverflow.com/users/19900735/shooper"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691940162,
              "post_id": 76892345,
              "comment_id": 135555746,
              "link": "https://stackoverflow.com/questions/76891207/cypher-reusing-information-with-exists-as-varname-and-then-use-varname-fail/76892345#comment135555746_76892345"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 5,
                "user_id": 19900735,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AFdZucoRdN8MF5N5gwwFijn_xkjbl6If9GQa0v_OEtPkIA=k-s256",
                "display_name": "Shooper",
                "link": "https://stackoverflow.com/users/19900735/shooper"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691945238,
              "post_id": 76892345,
              "comment_id": 135556292,
              "link": "https://stackoverflow.com/questions/76891207/cypher-reusing-information-with-exists-as-varname-and-then-use-varname-fail/76892345#comment135556292_76892345"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1691917696,
          "last_edit_date": 1691917696,
          "creation_date": 1691911459,
          "answer_id": 76892345,
          "question_id": 76891207,
          "share_link": "https://stackoverflow.com/a/76892345",
          "body_markdown": "Even after you remove the erroneous semicolon in line 5, your query would not completely work the way you want. That is because when `A` is false the `WHERE A` clause would immediately end your query (and it would never return &#39;error&#39;).\r\n\r\nThis query will work as you intended:\r\n\r\n    MATCH (a:User), (b:User)\r\n    WHERE ID(a) = 0 AND ID(b) = 1\r\n    WITH a, b, NOT (b)-[*]-&gt;(a) as A\r\n    CALL {\r\n      WITH *\r\n      WITH * WHERE A\r\n      MERGE (a)-[:has_connection]-&gt;(:Connection)-[:supports]-&gt;(b)\r\n    }\r\n    RETURN CASE A\r\n      WHEN TRUE THEN &#39;success&#39;\r\n      ELSE &#39;error&#39; END AS result\r\n\r\nThis query uses a [CALL subquery](https://neo4j.com/docs/cypher-manual/current/clauses/call-subquery/) to avoid ending the query prematurely when `A` is false.",
          "link": "https://stackoverflow.com/questions/76891207/cypher-reusing-information-with-exists-as-varname-and-then-use-varname-fail/76892345#76892345",
          "title": "Cypher, Reusing information, with EXISTS{} as varname and then use varname, fails"
        }
      ],
      "owner": {
        "reputation": 5,
        "user_id": 19900735,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AFdZucoRdN8MF5N5gwwFijn_xkjbl6If9GQa0v_OEtPkIA=k-s256",
        "display_name": "Shooper",
        "link": "https://stackoverflow.com/users/19900735/shooper"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1691917696,
      "creation_date": 1691876010,
      "last_edit_date": 1691899740,
      "question_id": 76891207,
      "share_link": "https://stackoverflow.com/q/76891207",
      "body_markdown": "My Query should create a Connection from A to B if this doesn&#39;t lead to a cycle. This means I can&#39;t connect A to B if there is already a connection from B to A.\r\n\r\nI have following query:\r\n\r\n```\r\n\r\n1   MATCH (a:User) WHERE ID(a) = 0 \r\n2   MATCH (b:User) WHERE ID(b) = 1\r\n3   WITH a, b, NOT EXISTS{(b)-[*]-&gt;(a)} as A\r\n4   WHERE A\r\n5   MERGE (a)-[:has_connection]-&gt;(:Connection)-[:supports]-&gt;(b);\r\n6   RETURN \r\n7   CASE A\r\n8       WHEN TRUE THEN &#39;success&#39;\r\n9       ELSE &#39;error&#39;\r\n10  END \r\n```\r\n\r\n1, 2 -\\&gt; I just find 2 nodes and name them a and b  \r\n3 -\\&gt; I want to check if there is no connection from b to a and save the result in the variable A  \r\n4,5 -\\&gt; if A is true I want to create a connection from a to b  \r\n6 - 10 -\\&gt; I return a debug string by the condition A\r\n\r\nI thought this syntax is correct but I am getting following error:\r\n\r\n```\r\nNeo.ClientError.Statement.SyntaxError: Variable `A` not defined (line 2, column 10 (offset: 18))\r\n&quot;    CASE A&quot;\r\n          ^\r\n```\r\n\r\nI must have misunderstand scopes in Cypher.\r\n\r\nCan someone explain me what I am doing wrong?\r\n\r\nI am expecting to get the result &quot;success&quot; if there was no connection from b to a and if there was a connection I want to get the result &quot;error&quot;.",
      "link": "https://stackoverflow.com/questions/76891207/cypher-reusing-information-with-exists-as-varname-and-then-use-varname-fail",
      "title": "Cypher, Reusing information, with EXISTS{} as varname and then use varname, fails"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1691785585,
          "post_id": 76886401,
          "comment_id": 135543783,
          "link": "https://stackoverflow.com/questions/76886401/neo4j-match-and-2-merges#comment135543783_76886401"
        },
        {
          "owner": {
            "reputation": 3996,
            "user_id": 3897214,
            "user_type": "registered",
            "accept_rate": 56,
            "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Antony",
            "link": "https://stackoverflow.com/users/3897214/antony"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1691788070,
          "post_id": 76886401,
          "comment_id": 135544051,
          "link": "https://stackoverflow.com/questions/76886401/neo4j-match-and-2-merges#comment135544051_76886401"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1691788661,
          "creation_date": 1691788661,
          "answer_id": 76886698,
          "question_id": 76886401,
          "share_link": "https://stackoverflow.com/a/76886698",
          "body_markdown": "There are several things wrong with this query.\r\n\r\n - Your WHERE clause doesn&#39;t reference a node property, you need to use dot notation to indicate the node for which the predicate applies: `WHERE n.CompanyID = $CompanyID`\r\n - The RETURN is in an invalid position. You cannot use it here in the middle of the query. It should only go at the end of a subquery, or at the end of the query itself. In this case, you can remove the RETURN entirely, unless you want something returned from the query when it finishes, in which case the RETURN should be at the very end.\r\n\r\nBest practice here, especially when you are still learning Cypher, is to use the Neo4j Browser to ensure the syntax is correct. You can prefix the query with EXPLAIN to just make sure it compiles properly, and if not follow the error messages to correct syntax issues.",
          "link": "https://stackoverflow.com/questions/76886401/neo4j-match-and-2-merges/76886698#76886698",
          "title": "Neo4j match and 2 merges"
        }
      ],
      "owner": {
        "reputation": 3996,
        "user_id": 3897214,
        "user_type": "registered",
        "accept_rate": 56,
        "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Antony",
        "link": "https://stackoverflow.com/users/3897214/antony"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1691788661,
      "creation_date": 1691783892,
      "last_edit_date": 1691785168,
      "question_id": 76886401,
      "share_link": "https://stackoverflow.com/q/76886401",
      "body_markdown": "I have the following Neo4j Cypher query which is hopefully fairly obvious:\r\n\r\n    MATCH (n:Companies) WHERE CompanyID = $CompanyID \r\n    MERGE (c:Countries {CountryISOCode:$CountryID}) RETURN c \r\n    MERGE (n)-[r:MasterLink {Type:$Link}]-&gt;(c)\r\n\r\nI have already created `n:Companies` so watch to match that, create a Country and then tie the two together. What am I doing wrong? (All parameters are provided)",
      "link": "https://stackoverflow.com/questions/76886401/neo4j-match-and-2-merges",
      "title": "Neo4j match and 2 merges"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 56,
            "user_id": 16625291,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8a80f7049929e4f158e7ecdc9921911d?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "valdrake",
            "link": "https://stackoverflow.com/users/16625291/valdrake"
          },
          "last_editor": {
            "reputation": 56,
            "user_id": 16625291,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8a80f7049929e4f158e7ecdc9921911d?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "valdrake",
            "link": "https://stackoverflow.com/users/16625291/valdrake"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 4,
          "is_accepted": true,
          "score": 4,
          "last_activity_date": 1691488973,
          "last_edit_date": 1691488973,
          "creation_date": 1691487940,
          "answer_id": 76858359,
          "question_id": 76857284,
          "share_link": "https://stackoverflow.com/a/76858359",
          "body_markdown": "It does not work on all levels because you are anchoring the first node OF EACH iteration to be ‘Atma ram’. That works for the first iteration, but the second (and following) iterations will not start with the ‘Atma ram’ node, so you only get results from the first one.\r\n\r\nI guess you want to anchor the starting point of the whole repetitions, not the starting point of every iteration.\r\nTo do that, you need to extract the starting point out of the repetition parenthesis:\r\n```\r\n MATCH (s:Person where s.name = &#39;Atma ram&#39;) ((p)&lt;-[:IS_MAN_OF]-(m:Marriage)-[:IS_SON_OF]-&gt;(p1:Person)){1,} return p, p1\r\n```\r\n\r\n(s:Person where s.name = &#39;Atma ram&#39;) is the anchor, it matches the start node, and on the first iteration, is joined with (p) (see [equijoins](https://neo4j.com/docs/cypher-manual/current/patterns/concepts/#equijoins) in the docs).\r\nOn the second iteration, the end node of the first iteration (p1) will join with the first node of the second iteration (p), allowing the path to repeat, and so on.\r\n\r\nIf you look at the documentation, Concepts, [Quantified Path Pattern section](https://neo4j.com/docs/cypher-manual/current/patterns/concepts/#quantified-path-patterns), you’ll get a more detailed example that anchors both the start end the end station of a rail trip. You can anchor the end of repetitions similarly as you can anchor the start.\r\n\r\nHope it helps\r\n",
          "link": "https://stackoverflow.com/questions/76857284/quantifying-path-patterns/76858359#76858359",
          "title": "Quantifying path patterns"
        }
      ],
      "owner": {
        "reputation": 3385,
        "user_id": 2037570,
        "user_type": "registered",
        "accept_rate": 71,
        "profile_image": "https://www.gravatar.com/avatar/5fa24420cee32bd1d97e2fd3a61de37f?s=256&d=identicon&r=PG",
        "display_name": "Hemant Bhargava",
        "link": "https://stackoverflow.com/users/2037570/hemant-bhargava"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 222,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76858359,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1691510816,
      "creation_date": 1691479420,
      "last_edit_date": 1691510816,
      "question_id": 76857284,
      "share_link": "https://stackoverflow.com/q/76857284",
      "body_markdown": "I am learning neo4j right now and understood/created the relationships between the nodes. I am trying to understand the quantifying path patterns. It seems like I was able to write the general queries to figure out the relationships between the nodes.\r\n\r\nConsider this snapshot for the discussion:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Vw5XT.png)](https://i.stack.imgur.com/Vw5XT.png)\r\n\r\n\r\n&#39;Purple&#39; are the Person nodes and &#39;red&#39; nodes are the Marriage nodes. I wrote this path pattern to get me all the relationship paths:\r\n\r\n    match ((p:Person)&lt;-[:IS_MAN_OF]-(m:Marriage)-[:IS_SON_OF]-&gt;(p1:Person)){1,} return p, p1\r\n\r\nThis returns me all the combinations at all the **levels** like\r\n\r\n    Atma Ram - Tek Chand\r\n    Atma Ram - Mukesh\r\n    Tek Chand - Hemant\r\n    Tek Chand - Rocky\r\n    Mukesh - Dimpy\r\n\r\nAlright. This make complete sense to me.\r\n\r\nWhat does not make sense is that If I add an where clause in my quantifying pattern, it **does not give me nodes at more than 1 level.** This is the patterns I used along with where.\r\n\r\n     match ((p:Person where p.name = &#39;Atma ram&#39;)&lt;-[:IS_MAN_OF]-(m:Marriage)-[:IS_SON_OF]-&gt;(p1:Person)){1,} return p, p1\r\n\r\nI am curios to know the reason as to why does it not work for all levels. Also, what shall I write to get all the nodes at all levels even for an where clause.\r\n\r\nThank you.\r\n\r\nTried giving different combinations of min &amp; max in the curly braces.",
      "link": "https://stackoverflow.com/questions/76857284/quantifying-path-patterns",
      "title": "Quantifying path patterns"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3,
                "user_id": 22352646,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
                "display_name": "SimG",
                "link": "https://stackoverflow.com/users/22352646/simg"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691565643,
              "post_id": 76854610,
              "comment_id": 135507184,
              "link": "https://stackoverflow.com/questions/76852512/apoc-periodic-iterate-never-return-a-result/76854610#comment135507184_76854610"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 3,
                "user_id": 22352646,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
                "display_name": "SimG",
                "link": "https://stackoverflow.com/users/22352646/simg"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691596815,
              "post_id": 76854610,
              "comment_id": 135513982,
              "link": "https://stackoverflow.com/questions/76852512/apoc-periodic-iterate-never-return-a-result/76854610#comment135513982_76854610"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1691517440,
          "last_edit_date": 1691517440,
          "creation_date": 1691435915,
          "answer_id": 76854610,
          "question_id": 76852512,
          "share_link": "https://stackoverflow.com/a/76854610",
          "body_markdown": "There are some issues with your query.\r\n\r\nThe main problem may be that your logic is trying to process 10000 communities (and all of their officers) in each transaction, which may be way too much data to handle per transaction.\r\n\r\nThe other issue is that you are `COLLECT`ing the nodes *twice* per community. The second time, you are just counting the size of the collection -- but you are doing that in a very inefficient way -- instead of `SIZE(COLLECT(n))` you should have just used `COUNT(n)`. But even worse, you immediately throw away the count because you don&#39;t return it. So, you need to completely eliminate the counting.\r\n\r\nThis query, which addresses the above issues, may work better for you. You will have to determine for yourself the best `batchSize` for your data.\r\n\r\n    CALL apoc.periodic.iterate(&#39;\r\n        MATCH (n:Officer)\r\n        WITH n.community AS com, collect(n) AS nodicom\r\n        RETURN nodicom\r\n      &#39;,&#39;\r\n        CALL apoc.refactor.mergeNodes(nodicom,{\r\n            properties:&quot;discard&quot;, mergeRels:true, preserveExistingSelfRels:false}) YIELD node\r\n      &#39;,{batchSize: 200, parallel: true})\r\n    YIELD batches, total\r\n    RETURN batches, total\r\n\r\n",
          "link": "https://stackoverflow.com/questions/76852512/apoc-periodic-iterate-never-return-a-result/76854610#76854610",
          "title": "apoc.periodic.iterate never return a result"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22352646,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
        "display_name": "SimG",
        "link": "https://stackoverflow.com/users/22352646/simg"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 118,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76854610,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1691517440,
      "creation_date": 1691417106,
      "last_edit_date": 1691429661,
      "question_id": 76852512,
      "share_link": "https://stackoverflow.com/q/76852512",
      "body_markdown": "in my database I have multiple nodes that have the same properties, so I want to merge all of these nodes into one. Those nodes are connected by the relationship &quot;similar&quot;, so I use gds weakly connected component to find these communities:\r\n\r\n    CALL gds.graph.project(&quot;similar_officer&quot;,[&quot;Officer&quot;],[&quot;similar&quot;])\r\n\r\n    CALL gds.wcc.write(&#39;similar_officer&#39;, { writeProperty: &#39;community&#39; }) YIELD nodePropertiesWritten, componentCount;\r\n\r\nSo every node has the new property community which identifies all nodes in a community connected by the relationship &quot;similar&quot;\r\n\r\nHere is the problem: I want to iterate the command to merge all nodes into each community into one\r\n\r\n\r\nI tested with a single community with this code:\r\n\r\n    MATCH (a)\r\n    where a.community=235631\r\n    with collect(a) as community\r\n    CALL apoc.refactor.mergeNodes(community,{properties:&quot;discard&quot;, mergeRels:true,preserveExistingSelfRels:false})\r\n    YIELD node\r\n    RETURN count(*)\r\n\r\nand it worked in less than a minute and it was the biggest community so I wrote this to iterate for each community:\r\n\r\n    call apoc.periodic.iterate(&#39;\r\n        MATCH (n:Officer)\r\n        with n.community as numerocom, collect(n) as nodicom, size(collect(n)) as dimcom\r\n        return numerocom, nodicom\r\n      &#39;,&#39;\r\n        CALL apoc.refactor.mergeNodes(nodicom,{\r\n            properties:&quot;discard&quot;, mergeRels:true, preserveExistingSelfRels:false}) YIELD node\r\n        return node\r\n      &#39;,{batchSize:10000, parallel:True})\r\n    YIELD batches, total\r\n    RETURN batches, total\r\n\r\nThe result is a never-ending query. I have 13428 communities and the biggest one has 60 nodes.\r\n\r\nHow can I fix this?",
      "link": "https://stackoverflow.com/questions/76852512/apoc-periodic-iterate-never-return-a-result",
      "title": "apoc.periodic.iterate never return a result"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 19,
                "user_id": 21351077,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG",
                "display_name": "newbie",
                "link": "https://stackoverflow.com/users/21351077/newbie"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691332540,
              "post_id": 76843130,
              "comment_id": 135474449,
              "link": "https://stackoverflow.com/questions/76841783/adding-elements-to-an-already-existing-graph-in-neo4j/76843130#comment135474449_76843130"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1691462033,
          "last_edit_date": 1691462033,
          "creation_date": 1691262178,
          "answer_id": 76843130,
          "question_id": 76841783,
          "share_link": "https://stackoverflow.com/a/76843130",
          "body_markdown": "[It seems](https://github.com/neo4j-contrib/neo4j-apoc-procedures/issues/1048) the ability to avoid creating duplicates of existing nodes was discussed but not implemented for `apoc.import.csv`, because it would slow down the procedure. That procedure is really intended for loading a new database.\r\n\r\nAs an alternative, you could just do the import using [LOAD CSV](https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/) and [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/). `MERGE` is used in this query to only create the node if it does not yet exist:\r\n\r\n    LOAD CSV FROM &#39;file:///add.csv&#39; AS row\r\n    MERGE (a1:Account {id: row[1]})\r\n    MERGE (a2:Account {id: row[2]})\r\n    CREATE (a1)-[:transaction {id: row[0], timestamp: row[3]}]-&gt;(a2)\r\n\r\nNOTE: You can speed this query up by create an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) or [uniqueness constraint](https://neo4j.com/docs/cypher-manual/current/constraints/) on `:Account(id)`. Also, you should probably remove the first row (the header) from your data file, as the above query assumes it is not there.",
          "link": "https://stackoverflow.com/questions/76841783/adding-elements-to-an-already-existing-graph-in-neo4j/76843130#76843130",
          "title": "Adding Elements to an Already Existing Graph in Neo4j"
        }
      ],
      "owner": {
        "reputation": 19,
        "user_id": 21351077,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG",
        "display_name": "newbie",
        "link": "https://stackoverflow.com/users/21351077/newbie"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76843130,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1691462033,
      "creation_date": 1691240771,
      "last_edit_date": 1691260525,
      "question_id": 76841783,
      "share_link": "https://stackoverflow.com/q/76841783",
      "body_markdown": "I have a question about how to add elements to an already existing graph in Neo4j.\r\n\r\nFirst, I have created nodes and relationships using the following query:\r\n\r\n    CALL apoc.import.csv(\r\n        [{fileName: &quot;file:///accounts.csv&quot;, labels:[&quot;Account&quot;]}],\r\n        [{fileName: &quot;file:///transactions.csv&quot;, type:&quot;transaction&quot;}],\r\n        {ignoreDuplicateNodes: true}\r\n    )\r\n\r\nwhere the contents of `accounts.csv` and `transactions.csv` are as follows:\r\n\r\n##### accounts.csv\r\n    acct_id:ID\r\n    &quot;3240&quot;\r\n    &quot;6399&quot;\r\n    &quot;4771&quot;\r\n    &quot;2066&quot;\r\n\r\n##### transactions.csv\r\n    id,from_acct:START_ID,to_acct:END_ID,timestamp\r\n    221214,6399,3240,2022-12-15\r\n    221223,4771,3240,2022-12-23\r\n    221229,2066,3240,2022-12-29\r\n\r\nSo far, I have been able to create graphs without any problems.\r\n\r\nNext, I tried to read the data from `add.csv` one row at a time and add nodes and relationships to the graph created by the above query, but I failed. The contents of `add.csv` are as follows:\r\n\r\n##### add.csv\r\n    id,from_acct:START_ID,to_acct:END_ID,timestamp\r\n    221243,1000,3240,2023-1-1\r\n    221247,3000,3241,2023-1-2\r\n\r\nFor `add.csv` data, I only want to create nodes that do not yet exist. All relationships should be created, however.\r\n\r\nIn other words, in the first line, the node with `acct_id:3240` already exists, so I would like to add only the node with `acct_id:1000` to the graph and create a relationship with the node with `acct_id:3240`. In the second line, the node with `acct_id:3000` and the node with `acct_id:3241` both do not exist, so I would like to add both of them as new nodes and create a relationship with them.\r\n",
      "link": "https://stackoverflow.com/questions/76841783/adding-elements-to-an-already-existing-graph-in-neo4j",
      "title": "Adding Elements to an Already Existing Graph in Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691200527,
              "post_id": 76831994,
              "comment_id": 135464113,
              "link": "https://stackoverflow.com/questions/76831772/get-all-the-relations-between-models-including-node-data/76831994#comment135464113_76831994"
            },
            {
              "owner": {
                "user_type": "does_not_exist",
                "display_name": "user4417327"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691227675,
              "post_id": 76831994,
              "comment_id": 135465835,
              "link": "https://stackoverflow.com/questions/76831772/get-all-the-relations-between-models-including-node-data/76831994#comment135465835_76831994"
            }
          ],
          "tags": [],
          "owner": {
            "user_type": "does_not_exist",
            "display_name": "user4417327"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1691102553,
          "creation_date": 1691102553,
          "answer_id": 76831994,
          "question_id": 76831772,
          "share_link": "https://stackoverflow.com/a/76831994",
          "body_markdown": "The start and end keys are refering to the Neo4j internal node identifiers, which should not be used outside from Neo4j, as they can change over time.\r\n\r\nYour query itself shouldn&#39;t require using those; the following query should work:\r\n\r\n    MATCH (c:Contact {contact_id: &#39;111&#39;})-[t:TRANSACTION*1..3]-()\r\n    RETURN c, t\r\n\r\nUsing distinct(t) is not required, as Neo4j does not the same relation twice inside a single path.",
          "link": "https://stackoverflow.com/questions/76831772/get-all-the-relations-between-models-including-node-data/76831994#76831994",
          "title": "Get all the relations between models including node data"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1691200985,
          "last_edit_date": 1691200985,
          "creation_date": 1691165842,
          "answer_id": 76837637,
          "question_id": 76831772,
          "share_link": "https://stackoverflow.com/a/76837637",
          "body_markdown": "This may work for you:\r\n\r\n    MATCH (:Contact {contact_id: &#39;111&#39;})-[rs:TRANSACTION*..3]-()\r\n    UNWIND rs AS r\r\n    WITH DISTINCT\r\n      STARTNODE(r).contact_id AS from,\r\n      ENDNODE(r).contact_id AS to,\r\n      r\r\n    WITH from, to, COLLECT(r.amount) AS amounts\r\n    RETURN COLLECT({from: from, to: to, amounts: amounts}) AS result\r\n\r\nThis query gets all distinct relationships for each `from/to` pair, collects the `amount` values for each pair, and then returns all the results in a single list.\r\n\r\nNote: If N relationships for the same pair have the same `amount`, then that `amount` will appear N times in the `transactions` list for that pair. I presume this is what you wanted.\r\n\r\nThe results should look something like this:\r\n\r\n    [\r\n    { \r\n        from: &#39;111&#39;,\r\n        to: &#39;222&#39;,\r\n        amounts: [10000]\r\n    },\r\n    { \r\n        from: &#39;222&#39;,\r\n        to: &#39;333&#39;,\r\n        amounts: [2000]\r\n    },\r\n    { \r\n        from: &#39;222&#39;,\r\n        to: &#39;444&#39;,\r\n        amounts: [4000]\r\n    }\r\n    ]",
          "link": "https://stackoverflow.com/questions/76831772/get-all-the-relations-between-models-including-node-data/76837637#76837637",
          "title": "Get all the relations between models including node data"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 8570478,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-CF33UID-J2w/AAAAAAAAAAI/AAAAAAAAAs8/R7fMfuAiBq4/photo.jpg?sz=256",
        "display_name": "Diego Fernandez",
        "link": "https://stackoverflow.com/users/8570478/diego-fernandez"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 42,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1691200985,
      "creation_date": 1691099100,
      "question_id": 76831772,
      "share_link": "https://stackoverflow.com/q/76831772",
      "body_markdown": "I have this nodes and relations, but I have a issue regarding the **from** and **to** node info\r\n\r\n  [1]: https://i.stack.imgur.com/CQP43.png\r\n\r\nI have this 3 transactions\r\n\r\n- from: 111, to: 222 -&gt; amount: $10000\r\n- from: 222, to: 333 -&gt; amount: $2000\r\n- from: 222, to: 444 -&gt; amount: $4000\r\n\r\nWith this query (not shure if it&#39;s ok) \r\n\r\n\tMATCH path = (:Contact {contact_id: &#39;111&#39;})-[t:TRANSACTION*1..3]-()\r\n\tWith relationships(path) as relations\r\n\tunwind relations as u_relations\r\n\tWith distinct(u_relations) as distinct_relations\r\n\treturn distinct_relations\r\n\r\nI get the info I need, but I can&#39;t figure it out how to add the contact_id from and to of each transaction, the result is\r\n\r\n\t{\r\n\r\n\t  &quot;identity&quot;: 0,\r\n\t  &quot;start&quot;: 0,\r\n\t  &quot;end&quot;: 1,\r\n\t  &quot;type&quot;: &quot;TRANSACTION&quot;,\r\n\t  &quot;properties&quot;: {\r\n\t    &quot;date&quot;: &quot;2023-08-03T17:08:34-03:00&quot;,\r\n\t    &quot;amount&quot;: 10000.0\r\n\t  },\r\n\t  &quot;elementId&quot;: &quot;0&quot;,\r\n\t  &quot;startNodeElementId&quot;: &quot;0&quot;,\r\n\t  &quot;endNodeElementId&quot;: &quot;1&quot;\r\n\t}\r\n\t{\r\n\t  &quot;identity&quot;: 1,\r\n\t  &quot;start&quot;: 1,\r\n\t  &quot;end&quot;: 5,\r\n\t  &quot;type&quot;: &quot;TRANSACTION&quot;,\r\n\t  &quot;properties&quot;: {\r\n\t    &quot;date&quot;: &quot;2023-08-03T17:08:34-03:00&quot;,\r\n\t    &quot;amount&quot;: 2000.0\r\n\t  },\r\n\t  &quot;elementId&quot;: &quot;1&quot;,\r\n\t  &quot;startNodeElementId&quot;: &quot;1&quot;,\r\n\t  &quot;endNodeElementId&quot;: &quot;5&quot;\r\n\t}\r\n\t{\r\n\t  &quot;identity&quot;: 2,\r\n\t  &quot;start&quot;: 1,\r\n\t  &quot;end&quot;: 6,\r\n\t  &quot;type&quot;: &quot;TRANSACTION&quot;,\r\n\t  &quot;properties&quot;: {\r\n\t    &quot;date&quot;: &quot;2023-08-03T17:08:35-03:00&quot;,\r\n\t    &quot;amount&quot;: 4000.0\r\n\t  },\r\n\t  &quot;elementId&quot;: &quot;2&quot;,\r\n\t  &quot;startNodeElementId&quot;: &quot;1&quot;,\r\n\t  &quot;endNodeElementId&quot;: &quot;6&quot;\r\n\t}\r\n\r\n\r\nHow can I use **start** and **end** keys to grab the contact_id and add it to the result?\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76831772/get-all-the-relations-between-models-including-node-data",
      "title": "Get all the relations between models including node data"
    },
    {
      "tags": ["c#", "neo4j", "cypher", "neo4jclient"],
      "owner": {
        "reputation": 11,
        "user_id": 9613515,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b1165072d5df0941ec687d4c5e8ed4ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "MochaShakaKhan",
        "link": "https://stackoverflow.com/users/9613515/mochashakakhan"
      },
      "last_editor": {
        "reputation": 11,
        "user_id": 9613515,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b1165072d5df0941ec687d4c5e8ed4ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "MochaShakaKhan",
        "link": "https://stackoverflow.com/users/9613515/mochashakakhan"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 197,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1691104168,
      "creation_date": 1691084342,
      "last_edit_date": 1691104168,
      "question_id": 76830420,
      "share_link": "https://stackoverflow.com/q/76830420",
      "body_markdown": "I am using the Neo4jClient and am trying to start at a parent node and get all related nodes and relationships to build and return an Object.\r\n\r\nThe object is simply:\r\n\r\n    public class NodeModel \r\n    {\r\n      public string Key {get; set;}\r\n      public IEnumerable&lt;EdgeModel&gt; Edges {get; set;}\r\n    }\r\n\r\n    public class EdgeModel \r\n    {\r\n      public string Key {get; set;}\r\n      public string EdgeType {get; set;}\r\n      public IEnumerable&lt;NodeModel&gt; ChildNodes {get; set;}\r\n    }\r\n\r\nand an example of the nodes and edges I am trying to return is:\r\n\r\n![Related nodes example](https://i.stack.imgur.com/xHweb.png)\r\n\r\nHow can I write a query using the neo4jclient that will return the nodes and edges as my NodeModel object or something close that I can work with programmatically. When trying something like:\r\n\r\n    _graphClient.Cypher\r\n      .Match(&quot;(parentNode:TestLabel WHERE parentNode.Key = $key)&quot;)\r\n      .OptionalMatch(&quot;(parentNode)-&gt;[r:RELATED_TO*]-&gt;(childNode:TestLabel)&quot;)\r\n\r\nI&#39;m not sure what to return and how to process the results in a way that fits my model. Also, I would prefer not use the APOC plugin if possible.\r\n\r\nThanks for the help!\r\n",
      "link": "https://stackoverflow.com/questions/76830420/how-to-get-nodes-and-edges-from-neo4j-to-c-object-structure-using-neo4jclient",
      "title": "How to get Nodes and Edges From Neo4j To C# Object Structure using Neo4jClient"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 5,
                "user_id": 22331646,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtesEqX1eyr1hDYJLzMFiQ5RYz1R1gV_inXdFNK4pQXdv_pQ=k-s256",
                "display_name": "Sabi Franjo",
                "link": "https://stackoverflow.com/users/22331646/sabi-franjo"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691141113,
              "post_id": 76830433,
              "comment_id": 135454635,
              "link": "https://stackoverflow.com/questions/76826555/neo4j-search-for-nodes-while-combining-relationship-types-in-different-direction/76830433#comment135454635_76830433"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1691092835,
          "last_edit_date": 1691092835,
          "creation_date": 1691084452,
          "answer_id": 76830433,
          "question_id": 76826555,
          "share_link": "https://stackoverflow.com/a/76830433",
          "body_markdown": "NOTE: Since your maximum path length is 20, any query could take a very long time or run out of memory, depending on your data characteristics.\r\n\r\n#### Approach 1\r\n\r\nThis query finds every path of up to length 20 using those 3 relationship types in any direction, and then filters for those in which every type points in the required direction (`Aggregation` must point right, and the others must point left).\r\n\r\n    MATCH p=(:NodeType1)-[:Use|Realisation|Aggregation*..20]-(:NodeType2)\r\n    WHERE ALL(i IN RANGE(0, LENGTH(p)-1) WHERE NODES(p)[i] = CASE TYPE(RELATIONSHIPS(p)[i])\r\n      WHEN &#39;Aggregation&#39; THEN\r\n        STARTNODE(RELATIONSHIPS(p)[i])\r\n      ELSE\r\n        ENDNODE(RELATIONSHIPS(p)[i]) END\r\n    )\r\n    RETURN p\r\n\r\n#### Approach 2\r\n\r\nThis may be faster than approach 1.\r\n\r\nThis query uses the APOC procedure [apoc.path.expandConfig](https://neo4j.com/labs/apoc/4.1/overview/apoc.path/apoc.path.expandConfig/), which has special support for use cases like yours.\r\n\r\n    MATCH (n:NodeType1)\r\n    CALL apoc.path.expandConfig(n, {\r\n        relationshipFilter: &quot;&lt;Use|&lt;Realisation|Aggregation&gt;&quot;,\r\n        labelFilter: &quot;&gt;NodeType2&quot;,\r\n        minLevel: 1,\r\n        maxLevel: 20\r\n    }) YIELD path\r\n    RETURN path",
          "link": "https://stackoverflow.com/questions/76826555/neo4j-search-for-nodes-while-combining-relationship-types-in-different-direction/76830433#76830433",
          "title": "Neo4j search for nodes while combining relationship types in different directions?"
        }
      ],
      "owner": {
        "reputation": 5,
        "user_id": 22331646,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtesEqX1eyr1hDYJLzMFiQ5RYz1R1gV_inXdFNK4pQXdv_pQ=k-s256",
        "display_name": "Sabi Franjo",
        "link": "https://stackoverflow.com/users/22331646/sabi-franjo"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76830433,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1691092835,
      "creation_date": 1691053947,
      "last_edit_date": 1691083316,
      "question_id": 76826555,
      "share_link": "https://stackoverflow.com/q/76826555",
      "body_markdown": "I have a starting node, and I&#39;m supposed to find all matching nodes that can be found using 3 different relationship types.\r\n\r\nFor example: `(n1:NodeType1)-[:Use|Realisation|Aggregation]-(n2:NodeType2)`\r\n\r\nHow would I write a query that would search for `n2` using the `Use` and `Realisation` relationships in exclusively one direction, and `Aggregation` exclusively in the other? It can be any combination of the three, within 20 hops. \r\n\r\nIt should be able to cover all combinations. Examples:\r\n\r\n    (n1)&lt;-[:Use]-()-[:Aggregation]-&gt;()&lt;-[:Use]-()&lt;-[:Realisation]-()-[:Aggregation]-&gt;(n2)\r\n\r\n    (n1)-[:Aggregation]-&gt;()-[:Aggregation]-&gt;()&lt;-[:Use]-(n2)\r\n\r\n\r\nI currently have this written:\r\n\r\n    MATCH (n1:`NodeType1`)&lt;-[:`Use`|`Realisation`*0..20]-()-[`Aggregation`*0..20]-&gt;(n2:`NodeType2`)\r\n\r\nWith this I have a problem that after using the &#39;Aggregation&#39; relationship, it doesn&#39;t check for the other two anymore. Another problem is that this could theoretically reach 40 hops, even though I want it limited to a maximum of 20. \r\n\r\nAny help in how I could achieve this?",
      "link": "https://stackoverflow.com/questions/76826555/neo4j-search-for-nodes-while-combining-relationship-types-in-different-direction",
      "title": "Neo4j search for nodes while combining relationship types in different directions?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 1,
            "user_id": -1,
            "user_type": "moderator",
            "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
            "display_name": "Community",
            "link": "https://stackoverflow.com/users/-1/community"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1691064182,
          "post_id": 76825661,
          "comment_id": 135442677,
          "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes#comment135442677_76825661"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 22331006,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-9cm-iI7U0rY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redzm1HpOh6JcUxZ_Q2t75F0qGcSA/mo/photo.jpg?sz=256",
                "display_name": "cheese butter",
                "link": "https://stackoverflow.com/users/22331006/cheese-butter"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691058671,
              "post_id": 76825869,
              "comment_id": 135441559,
              "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76825869#comment135441559_76825869"
            },
            {
              "owner": {
                "user_type": "does_not_exist",
                "display_name": "user4417327"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 22331006,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-9cm-iI7U0rY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redzm1HpOh6JcUxZ_Q2t75F0qGcSA/mo/photo.jpg?sz=256",
                "display_name": "cheese butter",
                "link": "https://stackoverflow.com/users/22331006/cheese-butter"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691060575,
              "post_id": 76825869,
              "comment_id": 135441928,
              "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76825869#comment135441928_76825869"
            },
            {
              "owner": {
                "user_type": "does_not_exist",
                "display_name": "user4417327"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 22331006,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-9cm-iI7U0rY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redzm1HpOh6JcUxZ_Q2t75F0qGcSA/mo/photo.jpg?sz=256",
                "display_name": "cheese butter",
                "link": "https://stackoverflow.com/users/22331006/cheese-butter"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691061806,
              "post_id": 76825869,
              "comment_id": 135442173,
              "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76825869#comment135442173_76825869"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 22331006,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-9cm-iI7U0rY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redzm1HpOh6JcUxZ_Q2t75F0qGcSA/mo/photo.jpg?sz=256",
                "display_name": "cheese butter",
                "link": "https://stackoverflow.com/users/22331006/cheese-butter"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691121542,
              "post_id": 76825869,
              "comment_id": 135451858,
              "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76825869#comment135451858_76825869"
            }
          ],
          "tags": [],
          "owner": {
            "user_type": "does_not_exist",
            "display_name": "user4417327"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1691048467,
          "creation_date": 1691048467,
          "answer_id": 76825869,
          "question_id": 76825661,
          "share_link": "https://stackoverflow.com/a/76825869",
          "body_markdown": "This is a fundamentally exponentially hard problem; more input data will result in way more possibilities to check with brute force like approaches.\r\n\r\nTherefore I would suggest splitting your approach in two steps:\r\n\r\n1. Generate a vector representation from your input data. My own search showed that you can pass your string input data to n-gram frunctions to get small chunks of the original string, which you can then pass to a tf-idf function to get an actual vector. Do that for all your input params, make sure that the vectors are always the same length, merge them and put them in a vector database.\r\n2. Execute a vector similarity search inside your vector database to get similar records, which might fulfill your levenshtein-distance requirements. Then check your requirement for every returned element in a brute force like fashion.\r\n\r\nThis approach should drastically reduce the amount of checks you would have to do, but requires a vector database. I think Neo4j has basic vector capabilities, but I am not sure how good they are. The key aspect is the vector similarity search itself.\r\n\r\nNote: The n-gram-data to vector step might not be consistent if some n-gram-fragment is not part of another n-gram-result. This might require some testing or more standardization, not sure.",
          "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76825869#76825869",
          "title": "Optimized way to create relationship between millions of nodes"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 22331006,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-9cm-iI7U0rY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redzm1HpOh6JcUxZ_Q2t75F0qGcSA/mo/photo.jpg?sz=256",
                "display_name": "cheese butter",
                "link": "https://stackoverflow.com/users/22331006/cheese-butter"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691389522,
              "post_id": 76835883,
              "comment_id": 135479412,
              "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76835883#comment135479412_76835883"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "last_editor": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1691155032,
          "last_edit_date": 1691155032,
          "creation_date": 1691152090,
          "answer_id": 76835883,
          "question_id": 76825661,
          "share_link": "https://stackoverflow.com/a/76835883",
          "body_markdown": "Sub or nested queries usually run faster.Something like ...\r\n\r\n    MATCH (p1:sample500K) WITH collect(p1) as pp1\r\n    unwind pp1 as x\r\n    call\r\n    {\r\n      with x\r\n      MATCH (p2:sample500K)\r\n      WHERE id(x) &lt;id(p2)\r\n    AND (\r\n      apoc.text.levenshteinDistance(x.email, p2.email) + \r\n      apoc.text.levenshteinDistance(x.phone, p2.phone) + \r\n      apoc.text.levenshteinDistance(x.mobilephone, p2.mobilephone) +\r\n      apoc.text.levenshteinDistance(x.street, p2.street)) &lt;= $threshold\r\n    MERGE (x)-[:SAME_USER500K]-&gt;(p2)\r\n    }\r\n\r\nIt might run faster with a double nesting?\r\n",
          "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes/76835883#76835883",
          "title": "Optimized way to create relationship between millions of nodes"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22331006,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-9cm-iI7U0rY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redzm1HpOh6JcUxZ_Q2t75F0qGcSA/mo/photo.jpg?sz=256",
        "display_name": "cheese butter",
        "link": "https://stackoverflow.com/users/22331006/cheese-butter"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 78,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1691155032,
      "creation_date": 1691046635,
      "last_edit_date": 1691082703,
      "question_id": 76825661,
      "share_link": "https://stackoverflow.com/q/76825661",
      "body_markdown": "I have nodes  uploaded to neo4j and each of the nodes have properties like `email`, `phone`, `address`, etc. I need to create relationship between two nodes if sum of levenshtein distance between properties of nodes is less than a threshold value. How to do this in more optimized way? Currently, I&#39;m doing it like this: \r\n\r\n    MATCH (p1:sample500K) WITH p1 \r\n    MATCH (p2:sample500K)\r\n    WHERE id(p1) &lt;id(p2)\r\n    AND (\r\n      apoc.text.levenshteinDistance(p1.email, p2.email) + \r\n      apoc.text.levenshteinDistance(p1.phone, p2.phone) + \r\n      apoc.text.levenshteinDistance(p1.mobilephone, p2.mobilephone) +\r\n      apoc.text.levenshteinDistance(p1.street, p2.street)) &lt;= $threshold\r\n    MERGE (p1)-[:SAME_USER500K]-&gt;(p2)\r\n\r\nI have also tried with apoc.periodic.iterate which also taking time. Also, I need to run the query in python.\r\n\r\nCan someone suggest a better method or any changes if needed to make?\r\n",
      "link": "https://stackoverflow.com/questions/76825661/optimized-way-to-create-relationship-between-millions-of-nodes",
      "title": "Optimized way to create relationship between millions of nodes"
    },
    {
      "tags": ["neo4j", "cypher", "py2neo"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1691009082,
          "last_edit_date": 1691009082,
          "creation_date": 1691008417,
          "answer_id": 76823335,
          "question_id": 76822214,
          "share_link": "https://stackoverflow.com/a/76823335",
          "body_markdown": "You should:\r\n\r\n1. Move the `WHERE` clause right under your `MATCH` clause. Currently, your `WHERE` clause is under the `OPTIONAL MATCH` clause, and so the ID filtering is only done after finding the relationships of **all** `MY_LABEL` nodes.\r\n2. Remove the `:MY_LABEL` qualification from the `MATCH` clause. If you already get the node by native ID, checking the label is unnecessary; and you are not using indexing.\r\n3. Pass the list of IDs as a [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/). This will cause the Cypher query planner to run much faster (since the Cypher code will be simple), and once the plan is created it will be cached and reused every time you rerun the query with a new ID list. This also makes your client code simpler and faster as well.\r\n\r\nThis should be much faster:\r\n\r\n    query = f&#39;&#39;&#39;\r\n        MATCH \r\n            (n)\r\n        WHERE \r\n            ID(n) in $id_list\r\n        OPTIONAL MATCH \r\n            (n) -- (u:OTHER_LABEL) // Won&#39;t always have a neighbor\r\n        RETURN \r\n            ID(n) as nid, \r\n            n.feature1,\r\n            u.feature2\r\n    &#39;&#39;&#39;\r\n    resp = graph.run(query, id_list=very_long_list_of_nids)\r\n\r\nAlso, if the relationships between `MY_LABEL` and `OTHER_LABEL` always flow in one direction, you should consider using a directional relationship pattern (either `--&gt;` or `&lt;--`) in your `OPTIONAL MATCH` clause, especially if your `MY_LABEL` nodes have other kinds of relationships that flow in the opposite direction.",
          "link": "https://stackoverflow.com/questions/76822214/best-way-to-query-a-large-list-of-nodes-in-neo4j/76823335#76823335",
          "title": "Best way to query a large list of nodes in neo4j"
        }
      ],
      "owner": {
        "reputation": 336,
        "user_id": 6136888,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://www.gravatar.com/avatar/78723bd4ac0b7750dff3811181d41546?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Zaya",
        "link": "https://stackoverflow.com/users/6136888/zaya"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76823335,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1691009082,
      "creation_date": 1690997092,
      "question_id": 76822214,
      "share_link": "https://stackoverflow.com/q/76822214",
      "body_markdown": "I&#39;m trying to do something like the following using the py2neo module to get information for a large quantity of nodes in a neo4j database that I already know the id&#39;s of: \r\n\r\n    query = f&#39;&#39;&#39;    \r\n        MATCH \r\n            (n:MY_LABEL)\r\n        OPTIONAL MATCH \r\n            (n) -- (u:OTHER_LABEL) // Won&#39;t always have a neighbor\r\n        WHERE \r\n            id(n) in [{&#39;,&#39;.join(very_long_list_of_nids)}]\r\n        RETURN \r\n            id(n) as nid, \r\n            n.feature1,\r\n            u.feature2\r\n    &#39;&#39;&#39;\r\n    resp = graph.run(query)\r\n\r\nAnd I have noticed it&#39;s far faster to just omit the `WHERE` clause, and do filtering after it returns the content of every `n:MY_LABEL` node. Is there a more elegant way to do this? \r\n\r\nFor reference, the `very_long_list_of_nodes` list is about 500k elements long (and I have tried batching it into smaller, 10k chunks and have the same problem) and the database contains 4m nodes, and 10m edges. ",
      "link": "https://stackoverflow.com/questions/76822214/best-way-to-query-a-large-list-of-nodes-in-neo4j",
      "title": "Best way to query a large list of nodes in neo4j"
    },
    {
      "tags": ["java", "spring-boot", "cypher", "jqassistant"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1314,
                "user_id": 2882083,
                "user_type": "registered",
                "accept_rate": 90,
                "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Venkat",
                "link": "https://stackoverflow.com/users/2882083/venkat"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691474483,
              "post_id": 76826858,
              "comment_id": 135492661,
              "link": "https://stackoverflow.com/questions/76809330/jqassistant-analysis-to-find-microservices-and-their-clients/76826858#comment135492661_76826858"
            },
            {
              "owner": {
                "reputation": 1196,
                "user_id": 2912200,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/57b8e4d46c5d25a8371fcaa9e256ed54?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Dirk Mahler",
                "link": "https://stackoverflow.com/users/2912200/dirk-mahler"
              },
              "reply_to_user": {
                "reputation": 1314,
                "user_id": 2882083,
                "user_type": "registered",
                "accept_rate": 90,
                "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Venkat",
                "link": "https://stackoverflow.com/users/2882083/venkat"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1692533976,
              "post_id": 76826858,
              "comment_id": 135633695,
              "link": "https://stackoverflow.com/questions/76809330/jqassistant-analysis-to-find-microservices-and-their-clients/76826858#comment135633695_76826858"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1196,
            "user_id": 2912200,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/57b8e4d46c5d25a8371fcaa9e256ed54?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Dirk Mahler",
            "link": "https://stackoverflow.com/users/2912200/dirk-mahler"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1691056010,
          "creation_date": 1691056010,
          "answer_id": 76826858,
          "question_id": 76809330,
          "share_link": "https://stackoverflow.com/a/76826858",
          "body_markdown": "There&#39;s no generic way of matching the client invocations to the providing service endpoints - it&#39;s highly dependent on the programming model of the client. Feign has a declarative model which makes it quite easy to provide the mapping, but there would be nearly no chance to do this if someone used Apache HTTP client constructing resource URLs by doing string concatenation.\r\nEnabling this kind of client-server interaction analysis would add requirements to the programming model used on client side, e.g. to use Feign or OpenAPI contracts. For the latter we&#39;re currently building a scanner which will be available in autumn this year.",
          "link": "https://stackoverflow.com/questions/76809330/jqassistant-analysis-to-find-microservices-and-their-clients/76826858#76826858",
          "title": "jQAssistant analysis to find microservices and their clients"
        }
      ],
      "owner": {
        "reputation": 1314,
        "user_id": 2882083,
        "user_type": "registered",
        "accept_rate": 90,
        "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Venkat",
        "link": "https://stackoverflow.com/users/2882083/venkat"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 50,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76826858,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1691056010,
      "creation_date": 1690874515,
      "question_id": 76809330,
      "share_link": "https://stackoverflow.com/q/76809330",
      "body_markdown": "I&#39;m following https://github.com/graphaware/fix-your-microservices to scan and identify the Micro services and their respective consumers to identify if there are any circular dependencies in my application. \r\n\r\nThe challenge in my case is the consumers may use any one of the client libraries including Github OpenFeign, Spring OpenFeign, Apache HTTP Client, OAuthRestTemplate/RestTemplate, OkHttpClient etc. I&#39;m able to identify the Rest Controllers in my spring boot based application. That&#39;s pretty straight forward using the RestController annotations. What&#39;s challenging is to identify the client/consumers using the REST API&#39;s by the path and match them with the provider REST API&#39;s. \r\n\r\nEach client library have a different way of invoking the services. Its fine even it means to write separate cypher queries for each of the libraries. But I&#39;m not able to identify the relation as mentioned in the above article using `INVOKES_REMOTE`. What would be the approach to match the client invocation of those services using the respective URI ? I&#39;m using jqassistant command-line 1.12.2 utility to scan multiple microservices from my source.\r\n\r\nThanks in advance.",
      "link": "https://stackoverflow.com/questions/76809330/jqassistant-analysis-to-find-microservices-and-their-clients",
      "title": "jQAssistant analysis to find microservices and their clients"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1690543473,
          "post_id": 76786571,
          "comment_id": 135372113,
          "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found#comment135372113_76786571"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1690564467,
          "post_id": 76786571,
          "comment_id": 135376364,
          "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found#comment135376364_76786571"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1690567017,
          "post_id": 76786571,
          "comment_id": 135376820,
          "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found#comment135376820_76786571"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 291,
                "user_id": 2738250,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://i.stack.imgur.com/8bqh3.png?s=256&g=1",
                "display_name": "Vitaliy",
                "link": "https://stackoverflow.com/users/2738250/vitaliy"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690547725,
              "post_id": 76787781,
              "comment_id": 135372892,
              "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found/76787781#comment135372892_76787781"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1690547033,
          "creation_date": 1690547033,
          "answer_id": 76787781,
          "question_id": 76786571,
          "share_link": "https://stackoverflow.com/a/76787781",
          "body_markdown": "Try this one:\r\n\r\n\r\n\r\n    UNWIND custom.test() as id\r\n    MATCH (m: Movie) where m.id = id\r\n    RETURN m.title AS title\r\n\r\nUNWIND is like a for loop so it will fix your code and will not hang.\r\nPlease test it out. ",
          "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found/76787781#76787781",
          "title": "Neo4j APOC custom function hangs when nothing is found"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 291,
                "user_id": 2738250,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://i.stack.imgur.com/8bqh3.png?s=256&g=1",
                "display_name": "Vitaliy",
                "link": "https://stackoverflow.com/users/2738250/vitaliy"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690735515,
              "post_id": 76789902,
              "comment_id": 135391567,
              "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found/76789902#comment135391567_76789902"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 291,
                "user_id": 2738250,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://i.stack.imgur.com/8bqh3.png?s=256&g=1",
                "display_name": "Vitaliy",
                "link": "https://stackoverflow.com/users/2738250/vitaliy"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690818470,
              "post_id": 76789902,
              "comment_id": 135402619,
              "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found/76789902#comment135402619_76789902"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1690572881,
          "last_edit_date": 1690572881,
          "creation_date": 1690565057,
          "answer_id": 76789902,
          "question_id": 76786571,
          "share_link": "https://stackoverflow.com/a/76789902",
          "body_markdown": "Change your custom function&#39;s query to this:\r\n\r\n    OPTIONAL MATCH (m:Movie)\r\n    RETURN m.id AS id\r\n\r\nIf there are no `Movie` nodes, the `OPTIONAL MATCH` will cause `[NULL]` to be returned from your custom function, and your test query will work as expected (i.e., return no results) in that case.\r\n\r\nYou can test that the custom function works when there are no results by replacing `:Movie` with `:FooBar` in its query (instead of using `LIMIT 0`).",
          "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found/76789902#76789902",
          "title": "Neo4j APOC custom function hangs when nothing is found"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 291,
            "user_id": 2738250,
            "user_type": "registered",
            "accept_rate": 100,
            "profile_image": "https://i.stack.imgur.com/8bqh3.png?s=256&g=1",
            "display_name": "Vitaliy",
            "link": "https://stackoverflow.com/users/2738250/vitaliy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1690836261,
          "creation_date": 1690836261,
          "answer_id": 76807045,
          "question_id": 76786571,
          "share_link": "https://stackoverflow.com/a/76807045",
          "body_markdown": "Although adding `OPTIONAL` to the `MATCH` statement indeed helped to avoid hanging, this approach is only applicable to `MATCH`, not to `CALL`.\r\n\r\nI propose a general solution:\r\nAt the end of the query, we should collect all the results into an array using `COLLECT()` and create the function with the parameter `forceSingle = true`:\r\n\r\n    CALL apoc.custom.declareFunction(&#39;test(limit :: INTEGER)::LIST OF INTEGER?&#39;, &#39;\r\n    MATCH (m:Movie)\r\n    WITH m.id AS id\r\n    LIMIT $limit\r\n    RETURN COLLECT(id)\r\n    &#39;, true)\r\n\r\nNow, calling the function `RETURN custom.test(0) as ids` returns `[{&#39;ids&#39;: []}]`.",
          "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found/76807045#76807045",
          "title": "Neo4j APOC custom function hangs when nothing is found"
        }
      ],
      "owner": {
        "reputation": 291,
        "user_id": 2738250,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://i.stack.imgur.com/8bqh3.png?s=256&g=1",
        "display_name": "Vitaliy",
        "link": "https://stackoverflow.com/users/2738250/vitaliy"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 72,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76807045,
      "answer_count": 3,
      "score": 1,
      "last_activity_date": 1690836261,
      "creation_date": 1690536985,
      "question_id": 76786571,
      "share_link": "https://stackoverflow.com/q/76786571",
      "body_markdown": "I have written the following custom function that performs a complex search and returns a list of IDs. Here is a simplified version:\r\n\r\n    CALL apoc.custom.declareFunction(&#39;test()::LIST OF INTEGER?&#39;, &#39;\r\n        MATCH (m:Movie)\r\n        WITH m.id AS id\r\n        LIMIT 1\r\n        RETURN id\r\n    &#39;)\r\n\r\nThe function is intended to be used in the following query:\r\n\r\n    MATCH (m:Movie)\r\n    WHERE m.id IN custom.test()\r\n    RETURN m.title AS title\r\n\r\nWhen testing the function with `RETURN custom.test() as ids`, the execution result is `[{&#39;ids&#39;: [57]}]`\r\n\r\nIn the case where the function finds nothing (for the simplified version, I replace `LIMIT 1` with `LIMIT 0`), I expect the function to return `[{&#39;ids&#39;: []}]`. However, instead, **it simply hangs**.\r\n\r\nI have tried defining the return type as both `LIST OF INTEGER` and `LIST OF INTEGER?`.\r\n\r\nIs this an APOC bug? How can I resolve this issue?",
      "link": "https://stackoverflow.com/questions/76786571/neo4j-apoc-custom-function-hangs-when-nothing-is-found",
      "title": "Neo4j APOC custom function hangs when nothing is found"
    },
    {
      "tags": [
        "python-3.x",
        "graphql",
        "cypher",
        "fastapi",
        "strawberry-graphql"
      ],
      "owner": {
        "reputation": 151,
        "user_id": 19489763,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AItbvmm99awBACxkTMLOuDZ7Mp-9Z9RIkKitKIduo-pM=k-s256",
        "display_name": "Moh-Spark",
        "link": "https://stackoverflow.com/users/19489763/moh-spark"
      },
      "last_editor": {
        "reputation": 151,
        "user_id": 19489763,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AItbvmm99awBACxkTMLOuDZ7Mp-9Z9RIkKitKIduo-pM=k-s256",
        "display_name": "Moh-Spark",
        "link": "https://stackoverflow.com/users/19489763/moh-spark"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1690760808,
      "creation_date": 1690512099,
      "last_edit_date": 1690760808,
      "question_id": 76784542,
      "share_link": "https://stackoverflow.com/q/76784542",
      "body_markdown": "in our neo4j database, &quot;Device&quot; node  is connected to &quot;DeviceFeature&quot; node with one way relation called &quot;has&quot;. I am trying to find an efficient way to model this in my graphql api. I am using Strawberry and FastAPI. The below code works but I guess there might be a better way to achieve this goal, possibly a better way than iteration over each device.\r\n\r\nI would like to get devicefeature of a device by writring a graphql query like below:\r\n\r\n    query {\r\n      get_device(limit:20) {\r\n        TAC_CODE\r\n        device\r\n        type\r\n        has {\r\n          id\r\n          TAC_CODE\r\n          brand_name\r\n          gsma_device_type\r\n          manufacturer_name\r\n          model_family\r\n          operating_system\r\n        }\r\n      }\r\n    }\r\n\r\nI would like to also be able to run the below query as well\r\n\r\n \r\n\r\n    query {\r\n     get_device(limit:20) {\r\n            TAC_CODE\r\n            device\r\n            type\r\n    }\r\n    }\r\n\r\nMy python code is:\r\n\r\n```py\r\n\r\n@strawberry.type\r\nclass Device:\r\n    TAC_CODE: Optional[int]\r\n    device: Optional[str]\r\n    type: Optional[str]\r\n    has: Optional[List[DeviceFeature]] = None\r\n\r\n@strawberry.type\r\nclass DeviceFeature:\r\n    id: Optional[int]\r\n    TAC_CODE:  Optional[str]\r\n    brand_name: Optional[str]\r\n    gsma_device_type: Optional[str]\r\n    manufacturer_name: Optional[str]\r\n    model_family: Optional[str]\r\n    operating_system: Optional[str]\r\n\r\n@strawberry.type\r\nclass DeviceFeatureQuery:\r\n    @strawberry.field\r\n    async def get_devicefeature(\r\n         ... some code to run a cypher query\r\n\r\n\r\n@strawberry.type\r\nclass DeviceQuery:\r\n    @strawberry.field\r\n    async def get_device(self, info:Info, filters: Optional[List[str]] = None, limit: Optional[int] = None) -&gt; List[&#39;Device&#39;]:\r\n\r\n        device_fields = info.return_type\r\n        print(&quot;device_fields&quot;)\r\n        print(device_fields)\r\n        # Extract the names of the attributes of the &#39;Device&#39; type\r\n        device_attribute_names = {\r\n  \r\n                selection.name\r\n                for field in info.selected_fields\r\n                for selection in field.selections\r\n                \r\n            }\r\n      \r\n        cypher_query = &quot;MATCH (c:Device)&quot;\r\n        where_conditions = []\r\n        if filters:\r\n            where_conditions = [f&quot;{field} = &#39;{value}&#39;&quot; for field, value in filters]\r\n        if where_conditions:\r\n            cypher_query += &quot; WHERE &quot; + &quot; AND &quot;.join(where_conditions)\r\n        cypher_query += &quot; RETURN c&quot;\r\n        if limit is not None:\r\n            cypher_query += f&quot; LIMIT {limit}&quot;\r\n        loop = asyncio.get_running_loop()\r\n        neo4j_uri_instance=neo4j_uri(info.context[&#39;user&#39;][&#39;access_token&#39;])\r\n        with neo4j_uri_instance.driver.session() as session:\r\n            result = await loop.run_in_executor(None, session.run, cypher_query)\r\n            devices = [Device(TAC_CODE=record[&#39;c&#39;][&#39;TAC_CODE&#39;],  device=record[&#39;c&#39;][&#39;device&#39;], type=record[&#39;c&#39;][&#39;type&#39;]) for record in result]\r\n            if &quot;has&quot; in device_attribute_names:\r\n                print(&quot;request has &#39;has&#39;&quot;)\r\n                for device in devices:\r\n            \r\n                    device.has= await DeviceQuery.get_device_devicefeatures ( info,device.TAC_CODE)\r\n                 \r\n        return devices\r\n\r\n\r\n    \r\n    async def get_device_devicefeatures( info:Info,tac_code: int ) -&gt; List[DeviceFeature]:\r\n        access_token = info.context[&#39;user&#39;][&#39;access_token&#39;]\r\n        cypher_query = f&quot;MATCH (d:Device)-[:HAS]-&gt;(df:DeviceFeature) where d.TAC_CODE={tac_code} RETURN df limit 10&quot;\r\n        #print (cypher_query)\r\n        loop = asyncio.get_running_loop()\r\n        neo4j_uri_instance=neo4j_uri(access_token)\r\n        with neo4j_uri_instance.driver.session() as session:\r\n            result = await loop.run_in_executor(None, session.run, cypher_query)\r\n            device_features = [DeviceFeature(id=record[&#39;df&#39;][&#39;id&#39;],TAC_CODE=record[&#39;df&#39;][&#39;TAC_CODE&#39;],manufacturer_name =record[&#39;df&#39;][&#39;manufacturer_name&#39;], model_family=record[&#39;df&#39;][&#39;model_family&#39;], operating_system=record[&#39;df&#39;][&#39;operating_system&#39;], brand_name=record[&#39;df&#39;][&#39;brand_name&#39;], gsma_device_type=record[&#39;df&#39;][&#39;gsma_device_type&#39;]) for record in result]\r\n        return device_features\r\n```\r\n",
      "link": "https://stackoverflow.com/questions/76784542/model-node-relation-in-graphql-api-in-python",
      "title": "model node-relation in graphql api in python"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 6146065,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/b7efb041423410e3b479fff632ac1f1c?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mike Holczer",
                "link": "https://stackoverflow.com/users/6146065/mike-holczer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690546620,
              "post_id": 76784140,
              "comment_id": 135372646,
              "link": "https://stackoverflow.com/questions/76782807/how-to-write-a-neo4j-cypher-query-to-find-closed-loop-of-similar-nodes/76784140#comment135372646_76784140"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 6146065,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/b7efb041423410e3b479fff632ac1f1c?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mike Holczer",
                "link": "https://stackoverflow.com/users/6146065/mike-holczer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690563249,
              "post_id": 76784140,
              "comment_id": 135376164,
              "link": "https://stackoverflow.com/questions/76782807/how-to-write-a-neo4j-cypher-query-to-find-closed-loop-of-similar-nodes/76784140#comment135376164_76784140"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1690563214,
          "last_edit_date": 1690563214,
          "creation_date": 1690503189,
          "answer_id": 76784140,
          "question_id": 76782807,
          "share_link": "https://stackoverflow.com/a/76784140",
          "body_markdown": "You can do this:\r\n\r\n    MATCH p=(m)-[*]-&gt;(m)\r\n    WHERE ALL(n IN NODES(p) WHERE n.rel_type = &#39;type&#39;)\r\n    RETURN m\r\n\r\n#### Neo4j 5.9+\r\n\r\nStarting with Neo4j 5.9, you can instead use a [quantified path pattern](https://neo4j.com/docs/cypher-manual/current/patterns/reference/#quantified-path-patterns), which may be more efficient:\r\n\r\n    MATCH (m WHERE m.rel_type = &#39;type&#39;) (()--&gt;(n WHERE n.rel_type = &#39;type&#39;)){1,} (m)\r\n    RETURN m\r\n\r\nThe above query specifies the node criteria (`rel_type = &#39;type&#39;`) twice: once for the starting node, and once for the endpoint of every `NEXT` relationship (within the quantified path pattern). This way, all the nodes in matching paths are tested once, and only once (except for `m`, which is tested twice).\r\n\r\nFinally, to avoid testing `m` twice you can do this:\r\n\r\n    MATCH (m WHERE m.rel_type = &#39;type&#39;)\r\n    MATCH (m) (()--&gt;(n WHERE m = n OR n.rel_type = &#39;type&#39;)){1,} (m)\r\n    RETURN m\r\n\r\nThe `MATCH` clause has to be split into 2 clauses here to avoid the error:\r\n\r\n&gt; From within a quantified path pattern, one may only reference\r\n&gt; variables, that are already bound in a previous `MATCH` clause.\r\n\r\n#### Caveat\r\n\r\nUsing variable-length paths with unlimited upper bounds on the path length can cause you to run out of memory or take a very long time. If possible, you should put an upper bound on your queries.  For example, to place an upper bound of 8, you can use `[*..8]` (in the first query above) or `{1,8}` (in the second).",
          "link": "https://stackoverflow.com/questions/76782807/how-to-write-a-neo4j-cypher-query-to-find-closed-loop-of-similar-nodes/76784140#76784140",
          "title": "How to write a neo4j cypher query to find closed loop of similar nodes"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 6146065,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b7efb041423410e3b479fff632ac1f1c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Mike Holczer",
        "link": "https://stackoverflow.com/users/6146065/mike-holczer"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 49,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1690563214,
      "creation_date": 1690485539,
      "last_edit_date": 1690500651,
      "question_id": 76782807,
      "share_link": "https://stackoverflow.com/q/76782807",
      "body_markdown": "I&#39;m trying to find if in my database I have a closed loop consisting of only nodes that match certain criteria. I know how to specify a variable number of relationships matching criteria, such as: `-[rel_type:type*]-&gt;`, but I can&#39;t figure out how to specify the criteria for the nodes I want to have in the variable length path.\r\n\r\nI tried this, but it found nodes not matching the criteria:\r\n\r\n    match (n{rel_type:&#39;type&#39;})\r\n    match (m) -[*]-&gt; (m)\r\n    return m",
      "link": "https://stackoverflow.com/questions/76782807/how-to-write-a-neo4j-cypher-query-to-find-closed-loop-of-similar-nodes",
      "title": "How to write a neo4j cypher query to find closed loop of similar nodes"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 777,
                "user_id": 8739916,
                "user_type": "registered",
                "accept_rate": 71,
                "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu25Zc53aJyMpfBe2HIdGDjKnk9AQYlNNS64TKRR=k-s256",
                "display_name": "JollyRoger",
                "link": "https://stackoverflow.com/users/8739916/jollyroger"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690357724,
              "post_id": 76763864,
              "comment_id": 135340541,
              "link": "https://stackoverflow.com/questions/76763682/get-neighbors-of-a-node-that-can-be-reached-with-n-jumps-edges/76763864#comment135340541_76763864"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1690296261,
          "creation_date": 1690296261,
          "answer_id": 76763864,
          "question_id": 76763682,
          "share_link": "https://stackoverflow.com/a/76763864",
          "body_markdown": "You can capture paths as follows:\r\n\r\n```\r\nMATCH p=(:Type1 {id: &quot;some_id&quot;})-[*1..2]-()\r\nRETURN p\r\n```",
          "link": "https://stackoverflow.com/questions/76763682/get-neighbors-of-a-node-that-can-be-reached-with-n-jumps-edges/76763864#76763864",
          "title": "Get neighbors of a node that can be reached with n jumps (edges)"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 777,
                "user_id": 8739916,
                "user_type": "registered",
                "accept_rate": 71,
                "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu25Zc53aJyMpfBe2HIdGDjKnk9AQYlNNS64TKRR=k-s256",
                "display_name": "JollyRoger",
                "link": "https://stackoverflow.com/users/8739916/jollyroger"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690357560,
              "post_id": 76764673,
              "comment_id": 135340503,
              "link": "https://stackoverflow.com/questions/76763682/get-neighbors-of-a-node-that-can-be-reached-with-n-jumps-edges/76764673#comment135340503_76764673"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 777,
                "user_id": 8739916,
                "user_type": "registered",
                "accept_rate": 71,
                "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu25Zc53aJyMpfBe2HIdGDjKnk9AQYlNNS64TKRR=k-s256",
                "display_name": "JollyRoger",
                "link": "https://stackoverflow.com/users/8739916/jollyroger"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690390722,
              "post_id": 76764673,
              "comment_id": 135348118,
              "link": "https://stackoverflow.com/questions/76763682/get-neighbors-of-a-node-that-can-be-reached-with-n-jumps-edges/76764673#comment135348118_76764673"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1690390701,
          "last_edit_date": 1690390701,
          "creation_date": 1690301933,
          "answer_id": 76764673,
          "question_id": 76763682,
          "share_link": "https://stackoverflow.com/a/76764673",
          "body_markdown": "[UPDATED]\r\n\r\nTo get info on all nodes and relationships up to a specified depth (say, 5), you can use a query like this:\r\n\r\n    MATCH (:Type1 {id: &quot;some_id&quot;})-[rs*..5]-&gt;()\r\n    UNWIND rs AS r\r\n    WITH DISTINCT r\r\n    RETURN STARTNODE(r) AS s, r, ENDNODE(r) AS n",
          "link": "https://stackoverflow.com/questions/76763682/get-neighbors-of-a-node-that-can-be-reached-with-n-jumps-edges/76764673#76764673",
          "title": "Get neighbors of a node that can be reached with n jumps (edges)"
        }
      ],
      "owner": {
        "reputation": 777,
        "user_id": 8739916,
        "user_type": "registered",
        "accept_rate": 71,
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu25Zc53aJyMpfBe2HIdGDjKnk9AQYlNNS64TKRR=k-s256",
        "display_name": "JollyRoger",
        "link": "https://stackoverflow.com/users/8739916/jollyroger"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76764673,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1690748769,
      "creation_date": 1690294841,
      "last_edit_date": 1690748769,
      "question_id": 76763682,
      "share_link": "https://stackoverflow.com/q/76763682",
      "body_markdown": "I am trying to get all of the nodes and relationships of a node up to n jumps(edges). Meaning that what are the nodes that I can reach with e.g., n edges, and what are the relations in between each node.\r\n\r\nAssume that my entire graph looks like the following: `s-[r1]-x-[r2]-n`, where s, x and n are nodes, and r1 and r2 are relations.\r\n\r\nThe following query returns entire paths going from &quot;s&quot; to &quot;n&quot;:\r\n\r\n```\r\nMATCH (s:Type1 {id: &quot;some_id&quot;})-[r*1..2]-(n)\r\nRETURN s,r,n\r\n// please note that I don&#39;t necessarily mean 1..2 connections\r\n// it should be generalizable to 1..n\r\n```\r\nIt returns:\r\n1. s-r1-x\r\n2. s-(r1 and r2)-n\r\n\r\nHowever, what I want is:\r\n1. s-r1-x\r\n2. x-r2-n\r\n\r\nHow can I achieve this?",
      "link": "https://stackoverflow.com/questions/76763682/get-neighbors-of-a-node-that-can-be-reached-with-n-jumps-edges",
      "title": "Get neighbors of a node that can be reached with n jumps (edges)"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1689873552,
          "post_id": 76724911,
          "comment_id": 135278443,
          "link": "https://stackoverflow.com/questions/76724911/neo4j-traverse-graph-of-indefinite-length-with-selection-criteria#comment135278443_76724911"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1691593603,
              "post_id": 76869049,
              "comment_id": 135513234,
              "link": "https://stackoverflow.com/questions/76724911/neo4j-traverse-graph-of-indefinite-length-with-selection-criteria/76869049#comment135513234_76869049"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1693999736,
          "last_edit_date": 1693999736,
          "creation_date": 1691593428,
          "answer_id": 76869049,
          "question_id": 76724911,
          "share_link": "https://stackoverflow.com/a/76869049",
          "body_markdown": "In the beginning of your question, you seem to describe the following, where you only want to return paths that follow the green arrow:\r\n\r\n![follow the green arrow 1][1]\r\n\r\nDoing this requires comparing a relationship with a node from a previous iteration. You can do this with a [predicate function](https://neo4j.com/docs/cypher-manual/current/functions/predicate/):\r\n\r\n```cypher\r\nMATCH p = (:Station {name: &#39;A&#39;}) ((n)-[r:LINK]-(:Station))+\r\nWHERE all(i IN range(0, size(r) - 2) WHERE n[i].name = r[i+1].name)\r\nRETURN p\r\n```\r\n\r\nBut reading your second query, maybe you meant something more like this:\r\n\r\n![follow the green arrow 2][2]\r\n\r\nIn which case this query will work:\r\n\r\n```cypher\r\nMATCH (a {name: &#39;A&#39;})\r\nMATCH p = (a)-[{name: a.name}]-&gt;+()\r\nRETURN p\r\n```\r\n\r\nAs the error message you got suggested, the first node variable `a` needs to be bound in a previous `MATCH` clause.\r\n\r\n  [1]: https://i.stack.imgur.com/RQ3cV.png\r\n  [2]: https://i.stack.imgur.com/yRypc.png",
          "link": "https://stackoverflow.com/questions/76724911/neo4j-traverse-graph-of-indefinite-length-with-selection-criteria/76869049#76869049",
          "title": "Neo4j Traverse Graph of Indefinite Length With Selection Criteria"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22254377,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtdS6Ga3iJFMTHrTyMk7KEj2K8GYoX2YUTvsBUoBQVBJ=k-s256",
        "display_name": "Kadeem Walsh",
        "link": "https://stackoverflow.com/users/22254377/kadeem-walsh"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 51,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1693999736,
      "creation_date": 1689797937,
      "last_edit_date": 1690748812,
      "question_id": 76724911,
      "share_link": "https://stackoverflow.com/q/76724911",
      "body_markdown": "I have a graph of unknown length.  I need to be able to start from a node and traverse the length of the entire chain.  I am able to do this using the quantified path pattern like below\r\n\r\n```\r\nMATCH (:Station { name: &#39;Station A&#39; })((:Station)-[:NEXT]-&gt;(:Station)){1,}(a:Station))\r\nRETURN *\r\n```\r\n\r\nHowever, it is not enough to return all of the nodes.  At a particular node I have many NEXT relationships that point to other nodes.  The correct path to take is determined by plucking off the name property from the previous node, and comparing that to the name property on all of the relationships.  As an example:\r\n\r\n`(:Station {name:&quot;Station A&quot;})-[:NEXT]-&gt;(:Station {name:&quot;Station B&quot;})\r\n`\r\nAt the Station node named &quot;Station B&quot;, I have 3 NEXT relationships\r\n```\r\n[:NEXT {name:&quot;Station A}]\r\n[:NEXT {name:&quot;Station B}]\r\n[:NEXT {name:&quot;Station C}]\r\n```\r\n\r\nThe correct traversal is [:NEXT {name:&quot;Station A}] because the node prior to B is the node with the name &quot;Station A&quot;\r\n\r\nUltimately, I need to return a chain of an indefinite length.  At each step of the graph, the correct path to take is determined by a value on the previous node.  How can I achieve this with a Cypher Query?\r\n\r\nThank you\r\n\r\nI tried the following:\r\n\r\n```\r\n```\r\nMATCH (a:Station { name: &#39;Station A&#39; })((:Station)-[:NEXT {name:a.name}]-&gt;(:Station)){1,}(a:Station))\r\nRETURN *\r\n```\r\n```\r\n\r\nBut get the following error\r\n`From within a quantified path pattern, one may only reference variables, that are already bound in a previous `MATCH` clause.\r\n`\r\n",
      "link": "https://stackoverflow.com/questions/76724911/neo4j-traverse-graph-of-indefinite-length-with-selection-criteria",
      "title": "Neo4j Traverse Graph of Indefinite Length With Selection Criteria"
    },
    {
      "tags": [
        "neo4j",
        "cypher",
        "graph-databases",
        "projection",
        "graph-data-science"
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1689795190,
          "last_edit_date": 1689795190,
          "creation_date": 1689792442,
          "answer_id": 76724396,
          "question_id": 76722460,
          "share_link": "https://stackoverflow.com/a/76724396",
          "body_markdown": "First of all, here are some docs on [native projection](https://neo4j.com/docs/graph-data-science/current/management-ops/projections/graph-project/) and [cypher projection](https://neo4j.com/docs/graph-data-science/current/management-ops/projections/graph-project-cypher-projection/). Those terms are only relevant when using the Neo4j [Graph Data Science Library](https://neo4j.com/docs/graph-data-science/current/).\r\n\r\n&quot;Native projection&quot; directly uses low-level (&quot;native&quot;) server code to perform fast but inflexible DB operations. You specify desired node labels and relationship types, and &quot;native projection&quot; will put in the projection all nodes with any of the specified labels and all relationships of the specified types connected to those nodes. The code is tuned for this simple use case, and is therefore fast. But you have very little flexibility (for example, you cannot filter nodes by specific property values).\r\n\r\n&quot;Cypher projection&quot;, on the other hand, allows you to use Cypher to fully customize how to get the projection, but at the cost of being potentially slower.\r\n\r\n",
          "link": "https://stackoverflow.com/questions/76722460/projections-in-neo4j/76724396#76724396",
          "title": "Projections in Neo4j"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22252961,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc_fwzLZ_mGfKSm8-grbu9g1lda8DzrA70oCEavpWF-=k-s256",
        "display_name": "Marc",
        "link": "https://stackoverflow.com/users/22252961/marc"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 63,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 0,
      "accepted_answer_id": 76724396,
      "answer_count": 1,
      "score": -1,
      "last_activity_date": 1689795190,
      "creation_date": 1689777305,
      "question_id": 76722460,
      "share_link": "https://stackoverflow.com/q/76722460",
      "body_markdown": "I&#39;m a student working on a report focused on Neo4j. I&#39;ve come across the terms &quot;native projections&quot; and &quot;cypher projections&quot;&#160; and I&#39;m having some trouble understanding the distinction between the two. Can someone please shed some light on this and help me grasp the key differences?\r\n\r\nI&#39;ve gone through the official Neo4j documentation, but the explanations were a bit elusive, and I&#39;d love to get some additional information.\r\nHow do native and cypher projections differ, and when should I consider using one over the other?\r\nWhat are the differences in performance and functionality?\r\nAny examples or use cases illustrating the contrast would be highly appreciated.\r\n\r\nThank you all in advance for your help!\r\n",
      "link": "https://stackoverflow.com/questions/76722460/projections-in-neo4j",
      "title": "Projections in Neo4j"
    },
    {
      "tags": ["java", "neo4j", "cypher", "jqassistant"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689684226,
          "post_id": 76709965,
          "comment_id": 135245975,
          "link": "https://stackoverflow.com/questions/76709965/jqassistant-assessment-failing-with-multiple-projects#comment135245975_76709965"
        },
        {
          "owner": {
            "reputation": 1314,
            "user_id": 2882083,
            "user_type": "registered",
            "accept_rate": 90,
            "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Venkat",
            "link": "https://stackoverflow.com/users/2882083/venkat"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689745098,
          "post_id": 76709965,
          "comment_id": 135254822,
          "link": "https://stackoverflow.com/questions/76709965/jqassistant-assessment-failing-with-multiple-projects#comment135254822_76709965"
        },
        {
          "owner": {
            "reputation": 1196,
            "user_id": 2912200,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/57b8e4d46c5d25a8371fcaa9e256ed54?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Dirk Mahler",
            "link": "https://stackoverflow.com/users/2912200/dirk-mahler"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689868328,
          "post_id": 76709965,
          "comment_id": 135277468,
          "link": "https://stackoverflow.com/questions/76709965/jqassistant-assessment-failing-with-multiple-projects#comment135277468_76709965"
        },
        {
          "owner": {
            "reputation": 1314,
            "user_id": 2882083,
            "user_type": "registered",
            "accept_rate": 90,
            "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Venkat",
            "link": "https://stackoverflow.com/users/2882083/venkat"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1690177551,
          "post_id": 76709965,
          "comment_id": 135311385,
          "link": "https://stackoverflow.com/questions/76709965/jqassistant-assessment-failing-with-multiple-projects#comment135311385_76709965"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 1314,
            "user_id": 2882083,
            "user_type": "registered",
            "accept_rate": 90,
            "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Venkat",
            "link": "https://stackoverflow.com/users/2882083/venkat"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1690872391,
          "creation_date": 1690872391,
          "answer_id": 76809108,
          "question_id": 76709965,
          "share_link": "https://stackoverflow.com/a/76809108",
          "body_markdown": "Thanks to @dirk-mahler. I was able to scan multiple projects with the latest version command line jqassistant 1.12.2. I was using an older version of the jqassistant maven plugin 1.10.1 and it was failing with some weird errors.",
          "link": "https://stackoverflow.com/questions/76709965/jqassistant-assessment-failing-with-multiple-projects/76809108#76809108",
          "title": "jQassistant assessment failing with multiple projects"
        }
      ],
      "owner": {
        "reputation": 1314,
        "user_id": 2882083,
        "user_type": "registered",
        "accept_rate": 90,
        "profile_image": "https://www.gravatar.com/avatar/e5543cd8dee1bcce584555cb71a2a478?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Venkat",
        "link": "https://stackoverflow.com/users/2882083/venkat"
      },
      "last_editor": {
        "reputation": 12347,
        "user_id": 7371893,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
        "display_name": "jose_bacoy",
        "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 66,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76809108,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1690872391,
      "creation_date": 1689660942,
      "last_edit_date": 1689773167,
      "question_id": 76709965,
      "share_link": "https://stackoverflow.com/q/76709965",
      "body_markdown": "I&#39;m using jqassistant-maven-plugin version 1.10.1 with common Neo4j database and am trying to collate scanning from multiple Spring boot based java applications. I&#39;ve disabled reset database so that I can collate scan information from multiple projects and identify API clients invoking API services from within other apps and see if there is any cyclic dependencies. When I do so the first maven build is working fine. But when I run the second application scan, it fails with the below error:\r\n\r\n&gt;org.neo4j.driver.exceptions.DatabaseException: The shortest path algorithm does not work when the start and end nodes are the same. This can happen if you\r\nperform a shortestPath search after a cartesian product that might have the same start and end nodes for some\r\nof the rows passed to shortestPath. If you would rather not experience this exception, and can accept the\r\npossibility of missing results for those rows, disable this in the Neo4j configuration by setting\r\n`cypher.forbid_shortestpath_common_nodes` to false. If you cannot accept missing results, and really want the\r\nshortestPath between two common nodes, then re-write the query using a standard Cypher variable length pattern\r\nexpression followed by ordering by path length and limiting to one result.\r\n\r\nThe package names of the class are different and there may be couple of classes that might be named similar but the fully qualified names should not create a name collision. Not sure what&#39;s causing this and how to resolve this. Any help would be appreciated.\r\n\r\n**EDIT** The query that&#39;s failing is given below:\r\n\r\n    UNWIND $batch as entry \r\n    CREATE (n:File:Directory:Package:Java) \r\n    SET n=entry[&#39;n&#39;]   \r\n    RETURN collect({oldId:entry[&#39;id&#39;], newId:id(n)}) as nodes&#39;, {batch=[{n={name=controller, file\r\n    Name=/com/mycompany/client/controller, fqn=com.mycompany.client.controller}, id=-9}]}\r\n\r\nUnfortunately I don&#39;t have control on the query generated as its auto generated by the jqassistant-maven-plugin.",
      "link": "https://stackoverflow.com/questions/76709965/jqassistant-assessment-failing-with-multiple-projects",
      "title": "jQassistant assessment failing with multiple projects"
    },
    {
      "tags": ["python", "neo4j", "transactions", "cypher", "py2neo"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 106,
                "user_id": 5027541,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/676f1c25630ba10978c627cc6f789cb8?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "cmf",
                "link": "https://stackoverflow.com/users/5027541/cmf"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689690820,
              "post_id": 76706219,
              "comment_id": 135247655,
              "link": "https://stackoverflow.com/questions/76705469/how-to-check-if-graph-committx-has-updated-records-in-py2neo/76706219#comment135247655_76706219"
            },
            {
              "owner": {
                "reputation": 12347,
                "user_id": 7371893,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
                "display_name": "jose_bacoy",
                "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
              },
              "reply_to_user": {
                "reputation": 106,
                "user_id": 5027541,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/676f1c25630ba10978c627cc6f789cb8?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "cmf",
                "link": "https://stackoverflow.com/users/5027541/cmf"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689700554,
              "post_id": 76706219,
              "comment_id": 135249842,
              "link": "https://stackoverflow.com/questions/76705469/how-to-check-if-graph-committx-has-updated-records-in-py2neo/76706219#comment135249842_76706219"
            },
            {
              "owner": {
                "reputation": 106,
                "user_id": 5027541,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/676f1c25630ba10978c627cc6f789cb8?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "cmf",
                "link": "https://stackoverflow.com/users/5027541/cmf"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689781793,
              "post_id": 76706219,
              "comment_id": 135263104,
              "link": "https://stackoverflow.com/questions/76705469/how-to-check-if-graph-committx-has-updated-records-in-py2neo/76706219#comment135263104_76706219"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1689609405,
          "creation_date": 1689609405,
          "answer_id": 76706219,
          "question_id": 76705469,
          "share_link": "https://stackoverflow.com/a/76706219",
          "body_markdown": "This is the documentation from py2neo about error handling:\r\n\r\n    https://py2neo.org/2021.1/errors.html \r\n\r\n and from neo4j about the status code\r\n\r\n     https://neo4j.com/docs/status-codes/current/ \r\n\r\nOn you sample code, I would add a try;catch exceptions like below:\r\n\r\n    from py2neo import Graph,Neo4jError,ClientError,TransientError,DatabaseError \r\n    \r\n    def process_query(cursor):\r\n        # Some logic would go here to create query 2 from the response of query 1.\r\n        dummy_query = &quot;CREATE (:Person {name: &#39;John&#39;})&quot;\r\n        return dummy_query\r\n    \r\n    \r\n    # Create link.\r\n    graph = Graph(uri=&quot;bolt://localhost:7687/&quot;, auth=(&quot;neo4j&quot;, &quot;admin&quot;))\r\n    try:\r\n        # Start transaction.\r\n        tx = graph.begin()\r\n    \r\n        # Run first query.\r\n        cursor1 = tx.run(&quot;MATCH (n) RETURN n&quot;)\r\n    \r\n        # Process data from first query.\r\n        query2 = process_query(cursor1)\r\n    \r\n        # Run second query.\r\n        cursor2 = tx.run(query2)\r\n    \r\n        # Commit the transaction.\r\n        graph.commit(tx)\r\n    \r\n    # based on https://py2neo.org/2021.1/errors.html and https://neo4j.com/docs/status-codes/current/\r\n    except Neo4jError as e:\r\n        print(&quot;Neo4j error: &quot;, e)\r\n    except ClientError as e:\r\n        print(&quot;Client error: &quot;, e)\r\n    except TransientError as e:\r\n        print(&quot;Transient error: &quot;, e) \r\n    except DatabaseError as e:\r\n        print(&quot;Database error: &quot;, e) \r\n    except Excepton as e:\r\n        print(&quot;Generic error: &quot;, e)\r\n    finally:\r\n        print(&#39;Done&#39;)\r\n    # Need logic here on success of final operation.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/status-codes/current/",
          "link": "https://stackoverflow.com/questions/76705469/how-to-check-if-graph-committx-has-updated-records-in-py2neo/76706219#76706219",
          "title": "How to check if graph.commit(tx) has updated records in py2neo"
        }
      ],
      "owner": {
        "reputation": 106,
        "user_id": 5027541,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/676f1c25630ba10978c627cc6f789cb8?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "cmf",
        "link": "https://stackoverflow.com/users/5027541/cmf"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 40,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1689609405,
      "creation_date": 1689604020,
      "question_id": 76705469,
      "share_link": "https://stackoverflow.com/q/76705469",
      "body_markdown": "The py2neo cursor has attributes relating to if a query is writing data in `cursor.summary()` and `cursor.stats()`\r\nHowever this dictionary remains the same both before and after `graph.commit(tx)`.\r\n\r\nHow can I confirm that `graph.commit(tx)` has written changes to the database?\r\n\r\nMy code is as follows:\r\n\r\n\r\n```lang-python\r\nfrom py2neo import Graph\r\n\r\n\r\ndef process_query(cursor):\r\n    # Some logic would go here to create query 2 from the response of query 1.\r\n    dummy_query = &quot;CREATE (:Person {name: &#39;John&#39;})&quot;\r\n    return dummy_query\r\n\r\n\r\n# Create link.\r\ngraph = Graph(uri=&quot;*****&quot;, auth=(&quot;*****&quot;, &quot;*****&quot;))\r\n\r\n# Start transaction.\r\ntx = graph.begin()\r\n\r\n# Run first query.\r\ncursor1 = tx.run(&quot;MATCH (n) RETURN n&quot;)\r\n\r\n# Process data from first query.\r\nquery2 = process_query(cursor1)\r\n\r\n# Run second query.\r\ncursor2 = tx.run(query2)\r\n\r\n# Commit the transaction.\r\ngraph.commit(tx)\r\n\r\n# Need logic here on success of final operation.\r\n\r\n```\r\nI can get the write information from `cursor2.stats()` but how should I monitor `graph.commit(tx)` if the transaction is unsuccesful? Does it throw an exception or return a specific response?\r\n\r\nI have looked at the docs but I cannot get a clear idea on how this function works exactly.",
      "link": "https://stackoverflow.com/questions/76705469/how-to-check-if-graph-committx-has-updated-records-in-py2neo",
      "title": "How to check if graph.commit(tx) has updated records in py2neo"
    },
    {
      "tags": ["neo4j", "cypher", "odbc", "qliksense"],
      "owner": {
        "reputation": 3,
        "user_id": 22213219,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfxWEYPF_xQcNlLZmY92IriddncQPH-MOJSAl7-er0IIA=k-s256",
        "display_name": "Shruthi B.K",
        "link": "https://stackoverflow.com/users/22213219/shruthi-b-k"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 24,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1689573737,
      "creation_date": 1689573737,
      "question_id": 76701842,
      "share_link": "https://stackoverflow.com/q/76701842",
      "body_markdown": "Can we execute cypher query through qliksense using ODBC connection?\r\nAlso, can anyone share the network graph used in qliksense which supports more nodes with arrow for indication and selection on nodes allowed? \r\n\r\nI am trying to load with normal SQL select statements but need to execute a cypher query",
      "link": "https://stackoverflow.com/questions/76701842/neo4j-odbc-connection-to-qliksense",
      "title": "Neo4j odbc connection to qliksense"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "last_editor": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1689269965,
          "last_edit_date": 1689269965,
          "creation_date": 1689269281,
          "answer_id": 76681930,
          "question_id": 76681546,
          "share_link": "https://stackoverflow.com/a/76681930",
          "body_markdown": "If you want to get back only nodes with no `r{prop:True}`, one option is:\r\n```\r\nOPTIONAL MATCH (ft:Foo)&lt;-[r{prop:True}]-(b:Bar)\r\nWITH COLLECT(ID(ft)) as ft_ids\r\nMATCH (f:Foo)\r\nWHERE NOT ID(f) IN ft_ids\r\nRETURN DISTINCT (f)\r\n```\r\nWhich for sample data:\r\n```\r\nMERGE (a1:Foo {name: &#39;a1&#39;})  \r\nMERGE (a2:Foo {name: &#39;a2&#39;}) \r\nMERGE (b1:Bar {name: &#39;b1&#39;})\r\nMERGE (b2:Bar {name: &#39;b2&#39;}) \r\nMERGE (b3:Bar {name: &#39;b3&#39;}) \r\nMERGE (a3:Foo {name: &#39;a3&#39;})  \r\nMERGE (a4:Foo {name: &#39;a3&#39;})  \r\n\r\nMERGE (b1)-[:POINTS{prop:true}]-(a1)\r\nMERGE (b2)-[:POINTS{prop:true}]-(a1)\r\nMERGE (b3)-[:POINTS{prop:false}]-(a2)\r\nMERGE (b1)-[:POINTS{prop:false}]-(a2)\r\nMERGE (b2)-[:POINTS{prop:false}]-(a3)\r\nMERGE (b1)-[:POINTS{prop:true}]-(a3)\r\n```\r\nreturns: \r\n```\r\n╒═════════════╕\r\n│&quot;f&quot;          │\r\n╞═════════════╡\r\n│{&quot;name&quot;:&quot;a2&quot;}│\r\n├─────────────┤\r\n│{&quot;name&quot;:&quot;a4&quot;}│\r\n└─────────────┘\r\n```\r\nIt is not clear which relationships and `bars` you want to get back...",
          "link": "https://stackoverflow.com/questions/76681546/retrieve-nodes-where-all-relationships-match-a-criteria-in-neo4j/76681930#76681930",
          "title": "Retrieve nodes where all relationships match a criteria in neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 19639,
                "user_id": 2662355,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
                "display_name": "Christophe Willemsen",
                "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1689279263,
              "post_id": 76682867,
              "comment_id": 135195114,
              "link": "https://stackoverflow.com/questions/76681546/retrieve-nodes-where-all-relationships-match-a-criteria-in-neo4j/76682867#comment135195114_76682867"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1689278468,
          "creation_date": 1689278468,
          "answer_id": 76682867,
          "question_id": 76681546,
          "share_link": "https://stackoverflow.com/a/76682867",
          "body_markdown": "This query uses the `EXISTS()` function to avoid having to scan all relationships to every `Foo` node to find the ones of interest. It filters out a `Foo` node as soon as a `true` relationship is found.\r\n\r\n    MATCH (foo:Foo)\r\n    WHERE NOT EXISTS((foo)&lt;-[{prop: true}]-())\r\n    MATCH (foo)&lt;-[r]-(bar)\r\n    RETURN foo, bar, r\r\n\r\n*This query also uses a directional r*elationship, to conform to the stated data model.",
          "link": "https://stackoverflow.com/questions/76681546/retrieve-nodes-where-all-relationships-match-a-criteria-in-neo4j/76682867#76682867",
          "title": "Retrieve nodes where all relationships match a criteria in neo4j"
        }
      ],
      "owner": {
        "reputation": 15,
        "user_id": 13895257,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/2104cdd2c4aedf02b729bef7a4c1d274?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "sjeknic",
        "link": "https://stackoverflow.com/users/13895257/sjeknic"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76682867,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1690748886,
      "creation_date": 1689265708,
      "last_edit_date": 1690748886,
      "question_id": 76681546,
      "share_link": "https://stackoverflow.com/q/76681546",
      "body_markdown": "I&#39;m trying to retrieve nodes where none of the relationships to that node have a specific property value. For example, I would like the query to return `foo` in the following example, because both relationships to `foo` have `prop = false`. \r\n\r\n`(bar0) -[{prop:false}]-&gt; (foo) &lt;-[{prop:false}]- (bar1)`\r\n\r\nOn the other hand, I would like the query to return `null` in the following example, because a subset of the relationships to `foo` have `prop = true`. \r\n\r\n`(bar0) -[{prop:false}]-&gt; (foo) &lt;-[{prop:true}]- (bar1)`\r\n\r\nSo far, I&#39;ve tried:\r\n\r\n```\r\nMATCH (foo)-[r]-(bar)\r\nWITH collect(r) as rs, foo, bar\r\nWHERE NONE(r in rs WHERE r.prop = True)\r\nUNWIND rs as r\r\nRETURN foo, bar, r\r\n```\r\n\r\nHowever, this still returns `foo`, it just removes the relationship where `prop = True`. \r\n\r\nI also tried using `CASE`, but run into the same problem.\r\n\r\n```\r\nMATCH (foo)-[r]-(bar)\r\nWITH collect(r) as rs, foo\r\nRETURN\r\nCASE \r\nWHEN ALL(r in rs WHERE r.prop=False)\r\n    THEN foo\r\nELSE null\r\nEND\r\n```\r\n\r\nIdeally, the query would also return nodes with no relationships as well, but I can also handle that with a separate query.\r\n",
      "link": "https://stackoverflow.com/questions/76681546/retrieve-nodes-where-all-relationships-match-a-criteria-in-neo4j",
      "title": "Retrieve nodes where all relationships match a criteria in neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689360545,
          "post_id": 76675398,
          "comment_id": 135207901,
          "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph#comment135207901_76675398"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689373486,
          "post_id": 76675398,
          "comment_id": 135209725,
          "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph#comment135209725_76675398"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690343997,
              "post_id": 76691823,
              "comment_id": 135338624,
              "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph/76691823#comment135338624_76691823"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1690398618,
              "post_id": 76691823,
              "comment_id": 135349727,
              "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph/76691823#comment135349727_76691823"
            },
            {
              "owner": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690561229,
              "post_id": 76691823,
              "comment_id": 135375848,
              "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph/76691823#comment135375848_76691823"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1690564063,
              "post_id": 76691823,
              "comment_id": 135376298,
              "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph/76691823#comment135376298_76691823"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1690564040,
          "last_edit_date": 1690564040,
          "creation_date": 1689382784,
          "answer_id": 76691823,
          "question_id": 76675398,
          "share_link": "https://stackoverflow.com/a/76691823",
          "body_markdown": "### Assumptions\r\n\r\n 1. The date constraint is applied to all relationships in every path to the specified company (&quot;ABC&quot;).\r\n 2. The end date property does not exist if shares are still currently held.\r\n 3. If an entity sells only a portion of its shares from a given purchase, the end date property is added, the number of shares is reduced to the number sold, and the remaining shares are used to create a new relationship with the same start date. (This is not implemented in my answer, since the use case does not sell any shares).\r\n 4. The date constraint is also enforced when calculating `totalShares` for a company.\r\n 5. A company can hold some of its own shares.\r\n 6. You pass the target date and company name in the [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) `$targetDate` and `$company`.\r\n\r\n### Data model\r\n\r\nI simplified the names in the data model for easier reading:\r\n\r\n    (:Person|Company {name})-[:HOLDS {start, end, shares}]-&gt;(:Company {name})\r\n\r\n### Cypher query\r\nHere is one way to implement your use case:\r\n\r\n    WITH DATE($targetDate) AS targetDate\r\n\r\n    // Find all paths up to length 3 involving the specified company, on the target date.\r\n    MATCH ()-[rs:HOLDS*..3]-&gt;(:Company {name: $company})\r\n    WHERE ALL(r IN rs WHERE r.start &lt;= targetDate AND (r.end IS NULL OR targetDate &lt;= r.end))\r\n\r\n    // Collect the distinct HOLD relationships in the paths for each company.\r\n    WITH targetDate, ENDNODE(rs[0]) AS c, COLLECT(DISTINCT rs[0]) AS rels\r\n\r\n    // Calculate total number of shares owned by each company in the paths, on the target date\r\n    UNWIND rels AS rel\r\n    WITH c, rels, SUM(rel.shares) AS totalShares\r\n\r\n    // Return a company, a shareholder, and the percentage of that company owned by the shareholder on the target date.\r\n    UNWIND rels AS rel\r\n    WITH totalShares, c.name AS company, STARTNODE(rel).name AS holder, SUM(rel.shares) AS shares\r\n    RETURN company, holder, 100.0*shares/totalShares AS pct\r\n\r\n### Test data\r\n\r\n    CREATE (p1:Person {name: &#39;John&#39;}),\r\n           (p2:Person {name: &#39;Dave&#39;}),\r\n           (p3:Person {name: &#39;Alice&#39;})\r\n    \r\n    CREATE (c1:Company {name: &#39;Comp1&#39;}),\r\n           (c2:Company {name: &#39;Comp2&#39;}),\r\n           (c3:Company {name: &#39;Comp3&#39;}),\r\n           (c4:Company {name: &#39;ABC&#39;})\r\n    \r\n    CREATE (p1)-[:HOLDS {start: date(&#39;2018-01-01&#39;), end: date(&#39;2022-12-31&#39;), shares: 1000}]-&gt;(c1)\r\n    CREATE (c2)-[:HOLDS {start: date(&#39;2020-01-01&#39;), end: date(&#39;2025-12-31&#39;), shares: 750}]-&gt;(c1)\r\n    CREATE (p3)-[:HOLDS {start: date(&#39;2019-01-01&#39;), end: date(&#39;2022-12-31&#39;), shares: 800}]-&gt;(c3)\r\n    CREATE (c1)-[:HOLDS {start: date(&#39;2016-07-01&#39;), end: date(&#39;2023-12-31&#39;), shares: 800}]-&gt;(c4)\r\n    \r\n    // Dave bought 500 shares of Comp1, and later bought 250 more.\r\n    // Then he sold 125 shares from the second batch on &#39;2023-06-30&#39; and still has the remaining 125 shares.\r\n    CREATE (p2)-[:HOLDS {start: date(&#39;2020-01-01&#39;), end: date(&#39;2023-12-31&#39;), shares: 500}]-&gt;(c1)\r\n    CREATE (p2)-[:HOLDS {start: date(&#39;2023-01-01&#39;), end: date(&#39;2023-06-30&#39;), shares: 125}]-&gt;(c1)\r\n    CREATE (p2)-[:HOLDS {start: date(&#39;2023-01-01&#39;), shares: 125}]-&gt;(c1)\r\n    \r\n    // ABC and Comp2 own shares of each other\r\n    CREATE (c2)-[:HOLDS {start: date(&#39;2017-01-01&#39;), end: date(&#39;2023-12-31&#39;), shares: 700}]-&gt;(c4)\r\n    CREATE (c4)-[:HOLDS {start: date(&#39;2016-07-01&#39;), shares: 500}]-&gt;(c2)\r\n    \r\n    // Comp1 holds (and continues to hold) some of its own shares\r\n    CREATE (c1)-[:HOLDS {start: date(&#39;2021-01-01&#39;), shares: 500}]-&gt;(c1)\r\n\r\n### Results\r\n\r\n  Using `$targetDate` = &quot;2023-07-21&quot;, and `$company` = &quot;ABC&quot;:\r\n\r\n    ╒═══════╤═══════╤══════════════════╕\r\n    │company│holder │pct               │\r\n    ╞═══════╪═══════╪══════════════════╡\r\n    │&quot;ABC&quot;  │&quot;Comp2&quot;│46.666666666666664│\r\n    ├───────┼───────┼──────────────────┤\r\n    │&quot;ABC&quot;  │&quot;Comp1&quot;│53.333333333333336│\r\n    ├───────┼───────┼──────────────────┤\r\n    │&quot;Comp2&quot;│&quot;ABC&quot;  │100.0             │\r\n    ├───────┼───────┼──────────────────┤\r\n    │&quot;Comp1&quot;│&quot;Comp2&quot;│40.0              │\r\n    ├───────┼───────┼──────────────────┤\r\n    │&quot;Comp1&quot;│&quot;Dave&quot; │33.333333333333336│\r\n    ├───────┼───────┼──────────────────┤\r\n    │&quot;Comp1&quot;│&quot;Comp1&quot;│26.666666666666668│\r\n    └───────┴───────┴──────────────────┘\r\n\r\n### Matching graph\r\n\r\nHere is a graph of the paths found by the above query&#39;s first `MATCH`/`WHERE` pair.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is the visualization query (a minor variant of the first 3 clauses of above query):\r\n\r\n    WITH DATE($targetDate) AS targetDate\r\n    MATCH (h)-[rs:HOLDS*..3]-&gt;(c:Company {name: $company})\r\n    WHERE ALL(r IN rs WHERE r.start &lt;= targetDate AND (r.end IS NULL OR targetDate &lt;= r.end))\r\n    RETURN *\r\n\r\n  [1]: https://i.stack.imgur.com/MbmWe.png",
          "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph/76691823#76691823",
          "title": "Extending layers of nodes in neo4j graph"
        }
      ],
      "owner": {
        "reputation": 1280,
        "user_id": 4958156,
        "user_type": "registered",
        "accept_rate": 80,
        "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Programmer",
        "link": "https://stackoverflow.com/users/4958156/programmer"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 59,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76691823,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1690564040,
      "creation_date": 1689212694,
      "question_id": 76675398,
      "share_link": "https://stackoverflow.com/q/76675398",
      "body_markdown": "I have two node types &quot;Person&quot; and &quot;Company&quot;. There is also a relationship called &quot;Shareholder&quot;, which can be from Person to Company or Company to Company (as companies can also hold shares in other companies). The Shareholder relationship has three properties &quot;shareholding_start_date&quot;, &quot;shareholding_end_date&quot;, &quot;number_of_shares&quot;.\r\n\r\nI have a query which takes in Company name (call it &#39;ABC&#39;), as well as provide a date (e.g. &#39;2021-07-23&#39;), and the query returns all Person/Company nodes that are shareholders of c at the date &#39;2021-07-23&#39; (i.e. shareholding_start_date &lt; 2021-07-23 &lt; shareholding_end_date). It also calculates the percentage based on &#39;number_of_shares&#39;. \r\n\r\nThe working query is below: \r\n\r\n    MATCH (c:Company {name:”ABC”})&lt;-[r:Shareholder]-(s)\r\n    WHERE R.shareholding_start_date &lt;= Date(“2021-07-23”) \r\n       AND r.shareholding_end_date &gt;= DATE(“2021-07-23”)\r\n    WITH c, \r\n    collect(s) as shareholders, \r\n    collect(r) as rels, \r\n    sum(r.number_of_shares) AS totalShares\r\n    UNWIND range(0, size(rels) - 1) AS I\r\n    RETURN shareholders[i].name AS shareholder, \r\n    100.0 * rels[i].number_of_shares/totalShares as percentTotalShares\r\n\r\nI am looking to extend this so that it also shows shareholders of shareholders, up to a certain layer limit which can be defined in the query (let&#39;s say 3, for example). So in the above example, the query will return all shareholders of company &#39;ABC&#39;, which may be &quot;Person&quot; or &quot;Company&quot; node types. In the case where the shareholders of &#39;ABC&#39; are &quot;Company&quot; nodes, I basically want to repeat the same code on them and list all their Shareholders, along with the shareholding % in that company. This should continue until we reach the limit (i.e. 3). \r\n",
      "link": "https://stackoverflow.com/questions/76675398/extending-layers-of-nodes-in-neo4j-graph",
      "title": "Extending layers of nodes in neo4j graph"
    },
    {
      "tags": ["neo4j", "cypher", "graph-databases", "neo4j-ogm", "opencypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689201325,
          "post_id": 76668155,
          "comment_id": 135181604,
          "link": "https://stackoverflow.com/questions/76668155/neo4j-ogm-how-to-correctly-use-relationshipentity-to-load-connected-nodes#comment135181604_76668155"
        },
        {
          "owner": {
            "reputation": 187,
            "user_id": 16329148,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/vbKBO.png?s=256&g=1",
            "display_name": "ConfusedPenguin",
            "link": "https://stackoverflow.com/users/16329148/confusedpenguin"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689321263,
          "post_id": 76668155,
          "comment_id": 135199711,
          "link": "https://stackoverflow.com/questions/76668155/neo4j-ogm-how-to-correctly-use-relationshipentity-to-load-connected-nodes#comment135199711_76668155"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 187,
            "user_id": 16329148,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/vbKBO.png?s=256&g=1",
            "display_name": "ConfusedPenguin",
            "link": "https://stackoverflow.com/users/16329148/confusedpenguin"
          },
          "last_editor": {
            "reputation": 187,
            "user_id": 16329148,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/vbKBO.png?s=256&g=1",
            "display_name": "ConfusedPenguin",
            "link": "https://stackoverflow.com/users/16329148/confusedpenguin"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1689321290,
          "last_edit_date": 1689321290,
          "creation_date": 1689277633,
          "answer_id": 76682768,
          "question_id": 76668155,
          "share_link": "https://stackoverflow.com/a/76682768",
          "body_markdown": "Note: I have edited the question to better reflect the essence of it. This answer summarizes the learnings from https://github.com/neo4j/neo4j-ogm/issues/951, which is mainly contributed by https://stackoverflow.com/users/2650436/meistermeier\r\n\r\nWhat&#39;s causing the issue is:\r\n\r\n    @Relationship(type = &quot;HAS_B&quot;)\r\n    val b: MutableSet&lt;B&gt; = mutableSetOf&lt;B&gt;()\r\n\r\nIn order for OGM to go from node entity `A` to relationship entity `HasB`, the `@Relationship` should annotate a variable that directly refers to the relationship entity itself, instead of node entity B (i.e. the node entity it connects A to).\r\n\r\nSolution:\r\n\r\n    @NodeEntity\r\n    data class A(\r\n        @Id val id: String? = null,\r\n        @Relationship(type = &quot;HAS_B&quot;)\r\n        var b: MutableSet&lt;HasB&gt; = mutableSetOf()\r\n    )\r\n    \r\n    @RelationshipEntity(type = &quot;HAS_B&quot;)\r\n    class HasB @JvmOverloads constructor(\r\n        @Id @GeneratedValue val id: Long? = null,\r\n        @StartNode val start: A = A(),\r\n        @EndNode val end: B = B()\r\n    ) {\r\n        override fun toString(): String {\r\n            return &quot;HasB(id=$id, end=$end)&quot;\r\n        }\r\n    }\r\n    \r\n    @NodeEntity\r\n    data class B(\r\n        @Id val id: String? = null,\r\n        @Relationship(type = &quot;HAS_C&quot;)\r\n        val c: MutableSet&lt;C&gt; = mutableSetOf()\r\n    )\r\n    \r\n    @NodeEntity\r\n    data class C(\r\n        @Id val id: String? = null\r\n    )",
          "link": "https://stackoverflow.com/questions/76668155/neo4j-ogm-how-to-correctly-use-relationshipentity-to-load-connected-nodes/76682768#76682768",
          "title": "Neo4j OGM: How to correctly use @RelationshipEntity to load connected nodes"
        }
      ],
      "owner": {
        "reputation": 187,
        "user_id": 16329148,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/vbKBO.png?s=256&g=1",
        "display_name": "ConfusedPenguin",
        "link": "https://stackoverflow.com/users/16329148/confusedpenguin"
      },
      "last_editor": {
        "reputation": 187,
        "user_id": 16329148,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/vbKBO.png?s=256&g=1",
        "display_name": "ConfusedPenguin",
        "link": "https://stackoverflow.com/users/16329148/confusedpenguin"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 88,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76682768,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1689321290,
      "creation_date": 1689147430,
      "last_edit_date": 1689277120,
      "question_id": 76668155,
      "share_link": "https://stackoverflow.com/q/76668155",
      "body_markdown": "Say I have nodes of types A, B and C, and I have the following graph:\r\n[![enter image description here](https://i.stack.imgur.com/QD5Y1.png)](https://i.stack.imgur.com/QD5Y1.png)\r\n\r\n    @NodeEntity\r\n    data class A(\r\n        @Id val id: String? = null,\r\n        @Relationship(type = &quot;HAS_B&quot;)\r\n        val b: MutableSet&lt;B&gt; = mutableSetOf&lt;B&gt;()\r\n    )\r\n    \r\n    @RelationshipEntity(type = &quot;HAS_B&quot;)\r\n    data class HasB @JvmOverloads constructor(\r\n        @Id @GeneratedValue val id: Long? = null,\r\n        @StartNode val start: A = A(),\r\n        @EndNode val end: B = B()\r\n    )\r\n    \r\n    @NodeEntity\r\n    data class B(\r\n        @Id val id: String? = null,\r\n        @Relationship(type = &quot;HAS_C&quot;)\r\n        val c: MutableSet&lt;C&gt; = mutableSetOf&lt;C&gt;()\r\n    )\r\n    \r\n    ...\r\n\r\nMy goal is to load the node A, together with the connected B and C nodes.\r\n\r\nCurrently (in Kotlin code) I am doing `session.load(A::class.java, &quot;a1&quot;, -1)`, which uses this implementation:\r\n`&lt;T,ID extends Serializable&gt; T load(Class&lt;T&gt; type, ID id, int depth)` (from [here](https://javadoc.io/static/org.neo4j/neo4j-ogm-core/3.2.3/org/neo4j/ogm/session/Session.html))\r\n\r\nSupposedly, with depth = -1, this should load node A together with all its connected nodes. However, it seems to only load the node A. \r\n\r\nWhat is causing this issue, and how to fix it?",
      "link": "https://stackoverflow.com/questions/76668155/neo4j-ogm-how-to-correctly-use-relationshipentity-to-load-connected-nodes",
      "title": "Neo4j OGM: How to correctly use @RelationshipEntity to load connected nodes"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689091502,
          "post_id": 76659774,
          "comment_id": 135162873,
          "link": "https://stackoverflow.com/questions/76659774/neo4j-com-example-entity-extendedobject-is-not-a-known-entity-when-mapping-dat#comment135162873_76659774"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 20518585,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0f3daabec13c3497ba4da10f31826fa8?s=256&d=identicon&r=PG",
            "display_name": "Prasanna",
            "link": "https://stackoverflow.com/users/20518585/prasanna"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1689144567,
          "post_id": 76659774,
          "comment_id": 135169786,
          "link": "https://stackoverflow.com/questions/76659774/neo4j-com-example-entity-extendedobject-is-not-a-known-entity-when-mapping-dat#comment135169786_76659774"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1689967447,
          "creation_date": 1689967447,
          "answer_id": 76740709,
          "question_id": 76659774,
          "share_link": "https://stackoverflow.com/a/76740709",
          "body_markdown": "This is because Spring Data Neo4j needs the return type of a repository method to match whatever object we are extending for the repository itself. For instance, if the ObjectRepo is extending the Neo4jRepository&lt;Object, Long&gt;, then all methods in the repository must return a type of Object. Otherwise, SDN doesn&#39;t know how to map the result. To correct this, you can change the repository to the ExtendedObject and return that subentity.\r\n\r\nI&#39;ve created a sample repository showing this with all the instructions to reproduce. https://github.com/JMHReif/extendedobject-not-known-entity-exception \r\n\r\nAlso, as a side note, you can use the @ReadOnlyProperty annotation in the ExtendedObject class to ensure that you only read the property and don&#39;t write to it. An example of using that is also included in the Github project above. :)",
          "link": "https://stackoverflow.com/questions/76659774/neo4j-com-example-entity-extendedobject-is-not-a-known-entity-when-mapping-dat/76740709#76740709",
          "title": "&quot;neo4j.com.example.entity.ExtendedObject is not a known entity&quot; when mapping data to ExtendedObject"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 20518585,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0f3daabec13c3497ba4da10f31826fa8?s=256&d=identicon&r=PG",
        "display_name": "Prasanna",
        "link": "https://stackoverflow.com/users/20518585/prasanna"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 64,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1689967447,
      "creation_date": 1689062103,
      "last_edit_date": 1689178462,
      "question_id": 76659774,
      "share_link": "https://stackoverflow.com/q/76659774",
      "body_markdown": "\r\n```\r\n@Node(&quot;label&quot;)\r\npublic class Object extends  Auditable&lt;String&gt; implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    ....\r\n//getter \r\n//setter\r\n//constructor\r\n\r\n\r\n}\r\n\r\n\r\npublic class ExtendedObject extends Object{\r\n\r\n    private Long projectId;\r\n    private String projectName;\r\n    private Long clientID;\r\n \r\n// extra field which i don&#39;t want to store in entity but want to retrieve while fetching the Object\r\n\r\n\r\n}\r\n\r\n\r\n@Repository\r\npublic interface ObjectRepo extends Neo4jRepository&lt;Object, Long&gt; {\r\n\r\n@Query(&quot;&quot;)\r\nList&lt;ExtendedObject&gt; findPosition(@Param(&quot;comparison&quot;) String comparison);\r\n\r\n}\r\n```\r\n\r\n\r\nI provided necessary annotation whenever necessary.\r\n\r\nI want to map the query result into an `ExtendedObject`, but it&#39;s throwing error:\r\n\r\n    neo4j.com.example.entity.ExtendedObject is not a known entity\r\n\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76659774/neo4j-com-example-entity-extendedobject-is-not-a-known-entity-when-mapping-dat",
      "title": "&quot;neo4j.com.example.entity.ExtendedObject is not a known entity&quot; when mapping data to ExtendedObject"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 7089046,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/b0d5ee2199e8c041d5c0284cc4cbb01f?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "user7089046",
                "link": "https://stackoverflow.com/users/7089046/user7089046"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689045937,
              "post_id": 76656720,
              "comment_id": 135154058,
              "link": "https://stackoverflow.com/questions/76656126/create-two-alias-of-same-label-for-different-db-composite-databases/76656720#comment135154058_76656720"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 7089046,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/b0d5ee2199e8c041d5c0284cc4cbb01f?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "user7089046",
                "link": "https://stackoverflow.com/users/7089046/user7089046"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689090434,
              "post_id": 76656720,
              "comment_id": 135162639,
              "link": "https://stackoverflow.com/questions/76656126/create-two-alias-of-same-label-for-different-db-composite-databases/76656720#comment135162639_76656720"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1689017765,
          "last_edit_date": 1689017765,
          "creation_date": 1689017009,
          "answer_id": 76656720,
          "question_id": 76656126,
          "share_link": "https://stackoverflow.com/a/76656720",
          "body_markdown": "The [graph.names()](https://neo4j.com/docs/cypher-manual/current/functions/graph/#functions-graph-names) function returns the aliases in **lowercase**, which is not documented (but should be).\r\n\r\nSo, change this line:\r\n\r\n    UNWIND [g IN graph.names() WHERE g STARTS WITH &#39;socialDb.personP2&#39;] AS g\r\n\r\nto this:\r\n\r\n    UNWIND [g IN graph.names() WHERE g STARTS WITH &#39;socialdb.personp2&#39;] AS g\r\n",
          "link": "https://stackoverflow.com/questions/76656126/create-two-alias-of-same-label-for-different-db-composite-databases/76656720#76656720",
          "title": "create two alias of same label for different DB - composite databases"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 7089046,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/b0d5ee2199e8c041d5c0284cc4cbb01f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "user7089046",
        "link": "https://stackoverflow.com/users/7089046/user7089046"
      },
      "last_editor": {
        "reputation": 632,
        "user_id": 17161252,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/ZaYqP.png?s=256&g=1",
        "display_name": "Waleed Tariq",
        "link": "https://stackoverflow.com/users/17161252/waleed-tariq"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 65,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1689151567,
      "creation_date": 1689010892,
      "last_edit_date": 1689151567,
      "question_id": 76656126,
      "share_link": "https://stackoverflow.com/q/76656126",
      "body_markdown": "is it possible to access data of same label name in two databases and different alias in composite database.\r\nfor example - label = person , which i have created in two different databases personDbPartition1 and personDbPartition2 respectively. i have separate alias also, see below commands: \r\n\r\n```sql\r\nCREATE DATABASE personDbPartition1 TOPOLOGY 3 PRIMARY;\r\nCREATE DATABASE personDbPartition2 TOPOLOGY 3 PRIMARY;\r\n\r\nCREATE COMPOSITE DATABASE socialDb;\r\nCREATE ALIAS socialDb.personP1 FOR DATABASE personDbPartition1;\r\nCREATE ALIAS socialDb.personP2 FOR DATABASE personDbPartition2;\r\n```\r\n\r\n1. personDbPartition1: i have created data in personDbPartition1 and relationships \r\n```sql\r\nCREATE (p:person {name: &#39;user10001&#39;, age: 30});\r\nCREATE (p:person {name: &#39;user10002&#39;, age: 30});\r\nCREATE (p:person {name: &#39;user10003&#39;, age: 30});\r\nCREATE (p:person {name: &#39;user10004&#39;, age: 30});\r\n\r\nCREATE CONSTRAINT for (p:person) REQUIRE p.name IS UNIQUE;\r\n\r\nmatch(a:person{name: &#39;user10001&#39;}),(b:person{name: &#39;user10002&#39;}) create(a)-[:knows]-&gt;(b) return a,b;\r\nmatch(a:person{name: &#39;user10002&#39;}),(b:person{name: &#39;user10003&#39;}) create(a)-[:knows]-&gt;(b) return a,b;\r\nmatch(a:person{name: &#39;user10003&#39;}),(b:person{name: &#39;user10004&#39;}) create(a)-[:knows]-&gt;(b) return a,b;\r\n```\r\n\r\n2. personDbPartition2: i have created data in personDbPartition2 and relationships \r\n```sql\r\nCREATE (p:person {name: &#39;user10004&#39;}); ## proxy data node\r\nCREATE (p:person {name: &#39;user10005&#39;, age: 30});\r\nCREATE (p:person {name: &#39;user10006&#39;, age: 30});\r\nCREATE (p:person {name: &#39;user10007&#39;, age: 30});\r\n\r\nCREATE CONSTRAINT for (p:person) REQUIRE p.name IS UNIQUE;\r\n\r\nmatch(a:person{name: &#39;user10004&#39;}),(b:person{name: &#39;user10005&#39;}) create(a)-[:knows]-&gt;(b) return a,b;\r\nmatch(a:person{name: &#39;user10005&#39;}),(b:person{name: &#39;user10006&#39;}) create(a)-[:knows]-&gt;(b) return a,b;\r\nmatch(a:person{name: &#39;user10006&#39;}),(b:person{name: &#39;user10007&#39;}) create(a)-[:knows]-&gt;(b) return a,b;\r\n```\r\n\r\nall data created successfully and i can access them individually while login to specific database and through composite DB also\r\n\r\n\r\nbut when i am calling below combine cypher then its returning empty results:\r\n\r\n```sql\r\nCALL {\r\n  USE socialDb.personP1 MATCH (p:person{name:&#39;user10004&#39;}) RETURN COLLECT(p.name) AS pids\r\n}\r\nWITH *\r\nUNWIND [g IN graph.names() WHERE g STARTS WITH &#39;socialDb.personP2&#39;] AS g\r\nCALL {\r\n  USE graph.byName(g)\r\n  WITH pids\r\n  UNWIND pids as pid\r\n  MATCH (p:person{name:pid})-[:knows]-&gt;(c:person) RETURN p.name as pname, c.name AS cname\r\n}\r\nRETURN pname, cname\r\nLIMIT 20;\r\n```\r\n\r\n\r\n\r\n\r\n\r\nam i missing anything in query? or same label not work for multiple database and alias ?",
      "link": "https://stackoverflow.com/questions/76656126/create-two-alias-of-same-label-for-different-db-composite-databases",
      "title": "create two alias of same label for different DB - composite databases"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 79517,
                "user_id": 471272,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=256&g=1",
                "display_name": "tchrist",
                "link": "https://stackoverflow.com/users/471272/tchrist"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688840058,
              "post_id": 76642262,
              "comment_id": 135129117,
              "link": "https://stackoverflow.com/questions/76642251/neo4j-cypher-to-identify-unresolved-edges/76642262#comment135129117_76642262"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 36,
            "user_id": 22159264,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/cXwwz.jpg?s=256&g=1",
            "display_name": "nail steiger",
            "link": "https://stackoverflow.com/users/22159264/nail-steiger"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1688808820,
          "creation_date": 1688808820,
          "answer_id": 76642262,
          "question_id": 76642251,
          "share_link": "https://stackoverflow.com/a/76642262",
          "body_markdown": "You just need to concoct a Cypher query that checks both the srcNodeId and the destNodeId for each edge in your list , and see if these fellas match up with any existing node in the database.\r\n\r\nHere&#39;s a query that can get this job done:\r\n\r\n    MATCH (n)\r\n    WHERE NOT (ID(n) IN $srcNodeIds) OR NOT (ID(n) IN $destNodeIds)\r\n    RETURN n\r\n\r\nIn this query, $srcNodeIds and $destNodeIds are parameters you&#39;ll pass into the query that represent your lists of source node IDs and destination node IDs, respectively. The query is checking if any nodes exist with IDs that are NOT in these lists. Any nodes that are returned from this query would be the unresolved ones , i.e., they exist in your Edge objects but not in the actual database.\r\n\r\nJust remember to pass in the srcNodeIds and destNodeIds as parameters when you&#39;re running this query. For instance , in the Neo4j Java driver, it might look something like this:\r\n\r\n    List&lt;Long&gt; srcNodeIds = edges.stream().map(edge -&gt; edge.srcNodeId).collect(Collectors.toList());\r\n    List&lt;Long&gt; destNodeIds = edges.stream().map(edge -&gt; edge.destNodeId).collect(Collectors.toList());\r\n    \r\n    Session session = driver.session();\r\n    \r\n    Map&lt;String , Object&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;srcNodeIds&quot; , srcNodeIds);\r\n    params.put(&quot;destNodeIds&quot; , destNodeIds);\r\n\r\nStatementResult result = session.run(query , params);\r\nNow , keep in mind that this query might take a while if you&#39;ve got a massive graph, because it&#39;s essentially scanning through the whole kit and caboodle.\r\n",
          "link": "https://stackoverflow.com/questions/76642251/neo4j-cypher-to-identify-unresolved-edges/76642262#76642262",
          "title": "neo4j: cypher to identify unresolved edges"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1688949422,
          "creation_date": 1688949422,
          "answer_id": 76650077,
          "question_id": 76642251,
          "share_link": "https://stackoverflow.com/a/76650077",
          "body_markdown": "Assuming `$edges` is a [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) with a list of edges:\r\n\r\n    UNWIND $edges AS e\r\n    OPTIONAL MATCH (src) WHERE ID(src) = e.srcNodeId\r\n    OPTIONAL MATCH (dest) WHERE ID(dest) = e.destNodeId\r\n    RETURN\r\n      e.srcNodeId AS srcNodeId, src IS NOT NULL AS srcExists,\r\n      e.destNodeId AS destNodeId, dest IS NOT NULL AS destExists",
          "link": "https://stackoverflow.com/questions/76642251/neo4j-cypher-to-identify-unresolved-edges/76650077#76650077",
          "title": "neo4j: cypher to identify unresolved edges"
        }
      ],
      "owner": {
        "reputation": 6601,
        "user_id": 583367,
        "user_type": "registered",
        "accept_rate": 70,
        "profile_image": "https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG",
        "display_name": "Arjun",
        "link": "https://stackoverflow.com/users/583367/arjun"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 32,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1688949422,
      "creation_date": 1688808580,
      "question_id": 76642251,
      "share_link": "https://stackoverflow.com/q/76642251",
      "body_markdown": "My Edge object is like this:\r\n\r\n    class Edge {\r\n       public long srcNodeId;\r\n       public long destNodeId;\r\n    }\r\n\r\nGiven a `List&lt;Edge&gt;`, is it possible to return all edges either src OR dest OR both nodes doesn&#39;t exist, using a single cypher query?",
      "link": "https://stackoverflow.com/questions/76642251/neo4j-cypher-to-identify-unresolved-edges",
      "title": "neo4j: cypher to identify unresolved edges"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 878,
            "user_id": 3952697,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6f711663b08cbcc7ea756a11d7857b16?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Dave Fauth",
            "link": "https://stackoverflow.com/users/3952697/dave-fauth"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688736271,
          "creation_date": 1688736271,
          "answer_id": 76637394,
          "question_id": 76637272,
          "share_link": "https://stackoverflow.com/a/76637394",
          "body_markdown": "You can do something like this:\r\n\r\n    call apoc.load.json(&quot;file:/var/lib/neo4j/import/so.json&quot;) YIELD value\r\n    with value.src as tsrc\r\n    unwind(split(tsrc,&#39;,&#39;)) as tempsrc\r\n    create (s:Source {src:tempsrc})",
          "link": "https://stackoverflow.com/questions/76637272/how-to-split-up-elements-in-an-array-json-and-create-nodes-in-neo4j/76637394#76637394",
          "title": "How to split up elements in an array (JSON) and create nodes in neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688740892,
          "creation_date": 1688740892,
          "answer_id": 76637936,
          "question_id": 76637272,
          "share_link": "https://stackoverflow.com/a/76637936",
          "body_markdown": "This is using foreach command which is similar to unwind.\r\n\r\n    call apoc.load.json(&quot;example.json&quot;) YIELD value\r\n    with split(value.src,&#39;,&#39;) as srcs\r\n    foreach (src in srcs | create (:src {src: src}))\r\n\r\nReference:\r\nhttps://neo4j.com/docs/cypher-manual/current/clauses/foreach/",
          "link": "https://stackoverflow.com/questions/76637272/how-to-split-up-elements-in-an-array-json-and-create-nodes-in-neo4j/76637936#76637936",
          "title": "How to split up elements in an array (JSON) and create nodes in neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688748340,
          "creation_date": 1688748340,
          "answer_id": 76638823,
          "question_id": 76637272,
          "share_link": "https://stackoverflow.com/a/76638823",
          "body_markdown": "You can create a `Src` node for every `src` value this way (note that the SPLIT delimiter `&#39;, &#39;` has a blank as the second character): \r\n\r\n    CALL apoc.load.json(&quot;file:/Users/user/.Neo4jDesktop/relate-data/dbmss/dbms-969/import/example.json&quot;) YIELD value\r\n    UNWIND SPLIT(value.src, &#39;, &#39;) AS src\r\n    CREATE (:Src {src: src})\r\n\r\nIt is not clear what you meant by `i want the other values to be the nodes parameters`.",
          "link": "https://stackoverflow.com/questions/76637272/how-to-split-up-elements-in-an-array-json-and-create-nodes-in-neo4j/76638823#76638823",
          "title": "How to split up elements in an array (JSON) and create nodes in neo4j"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22178705,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/2ae66a991e2f35e436f61ca000a4f73c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "chickenleg",
        "link": "https://stackoverflow.com/users/22178705/chickenleg"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 3,
      "score": 1,
      "last_activity_date": 1688748340,
      "creation_date": 1688735321,
      "last_edit_date": 1688747588,
      "question_id": 76637272,
      "share_link": "https://stackoverflow.com/q/76637272",
      "body_markdown": "Neo4j Desktop:\r\nThere is a big JSON file with entries like the one shown below.\r\nI want to split up the entries of &quot;src&quot; and create nodes with each single one of the entries. \r\nFurther i want the other values to be the nodes parameters.\r\nInput via JSON file (see below).\r\n\r\nWhat is the best way to do all this stuff?\r\n\r\n```\r\n{\r\n    &quot;transaction&quot;:  &quot;42043-134632465-3221&quot;,\r\n    &quot;action&quot;:  &quot;Accept&quot;,\r\n    &quot;src&quot;:  &quot;dummy593, dummy834, dummy203&quot;,\r\n    &quot;adds&quot;:     {\r\n                },\r\n    &quot;dest&quot;:     {\r\n                    &quot;name&quot;:  &quot;John Doe&quot;,\r\n                    &quot;address&quot;:  &quot;Baker Street&quot;,\r\n                    &quot;phone&quot;:  &quot;12345, 54321&quot;                  \r\n                }\r\n}\r\n```\r\n\r\n\r\nI tried to combine the functions of apoc.load.json, apoc.cyper.run and within this i used split(src, &#39;,&#39;).\r\nI&#39;ve gotten a security error and honestly i don&#39;t think it would&#39;ve worked though.\r\nShould i use `apoc.load.json` or something like `with{json}`?\r\n\r\n```\r\ncall apoc.load.json(&quot;file:/Users/user/.Neo4jDesktop/relate-data/dbmss/dbms-969/import/example.json&quot;) YIELD value\r\nwith value.src as src\r\ncall apoc.cypher.run(&quot;with $src as src unwind src as src create (:src {src: src})&quot;, {src: split(src, &#39;,&#39;)}) yield value\r\nreturn value\r\n```\r\n\r\n\r\nApologies and thanks - i&#39;m bloody new in cypher topics ... \r\n",
      "link": "https://stackoverflow.com/questions/76637272/how-to-split-up-elements-in-an-array-json-and-create-nodes-in-neo4j",
      "title": "How to split up elements in an array (JSON) and create nodes in neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688658059,
          "post_id": 76626552,
          "comment_id": 135106443,
          "link": "https://stackoverflow.com/questions/76626552/trying-to-filter-an-array-of-strings-to-return-a-single-field-which-is-a-subset#comment135106443_76626552"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3,
                "user_id": 22183369,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/54bd4188f3907a7f9bd87c2e2024c214?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "footiefan92",
                "link": "https://stackoverflow.com/users/22183369/footiefan92"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688724174,
              "post_id": 76631134,
              "comment_id": 135115306,
              "link": "https://stackoverflow.com/questions/76626552/trying-to-filter-an-array-of-strings-to-return-a-single-field-which-is-a-subset/76631134#comment135115306_76631134"
            },
            {
              "owner": {
                "reputation": 12347,
                "user_id": 7371893,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
                "display_name": "jose_bacoy",
                "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688757328,
              "post_id": 76631134,
              "comment_id": 135121614,
              "link": "https://stackoverflow.com/questions/76626552/trying-to-filter-an-array-of-strings-to-return-a-single-field-which-is-a-subset/76631134#comment135121614_76631134"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1688760036,
          "last_edit_date": 1688760036,
          "creation_date": 1688663496,
          "answer_id": 76631134,
          "question_id": 76626552,
          "share_link": "https://stackoverflow.com/a/76631134",
          "body_markdown": "The following query returns each node and its list of filtered strings. Nodes without matching strings are ignored. `$filter` is a [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) with the desired filter (e.g., &quot;abc&quot;).\r\n\r\n    MATCH (n:Node)\r\n    UNWIND n.string AS s\r\n    WITH n, s\r\n    WHERE s CONTAINS $filter\r\n    RETURN n, COLLECT(s) AS filtered_strings\r\n\r\nNOTE: If `n.string` is actually a string that looks like a list, replace `n.string` with `SPLIT(n.string, &#39;,&#39;)`.",
          "link": "https://stackoverflow.com/questions/76626552/trying-to-filter-an-array-of-strings-to-return-a-single-field-which-is-a-subset/76631134#76631134",
          "title": "Trying to filter an array of strings to return a single field which is a subset of the array with strings that contain a variable"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22183369,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/54bd4188f3907a7f9bd87c2e2024c214?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "footiefan92",
        "link": "https://stackoverflow.com/users/22183369/footiefan92"
      },
      "last_editor": {
        "reputation": 3,
        "user_id": 22183369,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/54bd4188f3907a7f9bd87c2e2024c214?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "footiefan92",
        "link": "https://stackoverflow.com/users/22183369/footiefan92"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 40,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76631134,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1688760036,
      "creation_date": 1688629312,
      "last_edit_date": 1688713802,
      "question_id": 76626552,
      "share_link": "https://stackoverflow.com/q/76626552",
      "body_markdown": "The DB has items, and these items have a string parameter which is a comma separated string array. Im trying to pass in a search variable, and use that to return the item node, and the string array but with only the strings that match the search variable\r\n\r\n```\r\nmatch (n:Node) return n.string\r\n\r\n```\r\nreturns the strings sorted by the item node as [&quot;abc,def,abcde&quot;]\r\n\r\n\r\n```\r\nmatch (n:Node)  where any(string in n.string where string contains &quot;abc&quot;) return n\r\n```\r\nThis gets me the nodes where one of the strings contains what I&#39;m looking for, but I can&#39;t seem to find a way to get the ones which matched and return them as a field\r\n\r\n\r\n\r\nSo if a node has a string of [&quot;abc&quot;,&quot;def&quot;,&quot;abcde&quot;] then when I search for strings containing &quot;bc&quot; then it should get the node and return just the strings of [&quot;abc&quot;,&quot;abcde&quot;]\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76626552/trying-to-filter-an-array-of-strings-to-return-a-single-field-which-is-a-subset",
      "title": "Trying to filter an array of strings to return a single field which is a subset of the array with strings that contain a variable"
    },
    {
      "tags": ["cypher", "amazon-neptune", "opencypher"],
      "comments": [
        {
          "owner": {
            "reputation": 15279,
            "user_id": 5442034,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/10154838662437837/picture?type=large",
            "display_name": "Kelvin Lawrence",
            "link": "https://stackoverflow.com/users/5442034/kelvin-lawrence"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688594990,
          "post_id": 76624234,
          "comment_id": 135096346,
          "link": "https://stackoverflow.com/questions/76624234/query-timeout-in-neptune-opencypher-different-results-for-similar-queries#comment135096346_76624234"
        },
        {
          "owner": {
            "reputation": 15279,
            "user_id": 5442034,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/10154838662437837/picture?type=large",
            "display_name": "Kelvin Lawrence",
            "link": "https://stackoverflow.com/users/5442034/kelvin-lawrence"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688598915,
          "post_id": 76624234,
          "comment_id": 135096700,
          "link": "https://stackoverflow.com/questions/76624234/query-timeout-in-neptune-opencypher-different-results-for-similar-queries#comment135096700_76624234"
        },
        {
          "owner": {
            "reputation": 21,
            "user_id": 22181634,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/030b2eb2f57f7a1b793a081590cf23b9?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "topgun007",
            "link": "https://stackoverflow.com/users/22181634/topgun007"
          },
          "reply_to_user": {
            "reputation": 15279,
            "user_id": 5442034,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/10154838662437837/picture?type=large",
            "display_name": "Kelvin Lawrence",
            "link": "https://stackoverflow.com/users/5442034/kelvin-lawrence"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688599297,
          "post_id": 76624234,
          "comment_id": 135096739,
          "link": "https://stackoverflow.com/questions/76624234/query-timeout-in-neptune-opencypher-different-results-for-similar-queries#comment135096739_76624234"
        },
        {
          "owner": {
            "reputation": 15279,
            "user_id": 5442034,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/10154838662437837/picture?type=large",
            "display_name": "Kelvin Lawrence",
            "link": "https://stackoverflow.com/users/5442034/kelvin-lawrence"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688668372,
          "post_id": 76624234,
          "comment_id": 135108325,
          "link": "https://stackoverflow.com/questions/76624234/query-timeout-in-neptune-opencypher-different-results-for-similar-queries#comment135108325_76624234"
        }
      ],
      "owner": {
        "reputation": 21,
        "user_id": 22181634,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/030b2eb2f57f7a1b793a081590cf23b9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "topgun007",
        "link": "https://stackoverflow.com/users/22181634/topgun007"
      },
      "last_editor": {
        "reputation": 21,
        "user_id": 22181634,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/030b2eb2f57f7a1b793a081590cf23b9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "topgun007",
        "link": "https://stackoverflow.com/users/22181634/topgun007"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 87,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "answer_count": 0,
      "score": 2,
      "last_activity_date": 1688594713,
      "creation_date": 1688593634,
      "last_edit_date": 1688594713,
      "question_id": 76624234,
      "share_link": "https://stackoverflow.com/q/76624234",
      "body_markdown": "I apologize for the naive question as I am relatively new to graph databases and currently working with Neptune OpenCypher for my use case. I am experiencing different outcomes for two similar queries and would like to understand the reasons behind it.\r\n\r\nMy dataset consists of hundreds of millions of nodes. Here are the details of the queries:\r\n\r\nQuery 1: Timeout Error\r\n\r\n```\r\nMATCH p=(n:Person)-[:RELATIONSHIP*..5]-&gt;(m:Person {condition: True})\r\nWHERE \r\nID(n) = &lt;id_Value&gt;\r\nAND size([node IN nodes(p) WHERE node.event_date &gt; n.event_date]) = 0\r\nRETURN p\r\nLIMIT 1\r\n```\r\n\r\nQuery 2: Successful Response\r\n\r\n```\r\nMATCH p=(n:Person)-[:RELATIONSHIP*..5]-&gt;(m:Person {condition: True})\r\nWHERE \r\nID(n) = &lt;id_Value&gt;\r\nAND size([node IN nodes(p) WHERE node.event_date &gt; n.event_date]) = 0\r\nWITH p\r\nORDER BY n.event_date ASC\r\nLIMIT 1\r\nRETURN p\r\n```\r\n\r\nI&#39;m curious about the reasons behind the timeout error in Query 1 and the successful response in Query 2. Both queries have a similar structure, but Query 1 times out while Query 2 executes successfully. Can someone explain why this might be happening?\r\n\r\nI ran both queries mentioned earlier, and Query 1 resulted in a timeout while Query 2 executed successfully. However, I&#39;m encountering unexpected results with Query 2, and I want to ensure that I&#39;m not misunderstanding or misusing it.",
      "link": "https://stackoverflow.com/questions/76624234/query-timeout-in-neptune-opencypher-different-results-for-similar-queries",
      "title": "Query Timeout in Neptune OpenCypher - Different Results for Similar Queries"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "last_editor": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688559120,
          "last_edit_date": 1688559120,
          "creation_date": 1688558166,
          "answer_id": 76620071,
          "question_id": 76618102,
          "share_link": "https://stackoverflow.com/a/76620071",
          "body_markdown": "One option is to use APOC free plugin, which is much faster. For example [`apoc.path.subgraphNodes`](https://neo4j.com/labs/apoc/4.1/graph-querying/expand-subgraph-nodes/):\r\n```\r\nMATCH (p:Pathway)\r\nCALL apoc.path.subgraphNodes(p, {\r\n\tlabelFilter: &quot;&gt;Disease&quot;,\r\n    minLevel: 1,\r\n    maxLevel: 6\r\n})\r\nYIELD node\r\nRETURN DISTINCT node.name;\r\n```\r\nTo find all `Disease` which are connected to a `Pathway` node in up to 6 moves. Note that this query will consider any `p:Pathway` and not a specific node `p`. You can change the `MATCH` to find a specific origin. You can also define specific labels, relationships and directions to make it more efficient. ",
          "link": "https://stackoverflow.com/questions/76618102/is-there-an-efficient-way-of-traversing-a-graph-to-find-connections-between-two/76620071#76620071",
          "title": "Is there an efficient way of traversing a graph to find connections between two nodes through all combinations of relatiosnhips and nodes?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688586846,
          "last_edit_date": 1688586846,
          "creation_date": 1688577316,
          "answer_id": 76622626,
          "question_id": 76618102,
          "share_link": "https://stackoverflow.com/a/76622626",
          "body_markdown": "To avoid performance issues, you could have specified the _directionality_ of the relationship:\r\n\r\n    MATCH (p:Pathway)-[*]-&gt;(d:Disease)\r\n    RETURN DISTINCT d.Name\r\n    LIMIT 3\r\n\r\nYour data model has only a single relationship type (`IS_INVOLVED`) between the `Pathway` and `Disease` nodes, and that relationship is directed from `Pathway` to `Disease`. If your `MATCH` clause does not specify the directionality, then your unlimited variable-length query would follow other relationship types from `Pathway` (in the reverse direction) and keep going (in any direction) -- so you could be searching a large portion of the entire graph over and over again in the worst case.\r\n\r\nAnd, since your data model has no outgoing relationships from the `Disease` node, it really makes no sense for the directional query to also be a variable-length query as well -- since all matching paths would be of length 1.\r\n\r\nSo, you might as well just stay with your first query.",
          "link": "https://stackoverflow.com/questions/76618102/is-there-an-efficient-way-of-traversing-a-graph-to-find-connections-between-two/76622626#76622626",
          "title": "Is there an efficient way of traversing a graph to find connections between two nodes through all combinations of relatiosnhips and nodes?"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22174712,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTteLYOLX3EmbsaoxaZHprRj8PBowevG06oE5tZpcGMjZ=k-s256",
        "display_name": "Guillermo Guells",
        "link": "https://stackoverflow.com/users/22174712/guillermo-guells"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1690748931,
      "creation_date": 1688542838,
      "last_edit_date": 1690748931,
      "question_id": 76618102,
      "share_link": "https://stackoverflow.com/q/76618102",
      "body_markdown": "I have the datascheme shown in the picture. I want, for instance, to retrieve all &quot;Diseases&quot; connected to &quot;Pathway&quot; through different combinations of edges and nodes in between. If I write:\r\n\r\nMATCH (p:Pathway)-\\[:IS_INVOLVED\\]-(d:Disease) RETURN DISTINCT d.Name LIMIT 3\r\n\r\nThe query is executed very fast. If I write:\r\n\r\nMATCH (p:Pathway)-\\[\\*\\]-(d:Disease) RETURN DISTINCT d.Name LIMIT 3\r\n\r\nIt takes forever to finish. My suspicion is that it traverses to the Compound node at the beginning and checks if there is a connection to the node Disease. Since there is a fairly large number of Compound nodes, the execution time is extremely large. Is there a way to hint the engine to take a specific approach when traversing? Maybe influencing the query execution plan in some way?\r\n\r\nMy dataset is expected to increase so it\r\n\r\n[Data Scheme](https://i.stack.imgur.com/pGfO1.png)\r\n\r\nThe only way of retrieving some results without an excessive wait time is by limiting the edge depth constraint to 1 or 2 (i.e. -[*..2]-). I am hoping to be able to retrieve results connected by a maximum of 6-edge paths (i.e. -[*..6]- or -[*]-).",
      "link": "https://stackoverflow.com/questions/76618102/is-there-an-efficient-way-of-traversing-a-graph-to-find-connections-between-two",
      "title": "Is there an efficient way of traversing a graph to find connections between two nodes through all combinations of relatiosnhips and nodes?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "last_editor": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1689155475,
          "last_edit_date": 1689155475,
          "creation_date": 1688562125,
          "answer_id": 76620613,
          "question_id": 76617954,
          "share_link": "https://stackoverflow.com/a/76620613",
          "body_markdown": "in these cases I often do\r\n\r\n    MATCH (s:Something)\r\n    WITH s,\r\n         [(s)-[:HAS_TAG]-&gt;(t:Tag) | t] AS ts,\r\n         [(s)-[:HAS_ITEM]-&gt;(i:Item) | i] AS is,\r\n         [(s)-[:HAS_TAG]-&gt;(w:Whatever) | w] AS ws\r\n\r\nwhich returns arrays, instead of null in case the OPTIONAL MATCH does not return anything. and often it&#39;s faster too.",
          "link": "https://stackoverflow.com/questions/76617954/how-do-i-do-multiple-optional-match-in-parallel-in-cypher/76620613#76620613",
          "title": "How do I do multiple OPTIONAL MATCH in parallel in Cypher?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688578262,
          "creation_date": 1688578262,
          "answer_id": 76622736,
          "question_id": 76617954,
          "share_link": "https://stackoverflow.com/a/76622736",
          "body_markdown": "You can use a single `OPTIONAL MATCH` and use aggregation to produce a node list for each relationship type:\r\n\r\n    MATCH (s:Something)\r\n    OPTIONAL MATCH (n)&lt;-[r:HAS_TAG|HAS_ITEM|HAS_WHATEVER]-(s)\r\n    RETURN s, TYPE(r) AS t, COLLECT(n) AS nodes",
          "link": "https://stackoverflow.com/questions/76617954/how-do-i-do-multiple-optional-match-in-parallel-in-cypher/76622736#76622736",
          "title": "How do I do multiple OPTIONAL MATCH in parallel in Cypher?"
        }
      ],
      "owner": {
        "reputation": 85427,
        "user_id": 292291,
        "user_type": "registered",
        "accept_rate": 86,
        "profile_image": "https://www.gravatar.com/avatar/e31d9d39e9fb0ec4cc5573a5e5b01ce7?s=256&d=identicon&r=PG",
        "display_name": "Jiew Meng",
        "link": "https://stackoverflow.com/users/292291/jiew-meng"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 42,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76620613,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1689155475,
      "creation_date": 1688541774,
      "question_id": 76617954,
      "share_link": "https://stackoverflow.com/q/76617954",
      "body_markdown": "I am currently doing something like:\r\n\r\n```\r\nMATCH (s:Something)\r\nOPTIONAL MATCH (t:Tag)&lt;-[:HAS_TAG]-(s)\r\nOPTIONAL MATCH (i:Item)&lt;-[:HAS_ITEM]-(s)\r\nOPTIONAL MATCH (w:Whatever)&lt;-[:HAS_WHATEVER]-(s)\r\n```\r\n\r\nWhen I do a profile, I see that 3 optional expand for each OPTIONAL MATCH sequentially, wonder if I can speed it up by possibly doing it in parallel? Since its independent of each other? ",
      "link": "https://stackoverflow.com/questions/76617954/how-do-i-do-multiple-optional-match-in-parallel-in-cypher",
      "title": "How do I do multiple OPTIONAL MATCH in parallel in Cypher?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688578506,
          "creation_date": 1688578506,
          "answer_id": 76622759,
          "question_id": 76617679,
          "share_link": "https://stackoverflow.com/a/76622759",
          "body_markdown": "The outside query also needs the RETURN clause.\r\n\r\n\r\n    MATCH (s:Something)\r\n    CALL {\r\n      WITH s\r\n      MATCH (s)-[:SOMETHING]-&gt;(o:Other)\r\n      RETURN o\r\n    }\r\n    RETURN o   // add this line\r\n    SKIP 1000\r\n    LIMIT 50",
          "link": "https://stackoverflow.com/questions/76617679/how-to-limit-then-do-subquery/76622759#76622759",
          "title": "How to limit then do subquery?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688578838,
          "creation_date": 1688578838,
          "answer_id": 76622804,
          "question_id": 76617679,
          "share_link": "https://stackoverflow.com/a/76622804",
          "body_markdown": "This will only use the 50 `Something` nodes after the first 1000, and only execute the `CALL` subquery 50 times:\r\n\r\n    MATCH (s:Something)\r\n    WITH s\r\n    SKIP 1000\r\n    LIMIT 50\r\n    CALL {\r\n      WITH s\r\n      MATCH (s)-[:SOMETHING]-&gt;(o:Other)\r\n      RETURN o\r\n    }\r\n    RETURN s, o\r\n",
          "link": "https://stackoverflow.com/questions/76617679/how-to-limit-then-do-subquery/76622804#76622804",
          "title": "How to limit then do subquery?"
        }
      ],
      "owner": {
        "reputation": 85427,
        "user_id": 292291,
        "user_type": "registered",
        "accept_rate": 86,
        "profile_image": "https://www.gravatar.com/avatar/e31d9d39e9fb0ec4cc5573a5e5b01ce7?s=256&d=identicon&r=PG",
        "display_name": "Jiew Meng",
        "link": "https://stackoverflow.com/users/292291/jiew-meng"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 23,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1688578838,
      "creation_date": 1688539366,
      "question_id": 76617679,
      "share_link": "https://stackoverflow.com/q/76617679",
      "body_markdown": "A typical pattern I find myself looking for is I want to find results do some pagination (skip/limit) then do some additional &quot;joins&quot; to populate related fields. Currently, something like\r\n\r\n    MATCH (s:Something)\r\n    CALL {\r\n      WITH s\r\n      MATCH (s)-[:SOMETHING]-&gt;(o:Other)\r\n      RETURN o\r\n    }\r\n    SKIP 1000\r\n    LIMIT 50\r\n\r\nSeem to cause the subquery to run for 1000 (the skipped `s` nodes) + 50 (limit). I think ideally I only need to run the subquery for the 50 nodes I really want, I tried putting the skip earlier but cannot seem to get the syntax correct. How do I do it? ",
      "link": "https://stackoverflow.com/questions/76617679/how-to-limit-then-do-subquery",
      "title": "How to limit then do subquery?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 31,
                "user_id": 20505088,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "kamalika ray",
                "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688479358,
              "post_id": 76613353,
              "comment_id": 135077829,
              "link": "https://stackoverflow.com/questions/76612533/extract-a-subgraph-starting-from-one-node/76613353#comment135077829_76613353"
            },
            {
              "owner": {
                "reputation": 881,
                "user_id": 12205676,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
                "display_name": "Nathan Smith",
                "link": "https://stackoverflow.com/users/12205676/nathan-smith"
              },
              "reply_to_user": {
                "reputation": 31,
                "user_id": 20505088,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "kamalika ray",
                "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688486516,
              "post_id": 76613353,
              "comment_id": 135079354,
              "link": "https://stackoverflow.com/questions/76612533/extract-a-subgraph-starting-from-one-node/76613353#comment135079354_76613353"
            },
            {
              "owner": {
                "reputation": 31,
                "user_id": 20505088,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "kamalika ray",
                "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688487627,
              "post_id": 76613353,
              "comment_id": 135079555,
              "link": "https://stackoverflow.com/questions/76612533/extract-a-subgraph-starting-from-one-node/76613353#comment135079555_76613353"
            },
            {
              "owner": {
                "reputation": 881,
                "user_id": 12205676,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
                "display_name": "Nathan Smith",
                "link": "https://stackoverflow.com/users/12205676/nathan-smith"
              },
              "reply_to_user": {
                "reputation": 31,
                "user_id": 20505088,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "kamalika ray",
                "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688497109,
              "post_id": 76613353,
              "comment_id": 135080947,
              "link": "https://stackoverflow.com/questions/76612533/extract-a-subgraph-starting-from-one-node/76613353#comment135080947_76613353"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 881,
            "user_id": 12205676,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
            "display_name": "Nathan Smith",
            "link": "https://stackoverflow.com/users/12205676/nathan-smith"
          },
          "last_editor": {
            "reputation": 881,
            "user_id": 12205676,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
            "display_name": "Nathan Smith",
            "link": "https://stackoverflow.com/users/12205676/nathan-smith"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688486477,
          "last_edit_date": 1688486477,
          "creation_date": 1688478767,
          "answer_id": 76613353,
          "question_id": 76612533,
          "share_link": "https://stackoverflow.com/a/76613353",
          "body_markdown": "If you are working with Neo4j 5, this should work.\r\n\r\n    MATCH path = (p:P {name:&quot;P1&quot;})-[ch:child*]-&gt;(p2)\r\n    OPTIONAL MATCH (p2)&lt;-[k:knows]-(d)\r\n    WHERE k.effectiveDate &lt; date(&quot;2023-05-01&quot;) // put your  knows relationship filter here\r\n    OPTIONAL MATCH (d)-[r:follows|has|likes]-(n) // include other relationship types as needed\r\n    WHERE r.strength &gt; 0.5 // put your other relationship filter here\r\n    RETURN path\r\n\r\nYour queries would be simpler if the relationships starting at P1 were all oriented in the same direction.",
          "link": "https://stackoverflow.com/questions/76612533/extract-a-subgraph-starting-from-one-node/76613353#76613353",
          "title": "Extract a subgraph starting from one node"
        }
      ],
      "owner": {
        "reputation": 31,
        "user_id": 20505088,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "kamalika ray",
        "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1690748959,
      "creation_date": 1688473066,
      "last_edit_date": 1690748959,
      "question_id": 76612533,
      "share_link": "https://stackoverflow.com/q/76612533",
      "body_markdown": "I have a large knowledge graph (below is a small part of it):\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Rggkl.png\r\n\r\nThe P nodes are in a hierarchy and other nodes and relationships are connected to them, I want to retrieve the D nodes and the edges and nodes attached to them like C and X nodes shown in the sample image below.\r\nI want to write a query where I provide the id for node P1 and subsequently retrieve all the connections and extract a subgraph. There are multiple other connections to the D nodes. I want to retrieve all of it and also filter the connections based on edge properties. How can I do this using a cypher query in Neo4j?",
      "link": "https://stackoverflow.com/questions/76612533/extract-a-subgraph-starting-from-one-node",
      "title": "Extract a subgraph starting from one node"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688420739,
          "post_id": 76603290,
          "comment_id": 135069414,
          "link": "https://stackoverflow.com/questions/76603290/retrieve-hierarchy-based-on-node-property-with-cypher#comment135069414_76603290"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 881,
            "user_id": 12205676,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
            "display_name": "Nathan Smith",
            "link": "https://stackoverflow.com/users/12205676/nathan-smith"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1688387585,
          "creation_date": 1688387585,
          "answer_id": 76604792,
          "question_id": 76603290,
          "share_link": "https://stackoverflow.com/a/76604792",
          "body_markdown": "To take advantage of the power of a graph database, your graph should have relationships. Create them with this query.\r\n\r\n    MATCH (n)\r\n    UNWIND n.child AS child\r\n    MATCH (ch {name:child})\r\n    CREATE (n)-[:HAS_CHILD]-&gt;(ch)\r\n\r\nThen you can return the full hierarchy with this query.\r\n\r\n    MATCH path = (n {name:&quot;P1&quot;})-[:HAS_CHILD*]-&gt;(ch)\r\n    RETURN [p in nodes(path) | p.name] AS pathToChild\r\n\r\n",
          "link": "https://stackoverflow.com/questions/76603290/retrieve-hierarchy-based-on-node-property-with-cypher/76604792#76604792",
          "title": "Retrieve hierarchy based on node property with Cypher"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688450518,
          "creation_date": 1688450518,
          "answer_id": 76609756,
          "question_id": 76603290,
          "share_link": "https://stackoverflow.com/a/76609756",
          "body_markdown": "You might consider using ORDPATH for sorting in hierarchical order. There is a Neo4j user defined function for this described at \r\n[https://www.wai.md/post/ordpath-computing-genealogy-descendancy-trees][1]\r\n\r\nDuring graph traversals you can collect numeric values and then call the function to get the concatenated bitstring which sorts hierarchically. \r\n\r\n\r\n  [1]: https://www.wai.md/post/ordpath-computing-genealogy-descendancy-trees",
          "link": "https://stackoverflow.com/questions/76603290/retrieve-hierarchy-based-on-node-property-with-cypher/76609756#76609756",
          "title": "Retrieve hierarchy based on node property with Cypher"
        }
      ],
      "owner": {
        "reputation": 31,
        "user_id": 20505088,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "kamalika ray",
        "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 37,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76604792,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1690748989,
      "creation_date": 1688374717,
      "last_edit_date": 1690748989,
      "question_id": 76603290,
      "share_link": "https://stackoverflow.com/q/76603290",
      "body_markdown": "I have nodes in my graph where they are in a hierarchy. The hierarchy is saved as a node property instead of edges. There are no connecting edges between these nodes in the graph.\r\n\r\neg:\r\n```\r\nP1 -CHILD-&gt; P2, P3 -CHILD-&gt; P4\r\nP1 has Node property: Child - [P2,P3,P4]\r\nP2 has Node property: Child - [P4]\r\nP3 has Node property: Child - [P4]\r\nP4 has Node property: Child - None\r\n```\r\nIs it possible to retrieve all the hierarchy starting from P1 in a cypher query?",
      "link": "https://stackoverflow.com/questions/76603290/retrieve-hierarchy-based-on-node-property-with-cypher",
      "title": "Retrieve hierarchy based on node property with Cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689208639,
              "post_id": 76601616,
              "comment_id": 135182266,
              "link": "https://stackoverflow.com/questions/76601502/getting-weights-as-percentages-from-edges/76601616#comment135182266_76601616"
            },
            {
              "owner": {
                "reputation": 881,
                "user_id": 12205676,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
                "display_name": "Nathan Smith",
                "link": "https://stackoverflow.com/users/12205676/nathan-smith"
              },
              "reply_to_user": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689303682,
              "post_id": 76601616,
              "comment_id": 135197560,
              "link": "https://stackoverflow.com/questions/76601502/getting-weights-as-percentages-from-edges/76601616#comment135197560_76601616"
            },
            {
              "owner": {
                "reputation": 1280,
                "user_id": 4958156,
                "user_type": "registered",
                "accept_rate": 80,
                "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Programmer",
                "link": "https://stackoverflow.com/users/4958156/programmer"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1689757725,
              "post_id": 76601616,
              "comment_id": 135257135,
              "link": "https://stackoverflow.com/questions/76601502/getting-weights-as-percentages-from-edges/76601616#comment135257135_76601616"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 881,
            "user_id": 12205676,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
            "display_name": "Nathan Smith",
            "link": "https://stackoverflow.com/users/12205676/nathan-smith"
          },
          "last_editor": {
            "reputation": 881,
            "user_id": 12205676,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/nePIV.jpg?s=256&g=1",
            "display_name": "Nathan Smith",
            "link": "https://stackoverflow.com/users/12205676/nathan-smith"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1689330143,
          "last_edit_date": 1689330143,
          "creation_date": 1688353154,
          "answer_id": 76601616,
          "question_id": 76601502,
          "share_link": "https://stackoverflow.com/a/76601616",
          "body_markdown": "    MATCH (c:Company {name:&quot;ABC&quot;})&lt;-[r:Shareholder]-(s)\r\n    WHERE r.shareholding_start_date &lt;= Date(&quot;2022-03-15&quot;) \r\n       AND r.shareholding_end_date &gt;= DATE(&quot;2022-03-15&quot;)\r\n    WITH c, \r\n    collect(s) as shareholders, \r\n    collect(r) as rels, \r\n    sum(r.number_of_shares) AS totalShares\r\n    UNWIND range(0, size(rels) - 1) AS i\r\n    RETURN shareholders[i].name AS shareholder, \r\n    100.0 * rels[i].numberOfShares/totalShares as percentTotalShares\r\n\r\nFor more examples of percent of total in Neo4j, see this blog post. https://medium.com/neo4j/kickstart-your-transition-from-sql-analytic-and-window-functions-to-neo4j-987d67f7fdb4\r\n\r\nTo show shareholders of shareholders to an arbitrary distance from your target company as requested in the comment, you might use this approach.\r\n\r\n```\r\nMATCH p=(c:Company {name:&quot;ABC&quot;})&lt;-[r:Shareholder*1..3]-(holder)\r\nWHERE all(holding IN relationships(p) WHERE holding.shareholding_start_date &lt;= Date(&#39;2022-03-15&#39;) &lt;= holding.shareholding_end_date) \r\nWITH \r\n   length(p) - 1 AS distanceToTargetCompany, \r\n   nodes(p)[-2].name AS companyName,\r\n   holder, \r\n   relationships(p)[-1].number_of_shares AS number_of_shares\r\nWITH \r\n   distanceToTargetCompany,\r\n   companyName,\r\n   collect(DISTINCT {shareHolder: holder.name, numberOfShares: number_of_shares}) as shareHolders\r\nWITH \r\n   distanceToTargetCompany, \r\n   companyName, \r\n   shareHolders,\r\n   reduce(acc=0, company in shareHolders | acc + company[&#39;numberOfShares&#39;]) AS totalShares\r\nRETURN \r\n   distanceToTargetCompany, \r\n   companyName, \r\n   reduce(acc=[], company in shareHolders | acc + company{.*, percentTotal:100.0 * company[&#39;numberOfShares&#39;]/totalShares}) AS shareHolders\r\nORDER BY distanceToTargetCompany, companyName\r\n```",
          "link": "https://stackoverflow.com/questions/76601502/getting-weights-as-percentages-from-edges/76601616#76601616",
          "title": "Getting weights as percentages from edges"
        }
      ],
      "owner": {
        "reputation": 1280,
        "user_id": 4958156,
        "user_type": "registered",
        "accept_rate": 80,
        "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Programmer",
        "link": "https://stackoverflow.com/users/4958156/programmer"
      },
      "last_editor": {
        "reputation": 1280,
        "user_id": 4958156,
        "user_type": "registered",
        "accept_rate": 80,
        "profile_image": "https://www.gravatar.com/avatar/ac71a714d9f440538bb14ce6fc72b1ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Programmer",
        "link": "https://stackoverflow.com/users/4958156/programmer"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 67,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76601616,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1689330143,
      "creation_date": 1688350539,
      "last_edit_date": 1688353167,
      "question_id": 76601502,
      "share_link": "https://stackoverflow.com/q/76601502",
      "body_markdown": "I have two node types &quot;Person&quot; and &quot;Company&quot;. There is also a relationship called &quot;Shareholder&quot;, which can be from Person to Company or Company to Company (as companies can also hold shares in other companies). The Shareholder relationship has three properties &quot;shareholding_start_date&quot;, &quot;shareholding_end_date&quot;, &quot;number_of_shares&quot;. \r\n\r\nI want to be able to query a Company (call it **c**) by name, as well as provide a date (e.g. &#39;2021-07-23&#39;), and the query should return all Person/Company nodes that are shareholders of **c** at the date &#39;2021-07-23&#39; (i.e. shareholding_start_date &lt; 2021-07-23 &lt; shareholding_end_date). I also want to calculate the percentage based on &#39;number_of_shares&#39;.\r\n\r\nAs an example, let&#39;s say there is a company called XYZ, and I want to know all it&#39;s shareholders on 2022-03-15. Suppose ABC has three shareholders ABC, DEF, GHI on this day (these can be either Person or Company nodes). ABC holds 30 shares, DEF holds 50 shares, GHI holds 120 shares.\r\n\r\nThe query should be something like this (obviously this is not cypher, but I&#39;m unable to express it in any other way!): \r\n\r\n    Company.name = &quot;XYZ&quot;\r\n    and Shareholder.shareholding_start_date &lt;= 2022-03-15\r\n    and SHareholder.shareholding_end_date &gt;= 2022-03-15\r\n\r\n Returns something like:\r\n\r\n    ABC 15%, DEF 25%, GHI 60%",
      "link": "https://stackoverflow.com/questions/76601502/getting-weights-as-percentages-from-edges",
      "title": "Getting weights as percentages from edges"
    },
    {
      "tags": ["neo4j", "cypher", "snomed-ct"],
      "comments": [
        {
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1688391556,
          "post_id": 76599592,
          "comment_id": 135064149,
          "link": "https://stackoverflow.com/questions/76599592/snomed-ct-cypher-query#comment135064149_76599592"
        }
      ],
      "owner": {
        "reputation": 173,
        "user_id": 4865707,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-ZYhhTPuDuRU/AAAAAAAAAAI/AAAAAAAAAJQ/nZbElKq6Kzg/photo.jpg?sz=256",
        "display_name": "saarthak gupta",
        "link": "https://stackoverflow.com/users/4865707/saarthak-gupta"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 95,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "closed_date": 1690788614,
      "answer_count": 0,
      "score": 2,
      "last_activity_date": 1690749013,
      "creation_date": 1688311533,
      "last_edit_date": 1690749013,
      "question_id": 76599592,
      "share_link": "https://stackoverflow.com/q/76599592",
      "body_markdown": "I am looking to figure out how to build a qualitative dataset based on cause effect relationships. \r\n\r\nFor the causes, i want to consider Findings and Symptoms and for the effects i want to consider diseases and disorders. \r\n\r\nI have imported the SNOMED CT data into Neo4J DB using the scripts provided by SNOMED International (https://github.com/IHTSDO) (https://github.com/IHTSDO/snomed-database-loader/tree/master/NEO4J). \r\n\r\nThe Ontology has been downloaded from the official NLM website(https://www.nlm.nih.gov/healthit/snomedct/us_edition.html). \r\n\r\nWhat would the cypher queries look for this?\r\n\r\nOther details - \r\n\r\n1. SNOMED CT US Data version = 20230301\r\n2. Neo4J desktop on Mac OS X running db version `4.4.22`\r\n",
      "link": "https://stackoverflow.com/questions/76599592/snomed-ct-cypher-query",
      "closed_reason": "Needs details or clarity",
      "title": "SNOMED CT Cypher Query"
    },
    {
      "tags": ["reactjs", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 493,
            "user_id": 2259302,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
            "display_name": "H&#229;kan L&#246;fqvist",
            "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
          },
          "edited": false,
          "score": 3,
          "creation_date": 1688109770,
          "post_id": 76586497,
          "comment_id": 135032472,
          "link": "https://stackoverflow.com/questions/76586497/validate-cypher-query-in-frontend#comment135032472_76586497"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 216,
                "user_id": 14059508,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-iNWP4rE4quY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmnS2o6VDXdneqr5Dhlt_nu2_K-bA/photo.jpg?sz=256",
                "display_name": "rohit bumrah",
                "link": "https://stackoverflow.com/users/14059508/rohit-bumrah"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688109741,
              "post_id": 76586653,
              "comment_id": 135032470,
              "link": "https://stackoverflow.com/questions/76586497/validate-cypher-query-in-frontend/76586653#comment135032470_76586653"
            },
            {
              "owner": {
                "user_type": "does_not_exist",
                "display_name": "user4417327"
              },
              "reply_to_user": {
                "reputation": 216,
                "user_id": 14059508,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-iNWP4rE4quY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmnS2o6VDXdneqr5Dhlt_nu2_K-bA/photo.jpg?sz=256",
                "display_name": "rohit bumrah",
                "link": "https://stackoverflow.com/users/14059508/rohit-bumrah"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688112855,
              "post_id": 76586653,
              "comment_id": 135032995,
              "link": "https://stackoverflow.com/questions/76586497/validate-cypher-query-in-frontend/76586653#comment135032995_76586653"
            }
          ],
          "tags": [],
          "owner": {
            "user_type": "does_not_exist",
            "display_name": "user4417327"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1688107896,
          "creation_date": 1688107896,
          "answer_id": 76586653,
          "question_id": 76586497,
          "share_link": "https://stackoverflow.com/a/76586653",
          "body_markdown": "At least for OpenCypher the syntax is specified and published: https://opencypher.org/resources/\r\nYou could use these specifications and general syntax checker tools and verify it on the frontend yourself.\r\nThough you should know that Neo4j&#39;s current Cypher is an extension of OpenCypher, and other implementations of OpenCypher like Memgraph&#39;s aren&#39;t 100% compatible. So while this check allows general compliance with OpenCypher, it can&#39;t handle non-standardized features and extensions.",
          "link": "https://stackoverflow.com/questions/76586497/validate-cypher-query-in-frontend/76586653#76586653",
          "title": "Validate cypher query in Frontend"
        }
      ],
      "owner": {
        "reputation": 216,
        "user_id": 14059508,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-iNWP4rE4quY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmnS2o6VDXdneqr5Dhlt_nu2_K-bA/photo.jpg?sz=256",
        "display_name": "rohit bumrah",
        "link": "https://stackoverflow.com/users/14059508/rohit-bumrah"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 126,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 0,
      "closed_date": 1690986336,
      "answer_count": 1,
      "score": -1,
      "last_activity_date": 1688107896,
      "creation_date": 1688105920,
      "question_id": 76586497,
      "share_link": "https://stackoverflow.com/q/76586497",
      "body_markdown": "I am working on a simple app.\r\nI am using neo4j db and in the frontend I have given an option to the users to write a cypher query that would then be executed in neo4j and would give expected response\r\nI wanted to know if there is any library or any way apart from regex where I can check for the syntax in the frontend only without having to run it in the neo4j.",
      "link": "https://stackoverflow.com/questions/76586497/validate-cypher-query-in-frontend",
      "closed_reason": "Needs more focus",
      "title": "Validate cypher query in Frontend"
    },
    {
      "tags": ["javascript", "neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 493,
            "user_id": 2259302,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
            "display_name": "H&#229;kan L&#246;fqvist",
            "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688036785,
          "creation_date": 1688036785,
          "answer_id": 76580457,
          "question_id": 76580079,
          "share_link": "https://stackoverflow.com/a/76580457",
          "body_markdown": "For the query to be &quot;correct&quot; you need to escape variables and labels that contain special characters:\r\n\r\n    MATCH (`node::test`:`Node::test`) RETURN `node::test`\r\n\r\nDocumentation: https://neo4j.com/developer/cypher/style-guide/#_backticks\r\n\r\nI suggest you create a new issue in the popoto repo since this is most likely an easy fix there.",
          "link": "https://stackoverflow.com/questions/76580079/popoto-js-customize-node-label/76580457#76580457",
          "title": "popoto.js - customize node label"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688084873,
          "creation_date": 1688084873,
          "answer_id": 76585307,
          "question_id": 76580079,
          "share_link": "https://stackoverflow.com/a/76585307",
          "body_markdown": "[Here is a link to the popoto function](https://github.com/Nhogs/popoto/blob/f20f0e1555ce9f9ac48acc5e9f64bb1b54a6601c/src/graph/node/node.js#L70) that generates a node identifier based on the node label, which I copy here:\r\n\r\n    /**\r\n     * Create a normalized identifier from a node label.\r\n     * Multiple calls with the same node label will generate different unique identifier.\r\n     *\r\n     * @param nodeLabel\r\n     * @returns {string}\r\n     */\r\n    node.generateInternalLabel = function (nodeLabel) {\r\n        var label = nodeLabel ? nodeLabel.toLowerCase().replace(/ /g, &#39;&#39;) : &quot;n&quot;;\r\n    \r\n        if (label in node.internalLabels) {\r\n            node.internalLabels[label] = node.internalLabels[label] + 1;\r\n        } else {\r\n            node.internalLabels[label] = 0;\r\n            return label;\r\n        }\r\n    \r\n        return label + node.internalLabels[label];\r\n    };\r\n\r\n\r\nYou can change the function to not use the node label (in your own fork of the linked repo).\r\n\r\nFor example, to generate the identifiers `n`, `n1`, `n2`, etc., you can replace this line:\r\n\r\n    var label = nodeLabel ? nodeLabel.toLowerCase().replace(/ /g, &#39;&#39;) : &quot;n&quot;;\r\n\r\nwith this:\r\n\r\n    var label = &quot;n&quot;;\r\n",
          "link": "https://stackoverflow.com/questions/76580079/popoto-js-customize-node-label/76585307#76585307",
          "title": "popoto.js - customize node label"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 17405501,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhKKfk9XTqPbfE8MMe00TnNSXabC8f5zkoL0kLDFQ=k-s256",
        "display_name": "Dorgaa Said",
        "link": "https://stackoverflow.com/users/17405501/dorgaa-said"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 49,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1688084873,
      "creation_date": 1688033499,
      "last_edit_date": 1688068557,
      "question_id": 76580079,
      "share_link": "https://stackoverflow.com/q/76580079",
      "body_markdown": "I am currently working with Neo4j and using the Popoto.js library. However, I have come across an issue regarding the customization of node labels in the generated queries.\r\n\r\nTo provide some context, when Popoto.js generates a query for a node with a specific label, it includes the label as part of the node identifier, which can lead to queries that are not accepted by the Neo4j database. For example, the generated query looks like this:\r\n\r\n    MATCH (node::test:`Node::test`) RETURN node::test\r\n\r\nAs mentioned, this query format is not compatible with the Neo4j database. I am wondering if there is a solution or workaround to customize the query and achieve the desired result. Specifically, I would like to generate a query in the following format:\r\n\r\n    MATCH (n:`Node::test`) RETURN n\r\n\r\nPS: i can&#39;t remove the &#39;::&#39; from nodes \r\nThis modified query format would allow me to work with the Neo4j database seamlessly.\r\n\r\nI would greatly appreciate any guidance or insights you can provide regarding this issue. Thank you in advance for your assistance.\r\n\r\nI tried to update `popoto.start` function to generate a custom node label, but am still looking for a solution.",
      "link": "https://stackoverflow.com/questions/76580079/popoto-js-customize-node-label",
      "title": "popoto.js - customize node label"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687990488,
          "creation_date": 1687990488,
          "answer_id": 76577013,
          "question_id": 76576921,
          "share_link": "https://stackoverflow.com/a/76577013",
          "body_markdown": "You would need to collect and count s at the same time, then UNWIND the collection back into individual rows if you want to continue with each individual s node.\r\n\r\n```\r\nMATCH (c:Criterion {id: 24}) \r\nOPTIONAL MATCH (c)&lt;-[:HAS_VOTE_ON]-(d:Decision)-[:HAS_VOTE_ON]-&gt;(s:Skill) \r\nWHERE s.id &lt;&gt; c.id \r\nWITH c, collect(DISTINCT s) as skills, count(DISTINCT s) as count\r\nUNWIND skills as s\r\n...\r\n```",
          "link": "https://stackoverflow.com/questions/76576921/neo4j-cypher-group-by/76577013#76577013",
          "title": "Neo4j Cypher Group By"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687990979,
          "creation_date": 1687990979,
          "answer_id": 76577050,
          "question_id": 76576921,
          "share_link": "https://stackoverflow.com/a/76577050",
          "body_markdown": "If you just want to return each distinct `s` and its count:\r\n\r\n    MATCH (c:Criterion {id: 24})&lt;-[:HAS_VOTE_ON]-(:Decision)-[:HAS_VOTE_ON]-&gt;(s:Skill) \r\n    WHERE s.id &lt;&gt; c.id\r\n    RETURN s, COUNT(*) AS cnt",
          "link": "https://stackoverflow.com/questions/76576921/neo4j-cypher-group-by/76577050#76577050",
          "title": "Neo4j Cypher Group By"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "last_editor": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1687990979,
      "creation_date": 1687989028,
      "last_edit_date": 1687989726,
      "question_id": 76576921,
      "share_link": "https://stackoverflow.com/q/76576921",
      "body_markdown": "I have the following Cypher query:\r\n\r\n    MATCH (c:Criterion {id: 24}) \r\n    OPTIONAL MATCH (c)&lt;-[:HAS_VOTE_ON]-(d:Decision)-[:HAS_VOTE_ON]-&gt;(s:Skill) \r\n    WHERE s.id &lt;&gt; c.id WITH c, s\r\n\r\nHow to continue the query in order to return for `c`: `s` and `count of each distinct s` ?",
      "link": "https://stackoverflow.com/questions/76576921/neo4j-cypher-group-by",
      "title": "Neo4j Cypher Group By"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "last_editor": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687885654,
          "last_edit_date": 1687885654,
          "creation_date": 1687884456,
          "answer_id": 76567035,
          "question_id": 76564945,
          "share_link": "https://stackoverflow.com/a/76567035",
          "body_markdown": "Below query works for me:\r\n\r\n    MATCH (node1:Student {id: &#39;id1&#39;}),(node2:Student {id: &#39;ID1&#39;}) \r\n    CREATE (temp:Student) \r\n    SET temp  = properties(node1),\r\n        node1.name = node2.name, node1.city = node2.city,\r\n        node2.name = temp.name, node2.city = temp.city\r\n    DELETE temp\r\n    RETURN node1, node2 \r\n\r\nRef: https://neo4j.com/docs/cypher-manual/current/clauses/set/#set-copying-properties-between-nodes-and-relationships\r\n\r\nWithout specifying the node label Student, it is not working for me.  So I need to put the label node1:Student instead of just node1.",
          "link": "https://stackoverflow.com/questions/76564945/swapping-specific-properties-of-two-nodes-including-relationships-in-neo4j/76567035#76567035",
          "title": "Swapping specific properties of two nodes including relationships in Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687884523,
          "creation_date": 1687884523,
          "answer_id": 76567044,
          "question_id": 76564945,
          "share_link": "https://stackoverflow.com/a/76567044",
          "body_markdown": "This is the way I would write the query. You had the right structure, but there were a couple of syntax issues. The biggest one was that you need to use a SET clause when you create the Temp node. To answer your question whether we can avoid creating a temp node, I don&#39;t believe that&#39;s possible because you typically overwrite existing properties. And, if you don&#39;t overwrite them, you would have to retain/track the old properties to move over.\r\n\r\n```\r\nMATCH\r\n  (node1 {id: &#39;id1&#39;}),\r\n  (node2 {id: &#39;ID1&#39;})\r\nCREATE (Temp:Student {id: node1.id})\r\n SET Temp = properties(node1) \r\nWITH node1, node2, Temp\r\n SET node1 += {name: node2.name, city: node2.city},\r\n     node2 += {name: Temp.name, city: Temp.city}\r\nDELETE Temp \r\nRETURN node1, node2\r\n```\r\nLinks for syntax I used are here:\r\n* Copy properties: https://neo4j.com/docs/cypher-manual/current/clauses/set/#set-copying-properties-between-nodes-and-relationships\r\n* Mutate properties: https://neo4j.com/docs/cypher-manual/current/clauses/set/#set-setting-properties-using-map",
          "link": "https://stackoverflow.com/questions/76564945/swapping-specific-properties-of-two-nodes-including-relationships-in-neo4j/76567044#76567044",
          "title": "Swapping specific properties of two nodes including relationships in Neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 19639,
                "user_id": 2662355,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
                "display_name": "Christophe Willemsen",
                "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687896664,
              "post_id": 76567283,
              "comment_id": 135000748,
              "link": "https://stackoverflow.com/questions/76564945/swapping-specific-properties-of-two-nodes-including-relationships-in-neo4j/76567283#comment135000748_76567283"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1687888021,
          "last_edit_date": 1687888021,
          "creation_date": 1687886577,
          "answer_id": 76567283,
          "question_id": 76564945,
          "share_link": "https://stackoverflow.com/a/76567283",
          "body_markdown": "You should use the [WITH](https://neo4j.com/docs/cypher-manual/current/clauses/with/) clause to store temporary values. Assuming both nodes have the `Student` label, this query should work:\r\n\r\n    MATCH\r\n      (n1:Student {id: &#39;id1&#39;}),\r\n      (n2:Student {id: &#39;ID1&#39;})\r\n    WITH n1, n2, n1.name AS name1, n1.city AS city1\r\n    SET\r\n      n1.name = n2.name, n1.city = n2.city,\r\n      n2.name = name1, n2.city = city1\r\n    RETURN n1, n2",
          "link": "https://stackoverflow.com/questions/76564945/swapping-specific-properties-of-two-nodes-including-relationships-in-neo4j/76567283#76567283",
          "title": "Swapping specific properties of two nodes including relationships in Neo4j"
        }
      ],
      "owner": {
        "reputation": 1524,
        "user_id": 5238800,
        "user_type": "registered",
        "accept_rate": 61,
        "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=256&g=1",
        "display_name": "nik",
        "link": "https://stackoverflow.com/users/5238800/nik"
      },
      "last_editor": {
        "reputation": 1524,
        "user_id": 5238800,
        "user_type": "registered",
        "accept_rate": 61,
        "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=256&g=1",
        "display_name": "nik",
        "link": "https://stackoverflow.com/users/5238800/nik"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 63,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76567283,
      "answer_count": 3,
      "score": 1,
      "last_activity_date": 1687888021,
      "creation_date": 1687869390,
      "last_edit_date": 1687869866,
      "question_id": 76564945,
      "share_link": "https://stackoverflow.com/q/76564945",
      "body_markdown": "I&#39;m trying to swap multiple properties and all relationships between two nodes in Neo4j. \r\nFor example-\r\n\r\n    Node 1 -&gt; {id=&#39;id1&#39;,name:&#39;ABC&#39;,city=&#39;London&#39;} belongs to A\r\n    Node 2 -&gt; {id=&#39;ID1&#39;,name:&#39;PQR&#39;,city=&#39;Paris&#39;} belongs to B\r\n\r\nAfter Query Execution, the result should be-\r\n\r\n    Node 1 -&gt; {id=&#39;id1&#39;,name:&#39;PQR&#39;,city=&#39;Paris&#39;} will belong to B\r\n    Node 2 -&gt; {id=&#39;ID1&#39;,name:&#39;ABC&#39;,city=&#39;London&#39;} will belong to A\r\n\r\nNote: id is case-sensitive hence two nodes with similar text are present. We don&#39;t want to swap id property.\r\n\r\nTried doing it with `set properties(node)` and Temp node like-\r\n\r\n    MATCH\r\n      (node1 {id: &#39;id1&#39;}),\r\n      (node2 {id: &#39;ID1&#39;})\r\n    CREATE (Temp:Student{properties(node1)}) \r\n    AND SET node1.name = node2.name, node1.city = node2.city\r\n    AND SET node2.name = Temp.name, node2.city = Temp.city\r\n    AND DELETE Temp \r\n    RETURN node1,node2\r\n\r\nGetting following error\r\n\r\n    Invalid input &#39;(&#39;: expected &quot;}&quot; (line 4, column 33 (offset: 99))\r\n    &quot;CREATE (Temp:Student{properties(node1)})&quot;\r\n\r\nWanted to know if it&#39;s possible without creating a Temp node.\r\n\r\nThank you.",
      "link": "https://stackoverflow.com/questions/76564945/swapping-specific-properties-of-two-nodes-including-relationships-in-neo4j",
      "title": "Swapping specific properties of two nodes including relationships in Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687872631,
          "post_id": 76563944,
          "comment_id": 134995330,
          "link": "https://stackoverflow.com/questions/76563944/neo4j-cypher-filter-edges-between-two-nodes#comment134995330_76563944"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 493,
            "user_id": 2259302,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
            "display_name": "H&#229;kan L&#246;fqvist",
            "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1687865252,
          "creation_date": 1687865252,
          "answer_id": 76564394,
          "question_id": 76563944,
          "share_link": "https://stackoverflow.com/a/76564394",
          "body_markdown": "Your query is correct and this is an artefact of the visualisation. Go to the settings and un-check the option to connect result nodes (see https://neo4j.com/docs/browser-manual/current/operations/browser-settings/#adjust-in-browser)",
          "link": "https://stackoverflow.com/questions/76563944/neo4j-cypher-filter-edges-between-two-nodes/76564394#76564394",
          "title": "Neo4j/Cypher: Filter edges between two nodes"
        }
      ],
      "owner": {
        "reputation": 31,
        "user_id": 20505088,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fc3aba5c1bf02773a7af818485d8bda2?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "kamalika ray",
        "link": "https://stackoverflow.com/users/20505088/kamalika-ray"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76564394,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687865252,
      "creation_date": 1687861820,
      "question_id": 76563944,
      "share_link": "https://stackoverflow.com/q/76563944",
      "body_markdown": "I want to filter the edges between the two nodes according to the an edge property. However, only the nodes are getting filtered when I use the following Cypher query. \r\n```\r\nMATCH (s:Source {id: 54558})-[r:CCI{prop_1: 8}]-&gt;(t:Target)\r\nwith s, collect(r) as filterededges, t return s, filterededges, t\r\n```\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rGYJ7.png\r\n\r\n\r\nIn the &quot;Table&quot; output, it is showing the correct result (one edge from the source node to the target node) How can I remove the unwanted edges that are displayed?\r\nI am using Neo4j version 5.\r\n\r\nThanks a lot!",
      "link": "https://stackoverflow.com/questions/76563944/neo4j-cypher-filter-edges-between-two-nodes",
      "title": "Neo4j/Cypher: Filter edges between two nodes"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687819196,
          "post_id": 76560493,
          "comment_id": 134987205,
          "link": "https://stackoverflow.com/questions/76560493/neo4j-cypher-return-invert-relationship#comment134987205_76560493"
        },
        {
          "owner": {
            "reputation": 6601,
            "user_id": 583367,
            "user_type": "registered",
            "accept_rate": 70,
            "profile_image": "https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG",
            "display_name": "Arjun",
            "link": "https://stackoverflow.com/users/583367/arjun"
          },
          "reply_to_user": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687819820,
          "post_id": 76560493,
          "comment_id": 134987256,
          "link": "https://stackoverflow.com/questions/76560493/neo4j-cypher-return-invert-relationship#comment134987256_76560493"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6601,
                "user_id": 583367,
                "user_type": "registered",
                "accept_rate": 70,
                "profile_image": "https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG",
                "display_name": "Arjun",
                "link": "https://stackoverflow.com/users/583367/arjun"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687931419,
              "post_id": 76560854,
              "comment_id": 135004191,
              "link": "https://stackoverflow.com/questions/76560493/neo4j-cypher-return-invert-relationship/76560854#comment135004191_76560854"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1687895330,
          "last_edit_date": 1687895330,
          "creation_date": 1687823535,
          "answer_id": 76560854,
          "question_id": 76560493,
          "share_link": "https://stackoverflow.com/a/76560854",
          "body_markdown": "You can use [apoc.create.vRelationship](https://neo4j.com/docs/apoc/current/overview/apoc.create/apoc.create.vRelationship/) to return virtual `ASSEMBLED_BY` relationships (with reversed directionality) for `IBM` users. This does not change any relationships in the DB.\r\n\r\n    MATCH (u:USER {id: 101})\r\n    RETURN CASE u.preference \r\n      WHEN &#39;HP&#39;     THEN [(n:computer)-[r: MANUFACTURED_BY]-&gt;(c:HP) | r]\r\n      WHEN &#39;IBM&#39;    THEN [(n:computer)-[r:ASSEMBLED_BY]-&gt;(c:IBM) | apoc.create.vRelationship(c, &#39;ASSEMBLED_BY&#39;, PROPERTIES(r), n)] \r\n      WHEN &#39;DELL&#39;   THEN [(n:computer)-[r:ASSEMBLED_BY]-&gt;(c:DELL) | r] \r\n      WHEN &#39;HP_IBM&#39; THEN [(n:computer)-[r:ASSEMBLED_BY]-&gt;(c:HP_IBM) | r] END\r\n    AS result;\r\n\r\nNote that the above query uses the correctly-spelled `ASSEMBLED_BY` relationship type.",
          "link": "https://stackoverflow.com/questions/76560493/neo4j-cypher-return-invert-relationship/76560854#76560854",
          "title": "neo4j cypher: return invert relationship"
        }
      ],
      "owner": {
        "reputation": 6601,
        "user_id": 583367,
        "user_type": "registered",
        "accept_rate": 70,
        "profile_image": "https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG",
        "display_name": "Arjun",
        "link": "https://stackoverflow.com/users/583367/arjun"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 76,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76560854,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687895330,
      "creation_date": 1687817166,
      "question_id": 76560493,
      "share_link": "https://stackoverflow.com/q/76560493",
      "body_markdown": "We are using neo4j v4.\r\n\r\nI have USER, COMPUTER, COMPANY nodes(IBM, HP, DELL etc),\r\n\r\nWhen company is IBM, I want to reverse the edge before returning.\r\n\r\nI tried apoc.refactor.invert() like below:\r\n\r\n\r\n    MATCH (u:USER {id: 101})\r\n    RETURN  \r\n    CASE u.preference \r\n    WHEN &#39;HP&#39;    THEN  [(n:computer)-[r: MANUFACTURED_BY]-&gt;(c:HP) | r]\r\n    WHEN &#39;IBM&#39;   THEN [(n:computer)-[r:ASSEMBELED_BY]-&gt;(c:IBM) | apoc.refactor.invert(r)] \r\n    WHEN &#39;DELL&#39;   THEN [(n:computer)-[r:ASSEMBELED_BY]-&gt;(c:DELL) | r] \r\n    WHEN &#39;HP_IBM&#39; THEN xxxxxxx END\r\n    AS result;\r\n\r\nBut, getting this error: Invalid input &#39;s&#39;\r\n\r\nAny idea?\r\n\r\n\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76560493/neo4j-cypher-return-invert-relationship",
      "title": "neo4j cypher: return invert relationship"
    },
    {
      "tags": ["database", "import", "neo4j", "cypher", "cluster-computing"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1953,
                "user_id": 10732434,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/80fbdcd2944caad3fe6ea353919e2bec?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "sanitizedUser",
                "link": "https://stackoverflow.com/users/10732434/sanitizeduser"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688644403,
              "post_id": 76601839,
              "comment_id": 135103228,
              "link": "https://stackoverflow.com/questions/76552642/data-not-available-after-neo4j-admin-import-causal-cluster-neo4j-enterprise-e/76601839#comment135103228_76601839"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 16,
            "user_id": 21904355,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZvUFZSjg8zU0kdEMp1NGf1uLgZA7ogPCbUtVwjLA=k-s256",
            "display_name": "Stuart Laurie",
            "link": "https://stackoverflow.com/users/21904355/stuart-laurie"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1688358416,
          "creation_date": 1688358416,
          "answer_id": 76601839,
          "question_id": 76552642,
          "share_link": "https://stackoverflow.com/a/76601839",
          "body_markdown": "If I follow the steps correctly I think you are loading the database on a single VM of the cluster, is that correct?\r\n\r\nIf that is the case then the cause could be that when you run the CREATE command a different VM becomes leader for the database, doesn&#39;t find any data local to it and creates an empty database which is then synched to the other members (effectively overwriting the actual data you loaded).\r\n\r\nIn the 4.x series you would need to [seed the database][1] on all VMs and then run the create database command.\r\n\r\nIn version 5.x this has been made easier with the [Designated Seeder][2] option allowing you to import on a single member of the cluster and specify that VM in the CREATE database command. \r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/4.4/clustering/seed/\r\n  [2]: https://neo4j.com/docs/operations-manual/current/clustering/databases/#cluster-designated-seeder",
          "link": "https://stackoverflow.com/questions/76552642/data-not-available-after-neo4j-admin-import-causal-cluster-neo4j-enterprise-e/76601839#76601839",
          "title": "Data not available after neo4j-admin import (Causal Cluster / Neo4J Enterprise Edition)"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22130263,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/922074aa05912da107261a635c5abf3f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Esanu Codrin Stefan",
        "link": "https://stackoverflow.com/users/22130263/esanu-codrin-stefan"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 67,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1688358416,
      "creation_date": 1687732054,
      "question_id": 76552642,
      "share_link": "https://stackoverflow.com/q/76552642",
      "body_markdown": "I am using neo4j-admin import command to import data into a neo4j causal cluster with neo4j enterprise 4.4.7 installed on 9 Ubuntu VMs configured as CORE instances. Cluster is functional and works.\r\nThe data I want to import are stored in csv/tbl files generated with tpch-dbgen tool (based on TPCH schema). I have csv files with the headers and tbl files with actual data. The data is generated for scale factor 1 and 10, not so big datasets, but I plan to scale up to 500 if I can make the import work.\r\n\r\n\r\nI just can&#39;t obtain the data after import and I am running into a dead end.\r\nWould really appreciate some guidance !\r\n\r\nThe steps I take for import:\r\n1. stop neo4j with command /usr/local/neo4j-enterprise-4.4.7/bin/neo4j stop;\r\nI get the message that it&#39;s stopping and stopped.\r\nThis step I take on all VMs of the cluster.\r\n\r\n2. run the command for import: \r\nneo4j-admin import --database=tpch --delimiter=&quot;|&quot; --ignore-extra-columns=true --nodes=REGION:REGION=&quot;/home/ubuntu/tpch_headers/region.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/region.tbl&quot; --nodes=NATION:NATION=&quot;/home/ubuntu/tpch_headers/nation.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/nation.tbl&quot; --nodes=CUSTOMER:CUSTOMER=&quot;/home/ubuntu/tpch_headers/customer.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/customer.tbl&quot; --nodes=PART:PART=&quot;/home/ubuntu/tpch_headers/part.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/part.tbl&quot; --nodes=SUPPLIER:SUPPLIER=&quot;/home/ubuntu/tpch_headers/supplier.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/supplier.tbl&quot; --nodes=PARTSUPP:PARTSUPP=&quot;/home/ubuntu/tpch_headers/partsupp.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/partsupp.tbl&quot; --nodes=ORDERS:ORDERS=&quot;/home/ubuntu/tpch_headers/orders.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/orders.tbl&quot; --nodes=LINEITEM:LINEITEM=&quot;/home/ubuntu/tpch_headers/lineitem.csv&quot;,&quot;/home/ubuntu/tpch-dbgen/data01/lineitem.tbl&quot;;\r\n\r\nit displays import completed\r\n\r\n3. start neo4j with command /usr/local/neo4j-enterprise-4.4.7/bin/neo4j start;\r\nI get the message that it started and ran it on all VMs of the cluster.\r\n\r\n4. I connect from one of the VMs using cypher-shell to the system database with user neo4j\r\n\r\n5. I create the tpch database\r\n\r\n6. I select it\r\n\r\n7. I run call db.schema.visualization; to see it&#39;s data but nothing appears, like it would be empty.\r\n\r\n8. I run a simple query like match(n) return count(n); and it displays 0 like no node would be present.",
      "link": "https://stackoverflow.com/questions/76552642/data-not-available-after-neo4j-admin-import-causal-cluster-neo4j-enterprise-e",
      "title": "Data not available after neo4j-admin import (Causal Cluster / Neo4J Enterprise Edition)"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687586890,
          "post_id": 76542023,
          "comment_id": 134960727,
          "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps#comment134960727_76542023"
        },
        {
          "owner": {
            "reputation": 2537,
            "user_id": 1578274,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://i.stack.imgur.com/lM7c1.jpg?s=256&g=1",
            "display_name": "Vaibhav",
            "link": "https://stackoverflow.com/users/1578274/vaibhav"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687800549,
          "post_id": 76542023,
          "comment_id": 134984446,
          "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps#comment134984446_76542023"
        },
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1687840185,
          "post_id": 76542023,
          "comment_id": 134988960,
          "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps#comment134988960_76542023"
        },
        {
          "owner": {
            "reputation": 2537,
            "user_id": 1578274,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://i.stack.imgur.com/lM7c1.jpg?s=256&g=1",
            "display_name": "Vaibhav",
            "link": "https://stackoverflow.com/users/1578274/vaibhav"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687898394,
          "post_id": 76542023,
          "comment_id": 135001045,
          "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps#comment135001045_76542023"
        },
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687944165,
          "post_id": 76542023,
          "comment_id": 135006463,
          "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps#comment135006463_76542023"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 136,
            "user_id": 10768865,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Stephanie",
            "link": "https://stackoverflow.com/users/10768865/stephanie"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706106687,
          "creation_date": 1706106687,
          "answer_id": 77873842,
          "question_id": 76542023,
          "share_link": "https://stackoverflow.com/a/77873842",
          "body_markdown": "Sorry this is old but:\r\n\r\n```\r\nMATCH p=(P1)-[:HAS_ZIP]-&gt;(:ZIP)&lt;-[:HAS_ZIP]-(P2)\r\nWHERE NOT P1=P2 AND (P1.is_verified=1 OR P2.is_verified=1)\r\n\r\nMERGE (P1)-[rel:SHARES_ZIP]-(P2)\r\nSET rel.verififed=1 \r\n\r\nRETURN p\r\n```",
          "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps/77873842#77873842",
          "title": "Adding relationship property on projection based on node property during collapse path"
        }
      ],
      "owner": {
        "reputation": 2537,
        "user_id": 1578274,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://i.stack.imgur.com/lM7c1.jpg?s=256&g=1",
        "display_name": "Vaibhav",
        "link": "https://stackoverflow.com/users/1578274/vaibhav"
      },
      "last_editor": {
        "reputation": 2537,
        "user_id": 1578274,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://i.stack.imgur.com/lM7c1.jpg?s=256&g=1",
        "display_name": "Vaibhav",
        "link": "https://stackoverflow.com/users/1578274/vaibhav"
      },
      "comment_count": 5,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706106687,
      "creation_date": 1687538345,
      "last_edit_date": 1687541555,
      "question_id": 76542023,
      "share_link": "https://stackoverflow.com/q/76542023",
      "body_markdown": "I am looking for a way to add a relationship property to collapsed path during native projection. Eg. I&#39;m collapsing `(P1)-[:HAS_ZIP]-&gt;(:ZIP)&lt;-[:HAS_ZIP]-(P2)` to `(P1)-[:SHARES_ZIP]-(P2)`.\r\n\r\nAnd I want to add say `[:SHARES_ZIP {verified: 1}]` if either P1/P2 have property is_verified=1 to use as weight in GDS centrality algorithms. I looked at the collapsePath [signature][1] but couldn&#39;t find a way to add relationship properties.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/graph-data-science/current/beta-algorithms/collapse-path/",
      "link": "https://stackoverflow.com/questions/76542023/adding-relationship-property-on-projection-based-on-node-property-during-collaps",
      "title": "Adding relationship property on projection based on node property during collapse path"
    },
    {
      "tags": ["neo4j", "cypher", "opencypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687536149,
              "post_id": 76541726,
              "comment_id": 134955723,
              "link": "https://stackoverflow.com/questions/76539882/adding-case-in-match-statement-of-iterate-function-in-neo4j/76541726#comment134955723_76541726"
            },
            {
              "owner": {
                "reputation": 12347,
                "user_id": 7371893,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
                "display_name": "jose_bacoy",
                "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687539800,
              "post_id": 76541726,
              "comment_id": 134956450,
              "link": "https://stackoverflow.com/questions/76539882/adding-case-in-match-statement-of-iterate-function-in-neo4j/76541726#comment134956450_76541726"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687535767,
          "creation_date": 1687535767,
          "answer_id": 76541726,
          "question_id": 76539882,
          "share_link": "https://stackoverflow.com/a/76541726",
          "body_markdown": "Unfortunately, you cannot combine set n.\\&lt;prop\\&gt; and set:\\&lt;label\\&gt; into one case-when statement.\r\n\r\n    1 CALL apoc.periodic.iterate(\r\n    2    &quot;MATCH  (res:Book) where res.isbn =~ &#39;(?)[A-Z].*&#39; RETURN res&quot;,  \r\n    3    &quot;MATCH (res2:Book) WHERE toLower(res2.isbn) = toLower(res.isbn) \r\n    4     WITH res, count(res2) as rescount\r\n    5     SET res.isbn = CASE WHEN rescount = 1 THEN toLower(res.isbn) END \r\n    6     WITH res WHERE rescount = 2\r\n    7     SET res:DELETED&quot;, {})\r\n\r\n    line 1 is iterate statement\r\n    line 2 is passing all books that starts with upper CASE letter (e.g. Aaa)\r\n    line 3 is find other books with same isbn with line 2 but lower case (I fixed your typo on the sample query). For ex:  Aaa and aaa\r\n    line 4 count those books with same isbn in line 2 \r\n    line 5 set the isbn to lower case found in line 2 when no other duplicate book is found (rescount = 1)\r\n    line 6 get only those books in line 2 that has duplicated isbn (res2) in line 3\r\n    line 7 update the label of this book filtered in line 6 to DELETED\r\n\r\n\r\n\r\nsample result:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pEUOQ.png\r\n\r\n\r\nThe two isolated nodes on the right are updated to :DELETED\r\n\r\nSample result for iterate function:\r\n\r\n    ╒═════════╤═══════╤═══════════╤═════════════════════╤══════════════════╤═══════════════╤\r\n    │&quot;batches&quot;│&quot;total&quot;│&quot;timeTaken&quot;│&quot;committedOperations&quot;│&quot;failedOperations&quot;│&quot;failedBatches&quot;│\r\n    ╞═════════╪═══════╪═══════════╪═════════════════════╪══════════════════╪═══════════════╪\r\n    │1        │2      │0          │2                    │0                 │0              │\r\n    │         │       │           │                     │                  │               │\r\n\r\n",
          "link": "https://stackoverflow.com/questions/76539882/adding-case-in-match-statement-of-iterate-function-in-neo4j/76541726#76541726",
          "title": "Adding case in Match statement of iterate function in neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687543188,
          "last_edit_date": 1687543188,
          "creation_date": 1687541513,
          "answer_id": 76542374,
          "question_id": 76539882,
          "share_link": "https://stackoverflow.com/a/76542374",
          "body_markdown": "The Cypher [CASE](https://neo4j.com/docs/cypher-manual/current/syntax/expressions/#query-syntax-case) expression cannot write to the DB.\r\n\r\nThe following query uses the [apoc.do.when](https://neo4j.com/docs/apoc/current/overview/apoc.do/apoc.do.when/) procedure instead, which allows you to conditionally execute arbitrary Cypher code if you have up to 2 possible choices (or you can use [apoc.do.case](https://neo4j.com/docs/apoc/current/overview/apoc.do/apoc.do.case/) for any number of choices). The query also uses [OPTIONAL MATCH](https://neo4j.com/docs/cypher-manual/current/clauses/optional-match/) instead of `MATCH` for `res2` so that the remainder of the query will be executed even when `res2` does not exist (i.e., its value is `NULL`). \r\n\r\n    MATCH (res:Book) WHERE res.isbn =~ &#39;.*[A-Z].*&#39;\r\n    OPTIONAL MATCH (res2:Book) WHERE res2 &lt;&gt; res AND res2.isbn = TOLOWER(res.isbn)\r\n    CALL apoc.do.when(res2 IS NULL,\r\n      &quot;SET res.isbn=TOLOWER(res.isbn)&quot;,\r\n      &quot;SET res:Deleted&quot;,\r\n     {res: res}) YIELD value\r\n    RETURN res\r\n",
          "link": "https://stackoverflow.com/questions/76539882/adding-case-in-match-statement-of-iterate-function-in-neo4j/76542374#76542374",
          "title": "Adding case in Match statement of iterate function in neo4j"
        }
      ],
      "owner": {
        "reputation": 1524,
        "user_id": 5238800,
        "user_type": "registered",
        "accept_rate": 61,
        "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=256&g=1",
        "display_name": "nik",
        "link": "https://stackoverflow.com/users/5238800/nik"
      },
      "last_editor": {
        "reputation": 1524,
        "user_id": 5238800,
        "user_type": "registered",
        "accept_rate": 61,
        "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=256&g=1",
        "display_name": "nik",
        "link": "https://stackoverflow.com/users/5238800/nik"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1687543188,
      "creation_date": 1687521439,
      "last_edit_date": 1687525508,
      "question_id": 76539882,
      "share_link": "https://stackoverflow.com/q/76539882",
      "body_markdown": "I&#39;ve recently started working on Cypher. Created a `Book` database. I want to implement following things using Cypher query-\r\n1. Find all books containing at least 1 capital letter in its `isbn` property value.\r\n2. Traverse over all of such books and for each book if one more book(node) is present with same value but in small case(If other node is present then it&#39;ll always have small case isbn value) then add label to capital value node with name `Deleted`.\r\n3. If only one node present with capital value then convert its value into small case.\r\n\r\nFollowing is the query I wrote, but getting error about unexpected case-\r\n\r\n     CALL apoc.periodic.iterate(\r\n    &#39;MATCH (res:Book) WHERE res.isbn =~ \\&#39;.*[A-Z]+.*\\&#39; RETURN res&#39;, \r\n    &#39;MATCH (res2:Book) WHERE toLower(res.isbn) = toLower(res.isbn) \r\n    RETURN count(res2) as rescount WITH CASE rescount \r\n    WHEN 1 THEN set res.isbn=toLower(res.isbn) \r\n    WHEN 2 THEN set (res:Deleted) END&#39;,{})\r\n\r\nError-\r\n\r\n    {&quot;Invalid input &#39;r&#39;: expected whitespace, comment, &#39;{&#39;, node labels, MapLiteral, a parameter, a parameter (old syntax), a relationship pattern, &#39;(&#39;, &#39;.&#39;, node labels or rel types, &#39;[&#39;, &#39;^&#39;, &#39;*&#39;, &#39;/&#39;, &#39;%&#39;, &#39;+&#39;, &#39;-&#39;, &quot;=~&quot;, IN, STARTS, ENDS, CONTAINS, IS, &#39;=&#39;, &quot;&lt;&gt;&quot;, &quot;!=&quot;, &#39;&lt;&#39;, &#39;&gt;&#39;, &quot;&lt;=&quot;, &quot;&gt;=&quot;, AND, XOR, OR, WHEN, ELSE or END (line 3, column 21 (offset: 187))\\n&quot;    WHEN 1 THEN set res.isbn=toLower(res.isbn)&quot;\\n                     ^&quot;: 1                                                                                                                            }\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76539882/adding-case-in-match-statement-of-iterate-function-in-neo4j",
      "title": "Adding case in Match statement of iterate function in neo4j"
    },
    {
      "tags": ["json", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1687434511,
          "post_id": 76531524,
          "comment_id": 134938025,
          "link": "https://stackoverflow.com/questions/76531524/how-to-export-and-read-json-output-from-neo4j-cypher-queries#comment134938025_76531524"
        },
        {
          "owner": {
            "reputation": 1447,
            "user_id": 626664,
            "user_type": "registered",
            "accept_rate": 47,
            "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
            "display_name": "Droid-Bird",
            "link": "https://stackoverflow.com/users/626664/droid-bird"
          },
          "reply_to_user": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687435009,
          "post_id": 76531524,
          "comment_id": 134938125,
          "link": "https://stackoverflow.com/questions/76531524/how-to-export-and-read-json-output-from-neo4j-cypher-queries#comment134938125_76531524"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1447,
                "user_id": 626664,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
                "display_name": "Droid-Bird",
                "link": "https://stackoverflow.com/users/626664/droid-bird"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687441584,
              "post_id": 76532285,
              "comment_id": 134939786,
              "link": "https://stackoverflow.com/questions/76531524/how-to-export-and-read-json-output-from-neo4j-cypher-queries/76532285#comment134939786_76532285"
            },
            {
              "owner": {
                "reputation": 12347,
                "user_id": 7371893,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
                "display_name": "jose_bacoy",
                "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
              },
              "reply_to_user": {
                "reputation": 1447,
                "user_id": 626664,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
                "display_name": "Droid-Bird",
                "link": "https://stackoverflow.com/users/626664/droid-bird"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687458772,
              "post_id": 76532285,
              "comment_id": 134943433,
              "link": "https://stackoverflow.com/questions/76531524/how-to-export-and-read-json-output-from-neo4j-cypher-queries/76532285#comment134943433_76532285"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687439454,
          "creation_date": 1687439454,
          "answer_id": 76532285,
          "question_id": 76531524,
          "share_link": "https://stackoverflow.com/a/76532285",
          "body_markdown": "The exported file from neo4j browser is using a different encoding. Please use &quot;utf-8-sig&quot; as encoding.  \r\n\r\n    import json\r\n    file_path = &#39;test_records.json&#39; \r\n    with open(file_path, &quot;r&quot;, encoding=&#39;utf-8-sig&#39;) as file:\r\n        data = json.load(file)\r\n    \r\n    print(data) \r\n\r\nSample output:\r\n\r\n    [{&#39;n&#39;: {&#39;identity&#39;: 45, &#39;labels&#39;: [&#39;Person&#39;], &#39;properties&#39;: {&#39;name&#39;: &#39;Bob&#39;}}}, {&#39;n&#39;: {&#39;identity&#39;: 49, &#39;labels&#39;: [&#39;Person&#39;], &#39;properties&#39;: {&#39;name&#39;: &#39;Alice&#39;}}}, {&#39;n&#39;: {&#39;identity&#39;: 52, &#39;labels&#39;: [&#39;Person&#39;], &#39;properties&#39;: {&#39;name&#39;: &#39;Bob&#39;}}}, {&#39;n&#39;: {&#39;identity&#39;: 53, &#39;labels&#39;: [&#39;Person&#39;], &#39;properties&#39;: {&#39;name&#39;: &#39;Alice&#39;}}}]\r\n\r\nBelow are my notebook and python versions:\r\n\r\n    The version of the notebook server is: 6.5.4\r\n    The server is running on this version of Python:\r\n    Python 3.9.6 (default, Oct 18 2022, 12:41:40) \r\n    [Clang 14.0.0 (clang-1400.0.29.202)]",
          "link": "https://stackoverflow.com/questions/76531524/how-to-export-and-read-json-output-from-neo4j-cypher-queries/76532285#76532285",
          "title": "How to export and read json output from neo4j cypher queries?"
        }
      ],
      "owner": {
        "reputation": 1447,
        "user_id": 626664,
        "user_type": "registered",
        "accept_rate": 47,
        "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
        "display_name": "Droid-Bird",
        "link": "https://stackoverflow.com/users/626664/droid-bird"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 219,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687439454,
      "creation_date": 1687434122,
      "question_id": 76531524,
      "share_link": "https://stackoverflow.com/q/76531524",
      "body_markdown": "After running cypher query on neo4j, I can export/download the result as json or csv format. However, as I tried to import that into python, I found error as the json and csv are not formatted properly. Can someone please  help with importing into json? Thank you.\r\n\r\n\r\n    with open(file_path, &quot;r&quot;) as file:\r\n        data = json.load(file)\r\n    ---------------------------------------------------------------------------\r\n    JSONDecodeError                           Traceback (most recent call last)\r\n    Cell In[28], line 2\r\n          1 with open(file_path, &quot;r&quot;) as file:\r\n    ----&gt; 2     data = json.load(file)\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76531524/how-to-export-and-read-json-output-from-neo4j-cypher-queries",
      "title": "How to export and read json output from neo4j cypher queries?"
    },
    {
      "tags": ["cypher", "spring-data-neo4j", "spring-projections"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687461464,
          "post_id": 76526269,
          "comment_id": 134943992,
          "link": "https://stackoverflow.com/questions/76526269/spring-data-neo4j-custom-query-that-maps-node-entity-inside-collect-aggregate#comment134943992_76526269"
        },
        {
          "owner": {
            "reputation": 63,
            "user_id": 1183989,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/11ce36ef7608070be165b0578b4456af?s=256&d=identicon&r=PG",
            "display_name": "Michael Cronk",
            "link": "https://stackoverflow.com/users/1183989/michael-cronk"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687469928,
          "post_id": 76526269,
          "comment_id": 134945489,
          "link": "https://stackoverflow.com/questions/76526269/spring-data-neo4j-custom-query-that-maps-node-entity-inside-collect-aggregate#comment134945489_76526269"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687477037,
          "post_id": 76526269,
          "comment_id": 134946208,
          "link": "https://stackoverflow.com/questions/76526269/spring-data-neo4j-custom-query-that-maps-node-entity-inside-collect-aggregate#comment134946208_76526269"
        }
      ],
      "owner": {
        "reputation": 63,
        "user_id": 1183989,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/11ce36ef7608070be165b0578b4456af?s=256&d=identicon&r=PG",
        "display_name": "Michael Cronk",
        "link": "https://stackoverflow.com/users/1183989/michael-cronk"
      },
      "last_editor": {
        "reputation": 63,
        "user_id": 1183989,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/11ce36ef7608070be165b0578b4456af?s=256&d=identicon&r=PG",
        "display_name": "Michael Cronk",
        "link": "https://stackoverflow.com/users/1183989/michael-cronk"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 75,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1687386862,
      "creation_date": 1687373254,
      "last_edit_date": 1687386862,
      "question_id": 76526269,
      "share_link": "https://stackoverflow.com/q/76526269",
      "body_markdown": "I&#39;m having an issue when trying to map a node entity inside a COLLECT aggregate.\r\n\r\nFor example, consider that a Company has zero or more Employees. In a graph database, I can create the following relationship between two nodes:\r\n\r\n    MATCH (e:Employee { name:&#39;Michael&#39; }), (c:Company { name:&#39;Acme&#39;})\r\n    CREATE (e)-[r:WORKS_FOR {hired: datetime()}]-&gt;(c);\r\n\r\nFor whatever reason, I now want to write a custom query to fetch all employees in a company.\r\n\r\n***NOTE: I understand I can annotate the relationship in the MyCompany entity, but I want to do it in a custom query.***\r\n\r\nFor example:\r\n\r\n    @Query(value=\r\n      &quot;&quot;&quot;\r\n      MATCH (c:Company {name:$name})&lt;-[r:WORKS_FOR]-(e:Employee)\r\n      RETURN c AS company, COLLECT({employee:e, type:type(r)}) as relationships;\r\n      &quot;&quot;&quot;)\r\n    MyResult findRelationships(String name);\r\n\r\nThe POJOs are ***(excluding most of the annotations intentionally)***:\r\n\r\n    @Node(&quot;Company&quot;)\r\n    class MyCompany {\r\n      private String name;\r\n    }\r\n    \r\n    @Node(&quot;Employee&quot;)\r\n    class MyEmployee {\r\n      private String name;\r\n    }\r\n    \r\n    class MyRelationship {\r\n      private MyEmployee employee;\r\n      private String type;\r\n    }\r\n    \r\n    class MyResult {\r\n      private MyCompany company;\r\n      private Set&lt;MyRelationship&gt; relationships;\r\n    }\r\n\r\nThis query works perfectly fine using the Cypher Shell CLI. Furthermore, if I avoid the COLLECT and simply return the company, employee and the relationship type, Spring Data works as expected (other than returning multiple matching rows for each permutation).\r\n\r\nHowever, when running in the application using Spring Data with the COLLECT, I get the following error:\r\n\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed:\r\n      org.springframework.data.mapping.MappingException:\r\n      Error mapping {type: &quot;WORKS_FOR&quot;, employee: node&lt;58&gt;}] with root cause\r\n      java.util.NoSuchElementException: No value present\r\n\r\nI think they call this a projection?\r\n\r\nSome database/app details:\r\n\r\n    Database: &quot;Neo4j Kernel&quot; | &quot;5.8.0&quot; | &quot;community&quot;\r\n    App (spring-boot-starter-parent): 3.1.0\r\n    App (org.neo4j:neo4j-cypher-dsl:jar:2023.2.0:compile)\r\n    App (org.neo4j.driver:neo4j-java-driver:jar:5.8.0:compile)\r\n    App (org.projectlombok:lombok:jar:1.18.28:provided)\r\n    App (JDK 17.0.2)\r\n    App (Cypher-DSL Dialect.NEO4J_5)\r\n\r\nAny help would be greatly appreciated!",
      "link": "https://stackoverflow.com/questions/76526269/spring-data-neo4j-custom-query-that-maps-node-entity-inside-collect-aggregate",
      "title": "Spring Data Neo4j custom query that maps node entity inside COLLECT aggregate"
    },
    {
      "tags": ["json", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687422388,
          "post_id": 76525941,
          "comment_id": 134935456,
          "link": "https://stackoverflow.com/questions/76525941/can-neo4j-create-the-map-automatically-from-the-json-file-if-the-relationships-a#comment134935456_76525941"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 53,
                "user_id": 8555995,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/1968842033142710/picture?type=large",
                "display_name": "Wahaj Ahmad",
                "link": "https://stackoverflow.com/users/8555995/wahaj-ahmad"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687447379,
              "post_id": 76526575,
              "comment_id": 134941202,
              "link": "https://stackoverflow.com/questions/76525941/can-neo4j-create-the-map-automatically-from-the-json-file-if-the-relationships-a/76526575#comment134941202_76526575"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687376032,
          "creation_date": 1687376032,
          "answer_id": 76526575,
          "question_id": 76525941,
          "share_link": "https://stackoverflow.com/a/76526575",
          "body_markdown": "No, there is no automated way, and even if there were the generated result could be suboptimal or even wrong for your use cases.\r\n\r\nYou need to design the graph data model (node labels, relationship types, etc.) yourself. There are many considerations (like your use cases, and the necessary indexes and constraints) that are not revealed by a simple JSON data dump. Also, you need to understand the schema of the JSON and determine how to map that to your data model.",
          "link": "https://stackoverflow.com/questions/76525941/can-neo4j-create-the-map-automatically-from-the-json-file-if-the-relationships-a/76526575#76526575",
          "title": "Can neo4j create the map automatically from the json file if the relationships are defined in the json file?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 53,
            "user_id": 8555995,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/1968842033142710/picture?type=large",
            "display_name": "Wahaj Ahmad",
            "link": "https://stackoverflow.com/users/8555995/wahaj-ahmad"
          },
          "last_editor": {
            "reputation": 53,
            "user_id": 8555995,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/1968842033142710/picture?type=large",
            "display_name": "Wahaj Ahmad",
            "link": "https://stackoverflow.com/users/8555995/wahaj-ahmad"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687448515,
          "last_edit_date": 1687448515,
          "creation_date": 1687447730,
          "answer_id": 76533484,
          "question_id": 76525941,
          "share_link": "https://stackoverflow.com/a/76533484",
          "body_markdown": "It looks like neo4j can&#39;t automatically create a graph data model using a json file (as @cybersam pointed out earlier).\r\n\r\nI ended up writing a Python script to do this for me. Posting this here just in case it helps someone. It does the job for me!\r\n\r\n    from neo4j import GraphDatabase\r\n    import json\r\n    \r\n    # Connect to Neo4j\r\n    uri = &quot;bolt://localhost:7687&quot;\r\n    username = &quot;_username_&quot;\r\n    password = &quot;_password_&quot;\r\n    \r\n    driver = GraphDatabase.driver(uri, auth=(username, password))\r\n    \r\n    processed_painting_ids = set() #mainting a set to track unique painting node IDs\r\n    processed_node_ids = set()\r\n\r\n    # Load JSON data from file\r\n    with open(&quot;data_json.json&quot;, &quot;r&quot;) as file:\r\n        for line in file:\r\n            json_data = json.loads(line)\r\n    \r\n            p_data = json_data[&quot;p&quot;]\r\n            r_data = json_data[&quot;r&quot;]\r\n            n_data = json_data[&quot;n&quot;]\r\n    \r\n            p_unique_id = p_data.get(&quot;id&quot;) #keeps track of the id of the &quot;p&quot; node. \r\n    \r\n            # Handle missing values in the data\r\n            p_id = str(p_data[&quot;id&quot;])\r\n            p_date = str(p_data[&quot;properties&quot;].get(&quot;date&quot;, &quot;Unknown date&quot;))\r\n            p_img = p_data[&quot;properties&quot;].get(&quot;img&quot;, &quot;Unknown img&quot;)\r\n            p_name = p_data[&quot;properties&quot;].get(&quot;name&quot;, &quot;Unknown name&quot;)\r\n            p_sitelink = str(p_data[&quot;properties&quot;].get(&quot;sitelink&quot;, &quot;Unknown sitelink&quot;))\r\n            p_description = p_data[&quot;properties&quot;].get(&quot;description&quot;, &quot;Unknown description&quot;)\r\n            p_exhibit = p_data[&quot;properties&quot;].get(&quot;exhibit&quot;, &quot;Unknown exhibit&quot;)\r\n            p_uri = str(p_data[&quot;properties&quot;].get(&quot;uri&quot;, &quot;Unknown uri&quot;))\r\n    \r\n            r_id = str(r_data[&quot;id&quot;])\r\n            r_label = r_data[&quot;label&quot;]\r\n            start_id = str(r_data[&quot;start&quot;][&quot;id&quot;])\r\n            end_id = str(r_data[&quot;end&quot;][&quot;id&quot;])\r\n    \r\n            n_id = str(n_data[&quot;id&quot;])\r\n            n_name = n_data[&quot;properties&quot;].get(&quot;name&quot;, &quot;Unknown name&quot;)\r\n            n_sitelink = str(n_data[&quot;properties&quot;].get(&quot;sitelink&quot;,&quot;Unknown sitelink&quot;))\r\n            n_description = n_data[&quot;properties&quot;].get(&quot;description&quot;,&quot;Unknown description&quot;)\r\n            n_uri = n_data[&quot;properties&quot;].get(&quot;uri&quot;,&quot;Unknown uri&quot;)\r\n    \r\n            with driver.session() as session:\r\n        \r\n                # Create the &quot;n&quot; material node\r\n                if n_id not in processed_node_ids:\r\n                    session.run(&quot;CREATE (n:&quot; + n_data[&quot;labels&quot;][0] + &quot; {id: &quot; + n_id + &quot;, name: \\&quot;&quot; + n_name + &quot;\\&quot;, sitelink: \\&quot;&quot; + n_sitelink + &quot;\\&quot;, description: \\&quot;&quot; + n_description + &quot;\\&quot;, uri: \\&quot;&quot; + uri + &quot;\\&quot;})&quot;)\r\n                    processed_node_ids.add(n_id)\r\n                # check if the &quot;p&quot; node is repititive\r\n                if p_unique_id not in processed_painting_ids:\r\n                    # Create the &quot;p&quot; node\r\n                    session.run(&quot;CREATE (p:&quot; + p_data[&quot;labels&quot;][0] + &quot;{id: &quot;+p_id+&quot;,date: \\&quot;&quot;+p_date+&quot;\\&quot;, img: \\&quot;&quot;+p_img+&quot;\\&quot;, name: \\&quot;&quot;+p_name+&quot;\\&quot;, sitelink: &quot; + p_sitelink+&quot;, description: \\&quot;&quot;+p_description+&quot;\\&quot;, exhibit: \\&quot;&quot;+p_exhibit+&quot;\\&quot;, uri: \\&quot;&quot;+p_uri + &quot;\\&quot;})&quot;) \r\n                    # Add id of the node to the set\r\n                    processed_painting_ids.add(p_unique_id)\r\n                # Create the &quot;r&quot; relationship\r\n                session.run(&quot;MATCH (start), (end) WHERE start.id = &quot;+start_id+&quot; AND end.id = &quot;+end_id+&quot; CREATE (start)-[r:&quot;+r_label+&quot; {id: &quot;+r_id+&quot;}]-&gt;(end)&quot;)",
          "link": "https://stackoverflow.com/questions/76525941/can-neo4j-create-the-map-automatically-from-the-json-file-if-the-relationships-a/76533484#76533484",
          "title": "Can neo4j create the map automatically from the json file if the relationships are defined in the json file?"
        }
      ],
      "owner": {
        "reputation": 53,
        "user_id": 8555995,
        "user_type": "registered",
        "profile_image": "https://graph.facebook.com/1968842033142710/picture?type=large",
        "display_name": "Wahaj Ahmad",
        "link": "https://stackoverflow.com/users/8555995/wahaj-ahmad"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 98,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1687448515,
      "creation_date": 1687369787,
      "question_id": 76525941,
      "share_link": "https://stackoverflow.com/q/76525941",
      "body_markdown": "I have a json file that defines the nodes and their relationships. It looks sometihng like this:\r\n\r\n&gt; {&quot;p&quot;:{&quot;type&quot;:&quot;node&quot;,&quot;id&quot;:&quot;0&quot;,&quot;labels&quot;:[&quot;Paintings&quot;],&quot;properties&quot;:{&quot;date&quot;:&quot;1659-01-01T00:00:00&quot;,&quot;img&quot;:&quot;removed-for-brevity(RFB)&quot;,&quot;name&quot;:&quot;King Caspar&quot;,&quot;sitelink&quot;:&quot;1&quot;,&quot;description&quot;:&quot;RFB&quot;,&quot;exhibit&quot;:&quot;RAB&quot;,&quot;uri&quot;:&quot;RFB&quot;}},&quot;r&quot;:{&quot;id&quot;:&quot;144&quot;,&quot;type&quot;:&quot;relationship&quot;,&quot;label&quot;:&quot;on_MATERIAL&quot;,&quot;start&quot;:{&quot;id&quot;:&quot;0&quot;,&quot;labels&quot;:[&quot;Paintings&quot;]},&quot;end&quot;:{&quot;id&quot;:&quot;2504&quot;,&quot;labels&quot;:[&quot;Material&quot;]}},&quot;n&quot;:{&quot;type&quot;:&quot;node&quot;,&quot;id&quot;:&quot;2504&quot;,&quot;labels&quot;:[&quot;Material&quot;],&quot;properties&quot;:{&quot;name&quot;:&quot;oak&quot;,&quot;sitelink&quot;:5,&quot;description&quot;:&quot;RFB&quot;,&quot;uri&quot;:&quot;RFB&quot;}}}\r\n&gt; \r\n&quot;p&quot; is the first node, &quot;r&quot; is the relationship, &quot;n&quot; is the second node.\r\n\r\nIs it possible for neo4j to create a graph/map automatically from this json file, without having to define the nodes and relationships through cypher manually?\r\n\r\nI am fairly new to neo4j, I tried following the examples given on the [Load JSON](https://neo4j.com/labs/apoc/4.1/import/load-json/) page, but it defines the nodes and their relationships manually, which i want to avoid.",
      "link": "https://stackoverflow.com/questions/76525941/can-neo4j-create-the-map-automatically-from-the-json-file-if-the-relationships-a",
      "title": "Can neo4j create the map automatically from the json file if the relationships are defined in the json file?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc", "apoc"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1687369407,
          "last_edit_date": 1687369407,
          "creation_date": 1687369027,
          "answer_id": 76525872,
          "question_id": 76524175,
          "share_link": "https://stackoverflow.com/a/76525872",
          "body_markdown": "Here is one way of finding other `Maintenance` nodes connected to the same set of `WorkStep` nodes as a given `Maintenance` node:\r\n\r\n    MATCH (m:Maintenance)-[:HAS]-&gt;(w:WorkStep)\r\n    WHERE m.name = &#39;13 Years (325000 km)&#39;\r\n    WITH m, COLLECT(w) AS ws\r\n    MATCH (other:Maintenance)-[:HAS]-&gt;(w1:WorkStep)\r\n    WHERE w1 IN ws\r\n    WITH ws, other, COLLECT(w1) AS w1s\r\n    WHERE ALL(x IN ws WHERE x IN w1s)\r\n    RETURN other\r\n\r\nI assume above that the `name` property of `Maintenance` nodes is unique. It is not generally a reliable practice to find a node/relationship by its the native ID, as the native ID can be reused after entity deletion. Also, the [ID()](https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-id) function is now deprecated.",
          "link": "https://stackoverflow.com/questions/76524175/neo4j-searching-in-graph-for-exact-same-sub-graph/76525872#76525872",
          "title": "Neo4j: Searching in graph for exact same sub-graph"
        }
      ],
      "owner": {
        "reputation": 393,
        "user_id": 6108697,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/2bc48844158679619845e9c26b1a5c6c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "TiMeJuMp",
        "link": "https://stackoverflow.com/users/6108697/timejump"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76525872,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687369407,
      "creation_date": 1687356320,
      "question_id": 76524175,
      "share_link": "https://stackoverflow.com/q/76524175",
      "body_markdown": "I have currently the problem, that I want to find an exactly same subgraph under one other node. \r\n\r\nTo make it more specific. I have multiple repair guides which have multiple repair steps. The repair steps can exist also inside another repair guide. Now I want to find similar repair guides which have the exact same repair steps. \r\n\r\n```\r\nMATCH (mp1:Maintenance{name:&#39;13 Years (325000 km)&#39;})-[:HAS]-&gt;(ws:WorkStep)\r\nWHERE id(mp1)=49214\r\nwith collect(ws) as workingssteps, mp1\r\nMATCH (mp2:Maintenance)\r\n```\r\n\r\nNow I&#39;m stuck, how to proceed further to iterate over mp2 to find the same working steps from mp1. \r\n\r\nThanks for any help or tips. \r\nChristian",
      "link": "https://stackoverflow.com/questions/76524175/neo4j-searching-in-graph-for-exact-same-sub-graph",
      "title": "Neo4j: Searching in graph for exact same sub-graph"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc", "opencypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1524,
                "user_id": 5238800,
                "user_type": "registered",
                "accept_rate": 61,
                "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=256&g=1",
                "display_name": "nik",
                "link": "https://stackoverflow.com/users/5238800/nik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687345928,
              "post_id": 76522550,
              "comment_id": 134923030,
              "link": "https://stackoverflow.com/questions/76522485/find-all-nodes-containing-capital-letter-in-specific-property-value/76522550#comment134923030_76522550"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "last_editor": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1687353148,
          "last_edit_date": 1687353148,
          "creation_date": 1687345210,
          "answer_id": 76522550,
          "question_id": 76522485,
          "share_link": "https://stackoverflow.com/a/76522550",
          "body_markdown": "What about:\r\n\r\n```cypher\r\nMATCH (n)\r\nWHERE n.name =~ &#39;.*[A-Z]+.*&#39;\r\nRETURN n\r\n```\r\n\r\nIdeally, you will want to at least restrict the initial pattern (here: `(n)`) by a label (let&#39;s say: `Person`):\r\n\r\n```cypher\r\nMATCH (n:Person)\r\nWHERE n.name =~ &#39;.*[A-Z]+.*&#39;\r\nRETURN n\r\n```\r\n\r\n... and create an index for that label and property to speed up the lookup:\r\n\r\n```cypher\r\nCREATE INDEX person_name IF NOT EXISTS FOR (p:Person) ON (p.name)\r\n```",
          "link": "https://stackoverflow.com/questions/76522485/find-all-nodes-containing-capital-letter-in-specific-property-value/76522550#76522550",
          "title": "Find all nodes containing capital letter in specific property value"
        }
      ],
      "owner": {
        "reputation": 1524,
        "user_id": 5238800,
        "user_type": "registered",
        "accept_rate": 61,
        "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=256&g=1",
        "display_name": "nik",
        "link": "https://stackoverflow.com/users/5238800/nik"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76522550,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687353148,
      "creation_date": 1687344791,
      "question_id": 76522485,
      "share_link": "https://stackoverflow.com/q/76522485",
      "body_markdown": "I&#39;m new to Neo4j. I want to fetch all nodes whose one of property for example `name` contains a capital character at any position. I saw the `CONTAINS` clause provided but was unable to use it with RegEx as Compiler does not accept `=~` after CONTAINS keyword in the query.\r\nThanks in advance.",
      "link": "https://stackoverflow.com/questions/76522485/find-all-nodes-containing-capital-letter-in-specific-property-value",
      "title": "Find all nodes containing capital letter in specific property value"
    },
    {
      "tags": ["neo4j", "cypher", "networkx"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1447,
                "user_id": 626664,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
                "display_name": "Droid-Bird",
                "link": "https://stackoverflow.com/users/626664/droid-bird"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687346111,
              "post_id": 76522530,
              "comment_id": 134923060,
              "link": "https://stackoverflow.com/questions/76522148/how-do-i-query-neo4j-to-get-a-node-of-any-class-and-surrounded-nodes-inlcuding/76522530#comment134923060_76522530"
            },
            {
              "owner": {
                "reputation": 1447,
                "user_id": 626664,
                "user_type": "registered",
                "accept_rate": 47,
                "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
                "display_name": "Droid-Bird",
                "link": "https://stackoverflow.com/users/626664/droid-bird"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687435141,
              "post_id": 76522530,
              "comment_id": 134938169,
              "link": "https://stackoverflow.com/questions/76522148/how-do-i-query-neo4j-to-get-a-node-of-any-class-and-surrounded-nodes-inlcuding/76522530#comment134938169_76522530"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687345070,
          "creation_date": 1687345070,
          "answer_id": 76522530,
          "question_id": 76522148,
          "share_link": "https://stackoverflow.com/a/76522530",
          "body_markdown": "Would the following work for you (replace `n` with an actual max hop)?\r\n\r\n```cypher\r\nMATCH (p:Person)\r\nOPTIONAL MATCH path=(p)-[*1..n]-&gt;()\r\nRETURN p, collect(path) AS paths\r\n```",
          "link": "https://stackoverflow.com/questions/76522148/how-do-i-query-neo4j-to-get-a-node-of-any-class-and-surrounded-nodes-inlcuding/76522530#76522530",
          "title": "How do I query neo4j to get a node of any class, and surrounded nodes, inlcuding relationship?"
        }
      ],
      "owner": {
        "reputation": 1447,
        "user_id": 626664,
        "user_type": "registered",
        "accept_rate": 47,
        "profile_image": "https://www.gravatar.com/avatar/8dcc04f9e7c6315b7e896c560d1a805e?s=256&d=identicon&r=PG",
        "display_name": "Droid-Bird",
        "link": "https://stackoverflow.com/users/626664/droid-bird"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687345070,
      "creation_date": 1687342193,
      "question_id": 76522148,
      "share_link": "https://stackoverflow.com/q/76522148",
      "body_markdown": "I am new in neo4j. I wanted to run a query that should return a :person node, and all the surrounding nodes and relationship so that I can form a subgraph from those components. \r\n\r\nI have started like [this][1] But could not go far. My output should look like this,\r\n\r\n    Return CentreNode, OtherNodes, RelationshipsAmongNodesUpToNHops\r\n\r\nTo explain the problem, I am using python networkx for illustration only.\r\n\r\nIn this example, the original graph looks like this,\r\n\r\n    import os\r\n    import sys\r\n    import networkx as nx\r\n    \r\n    G1 = nx.karate_club_graph()\r\n    nx.draw_networkx(G1)\r\n\r\nNow lets find an ego_graph centered on node 16, radious 2 and it should look like this,\r\n\r\n    ego_graph = nx.ego_graph(G1, 16, 2)\r\n    nx.draw_networkx(ego_graph)\r\n\r\nMy goal is to find (:person) nodes, and ego_graph with radius R, centered on the person nodes. Its a large database, so the there will be many :person nodes (hence many ego_graphs).\r\n\r\nThanks in advance.\r\n\r\n  [1]: https://stackoverflow.com/questions/68082323/return-nodes-together-with-relations\r\n\r\n",
      "link": "https://stackoverflow.com/questions/76522148/how-do-i-query-neo4j-to-get-a-node-of-any-class-and-surrounded-nodes-inlcuding",
      "title": "How do I query neo4j to get a node of any class, and surrounded nodes, inlcuding relationship?"
    },
    {
      "tags": ["database", "graph", "neo4j", "cypher", "graph-databases"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687291785,
          "post_id": 76501936,
          "comment_id": 134915501,
          "link": "https://stackoverflow.com/questions/76501936/how-to-pick-a-parent-node-then-iterate-over-other-node-with-different-label-an#comment134915501_76501936"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1687291926,
          "creation_date": 1687291926,
          "answer_id": 76518100,
          "question_id": 76501936,
          "share_link": "https://stackoverflow.com/a/76518100",
          "body_markdown": "You can use the [apoc.agg.minItems](https://neo4j.com/docs/apoc/current/overview/apoc.agg/apoc.agg.minItems/) function to simplify the logic:\r\n\r\n    MATCH (l:Landmark), (r:Road)\r\n    WITH l, apoc.agg.minItems(r, point.distance(l.coordinate ,r.coordinate), 1).items[0] AS nearestRoad\r\n    CREATE (l)-[:relatesTo]-&gt;(nearestRoad)\r\n\r\nIf you will still get the same results, then it is probably the case that there is actually one road that is the closes to all your landmarks.",
          "link": "https://stackoverflow.com/questions/76501936/how-to-pick-a-parent-node-then-iterate-over-other-node-with-different-label-an/76518100#76518100",
          "title": "How to pick a parent node then iterate over other node (with different label) and find some information and do it repeatedly for each parent node"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22093104,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtf7WMEIG6biW1lwMxM99upC2QOCyOlQPKkIDEN7=k-s256",
        "display_name": "that guy",
        "link": "https://stackoverflow.com/users/22093104/that-guy"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687291926,
      "creation_date": 1687111759,
      "question_id": 76501936,
      "share_link": "https://stackoverflow.com/q/76501936",
      "body_markdown": "So, I am working with Neo4J and I have a problem where I have 2 different nodes (one called :Road and other called :Landmark) both of them have a property called coordinate that is the location of this point in wsg-84 system (created using spatial datatype in neo4j basically i.e. ```point()``` ). I need to create a relation between a :Road and a :Landmark where the distance is the minimum between them (geodesic distance). \r\n\r\nI am using spatial function like ```point.distance(r.coordinate,l.coordinate)``` to find the distance between them but I am not able to understand **how to find the closest distance from a :Landmark to a :Road and then create a relation between them**. It is possible to for a :Road to have multiple :Landmark related to it but each :Landmark should have only one :Road related to it. Can somebody help me write a cypher query for this.   \r\n\r\n\r\n```cypher\r\nMATCH (l:Landmark)\r\nOPTIONAL MATCH (r:Road)\r\nwith p,apoc.coll.sortMaps(collect({road:r,dist:point.distance(l.coordinate ,r.coordinate)}),&quot;dist&quot;) as minDist\r\nCREATE (l) -[:relatesTo]-&gt;(head(minDist).road)\r\n```\r\n\r\nI tried things like this but even when I return the values l and head of minDist it is it is the minDist part is same for all entries. This does not work it maps all :Landmarks to one :Road. Please help\r\n",
      "link": "https://stackoverflow.com/questions/76501936/how-to-pick-a-parent-node-then-iterate-over-other-node-with-different-label-an",
      "title": "How to pick a parent node then iterate over other node (with different label) and find some information and do it repeatedly for each parent node"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1687150752,
          "post_id": 76498481,
          "comment_id": 134891206,
          "link": "https://stackoverflow.com/questions/76498481/unique-key-for-nodes-and-relationship-property#comment134891206_76498481"
        },
        {
          "owner": {
            "reputation": 85427,
            "user_id": 292291,
            "user_type": "registered",
            "accept_rate": 86,
            "profile_image": "https://www.gravatar.com/avatar/e31d9d39e9fb0ec4cc5573a5e5b01ce7?s=256&d=identicon&r=PG",
            "display_name": "Jiew Meng",
            "link": "https://stackoverflow.com/users/292291/jiew-meng"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1687236169,
          "post_id": 76498481,
          "comment_id": 134904386,
          "link": "https://stackoverflow.com/questions/76498481/unique-key-for-nodes-and-relationship-property#comment134904386_76498481"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1687238297,
          "creation_date": 1687238297,
          "answer_id": 76511597,
          "question_id": 76498481,
          "share_link": "https://stackoverflow.com/a/76511597",
          "body_markdown": "You can store `organisationId` within the `Project` nodes and create a constraint like this:\r\n\r\n    CREATE CONSTRAINT organisationId_project_name IF NOT EXISTS\r\n    FOR (n:Project)\r\n    REQUIRE (n.name, n.organisationId) IS UNIQUE",
          "link": "https://stackoverflow.com/questions/76498481/unique-key-for-nodes-and-relationship-property/76511597#76511597",
          "title": "Unique key for nodes and relationship property"
        }
      ],
      "owner": {
        "reputation": 85427,
        "user_id": 292291,
        "user_type": "registered",
        "accept_rate": 86,
        "profile_image": "https://www.gravatar.com/avatar/e31d9d39e9fb0ec4cc5573a5e5b01ce7?s=256&d=identicon&r=PG",
        "display_name": "Jiew Meng",
        "link": "https://stackoverflow.com/users/292291/jiew-meng"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1690749052,
      "creation_date": 1687043117,
      "last_edit_date": 1690749052,
      "question_id": 76498481,
      "share_link": "https://stackoverflow.com/q/76498481",
      "body_markdown": "Let&#39;s say I have a graph structure like:\r\n\r\n```cypher\r\n:Project{name:&quot;str&quot;} -[:BelongsTo]-&gt; :Organisation{id: &quot;str&quot;} \r\n```\r\n\r\nI want to ensure that the project `name` is unique for a given organisation `id`. Is it possible to do this within this structure, or do I need to store the `organisationId` as a property in the `:Project` node too? What is the best practice for this type of requirement?",
      "link": "https://stackoverflow.com/questions/76498481/unique-key-for-nodes-and-relationship-property",
      "title": "Unique key for nodes and relationship property"
    },
    {
      "tags": [
        "neo4j",
        "cypher",
        "knn",
        "recommendation-engine",
        "collaborative-filtering"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687286589,
          "post_id": 76497144,
          "comment_id": 134914708,
          "link": "https://stackoverflow.com/questions/76497144/cypher-and-k-nearest-neighbor-collaborative-filtering#comment134914708_76497144"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687286847,
          "post_id": 76497144,
          "comment_id": 134914750,
          "link": "https://stackoverflow.com/questions/76497144/cypher-and-k-nearest-neighbor-collaborative-filtering#comment134914750_76497144"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 21558841,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/672abe3c6b553bc007ca08575a7f11ba?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Eliza",
        "link": "https://stackoverflow.com/users/21558841/eliza"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1687286506,
      "creation_date": 1687019486,
      "last_edit_date": 1687286506,
      "question_id": 76497144,
      "share_link": "https://stackoverflow.com/q/76497144",
      "body_markdown": "I am currently trying to make recommendations based on collaborative Filtering. I have `Book`, `User`, and `Author` nodes in my database. The users are connected to the books with `RATED` and `ADDED TO LIST`. The books and authors with `WRITTEN_BY`.\r\n\r\n```\r\n// k-nearest neighbor\r\nMATCH (u1:User {user_id: 11927})-[r:RATED]-&gt;(b:Book)\r\nWITH u1,r.rating AS rating_u1\r\nMATCH (u1)-[r1:RATED]-&gt;(b:Book)&lt;-[r2:RATED]-(u2)\r\nWITH u1, u2, COLLECT({r1: r1, r2: r2}) AS ratings WHERE size(ratings) &gt; 5\r\nMATCH (u2)-[r:RATED]-&gt;(b:Book)\r\nWITH u1, u2, r.rating AS rating_u2, ratings\r\nUNWIND ratings AS r\r\nWITH sqrt(sum((r.r1.rating - r.r2.rating)^2)) AS euclidean_distance,\r\nu1, u2 WHERE euclidean_distance &lt;&gt; 0\r\nWITH u1, u2, 1 / (1 + euclidean_distance) AS similarity\r\nORDER BY similarity DESC LIMIT 10\r\nMATCH (u2)-[r:RATED]-&gt;(b:Book)\r\nWHERE NOT EXISTS((u1)-[:RATED]-&gt;(b))\r\nRETURN b.title, SUM(similarity * r.rating) AS score\r\nORDER BY score DESC LIMIT 25\r\n```\r\nWith this Cypher query I want to compare each pair of users who have rated at least 5 common books. Then, I want to compare the 10 most similar users to the user with `user_id` 11927. But there must be something wrong with my code; it is not doing what it should. Have you an idea how I could solve this? (I want to do it without graph data science, playground, or AuraDS). \r\n",
      "link": "https://stackoverflow.com/questions/76497144/cypher-and-k-nearest-neighbor-collaborative-filtering",
      "title": "Cypher and k nearest neighbor collaborative filtering"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 23,
                "user_id": 21080888,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/d46757182a34ca77e1e75e0062af7903?s=256&d=identicon&r=PG",
                "display_name": "oculardexterity",
                "link": "https://stackoverflow.com/users/21080888/oculardexterity"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687002716,
              "post_id": 76493211,
              "comment_id": 134878102,
              "link": "https://stackoverflow.com/questions/76489680/cypher-group-nodes-by-relation-type/76493211#comment134878102_76493211"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 23,
                "user_id": 21080888,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/d46757182a34ca77e1e75e0062af7903?s=256&d=identicon&r=PG",
                "display_name": "oculardexterity",
                "link": "https://stackoverflow.com/users/21080888/oculardexterity"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687284370,
              "post_id": 76493211,
              "comment_id": 134914221,
              "link": "https://stackoverflow.com/questions/76489680/cypher-group-nodes-by-relation-type/76493211#comment134914221_76493211"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1687284546,
          "last_edit_date": 1687284546,
          "creation_date": 1686945140,
          "answer_id": 76493211,
          "question_id": 76489680,
          "share_link": "https://stackoverflow.com/a/76493211",
          "body_markdown": "This should work:\r\n\r\n    MATCH (a:Person)-[r]-&gt;(b)\r\n    WHERE a.id = &quot;PersonA&quot;\r\n    WITH a, TYPE(r) AS t, COLLECT({id: b.id}) AS bIds\r\n    WITH a, COLLECT({t: t, bIds: bIds}) AS data\r\n    RETURN REDUCE(s = {id: a.id}, d IN data | apoc.map.setEntry(s, d.t, d.bIds))\r\n\r\nThe query assumes all person nodes have the `Person` label and a unique `id` property. The result looks likes this:\r\n\r\n    {\r\n      &quot;id&quot;: &quot;PersonA&quot;,\r\n      &quot;IS_FRIENDS_WITH&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;PersonD&quot;\r\n        }\r\n      ],\r\n      &quot;KNOWS&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;PersonB&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;PersonC&quot;\r\n        }\r\n      ],\r\n      &quot;LIKES&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;PersonE&quot;\r\n        }\r\n      ]\r\n    }",
          "link": "https://stackoverflow.com/questions/76489680/cypher-group-nodes-by-relation-type/76493211#76493211",
          "title": "Cypher: group nodes by relation type"
        }
      ],
      "owner": {
        "reputation": 23,
        "user_id": 21080888,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d46757182a34ca77e1e75e0062af7903?s=256&d=identicon&r=PG",
        "display_name": "oculardexterity",
        "link": "https://stackoverflow.com/users/21080888/oculardexterity"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 85,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76493211,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1687284546,
      "creation_date": 1686914440,
      "question_id": 76489680,
      "share_link": "https://stackoverflow.com/q/76489680",
      "body_markdown": "I have a data model that&#39;s something like:\r\n\r\n```\r\n(PersonA)-[:KNOWS]-&gt;(PersonB)\r\n(PersonA)-[:KNOWS]-&gt;(PersonC)\r\n(PersonA)-[:IS_FRIENDS_WITH]-&gt;(PersonD)\r\n(PersonA)-[:LIKES]-&gt;(PersonE)\r\n```\r\n\r\nI&#39;d like to write a query to return PersonA, with lists of related person grouped by the relation type. i.e.\r\n\r\n```\r\n{\r\n     &quot;id&quot;: &quot;PersonA&quot;,\r\n     &quot;knows&quot;: [\r\n         {&quot;id&quot;: &quot;PersonB&quot;},\r\n         {&quot;id&quot;: &quot;PersonC&quot;}\r\n     ],\r\n     &quot;is_friends_with&quot;: [\r\n         {&quot;id&quot;: &quot;PersonD&quot;}\r\n     ],\r\n     &quot;likes&quot;: [\r\n         {&quot;id&quot;: &quot;PersonE&quot;}\r\n     ]\r\n}\r\n```\r\n\r\n*Importantly*, I can&#39;t hard code the relation types — they could, in theory, be anything!\r\n\r\nAny idea? I&#39;ve tried using something like `apoc.map.groupMulti`, but this only allows grouping on node properties, not the relationship type.",
      "link": "https://stackoverflow.com/questions/76489680/cypher-group-nodes-by-relation-type",
      "title": "Cypher: group nodes by relation type"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686869682,
          "post_id": 76483469,
          "comment_id": 134861549,
          "link": "https://stackoverflow.com/questions/76483469/recalculating-neo4j-relationships-based-on-chain-of-relationships#comment134861549_76483469"
        },
        {
          "owner": {
            "reputation": 49,
            "user_id": 3834585,
            "user_type": "registered",
            "accept_rate": 100,
            "profile_image": "https://www.gravatar.com/avatar/2fc208922446671623f815c9707a5aa0?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Lucassith",
            "link": "https://stackoverflow.com/users/3834585/lucassith"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686898740,
          "post_id": 76483469,
          "comment_id": 134864230,
          "link": "https://stackoverflow.com/questions/76483469/recalculating-neo4j-relationships-based-on-chain-of-relationships#comment134864230_76483469"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1687543547,
          "post_id": 76483469,
          "comment_id": 134957139,
          "link": "https://stackoverflow.com/questions/76483469/recalculating-neo4j-relationships-based-on-chain-of-relationships#comment134957139_76483469"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1687279308,
          "creation_date": 1687279308,
          "answer_id": 76516805,
          "question_id": 76483469,
          "share_link": "https://stackoverflow.com/a/76516805",
          "body_markdown": "if I get the questions right,\r\n\r\n1. you create :CAN_SEE relations with this query\r\n\r\n    match (u:User)--&gt;(:Territory)&lt;--(:Account)--&gt;(i:Invoice)\r\n    merge (u)-[:CAN_SEE]-&gt;(i)\r\n\r\nMERGE should prevent creation of multiple relations\r\n\r\n2. &amp; 3. if I get you right, in both case, you want to check that the path from user to invoice still exists and delete the CAN_SEE relation if the path is broken. the following query should do that\r\n\r\n    match (u:User)-[r:CAN_SEE]-(i:Invoice) where not exists((u)--&gt;(:Territory)&lt;--(:Account)--&gt;(i))\r\n    delete r\r\n\r\ndo test before applying in production though, I did not test\r\n",
          "link": "https://stackoverflow.com/questions/76483469/recalculating-neo4j-relationships-based-on-chain-of-relationships/76516805#76516805",
          "title": "Recalculating Neo4J relationships based on chain of relationships"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1687309475,
          "last_edit_date": 1687309475,
          "creation_date": 1687306737,
          "answer_id": 76519149,
          "question_id": 76483469,
          "share_link": "https://stackoverflow.com/a/76519149",
          "body_markdown": "I assume that your questions are for updating a graph that already contains the appropriate `CAN_SEE` relationships.\r\n\r\n1. Use the following query to update the graph when a specific account (say, `A1`) is deleted. The query uses [DETACH DELETE](https://neo4j.com/docs/cypher-manual/current/clauses/delete/#delete-a-node-with-all-its-relationships) to delete matching paths and all relationships (including `BELONGS_TO` and `CAN_SEE`) for all deleted nodes.\r\n\r\n       MATCH p=(a:Account)-[:ISSUED]-&gt;(:Invoice)-[:HAS]-&gt;(:InvoiceEntry)\r\n       WHERE a.id = &#39;A2&#39;\r\n       DETACH DELETE p\r\n\r\n2. Use this query to disconnect a user (`U1`) from a territory (`T3`), and to delete all the `CAN_SEE` relationships from that user to all invoices issued by all accounts in the territory:\r\n\r\n       MATCH  (u:User)-[bt:BELONGS_TO]-&gt;(t:Territory)&lt;-[:EXISTS_IN]-(:Account)-[:ISSUED]-&gt;(:Invoice)&lt;-[cs:CAN_SEE]-(u)\r\n       WHERE u.id = &#39;U1&#39; AND t.id = &#39;T3&#39;\r\n       DELETE bt, cs",
          "link": "https://stackoverflow.com/questions/76483469/recalculating-neo4j-relationships-based-on-chain-of-relationships/76519149#76519149",
          "title": "Recalculating Neo4J relationships based on chain of relationships"
        }
      ],
      "owner": {
        "reputation": 49,
        "user_id": 3834585,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://www.gravatar.com/avatar/2fc208922446671623f815c9707a5aa0?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Lucassith",
        "link": "https://stackoverflow.com/users/3834585/lucassith"
      },
      "last_editor": {
        "reputation": 49,
        "user_id": 3834585,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://www.gravatar.com/avatar/2fc208922446671623f815c9707a5aa0?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Lucassith",
        "link": "https://stackoverflow.com/users/3834585/lucassith"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 105,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1687309475,
      "creation_date": 1686844612,
      "last_edit_date": 1687111713,
      "question_id": 76483469,
      "share_link": "https://stackoverflow.com/q/76483469",
      "body_markdown": "I have a long chain of relations:\r\n\r\n```\r\n:User can have multiple :Territory(ies)\r\n:Account can belong in multiple :Territory(ies)\r\n:Account can be assigned to a multiple :User(s)\r\n:Account can have an :Invoice(s)\r\n:Invoice can have an :InvoiceEntry(ies)\r\n```\r\n\r\nTo sum up:\r\n\r\n    :User-[:BELONGS_TO]-&gt;:Territory&lt;-[:EXISTS_IN]-:Account-[:ISSUED]-&gt;:Invoice-[:HAS]-&gt;:InvoiceEntry\r\n\r\nI can simplify the relation to \r\n```\r\n:User-[:CAN_SEE]-&gt;:Invoice\r\n```\r\n\r\nSince I&#39;m not proficient with Cypher, my questions are:\r\n\r\n### Question #1. \r\nWhat would be the query to refresh the relationships between :User and :Invoice once the :Account is being removed from :Territory and leave valid relationships :CAN_SEE untouched.\r\n### Question #2. \r\nSame as above but :User is removed from :Territory and can no longer see :Invoice.\r\n\r\n## UPDATE 16.06.23\r\n\r\nMy primary relation chain is `:User -&gt; :Territory &lt;- :Account -&gt; :Invoice`.&lt;br&gt;\r\n`:User -&gt; :Territory` relation is provided by the Active Directory.&lt;br&gt;\r\n`:Account -&gt; :Territory` and `:Account -&gt; Invoice` relations are fetched from ERP system.\r\n\r\nIn order to avoid costly calculation, because single `:User` can have hundreds of `:Territory` and one `:Account` can be in a hundreds of `:Territory`, I want to introduce a &quot;shortcut&quot; relationship `:User-[:CAN_SEE]-&gt;:Invoice`.\r\n\r\nExample case:\r\n\r\n`U1` belongs to `T1`, `T2`, `T3`.&lt;br&gt;\r\n`A1` exists in `T1`, `T4`.&lt;br&gt;\r\n`A2` exists in `T3`, `T4`.&lt;br&gt;\r\n`A3` exists in `T1`, `T2`, `T4`.&lt;br&gt;\r\n`A1` issued `I1`.&lt;br&gt;\r\n`A2` issued `I2`.&lt;br&gt;\r\n`A3` issued `I3`. &lt;br&gt;\r\n\r\nHere, I would end up having it simplified to:&lt;br&gt;\r\n`U1` can see `I1`, `I2`, `I3`.\r\n\r\n\r\n### Follow-up to Question #1:&lt;br&gt;\r\n\r\nI receive a payload that the ERP detached `A1` and `A3` from `T1`.&lt;br&gt;\r\nI remove `A1-&gt;T1`, `A3-&gt;T1` relationships.&lt;br&gt;\r\nI need to recalculate `[:CAN_SEE]` since U1 loses `[:CAN_SEE]` to `I1` because `U1` to `A1` has no longer valid territory relations. `U1` still can see `I3` because `A3` loses `T1` but `T2` ensures the chain to `I3`.\r\n\r\nHow would the query look like?\r\n\r\n### Follow-up to Question #2:&lt;br&gt;\r\n\r\nActive Directory got updated:&lt;br&gt;\r\n`U1` is detached from `T1`.\r\n`U1` is no longer able to see `I1`.\r\n\r\nHow would the query look like in this situation.\r\n\r\nPutting my questions in another words:\r\n\r\nI know how to create new relationships based on existing ones. I have trouble understanding how to re-invalidate old ones and remove those if no longer valid.",
      "link": "https://stackoverflow.com/questions/76483469/recalculating-neo4j-relationships-based-on-chain-of-relationships",
      "title": "Recalculating Neo4J relationships based on chain of relationships"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1686834761,
          "creation_date": 1686834761,
          "answer_id": 76482862,
          "question_id": 76482665,
          "share_link": "https://stackoverflow.com/a/76482862",
          "body_markdown": "You can use UNWIND which is similar to a WHILE looping in sql.\r\n\r\n    MATCH (a)-[:connection]-(b:labelB)\r\n    WHERE a.id IN $selection\r\n    WITH COLLECT(a) + COLLECT(b) AS selections\r\n    UNWIND selections as selection\r\n    MATCH (selection)-[]-(c)\r\n    RETURN c",
          "link": "https://stackoverflow.com/questions/76482665/combining-two-results-in-cypher/76482862#76482862",
          "title": "Combining two results in cypher"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1686863445,
          "last_edit_date": 1686863445,
          "creation_date": 1686863099,
          "answer_id": 76485499,
          "question_id": 76482665,
          "share_link": "https://stackoverflow.com/a/76485499",
          "body_markdown": "You could also just replace this:\r\n\r\n    MATCH (selection)-[]-(c)\r\n\r\nwith this:\r\n\r\n    MATCH (s)--(c)\r\n    WHERE s IN selection\r\n\r\n*By the way, I should point out that your first query will cause `selection` to have duplicate nodes if it is possible for a `connection` to connect 2 `labelB` nodes.*",
          "link": "https://stackoverflow.com/questions/76482665/combining-two-results-in-cypher/76485499#76485499",
          "title": "Combining two results in cypher"
        }
      ],
      "owner": {
        "reputation": 173,
        "user_id": 10660754,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-p11V2YvoCAo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBOc2ISEmHN1oaZPCLdM5xEzDSe8Q/mo/photo.jpg?sz=256",
        "display_name": "Abdelsalam ElTamawy",
        "link": "https://stackoverflow.com/users/10660754/abdelsalam-eltamawy"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76482862,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1690749071,
      "creation_date": 1686833421,
      "last_edit_date": 1690749071,
      "question_id": 76482665,
      "share_link": "https://stackoverflow.com/q/76482665",
      "body_markdown": "I am trying to combine the result of two `MATCH` statements.\r\nfor example like this\r\n\r\n```\r\nMATCH (a)-[:connection]-(b:labelB)\r\nWHERE a.id IN $selection\r\nWITH COLLECT(a) + COLLECT(b) AS selection\r\n```\r\nHowever, the issue with this is that it produces a list of type `List&lt;node&gt;` instead of `node`. This is an issue because it does not enable another `MATCH` statement using `selection`.\r\nMeaning this would not be possible as a continuation to the query:\r\n```\r\nMATCH (selection)-[]-(c)\r\nRETURN c\r\n```\r\n\r\nThis behavior can be achieved by a `UNION` but it seems to behave unexpectedly when using the result of the first `MATCH` in the second `MATCH`.\r\n\r\n```\r\nMATCH (a)\r\nWHERE a.id IN $selection\r\nRETURN a AS selection\r\nUNION\r\nMATCH (a)-[]-(b)\r\nRETURN b AS selection\r\n``` \r\n\r\nHow can I combine two Nodes into a single value?",
      "link": "https://stackoverflow.com/questions/76482665/combining-two-results-in-cypher",
      "title": "Combining two results in cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 67,
            "user_id": 11027812,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/611e3a84ba086cb39d95abda31095f3c?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Schniddi",
            "link": "https://stackoverflow.com/users/11027812/schniddi"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686819368,
          "post_id": 76480799,
          "comment_id": 134852699,
          "link": "https://stackoverflow.com/questions/76480799/clarification-on-neo4js-performance-good-practice#comment134852699_76480799"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "last_editor": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1686833715,
          "last_edit_date": 1686833715,
          "creation_date": 1686832605,
          "answer_id": 76482549,
          "question_id": 76480799,
          "share_link": "https://stackoverflow.com/a/76482549",
          "body_markdown": "Whenever you execute a query (with `driver.execute_query` or with any session/transaction API), specifying the target database if you know it in advance, is a good idea.\r\n\r\nWhy? Because Neo4j introduced the &quot;home database&quot; concept, which allows different users to have default databases.\r\n\r\nIf you do not not specify what database you target, the driver will first have to communicate with the server to figure out what the home database is for the given user.\r\n\r\nSince the home database can be changed at any time, the driver only caches that information once per session.\r\n\r\nTherefore, you should specify the target database at the session configuration level every time you use a session API, to avoid that resolution process to kick in.\r\n\r\nSince `driver.execute_query` is a facade on session&#39;s retryable transaction APIs (the driver manages the session for you in this case), you also need to specify the database there, if you want the managed session to be properly configured.\r\n\r\nNote: there are ongoing internal discussions to improve the way drivers handle the &quot;home database resolution&quot; issue, so stay tuned for potential improvements in the next releases!",
          "link": "https://stackoverflow.com/questions/76480799/clarification-on-neo4js-performance-good-practice/76482549#76482549",
          "title": "clarification on Neo4j&#39;s performance good practice"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 371,
                "user_id": 917428,
                "user_type": "registered",
                "accept_rate": 43,
                "profile_image": "https://www.gravatar.com/avatar/b285e6be9315c5e12098033044c19e29?s=256&d=identicon&r=PG",
                "display_name": "Ste_95",
                "link": "https://stackoverflow.com/users/917428/ste-95"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1688789094,
              "post_id": 76485346,
              "comment_id": 135124420,
              "link": "https://stackoverflow.com/questions/76480799/clarification-on-neo4js-performance-good-practice/76485346#comment135124420_76485346"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1686861346,
          "creation_date": 1686861346,
          "answer_id": 76485346,
          "question_id": 76480799,
          "share_link": "https://stackoverflow.com/a/76485346",
          "body_markdown": "The documentation could be a bit clearer.\r\n\r\n`driver.execute_query` and `driver.session` actually represent 2 *different ways* to execute queries. You would use one call or the other, but not together.\r\n\r\nIt would have been clearer for the documentation to say something like:\r\n\r\n    # Good practice\r\n    driver.execute_query(&quot;&lt;QUERY&gt;&quot;, database_=&quot;&lt;DB NAME&gt;&quot;)\r\n      OR\r\n    driver.session(database=&quot;&lt;DB NAME&gt;&quot;)\r\n    \r\n    # Bad practice\r\n    driver.execute_query(&quot;&lt;QUERY&gt;&quot;)\r\n      OR\r\n    driver.session()",
          "link": "https://stackoverflow.com/questions/76480799/clarification-on-neo4js-performance-good-practice/76485346#76485346",
          "title": "clarification on Neo4j&#39;s performance good practice"
        }
      ],
      "owner": {
        "reputation": 67,
        "user_id": 11027812,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/611e3a84ba086cb39d95abda31095f3c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Schniddi",
        "link": "https://stackoverflow.com/users/11027812/schniddi"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 73,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76485346,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1686861346,
      "creation_date": 1686819341,
      "question_id": 76480799,
      "share_link": "https://stackoverflow.com/q/76480799",
      "body_markdown": "\r\nThe docs state:\r\n&gt; Specify the target database on all queries, either with the database_ parameter in Driver.execute_query() or with the database parameter when creating new sessions. If no database is provided, the driver has to send an extra request to the server to figure out what the default database is. The overhead is minimal for a single query, but becomes significant over hundreds of queries.\r\n\r\nand gives 2 examples:\r\n\r\n    # Good practice\r\n    driver.execute_query(&quot;&lt;QUERY&gt;&quot;, database_=&quot;&lt;DB NAME&gt;&quot;)\r\n    driver.session(database=&quot;&lt;DB NAME&gt;&quot;)\r\n\r\n    # Bad practice\r\n    driver.execute_query(&quot;&lt;QUERY&gt;&quot;)\r\n    driver.session()\r\n\r\n\r\nDoes that mean that\r\n\r\n    # Good practice\r\n    driver.execute_query(&quot;&lt;QUERY&gt;&quot;, database_=&quot;&lt;DB NAME&gt;&quot;)\r\n    driver.session()\r\n\r\nand this \r\n\r\n    # Good practice\r\n    driver.execute_query(&quot;&lt;QUERY&gt;&quot;)\r\n    driver.session(database=&quot;&lt;DB NAME&gt;&quot;)\r\n\r\nare good practices or should I specify the database name in `execute_query()` **and** `session()`?\r\n",
      "link": "https://stackoverflow.com/questions/76480799/clarification-on-neo4js-performance-good-practice",
      "title": "clarification on Neo4j&#39;s performance good practice"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1686835734,
          "creation_date": 1686835734,
          "answer_id": 76482995,
          "question_id": 76479788,
          "share_link": "https://stackoverflow.com/a/76482995",
          "body_markdown": "You can use an APOC function for this purpose.\r\n\r\n    Line 1 is an illustration when rv is null. Remove it on your actual query\r\n    Line 2 is using the APOC function &#39;do when&#39;\r\n    Line 3 is the condition. if true then run line 4 else line 5\r\n    Line 4 is your true condition\r\n    Line 5 is your false condition\r\n    Line 6 returns the node that you created\r\n\r\n    1    WITH null as rv\r\n    2    CALL apoc.do.when(\r\n    3      rv is not null,\r\n    4      &quot;CREATE (n1:Test1 {name: &#39;Test1&#39;}) RETURN n1&quot;,\r\n    5      &quot;CREATE (n2:Test2 {name: &#39;Test2&#39;}) RETURN n2&quot;) YIELD value \r\n    6    RETURN value",
          "link": "https://stackoverflow.com/questions/76479788/is-there-a-way-to-use-create-and-return-with-cypher-cases/76482995#76482995",
          "title": "Is there a way to use create and return with cypher cases?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1686860567,
          "creation_date": 1686860567,
          "answer_id": 76485267,
          "question_id": 76479788,
          "share_link": "https://stackoverflow.com/a/76485267",
          "body_markdown": "In addition to using [apoc.do.when](https://neo4j.com/labs/apoc/4.2/overview/apoc.do/apoc.do.when/), as suggested by @jose_bacoy, you can use [apoc.create.node](https://neo4j.com/labs/apoc/4.2/overview/apoc.create/apoc.create.node/):\r\n\r\n    ... // prior Cypher that defines rv\r\n    WITH CASE\r\n      WHEN rv IS NULL THEN {l: &#39;Test2&#39;, n: &#39;Test2&#39;}\r\n      ELSE {l: &#39;Test1&#39;, n: &#39;Test1&#39;}\r\n    END AS x\r\n    CALL apoc.create.node([x.l], {name: x.n}) YIELD node AS n\r\n    RETURN n\r\n\r\nOr, if you want to avoid using the APOC library for some reason, you can use a [CALL subquery](https://neo4j.com/docs/cypher-manual/5/clauses/call-subquery/) in neo4j 4.1+:\r\n\r\n    ... // prior Cypher that defines rv\r\n    CALL {\r\n        WITH rv\r\n        WITH rv WHERE rv IS NOT NULL\r\n        CREATE (n:Test1 {name: &quot;Test1&quot;})\r\n        RETURN n\r\n    \r\n        UNION\r\n    \r\n        WITH rv\r\n        WITH rv WHERE rv IS NULL\r\n        CREATE (n:Test2 {name: &#39;Test2&#39;})\r\n        RETURN n\r\n    }\r\n    RETURN n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/76479788/is-there-a-way-to-use-create-and-return-with-cypher-cases/76485267#76485267",
          "title": "Is there a way to use create and return with cypher cases?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 19667770,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3ada88f655ae627181fbf7abe44e0d85?s=256&d=identicon&r=PG",
        "display_name": "Batoul Alsayyed",
        "link": "https://stackoverflow.com/users/19667770/batoul-alsayyed"
      },
      "last_editor": {
        "reputation": 9094,
        "user_id": 12368154,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Charchit Kapoor",
        "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 28,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1686860567,
      "creation_date": 1686811404,
      "last_edit_date": 1686827474,
      "question_id": 76479788,
      "share_link": "https://stackoverflow.com/q/76479788",
      "body_markdown": "I am trying to create node n1 when rv exists and n2 in case not, I declared a variable flag if rv exists. I want to return n1 in case of flag true and n2 in case of false.\r\n\r\nHereby my code:\r\n\r\n    WITH rv IS NOT NULL AS flag\r\n    WHERE flag\r\n    CREATE (n1:Test1 {name: &quot;Test1&quot;})\r\n    Return n1\r\n    \r\n    WITH flag\r\n    WHERE NOT flag\r\n    CREATE (n2:Test2 {name: &quot;Test2&quot;})\r\n    Return n2 \r\n\r\n",
      "link": "https://stackoverflow.com/questions/76479788/is-there-a-way-to-use-create-and-return-with-cypher-cases",
      "title": "Is there a way to use create and return with cypher cases?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "last_editor": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "comment_count": 0,
          "down_vote_count": 1,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1686753285,
          "last_edit_date": 1686753285,
          "creation_date": 1686733578,
          "answer_id": 76471849,
          "question_id": 76471684,
          "share_link": "https://stackoverflow.com/a/76471849",
          "body_markdown": "Persisting nested properties [is not supported by Neo4j][1] so what you describe is not feasible.\r\n\r\nInstead of nesting properties, you can define an extra node and link it to the original node with a relationship.\r\nAlternatively, you can &quot;flatten&quot; the nested properties to a non-nested dictionary of properties.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/getting-started/appendix/graphdb-concepts/#graphdb-properties",
          "link": "https://stackoverflow.com/questions/76471684/is-there-a-way-to-have-neo4j-cypher-place-constraint-on-a-nested-property/76471849#76471849",
          "title": "Is there a way to have neo4j / cypher place constraint on a nested property?"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 5777079,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/aa40c27a968e034fc57fabed9ce0259d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Shaurya Gupta",
        "link": "https://stackoverflow.com/users/5777079/shaurya-gupta"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76471849,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1686771296,
      "creation_date": 1686732400,
      "last_edit_date": 1686771296,
      "question_id": 76471684,
      "share_link": "https://stackoverflow.com/q/76471684",
      "body_markdown": "I want to put a uniqueness constraint on value.path, how can I do it ?\r\n\r\n```\r\n{\r\n  &quot;identity&quot;: 16866,\r\n  &quot;labels&quot;: [\r\n    &quot;Component&quot;\r\n  ],\r\n  &quot;properties&quot;: {\r\n    &quot;asset_id&quot;: &quot;&quot;,\r\n    &quot;id&quot;: &quot;ComponentIdentity&quot;,\r\n    &quot;version&quot;: &quot;#head&quot;,\r\n    &quot;value&quot;: &quot;{\r\n            &quot;id&quot;: &quot;f75cb59f-85ce-4247-979a-c8c8784b98d4&quot;,\r\n            &quot;path&quot;: &quot;interactions.json&quot;\r\n        }&quot;\r\n  },\r\n  &quot;elementId&quot;: &quot;16866&quot;\r\n}\r\n```\r\n\r\nI have tried\r\n\r\n```\r\nCREATE CONSTRAINT ComponentPathUniqueness IF NOT EXISTS\r\nFOR (n:Component)\r\nREQUIRE n.value.path IS NODE UNIQUE\r\n```\r\n\r\nBut it fails with Invalid input &#39;.&#39;",
      "link": "https://stackoverflow.com/questions/76471684/is-there-a-way-to-have-neo4j-cypher-place-constraint-on-a-nested-property",
      "title": "Is there a way to have neo4j / cypher place constraint on a nested property?"
    },
    {
      "tags": ["cypher", "opencypher", "redisgraph"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1686680245,
          "creation_date": 1686680245,
          "answer_id": 76467684,
          "question_id": 76465447,
          "share_link": "https://stackoverflow.com/a/76467684",
          "body_markdown": "### Explanation\r\n\r\nRedisgraph only covers a [subset of the Cypher language](https://redis.io/docs/stack/graph/cypher_support/), called [openCypher](https://opencypher.org/).\r\n\r\nThe [openCypher language spec](https://s3.amazonaws.com/artifacts.opencypher.org/openCypher9.pdf) states:\r\n\r\n&gt;`exists()` returns true if the specified property exists in the node, relationship or map.\r\n\r\nTherefore, in `openCypher` the `EXISTS()` function only supports testing for property existence, and does not support testing for the existence of paths.\r\n\r\n### Workaround\r\n\r\nThe workaround at the bottom of your question does work, but it requires the server to find all matches before returning. For efficiency you want the query to return as soon the first match is found (if any). Here is a modified version of your workaround that does that:\r\n\r\n    MATCH (:DataProduct {name: &#39;DataProduct1&#39;})-[:CONTAINS]-&gt;(:Table {name: &#39;output_table&#39;})-[:HAS_COLUMN]-&gt;(:Column {name: &#39;foo&#39;})-[:TRANSFORMATION]-&gt;(t)\r\n    WITH t\r\n    LIMIT 1\r\n    RETURN COUNT(*) &gt; 0\r\n",
          "link": "https://stackoverflow.com/questions/76465447/exists-function-in-redisgraph/76467684#76467684",
          "title": "Exists function in RedisGraph"
        }
      ],
      "owner": {
        "reputation": 3093,
        "user_id": 718849,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://www.gravatar.com/avatar/e60330cbf169096be1c83cfdc7219ec9?s=256&d=identicon&r=PG",
        "display_name": "Jonck van der Kogel",
        "link": "https://stackoverflow.com/users/718849/jonck-van-der-kogel"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76467684,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1686680245,
      "creation_date": 1686662712,
      "last_edit_date": 1686678858,
      "question_id": 76465447,
      "share_link": "https://stackoverflow.com/q/76465447",
      "body_markdown": "I have a cypher query that works as expected in Neo4j but is failing for me in RedisGraph. \r\n\r\nSo I have a query like this:\r\n\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct1&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;output_table&#39;})-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;foo&#39;})\r\n    RETURN exists((c)-[:TRANSFORMATION]-&gt;())\r\n\r\nIf column c does not have an outgoing TRANSFORMATION relationship I expect this query to return false. However, in RedisGraph this seems to return true always if the first part of the query matches.\r\n\r\nTo replicate, run the following cypher:\r\n\r\n    MERGE (dp:DataProduct {name: &#39;DataProduct1&#39;}) RETURN dp\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct1&#39;}) MERGE (dp)-[:CONTAINS]-&gt;(t:Table {name: &#39;output_table&#39;})\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct1&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;output_table&#39;}) MERGE (t)-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;foo&#39;})\r\n    \r\n    MERGE (dp:DataProduct {name: &#39;DataProduct2&#39;}) RETURN dp\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct2&#39;}) MERGE (dp)-[:CONTAINS]-&gt;(t:Table {name: &#39;input_table&#39;})\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct2&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;input_table&#39;}) MERGE (t)-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;bar&#39;})\r\n    \r\n    MATCH (sourceDp:DataProduct {name: &#39;DataProduct2&#39;})-[:CONTAINS]-&gt;(sourceT:Table {name: &#39;input_table&#39;})-[:HAS_COLUMN]-&gt;(sourceC:Column {name: &#39;bar&#39;})\r\n    MATCH (targetDp:DataProduct {name: &#39;DataProduct1&#39;})-[:CONTAINS]-&gt;(targetT:Table {name: &#39;output_table&#39;})-[:HAS_COLUMN]-&gt;(targetC:Column {name: &#39;foo&#39;})\r\n    MERGE (sourceC)-[r:TRANSFORMATION]-&gt;(targetC)\r\n    SET r.type = &#39;function&#39;,\r\n    r.code = &#39;CONCAT(foo and bar)&#39;\r\n\r\nThis results in this graph:\r\n[![sample graph][1]][1]\r\n\r\nSo with this data setup, I would expect this query to return true:\r\n\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct2&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;input_table&#39;})-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;bar&#39;})\r\n    RETURN exists((c)-[:TRANSFORMATION]-&gt;())\r\n\r\nAnd this query to return false:\r\n\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct1&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;output_table&#39;})-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;foo&#39;})\r\n    RETURN exists((c)-[:TRANSFORMATION]-&gt;())\r\n\r\nHowever, in RedisGraph both return true. In fact if you create some unconnected nodes it even returns true:\r\n\r\n    MERGE (dp:DataProduct {name: &#39;DataProduct3&#39;}) RETURN dp\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct3&#39;}) MERGE (dp)-[:CONTAINS]-&gt;(t:Table {name: &#39;whatever&#39;})\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct3&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;whatever&#39;}) MERGE (t)-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;foobar&#39;})\r\n\r\nSo here foobar has neither an incoming nor an outgoing TRANSFORMATION relationship. But still this query returns true:\r\n\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct3&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;whatever&#39;})-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;foobar&#39;})\r\n    RETURN exists((c)-[:TRANSFORMATION]-&gt;())\r\n\r\nAny idea what I am doing wrong?\r\n\r\nEDIT:\r\nI have rewritten the query to use count() instead of exists(), this seems to work. Still interested in how to use exists correctly, but just wanted to add this in case anyone out there is running into the same problem.\r\n\r\n    MATCH (dp:DataProduct {name: &#39;DataProduct1&#39;})-[:CONTAINS]-&gt;(t:Table {name: &#39;output_table&#39;})-[:HAS_COLUMN]-&gt;(c:Column {name: &#39;foo&#39;})-[:TRANSFORMATION]-&gt;() RETURN COUNT(dp) &gt; 0\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hsY7U.png",
      "link": "https://stackoverflow.com/questions/76465447/exists-function-in-redisgraph",
      "title": "Exists function in RedisGraph"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686654030,
          "post_id": 76464135,
          "comment_id": 134825617,
          "link": "https://stackoverflow.com/questions/76464135/conditional-return-in-cypher-query#comment134825617_76464135"
        },
        {
          "owner": {
            "reputation": 3,
            "user_id": 8220115,
            "user_type": "registered",
            "profile_image": "https://lh6.googleusercontent.com/-jwbNVHB9xb0/AAAAAAAAAAI/AAAAAAAABgw/PYht8OP_muM/photo.jpg?sz=256",
            "display_name": "Yuval Kobel",
            "link": "https://stackoverflow.com/users/8220115/yuval-kobel"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686657568,
          "post_id": 76464135,
          "comment_id": 134826389,
          "link": "https://stackoverflow.com/questions/76464135/conditional-return-in-cypher-query#comment134826389_76464135"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1686667183,
          "creation_date": 1686667183,
          "answer_id": 76466082,
          "question_id": 76464135,
          "share_link": "https://stackoverflow.com/a/76466082",
          "body_markdown": "You can break down the query and use `OPTIONAL MATCH` like this:\r\n\r\n    MATCH (asset_data:Asset)&lt;-[metadata:MD]-(:RawData)\r\n    OPTIONAL MATCH (group_data:Group)-[]-&gt;(asset_data)\r\n    RETURN group_data, asset_data, metadata",
          "link": "https://stackoverflow.com/questions/76464135/conditional-return-in-cypher-query/76466082#76466082",
          "title": "Conditional return in cypher query"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 8220115,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-jwbNVHB9xb0/AAAAAAAAAAI/AAAAAAAABgw/PYht8OP_muM/photo.jpg?sz=256",
        "display_name": "Yuval Kobel",
        "link": "https://stackoverflow.com/users/8220115/yuval-kobel"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 42,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1690749083,
      "creation_date": 1686653414,
      "last_edit_date": 1690749083,
      "question_id": 76464135,
      "share_link": "https://stackoverflow.com/q/76464135",
      "body_markdown": "I have the following cypher query:\r\n\r\n`MATCH (group_data:Group)-[]-&gt;(asset_data:Asset)&lt;-[metadata:MD]-(:RawData) RETURN group_data, asset_data, metadata`\r\n\r\nbut, in some cases, Asset node is not connected to any Group node. I still want to get in this case the aseet_data and the metadata.\r\n\r\nthanks!!\r\n",
      "link": "https://stackoverflow.com/questions/76464135/conditional-return-in-cypher-query",
      "title": "Conditional return in cypher query"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686240422,
          "post_id": 76433557,
          "comment_id": 134775131,
          "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database#comment134775131_76433557"
        },
        {
          "owner": {
            "reputation": 576,
            "user_id": 3394776,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/1tCy1.jpg?s=256&g=1",
            "display_name": "sam sergiy klok",
            "link": "https://stackoverflow.com/users/3394776/sam-sergiy-klok"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686257064,
          "post_id": 76433557,
          "comment_id": 134778115,
          "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database#comment134778115_76433557"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 576,
                "user_id": 3394776,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/1tCy1.jpg?s=256&g=1",
                "display_name": "sam sergiy klok",
                "link": "https://stackoverflow.com/users/3394776/sam-sergiy-klok"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686257512,
              "post_id": 76434758,
              "comment_id": 134778183,
              "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database/76434758#comment134778183_76434758"
            },
            {
              "owner": {
                "reputation": 576,
                "user_id": 3394776,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/1tCy1.jpg?s=256&g=1",
                "display_name": "sam sergiy klok",
                "link": "https://stackoverflow.com/users/3394776/sam-sergiy-klok"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686258086,
              "post_id": 76434758,
              "comment_id": 134778282,
              "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database/76434758#comment134778282_76434758"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 576,
                "user_id": 3394776,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/1tCy1.jpg?s=256&g=1",
                "display_name": "sam sergiy klok",
                "link": "https://stackoverflow.com/users/3394776/sam-sergiy-klok"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686332834,
              "post_id": 76434758,
              "comment_id": 134789476,
              "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database/76434758#comment134789476_76434758"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1686261693,
          "last_edit_date": 1686261693,
          "creation_date": 1686249100,
          "answer_id": 76434758,
          "question_id": 76433557,
          "share_link": "https://stackoverflow.com/a/76434758",
          "body_markdown": "[UPDATED]\r\n\r\nThis will return the number nodes for each name:\r\n\r\n    MATCH (b:Book)\r\n    RETURN b.Name AS name, COUNT(*) AS book_count",
          "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database/76434758#76434758",
          "title": "count nodes per property neo4j database"
        }
      ],
      "owner": {
        "reputation": 576,
        "user_id": 3394776,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/1tCy1.jpg?s=256&g=1",
        "display_name": "sam sergiy klok",
        "link": "https://stackoverflow.com/users/3394776/sam-sergiy-klok"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 54,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76434758,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1690749103,
      "creation_date": 1686238780,
      "last_edit_date": 1690749103,
      "question_id": 76433557,
      "share_link": "https://stackoverflow.com/q/76433557",
      "body_markdown": "I have nodes, called Book. Each node have property Name (owner&#39;s name). It&#39;s not a lot of names, a lot of books. How to run aggregate query of all Names, and book quantity per Name?\r\n\r\n    Name Book_Count\r\n    Sam  55\r\n    John 12\r\n\r\nDatabase version: 3.5",
      "link": "https://stackoverflow.com/questions/76433557/count-nodes-per-property-neo4j-database",
      "title": "count nodes per property neo4j database"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 2,
          "creation_date": 1686220136,
          "post_id": 76428442,
          "comment_id": 134770474,
          "link": "https://stackoverflow.com/questions/76428442/why-are-neo4j-browser-returning-different-elementids-on-the-same-nodes#comment134770474_76428442"
        },
        {
          "owner": {
            "reputation": 143,
            "user_id": 1027826,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/9f2c9376a1f561092dc3086a381a64f8?s=256&d=identicon&r=PG",
            "display_name": "Kasper",
            "link": "https://stackoverflow.com/users/1027826/kasper"
          },
          "reply_to_user": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686293433,
          "post_id": 76428442,
          "comment_id": 134781715,
          "link": "https://stackoverflow.com/questions/76428442/why-are-neo4j-browser-returning-different-elementids-on-the-same-nodes#comment134781715_76428442"
        },
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686301151,
          "post_id": 76428442,
          "comment_id": 134783054,
          "link": "https://stackoverflow.com/questions/76428442/why-are-neo4j-browser-returning-different-elementids-on-the-same-nodes#comment134783054_76428442"
        },
        {
          "owner": {
            "reputation": 143,
            "user_id": 1027826,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/9f2c9376a1f561092dc3086a381a64f8?s=256&d=identicon&r=PG",
            "display_name": "Kasper",
            "link": "https://stackoverflow.com/users/1027826/kasper"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686339212,
          "post_id": 76428442,
          "comment_id": 134790508,
          "link": "https://stackoverflow.com/questions/76428442/why-are-neo4j-browser-returning-different-elementids-on-the-same-nodes#comment134790508_76428442"
        }
      ],
      "owner": {
        "reputation": 143,
        "user_id": 1027826,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9f2c9376a1f561092dc3086a381a64f8?s=256&d=identicon&r=PG",
        "display_name": "Kasper",
        "link": "https://stackoverflow.com/users/1027826/kasper"
      },
      "last_editor": {
        "reputation": 143,
        "user_id": 1027826,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9f2c9376a1f561092dc3086a381a64f8?s=256&d=identicon&r=PG",
        "display_name": "Kasper",
        "link": "https://stackoverflow.com/users/1027826/kasper"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 175,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "answer_count": 0,
      "score": 2,
      "last_activity_date": 1686241185,
      "creation_date": 1686195031,
      "last_edit_date": 1686195334,
      "question_id": 76428442,
      "share_link": "https://stackoverflow.com/q/76428442",
      "body_markdown": "Why are neo4j browser returning different elementId&#39;s on the same nodes?\r\n\r\nFor example;\r\n\r\n```cypher\r\nMATCH (a)\r\nRETURN elementId(a)\r\n```\r\n\r\nreturns something like;\r\n\r\n - &quot;4:03bd44da-415d-4ed9-a682-7510a61bc8e3:0&quot;\r\n - &quot;4:03bd44da-415d-4ed9-a682-7510a61bc8e3:1&quot;\r\n - &quot;4:03bd44da-415d-4ed9-a682-7510a61bc8e3:2&quot;\r\n - &quot;4:03bd44da-415d-4ed9-a682-7510a61bc8e3:3&quot;\r\n\r\nwhereas;\r\n\r\n```cypher\r\nMATCH (a)\r\nRETURN a\r\n```\r\n\r\nreturns this;\r\n\r\n```\r\n{\r\n  &quot;identity&quot;: 0,\r\n  &quot;labels&quot;: [\r\n    &quot;SomeLabel&quot;\r\n  ],\r\n  &quot;properties&quot;: {\r\n    &quot;SomeProperty&quot;: &quot;Blah&quot;,\r\n  },\r\n  &quot;elementId&quot;: &quot;0&quot;\r\n}\r\n```\r\n\r\nFor example &quot;4:03bd44da-415d-4ed9-a682-7510a61bc8e3:0&quot; vs &quot;0&quot;.\r\n\r\nI would expect the same elementId string.",
      "link": "https://stackoverflow.com/questions/76428442/why-are-neo4j-browser-returning-different-elementids-on-the-same-nodes",
      "title": "Why are neo4j browser returning different elementId&#39;s on the same nodes?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686190855,
          "post_id": 76427321,
          "comment_id": 134766379,
          "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j#comment134766379_76427321"
        },
        {
          "owner": {
            "reputation": 1489,
            "user_id": 8081281,
            "user_type": "registered",
            "accept_rate": 100,
            "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "utkarsh31",
            "link": "https://stackoverflow.com/users/8081281/utkarsh31"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686196420,
          "post_id": 76427321,
          "comment_id": 134766828,
          "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j#comment134766828_76427321"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686716271,
              "post_id": 76434142,
              "comment_id": 134835705,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#comment134835705_76434142"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686744135,
              "post_id": 76434142,
              "comment_id": 134840634,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#comment134840634_76434142"
            },
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686762991,
              "post_id": 76434142,
              "comment_id": 134845130,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#comment134845130_76434142"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686769716,
              "post_id": 76434142,
              "comment_id": 134846317,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#comment134846317_76434142"
            },
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686817900,
              "post_id": 76434142,
              "comment_id": 134852407,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#comment134852407_76434142"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686855050,
              "post_id": 76434142,
              "comment_id": 134859195,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#comment134859195_76434142"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "last_editor": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1686748356,
          "last_edit_date": 1686748356,
          "creation_date": 1686243466,
          "answer_id": 76434142,
          "question_id": 76427321,
          "share_link": "https://stackoverflow.com/a/76434142",
          "body_markdown": "The simplest thing to do is just traverse the graph with variable path length:\r\n\r\n```\r\nmatch path = (s)-[*..9]-&gt;()--&gt;(e)\r\nwhere s:X4 and s:TYPE2 and e:ROOT\r\nwith [n in nodes(path) where n &lt;&gt; e | n] as parentnodes\r\nreturn parentnodes\r\n```\r\nVariable path length can make the query explode, especially if you have supernodes. If you have a fairly balanced tree structure like in your diagram, this may be okay.\r\n\r\nUPDATE:\r\nThis will make it so you don&#39;t need to know the label on the root node:\r\n```\r\nmatch path = (s)-[*..9]-&gt;()--&gt;(e)\r\nwhere s:X4 and S:TYPE2 and not (e)-&gt;()\r\nwith [n in nodes(path) where n &lt;&gt; e | n] as parentnodes\r\nreturn parentnodes\r\n```",
          "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434142#76434142",
          "title": "Recursively find all parent nodes for a given node in neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686716163,
              "post_id": 76434660,
              "comment_id": 134835700,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134835700_76434660"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686769810,
              "post_id": 76434660,
              "comment_id": 134846334,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134846334_76434660"
            },
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686817301,
              "post_id": 76434660,
              "comment_id": 134852282,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134852282_76434660"
            },
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686817671,
              "post_id": 76434660,
              "comment_id": 134852360,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134852360_76434660"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686854468,
              "post_id": 76434660,
              "comment_id": 134859090,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134859090_76434660"
            },
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686895221,
              "post_id": 76434660,
              "comment_id": 134863701,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134863701_76434660"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686940202,
              "post_id": 76434660,
              "comment_id": 134872699,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134872699_76434660"
            },
            {
              "owner": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686979002,
              "post_id": 76434660,
              "comment_id": 134876101,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134876101_76434660"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1489,
                "user_id": 8081281,
                "user_type": "registered",
                "accept_rate": 100,
                "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "utkarsh31",
                "link": "https://stackoverflow.com/users/8081281/utkarsh31"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687283878,
              "post_id": 76434660,
              "comment_id": 134914132,
              "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#comment134914132_76434660"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 9,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1687284174,
          "last_edit_date": 1687284174,
          "creation_date": 1686248172,
          "answer_id": 76434660,
          "question_id": 76427321,
          "share_link": "https://stackoverflow.com/a/76434660",
          "body_markdown": "[UPDATED]\r\n\r\nThis query will return all distinct `ancestor` nodes by following all outbound relationships starting at a given `n` node, excluding any node that has no outbound relationships.\r\n\r\n    ... // (prior Cypher providing n)\r\n\r\n    MATCH p = (n)-[*..8]-&gt;(root)\r\n    WHERE NOT EXISTS((root)--&gt;())\r\n    UNWIND NODES(p)[1..-1] AS ancestor\r\n    RETURN DISTINCT ancestor\r\n\r\nThis query also puts an upper bound on the [variable length pattern](https://neo4j.com/docs/cypher-manual/current/syntax/patterns/#cypher-pattern-varlength) to avoid taking forever or running out of memory.\r\n\r\nThe `x[1..-1]` syntax specifies a sublist of `x` consisting of its second element up to and including its next-to-last element. *(The [documentation](https://neo4j.com/docs/cypher-manual/current/values-and-types/lists/#_list_range_and_size) is a bit misleading, as it concentrates on the `range()` function, whereas specifying a sublist does not depend on using the `range()` function at all. The 2 concepts should have been covered separately.)*",
          "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j/76434660#76434660",
          "title": "Recursively find all parent nodes for a given node in neo4j"
        }
      ],
      "owner": {
        "reputation": 1489,
        "user_id": 8081281,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://www.gravatar.com/avatar/586466516791b37c67c1e7ebb95c3501?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "utkarsh31",
        "link": "https://stackoverflow.com/users/8081281/utkarsh31"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 231,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76434660,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1687284174,
      "creation_date": 1686174712,
      "last_edit_date": 1686191112,
      "question_id": 76427321,
      "share_link": "https://stackoverflow.com/q/76427321",
      "body_markdown": "I want to write a cypher query where given a node X, it gives all the parent nodes for that given node until I find the root node which has the type attribute as ROOT.\r\n\r\nAs an example, I have attached below image where my RootNode is the main parent node and it has attribute *{type: &quot;ROOT&quot;}*.\r\n\r\n[![enter image description here][1]][1]\r\n&gt; **Example1:** Find all parent nodes for a node with label *TYPE2:X3*\r\nFrom the graph we can see, TYPE2:X3 has one parent nodes TYPE2:X1. Now TYPE2:X1 has two parents TYPE1:T1 and RootNode. Recursively, finding parent of TYPE1:T1 which is RootNode. Hence, the answer will be **TYPE1:T1 and TYPE2:X1**\r\n\r\n&gt; **Example2:** Find all parent nodes for a node with label *TYPE2:X4*\r\nFrom the graph we can see, TYPE2:X4 has 4 parent nodes \r\n**TYPE1:T1, TYPE2:X1, TYPE2:X2, TYPE1:T2** who all have parent as RootNode so the answer will be these 4 nodes.\r\n\r\nPlease note that my graph can have upto 10 level of parent nodes like this. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9lrKl.png",
      "link": "https://stackoverflow.com/questions/76427321/recursively-find-all-parent-nodes-for-a-given-node-in-neo4j",
      "title": "Recursively find all parent nodes for a given node in neo4j"
    },
    {
      "tags": ["python", "java", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686243818,
          "post_id": 76417047,
          "comment_id": 134775827,
          "link": "https://stackoverflow.com/questions/76417047/issue-with-calling-graphsage-neo4j-graph-embedding-method-from-python-driver#comment134775827_76417047"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22031477,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtd8sxsqZw5lCDir2DcBKGGVJwELQZUIkAeC1Jip=k-s256",
        "display_name": "user22031477",
        "link": "https://stackoverflow.com/users/22031477/user22031477"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 22031477,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtd8sxsqZw5lCDir2DcBKGGVJwELQZUIkAeC1Jip=k-s256",
        "display_name": "user22031477",
        "link": "https://stackoverflow.com/users/22031477/user22031477"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 78,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1686210334,
      "creation_date": 1686072306,
      "last_edit_date": 1686210334,
      "question_id": 76417047,
      "share_link": "https://stackoverflow.com/q/76417047",
      "body_markdown": "I try to call **GraphSage Neo4j GDS** method using **python**. The goal is to perform nodes embedding of an in-memory projected graph. I runned this part of the code: \r\n\r\n    query = &quot;&quot;&quot;CALL gds.beta.graphSage.train(\r\n      &#39;ExperimentsConditionNeighborhood&#39;,\r\n      {\r\n        modelName: &#39;multiLabelModel1&#39;,\r\n        featureProperties: [&#39;final_prot_interet&#39;, &#39;pH&#39;, &#39;temperature&#39;, &#39;glucose&#39;],\r\n        projectedFeatureDimension: 22,\r\n        embeddingDimension: 4,\r\n        randomSeed: 19,\r\n        searchDepth: 2,\r\n        epochs: 25,\r\n       learningrate: 0.001,\r\n       batchSize:30,\r\n       aggregator: &#39;MEAN&#39;,\r\n       sampleSizes: [25, 10],\r\n       activationFunction: &#39;ReLu&#39;,\r\n       tolerance: 1e-5\r\n      }\r\n    )&quot;&quot;&quot;\r\n\r\n    conn.query(query, db=db)\r\n\r\nI got the following error:\r\n\r\n    Query failed: {code: Neo.ClientError.Procedure.ProcedureCallFailed} {message: Failed to invoke procedure `gds.beta.graphSage.train`: Caused by: java.lang.IllegalStateException: No more running tasks}\r\n\r\nAny help on that ? \r\n\r\nI found some answers in Java framework, since the error seems to be generated by the Neo4J JVM. But in my case I need a fix on python. \r\n\r\nJust a remark: \r\nThis error message does not appear when I reduce the number of featureProperties. ",
      "link": "https://stackoverflow.com/questions/76417047/issue-with-calling-graphsage-neo4j-graph-embedding-method-from-python-driver",
      "title": "Issue with calling GraphSage Neo4j graph embedding method from python driver"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686244628,
          "post_id": 76416046,
          "comment_id": 134775980,
          "link": "https://stackoverflow.com/questions/76416046/find-graphs-in-db-that-are-subgraphs-of-an-input-graph#comment134775980_76416046"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 19794631,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/edf5353bc0a94aa704a4004072f599e7?s=256&d=identicon&r=PG",
                "display_name": "Thesaurus",
                "link": "https://stackoverflow.com/users/19794631/thesaurus"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686133068,
              "post_id": 76416921,
              "comment_id": 134756247,
              "link": "https://stackoverflow.com/questions/76416046/find-graphs-in-db-that-are-subgraphs-of-an-input-graph/76416921#comment134756247_76416921"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1686071153,
          "creation_date": 1686071153,
          "answer_id": 76416921,
          "question_id": 76416046,
          "share_link": "https://stackoverflow.com/a/76416921",
          "body_markdown": "If I understand your question: your DB has a million nodes without any relationships and you want to provide input data to add relationships between those nodes.\r\n\r\nHere is a simple example of how to do that.\r\n\r\nI assume your nodes all look something like this (where the `id` is unique):\r\n\r\n    (:Foo {id: &quot;a&quot;, x: 123, ... and so forth ...})\r\n\r\nand you want to connect the appropriate `Foo` nodes with `BAR` relationships. In this simple example, the relationships have no properties.\r\n\r\nI also assume your input is in a CSV file named &quot;bar_data.csv&quot; whose beginning looks like this (`start`/`end` are the the `id`s of each new `BAR` relationship&#39;s start/end nodes):\r\n\r\n    start,end\r\n    a,b\r\n    b,x\r\n    j,w\r\n    ... and so forth ...\r\n\r\nHere is a sample Cypher query to load the input CSV file and create the relationships (in batches of 20000 per transaction, to avoid running out of server resources). You can tweak the batch size.\r\n\r\n    :auto // :auto line is needed when using IN TRANSACTIONS option in Neo4j Browser\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///bar_data.csv&#39; AS row\r\n    CALL {\r\n      WITH row\r\n      MATCH (start:Foo), (end:Foo)\r\n      WHERE start.id = row.start AND end.is = row.end\r\n      CREATE (start)-[:BAR]-&gt;(end)\r\n    } IN TRANSACTIONS OF 20000 ROWS\r\n\r\nYou will need to read the [LOAD CSV](https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/) documentation to see how to configure the server, where the file can be stored, what the file URL can look like, and so forth.\r\n\r\nAlso the query will run *much faster* if you have an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) or [uniqueness constraint](https://neo4j.com/docs/cypher-manual/current/constraints/) on `:Foo(id)`.",
          "link": "https://stackoverflow.com/questions/76416046/find-graphs-in-db-that-are-subgraphs-of-an-input-graph/76416921#76416921",
          "title": "Find graphs in DB that are subgraphs of an input graph"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 19794631,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/edf5353bc0a94aa704a4004072f599e7?s=256&d=identicon&r=PG",
        "display_name": "Thesaurus",
        "link": "https://stackoverflow.com/users/19794631/thesaurus"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 22,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1686158421,
      "creation_date": 1686064209,
      "last_edit_date": 1686158421,
      "question_id": 76416046,
      "share_link": "https://stackoverflow.com/q/76416046",
      "body_markdown": "I have 1,000,000 small unrelated graphs in my Neo4j DB. I&#39;d like to input a big graph (as lists of nodes and relationships) and find my unrelated graphs as subgraph of the big graph.\r\n\r\nAre there any function or approaches in Cypher (Neo4j) which can simplify this for me? Thanks.\r\n\r\n[UPDATE]\r\n\r\nHere is an example with 2 graphs in the DB, and a submitted input graph. So, how can I find Graph 1 (from picture) in submitted graph?\r\n\r\n![enter image description here][1]\r\n\r\n  [1]: https://i.stack.imgur.com/0E07D.png",
      "link": "https://stackoverflow.com/questions/76416046/find-graphs-in-db-that-are-subgraphs-of-an-input-graph",
      "title": "Find graphs in DB that are subgraphs of an input graph"
    },
    {
      "tags": ["spring-boot", "neo4j", "cypher", "spring-data-neo4j"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 121,
                "user_id": 15354138,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/SMud3.jpg?s=256&g=1",
                "display_name": "sdm4n",
                "link": "https://stackoverflow.com/users/15354138/sdm4n"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686122918,
              "post_id": 76417428,
              "comment_id": 134754168,
              "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0/76417428#comment134754168_76417428"
            },
            {
              "owner": {
                "reputation": 121,
                "user_id": 15354138,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/SMud3.jpg?s=256&g=1",
                "display_name": "sdm4n",
                "link": "https://stackoverflow.com/users/15354138/sdm4n"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1687253565,
              "post_id": 76417428,
              "comment_id": 134907257,
              "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0/76417428#comment134907257_76417428"
            },
            {
              "owner": {
                "reputation": 46,
                "user_id": 9397755,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
                "display_name": "Jennifer Reif",
                "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
              },
              "reply_to_user": {
                "reputation": 121,
                "user_id": 15354138,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/SMud3.jpg?s=256&g=1",
                "display_name": "sdm4n",
                "link": "https://stackoverflow.com/users/15354138/sdm4n"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1691185887,
              "post_id": 76417428,
              "comment_id": 135463118,
              "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0/76417428#comment135463118_76417428"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "last_editor": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1687883070,
          "last_edit_date": 1687883070,
          "creation_date": 1686075836,
          "answer_id": 76417428,
          "question_id": 76406516,
          "share_link": "https://stackoverflow.com/a/76417428",
          "body_markdown": "I think this relates to this [issue](https://github.com/spring-projects/spring-data-neo4j/issues/2728) with Spring Boot 3.1.0 and Spring Data Neo4j that is waiting for a fix release. You can add the below section of code to the configuration/SpringBootApplication class. It should be fixed once the updated release is published.\r\n\r\n    @Bean\r\n    public Configuration cypherDslConfiguration() {\r\n        return Configuration.newConfig()\r\n            .withDialect(Dialect.NEO4J_5)\r\n            .build();\r\n    }\r\n\r\n*Update Jun27: The issue is actually due to a problem with the map projection returned in the custom queries. It has been resolved with a fix. More information is available in the [Github thread][1].\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-neo4j/issues/2749",
          "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0/76417428#76417428",
          "title": "Error mapping node with custom CYPHER RETURN leaving out relations in SDN 7.1.0"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": -1,
                "user_type": "moderator",
                "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
                "display_name": "Community",
                "link": "https://stackoverflow.com/users/-1/community"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706669753,
              "post_id": 77882414,
              "comment_id": 137353100,
              "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0/77882414#comment137353100_77882414"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 3665204,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/az9bZ.jpg?s=256&g=1",
            "display_name": "Antony Delgado",
            "link": "https://stackoverflow.com/users/3665204/antony-delgado"
          },
          "last_editor": {
            "reputation": 1,
            "user_id": 3665204,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/az9bZ.jpg?s=256&g=1",
            "display_name": "Antony Delgado",
            "link": "https://stackoverflow.com/users/3665204/antony-delgado"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706210261,
          "last_edit_date": 1706210261,
          "creation_date": 1706210146,
          "answer_id": 77882414,
          "question_id": 76406516,
          "share_link": "https://stackoverflow.com/a/77882414",
          "body_markdown": "I had similar situation and i&#39;ve resolve to verify new names of atributes or name attibutes updates. You have there some one nodes with have values with past attributes and it&#39;s the problem.",
          "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0/77882414#77882414",
          "title": "Error mapping node with custom CYPHER RETURN leaving out relations in SDN 7.1.0"
        }
      ],
      "owner": {
        "reputation": 121,
        "user_id": 15354138,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/SMud3.jpg?s=256&g=1",
        "display_name": "sdm4n",
        "link": "https://stackoverflow.com/users/15354138/sdm4n"
      },
      "last_editor": {
        "reputation": 121,
        "user_id": 15354138,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/SMud3.jpg?s=256&g=1",
        "display_name": "sdm4n",
        "link": "https://stackoverflow.com/users/15354138/sdm4n"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 231,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706210261,
      "creation_date": 1685968839,
      "last_edit_date": 1685969251,
      "question_id": 76406516,
      "share_link": "https://stackoverflow.com/q/76406516",
      "body_markdown": "# Setup\r\n\r\nI use an application with Spring Boot `3.1.0` (which brings Spring Data Neo4j `7.1.0`) with a Neo4j database `5.8.0`. Further, I have a node like this:\r\n\r\n```java\r\n@Node\r\n@Data\r\npublic class SourceNode {\r\n    @Id\r\n    @GeneratedValue(generatorClass = UUIDStringGenerator.class)\r\n    private String uuid;\r\n\r\n    @Relationship(type = &quot;RELATION_NAME&quot;, direction = Relationship.Direction.OUTGOING)\r\n    private List&lt;TargetNode&gt; randomRelationName = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\nand a repository with custom CYPHER queries like this:\r\n\r\n```java\r\npublic interface SourceNodeRepository extends CrudRepository&lt;SourceNode, String&gt; {\r\n    @Query(&quot;MATCH (s:SourceNode) RETURN s{.uuid}&quot;)\r\n    List&lt;SourceNode&gt; getAllWithoutRelations();\r\n\r\n    @Query(&quot;MATCH (s:SourceNode) RETURN s{.uuid, __elementId__: toString(id(s))}&quot;)\r\n    List&lt;SourceNode&gt; getAllWithoutRelationsFixed();\r\n}\r\n```\r\n\r\n# Question\r\n\r\nWhen I execute `getAllWithoutRelations()` to fetch the source nodes without intentionally mapping the relations, I get:\r\n\r\n```\r\norg.springframework.data.mapping.MappingException: Error mapping Record&lt;{role: {uuid: &quot;xxxxx&quot;}}&gt;\r\n...\r\nCaused by: java.util.NoSuchElementException: No value present\r\n```\r\n\r\nIs it a bug in Spring Data Neo4j `7.1.0` or how can I prevent this problem properly?\r\n\r\nWhen using Spring Boot `3.0.6` bringing Spring Data Neo4j `7.0.5` the query execution works without problems.\r\n\r\n# Ugly Workaround\r\n\r\nI found out, that the problem relates to the source node&#39;s internal Neo4j ID, which cannot be determined based on the actual query when executing the custom query. By adding `__elementId__: toString(id(s))` (see repository method `getAllWithoutRelationsFixed()`) to the return object, the problem can be solved, but I doubt that this is a good solution.",
      "link": "https://stackoverflow.com/questions/76406516/error-mapping-node-with-custom-cypher-return-leaving-out-relations-in-sdn-7-1-0",
      "title": "Error mapping node with custom CYPHER RETURN leaving out relations in SDN 7.1.0"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 216,
                "user_id": 14059508,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-iNWP4rE4quY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmnS2o6VDXdneqr5Dhlt_nu2_K-bA/photo.jpg?sz=256",
                "display_name": "rohit bumrah",
                "link": "https://stackoverflow.com/users/14059508/rohit-bumrah"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686119468,
              "post_id": 76407574,
              "comment_id": 134753549,
              "link": "https://stackoverflow.com/questions/76406355/not-able-to-use-count-properly-in-cypher-query/76407574#comment134753549_76407574"
            },
            {
              "owner": {
                "reputation": 9094,
                "user_id": 12368154,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Charchit Kapoor",
                "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
              },
              "reply_to_user": {
                "reputation": 216,
                "user_id": 14059508,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-iNWP4rE4quY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmnS2o6VDXdneqr5Dhlt_nu2_K-bA/photo.jpg?sz=256",
                "display_name": "rohit bumrah",
                "link": "https://stackoverflow.com/users/14059508/rohit-bumrah"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1686123854,
              "post_id": 76407574,
              "comment_id": 134754352,
              "link": "https://stackoverflow.com/questions/76406355/not-able-to-use-count-properly-in-cypher-query/76407574#comment134754352_76407574"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1685976084,
          "creation_date": 1685976084,
          "answer_id": 76407574,
          "question_id": 76406355,
          "share_link": "https://stackoverflow.com/a/76407574",
          "body_markdown": "You need to collect and unwind all the nodes, like this:\r\n\r\n    MATCH(n:Prop)\r\n    WHERE toLower(n.Type)=toLower(&quot;abc&quot;) \r\n    WITH n.Id AS id, n\r\n    MATCH (new:op)\r\n    WHERE new.Id STARTS WITH id\r\n    WITH new,n \r\n    MATCH (o:`here`)-[:Property]-&gt;(new) \r\n    WHERE (o:Obj) \r\n    WITH Count(DISTINCT o) AS languages, n, new\r\n    WITH count(n) as nodesCount, COLLECT(n.Id) as ids\r\n    UNWIND ids as nodeId\r\n    RETURN nodesCount, nodeId",
          "link": "https://stackoverflow.com/questions/76406355/not-able-to-use-count-properly-in-cypher-query/76407574#76407574",
          "title": "Not able to use COUNT properly in cypher query"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1686068358,
          "creation_date": 1686068358,
          "answer_id": 76416593,
          "question_id": 76406355,
          "share_link": "https://stackoverflow.com/a/76416593",
          "body_markdown": "Swap the places of the fields in your return. The reason for that is that Cypher does implicit aggregation, so it will aggregate on each field in the list in written order. In your example, it will group first on `count(n)`, then on `id(n)`. I think you want to group on the count for each id. Updated Cypher is below.\r\n\r\n    MATCH(n:Prop)\r\n        WHERE toLower(n.Type)=toLower(&quot;abc&quot;) \r\n        WITH n.Id AS id, n\r\n        MATCH (new:op)\r\n        WHERE new.Id STARTS WITH id\r\n        WITH new,n \r\n        MATCH (o:`here`)-[:Property]-&gt;(new) \r\n        WHERE (o:Obj) \r\n        WITH Count(DISTINCT o) AS languages,n,new\r\n    return id(n), count(n)",
          "link": "https://stackoverflow.com/questions/76406355/not-able-to-use-count-properly-in-cypher-query/76416593#76416593",
          "title": "Not able to use COUNT properly in cypher query"
        }
      ],
      "owner": {
        "reputation": 216,
        "user_id": 14059508,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-iNWP4rE4quY/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmnS2o6VDXdneqr5Dhlt_nu2_K-bA/photo.jpg?sz=256",
        "display_name": "rohit bumrah",
        "link": "https://stackoverflow.com/users/14059508/rohit-bumrah"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 51,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1690749120,
      "creation_date": 1685967634,
      "last_edit_date": 1690749120,
      "question_id": 76406355,
      "share_link": "https://stackoverflow.com/q/76406355",
      "body_markdown": "I have a query already written which returns some result\r\n\r\n    MATCH(n:Prop)\r\n    \t\tWHERE toLower(n.Type)=toLower(&quot;abc&quot;) \r\n    \t\tWITH n.Id AS id, n\r\n        \tMATCH (new:op)\r\n    \t\tWHERE new.Id STARTS WITH id\r\n    \t\tWITH new,n \r\n    \t\tMATCH (o:`here`)-[:Property]-&gt;(new) \r\n    \t\tWHERE (o:Obj) \r\n        \tWITH Count(DISTINCT o) AS languages,n,new\r\n    \treturn count(n)\r\n\r\nThis returns me count 6 which is expected\r\nBut since I want the id as well I change the query as\r\n\r\n    MATCH(n:Prop)\r\n    \t\tWHERE toLower(n.Type)=toLower(&quot;abc&quot;) \r\n    \t\tWITH n.Id AS id, n\r\n        \tMATCH (new:op)\r\n    \t\tWHERE new.Id STARTS WITH id\r\n    \t\tWITH new,n \r\n    \t\tMATCH (o:`here`)-[:Property]-&gt;(new) \r\n    \t\tWHERE (o:Obj) \r\n        \tWITH Count(DISTINCT o) AS languages,n,new\r\n    \treturn count(n), id(n)\r\n\r\nThe problem with this is that I get the count as one with each id but I want the totalCount which was 6 only with each row\r\n\r\nI have tried many different things but couldnt get what I want.\r\n",
      "link": "https://stackoverflow.com/questions/76406355/not-able-to-use-count-properly-in-cypher-query",
      "title": "Not able to use COUNT properly in cypher query"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 46,
            "user_id": 9397755,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/10f2b035856eef2b59c02267e3ee9e63?s=256&d=identicon&r=PG",
            "display_name": "Jennifer Reif",
            "link": "https://stackoverflow.com/users/9397755/jennifer-reif"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1685993758,
          "creation_date": 1685993758,
          "answer_id": 76409516,
          "question_id": 76390282,
          "share_link": "https://stackoverflow.com/a/76409516",
          "body_markdown": "Last time I did an export like this, I used [`apoc.export.json.query`](https://neo4j.com/labs/apoc/4.3/overview/apoc.export/apoc.export.json.query/). That procedure uses results from a query and exports it as JSON. Depending on your desired JSON format, you may need to run a couple tools to remove extra escape characters and such (tr, sed, or something). I believe I ran `tr -d &#39;\\&#39; file` on it to remove extra backslashes.",
          "link": "https://stackoverflow.com/questions/76390282/returning-formatted-json-querying-a-tree-with-two-different-relationships-cyphe/76409516#76409516",
          "title": "Returning formatted json querying a tree with two different relationships (cypher)"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 16617343,
        "user_type": "registered",
        "profile_image": "https://graph.facebook.com/2982658662021891/picture?type=large",
        "display_name": "jli",
        "link": "https://stackoverflow.com/users/16617343/jli"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1685993758,
      "creation_date": 1685710005,
      "last_edit_date": 1685729857,
      "question_id": 76390282,
      "share_link": "https://stackoverflow.com/q/76390282",
      "body_markdown": "I have a tree-like structure involving &quot;Blocks&quot;, which are connected to other Blocks by &quot;NEXT_BLOCK&quot; or &quot;BLOCK_CHILD&quot;. A node can have at most one BLOCK_CHILD and one NEXT_BLOCK, and this can recursively repeat itself.\r\n\r\n![node structure](https://i.stack.imgur.com/cqTbz.png)\r\n\r\nWhile I can get all the blocks from the starter node simply by running the following cypher, I would like to get the data in a specific data format.\r\n\r\n\r\n```\r\nMATCH (n:Node {id: $nodeId})-[r:NEXT_BLOCK|BLOCK_CHILD*0..]-(b:BLOCK_ELEMENT|BLOCK_INLINE)\r\nRETURN n, r, b\r\n\r\n```\r\n\r\nI need to efficiently get this tree of data as an array where each &#39;Next block&#39; is the next element in the array, while everything that&#39;s part of &#39;BLOCK_CHILD&#39; (including its next nodes) is encapsulated within a children field which is also an array. So the example above would be given as\r\n\r\n```\r\n[\r\n  {\r\n  id : &quot;4fa9125..&quot;\r\n  children : [{text: &quot;&quot;}]\r\n  }, \r\n  {\r\n  id : &quot;66fb771..&quot;\r\n  children : [\r\n                    {\r\n                      id: &quot;466a6a&quot;\r\n                      children: [{id: &quot;5498a3&quot;}]\r\n                    },\r\n                    {\r\n                      id: &quot;90753...&quot;\r\n                      children: []\r\n                    },\r\n              ]\r\n  }, \r\n  {\r\n  id : &quot;12258d5..&quot;\r\n  children : [{id: &quot;97b56a&quot;}]\r\n  }, \r\n]\r\n```\r\n\r\nThe organisation can still change if my nodes have a better structural design. These need to be correctly ordered and the order will frequently change though.\r\n\r\nI appreciate the help!\r\n\r\nI&#39;ve tried using APOC.convertToTree as an example below.\r\n\r\n```\r\nMATCH path = (n {id: &quot;eecd1592-d41b-4b3c-aaa1-16562d808ecc&quot;})-[r:BLOCK_CHILD|NEXT_BLOCK*0..]-&gt;(p)\r\nWITH collect(path) AS paths\r\nCALL apoc.convert.toTree(paths)\r\nYIELD value\r\nRETURN value;\r\n```\r\n\r\nI&#39;ve also tried some structural changes such as storing the json object, but as it frequently is changed and blocks are consistently cross referenced I didn&#39;t want to simply store the entire content as a string. ",
      "link": "https://stackoverflow.com/questions/76390282/returning-formatted-json-querying-a-tree-with-two-different-relationships-cyphe",
      "title": "Returning formatted json querying a tree with two different relationships (cypher)"
    },
    {
      "tags": ["neo4j", "cypher", "graph-databases"],
      "comments": [
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1685608114,
          "post_id": 76379275,
          "comment_id": 134684679,
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query#comment134684679_76379275"
        },
        {
          "owner": {
            "reputation": 1489,
            "user_id": 1923409,
            "user_type": "registered",
            "accept_rate": 67,
            "profile_image": "https://i.stack.imgur.com/dwzAp.jpg?s=256&g=1",
            "display_name": "Michał J. Gąsior",
            "link": "https://stackoverflow.com/users/1923409/micha%c5%82-j-g%c4%85sior"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1685611241,
          "post_id": 76379275,
          "comment_id": 134685351,
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query#comment134685351_76379275"
        },
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1685611502,
          "post_id": 76379275,
          "comment_id": 134685421,
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query#comment134685421_76379275"
        },
        {
          "owner": {
            "reputation": 1489,
            "user_id": 1923409,
            "user_type": "registered",
            "accept_rate": 67,
            "profile_image": "https://i.stack.imgur.com/dwzAp.jpg?s=256&g=1",
            "display_name": "Michał J. Gąsior",
            "link": "https://stackoverflow.com/users/1923409/micha%c5%82-j-g%c4%85sior"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1685611780,
          "post_id": 76379275,
          "comment_id": 134685506,
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query#comment134685506_76379275"
        },
        {
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1685611888,
          "post_id": 76379275,
          "comment_id": 134685535,
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query#comment134685535_76379275"
        },
        {
          "owner": {
            "reputation": 1489,
            "user_id": 1923409,
            "user_type": "registered",
            "accept_rate": 67,
            "profile_image": "https://i.stack.imgur.com/dwzAp.jpg?s=256&g=1",
            "display_name": "Michał J. Gąsior",
            "link": "https://stackoverflow.com/users/1923409/micha%c5%82-j-g%c4%85sior"
          },
          "reply_to_user": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1685611921,
          "post_id": 76379275,
          "comment_id": 134685542,
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query#comment134685542_76379275"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1489,
                "user_id": 1923409,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/dwzAp.jpg?s=256&g=1",
                "display_name": "Michał J. Gąsior",
                "link": "https://stackoverflow.com/users/1923409/micha%c5%82-j-g%c4%85sior"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1685612368,
              "post_id": 76380516,
              "comment_id": 134685638,
              "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query/76380516#comment134685638_76380516"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1685612079,
          "creation_date": 1685612079,
          "answer_id": 76380516,
          "question_id": 76379275,
          "share_link": "https://stackoverflow.com/a/76380516",
          "body_markdown": "You should filter the users and teams, using an additional `WITH` clause. Like this:\r\n\r\n    MATCH (u:User)\r\n    WHERE (u.email in $userEmails)\r\n    OPTIONAL MATCH (u)-[r:MEMBER_OF]-(t:Team)\r\n    WITH u, r, t WHERE t IS NULL OR NOT (t.id IN $excludedTeamIds)\r\n    RETURN r, u, t;",
          "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query/76380516#76380516",
          "title": "Filtering out optional matches or results in cypher query"
        }
      ],
      "owner": {
        "reputation": 1489,
        "user_id": 1923409,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://i.stack.imgur.com/dwzAp.jpg?s=256&g=1",
        "display_name": "Michał J. Gąsior",
        "link": "https://stackoverflow.com/users/1923409/micha%c5%82-j-g%c4%85sior"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 64,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 76380516,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1685612079,
      "creation_date": 1685601642,
      "question_id": 76379275,
      "share_link": "https://stackoverflow.com/q/76379275",
      "body_markdown": "I have a list of `User` emails and I need to get all of them with their `Team` membership. Both `Users` with `Teams` and those who are not members of any `Team`. I have a query for that which is:\r\n\r\n```\r\n  MATCH (u:User)\r\n  WHERE (u.email in $userEmails)\r\n  OPTIONAL MATCH (u)-[r:MEMBER_OF]-(t:Team)\r\n  RETURN r, u, t;\r\n```\r\n\r\nThe problem I have is that I would also want to exclude a list of `Teams` in my query. When I tried this:\r\n\r\n```\r\n  MATCH (u:User)\r\n  WHERE (u.email in $userEmails)\r\n  OPTIONAL MATCH (u)-[r:MEMBER_OF]-(t:Team)\r\n  WHERE NOT (t.id in $excludedTeamIds)\r\n  RETURN r, u, t;\r\n```\r\n\r\nThe result was the same list of `Users`, but their `relation` to the `Team` was just missing. I would want to remove both - the `User` and the `Team` from the result.",
      "link": "https://stackoverflow.com/questions/76379275/filtering-out-optional-matches-or-results-in-cypher-query",
      "title": "Filtering out optional matches or results in cypher query"
    },
    {
      "tags": ["neo4j", "time-complexity", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 327,
            "user_id": 13994829,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/1GO7h.png?s=256&g=1",
            "display_name": "Xiang",
            "link": "https://stackoverflow.com/users/13994829/xiang"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1685591257,
          "creation_date": 1685591257,
          "answer_id": 76378562,
          "question_id": 76378251,
          "share_link": "https://stackoverflow.com/a/76378562",
          "body_markdown": "\r\n\r\n### Example\r\n```\r\nMATCH (p:Person {name: &#39;Tom Hanks&#39;})\r\nRETURN p\r\n```\r\n\r\n### Result\r\n```\r\nPlanner COST\r\n\r\nRuntime PIPELINED\r\n\r\nRuntime version 5.8\r\n\r\nBatch size 128\r\n\r\n+------------------+----+------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+\r\n| Operator         | Id | Details                | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Pipeline            |\r\n+------------------+----+------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+\r\n| +ProduceResults  |  0 | p                      |              6 |    1 |       3 |                |                        |           |                     |\r\n| |                +----+------------------------+----------------+------+---------+----------------+                        |           |                     |\r\n| +Filter          |  1 | p.name = $autostring_0 |              6 |    1 |     250 |                |                        |           |                     |\r\n| |                +----+------------------------+----------------+------+---------+----------------+                        |           |                     |\r\n| +NodeByLabelScan |  2 | p:Person               |            125 |  125 |     126 |            120 |                    3/0 |     0.772 | Fused in Pipeline 0 |\r\n+------------------+----+------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+\r\n\r\nTotal database accesses: 379, total allocated memory: 184\r\n\r\n1 row\r\n```\r\n\r\nAs you can see, when you search a node, it will scan all nodes which mean the time complexity is O(N).\r\n\r\nHowever you can create index for node that can improve search faster.\r\n\r\nMore info: [document](https://neo4j.com/docs/cypher-manual/current/query-tuning/basic-example/)",
          "link": "https://stackoverflow.com/questions/76378251/whats-the-time-complexity-of-query-a-node-in-neo4j/76378562#76378562",
          "title": "What&#39;s the time complexity of query a node in neo4j?"
        }
      ],
      "owner": {
        "reputation": 21,
        "user_id": 21443513,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/04b1dc3efd8e174b78a293dd0da081d9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Josh-money",
        "link": "https://stackoverflow.com/users/21443513/josh-money"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 71,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 76378562,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1685591257,
      "creation_date": 1685585122,
      "question_id": 76378251,
      "share_link": "https://stackoverflow.com/q/76378251",
      "body_markdown": "I&#39;m confused how neo4j query work.\r\n\r\nIf I have 10 nodes in my graph DB (7 Customer nodes + 3 Product nodes)\r\n\r\nNow, I want to query a customer node(ex: C1), what&#39;s the time complexity?\r\n\r\nAnd how the query work ? Like hash table O(1)? Or like binary search O(logN) ?",
      "link": "https://stackoverflow.com/questions/76378251/whats-the-time-complexity-of-query-a-node-in-neo4j",
      "title": "What&#39;s the time complexity of query a node in neo4j?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686245821,
          "post_id": 76372597,
          "comment_id": 134776215,
          "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i#comment134776215_76372597"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 23289,
                "user_id": 766570,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
                "display_name": "abbood",
                "link": "https://stackoverflow.com/users/766570/abbood"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1685531581,
              "post_id": 76372727,
              "comment_id": 134672334,
              "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#comment134672334_76372727"
            },
            {
              "owner": {
                "reputation": 9094,
                "user_id": 12368154,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Charchit Kapoor",
                "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
              },
              "reply_to_user": {
                "reputation": 23289,
                "user_id": 766570,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
                "display_name": "abbood",
                "link": "https://stackoverflow.com/users/766570/abbood"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1685532877,
              "post_id": 76372727,
              "comment_id": 134672603,
              "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#comment134672603_76372727"
            },
            {
              "owner": {
                "reputation": 23289,
                "user_id": 766570,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
                "display_name": "abbood",
                "link": "https://stackoverflow.com/users/766570/abbood"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1685534779,
              "post_id": 76372727,
              "comment_id": 134673066,
              "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#comment134673066_76372727"
            },
            {
              "owner": {
                "reputation": 23289,
                "user_id": 766570,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
                "display_name": "abbood",
                "link": "https://stackoverflow.com/users/766570/abbood"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1685535327,
              "post_id": 76372727,
              "comment_id": 134673223,
              "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#comment134673223_76372727"
            },
            {
              "owner": {
                "reputation": 9094,
                "user_id": 12368154,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Charchit Kapoor",
                "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
              },
              "reply_to_user": {
                "reputation": 23289,
                "user_id": 766570,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
                "display_name": "abbood",
                "link": "https://stackoverflow.com/users/766570/abbood"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1685536348,
              "post_id": 76372727,
              "comment_id": 134673507,
              "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#comment134673507_76372727"
            },
            {
              "owner": {
                "reputation": 9094,
                "user_id": 12368154,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Charchit Kapoor",
                "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
              },
              "reply_to_user": {
                "reputation": 23289,
                "user_id": 766570,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
                "display_name": "abbood",
                "link": "https://stackoverflow.com/users/766570/abbood"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1685536455,
              "post_id": 76372727,
              "comment_id": 134673526,
              "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#comment134673526_76372727"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "last_editor": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1685532631,
          "last_edit_date": 1685532631,
          "creation_date": 1685530416,
          "answer_id": 76372727,
          "question_id": 76372597,
          "share_link": "https://stackoverflow.com/a/76372727",
          "body_markdown": "I guess you&#39;ll first have to fetch the relationships using the index and then apply the `MATCH`. Try this:\r\n\r\n    MATCH (p:Person { id: $p_id })-[k1:`KNOWS`]-&gt;(person:Person)\r\n    WHERE (// some criteria)\r\n    CALL db.index.fulltext.queryRelationships(&quot;indexName&quot;, &quot;searchString&quot;) \r\n    YIELD relationship AS work\r\n    MATCH (person)-[work]-&gt;(company:Company)\r\n    WITH person, work\r\n    RETURN DISTINCT person.full_name, work.title\r\n\r\nAlternatively, you can perform a case-insensitive search using regex. Like this:\r\n\r\n    MATCH (p:Person { id: $p_id })-[k1:`KNOWS`]-&gt;(person:Person)\r\n    WHERE (// some criteria)\r\n    MATCH (person)-[work:`WORKED_AT`]-&gt;(company:Company)\r\n    WHERE (work.title =~ &#39;(?i).*Product Manager.*&#39; and work.start_date is not null)\r\n    WITH person, work\r\n    RETURN DISTINCT person.full_name, work.title",
          "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i/76372727#76372727",
          "title": "How to efficiently use a fulltext index to search based on prior MATCH results in same query"
        }
      ],
      "owner": {
        "reputation": 23289,
        "user_id": 766570,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://i.stack.imgur.com/urpdN.jpg?s=256&g=1",
        "display_name": "abbood",
        "link": "https://stackoverflow.com/users/766570/abbood"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 121,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1685558785,
      "creation_date": 1685529438,
      "last_edit_date": 1685558785,
      "question_id": 76372597,
      "share_link": "https://stackoverflow.com/q/76372597",
      "body_markdown": "## Intro\r\n\r\nThis what an existing query of mine looks like:\r\n\r\n```\r\nMATCH\r\n(p:Person { id: $p_id })-[k1:`KNOWS`]-&gt;(person:Person)\r\nWHERE (// some criteria)\r\nMATCH\r\n(person)-[work:`WORKED_AT`]-&gt;(company:Company)\r\nWHERE (work.title contains “Product Manager&quot; and work.start_date is not null)\r\nWITH person, work\r\nRETURN\r\nDISTINCT person.full_name, work.title\r\n```\r\n\r\nThe problem in the above query is that it is not case insensitive. So the above query fails if the actual title is `product manager` in the database.\r\n\r\nSo we are trying to use [full text search index][1]. We created the index on the `:work` relationship, and we verified that it works, for example the search of:\r\n\r\n\r\n```\r\ncall db.index.fulltext.queryRelationships(“&lt;indexName&gt;”, “CEO”) \r\nyield relationship return reltionship.title limit 10\r\n```\r\nwould return stuff like:\r\n\r\n```\r\nCEO\r\nCeo\r\n..etc\r\n```\r\n\r\n## Question\r\nHow can I apply the above index search on the node search? For example:\r\n\r\n```\r\nMATCH\r\n(p:Person { id: $p_id })-[k1:`KNOWS`]-&gt;(person:Person)\r\nWHERE (// some criteria)\r\nMATCH\r\n(person)-[work:`WORKED_AT`]-&gt;(company:Company)\r\nWHERE //apply the db.index.fulltext.queryRelationships here on :work somehow\r\nWITH person, work\r\nRETURN\r\nDISTINCT person.full_name, work.title\r\n```\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/indexes-for-full-text-search/",
      "link": "https://stackoverflow.com/questions/76372597/how-to-efficiently-use-a-fulltext-index-to-search-based-on-prior-match-results-i",
      "title": "How to efficiently use a fulltext index to search based on prior MATCH results in same query"
    },
    {
      "tags": ["neo4j", "cypher", "memgraphdb", "opencypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 21,
            "user_id": 18335586,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxBFCySN6MWqpfuKu-vWVDfBytCE714D9nQ7Psd=k-s256",
            "display_name": "Antonio Filipovic",
            "link": "https://stackoverflow.com/users/18335586/antonio-filipovic"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1685460771,
          "creation_date": 1685460771,
          "answer_id": 76366430,
          "question_id": 76361528,
          "share_link": "https://stackoverflow.com/a/76366430",
          "body_markdown": "from what I understood that you are looking for `bfs` traversal. On Memgraph you can check it out here: https://memgraph.com/docs/memgraph/reference-guide/built-in-graph-algorithms#breadth-first-search\r\n\r\nFor the first question (&quot;Get Node A and 3 of its children ordered by KNOWN_FOR age desc, where age &gt; 5.&quot;), this should be a query:\r\n\r\n```\r\nMATCH path=(n:Node {name:&quot;a&quot;})-[rels *bfs..1]-&gt;(m)\r\nWITH n, m,  rels[0] as rel0\r\nWHERE rel0.age &gt; 5\r\nRETURN n.name, m.name, rel0.age\r\nORDER BY rel0.age DESC;\r\n```\r\nBasically, here, you get a node with property name &quot;a&quot;, then do `bfs` of up to max 1 step to some node `m`.  Now, in variable `rels` you will have all the relationships that `bfs` visits. In `bfs` it will visit relationships at some order, but to get data sorted on output you will need `ORDER BY` and then reference `rel0`&#39;s property `age`.\r\nAlso, I am getting different output here, I think you are missing node &quot;B&quot; with value 7.\r\n\r\n\r\nFor the second question () if I understood correctly you want to expand from node A up to 3 steps and then order by `age` property in a way that you first compare all relationships on the first expansion, and then on second. \r\n\r\nThere are two options for that as I see it in Memgraph:\r\n```\r\nMATCH path=(n:Node {name:&quot;a&quot;})-[rels *bfs..3]-&gt;(m)\r\nWITH path, n, m,  rels[0] as rel0, rels[1] as rel1, rels[2] as rel2\r\nRETURN n.name ,m.name, rel0.age, rel1.age, rel2.age, extract(p IN nodes(path) | p.name) as nodes\r\nORDER BY rel0.age DESC, rel1.age DESC, rel2.age DESC;\r\n```\r\n\r\nand second one:\r\n```\r\nMATCH path=(n:Node {name:&quot;a&quot;})-[rels *bfs..3]-&gt;(m)\r\nWITH n, m,  extract(r IN rels | r.age) as ages_list, rels\r\nWHERE ages_list[0] &gt; 5\r\nRETURN n.name ,m.name, ages_list\r\nORDER BY ages_list[0] DESC, ages_list[1] DESC;\r\n```\r\n\r\nThe idea behind the second option is to extract properties in the list and then compare the values of the list. There is no error thrown if there is no value in the list, it will return null. Basically, it will first compare all age values on first expansion, and then on second, etc...\r\n\r\n\r\nLet me know if you have any more questions. Also, a good tutorial on BFS can be found on Memgraph&#39;s Playground: https://playground.memgraph.com/topic/cypher-breadth-first-search.\r\n\r\nFor more docs, check Memgraph&#39;s site I linked, it should be helpful.",
          "link": "https://stackoverflow.com/questions/76361528/memgraph-cypher-recursive-tree-with-depth-and-filtering-query/76366430#76366430",
          "title": "Memgraph cypher recursive tree with depth and filtering query"
        }
      ],
      "owner": {
        "reputation": 173,
        "user_id": 1642540,
        "user_type": "registered",
        "accept_rate": 40,
        "profile_image": "https://www.gravatar.com/avatar/fcdf958bd532b928cf4dc01b6e1fbd3f?s=256&d=identicon&r=PG",
        "display_name": "NathanS",
        "link": "https://stackoverflow.com/users/1642540/nathans"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 229,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "answer_count": 1,
      "score": 2,
      "last_activity_date": 1685466291,
      "creation_date": 1685419019,
      "last_edit_date": 1685466291,
      "question_id": 76361528,
      "share_link": "https://stackoverflow.com/q/76361528",
      "body_markdown": "I&#39;m using Memgraph (but open to using Neo4j) and need some help on building a recursive query to build out a tree. I&#39;m new to Cypher so my attempts so far haven&#39;t been successful. I&#39;ve played around with the CALL subqueries but can&#39;t seem to get the format and ordering right. \r\n\r\nMy goals are:\r\n\r\n1. Be able to fetch a Node, and its direct edges - but the edges should be limited to a certain number sorted by a edge property value. E.g. Get Node A and 3 of its edges ordered by property X.\r\n2. Be able to fetch a Node, and based on some variable be able to specify the depth to &quot;walk&quot; to tree. E.g. Get Node A, and for each of its 3 edges (sorted by X), get those edge&#39;s edges the using the same filter function, up to the depth limit. Bonus points if it can filter out the parent node so it&#39;s only a directed tree. \r\n\r\nSome concrete examples - given the following graph. Note this is not real data and I&#39;m aware the &quot;age&quot; property is not symmetrical between Nodes. Just threw it together for the question. \r\n\r\n    CREATE (n0:Node {name: &quot;a&quot;}) CREATE (n1:Node {name: &quot;b&quot;}) CREATE (n2:Node {name: &quot;c&quot;}) CREATE (n3:Node {name: &quot;d&quot;}) CREATE (n4:Node {name: &quot;e&quot;}) CREATE (n5:Node {name: &quot;f&quot;}) CREATE (n6:Node {name: &quot;g&quot;}) CREATE (n7:Node {name: &quot;h&quot;}) CREATE (n8:Node {name: &quot;i&quot;}) CREATE (n9:Node {name: &quot;j&quot;});\r\n    CREATE (n0)-[:KNOWN_FOR {age: 20} ]-&gt;(n2) CREATE (n0)-[:KNOWN_FOR {age: 7} ]-&gt;(n1) CREATE (n0)-[:KNOWN_FOR {age: 15} ]-&gt;(n4) CREATE (n0)-[:KNOWN_FOR {age: 23} ]-&gt;(n3) CREATE (n0)-[:KNOWN_FOR {age: 5} ]-&gt;(n7) CREATE (n1)-[:KNOWN_FOR {age: 10} ]-&gt;(n6) CREATE (n1)-[:KNOWN_FOR {age: 14} ]-&gt;(n2) CREATE (n1)-[:KNOWN_FOR {age: 24} ]-&gt;(n3) CREATE (n1)-[:KNOWN_FOR {age: 19} ]-&gt;(n5) CREATE (n2)-[:KNOWN_FOR {age: 24} ]-&gt;(n8) CREATE (n2)-[:KNOWN_FOR {age: 25} ]-&gt;(n3) CREATE (n2)-[:KNOWN_FOR {age: 17} ]-&gt;(n1) CREATE (n3)-[:KNOWN_FOR {age: 7} ]-&gt;(n4) CREATE (n3)-[:KNOWN_FOR {age: 10} ]-&gt;(n7) CREATE (n3)-[:KNOWN_FOR {age: 25} ]-&gt;(n6) CREATE (n3)-[:KNOWN_FOR {age: 22} ]-&gt;(n1)CREATE (n4)-[:KNOWN_FOR {age: 21} ]-&gt;(n0) CREATE (n4)-[:KNOWN_FOR {age: 24} ]-&gt;(n6) CREATE (n4)-[:KNOWN_FOR {age: 17} ]-&gt;(n8) CREATE (n5)-[:KNOWN_FOR {age: 14} ]-&gt;(n9) CREATE (n5)-[:KNOWN_FOR {age: 8} ]-&gt;(n0) CREATE (n5)-[:KNOWN_FOR {age: 15} ]-&gt;(n8) CREATE (n5)-[:KNOWN_FOR {age: 18} ]-&gt;(n6) CREATE (n5)-[:KNOWN_FOR {age: 22} ]-&gt;(n4) CREATE (n6)-[:KNOWN_FOR {age: 7} ]-&gt;(n4) CREATE (n6)-[:KNOWN_FOR {age: 21} ]-&gt;(n2) CREATE (n7)-[:KNOWN_FOR {age: 25} ]-&gt;(n3) CREATE (n8)-[:KNOWN_FOR {age: 18} ]-&gt;(n7) CREATE (n8)-[:KNOWN_FOR {age: 12} ]-&gt;(n3) CREATE (n9)-[:KNOWN_FOR {age: 14} ]-&gt;(n4) CREATE (n9)-[:KNOWN_FOR {age: 15} ]-&gt;(n3) CREATE (n9)-[:KNOWN_FOR {age: 7} ]-&gt;(n2) CREATE (n9)-[:KNOWN_FOR {age: 14} ]-&gt;(n8);\r\n\r\n[![Example Graph][1]][1]\r\n\r\nExamples\r\n\r\nGet Node A and 3 of its children ordered by KNOWN_FOR age desc, where age &gt; 5. Should return:\r\n\r\n    A -&gt;\r\n      - D (age: 23)\r\n      - C (age: 20)\r\n      - E (age: 15)\r\n\r\nGet Node A, and its children to a depth of 3, where its children have a limit of 2 order by age desc. Should return: \r\n\r\n    A \r\n      -&gt; D (age: 23)\r\n        -&gt; G (age: 25)\r\n          -&gt; C (age: 21)\r\n          -&gt; E (age: 7)\r\n        -&gt; B (age: 22)\r\n          -&gt; D (age: 24)\r\n          -&gt; F (age: 19)\r\n      -&gt; C (age: 20)\r\n        -&gt; D (age: 25)\r\n          -&gt; G (age: 25)\r\n          -&gt; B (age: 22)\r\n        -&gt; I (age: 24)\r\n          -&gt; H (age: 18)\r\n          -&gt; D (age: 12)\r\n      -&gt; E (age: 15)\r\n        -&gt; G (age: 24)\r\n          -&gt; C (age: 21)\r\n          -&gt; E (age: 7)\r\n        -&gt; A (age: 21)\r\n          -&gt; D (age: 23)\r\n          -&gt; C (age: 20)\r\n\r\nI don&#39;t mind to much on the format of the return data, as long as it includes the nodes and relationship value between them. Something as simple as this is ideal: \r\n\r\n    A, D, 23\r\n    D, G, 25\r\n\r\nBut if its a nested array, I can parse it out on the function that wraps the query. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pVuj2.png",
      "link": "https://stackoverflow.com/questions/76361528/memgraph-cypher-recursive-tree-with-depth-and-filtering-query",
      "title": "Memgraph cypher recursive tree with depth and filtering query"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 1,
            "user_id": 21981763,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AATXAJw6VkZJ_pPo5z6AT4gHlYTp0nzPkkBWgLEsFKmI=k-s256",
            "display_name": "DBA_WORLD 2016",
            "link": "https://stackoverflow.com/users/21981763/dba-world-2016"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1685396104,
          "post_id": 76360295,
          "comment_id": 134651133,
          "link": "https://stackoverflow.com/questions/76360295/why-arent-nodes-displaying-in-neo4j-graph-view-when-they-show-up-in-table-and-t#comment134651133_76360295"
        },
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1686247303,
          "post_id": 76360295,
          "comment_id": 134776512,
          "link": "https://stackoverflow.com/questions/76360295/why-arent-nodes-displaying-in-neo4j-graph-view-when-they-show-up-in-table-and-t#comment134776512_76360295"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 41484,
            "user_id": 728812,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=256&d=identicon&r=PG",
            "display_name": "Michael Hunger",
            "link": "https://stackoverflow.com/users/728812/michael-hunger"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1685433391,
          "creation_date": 1685433391,
          "answer_id": 76362716,
          "question_id": 76360295,
          "share_link": "https://stackoverflow.com/a/76362716",
          "body_markdown": "Can you try shift-reload on your Neo4j Browser? \r\n\r\nOr check in the javascript console if there are any errors? \r\n\r\nWhat versions are you using? \r\n\r\nSometimes it helps to upgrade to more recent versions? \r\n\r\nOr try to use https://browser.neo4j.io for a centrally hosted version.\r\nOr http://browser.graphapp.io for a non-SSL version.",
          "link": "https://stackoverflow.com/questions/76360295/why-arent-nodes-displaying-in-neo4j-graph-view-when-they-show-up-in-table-and-t/76362716#76362716",
          "title": "Why aren&#39;t nodes displaying in neo4j graph view when they show up in Table and Text view?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 21981763,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJw6VkZJ_pPo5z6AT4gHlYTp0nzPkkBWgLEsFKmI=k-s256",
        "display_name": "DBA_WORLD 2016",
        "link": "https://stackoverflow.com/users/21981763/dba-world-2016"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 246,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1685466510,
      "creation_date": 1685393962,
      "last_edit_date": 1685466510,
      "question_id": 76360295,
      "share_link": "https://stackoverflow.com/q/76360295",
      "body_markdown": "I am running a simple query on neo4j in an enterprise system. I have been using neo4j for last 3-4 months. So have basic familiarity of cypher queries etc. I am using neo4j browser using Chrome. While working , all of a sudden if I write a simple Cypher query such as &quot;MATCH (c:mynode) return c limit 5&quot; , the result does not show any nodes in &quot;Graph display&quot; window. However the &quot;Table&quot;,&quot;Text&quot; and &quot;Code&quot; view is displaying results easily. I never had this problem in last 3-4 months that display vanishes all of a sudden.. Tried many things in settings etc..nothing seems to work.. any possible reason for the same?\r\n\r\nTried :reset style, was expecting the nodes would display again as it does normally in graph view. Did not display. All those nodes are however showing in Tables, Text and Code view.",
      "link": "https://stackoverflow.com/questions/76360295/why-arent-nodes-displaying-in-neo4j-graph-view-when-they-show-up-in-table-and-t",
      "title": "Why aren&#39;t nodes displaying in neo4j graph view when they show up in Table and Text view?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707321185,
          "creation_date": 1707321185,
          "answer_id": 77956188,
          "question_id": 77956127,
          "share_link": "https://stackoverflow.com/a/77956188",
          "body_markdown": "Try to set like this:\r\n```\r\nMATCH (n:NodeA),(additionalDate:AdditionalDate)\r\nWHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\nAND (additionalDate.DateType = &quot;1&quot;)\r\nCREATE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\nSET additionalDateOf.Value = &quot;2024-02-06T11:16:02.09Z&quot;\r\n```\r\nFor:\r\n```\r\nMERGE (n:NodeA {Id:&quot;xxxx1111xxxx11&quot;})\r\nMERGE (additionalDate:AdditionalDate {DateType:&quot;1&quot;}) \r\n```\r\nIf I add a return to the query above I get:\r\n```\r\n╒═══════════════════════════════╤═════════════════════════════════╤══════════════════════════════════════════════════════╕\r\n│n                              │additionalDate                   │additionalDateOf                                      │\r\n╞═══════════════════════════════╪═════════════════════════════════╪══════════════════════════════════════════════════════╡\r\n│(:NodeA {Id: &quot;xxxx1111xxxx11&quot;})│(:AdditionalDate {DateType: &quot;1&quot;})│[:AdditionalDateOf {Value: &quot;2024-02-06T11:16:02.09Z&quot;}]│\r\n└───────────────────────────────┴─────────────────────────────────┴──────────────────────────────────────────────────────┘\r\n```",
          "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j/77956188#77956188",
          "title": "Create Node and Set a value in a relationship Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707322351,
          "creation_date": 1707322351,
          "answer_id": 77956303,
          "question_id": 77956127,
          "share_link": "https://stackoverflow.com/a/77956303",
          "body_markdown": "As @nimrod-serok suggests, you can use the dot property reference syntax to set the `Value` property of `additionalDateOf`. \r\n\r\nAlternatively, you can just remove the double quotes from the key:\r\n```lang-cypher\r\nMATCH (n:Node),(additionalDate:AdditionalDate)\r\nWHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\nAND (additionalDate.DateType = &quot;1&quot;)\r\nCREATE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\nSET additionalDateOf = {\r\n  Value: &quot;2024-02-06T11:16:02.09Z&quot;\r\n}\r\n```\r\nThe property key-values you are assigning to the relationship are a map where the keys are identifiers. You were using the JSON data format where the keys are specified as strings.\r\n\r\nAs a third option, you can inline the property specification in the `CREATE` clause:\r\n```lang-cypher\r\nMATCH (n:Node),(additionalDate:AdditionalDate)\r\nWHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\nAND (additionalDate.DateType = &quot;1&quot;)\r\nCREATE (additionalDate)-[additionalDateOf:AdditionalDateOf \r\n                          {Value: &quot;2024-02-06T11:16:02.09Z&quot;}]-&gt;(n)\r\n```",
          "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j/77956303#77956303",
          "title": "Create Node and Set a value in a relationship Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707324404,
          "creation_date": 1707324404,
          "answer_id": 77956529,
          "question_id": 77956127,
          "share_link": "https://stackoverflow.com/a/77956529",
          "body_markdown": "To add to @FinbarGood&#39;s answer, you may want to use [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/) instead of [CREATE](https://neo4j.com/docs/cypher-manual/current/clauses/create/) in order to avoid creating duplicate relationships:\r\n\r\n    MATCH (n:Node), (additionalDate:AdditionalDate)\r\n    WHERE (n.Id = &quot;xxxx1111xxxx11&quot;) AND (additionalDate.DateType = &quot;1&quot;)\r\n    MERGE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\n    ON CREATE\r\n      SET additionalDateOf = {\r\n        Value: &quot;2024-02-06T11:16:02.09Z&quot;\r\n      }",
          "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j/77956529#77956529",
          "title": "Create Node and Set a value in a relationship Neo4j"
        }
      ],
      "owner": {
        "reputation": 99,
        "user_id": 1786078,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://www.gravatar.com/avatar/88aedef24b34273cb2147750cf145339?s=256&d=identicon&r=PG",
        "display_name": "cacharry",
        "link": "https://stackoverflow.com/users/1786078/cacharry"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 16,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1707324404,
      "creation_date": 1707320711,
      "question_id": 77956127,
      "share_link": "https://stackoverflow.com/q/77956127",
      "body_markdown": "I am trying to create a node and add a new relationship setting a value but I keep on getting the same error every time:\r\n\r\n    Invalid input &#39;&quot;&#39;: expected whitespace, comment, an identifier, UnsignedDecimalInteger, a property key name or &#39;}&#39; (line 6, column 3 (offset: 263))\r\n    &quot;  &quot;Value&quot;: &quot;2024-02-06T11:16:02.09Z&quot;&quot;\r\n\r\n\r\nThis is my query, can anyone please tell me what am I doing wrong? If I send this query in code, then it runs successfully, I can&#39;t determined what is wrong with this.\r\n\r\nMany thanks.\r\n\r\n   \r\n\r\n    MATCH (n:Node),(additionalDate:AdditionalDate)\r\n    WHERE (n.Id = &quot;xxxx1111xxxx11&quot;)\r\n    AND (additionalDate.DateType = &quot;1&quot;)\r\n    CREATE (additionalDate)-[additionalDateOf:AdditionalDateOf]-&gt;(n)\r\n    SET additionalDateOf = {\r\n      &quot;Value&quot;: &quot;2024-02-06T11:16:02.09Z&quot;\r\n    }\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77956127/create-node-and-set-a-value-in-a-relationship-neo4j",
      "title": "Create Node and Set a value in a relationship Neo4j"
    },
    {
      "tags": [
        "neo4j",
        "cypher",
        "graph-databases",
        "neo4j-apoc",
        "graph-data-science"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707220211,
          "post_id": 77946019,
          "comment_id": 137417071,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137417071_77946019"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 20343725,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
            "display_name": "Alp Buğra Aker",
            "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707221259,
          "post_id": 77946019,
          "comment_id": 137417269,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137417269_77946019"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1707251694,
          "post_id": 77946019,
          "comment_id": 137422924,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137422924_77946019"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 20343725,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
            "display_name": "Alp Buğra Aker",
            "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1707293958,
          "post_id": 77946019,
          "comment_id": 137427192,
          "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue#comment137427192_77946019"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 20343725,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
        "display_name": "Alp Buğra Aker",
        "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
      },
      "last_editor": {
        "reputation": 13,
        "user_id": 20343725,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu1LaptSzEdmJlHr9zqbwSN1xDt3eX4rhZom-V1B=k-s256",
        "display_name": "Alp Buğra Aker",
        "link": "https://stackoverflow.com/users/20343725/alp-bu%c4%9fra-aker"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1707294113,
      "creation_date": 1707205669,
      "last_edit_date": 1707294113,
      "question_id": 77946019,
      "share_link": "https://stackoverflow.com/q/77946019",
      "body_markdown": "I have a query like I wrote below. I couldn&#39;t solve the error I gave below even after a lot of effort. I encounter this error when I do any sorting operation. But not always, in specific cases. I think sometimes my query doesn&#39;t return Double(NaN) values most of the time, so I rarely encounter this error.\r\n\r\n\r\n```\r\nMATCH (news:News {newsId: &quot;/infografik/jurnalist/turkiye-sma-hastaligi-icin-yeni-adimlar-atiyor-26685&quot;})\r\nWITH news\r\nWHERE news.cleanTitle IS NOT NULL\r\n\r\nMATCH (otherNews:News {category: news.category})\r\nWHERE news &lt;&gt; otherNews AND otherNews.cleanTitle IS NOT NULL\r\n\r\nWITH otherNews,\r\n     apoc.text.sorensenDiceSimilarity(news.cleanTitle, otherNews.cleanTitle) AS sorensen\r\nORDER BY sorensen DESC\r\nLIMIT 10\r\nRETURN otherNews.title, sorensen, otherNews.category;\r\n```\r\n\r\nError:\r\n\r\n```\r\nNeo.ClientError.Statement.TypeError Wrong argument type: Can&#39;t coerce Double(NaN) to String\r\n```\r\n\r\n\r\n\r\nI want to see results sorted correctly. When I don&#39;t sort, I can see the results without any problems. But I need the sorted version.\r\nI tried converting the Sorensen value to string, eliminating Null or NaN values. But I was not successful.\r\n\r\nEdit:\r\n\r\nI saw that the error was resolved when I placed the &quot;LIMIT 10&quot; line above the &quot;RETURN&quot; line. But this time the results were very inconsistent. If I don&#39;t set any limits, I still encounter the same error. I can increase my limit amount up to a certain number depending on the data I use. As I get closer to the limit I can reach, the accuracy of my returned data increases. How can I overcome this problem?\r\n\r\nFix:\r\n\r\nChange to this piece of code solved my problem. Thanks to @Finbar Good.\r\n\r\n    apoc.text.sorensenDiceSimilarity(toString(news.cleanTitle), toString(otherNews.cleanTitle))",
      "link": "https://stackoverflow.com/questions/77946019/neo4j-cypher-query-doublenan-issue",
      "title": "Neo4j cypher query Double(NaN) issue"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 23351570,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/cf368d530acb206142855796bd108274?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "da_ny",
                "link": "https://stackoverflow.com/users/23351570/da-ny"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1707187197,
              "post_id": 77944207,
              "comment_id": 137412888,
              "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together/77944207#comment137412888_77944207"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 23351570,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/cf368d530acb206142855796bd108274?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "da_ny",
                "link": "https://stackoverflow.com/users/23351570/da-ny"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1707192385,
              "post_id": 77944207,
              "comment_id": 137413325,
              "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together/77944207#comment137413325_77944207"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1707192356,
          "last_edit_date": 1707192356,
          "creation_date": 1707170093,
          "answer_id": 77944207,
          "question_id": 77944096,
          "share_link": "https://stackoverflow.com/a/77944207",
          "body_markdown": "You can use two [CALL subqueries](https://neo4j.com/docs/cypher-manual/current/subqueries/call-subquery/):\r\n\r\n    MATCH (n:Thing) WHERE &lt; complicated list of conditions &gt;\r\n    WITH COLLECT(n) AS list\r\n    CALL {\r\n      WITH list\r\n      UNWIND list AS x\r\n      WITH x\r\n      ORDER BY x.label LIMIT 25\r\n      RETURN COLLECT(x) AS list1\r\n    }\r\n    CALL {\r\n      WITH list\r\n      UNWIND list AS y\r\n      MATCH (m:RelatedThing)-[:Relationship]-(y)\r\n      WITH DISTINCT m\r\n      ORDER BY m.label LIMIT 25\r\n      RETURN COLLECT(m) AS list2\r\n    }\r\n    RETURN list1, list2\r\n\r\n#### For very old neo4j versions without CALL subquery\r\n\r\nThe APOC procedure `apoc.cypher.run` has been supported for a long time, and can be used instead of the more recent `CALL subquery` feature:\r\n\r\n    MATCH (n:Thing) WHERE &lt; complicated list of conditions &gt;\r\n    WITH COLLECT(n) AS list\r\n    CALL apoc.cypher.run(&quot;\r\n      UNWIND list AS x\r\n      WITH x\r\n      ORDER BY x.label LIMIT 25\r\n      RETURN COLLECT(x) AS list1&quot;,\r\n      {list: list}\r\n    ) YIELD value as val1\r\n    CALL apoc.cypher.run(&quot;\r\n      UNWIND list AS y\r\n      MATCH (m:RelatedThing)-[:Relationship]-(y)\r\n      WITH DISTINCT m\r\n      ORDER BY m.label LIMIT 25\r\n      RETURN COLLECT(m) AS list2&quot;,\r\n      {list: list}\r\n     ) YIELD value as val2\r\n    RETURN val1.list1 AS list1, val2.list2 AS list2",
          "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together/77944207#77944207",
          "title": "Running two partially related cypher queries together"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 23351570,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf368d530acb206142855796bd108274?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "da_ny",
        "link": "https://stackoverflow.com/users/23351570/da-ny"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77944207,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1707192870,
      "creation_date": 1707168326,
      "last_edit_date": 1707192870,
      "question_id": 77944096,
      "share_link": "https://stackoverflow.com/q/77944096",
      "body_markdown": "I need to fetch two related collections from a Neo4j database.\r\n\r\nThe first one is to get some things that satisfy a list of conditions, something like this:\r\n\r\n```sql\r\nMATCH (n:Thing)\r\nWHERE [complicated list of conditions]\r\nRETURN n\r\nORDER BY n.label\r\nLIMIT 25\r\n```\r\n\r\nthe second one is to get nodes related to the nodes that satisfy the conditions, something like this:\r\n\r\n```sql\r\nMATCH (m:RelatedThing) -[:Relationship]-(n:Thing)\r\nWHERE [same complicated conditions about n]\r\nRETURN m\r\nORDER BY m.label \r\nLIMIT 25\r\n```\r\n\r\nCrucially, the m&#39;s don&#39;t have to be related to the first 25 n&#39;s that were returned by query 1.\r\n\r\nIt seems like there is a lot of repetition between these two queries. Is there a way to run them both in a single query?\r\n\r\nObviously this can be done in two queries, but reading around I haven&#39;t found a good way to run both queries together. It seems like maybe COLLECT could be useful, but it doesn&#39;t quite fit the use case.\r\n\r\nEDIT: I am looking for a solution that works in version 3.5.12",
      "link": "https://stackoverflow.com/questions/77944096/running-two-partially-related-cypher-queries-together",
      "title": "Running two partially related cypher queries together"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1707164537,
          "last_edit_date": 1707164537,
          "creation_date": 1707163019,
          "answer_id": 77943636,
          "question_id": 77934488,
          "share_link": "https://stackoverflow.com/a/77943636",
          "body_markdown": "You have a few errors in your query:\r\n - There is an illegal comma between the (unneeded) `WITH` clause and the following `CALL` clause.\r\n - You used the `batchMode: &quot;BATCH_SINGLE&quot;`\r\n   option but still expected the second Cypher statement to be able to\r\n   access `n` and `c` directly.\r\n\r\n*Apparently, you did actually have backticks around the property name &quot;GO ID&quot; -- to make the space character usable as part of the name. But for some reason the backticks were not visible characters in your question.*\r\n\r\nWhen you use the [BATCH_SINGLE](https://neo4j.com/labs/apoc/4.4/overview/apoc.periodic/apoc.periodic.iterate/#_batch_mode_batch_single) mode, an entire batch of `n` and `c` values are provided to the second Cypher statement via the `$_batch` parameter, as a list of results (e.g., `[{n: &lt;node1&gt;, c: &lt;node2&gt;}, {n: &lt;node3&gt;, c: &lt;node4&gt;}, ...]`).\r\n\r\nYou can just omit the `batchMode` option to get the default behavior, which is the one you expected:\r\n\r\n    CALL apoc.periodic.iterate(\r\n        &quot;MATCH (n:Genes),(c:n4sch__Class)\r\n         WHERE n.`GO ID` = c.n4sch__name\r\n         RETURN n, c&quot;,\r\n        &quot;CALL apoc.create.relationship(n, n.Qualifier, {}, c) YIELD rel\r\n         RETURN rel&quot;,\r\n         {batchSize:100}\r\n    )",
          "link": "https://stackoverflow.com/questions/77934488/neo4j-complex-dynamic-relationship-creation-with-batch-iteration/77943636#77943636",
          "title": "Neo4j complex dynamic relationship creation with batch iteration"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 17400510,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhNpWjKLypPqRjL4TVz5mkDZtLRuO6DELcB8Z0O=k-s256",
        "display_name": "Yoyo458 A",
        "link": "https://stackoverflow.com/users/17400510/yoyo458-a"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77943636,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1707164537,
      "creation_date": 1707016280,
      "question_id": 77934488,
      "share_link": "https://stackoverflow.com/q/77934488",
      "body_markdown": "I have a query that I&#39;ve been working on. Basically I have two sets of class type nodes, one called Genes and the other n4sch__Class, the Genes have a parameter &#39;GO ID&#39; that links them to the class category name. After getting all matching class nodes I want to create a relationship that is also based on the Gene nodes parameter &#39;Qualifier&#39;, and this parameter is dynamic so I need to use apoc.create.relationship. The query is also rather large so it needs to be batched. This is what I have so far but it is returning an error:\r\n\r\n\r\n`call apoc.periodic.iterate(\r\n&quot;MATCH (n:Genes),(c:n4sch__Class)\r\nWHERE n.`GO ID` = c.n4sch__name\r\nRETURN n,c&quot;,\r\n&quot;WITH n, c, \r\nCALL apoc.create.relationship(n, n.Qualifier, {}, c) YIELD rel RETURN rel&quot;,{batchMode: &quot;BATCH_SINGLE&quot;, BatchSize:100})`\r\n\r\n&quot;Invalid input &#39;apoc&#39;: expected ...(line 2, column 6 (offset: 17))\\r\\n&quot;CALL apoc.create.relationship(n, n.Qualifier, {}, c) YIELD rel RETURN rel&quot;\\r\\n      ^&quot;: 17",
      "link": "https://stackoverflow.com/questions/77934488/neo4j-complex-dynamic-relationship-creation-with-batch-iteration",
      "title": "Neo4j complex dynamic relationship creation with batch iteration"
    },
    {
      "tags": ["cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": -1,
                "user_type": "moderator",
                "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
                "display_name": "Community",
                "link": "https://stackoverflow.com/users/-1/community"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1707218908,
              "post_id": 77929580,
              "comment_id": 137416857,
              "link": "https://stackoverflow.com/questions/77929550/cypher-count-distinct-paths-between-two-nodes-disregarding-link-type/77929580#comment137416857_77929580"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 125,
            "user_id": 7009395,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/pkHSr.jpg?s=256&g=1",
            "display_name": "xygonyx",
            "link": "https://stackoverflow.com/users/7009395/xygonyx"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706903959,
          "creation_date": 1706903959,
          "answer_id": 77929580,
          "question_id": 77929550,
          "share_link": "https://stackoverflow.com/a/77929580",
          "body_markdown": "I have found the following query that works:\r\n\r\n    MATCH p=(a)-[*1..2]-(b)\r\n    where ID(a) = &quot;node1&quot;\r\n    and ID(b) = &quot;node2&quot;\r\n    return count(distinct(nodes(p)))\r\n\r\nIf there is a better way to do this I&#39;m all ears!",
          "link": "https://stackoverflow.com/questions/77929550/cypher-count-distinct-paths-between-two-nodes-disregarding-link-type/77929580#77929580",
          "title": "cypher: Count distinct paths between two nodes disregarding link type"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1707160827,
          "creation_date": 1707160827,
          "answer_id": 77943470,
          "question_id": 77929550,
          "share_link": "https://stackoverflow.com/a/77943470",
          "body_markdown": "This may be faster:\r\n\r\n    OPTIONAL MATCH (a)--(x)--(b)\r\n    WHERE ID(a) = 123 AND ID(b) = 456\r\n    WITH\r\n      COUNT(DISTINCT x) AS count2,\r\n      CASE WHEN EXISTS((a)--(b)) THEN 1 ELSE 0 END AS count1\r\n    RETURN count2 + count1 AS count\r\n\r\nTHE `OPTIONAL MATCH` allows the query to proceed even if there are no 2-step paths. `EXISTS((a)--(b))` returns `TRUE` as soon as any one-step relationship is found, avoiding unnecessary additional DB scanning. And `COUNT(DISTINCT x)` just counts distinct `x` nodes -- there is no need to generate path variables (`p`), extract their node lists, and compare the lists.",
          "link": "https://stackoverflow.com/questions/77929550/cypher-count-distinct-paths-between-two-nodes-disregarding-link-type/77943470#77943470",
          "title": "cypher: Count distinct paths between two nodes disregarding link type"
        }
      ],
      "owner": {
        "reputation": 125,
        "user_id": 7009395,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/pkHSr.jpg?s=256&g=1",
        "display_name": "xygonyx",
        "link": "https://stackoverflow.com/users/7009395/xygonyx"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 16,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1707160827,
      "creation_date": 1706903603,
      "question_id": 77929550,
      "share_link": "https://stackoverflow.com/q/77929550",
      "body_markdown": "I&#39;m use cypher to count the number of paths between two nodes.  I have this query:\r\n\r\n    MATCH p=(a)-[*1..2]-(b)\r\n    where ID(a) = &quot;node1&quot;\r\n    and ID(b) = &quot;node2&quot;\r\n    return COUNT(p)\r\n\r\nHowever, many of my nodes have multiple links to the same node with different relationship types.  I&#39;d like to ONLY count the distinct paths regardless of the relationship type.  \r\n\r\nFor example, the paths returned may be as follows:\r\n\r\n    (node1)-[rel_type_a]-(node3)-[rel_type_b]-(node2) \r\n    (node1)-[rel_type_c]-(node3)-[rel_type_d]-(node2) \r\n    (node1)-[rel_type_e]-(node3)-[rel_type_f]-(node2) \r\nThe query above counts this as 3 paths, but I only want to count this as a single path since all of the nodes are are the same, I&#39;m not interested in the relationship types.\r\n\r\nThanks in advance!\r\n",
      "link": "https://stackoverflow.com/questions/77929550/cypher-count-distinct-paths-between-two-nodes-disregarding-link-type",
      "title": "cypher: Count distinct paths between two nodes disregarding link type"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706895520,
              "post_id": 77928553,
              "comment_id": 137384837,
              "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes/77928553#comment137384837_77928553"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706908703,
              "post_id": 77928553,
              "comment_id": 137386720,
              "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes/77928553#comment137386720_77928553"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1706892168,
          "last_edit_date": 1706892168,
          "creation_date": 1706891744,
          "answer_id": 77928553,
          "question_id": 77928264,
          "share_link": "https://stackoverflow.com/a/77928553",
          "body_markdown": "Based on what you&#39;ve written in the question, the straightforward way would be to add constraints on the number of each relationship type in a `WHERE` clause:\r\n```sql\r\nMATCH path = (from:Station {id: 61})-[:IN]-&gt;(sec_from:Section), \r\n      (to:Station {id: 131})&lt;-[:OUT]-(sec_to:Section), \r\n      route = (sec_from)-[r:CONNECTION|EXCHANGE*1..103]-&gt;(sec_to) \r\nWHERE 1 &lt;= size([rel IN r WHERE rel:CONNECTION]) &lt;= 100 \r\n      AND size([rel IN r WHERE rel:EXCHANGE]) &lt;= 3\r\nRETURN route;\r\n```\r\nDepending on your data, a post-filter like this could be inefficient, as it might fetch many paths with &gt; 3 relationships of type `EXCHANGE` before discarding them at the `WHERE` clause stage.",
          "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes/77928553#77928553",
          "title": "How to set number of relations between nodes?"
        }
      ],
      "owner": {
        "reputation": 57,
        "user_id": 5158491,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Ondra",
        "link": "https://stackoverflow.com/users/5158491/ondra"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77928553,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1707015776,
      "creation_date": 1706889004,
      "last_edit_date": 1707015776,
      "question_id": 77928264,
      "share_link": "https://stackoverflow.com/q/77928264",
      "body_markdown": "I have created a transport route of station nodes connected by a :CONNECTION type session, if it is a transfer, I have a :EXCHANGE session type.\r\nI&#39;m looking for a route using a query\r\n\r\n```sql\r\nMATCH path = (from:Station {id: 61})-[:IN]-&gt;(sec_from:Section),\r\n              (to:Station {id: 131})&lt;-[:OUT]-(sec_to:Section),\r\n              route=(sec_from)-[:CONNECTION|EXCHANGE*]-&gt;(sec_to)\r\nRETURN route;\r\n```\r\n\r\nIf I want to search for direct connections only, I use:\r\n`route=(sec_from)-[:CONNECTION*]-&gt;(sec_to)` , it works. If I want to limit the number of connections to 5-10, I use: `route=(sec_from)-[:CONNECTION*5..10]-&gt;(sec_to)` also works. But if I want to have a connection of type :CONNECTION 1-100 and at the same time type :EXCHANGE 0-3, the query doesn&#39;t work:\r\n\r\n```sql\r\nMATCH path = (from:Station {id: 61})-[:IN]-&gt;(sec_from:Section),\r\n              (to:Station {id: 131})&lt;-[:OUT]-(sec_to:Section),\r\n              route=(sec_from)-[:CONNECTION*1..100|EXCHANGE*0..3]-&gt;(sec_to)\r\nRETURN route;\r\n```\r\n\r\nWhat is the correct syntax?\r\n\r\nThanks",
      "link": "https://stackoverflow.com/questions/77928264/how-to-set-number-of-relations-between-nodes",
      "title": "How to set number of relations between nodes?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706636928,
              "post_id": 77907874,
              "comment_id": 137349112,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349112_77907874"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706639485,
              "post_id": 77907874,
              "comment_id": 137349557,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349557_77907874"
            },
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1706641038,
              "post_id": 77907874,
              "comment_id": 137349797,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349797_77907874"
            },
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706641229,
              "post_id": 77907874,
              "comment_id": 137349826,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#comment137349826_77907874"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706639455,
          "last_edit_date": 1706639455,
          "creation_date": 1706631798,
          "answer_id": 77907874,
          "question_id": 77907493,
          "share_link": "https://stackoverflow.com/a/77907874",
          "body_markdown": "You only need a single [fulltext index](https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/full-text-indexes/#create-full-text-indexes) to cover the `name` and `code` properties of `Concept` and `Accession` nodes:\r\n\r\n    CREATE FULLTEXT INDEX nameAndCode FOR (n:Concept|Accession) ON EACH [n.name, n.code]\r\n\r\n*Note: Aside from `:Concept.name` and `:Accession.code`, the index would also include `:Concept.code` and `:Accession.name` if they happen to exist. If they do, change their property names to avoid polluting the index.*\r\n\r\nOnce that index is defined, this query may work for your use case:\r\n\r\n    // $name and $code are parameters\r\n    CALL db.index.fulltext.queryNodes(\r\n      &quot;nameAndCode&quot;,\r\n      &quot;&#39;&quot; + $name + &quot;&#39; OR &#39;&quot; + $code + &quot;&#39;&quot;) YIELD node, score\r\n    CALL {\r\n      WITH node\r\n      WITH node WHERE node.name = $name\r\n      RETURN node AS concept\r\n\r\n      UNION\r\n\r\n      WITH node\r\n      WITH node WHERE node.code = $code\r\n      MATCH (concept)-[:hasAccession]-&gt;(node)\r\n      RETURN concept\r\n    }\r\n    RETURN concept, score",
          "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77907874#77907874",
          "title": "Neo4j Full text Index that includes properties from a 1-n node"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 2877,
                "user_id": 529286,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
                "display_name": "zakmck",
                "link": "https://stackoverflow.com/users/529286/zakmck"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706642420,
              "post_id": 77908813,
              "comment_id": 137350024,
              "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77908813#comment137350024_77908813"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706641324,
          "creation_date": 1706641324,
          "answer_id": 77908813,
          "question_id": 77907493,
          "share_link": "https://stackoverflow.com/a/77908813",
          "body_markdown": "As you pointed out, you can have two indexes, however it will be a nightmare in the long term, `OR` queries will be fine, `AND` queries will just be non performant, combining FullTextSearch with `AND` on two indexes along with an optional pattern in Cypher will lead to very, very long and hard hours of pain.\r\n\r\nThere is no single answer tho, it will depend on the level of performance you need, the level of changes you can do at ingestion level or the level of pain you want to have. \r\n\r\n- @cybersam answer is a valid one\r\n- you can create new nodes representing the pairs of texts between concept and ascensions and have an index on that and automate this process during ingestion and vice versa\r\n- you can use [CDC][1] to automate all this process in the background\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cdc/current/",
          "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node/77908813#77908813",
          "title": "Neo4j Full text Index that includes properties from a 1-n node"
        }
      ],
      "owner": {
        "reputation": 2877,
        "user_id": 529286,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
        "display_name": "zakmck",
        "link": "https://stackoverflow.com/users/529286/zakmck"
      },
      "last_editor": {
        "reputation": 2877,
        "user_id": 529286,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=256&d=identicon&r=PG",
        "display_name": "zakmck",
        "link": "https://stackoverflow.com/users/529286/zakmck"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706641324,
      "creation_date": 1706628406,
      "last_edit_date": 1706637095,
      "question_id": 77907493,
      "share_link": "https://stackoverflow.com/q/77907493",
      "body_markdown": "I have a Neo4j schema with a 1-n relation:\r\n\r\n```haskhell\r\n// a concept might have multiple accessions\r\n(:Concept{name}) - [:hasAccession] -&gt; (:Accession{code, source})\r\n```\r\n\r\nI&#39;d like to create a &#39;nameOrAccession&#39; full-text index (ie, to support both speed and Lucene syntax like &quot;&#39;Computer Science&#39; OR &#39;CS00*&#39;&quot;), which should find nodes based on the `name` property or `Accession.code` property.\r\n\r\nI know I could achieve this by creating two full-text indexes, one for `Concept.name` and the other for `Accession.code`, and then I could combine the two in a single `UNION` query.\r\n\r\nBut is it possible to simplify the query side by creating one index only? Ie, one that is about a &#39;top&#39; (or &#39;central&#39;, or alike) node and would include properties from related nodes?\r\n\r\nMy understanding is it isn&#39;t possible, but I&#39;d like to check if I&#39;m missing something.\r\n\r\n**EDIT**: I also know I could include multiple node labels in the same index (`CREATE FULLTEXT INDEX ... FOR (n:Concept|Accession)...`), but that&#39;s not what I want, since this kind of index would find both concepts and accessions, while I want a query that finds concepts only, possibly based on their accession codes).",
      "link": "https://stackoverflow.com/questions/77907493/neo4j-full-text-index-that-includes-properties-from-a-1-n-node",
      "title": "Neo4j Full text Index that includes properties from a 1-n node"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1060,
                "user_id": 3091286,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ae4e7f3c3b0fce0498fc8538833b7ec7?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "John",
                "link": "https://stackoverflow.com/users/3091286/john"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706574177,
              "post_id": 77903083,
              "comment_id": 137340321,
              "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher/77903083#comment137340321_77903083"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1060,
                "user_id": 3091286,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ae4e7f3c3b0fce0498fc8538833b7ec7?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "John",
                "link": "https://stackoverflow.com/users/3091286/john"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706577848,
              "post_id": 77903083,
              "comment_id": 137340619,
              "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher/77903083#comment137340619_77903083"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706578162,
          "last_edit_date": 1706578162,
          "creation_date": 1706569173,
          "answer_id": 77903083,
          "question_id": 77902863,
          "share_link": "https://stackoverflow.com/a/77903083",
          "body_markdown": "You should read the documentation for [CALL](https://neo4j.com/docs/cypher-manual/current/clauses/call/), [WITH](https://neo4j.com/docs/cypher-manual/current/clauses/with/), and [UNION](https://neo4j.com/docs/cypher-manual/current/clauses/union/).\r\n\r\nHere are answers to your specific questions:\r\n\r\n - When you `CALL` a procedure that can return results, you generally must also specify a `YIELD` for at least one of the procedure&#39;s result fields and use the exact field name. You can use [SHOW PROCEDURES](https://neo4j.com/docs/cypher-manual/current/clauses/listing-procedures/) to get the signature of a procedure, which includes its result fields. For example, to get the signature of `apoc.create.addLabels`:\r\n\r\n       SHOW PROCEDURES YIELD name, signature\r\n       WHERE name = &#39;apoc.create.addLabels&#39;\r\n       RETURN signature\r\n\r\n - `YIELD` must specify at least one of the result field name(s) used in the procedure&#39;s signature. You cannot use arbitrary names, although you can immediately use `AS` to rename a field (e.g., `YIELD officalName AS foo`).\r\n\r\n - Cypher does not permit multiple `YIELD`s to produce the same variable name (in the same scope). To get around this, you can use `AS` to rename such variables. For example, this should work:\r\n\r\n    ```\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///myfile.csv&#39; AS row\r\n    MERGE (n:Person{id:row.ID,name:row.Name}) \r\n    WITH n,row\r\n    CALL apoc.create.addLabels(id(n), [row.Title,row.Position]) YIELD node AS _\r\n    CALL apoc.create.addLabels(id(n), split(row.Roles, &#39;,&#39;)) YIELD node AS __\r\n    CALL apoc.create.addLabels(id(n), split(row.Aliases, &#39;,&#39;)) YIELD node\r\n    RETURN node\r\n    ```\r\n\r\n   (*Also FYI: [WITH](https://neo4j.com/docs/cypher-manual/current/clauses/with/) changes the set of variables that are in scope. If any subsequent clauses need a variable, then a `WITH` clause must specify that variable.*)\r\n\r\n- As documented, a [UNION](https://neo4j.com/docs/cypher-manual/current/clauses/union/) &quot;combines the results of two or more queries into a single result set&quot;. You cannot just put `UNION` between arbitrary clauses.",
          "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher/77903083#77903083",
          "title": "How to stack consecutive APOC statements in Neo4j Cypher"
        }
      ],
      "owner": {
        "reputation": 1060,
        "user_id": 3091286,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/ae4e7f3c3b0fce0498fc8538833b7ec7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "John",
        "link": "https://stackoverflow.com/users/3091286/john"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77903083,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706578162,
      "creation_date": 1706565665,
      "question_id": 77902863,
      "share_link": "https://stackoverflow.com/q/77902863",
      "body_markdown": "I stumbled on the following syntax for setting labels during a `LOAD CSV` operation in Neo4j with Cypher.  It works but I don&#39;t understand *why*, and all of the following modifications break it:\r\n- Removing any of the `YIELD` statements\r\n- Changing `YIELD node` to `YIELD node2` or any other name on the 2nd and 3rd `YIELD` statements\r\n- Removing any of the repeated `WITH n,row` statements between the `YIELD` statements\r\n- Adding `UNION` between the calls (at least, I couldn&#39;t get it to work)\r\n\r\nCan anyone enlighten me?  I&#39;m a relative newcomer to Cypher and APOC and I&#39;d love to understand how to make repeated APOC calls properly. \r\n \r\n```cypher\r\nLOAD CSV WITH HEADERS FROM &#39;file:///myfile.csv&#39; AS row\r\nMERGE (n:Person{id:row.ID,name:row.Name}) \r\nWITH n,row\r\nCALL apoc.create.addLabels(id(n), [row.Title,row.Position] YIELD node\r\nWITH n,row\r\nCALL apoc.create.addLabels(id(n), split(row.Roles, &#39;,&#39;)) YIELD node \r\nWITH n,row\r\nCALL apoc.create.addLabels(id(n), split(row.Aliases, &#39;,&#39;)) YIELD node\r\n```\r\n\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77902863/how-to-stack-consecutive-apoc-statements-in-neo4j-cypher",
      "title": "How to stack consecutive APOC statements in Neo4j Cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706551973,
              "post_id": 77901640,
              "comment_id": 137337281,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901640#comment137337281_77901640"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706553184,
              "post_id": 77901640,
              "comment_id": 137337506,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901640#comment137337506_77901640"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706550152,
          "creation_date": 1706550152,
          "answer_id": 77901640,
          "question_id": 77901438,
          "share_link": "https://stackoverflow.com/a/77901640",
          "body_markdown": "To return paths from station A with `id = 1` to station B with `id = 25` via `Line` relationships with equal `Line_ID` properties:\r\n\r\n```sql\r\nMATCH (:Station {id: 1})-[r:Line]-&gt;+(:Station {id: 25})\r\nWHERE all(i IN range(0, size(r)-2) WHERE r[i].Line_ID = r[i+1].Line_ID)\r\n```",
          "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901640#77901640",
          "title": "Search route in NEO4J"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706553586,
              "post_id": 77901888,
              "comment_id": 137337558,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137337558_77901888"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706553847,
              "post_id": 77901888,
              "comment_id": 137337612,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137337612_77901888"
            },
            {
              "owner": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706554045,
              "post_id": 77901888,
              "comment_id": 137337651,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137337651_77901888"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 57,
                "user_id": 5158491,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Ondra",
                "link": "https://stackoverflow.com/users/5158491/ondra"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706558223,
              "post_id": 77901888,
              "comment_id": 137338344,
              "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#comment137338344_77901888"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706561771,
          "last_edit_date": 1706561771,
          "creation_date": 1706553070,
          "answer_id": 77901888,
          "question_id": 77901438,
          "share_link": "https://stackoverflow.com/a/77901888",
          "body_markdown": "This may be an efficient query, since the variable-length relationship pattern `[rs:Line *0..9 {id: r1.id}]` specifies a static `id`:\r\n\r\n    MATCH path = (start:Station {id: 1})-[r1:Line]-&gt;(:Station)\r\n        -[:Line *0..9 {id: r1.id}]-&gt;(:Station {id: 25})\r\n    RETURN path\r\n\r\nI imposed an arbitrary upper bound of 9 (for a total path length of up to 10) to avoid taking too long or running out of memory. Adjust the bound as appropriate for your data.\r\n\r\nIt is important to recognize that variable-length relationship queries have exponential complexity. If each node has `R` relevant relationships, then a path length upper bound of `N` can result in `R**N` database lookups. This is why it is important to set a reasonable upper bound (`N`).\r\n\r\n##### Specific `Line` `id`\r\n\r\nIf you want to specify the `Line` `id` to use, then the query can be simpler and much quicker (but you should still impose an upper bound on the path length). This query assumes you pass the following [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/):\r\n - `$line_id`: the desired `id` value\r\n - `$station_id_first` and `$station_id_last`\r\n\r\n       MATCH path = (:Station {id: $station_id_first})-[:Line *..9 {id: $line_id}]-&gt;(:Station {id: $station_id_last})\r\n       RETURN path\r\n",
          "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j/77901888#77901888",
          "title": "Search route in NEO4J"
        }
      ],
      "owner": {
        "reputation": 57,
        "user_id": 5158491,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/c1b657080ce80572ce8bfc489ef1f3cd?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Ondra",
        "link": "https://stackoverflow.com/users/5158491/ondra"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706561771,
      "creation_date": 1706547907,
      "question_id": 77901438,
      "share_link": "https://stackoverflow.com/q/77901438",
      "body_markdown": "please help me build the cypher:\r\n\r\nI have a NODES label :Station and they are connected using a directional relation :Line, where the Line property is e.g. the line number. NODES are multiple connected by different lines (with Line_ID property). I need a query about the route from Station A (e.g. id=1) to Station B (id=25), via the :Line session, but in such a way that multiple variants are offered, but each variant must have the same Line_ID in the session.\r\nMy query loops or &quot;skips&quot; during the search to a session with a different LINE_ID than the previous one. Thanks for advice!",
      "link": "https://stackoverflow.com/questions/77901438/search-route-in-neo4j",
      "title": "Search route in NEO4J"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 737,
                "user_id": 5106474,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fab7324caef036814f435900db0b0775?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "PhilJay",
                "link": "https://stackoverflow.com/users/5106474/philjay"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706538495,
              "post_id": 77900287,
              "comment_id": 137334657,
              "link": "https://stackoverflow.com/questions/77899930/unwind-an-empty-list-negatively-affects-outer-return-statement/77900287#comment137334657_77900287"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706537621,
          "last_edit_date": 1706537621,
          "creation_date": 1706537282,
          "answer_id": 77900287,
          "question_id": 77899930,
          "share_link": "https://stackoverflow.com/a/77900287",
          "body_markdown": "That `RETURN tag` is reducing the cardinality to zero when `$tagNames` is empty. To solve this, wrap the `CALL` in another `CALL` to preserve the cardinality of the first MATCH:\r\n```sql\r\nMATCH (i:Item {id: $itemId})\r\n\r\nOPTIONAL MATCH (i)-[previousRelations:hasTag]-&gt;(:Tag)\r\nDELETE previousRelations\r\n    \r\nWITH *\r\nCALL {\r\n  WITH i\r\n  CALL {\r\n    UNWIND $tagNames as tagName\r\n\r\n    MERGE (tag:Tag {name: tagName})\r\n    ON CREATE SET tag.id = randomUUID(), tag.createdAt = datetime()\r\n\r\n    RETURN tag\r\n  }\r\n  MERGE (i)-[:hasTag]-&gt;(tag)\r\n}\r\n\r\nRETURN i\r\n```",
          "link": "https://stackoverflow.com/questions/77899930/unwind-an-empty-list-negatively-affects-outer-return-statement/77900287#77900287",
          "title": "UNWIND an empty list negatively affects outer RETURN statement"
        }
      ],
      "owner": {
        "reputation": 737,
        "user_id": 5106474,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fab7324caef036814f435900db0b0775?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "PhilJay",
        "link": "https://stackoverflow.com/users/5106474/philjay"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77900287,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706537621,
      "creation_date": 1706533471,
      "question_id": 77899930,
      "share_link": "https://stackoverflow.com/q/77899930",
      "body_markdown": "I am trying to write a Cypher statement, which manages the creation and relationships of tag nodes according to a given list of tag names for an item.\r\n\r\nExample calling parameters:\r\n```json\r\n{\r\n  itemId: &quot;foo&quot;,\r\n  tagNames: [&quot;Tag1&quot;, &quot;Tag2&quot;, &quot;Tag3&quot;]\r\n}\r\n```\r\n\r\nThis is the Cypher statement:\r\n```Cypher\r\nMATCH (i:Item {id: $itemId})\r\n\r\nOPTIONAL MATCH (i)-[previousRelations:hasTag]-&gt;(:Tag)\r\nDELETE previousRelations\r\n\t\r\nWITH *\r\nCALL {\r\n\tUNWIND $tagNames as tagName\r\n\r\n\tMERGE (tag:Tag {name: tagName})\r\n\tON CREATE SET tag.id = randomUUID(), tag.createdAt = datetime()\r\n\r\n\tRETURN tag\r\n}\r\n\r\nMERGE (i)-[:hasTag]-&gt;(tag)\r\n\r\nRETURN i\r\n```\r\n\r\nThe tag node creation and assignment works all fine!\r\n\r\nMy problem lies in the `RETURN i` statement if my `$tagNames` list is empty (`[]`). In this case the statement returns *NULL* instead of `i` but I need it to always return `i`.\r\n\r\nI also tried the &quot;FOREACH-Trick&quot; as suggested here: https://stackoverflow.com/a/27578798/5106474\r\n\r\n```\r\n    FOREACH(ignoreMe IN CASE WHEN tag IS NOT NULL THEN [1] ELSE [] END |\r\n\t\tMERGE (i)-[:hasTag]-&gt;(tag)\r\n    )\r\n```\r\n\r\nBut still, same behaviour.\r\n\r\nThanks in advance for any suggestions!",
      "link": "https://stackoverflow.com/questions/77899930/unwind-an-empty-list-negatively-affects-outer-return-statement",
      "title": "UNWIND an empty list negatively affects outer RETURN statement"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706538041,
          "post_id": 77898928,
          "comment_id": 137334561,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137334561_77898928"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 23007772,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJwNUIWjqOEHB9hho6SsHf50JeIg9_7Em6j2gc4hByZ=k-s256",
            "display_name": "Peter Vecera",
            "link": "https://stackoverflow.com/users/23007772/peter-vecera"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706542477,
          "post_id": 77898928,
          "comment_id": 137335477,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137335477_77898928"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706550674,
          "post_id": 77898928,
          "comment_id": 137337072,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137337072_77898928"
        },
        {
          "owner": {
            "reputation": 1,
            "user_id": 23007772,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJwNUIWjqOEHB9hho6SsHf50JeIg9_7Em6j2gc4hByZ=k-s256",
            "display_name": "Peter Vecera",
            "link": "https://stackoverflow.com/users/23007772/peter-vecera"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706607798,
          "post_id": 77898928,
          "comment_id": 137343756,
          "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j#comment137343756_77898928"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23007772,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJwNUIWjqOEHB9hho6SsHf50JeIg9_7Em6j2gc4hByZ=k-s256",
        "display_name": "Peter Vecera",
        "link": "https://stackoverflow.com/users/23007772/peter-vecera"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1706546740,
      "creation_date": 1706523352,
      "last_edit_date": 1706546740,
      "question_id": 77898928,
      "share_link": "https://stackoverflow.com/q/77898928",
      "body_markdown": "Hello fellow programmers,\r\n\r\nI&#39;m new to graph databases and I was wondering whether my approach was optimal or there is room for improvement.\r\n\r\nI have a tree-like structure that changes a lot and I need to store it in my graph database.\r\n\r\nFor example:\r\n\r\n![this image][1]\r\n\r\nI receive updates in this form:\r\n\r\n```\r\n{\r\n   path=&quot;2/5/9/4&quot; \r\n   value=&quot;example&quot;\r\n}\r\n```\r\n\r\nCurrently, the leaves hold the values as they change over time, and ancestor nodes store the path:\r\n\r\n```\r\nmerge (a:A {label: 2})-[:NEXT]-&gt;(b:B {label:5})\r\nmerge (b)-[:NEXT]-&gt;(c:C {label:9})\r\nmerge (c)-[:NEXT]-&gt;(d:D {label:4})\r\n\r\non create set d.values = [&quot;example&quot;]\r\non match set d.values = d.values + &quot;example&quot;\r\n```\r\n\r\nIs there a more sophisticated/efficient solution?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WG1Dx.png",
      "link": "https://stackoverflow.com/questions/77898928/query-speed-optimalization-neo4j",
      "title": "Query speed optimalization (neo4j)"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 73,
                "user_id": 10578649,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/b5eZk.jpg?s=256&g=1",
                "display_name": "Roman March",
                "link": "https://stackoverflow.com/users/10578649/roman-march"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1706438585,
              "post_id": 77894062,
              "comment_id": 137323845,
              "link": "https://stackoverflow.com/questions/77893974/how-to-query-hierarchy-paths-without-the-root-node-as-list-of-paths/77894062#comment137323845_77894062"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1706429872,
          "creation_date": 1706429872,
          "answer_id": 77894062,
          "question_id": 77893974,
          "share_link": "https://stackoverflow.com/a/77894062",
          "body_markdown": "This query returns every tree (without the root node) of every `root` whose `name` is &quot;The Root Name&quot;.\r\n\r\n    MATCH (root {name: &quot;The Root Name&quot;})-[:metaClassOf]-&gt;(n)\r\n    WHERE NOT ()-[:metaClassOf]-&gt;(root)\r\n    MATCH p=(n)-[:metaClassOf*0..]-&gt;()\r\n    WITH root, COLLECT(p) AS ps\r\n    CALL apoc.convert.toTree(ps) YIELD value AS tree\r\n    RETURN root, tree\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77893974/how-to-query-hierarchy-paths-without-the-root-node-as-list-of-paths/77894062#77894062",
          "title": "How to query hierarchy paths without the root node (as list of paths)"
        }
      ],
      "owner": {
        "reputation": 73,
        "user_id": 10578649,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/b5eZk.jpg?s=256&g=1",
        "display_name": "Roman March",
        "link": "https://stackoverflow.com/users/10578649/roman-march"
      },
      "last_editor": {
        "reputation": 73,
        "user_id": 10578649,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/b5eZk.jpg?s=256&g=1",
        "display_name": "Roman March",
        "link": "https://stackoverflow.com/users/10578649/roman-march"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77894062,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1706438641,
      "creation_date": 1706427237,
      "last_edit_date": 1706438641,
      "question_id": 77893974,
      "share_link": "https://stackoverflow.com/q/77893974",
      "body_markdown": "I need to get JSON-tree of the hierarchy (or some hierarchies, if there is different roots for this pattern - as ```ps``` in my example is list of paths) that I could achieve by:\r\n```\r\nMATCH p=(parent)-[:metaClassOf*]-&gt;(child)\r\nWHERE NOT (parent)&lt;-[:metaClassOf]-()\r\nWITH COLLECT(p) AS ps\r\nCALL apoc.convert.toTree(ps) yield value\r\nRETURN value;\r\n```\r\nIf I need to query only part of the hierarchy, I could specify the desired leaf to act as a root in my query:\r\n```\r\nMATCH (root {name: &quot;The Root Name&quot;})\r\nMATCH p=(root)-[:metaClassOf*]-&gt;(child)\r\nWHERE NOT (root)&lt;-[:metaClassOf]-()\r\nWITH COLLECT(p) AS ps\r\nCALL apoc.convert.toTree(ps) yield value\r\nRETURN value;\r\n```\r\nBut how do I exclude the ```root``` node itself from the last query, as I don&#39;t want it to be in final JSON-tree? I will repeat, I need the list of paths that are coming from the root node, but without this root node and then convert them to JSON-tree.\r\n\r\nI can&#39;t achieve that by filtering nodes after ```UNWIND``` the paths, as I don&#39;t know how to combine them back to list of paths to be able to use ```apoc.convert.toTree(ps)``` then:\r\n```\r\nMATCH (root {name: &quot;The Root Name&quot;})\r\nMATCH p=(root)-[:metaClassOf*]-&gt;(C_Child)\r\nWHERE NOT (root)&lt;-[:metaClassOf]-()\r\nUNWIND nodes(p) as ns\r\nWITH ns as nss\r\nWHERE NOT nss.name= The Root Name&quot;\r\nreturn nss\r\n```",
      "link": "https://stackoverflow.com/questions/77893974/how-to-query-hierarchy-paths-without-the-root-node-as-list-of-paths",
      "title": "How to query hierarchy paths without the root node (as list of paths)"
    },
    {
      "tags": ["database", "neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 48,
            "user_id": 23302132,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/027f685c29f47cb666f897e80762c40e?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Arne",
            "link": "https://stackoverflow.com/users/23302132/arne"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 3,
          "is_accepted": true,
          "score": 3,
          "last_activity_date": 1706265925,
          "creation_date": 1706265925,
          "answer_id": 77885643,
          "question_id": 77885164,
          "share_link": "https://stackoverflow.com/a/77885643",
          "body_markdown": "The following query will go through all relationships in the database, enumerate all labels on start and end node and then count how often these pairs appear:\r\n\r\n```cypher\r\nMATCH (a)-[r]-&gt;(b)\r\nUNWIND labels(a) AS Label_Start\r\nUNWIND labels(b) AS Label_End\r\nRETURN\r\n  type(r) AS RelationshipType,\r\n  Label_Start,\r\n  Label_End,\r\n  count([Label_Start, Label_End]) AS Count\r\n```",
          "link": "https://stackoverflow.com/questions/77885164/get-number-of-relationships-for-each-relationship-type-and-label-in-neo4j/77885643#77885643",
          "title": "Get number of relationships for each relationship type and label in Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1706272664,
          "creation_date": 1706272664,
          "answer_id": 77886294,
          "question_id": 77885164,
          "share_link": "https://stackoverflow.com/a/77886294",
          "body_markdown": "Like with SQL the columns in Cypher are fixed (except if you use RETURN *), so it is hard to achieve a column per label-pair without knowing the possible label-pairs when you write the query.\r\n\r\nThere are other ways to solve it though. One is to have one row for each relationship type and label pair. Another one is to return a map for the different label pairs.\r\n\r\nAnother thing that we need to consider is that nodes can have many labels (and can even be without label).\r\n\r\nIf you have access to APOC Core you could do like this to get one row per node-pair-type:\r\n\r\n    MATCH (a)-[r]-&gt;(b)\r\n    WITH DISTINCT apoc.text.join(labels(a), &#39;_&#39;)+&#39;_&#39;+apoc.text.join(labels(b), &#39;_&#39;) AS Labels,r\r\n    RETURN type(r) AS Relationship_Type, Labels, COUNT(*) AS Count\r\n\r\nTo get the result as a map you could do:\r\n\r\n    MATCH (a)-[r]-&gt;(b)\r\n    WITH DISTINCT apoc.text.join(labels(a), &#39;_&#39;)+&#39;_&#39;+apoc.text.join(labels(b), &#39;_&#39;) AS Labels,r\r\n    WITH type(r) AS Relationship_Type, Labels, COUNT(*) AS c\r\n    RETURN Relationship_Type, apoc.map.fromPairs(collect([Labels, c])) AS Count",
          "link": "https://stackoverflow.com/questions/77885164/get-number-of-relationships-for-each-relationship-type-and-label-in-neo4j/77886294#77886294",
          "title": "Get number of relationships for each relationship type and label in Neo4j"
        }
      ],
      "owner": {
        "reputation": 324,
        "user_id": 2351983,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9bd16ff26298f01be75641d2e70b8896?s=256&d=identicon&r=PG",
        "display_name": "luanpo1234",
        "link": "https://stackoverflow.com/users/2351983/luanpo1234"
      },
      "last_editor": {
        "reputation": 48,
        "user_id": 23302132,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/027f685c29f47cb666f897e80762c40e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Arne",
        "link": "https://stackoverflow.com/users/23302132/arne"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77885643,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706273325,
      "creation_date": 1706260364,
      "last_edit_date": 1706273325,
      "question_id": 77885164,
      "share_link": "https://stackoverflow.com/q/77885164",
      "body_markdown": "I have this query:\r\n```\r\nMATCH (a:Label_A)-[r]-(b:Label_B)\r\nRETURN type(r) AS Relationship_Type, COUNT(*) AS Count\r\n```\r\n\r\nWhich yields a table with headers *Relationship_Type* and *Count* and the count for each type of relationship. &lt;br /&gt;\r\nI would like to  expand this table to have the counts for each type of label, so not just between `Label_A` and `Label_B`, but also `Label_A` and `Label_C`, `Label_B` and `Label_C`, etc. With corresponding columns such as `Count_Label_B_Label_C` for each possible combination. &lt;br /&gt;\r\nHow could that be achieved?",
      "link": "https://stackoverflow.com/questions/77885164/get-number-of-relationships-for-each-relationship-type-and-label-in-neo4j",
      "title": "Get number of relationships for each relationship type and label in Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1706050132,
          "last_edit_date": 1706050132,
          "creation_date": 1706047480,
          "answer_id": 77869514,
          "question_id": 77869128,
          "share_link": "https://stackoverflow.com/a/77869514",
          "body_markdown": "This query may work for your use case (assuming you only have one `Pantry`):\r\n\r\n    MATCH (:Pantry)-[has:HAS]-&gt;(i:Ingredient)&lt;-[required:REQUIRED]-(r:Recipe)\r\n    WHERE has.quantity &gt;= required.quantity\r\n    WITH r, COUNT(i) AS iCount\r\n    WHERE iCount = COUNT{ (r)-[:REQUIRED]-&gt;() }\r\n    RETURN r\r\n\r\nIt finds all ingredients in the pantry that have a sufficient quantity for any recipe, counts the number of such ingredients for each recipe, and efficiently filters for those recipes in which the sufficient-ingredient count equals the required-ingredient count.",
          "link": "https://stackoverflow.com/questions/77869128/neo4j-cypher-query-to-find-recipes-where-i-have-all-the-ingredients-and-a-suffic/77869514#77869514",
          "title": "Neo4j Cypher Query to find recipes where I have all the ingredients and a sufficient quantity"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1706047736,
          "creation_date": 1706047736,
          "answer_id": 77869533,
          "question_id": 77869128,
          "share_link": "https://stackoverflow.com/a/77869533",
          "body_markdown": "This returns all recipes that the Pantry has enough ingredients for:\r\n```sql\r\nMATCH (r:Recipe)\r\nWHERE all(enough IN \r\n        COLLECT {\r\n          MATCH (r)-[req:REQUIRED]-&gt;(i:Ingredient)\r\n          RETURN EXISTS { \r\n            (i)&lt;-[h:HAS]-(:Pantry) WHERE req.requires &lt;= h.has\r\n          }\r\n        } WHERE enough) \r\nRETURN r",
          "link": "https://stackoverflow.com/questions/77869128/neo4j-cypher-query-to-find-recipes-where-i-have-all-the-ingredients-and-a-suffic/77869533#77869533",
          "title": "Neo4j Cypher Query to find recipes where I have all the ingredients and a sufficient quantity"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 23288805,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocISbcN7jGaGlvoWmNpJX-aacxEgFlqgzbVOBS1QM5Oi=k-s256",
        "display_name": "mr_mars",
        "link": "https://stackoverflow.com/users/23288805/mr-mars"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77869514,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1706050132,
      "creation_date": 1706042154,
      "last_edit_date": 1706047392,
      "question_id": 77869128,
      "share_link": "https://stackoverflow.com/q/77869128",
      "body_markdown": "I am trying to write a query that will find recipes I can make based on 2 criteria. I need to have all the ingredients and I need to have a sufficient quantity of each ingredient.\r\n\r\nI have a graph structure like this: ![][1]\r\n\r\nI have recipe nodes with relationships to ingredients that specify the quantity of the ingredient I need. And I have Pantry node with relationships to ingredients that specify the quantity of the ingredient I actually have.\r\n\r\nI am trying to use the following query, but it is not handling quantities correctly, so it is returning recipes even if I don&#39;t have enough of all the ingredients.\r\n\r\n```\r\nMATCH (p:Pantry)-[has:HAS]-&gt;(i:Ingredient)\r\nWITH COLLECT(i) AS pantry_ingredients, COLLECT(has) AS pantry_quantity\r\nMATCH (r:Recipe)-[requires:REQUIRED]-&gt;(i:Ingredient)\r\n\r\nWITH pantry_ingredients, pantry_quantity, r, COLLECT(i) AS recipe_ingredients\r\nWHERE ALL(x IN recipe_ingredients WHERE x IN pantry_ingredients AND EXISTS{\r\n    MATCH (:Pantry)-[has:HAS]-&gt;(:Ingredient {name: x.name})&lt;-[requires:REQUIRED]-(:Recipe)      \r\n    WHERE has.quantity &gt;= requires.quantity})\r\n    \r\nRETURN r\r\n```\r\n\r\nHow can I modify this to correctly filter out recipes based on having the needed quantity?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lfM59.png",
      "link": "https://stackoverflow.com/questions/77869128/neo4j-cypher-query-to-find-recipes-where-i-have-all-the-ingredients-and-a-suffic",
      "title": "Neo4j Cypher Query to find recipes where I have all the ingredients and a sufficient quantity"
    },
    {
      "tags": ["graph", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 552,
                "user_id": 10755618,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3f5b603a7c9b4ee43abf5ea774d412d4?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Erdem Tuna",
                "link": "https://stackoverflow.com/users/10755618/erdem-tuna"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705856067,
              "post_id": 77855696,
              "comment_id": 137254597,
              "link": "https://stackoverflow.com/questions/77855511/neo4j-retrieve-nodes-of-graph-components/77855696#comment137254597_77855696"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1705854870,
          "creation_date": 1705854870,
          "answer_id": 77855696,
          "question_id": 77855511,
          "share_link": "https://stackoverflow.com/a/77855696",
          "body_markdown": "You can do it using the GDS strongly connected components procedure after projecting the relationships as undirected:\r\n```lang-cypher\r\n// Project the CONTAINS relationships as undirected so that traversals \r\n// disregard the directions\r\nCALL gds.graph.project(\r\n       &#39;components&#39;, \r\n       [&#39;NodeA&#39;, &#39;NodeB&#39;], \r\n       {CONTAINS: {orientation: &#39;UNDIRECTED&#39;}}\r\n);\r\n\r\n// Only show the NodeA nodes using the node:NodeA label predicate\r\nCALL gds.scc.stream(&#39;components&#39;, {})\r\nYIELD nodeId, componentId AS component\r\nWITH gds.util.asNode(nodeId) AS node, component \r\nWHERE node:NodeA \r\nRETURN node, component \r\nORDER BY component;\r\n```\r\n\r\nResults using your data:\r\n```\r\n+----------------------------------+\r\n| node                 | component |\r\n+----------------------------------+\r\n| (:NodeA {name: &quot;1&quot;}) | 0         |\r\n| (:NodeA {name: &quot;2&quot;}) | 0         |\r\n| (:NodeA {name: &quot;3&quot;}) | 0         |\r\n| (:NodeA {name: &quot;4&quot;}) | 0         |\r\n| (:NodeA {name: &quot;5&quot;}) | 4         |\r\n| (:NodeA {name: &quot;6&quot;}) | 4         |\r\n+----------------------------------+\r\n```",
          "link": "https://stackoverflow.com/questions/77855511/neo4j-retrieve-nodes-of-graph-components/77855696#77855696",
          "title": "Neo4j - Retrieve nodes of graph components"
        }
      ],
      "owner": {
        "reputation": 552,
        "user_id": 10755618,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3f5b603a7c9b4ee43abf5ea774d412d4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Erdem Tuna",
        "link": "https://stackoverflow.com/users/10755618/erdem-tuna"
      },
      "last_editor": {
        "reputation": 552,
        "user_id": 10755618,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3f5b603a7c9b4ee43abf5ea774d412d4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Erdem Tuna",
        "link": "https://stackoverflow.com/users/10755618/erdem-tuna"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77855696,
      "answer_count": 1,
      "score": 2,
      "last_activity_date": 1705854870,
      "creation_date": 1705851924,
      "last_edit_date": 1705852943,
      "question_id": 77855511,
      "share_link": "https://stackoverflow.com/q/77855511",
      "body_markdown": "I have the following graph structure in neo4j.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see, there are two components in this graph. I want to retrieve the blue nodes (nodes of type `NodeA` in the example) with their respective component. For the example, `4, 3, 2, 1` and `6, 5`.\r\n\r\nI tried `gcc` and `wcc` of neo4j, however it failed, maybe I could not use it properly. Besides, I tried writing custom queries using cypher, however, my results were not even close to the result that I wanted.\r\n\r\nYou can simulate the graph with the following commands.\r\n```\r\nCREATE (a:NodeA {name: &quot;1&quot;});\r\nCREATE (a:NodeA {name: &quot;2&quot;});\r\nCREATE (a:NodeA {name: &quot;3&quot;});\r\nCREATE (a:NodeA {name: &quot;4&quot;});\r\nCREATE (a:NodeA {name: &quot;5&quot;});\r\nCREATE (a:NodeA {name: &quot;6&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;11&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;12&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;13&quot;});\r\nCREATE (b:NodeB {anotherName: &quot;14&quot;});\r\nMATCH (a:NodeA {name: &quot;1&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;11&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;2&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;11&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;3&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;11&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;3&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;12&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;4&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;12&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;5&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;13&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;5&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;14&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\nMATCH (a:NodeA {name: &quot;6&quot;})\r\nMATCH(b:NodeB {anotherName: &quot;14&quot;})\r\nCREATE (a) - [:CONTAINS] -&gt; (b);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lcZu8.png",
      "link": "https://stackoverflow.com/questions/77855511/neo4j-retrieve-nodes-of-graph-components",
      "title": "Neo4j - Retrieve nodes of graph components"
    },
    {
      "tags": ["neo4j", "cypher", "azure-openai", "openaiembeddings"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705477746,
          "creation_date": 1705477746,
          "answer_id": 77830710,
          "question_id": 77830323,
          "share_link": "https://stackoverflow.com/a/77830710",
          "body_markdown": "There are two versions of APOC, APOC Core and APOC Extended. APOC Core is officially supported by Neo4j and is available in Aura (the cloud hosted version of Neo4j), Extended is not. The embedding methods are, however, only available in APOC Extended, so one reason could be that you installed APOC Core.\r\n\r\nBut in version 5.15.0 of Neo4j you no longer need APOC to do embeddings, there are officially supported versions of the embedding procedures/functions with this version that are also available in Aura (or will be very soon).\r\n\r\nIf you host your own database you need to install a package called neo4j-genai-plugin-5.XX.0.jar (copy it from the products folder to plugins and restart Neo4j). In Aura they are available by default.\r\n\r\nThe embedding methods are now called:\r\n\r\n    genai.vector.encode\r\n    genai.vector.encodeBatch\r\n\r\nYou use them like this (assuming you use OpenAI. It also support VertexAI and AWS Bedrock):\r\n\r\n    WITH genai.vector.encode($phrase, &quot;OpenAI&quot;, {token: $apiKey}) AS embedding\r\n\r\nwhere $phrase is a single string to embed\r\n\r\nor\r\n\r\n    CALL genai.vector.encodeBatch([$phrase1, $phrase2], &quot;OpenAI&quot;, {token: $apiKey}) yield index, resource, vector\r\n\r\nif you have multiple phrases that you want to batch embed\r\n\r\nSo with your example it would be\r\n\r\n    WITH genai.vector.encode(&quot;Are there any news regarding return to office policies?&quot;, &quot;OpenAI&quot;, {token: &quot;{openai_api_key}&quot;}) AS embedding\r\n    MATCH (c:Chunk) WITH c, gds.similarity.cosine(c.embedding, embedding) AS score ORDER BY score DESC LIMIT 3 RETURN c.text, score",
          "link": "https://stackoverflow.com/questions/77830323/can-we-use-apoc-ml-openai-embediing-with-neoj-desktop/77830710#77830710",
          "title": "Can we use apoc.ml.openai.embediing with Neo$j desktop?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23256411,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/768e519eba430296035bcb5e7d4dc950?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Amit Pawar",
        "link": "https://stackoverflow.com/users/23256411/amit-pawar"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705477746,
      "creation_date": 1705472303,
      "question_id": 77830323,
      "share_link": "https://stackoverflow.com/q/77830323",
      "body_markdown": "I want to query neo4j database and get the results converted to natural language using LLM? \r\nCan it be done in neo4j desktop. I have installed APOC plugin ,but I  don&#39;t see any apoc.ml procedure in it.\r\n\r\nPrompt example:\r\n`#Are there any news regarding return to office policies?\r\nCALL apoc.ml.openai.embedding([&quot;Are there any news regarding return to office policies?&quot;], \r\n   &quot;{openai_api_key}&quot;) YIELD embedding\r\nMATCH (c:Chunk)\r\nWITH c, gds.similarity.cosine(c.embedding, embedding) AS score\r\nORDER BY score DESC LIMIT 3\r\nRETURN c.text, score`\r\n\r\nI am getting this error when i try using the above query in neo4j desktop:\r\nNeo.ClientError.Procedure.ProcedureNotFound\r\nThere is no procedure with the name `apoc.ml.openai.embedding` registered for this database instance. Please ensure you&#39;ve spelled the procedure name correctly and that the procedure is properly deployed.",
      "link": "https://stackoverflow.com/questions/77830323/can-we-use-apoc-ml-openai-embediing-with-neoj-desktop",
      "title": "Can we use apoc.ml.openai.embediing with Neo$j desktop?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-parallel-runtime"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1705483383,
          "creation_date": 1705483383,
          "answer_id": 77831248,
          "question_id": 77829427,
          "share_link": "https://stackoverflow.com/a/77831248",
          "body_markdown": "It is not guaranteed. Here is what the Cypher manual says about it:\r\n\r\n&gt; When ORDER BY is present on a WITH clause , the immediately following\r\n&gt; clause will receive records in the specified order. The order is not\r\n&gt; guaranteed to be retained after the following clause, unless that also\r\n&gt; has an ORDER BY subclause.\r\n\r\nSlotted and Pipelined will likely preserve ordering, even if not guaranteed, but Parallel will likely not.\r\n\r\nhttps://neo4j.com/docs/cypher-manual/current/clauses/order-by/#order-with",
          "link": "https://stackoverflow.com/questions/77829427/neo4j-cypher-order-by-in-the-middle-of-the-query-and-expected-behaviour-on-paral/77831248#77831248",
          "title": "Neo4j Cypher ORDER BY in the middle of the query and expected behaviour on PARALLEL runtime"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77831248,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1705483383,
      "creation_date": 1705452297,
      "question_id": 77829427,
      "share_link": "https://stackoverflow.com/q/77829427",
      "body_markdown": "In a Cypher query, I can insert `ORDER BY` in the middle of the query, for example\r\n\r\n    MATCH (p:Product)\r\n    WITH p\r\n    ORDER BY p.id DESC \r\n    LIMIT 5\r\n    MATCH (p)-[:CREATED_BY]-&gt;(u:User)\r\n    RETURN p.id, u.name\r\n\r\nOn the `SLOTTED` or `PIPELINED` runtime, I will receive properly ordered results. For example:\r\n\r\n    p.id | u.name\r\n    ---------------\r\n    5    | someName\r\n    4    | someName\r\n    3    | someName\r\n    2    | someName\r\n    1    | someName\r\n\r\nShould I expect the same result (maintaining the proper order) when using the `PARALLEL` runtime, even if I have additional `MATCH` statements after the `ORDER BY` clause?",
      "link": "https://stackoverflow.com/questions/77829427/neo4j-cypher-order-by-in-the-middle-of-the-query-and-expected-behaviour-on-paral",
      "title": "Neo4j Cypher ORDER BY in the middle of the query and expected behaviour on PARALLEL runtime"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-parallel-runtime"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1705429387,
          "post_id": 77814894,
          "comment_id": 137205500,
          "link": "https://stackoverflow.com/questions/77814894/neo4j-on-parallel-runtime-returns-different-results-different-elements-order-c#comment137205500_77814894"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 0,
      "score": 1,
      "last_activity_date": 1705232676,
      "creation_date": 1705232676,
      "question_id": 77814894,
      "share_link": "https://stackoverflow.com/q/77814894",
      "body_markdown": "I am testing the new Neo4j PARALLEL runtime and am unable to pass my tests because my queries return different results (different element order) compared to SLOTTED or PIPELINED. \r\n\r\nFor example, in the following query, the result is dancing all of the time:\r\n\r\n```\r\nCYPHER runtime = parallel\r\nMATCH (dg:DecisionGroup {\r\n  id: -2\r\n})-[rdgd: CONTAINS ]-&gt; ( childD:Profile )\r\nMATCH (childD)-[mhvo:HAS_VOTE_ON]-(mc:Criterion)\r\nWHERE mc.id IN [9760, 9761, 9757, 9758, 9759] + []\r\nWITH childD , collect(mhvo) AS mhvos\r\nWHERE size(mhvos) &gt;= size([9760, 9761, 9757, 9758, 9759])\r\nWITH childD\r\nWHERE (childD.`active` = true )\r\nWITH childD\r\nWITH childD\r\nMATCH (childDStat:JobableStatistic {\r\n  jobableId: childD.id\r\n})\r\nWITH childD, childDStat\r\nUNWIND [9760, 9761, 9757, 9758, 9759] AS dCId\r\nWITH childD, childDStat, dCId + coalesce({}[toString(dCId)], []) AS cGroup\r\nWHERE NOT AlL(x IN cGroup\r\nWHERE x IN childDStat.zeroCriterionIds )\r\nWITH childD, childDStat, collect(cGroup) AS cGroups\r\nWHERE size(cGroups) &gt;= size([9760, 9761, 9757, 9758, 9759])\r\nUNWIND cGroups AS cGroup\r\nWITH childD, childDStat, cGroup\r\nWHERE ANY(x IN cGroup\r\nWHERE x IN childDStat.detailedCriterionIds)\r\nWITH childD, childDStat, collect(cGroup) AS cGroups\r\nWHERE size(cGroups) &gt;= size([9760, 9761, 9757, 9758, 9759])\r\nWITH childD, childDStat, size(cGroups) AS cGroupsSize, cGroups\r\nUNWIND cGroups AS cGroup\r\nWITH childD, childDStat, cGroups, cGroupsSize, cGroup\r\nUNWIND cGroup AS cId\r\nWITH childD, childDStat, cGroups, cGroupsSize, cGroup, cId, cGroup[0] AS cG0\r\nWITH childD, childDStat, cGroups, cGroupsSize, cGroup, cId, cG0, {\r\n  `9759`:1.0, `9758`:1.0, `9760`:1.0, `9761`:1.0, `9757`:1.0\r\n}[toString(cG0)] AS criterionAvgVoteWeight, {\r\n  `9759`:0, `9758`:0, `9760`:0, `9761`:0, `9757`:0\r\n}[toString(cG0)] AS criterionExperienceMonth\r\nWHERE (criterionAvgVoteWeight = 0 OR criterionAvgVoteWeight &lt;= childDStat[&#39;criterionAvgVoteWeights.&#39; + cId]) AND (criterionExperienceMonth = 0 OR criterionExperienceMonth &lt;= childDStat[&#39;criterionExperienceMonths.&#39; + cId])\r\nWITH childD, childDStat, cGroups, cGroupsSize, collect(cId) AS cIds\r\nUNWIND cGroups AS cGroup\r\nWITH childD, childDStat, cGroup, cGroupsSize, cIds\r\nWHERE ANY(x IN cIds\r\nWHERE x IN cGroup)\r\nWITH childD, childDStat, cGroupsSize, collect(cGroup) AS cGroups\r\nWHERE size(cGroups) &gt;= cGroupsSize\r\nWITH childD, childDStat\r\nUNWIND [9760, 9761, 9757, 9758, 9759] AS cId\r\nWITH childD, childDStat, cId, {\r\n  `9759`:1.0, `9758`:1.0, `9760`:1.0, `9761`:1.0, `9757`:1.0\r\n}[toString(cId)] AS criterionCoefficient\r\nWITH childD, sum(criterionCoefficient * childDStat[&#39;criterionAvgVoteWeights.&#39; + cId]) AS weight, sum(childDStat[&#39;criterionTotalVotes.&#39; + cId]) AS totalVotes, sum(criterionCoefficient) AS criterionCoefficientSum\r\nWITH childD, weight, totalVotes, criterionCoefficientSum\r\nWITH collect({`childD`:childD , `weight`:weight, `totalVotes`: totalVotes }) AS aggregate\r\nWITH aggregate, size(aggregate) AS count\r\nUNWIND aggregate AS item\r\nWITH count, item.childD AS childD , item.weight AS weight, item.totalVotes AS totalVotes\r\nMATCH (dg:DecisionGroup {\r\n  id: -2\r\n})-[rdgd: CONTAINS ]-&gt;(childD)\r\nOPTIONAL MATCH (childD)-[ru:CREATED_BY]-&gt;(u:User)\r\nOPTIONAL MATCH (jobable:Decision:Vacancy {\r\n  id: 4928\r\n})\r\nRETURN count, childD AS decision, dg, rdgd , u, ru , jobable.id AS jobableId , weight, totalVotes, [ (jobable)-[vg1:HAS_VOTE_ON]-&gt;(c1:Criterion) | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS jobableWeightedCriteria, [(jobable)-[:HAS_VOTE_ON]-&gt;(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE c1.id IN childD.detailedCriterionIds | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS weightedCriteria , [ (c1t:Translation:BaseEntity)&lt;-[rc1t: CONTAINS ]-(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE EXISTS ((jobable)-[:HAS_VOTE_ON]-&gt;(c1)) AND c1t.iso6391 = &#39;uk&#39; AND c1.id IN childD.detailedCriterionIds | {\r\n  entityId: toInteger(c1.id), translation: c1t\r\n} ] AS weightedCriteriaTranslations , [ (jobable)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS jobableCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS decisionCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(ce)), translation: trans\r\n} ] AS decisionCompositeEntitiesTranslations, [ (childD)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(childD.id), translation: trans\r\n} ] AS decisionTranslations, [ (rc:Criterion)-[*0]-&gt;()\r\nWHERE rc.id IN childD.replaceableCriterionIds | {\r\n  entity: rc\r\n} ] AS decisionReplaceableCriteria, [ (rc:Criterion)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE rc.id IN childD.replaceableCriterionIds AND trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(rc)), translation: trans\r\n} ] AS decisionReplaceableCriteriaTranslations, COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:POTENTIAL_PROFILE]-(childD) } AS potentialJobablesCount , COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:RELEVANT_PROFILE]-(childD) } AS relevantJobablesCount \r\n\r\nORDER BY weight DESC, childD.createdAt DESC SKIP 0\r\nLIMIT 100\r\n```\r\n\r\nWhen executed multiple times, this query returns records in arbitrary order with varying weights. One time weight=25 is on the first place.. another time - weight=10 on the first place. What could be the cause of this?\r\n\r\nWith `CYPHER runtime = pipelined` this query is working fine.\r\n\r\nI may be wrong, but it looks like the pattern comprehensive or COUNT subquery somehow affects the query ordering, specifically this part:\r\n\r\n```\r\n, [ (jobable)-[vg1:HAS_VOTE_ON]-&gt;(c1:Criterion) | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS jobableWeightedCriteria, [(jobable)-[:HAS_VOTE_ON]-&gt;(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE c1.id IN childD.detailedCriterionIds | {\r\n  criterion: c1, relationship: vg1\r\n} ] AS weightedCriteria , [ (c1t:Translation:BaseEntity)&lt;-[rc1t: CONTAINS ]-(c1:Criterion)&lt;-[vg1:HAS_VOTE_ON]-(childD)\r\nWHERE EXISTS ((jobable)-[:HAS_VOTE_ON]-&gt;(c1)) AND c1t.iso6391 = &#39;uk&#39; AND c1.id IN childD.detailedCriterionIds | {\r\n  entityId: toInteger(c1.id), translation: c1t\r\n} ] AS weightedCriteriaTranslations , [ (jobable)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS jobableCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity) | {\r\n  entity: ce\r\n} ] AS decisionCompositeEntities, [ (childD)-[:WORK_LOCATED_IN|EMPLOYMENT_TYPE_AS|READY_TO|EMPLOYMENT_AS|WORK_TIME_ZONE|BELONGS_TO|LOCATED_IN|COMPANY|WORK_PERMIT_IN|COMPANY_TYPE_OF]-&gt;(ce:CompositeEntity)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(ce)), translation: trans\r\n} ] AS decisionCompositeEntitiesTranslations, [ (childD)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(childD.id), translation: trans\r\n} ] AS decisionTranslations, [ (rc:Criterion)-[*0]-&gt;()\r\nWHERE rc.id IN childD.replaceableCriterionIds | {\r\n  entity: rc\r\n} ] AS decisionReplaceableCriteria, [ (rc:Criterion)-[: CONTAINS ]-&gt;(trans:Translation:BaseEntity)\r\nWHERE rc.id IN childD.replaceableCriterionIds AND trans.iso6391 = &#39;uk&#39; | {\r\n  entityId: toInteger(id(rc)), translation: trans\r\n} ] AS decisionReplaceableCriteriaTranslations, COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:POTENTIAL_PROFILE]-(childD) } AS potentialJobablesCount , COUNT {\r\n  (:Vacancy:Jobable:BaseEntity {status: &#39;APPROVED&#39;, active: true\r\n})&lt;-[:RELEVANT_PROFILE]-(childD) } AS relevantJobablesCount \r\n```\r\n\r\nHow to make the query working correctly on Neo4j PARALLEL runtime?",
      "link": "https://stackoverflow.com/questions/77814894/neo4j-on-parallel-runtime-returns-different-results-different-elements-order-c",
      "title": "Neo4j on PARALLEL runtime returns different results (different elements order) compared to SLOTTED or PIPELINED"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704822642,
              "post_id": 77788459,
              "comment_id": 137134598,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137134598_77788459"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704823412,
              "post_id": 77788459,
              "comment_id": 137134735,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137134735_77788459"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704824850,
              "post_id": 77788459,
              "comment_id": 137134964,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137134964_77788459"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704835643,
              "post_id": 77788459,
              "comment_id": 137136469,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137136469_77788459"
            },
            {
              "owner": {
                "reputation": 680,
                "user_id": 7253302,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://www.gravatar.com/avatar/768296adbdf300649e725234a11ff942?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "LizzAlice",
                "link": "https://stackoverflow.com/users/7253302/lizzalice"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704892366,
              "post_id": 77788459,
              "comment_id": 137143061,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137143061_77788459"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704898450,
              "post_id": 77788459,
              "comment_id": 137144321,
              "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#comment137144321_77788459"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1704821498,
          "last_edit_date": 1704821498,
          "creation_date": 1704819403,
          "answer_id": 77788459,
          "question_id": 77788323,
          "share_link": "https://stackoverflow.com/a/77788459",
          "body_markdown": "The `( )` in your first `MATCH` could be interpreted as a single node pattern. But you can declare at most a single variable in each node pattern, and so `(a, b)` raises a syntax error. \r\n\r\nIn any case, it doesn&#39;t look like you really need the first two lines. This is a valid query (if `n` is replaced with a positive integer), that binds to start nodes with name `&#39;node1name&#39;` and end nodes with name `&#39;node2name&#39;`:\r\n```sql\r\nMATCH path = (a)-[*..n]-(b)\r\nWHERE all(relName IN [&#39;relname1&#39;, &#39;relname2&#39;] \r\n            WHERE any(rel IN relationships(path) WHERE rel.display_name = relName)) \r\nAND a.name = &#39;node1name&#39; and b.name = &#39;node2name&#39;\r\nRETURN path\r\n```",
          "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations/77788459#77788459",
          "title": "Neo4j Cypher query for all paths that contain certain nodes and relations"
        }
      ],
      "owner": {
        "reputation": 680,
        "user_id": 7253302,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://www.gravatar.com/avatar/768296adbdf300649e725234a11ff942?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "LizzAlice",
        "link": "https://stackoverflow.com/users/7253302/lizzalice"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77788459,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1704821498,
      "creation_date": 1704818022,
      "question_id": 77788323,
      "share_link": "https://stackoverflow.com/q/77788323",
      "body_markdown": "I need a cypher query that will match all paths of a certain length n that contain the specified nodes and specified edges. I developed a query, but I am getting a syntax error and I am not sure why, as I am new to cypher\r\n```\r\nMATCH (a, b)\r\nWITH a, b\r\nMATCH path = (a)-[*..n]-(b)\r\nWHERE ALL(relName IN [&#39;relname1&#39;, &#39;relname2&#39;] \r\n   WHERE ANY(rel IN relationships(path) WHERE rel.display_name = relName)\r\nAND a.name = &#39;node1name&#39; and b.name = &#39;node2name&#39;\r\nRETURN path\r\n```\r\n\r\nThe syntax error is \r\n```\r\nInvalid input &#39;a&#39;: expected &quot;(&quot;, &quot;ALL&quot;, &quot;ANY&quot; or &quot;SHORTEST&quot; (line 1, column 8 (offset: 7))\r\n&quot;MATCH (a, b)&quot;\r\n        ^\r\n```",
      "link": "https://stackoverflow.com/questions/77788323/neo4j-cypher-query-for-all-paths-that-contain-certain-nodes-and-relations",
      "title": "Neo4j Cypher query for all paths that contain certain nodes and relations"
    },
    {
      "tags": ["php", "graph", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704826620,
          "post_id": 77787297,
          "comment_id": 137135202,
          "link": "https://stackoverflow.com/questions/77787297/how-to-convert-labelsc0-in-neo4j-cypher-query-to-a-php-cypher-dsl#comment137135202_77787297"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704848429,
          "post_id": 77787297,
          "comment_id": 137137682,
          "link": "https://stackoverflow.com/questions/77787297/how-to-convert-labelsc0-in-neo4j-cypher-query-to-a-php-cypher-dsl#comment137137682_77787297"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 1402259,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df5c981dff3718b66f45e953948f3b17?s=256&d=identicon&r=PG",
            "display_name": "user1402259",
            "link": "https://stackoverflow.com/users/1402259/user1402259"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704877925,
          "post_id": 77787297,
          "comment_id": 137140574,
          "link": "https://stackoverflow.com/questions/77787297/how-to-convert-labelsc0-in-neo4j-cypher-query-to-a-php-cypher-dsl#comment137140574_77787297"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 1402259,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df5c981dff3718b66f45e953948f3b17?s=256&d=identicon&r=PG",
            "display_name": "user1402259",
            "link": "https://stackoverflow.com/users/1402259/user1402259"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704878684,
          "post_id": 77787297,
          "comment_id": 137140712,
          "link": "https://stackoverflow.com/questions/77787297/how-to-convert-labelsc0-in-neo4j-cypher-query-to-a-php-cypher-dsl#comment137140712_77787297"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704909074,
          "post_id": 77787297,
          "comment_id": 137146392,
          "link": "https://stackoverflow.com/questions/77787297/how-to-convert-labelsc0-in-neo4j-cypher-query-to-a-php-cypher-dsl#comment137146392_77787297"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 1402259,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/df5c981dff3718b66f45e953948f3b17?s=256&d=identicon&r=PG",
        "display_name": "user1402259",
        "link": "https://stackoverflow.com/users/1402259/user1402259"
      },
      "last_editor": {
        "reputation": 11,
        "user_id": 1402259,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/df5c981dff3718b66f45e953948f3b17?s=256&d=identicon&r=PG",
        "display_name": "user1402259",
        "link": "https://stackoverflow.com/users/1402259/user1402259"
      },
      "comment_count": 5,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1704809920,
      "creation_date": 1704808565,
      "last_edit_date": 1704809920,
      "question_id": 77787297,
      "share_link": "https://stackoverflow.com/q/77787297",
      "body_markdown": "I have this code, but am confused about how to convert it to php-cypher-dsl! even ChatGPT doesn&#39;t know LOL\r\nBTW: the documentation does not cover all aspects of this great lib, is there another doc?\r\n\r\n```\r\n                MATCH (node)-[r]-&gt;(c)\r\n                where \r\n                (labels(c)[0] = &quot;SubCategoryM&quot; or labels(c)[0] = &quot;CategoryM&quot;)\r\n                and (c.status=1 OR c.status=&quot;1&quot;) \r\n                and id(node)=$node_id\r\n                return \r\n                id(c) as id,\r\n                c.name as name,\r\n                c.slug as slug\r\n```\r\n\r\nhttps://github.com/neo4j-php/php-cypher-dsl\r\n\r\nThank you",
      "link": "https://stackoverflow.com/questions/77787297/how-to-convert-labelsc0-in-neo4j-cypher-query-to-a-php-cypher-dsl",
      "title": "How to convert labels(c)[0] in Neo4j cypher query to a PHP cypher DSL?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704704216,
          "post_id": 77778088,
          "comment_id": 137117541,
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b#comment137117541_77778088"
        },
        {
          "owner": {
            "reputation": 197,
            "user_id": 8980538,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Higsn",
            "link": "https://stackoverflow.com/users/8980538/higsn"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1704705823,
          "post_id": 77778088,
          "comment_id": 137117785,
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b#comment137117785_77778088"
        },
        {
          "owner": {
            "reputation": 197,
            "user_id": 8980538,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Higsn",
            "link": "https://stackoverflow.com/users/8980538/higsn"
          },
          "reply_to_user": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704706297,
          "post_id": 77778088,
          "comment_id": 137117891,
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b#comment137117891_77778088"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704779310,
              "post_id": 77779757,
              "comment_id": 137127243,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137127243_77779757"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704793358,
              "post_id": 77779757,
              "comment_id": 137129141,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137129141_77779757"
            },
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704874039,
              "post_id": 77779757,
              "comment_id": 137139929,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137139929_77779757"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704879314,
              "post_id": 77779757,
              "comment_id": 137140819,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137140819_77779757"
            },
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704901339,
              "post_id": 77779757,
              "comment_id": 137144862,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137144862_77779757"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704904586,
              "post_id": 77779757,
              "comment_id": 137145507,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#comment137145507_77779757"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1704804708,
          "last_edit_date": 1704804708,
          "creation_date": 1704714901,
          "answer_id": 77779757,
          "question_id": 77778088,
          "share_link": "https://stackoverflow.com/a/77779757",
          "body_markdown": "**Simple case with no cycles**\r\n\r\nIf you are using Neo4j 5.9+, you can use the following [quantified path pattern](https://neo4j.com/docs/cypher-manual/current/patterns/reference/#quantified-path-patterns) to get each distinct rule chain:\r\n```sql\r\nMATCH path = (:Rule {name: &#39;rule_1&#39;}) \r\n        (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (r) \r\nWHERE NOT EXISTS { (r)-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule) }\r\nRETURN [n IN nodes(path) WHERE n:Rule | n.name] AS ruleChain\r\n```\r\n\r\nThe `WHERE NOT EXISTS` is there to ensure the results include only the complete rule chains and not any subsets of them, as it makes sure there are no more rules to expand the rule chain to.\r\n\r\n**Handling cycles in the rules graph**\r\n\r\nIf there are cycles in the rules graph, the above will return all unique pathways. In such a case, separating out the cycle-free rule chains from the cycles attached to those rules would be useful. This query returns the cycle-free rule chains:\r\n```sql\r\nMATCH (a:Rule {name: &#39;rule_1&#39;})\r\nMATCH path = (a) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (b) \r\nWHERE NOT EXISTS { (b)-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule) } \r\nAND COUNT { WITH path UNWIND nodes(path) AS n RETURN DISTINCT n } =\r\n    size(nodes(path))\r\nRETURN [n IN nodes(path) WHERE n:Rule | n.name] AS ruleChain\r\n```\r\nThis returns all cycles that those rule chains encounter, including the variables they target:\r\n```sql\r\nMATCH (a:Rule {name: &#39;rule_1&#39;})\r\nMATCH path = (a) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+\r\nUNWIND [n IN nodes(path) WHERE n:Rule] AS node\r\nWITH DISTINCT node\r\nMATCH path = (node) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (node)\r\nWHERE COUNT { WITH path UNWIND nodes(path)[..-1] AS n RETURN DISTINCT n } =\r\n      size(nodes(path)[..-1])\r\nRETURN [n IN nodes(path) | n.name] AS cycle\r\n```",
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77779757#77779757",
          "title": "How to fetch all nodes in neo4j for relationship (Node A)-[Relation A]-&gt;(Node B)-[Relation B]-&gt;(Node C)"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704746546,
              "post_id": 77782956,
              "comment_id": 137124455,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#comment137124455_77782956"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704750672,
              "post_id": 77782956,
              "comment_id": 137124948,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#comment137124948_77782956"
            },
            {
              "owner": {
                "reputation": 197,
                "user_id": 8980538,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Higsn",
                "link": "https://stackoverflow.com/users/8980538/higsn"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704778445,
              "post_id": 77782956,
              "comment_id": 137127181,
              "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#comment137127181_77782956"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1704752807,
          "last_edit_date": 1704752807,
          "creation_date": 1704744664,
          "answer_id": 77782956,
          "question_id": 77778088,
          "share_link": "https://stackoverflow.com/a/77782956",
          "body_markdown": "This answer attempts to improve @FinbarGood&#39;s answer.\r\n\r\nIn the real world (and I presume in your use case as well), it is very common for a rule to both set *and* depend on the same variable (e.g., the rule may increment a numeric variable).\r\n\r\nSo, let&#39;s add some more rules to your sample graph:\r\n\r\n    MATCH (r1:Rule {name:&#39;rule_1&#39;}), (v3:Variable {name:&#39;variable_3&#39;}), (v7:Variable {name:&#39;variable_7&#39;})\r\n    CREATE\r\n      (r5:Rule {name:&#39;rule_5&#39;}),\r\n      (r6:Rule {name:&#39;rule_6&#39;}),\r\n      (v8:Variable {name:&#39;variable_8&#39;}),\r\n      (v9:Variable {name:&#39;variable_9&#39;}),\r\n      (v10:Variable {name:&#39;variable_10&#39;})\r\n    CREATE (r1)-[:targets]-&gt;(v8)&lt;-[:depends_on]-(r1)\r\n    CREATE (r1)-[:targets]-&gt;(v9)&lt;-[:depends_on]-(r5)-[:targets]-&gt;(v10)&lt;-[:depends_on]-(r1)\r\n    CREATE (r6)-[:depends_on]-&gt;(v7)\r\n    CREATE (r1)-[:depends_on]-&gt;(v3)\r\n\r\nThe resulting graph will look like this:\r\n\r\n![enter image description here](https://i.stack.imgur.com/XPuR1.png)\r\n\r\nIn the resulting chains, we should include &quot;looping&quot; chains that start and end at the same `Rule`, since those are valid rule paths. But once we have returned to the starting `Rule`, I will assume that we want to stop expanding any further (if there are multiple possible paths from that `Rule`), to avoid redundancy.\r\n\r\nHere is a query that returns the names of the rules and variables along each chain (variable names are included because there can be multiple ways to connect the same sequence of rules):\r\n\r\n    MATCH path = (r0:Rule {name: &#39;rule_1&#39;}) (()-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule))+ (r)\r\n    WHERE (r = r0 AND NOT r0 IN NODES(path)[1..-1]) OR\r\n      NOT (r0 IN NODES(path)[1..] OR EXISTS((r)-[:targets]-&gt;(:Variable)&lt;-[:depends_on]-(:Rule)))\r\n    RETURN [n IN NODES(path)|n.name] AS chain\r\n\r\nThe results are as expected:\r\n\r\n    ╒══════════════════════════════════════════════════════════════════════╕\r\n    │chain                                                                 │\r\n    ╞══════════════════════════════════════════════════════════════════════╡\r\n    │[&quot;rule_1&quot;, &quot;variable_8&quot;, &quot;rule_1&quot;]                                    │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_3&quot;, &quot;rule_1&quot;]                                    │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_9&quot;, &quot;rule_5&quot;, &quot;variable_10&quot;, &quot;rule_1&quot;]           │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_3&quot;, &quot;rule_3&quot;, &quot;variable_7&quot;, &quot;rule_6&quot;]            │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_2&quot;, &quot;rule_2&quot;, &quot;variable_4&quot;, &quot;rule_4&quot;, &quot;variable_3│\r\n    │&quot;, &quot;rule_1&quot;]                                                          │\r\n    ├──────────────────────────────────────────────────────────────────────┤\r\n    │[&quot;rule_1&quot;, &quot;variable_2&quot;, &quot;rule_2&quot;, &quot;variable_4&quot;, &quot;rule_4&quot;, &quot;variable_3│\r\n    │&quot;, &quot;rule_3&quot;, &quot;variable_7&quot;, &quot;rule_6&quot;]                                  │\r\n    └──────────────────────────────────────────────────────────────────────┘\r\n\r\nNOTE: To avoid endless looping in the rule chain, rules like `rule_1` may need to be forced to only run once. This is actually rather easy to do using `MATCH` clauses, since a `MATCH` clause will only return results in which a relationship appears at most once.",
          "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b/77782956#77782956",
          "title": "How to fetch all nodes in neo4j for relationship (Node A)-[Relation A]-&gt;(Node B)-[Relation B]-&gt;(Node C)"
        }
      ],
      "owner": {
        "reputation": 197,
        "user_id": 8980538,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Higsn",
        "link": "https://stackoverflow.com/users/8980538/higsn"
      },
      "last_editor": {
        "reputation": 197,
        "user_id": 8980538,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/f3e4c84965ccc457f40d05a88eff4935?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Higsn",
        "link": "https://stackoverflow.com/users/8980538/higsn"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 99,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77779757,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1704804708,
      "creation_date": 1704703867,
      "last_edit_date": 1704706113,
      "question_id": 77778088,
      "share_link": "https://stackoverflow.com/q/77778088",
      "body_markdown": "Graph has two types of nodes:\r\n- Rule (has name attribute)\r\n- Variable (has name attributes)\r\n\r\nHas following relationships:\r\n- Rule-[:depends_on]-&gt; Variable\r\n- Rule-[:targets]-&gt; Variable\r\n\r\n\r\n### Cypher Query to create sample graph\r\n\r\n```\r\nCREATE\r\n  (rule1:Rule {name:&#39;rule_1&#39;}),\r\n  (rule2:Rule {name:&#39;rule_2&#39;}),\r\n  (rule3:Rule {name:&#39;rule_3&#39;}),\r\n  (rule4:Rule {name:&#39;rule_4&#39;}),\r\n  (variable1:Variable {name:&#39;variable_1&#39;}),\r\n  (variable2:Variable {name:&#39;variable_2&#39;}),\r\n  (variable3:Variable {name:&#39;variable_3&#39;}),\r\n  (variable4:Variable {name:&#39;variable_4&#39;}),\r\n  (variable5:Variable {name:&#39;variable_5&#39;}),\r\n  (variable6:Variable {name:&#39;variable_6&#39;}),\r\n  (variable7:Variable {name:&#39;variable_7&#39;}),\r\n  (rule1)-[:targets]-&gt;(variable2),\r\n  (rule1)-[:targets]-&gt;(variable3),\r\n  (rule2)-[:targets]-&gt;(variable4),\r\n  (rule2)-[:targets]-&gt;(variable5),\r\n  (rule3)-[:targets]-&gt;(variable6),\r\n  (rule3)-[:targets]-&gt;(variable7),\r\n  (rule4)-[:targets]-&gt;(variable3),\r\n  (rule1)-[:depends_on]-&gt;(variable1),\r\n  (rule2)-[:depends_on]-&gt;(variable2),\r\n  (rule3)-[:depends_on]-&gt;(variable3),\r\n  (rule4)-[:depends_on]-&gt;(variable4)\r\n```\r\n\r\n### Query Requirement\r\nGiven a rule name recursively fetch all possible rule chains that can be triggered by it using a cypher query. That is, if Rule 1 is triggered then it would trigger Rule 2 (variable 2 is targeted by rule 1 and is dependency for rule 2) &amp; Rule 3 (variable 3 is targeted by rule 1 and is dependency for rule 3) and Rule 2 would trigger Rule 4 (variable 4 is targeted by rule 2 and is dependency for rule 4), which again can trigger Rule 3 (variable 3 is targeted by rule 4 and is dependency for rule 3).\r\n\r\n#### Possible rule chain\r\n```\r\nRule 1 -&gt; Rule 2 -&gt; Rule 4 -&gt; Rule 3\r\nRule 1 -&gt; Rule 3\r\n```",
      "link": "https://stackoverflow.com/questions/77778088/how-to-fetch-all-nodes-in-neo4j-for-relationship-node-a-relation-a-node-b",
      "title": "How to fetch all nodes in neo4j for relationship (Node A)-[Relation A]-&gt;(Node B)-[Relation B]-&gt;(Node C)"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704400213,
          "post_id": 77756246,
          "comment_id": 137089925,
          "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine#comment137089925_77756246"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704444136,
              "post_id": 77757853,
              "comment_id": 137094147,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137094147_77757853"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704444283,
              "post_id": 77757853,
              "comment_id": 137094164,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137094164_77757853"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704470045,
              "post_id": 77757853,
              "comment_id": 137098596,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137098596_77757853"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705587081,
              "post_id": 77757853,
              "comment_id": 137226873,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137226873_77757853"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1705587600,
              "post_id": 77757853,
              "comment_id": 137227015,
              "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#comment137227015_77757853"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1704470002,
          "last_edit_date": 1704470002,
          "creation_date": 1704366769,
          "answer_id": 77757853,
          "question_id": 77756246,
          "share_link": "https://stackoverflow.com/a/77757853",
          "body_markdown": "**For Neo4j 5.9+**\r\n\r\nTo return the subgraph up to but excluding any nodes beyond any relationships with `Action = &#39;ODC&#39;`:\r\n```sql\r\nMATCH (:Customer {customer_id: 4})-[r WHERE r.Action &lt;&gt; &#39;ODC&#39;]-*(n)\r\nRETURN DISTINCT n\r\n```\r\nTo return the subgraph up to and *including* those nodes:\r\n```sql\r\nMATCH path = (:Customer {customer_id: 4})-[r WHERE r.Action &lt;&gt; &#39;ODC&#39;]-*\r\n               ()-[{Action: &#39;ODC&#39;}]-()\r\nUNWIND nodes(path) AS n\r\nRETURN DISTINCT n\r\n```\r\n\r\n**For Neo4j &lt; 5.9**\r\n\r\nTo return the subgraph up to but excluding any nodes beyond any relationships with `Action = &#39;ODC&#39;`:\r\n```sql\r\nMATCH (:Customer {customer_id: 4})-[r*0..]-(n)\r\nWHERE all(rel IN r WHERE rel.Action &lt;&gt; &#39;ODC&#39;)\r\nRETURN DISTINCT n\r\n```\r\nTo return the subgraph up to and *including* those nodes:\r\n```sql\r\nMATCH path = (:Customer {customer_id: 4})-[r*0..]-()-[{Action: &#39;ODC&#39;}]-()\r\nWHERE all(rel IN r WHERE rel.Action &lt;&gt; &#39;ODC&#39;)\r\nUNWIND nodes(path) AS n\r\nRETURN DISTINCT n\r\n```",
          "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine/77757853#77757853",
          "title": "In Neo4j how do i iteratively traverse the nodes and relationships paths obtained from the startnode till particular relationship property is reached?"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 64,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77757853,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1704709857,
      "creation_date": 1704349255,
      "last_edit_date": 1704709857,
      "question_id": 77756246,
      "share_link": "https://stackoverflow.com/q/77756246",
      "body_markdown": "Consider I have to obtain all the nodes in the subgraph of `n:Customer` with `customer_id = 4`. Starting from this node i have to traverse each node in the path originating with `n` and break or stop traversing down the path when a relationship with `Action` property is set to `ODC`. Each relationship has the property `Action` with value either `ODC` or `ODSN`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter breaking from one path I have to check the other paths originating from this node `n`. I have to repeat this process till all paths are traversed and return the relevant nodes.\r\nIn the image I have provided I have expanded two paths out of the 14 nodes connected to `n:Customer` (blue node). Each of the purple nodes connected to the blue can be further expanded similar to the other two paths.\r\n\r\nI am required to store these nodes in a data structure in Java.\r\nAny guidance on how to approach this would be very helpful. Thanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dKllV.png",
      "link": "https://stackoverflow.com/questions/77756246/in-neo4j-how-do-i-iteratively-traverse-the-nodes-and-relationships-paths-obtaine",
      "title": "In Neo4j how do i iteratively traverse the nodes and relationships paths obtained from the startnode till particular relationship property is reached?"
    },
    {
      "tags": ["python", "neo4j", "cypher", "igraph"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704321658,
          "post_id": 77753801,
          "comment_id": 137079097,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137079097_77753801"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704323417,
          "post_id": 77753801,
          "comment_id": 137079297,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137079297_77753801"
        },
        {
          "owner": {
            "reputation": 632,
            "user_id": 1786165,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
            "display_name": "Stefano Bragaglia",
            "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704362453,
          "post_id": 77753801,
          "comment_id": 137083175,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137083175_77753801"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704400783,
          "post_id": 77753801,
          "comment_id": 137089999,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137089999_77753801"
        },
        {
          "owner": {
            "reputation": 632,
            "user_id": 1786165,
            "user_type": "registered",
            "accept_rate": 75,
            "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
            "display_name": "Stefano Bragaglia",
            "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704446817,
          "post_id": 77753801,
          "comment_id": 137094545,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137094545_77753801"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1704475575,
          "post_id": 77753801,
          "comment_id": 137099564,
          "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db#comment137099564_77753801"
        }
      ],
      "owner": {
        "reputation": 632,
        "user_id": 1786165,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
        "display_name": "Stefano Bragaglia",
        "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
      },
      "last_editor": {
        "reputation": 632,
        "user_id": 1786165,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/b3fcbcb3b0e3c650a1107f00df15711e?s=256&d=identicon&r=PG",
        "display_name": "Stefano Bragaglia",
        "link": "https://stackoverflow.com/users/1786165/stefano-bragaglia"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1704446758,
      "creation_date": 1704304571,
      "last_edit_date": 1704446758,
      "question_id": 77753801,
      "share_link": "https://stackoverflow.com/q/77753801",
      "body_markdown": "I&#39;m trying to query an `igraph` graph in python as I would do in Neo4j to find all the sets of nodes that match a given pattern. I have read through the documentation, searched for answers here, and interrogated Google with no luck.\r\n\r\nAssuming that I have the following:\r\n\r\n    import pandas as pd\r\n    from igraph import Graph\r\n\r\n    df = pd.DataFrame({\r\n        &quot;Person&quot;: [&quot;P1&quot;, &quot;P1&quot;, &quot;P1&quot;, &quot;P1&quot;, &quot;P2&quot;, &quot;P2&quot;, &quot;P2&quot;, &quot;P3&quot;, &quot;P3&quot;, &quot;P4&quot;],\r\n        &quot;Object&quot;: [&quot;O1&quot;, &quot;O2&quot;, &quot;O3&quot;, &quot;O6&quot;, &quot;O2&quot;, &quot;O3&quot;, &quot;O4&quot;, &quot;O5&quot;, &quot;O6&quot;, &quot;O6&quot;],\r\n        &quot;relation&quot;: [&quot;LIKES&quot;] * 10,\r\n    })\r\n    g = Graph.DataFrame(df, directed=False)\r\n\r\nI&#39;d like to run a query against `g` to return all px:Person, py:Person, ox:Object, and oy:Object such that _&quot;px likes ox, which is also liked by py, which also likes oy AND px != py, ox != oy, (px, oy) not in df_.\r\n\r\nExpected results would include:\r\n\r\n    P1, O2, P2, O4\r\n    P2, O2, P1, O1\r\n    P2, O2, P1, O6\r\n    P2, O3, P1, O1\r\n    P2, O3, P1, O6\r\n    P4, O6, P1, O1\r\n    P4, O6, P1, O2\r\n    P4, O6, P1, O3\r\n    P4, O6, P3, O5\r\n\r\nbut not:\r\n\r\n    P1, O2, P2, O3    because P1, O3 are already connected\r\n    P2, O3, P1, O2    because P2, O2 are already connected\r\n\r\n\r\nIn Neo4j, I&#39;d have run something like:\r\n\r\n    MATCH (p1:Person)-[:LIKES]-&gt;(o1:Object)&lt;-[:LIKES]-(p2:Person)-[:LIKES]-&gt;(o2:Object)\r\n    WHERE p1 &lt;&gt; p2 AND o1 &lt;&gt; o2 AND NOT (p1)-[:LIKES]-(o2)\r\n    RETURN p1, o1, p2, o2\r\n    LIMIT 4 \r\n\r\n    MATCH (p1:Person)-[:LIKES]-&gt;(o1:Object)&lt;-[:LIKES]-(p2:Person)-[:LIKES]-&gt;(o2:Object) WHERE NOT (p1)-[:LIKES]-&gt;(o2) RETURN ....\r\n\r\nNotice that my input files are quite big (~75k rows) and I would like to find all the possible `(p1, o1, p2, o2)` and of course not `LIMIT 4`. I&#39;ve tried to join my dataframe twice to create a result dataframe to further filter, but it gets very slow or too big to fit in memory.\r\n\r\nI was wondering if there is a way to run such a query in `igraph`, or if I have to break it down into parts and combine the results myself. Thanks in advance for any help!",
      "link": "https://stackoverflow.com/questions/77753801/query-pythons-igraph-as-if-it-would-be-a-neo4j-db",
      "title": "Query Python&#39;s iGraph as if it would be a Neo4j DB"
    },
    {
      "tags": ["neo4j", "cypher", "parquet"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703793299,
          "post_id": 77725935,
          "comment_id": 137032515,
          "link": "https://stackoverflow.com/questions/77725935/neo4j-to-load-parquet-file-multiple-element-with-the-same-key-found-but-the-el#comment137032515_77725935"
        },
        {
          "owner": {
            "reputation": 411,
            "user_id": 6086295,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
            "display_name": "Kevin Lee",
            "link": "https://stackoverflow.com/users/6086295/kevin-lee"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703815413,
          "post_id": 77725935,
          "comment_id": 137034624,
          "link": "https://stackoverflow.com/questions/77725935/neo4j-to-load-parquet-file-multiple-element-with-the-same-key-found-but-the-el#comment137034624_77725935"
        }
      ],
      "owner": {
        "reputation": 411,
        "user_id": 6086295,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
        "display_name": "Kevin Lee",
        "link": "https://stackoverflow.com/users/6086295/kevin-lee"
      },
      "last_editor": {
        "reputation": 411,
        "user_id": 6086295,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
        "display_name": "Kevin Lee",
        "link": "https://stackoverflow.com/users/6086295/kevin-lee"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703815361,
      "creation_date": 1703754529,
      "last_edit_date": 1703815361,
      "question_id": 77725935,
      "share_link": "https://stackoverflow.com/q/77725935",
      "body_markdown": "I am trying to read and load a parquet file data to neo4j, below is the schema of my parquet file:\r\n```\r\nroot\r\n |-- globalcustid: string (nullable = true)\r\n |-- member_node: struct (nullable = false)\r\n |    |-- label: string (nullable = false)\r\n |    |-- properties: array (nullable = false)\r\n |    |    |-- element: struct (containsNull = false)\r\n |    |    |    |-- key: string (nullable = false)\r\n |    |    |    |-- value: string (nullable = true)\r\n |-- relationships: array (nullable = false)\r\n |    |-- element: struct (containsNull = false)\r\n |    |    |-- node: struct (nullable = false)\r\n |    |    |    |-- label: string (nullable = true)\r\n |    |    |    |-- properties: array (nullable = false)\r\n |    |    |    |    |-- element: struct (containsNull = false)\r\n |    |    |    |    |    |-- key: string (nullable = false)\r\n |    |    |    |    |    |-- value: string (nullable = true)\r\n |    |    |-- relationship: struct (nullable = false)\r\n |    |    |    |-- label: string (nullable = false)\r\n |    |    |    |-- properties: array (nullable = false)\r\n |    |    |    |    |-- element: struct (containsNull = false)\r\n |    |    |    |    |    |-- key: string (nullable = false)\r\n |    |    |    |    |    |-- value: string (nullable = true)\r\n```\r\n\r\nHere is one row of my parquet data (displayed in json format for better readability):\r\n```\r\n{\r\n\t&quot;globalcustid&quot;: &quot;12345&quot;,\r\n\t&quot;member_node&quot;: {\r\n\t\t&quot;label&quot;: &quot;MEMBER&quot;,\r\n\t\t&quot;properties&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;key&quot;: &quot;age&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;45&quot;\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;key&quot;: &quot;gender&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;Male&quot;\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\t&quot;relationships&quot;: [\r\n\t\t{\r\n\t\t\t&quot;relationship&quot;: {\r\n\t\t\t\t&quot;label&quot;: &quot;LIVE_IN&quot;,\r\n\t\t\t\t&quot;properties&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;createdate&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;2023-11-22&quot;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;enddate&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;9999-12-31&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t&quot;node&quot;: {\r\n\t\t\t\t&quot;label&quot;: &quot;COUNTRY&quot;,\r\n\t\t\t\t&quot;properties&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;country_id&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;c123&quot;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;country_name&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;us&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n}\r\n```\r\n\r\nAnd here is my cypher script to load the file:\r\n```\r\ncall apoc.load.parquet(\r\n    &#39;part-00000-183a44db-1c2a-4e98-9db2-6aefaa419751-c000.snappy.parquet&#39;,\r\n    {\r\n        batchSize: 50000,\r\n        mapping: {\r\n                globalcustid: &#39;Varchar&#39;, member_node: &#39;MAP&#39;, relationships: &#39;LIST&#39;\r\n        }\r\n    }\r\n) yield value as row\r\n\r\nreturn *\r\n```\r\n\r\nHowever, it returned the following error. But the key values are unique in the properties array.\r\n```\r\nFailed to invoke procedure `apoc.load.parquet`: Caused by: java.lang.RuntimeException: Multiple element with the same key found, but the element type is not a list\r\n```",
      "link": "https://stackoverflow.com/questions/77725935/neo4j-to-load-parquet-file-multiple-element-with-the-same-key-found-but-the-el",
      "title": "Neo4j to load parquet file: Multiple element with the same key found, but the element type is not a list"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1703237948,
          "creation_date": 1703237948,
          "answer_id": 77702826,
          "question_id": 77701440,
          "share_link": "https://stackoverflow.com/a/77702826",
          "body_markdown": "To begin with, when you do two MATCH statements in a row like that you will create a cartesian product, which is always a danger in Cypher. The result will be one row for every combination of two :ENCODING relationships in the database. If you have 1000 :ENCODING relationships you will get 1000000 rows. You limit this with WHERE elementId(bgc1) &lt; elementId(bgc2) but you will already have created the cartesian product.\r\n\r\nSo we need to rewrite it to remove the need for that.\r\n\r\nSecondly I get a feeling that the calculation of notCommon is incorrect. You base it on the number of paths, not the number of nodes. So it will be correct in the image you show, but not in your example data (at least if I understand you formula correctly).\r\n\r\nFinally, you match two paths, the direct paths and the indirect paths. But in the formula you only use the sum of the two, i.e. all paths. So you don&#39;t really care what is direct and indirect. Due to this we only need one path match that covers both direct and indirect by changing 1..5 to 0..5. This also means that we can use this as the base MATCH instead of the cartesian product.\r\n\r\nI have made a version that looks like this. Here I start first by just counting the number of proteins in the graph, to later use it to calculate notCommon:\r\n\r\n    MATCH (p:protein)\r\n    WITH COUNT(p) AS proteinCount\r\n    \r\n    MATCH pathAll = (bgc1:bgc)-[:ENCODING]-&gt;(:protein)-[:MMSEQS_90*0..5]-(:protein)&lt;-[:ENCODING]-(bgc2:bgc)\r\n    WHERE elementId(bgc1) &lt; elementId(bgc2)\r\n    \r\n    WITH bgc1, bgc2, SUM(SIZE([n IN nodes(pathAll) WHERE &quot;protein&quot; IN labels(n)])) AS commonProteins, COUNT(DISTINCT pathAll) AS pathsAll, proteinCount\r\n    WITH bgc1, bgc2, pathsAll, proteinCount-commonProteins AS notCommon\r\n    \r\n    WITH bgc1, bgc2, 100 * pathsAll / (pathsAll + notCommon) AS similarity_score\r\n    WHERE similarity_score &gt; 0.0  \r\n    \r\n    MERGE (bgc1)-[:IS_SIMILAR {score: similarity_score}]-&gt;(bgc2)\r\n    \r\n    RETURN bgc1.id AS BGC1, bgc2.id AS BGC2, similarity_score\r\n    ORDER BY similarity_score DESC, BGC1, BGC2\r\n\r\nI don&#39;t get the same results as you get, but when I try to apply the formula manually I get the same results as my version. It might be that I have misunderstood your formula, but hopefully you can use something from my version anyway.\r\n\r\nBy the way, really nice that you provided all the MERGE statements to create your example graph. It made it a lot easier to help you :)",
          "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths/77702826#77702826",
          "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1703280841,
          "last_edit_date": 1703280841,
          "creation_date": 1703277830,
          "answer_id": 77705741,
          "question_id": 77701440,
          "share_link": "https://stackoverflow.com/a/77705741",
          "body_markdown": "Your first 2 clauses create a [cartesian product](https://stackoverflow.com/questions/33352673/why-does-neo4j-warn-this-query-builds-a-cartesian-product-between-disconnected), which one should try to avoid:\r\n\r\n    MATCH (bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    MATCH (bgc2:bgc)-[:ENCODING]-&gt;(p2:protein)\r\n\r\nThis especially applies when the cartesian product produces mostly unwanted results. In your use case, I suspect that the vast majority of `bcg` pairs (which could be in the millions if you have thousands of encodings) would end up being dropped by your query anyway (if it ever completed).\r\n\r\nA better approach would be to use a single `MATCH` that finds wanted paths (both direct and indirect) between `bcg` nodes. That way, you not only simplify the query but you also naturally only get wanted `bcg` pairs:\r\n\r\n    MATCH (bgc1:bgc)-[:ENCODING]-&gt;()-[:MMSEQS_90*0..5]-()&lt;-[:ENCODING]-(bgc2:bgc)\r\n    WHERE elementId(bgc1) &lt; elementId(bgc2)\r\n    \r\n    WITH bgc1, bgc2,\r\n      100 * COUNT(*) / (COUNT {(b)-[:ENCODING]-&gt;() WHERE b IN [bgc1, bgc2]} - COUNT(*)) AS similarity_score\r\n\r\n    MERGE (bgc1)-[:IS_SIMILAR {score: similarity_score}]-&gt;(bgc2)\r\n    RETURN bgc1.id AS BGC1, bgc2.id AS BGC2, similarity_score\r\n    ORDER BY similarity_score DESC, BGC1, BGC2;\r\n\r\nNotes:\r\n 1. I fixed what seems like a bug in your query. In the `notCommon` calculation, I used a [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/count/) (introduced in neo4j 5.0) to count the number of `ENCODING` relationships for `bgc1` and `bgc2`. This produces your expected results.\r\n\r\n 2. The `0` lower bound in the variable length path pattern `0..5` allows &quot;direct&quot; paths to be matched.\r\n\r\n 3. If the `score` ever changed between a pair of nodes, then the `MERGE` clause above would create an additional `IS_SIMILAR` relationship. If this is a concern, you can avoid that by replacing that `MERGE` clause with:\r\n\r\n        MERGE (bgc1)-[s:IS_SIMILAR]-&gt;(bgc2)\r\n        SET s.score = similarity_score",
          "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths/77705741#77705741",
          "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703441457,
          "creation_date": 1703441457,
          "answer_id": 77711481,
          "question_id": 77701440,
          "share_link": "https://stackoverflow.com/a/77711481",
          "body_markdown": "Well formulated question!! Kudos\r\n\r\nIn addition to the other suggestions, two other thoughts ...\r\n\r\n1) the neo4j.conf file memory setting might be increased to avoid any RAM issues.\r\n\r\n2) I often collect the item to be iterated and then unwind if with a call statement. This is generally more efficient in therms of code and CPUs used. In you case you may need nested calls.\r\n\r\n    with w, collect (x) as y\r\n    unwind y as z\r\n    call\r\n    {\r\n    with z\r\n    ... do something ...\r\n    return answers \r\n    }\r\n    ... more code with w and answer..\r\n\r\n\r\n \r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths/77711481#77711481",
          "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
        }
      ],
      "owner": {
        "reputation": 1283,
        "user_id": 1061924,
        "user_type": "registered",
        "accept_rate": 90,
        "profile_image": "https://www.gravatar.com/avatar/a5e31687aa801ca4ac341ebb8490f9eb?s=256&d=identicon&r=PG",
        "display_name": "Art",
        "link": "https://stackoverflow.com/users/1061924/art"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 74,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 3,
      "accepted_answer_id": 77705741,
      "answer_count": 3,
      "score": 3,
      "last_activity_date": 1703441457,
      "creation_date": 1703212269,
      "question_id": 77701440,
      "share_link": "https://stackoverflow.com/q/77701440",
      "body_markdown": "I have a simple graph with nodes `bgc` and `protein`, where `(:bgc)-[:ENCODES]-&gt;(:protein)`. Proteins can be similar to each other, and that is represented with separate relationship, e.g. `(:protein)-[:MMSEQS_90]-&gt;(:protein)` (for 90% similarity, but can be also `MMSEQS_80`, `MMSEQS_70`, `MMSEQS_50`, etc.\r\n\r\nFor two `bgc` nodes graph can look like this: \r\n\r\n[![graph schema][1]][1]\r\n\r\nPaths between `bgc` nodes can be direct (sharing the exact same `protein`) or indirect (through proteins that are similar).  \r\n\r\nNow, I want to calculate similarity score between `bgc` nodes, which is defined as:\r\n\r\n`score` = `100%  * pathsAll` / (`pathsAll + notCommon`) \r\nWhere\r\n- `pathsAll` is total number of paths, direct and indirect (1 + 2 = 3 in the example above)\r\n- `notCommon` are nodes not shared by any paths (3 + 2 = 5) \r\n- `score` is similarity score: 100% * 3 / (3 + 5) = 37.5%\r\n\r\nScore is calculated pair-wise for all `bgc` pairs, and saved as relation `(:bgc)-[:SIMILAR_TO {score: &lt;int&gt;})-(:bgc)`. \r\n\r\nI have managed to solve this exact problem with query as below: \r\n\r\n    MATCH (bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    MATCH (bgc2:bgc)-[:ENCODING]-&gt;(p2:protein)\r\n    WHERE elementId(bgc1) &lt; elementId(bgc2)\r\n    \r\n    OPTIONAL MATCH pathIndirect = (bgc1)-[:ENCODING]-&gt;(:protein)-[:MMSEQS_90*1..5]-(:protein)&lt;-[:ENCODING]-(bgc2)\r\n    OPTIONAL MATCH pathDirect = (bgc1)-[:ENCODING]-&gt;(:protein)&lt;-[:ENCODING]-(bgc2)\r\n    \r\n    WITH bgc1, bgc2, COUNT(DISTINCT pathIndirect) + COUNT(DISTINCT pathDirect) AS pathsAll,\r\n                  COUNT(DISTINCT p1) + COUNT(DISTINCT p2) - 2 * (COUNT(DISTINCT pathIndirect) + COUNT(DISTINCT pathDirect)) AS notCommon\r\n    \r\n    WITH bgc1, bgc2, 100 * pathsAll / (pathsAll + notCommon) AS similarity_score\r\n    \r\n    WITH bgc1, bgc2, similarity_score\r\n    WHERE similarity_score &gt; 0.0  \r\n    \r\n    MERGE (bgc1)-[:IS_SIMILAR {score: similarity_score}]-&gt;(bgc2)\r\n    RETURN bgc1.id AS BGC1, bgc2.id AS BGC2, similarity_score\r\n    ORDER BY similarity_score DESC, BGC1, BGC2;\r\n\r\nResulting in: \r\n\r\n    ╒═══════╤═══════╤════════════════╕\r\n    │BGC1   │BGC2   │similarity_score│\r\n    ╞═══════╪═══════╪════════════════╡\r\n    │&quot;BGC03&quot;│&quot;BGC01&quot;│83              │\r\n    ├───────┼───────┼────────────────┤\r\n    │&quot;BGC01&quot;│&quot;BGC02&quot;│37              │\r\n    ├───────┼───────┼────────────────┤\r\n    │&quot;BGC03&quot;│&quot;BGC02&quot;│25              │\r\n    └───────┴───────┴────────────────┘\r\n\r\n   \r\nThis however, is immediately crashing database (out of memory) for larger number of nodes (few 1000`s), making it impossible to execute (despite reasonable memory provisioning). \r\n\r\nI have noticed that first line can be executed instantly, but adding the second is already sufficient to cause crash (so maybe here is a first problem?): \r\n\r\n    // this executes instantly\r\n    MATCH rs1=(bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    RETURN rs1;\r\n    // this goes forever and crashes\r\n    MATCH rs1=(bgc1:bgc)-[:ENCODING]-&gt;(p1:protein)\r\n    MATCH rs2=(bgc2:bgc)-[:ENCODING]-&gt;(p2:protein)\r\n    RETURN rs1, rs2 \r\n\r\nThanks a lot for any suggestions on why is that crashing and how to construct better query doing the same thing. Maybe I&#39;m doing something totally wrong here - I am very new to Neo4j. \r\n\r\nExample data: \r\n\r\n    MERGE (b1:bgc {id: &#39;BGC01&#39;})\r\n    MERGE (b2:bgc {id: &#39;BGC02&#39;})\r\n    MERGE (b3:bgc {id: &#39;BGC03&#39;})\r\n    MERGE (p1:protein {id: &#39;PROT01&#39;})\r\n    MERGE (p2:protein {id: &#39;PROT02&#39;})\r\n    MERGE (p3a:protein {id: &#39;PROT03a&#39;})\r\n    MERGE (p3b:protein {id: &#39;PROT03b&#39;})\r\n    MERGE (p4a:protein {id: &#39;PROT04a&#39;})\r\n    MERGE (p4b:protein {id: &#39;PROT04b&#39;})\r\n    MERGE (p5:protein {id: &#39;PROT05&#39;})\r\n    MERGE (p6:protein {id: &#39;PROT06&#39;})\r\n    MERGE (p7:protein {id: &#39;PROT07&#39;})\r\n    MERGE (p8:protein {id: &#39;PROT08&#39;})\r\n    MERGE (b1)-[:ENCODING]-&gt;(p1)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p2)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p3a)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p4a)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p5)\r\n    MERGE (b1)-[:ENCODING]-&gt;(p6)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p2)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p3b)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p4b)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p7)\r\n    MERGE (b2)-[:ENCODING]-&gt;(p8)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p1)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p2)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p5)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p6)\r\n    MERGE (b3)-[:ENCODING]-&gt;(p4b)\r\n    MERGE (p3a)-[:MMSEQS_90]-&gt;(p3b)\r\n    MERGE (p4a)&lt;-[:MMSEQS_90]-(p4b)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zwfTP.png\r\n",
      "link": "https://stackoverflow.com/questions/77701440/neo4j-how-to-calculate-similarity-score-based-on-number-of-existing-paths",
      "title": "Neo4J: How to calculate similarity score based on number of existing paths?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 2,
          "creation_date": 1703010473,
          "post_id": 77684255,
          "comment_id": 136960274,
          "link": "https://stackoverflow.com/questions/77684255/about-crashing-during-a-2hop-query-operation-in-neo4j#comment136960274_77684255"
        },
        {
          "owner": {
            "reputation": 19,
            "user_id": 21351077,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG",
            "display_name": "newbie",
            "link": "https://stackoverflow.com/users/21351077/newbie"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1703097468,
          "post_id": 77684255,
          "comment_id": 136971629,
          "link": "https://stackoverflow.com/questions/77684255/about-crashing-during-a-2hop-query-operation-in-neo4j#comment136971629_77684255"
        }
      ],
      "owner": {
        "reputation": 19,
        "user_id": 21351077,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG",
        "display_name": "newbie",
        "link": "https://stackoverflow.com/users/21351077/newbie"
      },
      "last_editor": {
        "reputation": 6230,
        "user_id": 2266,
        "user_type": "registered",
        "accept_rate": 90,
        "profile_image": "https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=256&d=identicon&r=PG",
        "display_name": "Charlotte Skardon",
        "link": "https://stackoverflow.com/users/2266/charlotte-skardon"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 46,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1703063548,
      "creation_date": 1702979468,
      "last_edit_date": 1703063548,
      "question_id": 77684255,
      "share_link": "https://stackoverflow.com/q/77684255",
      "body_markdown": "I have a question about how to deal with Neo4j queries that are slow and then crash.\r\n\r\nFirst of all, let me explain the graphs.\r\nThere are 20million nodes called &quot;Party&quot;. Each Party node has properties &quot;id&quot; and &quot;type&quot;. Each Party is connected to one or more &quot;Account&quot; nodes by a relationship called &quot;HAS&quot;, with a total number of Accounts of 70million.\r\nThe relationships between Accounts are connected by a relationship called &quot;TRANSACTION&quot;, with a total number of 350million.\r\nTRANSACTION has the properties &quot;timestamp&quot;, &quot;price&quot;.\r\n\r\nNow, to calculate the impact of a Party whose type property is on (say P1) on a Party 2hop away (a Party whose type property is off, say P3), the following two-stage query is performed.\r\n\r\n```\r\nCALL apoc.periodic.iterate(&quot;\r\n\r\n// P1-A1-A2\r\nMATCH (P1:Party{type:&#39;on&#39;})-[:HAS]-(A1:Account)-[t1:TRANSACTION]-(A2:Account)&lt;-[:HAS]-(P2:Party{type:&#39;off&#39;})\r\n     CASE\r\n         WHEN datetime(t1.timestamp) &gt;= datetime(reference_date) THEN 4\r\n\r\n...（Sorry, it&#39;s too long to write, but there is a complex case split that depends on values of t1.timestamp and t1.price.）\r\n\r\n// A2-A3-P3\r\nMATCH (A2)-[t2:TRANSACTION]-(A3:Account)&lt;-[:HAS]-(P3:Party{type:&#39;off&#39;})\r\n     CASE\r\n         WHEN datetime(t2.timestamp) &gt;= datetime(reference_date) THEN 4\r\n\r\n...（This one also has a complex case split depending on the values of t2.timestamp and t2.price. Finally, the value of score is calculated.）\r\n\r\nRETURN\r\n     P3.id, score\r\n  &quot;CREATE (temp:TempResult {id: id, score: score})&quot;,\r\n  {batchSize:100, parallel:true}\r\n)\r\n```\r\n\r\nThe CPU usage is running at around 30% at the beginning of the calculation, but finally the CPU usage reaches 100% and the operation becomes very slow. Eventually, the connection to the Neo4j Browser database is broken down.\r\n\r\nWhat do you think is the reason for the disconnection from the database?\r\n1. Is it because the 2hop algorithm is inefficient? (Does it use a lot of memory? Or do you get a lot of disk accesses?)\r\n2. It is said that indexes make queries work more efficiently, but it is not well understood how they should be created.\r\n3. Is the size of the batch process processed at one time not appropriate? (batchSize:100)\r\n4. Are there not enough machine specs? Also, I am not sure that the appropriate values for heap and cache settings.\r\n\r\nThe server and Neo4j specifications are as follows.\r\n\r\nServer  \r\n\r\n - OS: Windows Server 2019  \r\n - CPU: Intel Xeon Platinum 2.90GHz 4core\r\n - Memory: 512GB \r\n - HDD: 1TB\r\n\r\nNeo4j\r\n - Version: Enterprise v5.12.0\r\n - server.memory.heap.initial_size=240g\r\n - server.memory.heap.max_size=240g\r\n - server.memory.pagecache.size=240g\r\n - dbms.memory.transaction.total.max=400G\r\n - db.transaction.timeout=1440m\r\n\r\nI would be very grateful for any advice from any knowledgeable person. Any information would be much appreciated. \r\nThank you in advance for your kind attention.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/muzbl.png",
      "link": "https://stackoverflow.com/questions/77684255/about-crashing-during-a-2hop-query-operation-in-neo4j",
      "title": "About crashing during a 2hop query operation in Neo4j"
    },
    {
      "tags": ["graph", "neo4j", "cypher", "graph-databases"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703055427,
              "post_id": 77687158,
              "comment_id": 136964684,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136964684_77687158"
            },
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703058653,
              "post_id": 77687158,
              "comment_id": 136965044,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136965044_77687158"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703105937,
              "post_id": 77687158,
              "comment_id": 136972789,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136972789_77687158"
            },
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703115342,
              "post_id": 77687158,
              "comment_id": 136973776,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136973776_77687158"
            },
            {
              "owner": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703115374,
              "post_id": 77687158,
              "comment_id": 136973779,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136973779_77687158"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1054,
                "user_id": 1071179,
                "user_type": "registered",
                "accept_rate": 17,
                "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Mahesh",
                "link": "https://stackoverflow.com/users/1071179/mahesh"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1703119238,
              "post_id": 77687158,
              "comment_id": 136974158,
              "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#comment136974158_77687158"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 6,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1703119022,
          "last_edit_date": 1703119022,
          "creation_date": 1703009054,
          "answer_id": 77687158,
          "question_id": 77683954,
          "share_link": "https://stackoverflow.com/a/77687158",
          "body_markdown": "[UPDATED]\r\n\r\nYou are asking the Browser to **display** 103 MB of data, which may be overtaxing it. The Browser is not really designed to display that much data all at once.\r\n\r\nTO BE CLEAR: the issue is not that the neo4j server cannot handle huge amounts of inout data (it certainly can), but with asking the Browser to display huge amounts of data.\r\n\r\n#### If JSON file contains an array of objects\r\n\r\nIn this case, the `apoc.load.json` procedure returns each object in a separate row. Try showing just a portion of the array (say, the first 50 items, which will still take up about 800 KB):\r\n\r\n    CALL apoc.load.json(&quot;file:///&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;&quot;) YIELD value\r\n    RETURN value\r\n    LIMIT 50\r\n\r\n#### If JSON file contains an object that contains an array of sub-objects\r\n\r\nIn this case, the `apoc.load.json` procedure will return the outer object (with all 103 MB of data) in a single row. If   &quot;items&quot; is the key of the array in the outer object, you can show just a portion of the array (say, the first 50 items) this way:\r\n\r\n    CALL apoc.load.json(&quot;file:///&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;&quot;) YIELD value\r\n    UNWIND value.items AS item\r\n    RETURN item\r\n    LIMIT 50",
          "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json/77687158#77687158",
          "title": "Neo4j Browser blank screen with error when loading json using apoc.load.json"
        }
      ],
      "owner": {
        "reputation": 1054,
        "user_id": 1071179,
        "user_type": "registered",
        "accept_rate": 17,
        "profile_image": "https://www.gravatar.com/avatar/d1c7f5b02eb0058227cbd44e307dd54e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Mahesh",
        "link": "https://stackoverflow.com/users/1071179/mahesh"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1703119022,
      "creation_date": 1702976317,
      "question_id": 77683954,
      "share_link": "https://stackoverflow.com/q/77683954",
      "body_markdown": "I am using neo4j to load a json file which is 103 MB worth.  It has only 6500 records though.\r\n\r\nI created a apoc.config in the right Configuration location and added the property:\r\n```\r\napoc.import.file.enabled=true\r\n```\r\n\r\nI placed the file in dbmss/&lt;dbms_id&gt;/import/&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;.  I am able to apoc procedure using:\r\n```\r\nCALL apoc.load.json(&quot;file:///&lt;client_name&gt;/data_dump/&lt;file_name.json&gt;&quot;)\r\nYIELD value\r\nRETURN value; \r\n```\r\nHowever, after ~1 mins 50 seconds, the process stops with a blank browser page.\r\n\r\n[![Neo4j Browser error][1]][1]  \r\n\r\n\r\nThe following error is shown in the console.\r\n\r\n```\r\n[14:07:54.869] [info]  Neo4j @ 7687 is up and running!\r\n[14:07:54.885] [info]  Neo4j @ 7474 is up and running!\r\n\r\n\r\n\r\n\r\n\r\n\r\nError sending from webFrameMain:  Error: Render frame was disposed before WebFrameMain could be accessed\r\n    at n.send (node:electron/js2c/browser_init:165:417)\r\n    at b.send (node:electron/js2c/browser_init:161:2494)\r\n    at send (/tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:6062:13)\r\n    at /tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:6066:63\r\n    at Array.forEach (&lt;anonymous&gt;)\r\n    at broadcast (/tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:6066:48)\r\n    at Timeout.onlineCheck [as _onTimeout] (/tmp/.mount_neo4j-WfMZ7l/resources/app.asar/dist/main.prod.js:13066:38)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n```\r\n\r\nI googled somewhere and added:\r\n```\r\napoc.http.timeout.connect=600000\r\napoc.http.timeout.read=600000\r\n```\r\n\r\nNo change.  Still errors out around 1 min 50 seconds.  Not sure what this config is.  It is consistently reproducable.\r\n\r\nThis happens on all of Ubuntu VM, Ubuntu standalone system and Windows.  Doesn&#39;t look like a display issue.  Please help.\r\n\r\n  [1]: https://i.stack.imgur.com/5ruSQ.jpg",
      "link": "https://stackoverflow.com/questions/77683954/neo4j-browser-blank-screen-with-error-when-loading-json-using-apoc-load-json",
      "title": "Neo4j Browser blank screen with error when loading json using apoc.load.json"
    },
    {
      "tags": ["node.js", "neo4j", "graphql", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 11,
            "user_id": 17648725,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxul6cX9IUPg44FlZ3QYwMbjR1jkWiBHnOG7zE=k-s256",
            "display_name": "Joe Olu",
            "link": "https://stackoverflow.com/users/17648725/joe-olu"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702944947,
          "creation_date": 1702944947,
          "answer_id": 77682353,
          "question_id": 77682289,
          "share_link": "https://stackoverflow.com/a/77682353",
          "body_markdown": "Solved it, \r\n\r\nNeeded to add this to context\r\n\r\n```\r\n sessionConfig: { database: &quot;myNeoGraph&quot; }\r\n```",
          "link": "https://stackoverflow.com/questions/77682289/cannot-query-nodes/77682353#77682353",
          "title": "Cannot query nodes"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 17648725,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJxul6cX9IUPg44FlZ3QYwMbjR1jkWiBHnOG7zE=k-s256",
        "display_name": "Joe Olu",
        "link": "https://stackoverflow.com/users/17648725/joe-olu"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702944947,
      "creation_date": 1702943151,
      "question_id": 77682289,
      "share_link": "https://stackoverflow.com/q/77682289",
      "body_markdown": "This is the structure of my schema \r\n```\r\ntype Process @query(read: true, aggregate: true) {\r\n  material_id: String\r\n  batch_id: String\r\n  basic_mat: String\r\n  happened: Date\r\n}\r\n```\r\n\r\nNow, querying process returns an empty array \r\n```\r\nquery Processes($where: ProcessWhere) {\r\n  processes(where: $where) {\r\n    basic_mat\r\n    material_id\r\n    batch_id\r\n  }\r\n}\r\n```\r\nThis is the variable where\r\n```\r\n{ \r\n  &quot;where&quot;: {\r\n    &quot;batch_id&quot;: &quot;abc101&quot;\r\n  }\r\n}\r\n```\r\nI went further to enable debug and this is what I get\r\n```\r\n  @neo4j/graphql:auth using JWT provided in context: undefined +0ms\r\n  @neo4j/graphql:execution executing cypher +0ms\r\n  @neo4j/graphql:execution CALL dbms.components() YIELD versions, edition UNWIND versions AS version RETURN version, edition +1ms\r\n  @neo4j/graphql:execution cypher params: {} +0ms\r\n  @neo4j/graphql:translate ReadOperation\r\n  @neo4j/graphql:translate |──── PropertyFilter [batch_id] &lt;EQ&gt;\r\n  @neo4j/graphql:translate |──── AttributeField &lt;basic_mat&gt;\r\n  @neo4j/graphql:translate |──── AttributeField &lt;material_id&gt;\r\n  @neo4j/graphql:translate |──── AttributeField &lt;batch_id&gt; +0ms\r\n  @neo4j/graphql:execution executing cypher +655ms\r\n  @neo4j/graphql:execution MATCH (this:Process)\r\n  @neo4j/graphql:execution WHERE this.batch_id = $param0\r\n  @neo4j/graphql:execution RETURN this { .basic_mat, .material_id, .batch_id } AS this +0ms\r\n  @neo4j/graphql:execution cypher params: { param0: &#39;abc101&#39; } +0ms\r\n  @neo4j/graphql:execution Execute successful, received 0 records +0ms\r\n```\r\nrunning this cypher in neo4j returns values but not when I am using the neo4j/graphql lib. \r\nany Idea what the issue is here",
      "link": "https://stackoverflow.com/questions/77682289/cannot-query-nodes",
      "title": "Cannot query nodes"
    },
    {
      "tags": ["neo4j", "cypher", "neomodel"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1702926884,
          "post_id": 77674898,
          "comment_id": 136949651,
          "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id#comment136949651_77674898"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 63,
                "user_id": 9312373,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/j7DBj.png?s=256&g=1",
                "display_name": "B D T",
                "link": "https://stackoverflow.com/users/9312373/b-d-t"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705679182,
              "post_id": 77847239,
              "comment_id": 137239862,
              "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#comment137239862_77847239"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 20071464,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
                "display_name": "artMart",
                "link": "https://stackoverflow.com/users/20071464/artmart"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705850140,
              "post_id": 77847239,
              "comment_id": 137253942,
              "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#comment137253942_77847239"
            },
            {
              "owner": {
                "reputation": 63,
                "user_id": 9312373,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/j7DBj.png?s=256&g=1",
                "display_name": "B D T",
                "link": "https://stackoverflow.com/users/9312373/b-d-t"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 20071464,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
                "display_name": "artMart",
                "link": "https://stackoverflow.com/users/20071464/artmart"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705882691,
              "post_id": 77847239,
              "comment_id": 137257072,
              "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#comment137257072_77847239"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 63,
            "user_id": 9312373,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/j7DBj.png?s=256&g=1",
            "display_name": "B D T",
            "link": "https://stackoverflow.com/users/9312373/b-d-t"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705678777,
          "creation_date": 1705678777,
          "answer_id": 77847239,
          "question_id": 77674898,
          "share_link": "https://stackoverflow.com/a/77847239",
          "body_markdown": "I think it&#39;s because you have `ID` capitalized. \r\n\r\nAlso, it looks like you&#39;re naming the python variable with `id`. That&#39;s already a [python function](https://docs.python.org/3/library/functions.html), so I&#39;d recommend naming the variable something like `databaseId`. You code would become...\r\n\r\n```python\r\nfrom neomodel import db\r\nquery=&quot;MATCH (n:Message) WHERE id(n)=&quot;+databaseId+&quot; SET n.type=&#39;&quot;+str(ans)+&quot;&#39;, n.reprimands=&#39;&quot;+str(ans2)+&quot;&#39;&quot;\r\ndb.cypher_query(query)\r\n```\r\n\r\nThe cypher would look something like this:\r\n\r\n```cypher\r\nMATCH (n:Message)\r\n  WHERE id(n) = 123\r\nSET n.type = &quot;some type&quot;,\r\n    n.reprimands = &quot;some reprimands&quot;\r\n```",
          "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id/77847239#77847239",
          "title": "Neo4j- How can I match by using the internal ID"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 20071464,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
        "display_name": "artMart",
        "link": "https://stackoverflow.com/users/20071464/artmart"
      },
      "last_editor": {
        "reputation": 11,
        "user_id": 20071464,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/6336f6f70f54428652f2aa1d836b446b?s=256&d=identicon&r=PG",
        "display_name": "artMart",
        "link": "https://stackoverflow.com/users/20071464/artmart"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 66,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705678777,
      "creation_date": 1702826013,
      "last_edit_date": 1703119239,
      "question_id": 77674898,
      "share_link": "https://stackoverflow.com/q/77674898",
      "body_markdown": "\r\nI need to retrieve a node in Neo4j and I only have the internal ID.\r\n\r\nIs there a way to retrieve the node that has the ID in the given set in one cypher query ? \r\n\r\nI&#39;m using Neo4j 2.1.5\r\n\r\nThanks !\r\n```\r\nfrom neomodel import db\r\nquery=&quot;MATCH (n:Message) WHERE ID(n)=&quot;+id+&quot; SET n.type=&#39;&quot;+str(ans)+&quot;&#39;, n.reprimands=&#39;&quot;+str(ans2)+&quot;&#39;&quot;\r\ndb.cypher_query(query)\r\n```\r\nI tried this but it didn&#39;t work out. I asigned the id in the python code, but it didn&#39;t seemed to have matched the ID I already had in my neo4j db. I used SET to change some attributes in the db but nothing changed at all. \r\n\r\nI am using neomodel to access the DB via python.",
      "link": "https://stackoverflow.com/questions/77674898/neo4j-how-can-i-match-by-using-the-internal-id",
      "title": "Neo4j- How can I match by using the internal ID"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1702931145,
          "post_id": 77674781,
          "comment_id": 136950207,
          "link": "https://stackoverflow.com/questions/77674781/neo4j-improve-loadcsv-relations-query-time#comment136950207_77674781"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1702927714,
          "last_edit_date": 1702927714,
          "creation_date": 1702927253,
          "answer_id": 77681301,
          "question_id": 77674781,
          "share_link": "https://stackoverflow.com/a/77681301",
          "body_markdown": "Your `MATCH` clause must specify the *node label* (in addition to the node property) associated with a node index in order for the Cypher planner to consider using that index.\r\n\r\nThis query should be much faster:\r\n\r\n    CALL apoc.periodic.iterate(\r\n    &quot;LOAD CSV WITH HEADERS FROM &#39;file:///cleaned_follows_output.csv&#39; AS row RETURN row&quot;,\r\n    &quot;MATCH (u1:User {id: row._s}), (u2:User {id: row._t}) MERGE (u1)-[:FOLLOWING]-&gt;(u2)&quot;,\r\n    {batchSize: 10000, parallel: true}\r\n    );",
          "link": "https://stackoverflow.com/questions/77674781/neo4j-improve-loadcsv-relations-query-time/77681301#77681301",
          "title": "Neo4J- Improve LoadCSV relations query time"
        }
      ],
      "owner": {
        "reputation": 532,
        "user_id": 10687078,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-wzDe9rQWto0/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hBodJeapeZCWcYTFnE47qWIIvZeg/mo/photo.jpg?sz=256",
        "display_name": "osaro",
        "link": "https://stackoverflow.com/users/10687078/osaro"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77681301,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702927714,
      "creation_date": 1702823714,
      "question_id": 77674781,
      "share_link": "https://stackoverflow.com/q/77674781",
      "body_markdown": "I have a neo4j database with 1 million user nodes. I&#39;m trying to load relationships between these nodes from a 4 million-row CSV file. A user can follow another user. At this point, the query has been running for hours. Is there something wrong with the query that&#39;s making it this slow?\r\n\r\n``` \r\nCALL apoc.periodic.iterate(\r\n&quot;LOAD CSV WITH HEADERS FROM &#39;file:///cleaned_follows_output.csv&#39; AS row RETURN row&quot;,\r\n&quot;MATCH (u1 {id: row._s}), (u2 {id: row._t}) MERGE (u1)-[:FOLLOWING]-&gt;(u2)&quot;,\r\n{batchSize: 10000, parallel: true}\r\n);\r\n```\r\n\r\nI have already created an index on the id property by running the following:\r\n```\r\nCREATE INDEX FOR (u: User) ON (u.id)\r\n```\r\n\r\n\r\nIndexs:\r\n```\r\nIndex Name\tType\tUniqueness\tEntityType\tLabelsOrTypes\tProperties\tState\r\nindex_343aff4q\tLOOKUP\t\tNODE\tnull\tnull\tONLINE\r\nindex_9f2536bf\tRANGE\t\tNODE\t[ &quot;User&quot; ]\t[ &quot;id&quot; ]\tONLINE\r\nindex_f7700478\tLOOKUP\t\tRELATIONSHIP\tnull\tnull\tONLINE\r\n```",
      "link": "https://stackoverflow.com/questions/77674781/neo4j-improve-loadcsv-relations-query-time",
      "title": "Neo4J- Improve LoadCSV relations query time"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 17864612,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3536b535b42458f1c98202b90145372e?s=256&d=identicon&r=PG",
                "display_name": "user17864612",
                "link": "https://stackoverflow.com/users/17864612/user17864612"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704462710,
              "post_id": 77654754,
              "comment_id": 137097123,
              "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return/77654754#comment137097123_77654754"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 17864612,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/3536b535b42458f1c98202b90145372e?s=256&d=identicon&r=PG",
                "display_name": "user17864612",
                "link": "https://stackoverflow.com/users/17864612/user17864612"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1704462743,
              "post_id": 77654754,
              "comment_id": 137097130,
              "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return/77654754#comment137097130_77654754"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702481500,
          "creation_date": 1702481500,
          "answer_id": 77654754,
          "question_id": 77653829,
          "share_link": "https://stackoverflow.com/a/77654754",
          "body_markdown": "For dynamic Cypher statements, the apoc library (https://neo4j.com/docs/apoc/current/cypher-execution/running-cypher/) offers the possibilities you need. ",
          "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return/77654754#77654754",
          "title": "neo4j table where a list of node keys defines the columns for RETURN"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 17864612,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/3536b535b42458f1c98202b90145372e?s=256&d=identicon&r=PG",
        "display_name": "user17864612",
        "link": "https://stackoverflow.com/users/17864612/user17864612"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 27,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702481500,
      "creation_date": 1702472889,
      "question_id": 77653829,
      "share_link": "https://stackoverflow.com/q/77653829",
      "body_markdown": "If I choose a specific node LABEL, I can get a list of distinct node KEYS using the below:\r\n\r\n```\r\nMATCH(n:Person) \r\nWITH KEYS(n) AS keys\r\nUNWIND keys AS key\r\nRETURN COLLECT(DISTINCT key) AS DistinctKeys\r\n```\r\n\r\nthe result is something like `[&quot;Title&quot;,&quot;Name&quot;,&quot;Location&quot;,&quot;Division&quot;]`\r\n\r\nI&#39;m looking for a way to loop over this list and return the following equivalent, without having to specify each key:\r\n\r\n`RETURN n.Title, n.Name, n.Location, n.Division `\r\n\r\nIdeally would accommodate any node LABEL I specify where each LABEL can have varying numbers of KEYS. \r\n\r\nNot even sure where to start as looking online it doesn&#39;t look possible. Anything I have tried is not even close. ",
      "link": "https://stackoverflow.com/questions/77653829/neo4j-table-where-a-list-of-node-keys-defines-the-columns-for-return",
      "title": "neo4j table where a list of node keys defines the columns for RETURN"
    },
    {
      "tags": ["json", "neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702461933,
          "creation_date": 1702461933,
          "answer_id": 77652644,
          "question_id": 77651129,
          "share_link": "https://stackoverflow.com/a/77652644",
          "body_markdown": "Your second query should fail because the `RETURN *` is projecting out variables that have already been declared in the outer scope e.g. `v_globalcustid`.\r\n\r\nTo address your original problem, just return `null`:\r\n```sql\r\nCALL {\r\n  // other stuff\r\n  CALL apoc.merge.relationship(\r\n    m, \r\n    r.relationship.label,\r\n    { \r\n      createdate: r.relationship.createdate, \r\n      enddate: r.relationship.enddate, \r\n      value: r.relationship.value\r\n    },\r\n    {},\r\n    tag_node,\r\n    {}\r\n  ) YIELD rel\r\n  RETURN null AS discard\r\n} IN TRANSACTIONS OF 10000 ROWS\r\nRETURN null\r\n```\r\nThis is necessary because `CALL` subqueries have to conclude with either a `RETURN` or a write operation such as `CREATE`. Although `apoc.merge.relationship` does perform writes, Cypher treats it as a read operation that has to return a value.",
          "link": "https://stackoverflow.com/questions/77651129/neo4j-process-a-json-file-in-batch/77652644#77652644",
          "title": "Neo4j process a json file in batch"
        }
      ],
      "owner": {
        "reputation": 411,
        "user_id": 6086295,
        "user_type": "registered",
        "accept_rate": 60,
        "profile_image": "https://i.stack.imgur.com/ToJOZ.jpg?s=256&g=1",
        "display_name": "Kevin Lee",
        "link": "https://stackoverflow.com/users/6086295/kevin-lee"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702461933,
      "creation_date": 1702442228,
      "question_id": 77651129,
      "share_link": "https://stackoverflow.com/q/77651129",
      "body_markdown": "I have a cypher to read the json file and do some processing to create/merge nodes and relationship, \r\n\r\n\r\n```\r\n// Read the json file\r\nCALL apoc.load.json(&#39;file:///test/test.json&#39;) YIELD value\r\n\r\n// Read the json fields as variables\r\nwith value.globalcustid as v_globalcustid, value.member_node_properties as member_node_properties, value.relationships as relationships\r\n\r\n// Update the member node demographic properties, if the member node does not exist, create it\r\nMERGE (m:Member {globalcustid: v_globalcustid})\r\nON CREATE SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\nON MATCH SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\n\r\n// Unwind the relationships array into multiple rows of relationship\r\nwith v_globalcustid, m, member_node_properties, relationships\r\nUNWIND relationships as r\r\n\r\n// Get the tag node and skip the null tag\r\nwith m, v_globalcustid, r, r.node.label as node_label, r.node.tag_id as tag_id\r\nwhere tag_id is not null\r\nCALL apoc.cypher.run(\r\n    &quot;MATCH (t:&quot; + node_label + &quot; {tag_id: &#39;&quot; + tag_id +&quot;&#39;}) RETURN t limit 1&quot;, \r\n    {}\r\n) yield value as tag_node\r\n\r\n// Merge the relationship of member node and tag node\r\nwith m, v_globalcustid, r, tag_node.t as tag_node\r\nCALL apoc.merge.relationship(\r\n  m, \r\n  r.relationship.label,\r\n  {createdate: r.relationship.createdate, enddate: r.relationship.enddate, value: r.relationship.value},\r\n  {},\r\n  tag_node,\r\n  {}\r\n) YIELD rel\r\n\r\nreturn *\r\n```\r\n\r\nThe cypher was working fine with a small json file, then I found that when the json file is too large, it will have out of memory error, so I decided to put it in batch.\r\n\r\n```\r\n\r\n:auto\r\n\r\n// Read the json file\r\nCALL apoc.load.json(&#39;file:///test/test.json&#39;) YIELD value\r\n\r\n// Read the json fields as variables\r\nwith value.globalcustid as v_globalcustid, value.member_node_properties as member_node_properties, value.relationships as relationships\r\n\r\ncall {\r\nwith v_globalcustid, member_node_properties, relationships\r\n\r\n// Update the member node demographic properties, if the member node does not exist, create it\r\nMERGE (m:Member {globalcustid: v_globalcustid})\r\nON CREATE SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\nON MATCH SET m.age_group=member_node_properties.age_group, m.gender=member_node_properties.gender, m.education=member_node_properties.education\r\n\r\n// Unwind the relationships array into multiple rows of relationship\r\nwith v_globalcustid, m, member_node_properties, relationships\r\nUNWIND relationships as r\r\n\r\n// Get the tag node and skip the null tag\r\nwith m, v_globalcustid, r, r.node.label as node_label, r.node.tag_id as tag_id\r\nwhere tag_id is not null\r\nCALL apoc.cypher.run(\r\n    &quot;MATCH (t:&quot; + node_label + &quot; {tag_id: &#39;&quot; + tag_id +&quot;&#39;}) RETURN t limit 1&quot;, \r\n    {}\r\n) yield value as tag_node\r\n\r\n// Merge the relationship of member node and tag node\r\nwith m, v_globalcustid, r, tag_node.t as tag_node\r\nCALL apoc.merge.relationship(\r\n  m, \r\n  r.relationship.label,\r\n  {createdate: r.relationship.createdate, enddate: r.relationship.enddate, value: r.relationship.value},\r\n  {},\r\n  tag_node,\r\n  {}\r\n) YIELD rel\r\n\r\nreturn *\r\n} in transactions of 10000 rows\r\n```\r\n\r\nBut it looks like it does not work to call another procedure inside the call {} block?\r\n```\r\nQuery cannot conclude with CALL together with YIELD (line 31, column 1 (offset: 1319))\r\n&quot;CALL apoc.merge.relationship(&quot;\r\n ^\r\n```",
      "link": "https://stackoverflow.com/questions/77651129/neo4j-process-a-json-file-in-batch",
      "title": "Neo4j process a json file in batch"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 493,
                "user_id": 2259302,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
                "display_name": "H&#229;kan L&#246;fqvist",
                "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
              },
              "edited": false,
              "score": 2,
              "creation_date": 1702276031,
              "post_id": 77633889,
              "comment_id": 136871983,
              "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse/77633889#comment136871983_77633889"
            },
            {
              "owner": {
                "reputation": 117,
                "user_id": 11803228,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/d09735ea42185e8b0712bf96aa36ada9?s=256&d=identicon&r=PG",
                "display_name": "FlagT",
                "link": "https://stackoverflow.com/users/11803228/flagt"
              },
              "reply_to_user": {
                "reputation": 493,
                "user_id": 2259302,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
                "display_name": "H&#229;kan L&#246;fqvist",
                "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702289738,
              "post_id": 77633889,
              "comment_id": 136873801,
              "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse/77633889#comment136873801_77633889"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 117,
            "user_id": 11803228,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/d09735ea42185e8b0712bf96aa36ada9?s=256&d=identicon&r=PG",
            "display_name": "FlagT",
            "link": "https://stackoverflow.com/users/11803228/flagt"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1702190081,
          "creation_date": 1702190081,
          "answer_id": 77633889,
          "question_id": 77633753,
          "share_link": "https://stackoverflow.com/a/77633889",
          "body_markdown": "In the topmost MATCH statement, I didn&#39;t define a name for the Relationships, such as r1, so the returned data did not include these relationships. Oddly enough, the browser managed to return data using the unnamed Cypher, which might involve some behind-the-scenes processing. By modifying the Cypher query, I have resolved this issue.",
          "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse/77633889#77633889",
          "title": "The same Cypher query yields inconsistent results between the SDK and the browser, with several Relationships missing"
        }
      ],
      "owner": {
        "reputation": 117,
        "user_id": 11803228,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d09735ea42185e8b0712bf96aa36ada9?s=256&d=identicon&r=PG",
        "display_name": "FlagT",
        "link": "https://stackoverflow.com/users/11803228/flagt"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "closed_date": 1702326357,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702190081,
      "creation_date": 1702185335,
      "question_id": 77633753,
      "share_link": "https://stackoverflow.com/q/77633753",
      "body_markdown": "I suspect that I have encountered a bug. When querying with the Go SDK, the data results obtained are inconsistent with those in the Neo4j browser, with several Relationships missing.\r\n\r\n  Neo4j Version: Neo4j Kernel 5.12.0 community\r\n\r\n  Neo4j Mode: Single instance\r\n\r\n  Driver version: Go driver v5.12.0\r\n\r\n  Operating System: centos\r\n\r\nMy Cypher is\r\n\r\n```\r\nMATCH (n1:AAA_IngressOfSecurityGroup {AssetsAccountId:&quot;aaaa&quot;})-[:IngressOfSecurityGroup]-&gt;(n2:AAA_SecurityGroup {AssetsAccountId:&quot;aaaa&quot;})-[:SecurityGroupOfNetworkInterface]-&gt;(n3:AAA_NetworkInterface {AssetsAccountId:&quot;aaaa&quot;})-[:NetworkInterfaceOfCvm]-&gt;(n4:AAA_CvmInstance {AssetsAccountId:&quot;aaaa&quot;,AssetUniqueId:&quot;aaaa-165d2740e7fa&quot;,AssetsVersion:&quot;1702108924&quot;}) WHERE n4.InstanceState = &#39;RUNNING&#39; AND n4.RestrictState = &#39;NORMAL&#39; AND n1.Action = &#39;ACCEPT&#39; AND (n1.Ipv6CidrBlock = &quot;::/0&quot; OR n1.CidrBlock = &quot;0.0.0.0/0&quot;) AND toLower(n1.Port) = &#39;all&#39; AND (toLower(n1.Protocol) = &#39;tcp&#39; or toLower(n1.Protocol) = &#39;udp&#39; or toLower(n1.Protocol)= &#39;all&#39; )   WITH n1, n2, n3, n4 WHERE ALL (groupId IN n3.GroupSet WHERE   NOT EXISTS {     MATCH (n2_other:AAA_SecurityGroup {AssetsAccountId:&quot;aaaa&quot;, SecurityGroupId: groupId})-[:IngressOfSecurityGroup]-&gt;(n1_other:AAA_IngressOfSecurityGroup)     WHERE n1_other.Action = &#39;DROP&#39; AND ((n1_other.CidrBlock = &quot;0.0.0.0/0&quot; OR n1_other.Ipv6CidrBlock = &quot;::/0&quot;) AND toLower(n1_other.Port) = &#39;all&#39;) AND NOT EXISTS {       MATCH (n1_smaller:AAA_IngressOfSecurityGroup)-[:IngressOfSecurityGroup]-&gt;(n2_other)       WHERE toInteger(n1_smaller.PolicyIndex) &lt; toInteger(n1_other.PolicyIndex)     }   } )  OPTIONAL MATCH p2 = (n7:AAA_PublicIp {AssetsAccountId:&quot;aaaa&quot;})-[:PublicIpToVpc]-&gt;(n6:AAA_Vpc {AssetsAccountId:&quot;aaaa&quot;})-[:SubnetsInVPC]-&gt;(n5:AAA_Subnet {AssetsAccountId:&quot;aaaa&quot;})-[:NetworkInterfaceInSubnet]-&gt;(n3) WHERE p2 IS NOT NULL  OPTIONAL MATCH p3 = (n8:AAA_Eip {AssetsAccountId:&quot;aaaa&quot;})-[:EipOToVpc]-&gt;(n6)-[:SubnetsInVPC]-&gt;(n5)-[:NetworkInterfaceInSubnet]-&gt;(n3) WHERE p3 IS NOT NULL      WITH DISTINCT n4, n1, n2, n3, n6, n7, p2, p3  RETURN n1, n2, n3,n4, n6, n7, p2, p3\r\n```\r\n\r\nThe code I use to process the data returned from Neo4j is as follows.\r\n\r\n```\r\nresult, session, err := global.Neo4j.RunCypherQuery(body.Cypher, nil)\r\n\tif err != nil {\r\n\t\tlogger.Log.Error(&quot;RunCypherQuery error: &quot; + err.Error())\r\n\t\tresponse := responses.NewErrorResponse(responses.StatusCodeUnknownErr, err.Error())\r\n\t\tc.JSON(http.StatusOK, response)\r\n\t\treturn\r\n\t}\r\n\r\n\tvar nodes []neo4j.Node\r\n\tvar relationships []neo4j.Relationship\r\n\r\n\tseenNodes := make(map[int64]bool)\r\n\tseenRelationships := make(map[int64]bool)\r\n\tfor result.Next() {\r\n\t\trecord := result.Record()\r\n\t\tfor _, value := range record.Values {\r\n\t\t\tif value == nil {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tswitch v := value.(type) {\r\n\t\t\tcase neo4j.Node:\r\n\t\t\t\tif _, found := seenNodes[v.Id]; !found {\r\n\t\t\t\t\tseenNodes[v.GetId()] = true\r\n\t\t\t\t\tnodes = append(nodes, v)\r\n\t\t\t\t}\r\n\t\t\tcase neo4j.Relationship:\r\n\t\t\t\tif _, found := seenRelationships[v.Id]; !found {\r\n\t\t\t\t\tseenRelationships[v.GetId()] = true\r\n\t\t\t\t\trelationships = append(relationships, v)\r\n\t\t\t\t}\r\n\t\t\tcase neo4j.Path:\r\n\t\t\t\tfor _, node := range v.Nodes {\r\n\t\t\t\t\tif _, found := seenNodes[node.Id]; !found {\r\n\t\t\t\t\t\tseenNodes[node.GetId()] = true\r\n\t\t\t\t\t\tnodes = append(nodes, node)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor _, rel := range v.Relationships {\r\n\t\t\t\t\tif _, found := seenRelationships[rel.Id]; !found {\r\n\t\t\t\t\t\tseenRelationships[rel.GetId()] = true\r\n\t\t\t\t\t\trelationships = append(relationships, rel)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tcase []interface{}:\r\n\t\t\t\tfor _, item := range v {\r\n\t\t\t\t\tswitch elem := item.(type) {\r\n\t\t\t\t\tcase neo4j.Node:\r\n\t\t\t\t\t\tif _, found := seenNodes[elem.GetId()]; !found {\r\n\t\t\t\t\t\t\tseenNodes[elem.GetId()] = true\r\n\t\t\t\t\t\t\tnodes = append(nodes, elem)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase neo4j.Relationship:\r\n\t\t\t\t\t\tif _, found := seenRelationships[elem.GetId()]; !found {\r\n\t\t\t\t\t\t\tseenRelationships[elem.GetId()] = true\r\n\t\t\t\t\t\t\trelationships = append(relationships, elem)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tlogger.Log.Error(&quot;Unexpected type in []interface{}: %T&quot;, item)\r\n\t\t\t\t\t\tresponse := responses.NewErrorResponse(responses.StatusCodeUnknownErr, errors.New(fmt.Sprintf(&quot;Unexpected type in []interface{}: %T&quot;, item)).Error())\r\n\t\t\t\t\t\tc.JSON(http.StatusOK, response)\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tlogger.Log.Error(&quot;Unexpected type: %T&quot;, v)\r\n\t\t\t\tresponse := responses.NewErrorResponse(responses.StatusCodeUnknownErr, errors.New(fmt.Sprintf(&quot;Unexpected type: %T&quot;, v)).Error())\r\n\t\t\t\tc.JSON(http.StatusOK, response)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\n```\r\nfunc (c *Client) RunCypherQuery(query string, params map[string]interface{}) (neo4j.Result, neo4j.Session, error) {\r\n\tsession := c.driver.NewSession(neo4j.SessionConfig{})\r\n\tfmt.Println(query)\r\n\tresult, err := session.Run(query, params)\r\n\tif err != nil {\r\n\t\treturn nil, session, err\r\n\t}\r\n\treturn result, session, nil\r\n}\r\n```\r\n\r\nin neo4j desktop search result is\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nin my code search result is\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe position marked with a red &quot;X&quot; indicates that no results were found.\r\n\r\nIn the RunCypherQuery method, the data for these three Relationships were not found in the returned result.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LBl50.png\r\n  [2]: https://i.stack.imgur.com/rAFEJ.png",
      "link": "https://stackoverflow.com/questions/77633753/the-same-cypher-query-yields-inconsistent-results-between-the-sdk-and-the-browse",
      "closed_reason": "Duplicate",
      "title": "The same Cypher query yields inconsistent results between the SDK and the browser, with several Relationships missing"
    },
    {
      "tags": ["neo4j", "cypher", "graph-databases", "graph-data-science"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702324318,
              "post_id": 77622086,
              "comment_id": 136879893,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136879893_77622086"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702505295,
              "post_id": 77622086,
              "comment_id": 136906245,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136906245_77622086"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702507831,
              "post_id": 77622086,
              "comment_id": 136906547,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136906547_77622086"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702509772,
              "post_id": 77622086,
              "comment_id": 136906751,
              "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#comment136906751_77622086"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "last_editor": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1702509977,
          "last_edit_date": 1702509977,
          "creation_date": 1701970942,
          "answer_id": 77622086,
          "question_id": 77621751,
          "share_link": "https://stackoverflow.com/a/77622086",
          "body_markdown": "The frequency of graph changes will determine if you should batch or not.\r\n\r\nTo your main question, FastRP depends on a node and its neighbors, the neighbors of those, the neighbors of those, etc.\r\n\r\nThere&#39;s a configuration parameter IterationWeights which does two things:\r\n1. Determines the number of neighbor-neighbor-neighbors to look at.\r\n2. Determines how relevant each degree of separation is.\r\n\r\nIf you set IterationWeights to [1.0], FastRP will only look at immediate neighbors.\r\n\r\n&lt;s&gt;If you use [0.0, 1.0] then first and second-degree neighbors will be used, weighted equally.&lt;/s&gt;\r\n\r\nThe above should be more accurately stated as &quot;The first iteration looks only at direct neighbors. The second iteration looks at direct and 2nd degree neighbors. Using [0.0, 1.0] set the number of iterations at 2 and means the second iteration results will be used exclusively.&quot; It was not correct to say &quot;weighted equally.&quot;\r\n\r\nTo update your embeddings when changes occur, let&#39;s say you&#39;re using second-degree neighbors and your node A changes. Create a projection with just A, its neighbors and neighbor-neighbors, and run FastRP in write mode.\r\n\r\nSame idea for batch updates, just select the nodes that have changed and everything up to 2 hops out from those.",
          "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change/77622086#77622086",
          "title": "Updating Neo4j Embeddings on Graph Change"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 21159756,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp7ViXMCr1RVFcrYuGXAB5pQU9wN_yd6j-8qcuOQ=k-s256",
        "display_name": "Chetra Abeid",
        "link": "https://stackoverflow.com/users/21159756/chetra-abeid"
      },
      "last_editor": {
        "reputation": 25,
        "user_id": 21159756,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp7ViXMCr1RVFcrYuGXAB5pQU9wN_yd6j-8qcuOQ=k-s256",
        "display_name": "Chetra Abeid",
        "link": "https://stackoverflow.com/users/21159756/chetra-abeid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 71,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77622086,
      "answer_count": 1,
      "score": 2,
      "last_activity_date": 1702509977,
      "creation_date": 1701967766,
      "last_edit_date": 1701967834,
      "question_id": 77621751,
      "share_link": "https://stackoverflow.com/q/77621751",
      "body_markdown": "I am using the Neo4j Graph Data Science (GDS) library with Fast Random Projection (FastRP) for graph embeddings. I&#39;m facing challenges in updating these embeddings efficiently in response to frequent graph changes (additions/removals of nodes and edges). I&#39;m particularly interested in understanding the best practices for updating these embeddings - should I opt for incremental updates after each change, or batch processing at regular intervals?\r\n\r\nAdditionally, I&#39;m curious if it&#39;s feasible to update embeddings for only the affected sub-graph while maintaining the integrity and consistency of embeddings as if they were done on the global graph projection.",
      "link": "https://stackoverflow.com/questions/77621751/updating-neo4j-embeddings-on-graph-change",
      "title": "Updating Neo4j Embeddings on Graph Change"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701883396,
          "creation_date": 1701883396,
          "answer_id": 77615121,
          "question_id": 77614613,
          "share_link": "https://stackoverflow.com/a/77615121",
          "body_markdown": "Assuming `id` and `type` are properties, this works:\r\n```sql\r\nMATCH (n0 {id: &quot;A&quot;})--(n1 {type:2})--(n2)\r\nWHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\nWITH collect(DISTINCT [n0, n1]) AS r1, collect(DISTINCT [n1, n2]) AS r2\r\nWITH \r\n    COLLECT {\r\n        WITH r1\r\n        UNWIND r1 AS r\r\n        WITH r[0].id AS lhs, &#39;type&#39; + r[1].type AS rhs, count(*) AS num\r\n        RETURN {lhs: lhs, rhs: rhs, num: num }\r\n    } AS first, \r\n    COLLECT {\r\n        WITH r2\r\n        UNWIND r2 AS r\r\n        WITH &#39;type&#39; + r[0].type AS lhs, r[1].id AS rhs, count(*) AS num\r\n        RETURN {lhs: lhs, rhs: rhs, num: num }\r\n    } AS second\r\nUNWIND first + second AS cn\r\nRETURN \r\n    cn.lhs + &#39; to &#39; + cn.rhs + &#39;: &#39; + cn.num + \r\n    CASE \r\n      WHEN cn.num = 1 THEN &#39; connection&#39; \r\n      ELSE &#39; connections&#39; \r\n    END AS result\r\n```\r\nIt&#39;s not pretty ...",
          "link": "https://stackoverflow.com/questions/77614613/count-distinct-node-pairings-in-a-multihop-match/77615121#77615121",
          "title": "Count distinct node pairings in a multihop match"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701900782,
          "creation_date": 1701900782,
          "answer_id": 77616605,
          "question_id": 77614613,
          "share_link": "https://stackoverflow.com/a/77616605",
          "body_markdown": "This query might suffice (it repeats the same `A_to_type2` count in each result row):\r\n\r\n    MATCH ({id: &quot;A&quot;})-[r1]-({type:2})-[r2]-(n2)\r\n    WHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\n    WITH COUNT(DISTINCT r1) AS A_to_type2, COLLECT({n2Id: n2.id, r2: r2}) AS data\r\n    UNWIND data AS d\r\n    RETURN A_to_type2, d.n2Id AS n2Id, COUNT(DISTINCT d.r2) AS type2_to_n2Id\r\n\r\nOutput for your sample data:\r\n\r\n    ╒══════════╤════╤═════════════╕\r\n    │A_to_type2│n2Id│type2_to_n2Id│\r\n    ╞══════════╪════╪═════════════╡\r\n    │2         │&quot;D&quot; │2            │\r\n    ├──────────┼────┼─────────────┤\r\n    │2         │&quot;E&quot; │1            │\r\n    └──────────┴────┴─────────────┘\r\n\r\nOr, to return a single row with a collection of the type2_to_n2Id counts:\r\n\r\n    MATCH ({id: &quot;A&quot;})-[r1]-({type:2})-[r2]-(n2)\r\n    WHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\n    WITH COUNT(DISTINCT r1) AS A_to_type2, COLLECT({n2Id: n2.id, r2: r2}) AS data\r\n    UNWIND data AS d\r\n    WITH A_to_type2, d.n2Id AS n2Id, COUNT(DISTINCT d.r2) AS cnt\r\n    RETURN A_to_type2, COLLECT({n2Id: n2Id, count: cnt}) AS type2_to_n2Id\r\n\r\nSample result:\r\n\r\n    ╒══════════╤══════════════════════════════════════════════╕\r\n    │A_to_type2│type2_to_n2Id                                 │\r\n    ╞══════════╪══════════════════════════════════════════════╡\r\n    │2         │[{count: 2, n2Id: &quot;D&quot;}, {count: 1, n2Id: &quot;E&quot;}]│\r\n    └──────────┴──────────────────────────────────────────────┘",
          "link": "https://stackoverflow.com/questions/77614613/count-distinct-node-pairings-in-a-multihop-match/77616605#77616605",
          "title": "Count distinct node pairings in a multihop match"
        }
      ],
      "owner": {
        "reputation": 31,
        "user_id": 5868625,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a26d526794bcf8b9755d4cfde3514e42?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "erikejan",
        "link": "https://stackoverflow.com/users/5868625/erikejan"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701900782,
      "creation_date": 1701878441,
      "question_id": 77614613,
      "share_link": "https://stackoverflow.com/q/77614613",
      "body_markdown": "I&#39;m looking to count the number of distinct pairings in query of neighbor&#39;s neighbors. Let say I have a small graph consisting of the following nodes and edges,\r\n\r\n    (id:A, type:1)-&gt;(id:B, type:2)\r\n    (id:A, type:1)-&gt;(id:C, type:2)\r\n    (id:B, type:2)-&gt;(id:D, type:3)\r\n    (id:C, type:2)-&gt;(id:D, type:3)\r\n    (id:C, type:2)-&gt;(id:E, type:3)\r\n\r\nand a pattern to match like,\r\n\r\n    MATCH (n0 {id: A})--(n1:2)--(n2)\r\n    WHERE n2.id IN [&quot;D&quot;, &quot;E&quot;]\r\n\r\nI am looking for a query that will count the distinct pairings along this 2-hop pattern. In other words, the expected answer would give the counts,\r\n\r\n    A to type2   : 2 connections\r\n    type2 to D   : 2 connections\r\n    type2 to E   : 1 connection",
      "link": "https://stackoverflow.com/questions/77614613/count-distinct-node-pairings-in-a-multihop-match",
      "title": "Count distinct node pairings in a multihop match"
    },
    {
      "tags": [
        "neo4j",
        "cypher",
        "graph-databases",
        "shortest-path",
        "neo4j-apoc"
      ],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701921554,
          "post_id": 77608911,
          "comment_id": 136835752,
          "link": "https://stackoverflow.com/questions/77608911/shortest-path-of-weighted-and-directed-graph-in-neo4j#comment136835752_77608911"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701812532,
          "creation_date": 1701812532,
          "answer_id": 77609396,
          "question_id": 77608911,
          "share_link": "https://stackoverflow.com/a/77609396",
          "body_markdown": "If you want to only find paths where the relationships are in one direction e.g. outbound, you can either prepend `&lt;` to the relationship type for inbound, or append `&gt;` for outbound. \r\n\r\nTo only follow outbound `ROAD_SEGMENT` relationships, your query would become:\r\n```sql\r\nMATCH (a:Address)-[:NEAREST_INTERSECTION]-&gt;(source:Intersection)\r\nWHERE a.full_address CONTAINS &quot;410 E 5TH AVE SAN MATEO, CA&quot;\r\nMATCH (poi:Address)-[:NEAREST_INTERSECTION]-&gt;(dest:Intersection) \r\nWHERE poi.full_address CONTAINS &quot;39 GRAND BLVD SAN MATEO, CA&quot;\r\nCALL apoc.algo.aStarConfig(source, dest, &quot;ROAD_SEGMENT&gt;&quot;, \r\n  {pointPropName: &quot;location&quot;, weight: &quot;length&quot;}) \r\nYIELD weight, path\r\nRETURN *\r\n``` ",
          "link": "https://stackoverflow.com/questions/77608911/shortest-path-of-weighted-and-directed-graph-in-neo4j/77609396#77609396",
          "title": "Shortest path of weighted and directed graph in Neo4j"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 23048059,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/07bf9a2ad417d0989b6e131f6125237e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "strzelaczbramek9",
        "link": "https://stackoverflow.com/users/23048059/strzelaczbramek9"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1701812532,
      "creation_date": 1701805911,
      "question_id": 77608911,
      "share_link": "https://stackoverflow.com/q/77608911",
      "body_markdown": "I created a map of city in Neo4j using OpenStreetMap and OpenAddresses data. I want to find the shortest path from one address to another. The problem is that, when I&#39;m using function apoc.algo.aStarConfig,I&#39;m getting a path without consideration about direction of a relationship.\r\n\r\n\r\n```\r\nMATCH (a:Address)-[:NEAREST_INTERSECTION]-&gt;(source:Intersection)\r\nWHERE a.full_address CONTAINS &quot;410 E 5TH AVE SAN MATEO, CA&quot;\r\nMATCH (poi:Address)-[:NEAREST_INTERSECTION]-&gt;(dest:Intersection) \r\nWHERE poi.full_address CONTAINS &quot;39 GRAND BLVD SAN MATEO, CA&quot;\r\nCALL apoc.algo.aStarConfig(source, dest, &quot;ROAD_SEGMENT&quot;, \r\n  {pointPropName: &quot;location&quot;, weight: &quot;length&quot;}) \r\nYIELD weight, path\r\nRETURN *\r\n```\r\n[Result of the query](https://i.stack.imgur.com/nTytn.png)\r\n\r\n\r\n**So my question is if there is a possibility to find the shortest path from one path to another not consider upstream relathionships?**",
      "link": "https://stackoverflow.com/questions/77608911/shortest-path-of-weighted-and-directed-graph-in-neo4j",
      "title": "Shortest path of weighted and directed graph in Neo4j"
    },
    {
      "tags": ["graph", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1701806147,
          "post_id": 77608338,
          "comment_id": 136820331,
          "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j#comment136820331_77608338"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701809782,
              "post_id": 77608932,
              "comment_id": 136820859,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136820859_77608932"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701811366,
              "post_id": 77608932,
              "comment_id": 136821085,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821085_77608932"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701813625,
              "post_id": 77608932,
              "comment_id": 136821434,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821434_77608932"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701813805,
              "post_id": 77608932,
              "comment_id": 136821455,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821455_77608932"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1,
                "user_id": 10190562,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "mahsa tajik",
                "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701815809,
              "post_id": 77608932,
              "comment_id": 136821715,
              "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#comment136821715_77608932"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701806107,
          "creation_date": 1701806107,
          "answer_id": 77608932,
          "question_id": 77608338,
          "share_link": "https://stackoverflow.com/a/77608932",
          "body_markdown": "With the first query, you are probably getting an error telling you that `classId` is not defined. In which case, no nodes are being created.\r\n\r\nIf you are just looking to test the properties of the first created node, you can modify your existing query to declare a variable e.g. `n` in the node pattern. You can then access node properties with the dot notation in the `RETURN` clause:\r\n```sql\r\nLOAD CSV WITH HEADERS FROM &#39;file:///Badges.csv&#39; AS row\r\nCREATE (n:Badges {\r\n  classid: toInteger(row.Class),\r\n  name: row.Name,\r\n  badgeId: toInteger(row.Id)\r\n})\r\nRETURN n.classid, n.name, n.badgeId \r\nLIMIT 1;\r\n```",
          "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j/77608932#77608932",
          "title": "I can not import from csv files into Neo4j"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 10190562,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/e87763b86e0169a493c563e7bb6c05fc?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "mahsa tajik",
        "link": "https://stackoverflow.com/users/10190562/mahsa-tajik"
      },
      "last_editor": {
        "reputation": 12099,
        "user_id": 6277104,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/281d013ae92cf356889bec95c6098682?s=256&d=identicon&r=PG",
        "display_name": "SternK",
        "link": "https://stackoverflow.com/users/6277104/sternk"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 51,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1701892291,
      "creation_date": 1701799094,
      "last_edit_date": 1701892291,
      "question_id": 77608338,
      "share_link": "https://stackoverflow.com/q/77608338",
      "body_markdown": "```sql\r\n// BadgesNode\r\nLOAD CSV WITH HEADERS FROM &#39;file:///Badges.csv&#39; AS row\r\nCREATE (:Badges {\r\n  classid: toInteger(row.Class),\r\n  name: row.Name,\r\n  badgeId: toInteger(row.Id)\r\n})\r\nWITH *\r\nLIMIT 1\r\nRETURN classid, name, badgeId;\r\n```\r\n\r\nwhen I run it, there is no value in the properties. But when I run this cypher \r\n\r\n```sql\r\nLOAD CSV WITH HEADERS FROM &#39;file:///Badges.csv&#39; AS row\r\nRETURN row\r\n```\r\n\r\nand this is the result that it returns:\r\n```json\r\n{\r\n  &quot;Name&quot;: &quot;Informed&quot;,\r\n  &quot;Date&quot;: &quot;2014-05-13 23:06&quot;,\r\n  &quot;Class&quot;: &quot;3&quot;,\r\n  &quot;Id&quot;: &quot;1&quot;,\r\n  &quot;UserId&quot;: &quot;1&quot;,\r\n  &quot;TagBased&quot;: &quot;FALSE&quot;\r\n}\r\n```\r\n\r\n\r\nI can not understand why the first cypher does not return values into the properties. Can somebody help me. I stuck in this part for two days. \r\n\r\nI need to fill the properties by the values in the csv file.\r\nAnd this is a subset of my csv file.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/834Hw.png",
      "link": "https://stackoverflow.com/questions/77608338/i-can-not-import-from-csv-files-into-neo4j",
      "title": "I can not import from csv files into Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 437,
            "user_id": 5831358,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Marj",
            "link": "https://stackoverflow.com/users/5831358/marj"
          },
          "edited": false,
          "score": 2,
          "creation_date": 1701428084,
          "post_id": 77577493,
          "comment_id": 136777083,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136777083_77577493"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1701913849,
          "post_id": 77577493,
          "comment_id": 136835176,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136835176_77577493"
        },
        {
          "owner": {
            "reputation": 35,
            "user_id": 22289882,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
            "display_name": "Sharon ",
            "link": "https://stackoverflow.com/users/22289882/sharon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702020469,
          "post_id": 77577493,
          "comment_id": 136848854,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136848854_77577493"
        },
        {
          "owner": {
            "reputation": 35,
            "user_id": 22289882,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
            "display_name": "Sharon ",
            "link": "https://stackoverflow.com/users/22289882/sharon"
          },
          "reply_to_user": {
            "reputation": 437,
            "user_id": 5831358,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Marj",
            "link": "https://stackoverflow.com/users/5831358/marj"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702022737,
          "post_id": 77577493,
          "comment_id": 136849162,
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t#comment136849162_77577493"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702369745,
              "post_id": 77642610,
              "comment_id": 136884547,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136884547_77642610"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702374231,
              "post_id": 77642610,
              "comment_id": 136885349,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136885349_77642610"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702416818,
              "post_id": 77642610,
              "comment_id": 136893026,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136893026_77642610"
            },
            {
              "owner": {
                "reputation": 35,
                "user_id": 22289882,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
                "display_name": "Sharon ",
                "link": "https://stackoverflow.com/users/22289882/sharon"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1702451788,
              "post_id": 77642610,
              "comment_id": 136896894,
              "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#comment136896894_77642610"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1702332090,
          "creation_date": 1702332090,
          "answer_id": 77642610,
          "question_id": 77577493,
          "share_link": "https://stackoverflow.com/a/77642610",
          "body_markdown": "Based on your comments, I will assume your data model looks something like this (nodes can have more properties than shown):\r\n\r\n    (:Complaints {complaint_id: 7})-[:Complaint_Details_complaint_id]-&gt;(:Complaint_Details {complaint_id: 7, detail_id: 123})--&gt;(:Foo {detail_id: 123})\r\n\r\nWhere `Foo` is just one of any number of labels for the child nodes of a `Complaint_Details` node.\r\n\r\nIn that case, when deleting a `Complaints` node you can also delete its `Complaint_Details` nodes and remove the `detail_id` properties of their children this way:\r\n\r\n    MATCH (c:Complaints)-[:Complaint_Details_complaint_id]-&gt;(d:Complaint_Details)\r\n    WHERE c.complaint_id = $complaint_id\r\n    OPTIONAL MATCH (d)--&gt;(f)\r\n    REMOVE f.details_id\r\n    DETACH DELETE d, c\r\n\r\nThe query assumes that the desired `complaint_id` value is passed as a `$complaint_id` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/).",
          "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t/77642610#77642610",
          "title": "In Neo4j I want to obtain the path emerging from a particular node,I then want to iterate each node in the path and delete it based on stored action"
        }
      ],
      "owner": {
        "reputation": 35,
        "user_id": 22289882,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtc7h3s466RAoCFVX-EwI4wjMxCWbi3VrlkuJxUUSN64xcg=k-s256",
        "display_name": "Sharon ",
        "link": "https://stackoverflow.com/users/22289882/sharon"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 80,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702332090,
      "creation_date": 1701338493,
      "last_edit_date": 1701913927,
      "question_id": 77577493,
      "share_link": "https://stackoverflow.com/q/77577493",
      "body_markdown": "I am doing a project of converting MySQL tables to Neo4j graph.After conversion I am replicating the delete action of the SQL Database using java in the graph.So when I delete a record in my SQL database,I want to delete the nodes related to that particular record.For example I am deleting from table Complaints with complaint_id=7.Complaint_Details is a child table of Complaints with  ON DELETE CASCADE Action .This further has another child table with ON DELETE SET NULL Action.So in the graph I want to delete the Complaint node with complaint_id = 7,Complaint_Details node with complaint_id =7 and the removal of the respective property of  its child nodes.\r\n\r\nMy current approach is to query the path from Node complaint with complaint_id 7 using \r\n String cypherPath = &quot;MATCH path=(n:&quot; + tableName + &quot;{&quot; + columnName + &quot;:&quot; + PkValue + &quot;})-[*]-&gt;(m) WHERE NOT EXISTS((m)-[]-&gt;()) RETURN path&quot;;\r\nThen i am iterating through each node and checking the database for its action on deletion.Based on that action I am either deleting the node or removing a property.\r\nThis method takes up a lot of time (around 5s for 2000 records)\r\nIs there a more efficient way to do this?",
      "link": "https://stackoverflow.com/questions/77577493/in-neo4j-i-want-to-obtain-the-path-emerging-from-a-particular-node-i-then-want-t",
      "title": "In Neo4j I want to obtain the path emerging from a particular node,I then want to iterate each node in the path and delete it based on stored action"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701790221,
          "post_id": 77576343,
          "comment_id": 136817513,
          "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query#comment136817513_77576343"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701914322,
              "post_id": 77576432,
              "comment_id": 136835226,
              "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77576432#comment136835226_77576432"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": -1,
                "user_type": "moderator",
                "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
                "display_name": "Community",
                "link": "https://stackoverflow.com/users/-1/community"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701948646,
              "post_id": 77576432,
              "comment_id": 136839294,
              "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77576432#comment136839294_77576432"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 6275738,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-FxqHo1AG_G0/AAAAAAAAAAI/AAAAAAAAAIw/pSFQVbBMydg/photo.jpg?sz=256",
            "display_name": "Shakthi Ramalingam",
            "link": "https://stackoverflow.com/users/6275738/shakthi-ramalingam"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701400233,
          "last_edit_date": 1701400233,
          "creation_date": 1701327176,
          "answer_id": 77576432,
          "question_id": 77576343,
          "share_link": "https://stackoverflow.com/a/77576432",
          "body_markdown": "```sql\r\nMATCH (n:Commercial) \r\nWITH count(n) AS grosssales \r\nMATCH (c:Commercial) \r\nWITH grosssales,count(c) AS distinctcustomer, c.customer_id AS customer, tofloat(grosssales/count(c)) AS salesreach \r\nRETURN imp AS grosssales, distinctcustomer, customer, salesreach\r\n```\r\n",
          "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77576432#77576432",
          "title": "Cypher Nested Query"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701916218,
          "creation_date": 1701916218,
          "answer_id": 77617346,
          "question_id": 77576343,
          "share_link": "https://stackoverflow.com/a/77617346",
          "body_markdown": "You can simplify the query by using the new [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/count/) (in neo4j 5.0+) to count the total number of `Commercial` nodes. Although `COUNT()` is an aggregating function, a COUNT subquery is not -- so it is not affected by the `customer` grouping key.\r\n\r\n    MATCH (c:Commercial) \r\n    WITH COUNT{ (:Commercial) } AS grosssales, COUNT(c) AS distinctcustomer, c.customer_id AS customer\r\n    RETURN grosssales, distinctcustomer, customer, TOFLOAT(grosssales/distinctcustomer) AS salesreach\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query/77617346#77617346",
          "title": "Cypher Nested Query"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 6275738,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-FxqHo1AG_G0/AAAAAAAAAAI/AAAAAAAAAIw/pSFQVbBMydg/photo.jpg?sz=256",
        "display_name": "Shakthi Ramalingam",
        "link": "https://stackoverflow.com/users/6275738/shakthi-ramalingam"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701916218,
      "creation_date": 1701325970,
      "last_edit_date": 1701466068,
      "question_id": 77576343,
      "share_link": "https://stackoverflow.com/q/77576343",
      "body_markdown": "Trying to build nested query in cypher sql to find the grosssale, sales by distinctcustomer and salesreach and not able to pass column 1 value as input to another column - any help would be appreciated.\r\n\r\nSyntax here\r\n\r\n```sql\r\nMATCH (n:Commercial)\r\nWITH (n) AS grosssales, count(n) AS distinctcustomer, \r\n  n.customer_id AS customer, ### grouping by customer_id ###\r\n  grosssale / distinctcustomer AS salesreach\r\nRETURN grossale, distinctcustomer, salesreach, customer_id\r\n```\r\n\r\nTried WITH clause however no joy, would appreciate any help in correcting the cypher syntax.",
      "link": "https://stackoverflow.com/questions/77576343/cypher-nested-query",
      "title": "Cypher Nested Query"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701191812,
          "post_id": 77565696,
          "comment_id": 136743815,
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi#comment136743815_77565696"
        },
        {
          "owner": {
            "reputation": 2030,
            "user_id": 988324,
            "user_type": "registered",
            "accept_rate": 65,
            "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
            "display_name": "Richard Deurwaarder",
            "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701191879,
          "post_id": 77565696,
          "comment_id": 136743829,
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi#comment136743829_77565696"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1701193030,
          "post_id": 77565696,
          "comment_id": 136744039,
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi#comment136744039_77565696"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701192605,
              "post_id": 77565897,
              "comment_id": 136743970,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136743970_77565897"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701192904,
              "post_id": 77565897,
              "comment_id": 136744016,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136744016_77565897"
            },
            {
              "owner": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701193355,
              "post_id": 77565897,
              "comment_id": 136744085,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136744085_77565897"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 2030,
                "user_id": 988324,
                "user_type": "registered",
                "accept_rate": 65,
                "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
                "display_name": "Richard Deurwaarder",
                "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1701202870,
              "post_id": 77565897,
              "comment_id": 136745647,
              "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#comment136745647_77565897"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1701202839,
          "last_edit_date": 1701202839,
          "creation_date": 1701192069,
          "answer_id": 77565897,
          "question_id": 77565696,
          "share_link": "https://stackoverflow.com/a/77565897",
          "body_markdown": "To follow all paths composed of relationships with either type `Sync` and direction outbound, or type `Async` and direction inbound, the following [quantified path pattern][1] will work:\r\n```sql\r\nMATCH (s {type: &#39;service&#39;}) \r\n        ((n)-[r]-() WHERE (n = startNode(r) AND r:Sync) \r\n          OR (n = endNode(r) AND r:Async))+ (dependent)\r\nRETURN s, collect(DISTINCT dependent) AS allDependentNodes\r\n```\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/patterns/concepts/#quantified-path-patterns",
          "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi/77565897#77565897",
          "title": "How to match nodes in Cypher query based on different directions per relationship type"
        }
      ],
      "owner": {
        "reputation": 2030,
        "user_id": 988324,
        "user_type": "registered",
        "accept_rate": 65,
        "profile_image": "https://www.gravatar.com/avatar/e9a50cfb6dd20efd1198fdafc0b1c11a?s=256&d=identicon&r=PG",
        "display_name": "Richard Deurwaarder",
        "link": "https://stackoverflow.com/users/988324/richard-deurwaarder"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77565897,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1701202839,
      "creation_date": 1701190063,
      "question_id": 77565696,
      "share_link": "https://stackoverflow.com/q/77565696",
      "body_markdown": "I&#39;ve got a graph with two types of relationships: `Sync` and `Async`.\r\n\r\nI want a query to give me a subgraph, meaning all the nodes that can be reached directly or indirectly.\r\n\r\nThis query works for this:\r\n\r\n    MATCH (s {type: &#39;service&#39;)\r\n    OPTIONAL MATCH (s)-[:Async|Sync*]-&gt;(dependent)\r\n    WITH s, COLLECT(DISTINCT dependent) AS allDependentNodes\r\n\r\nThis gives me every node that can be reached via an Sync or Async relationship.\r\n\r\n\r\nBut now I&#39;d like to use a different direction based on the type of relation. I want nodes that can be reached via outgoing Sync `a -&gt; b` OR reached via incoming Async `a &lt;- b`.  \r\n\r\nSo it&#39;s like an OR&#39;d match condition. I&#39;ve tried a few things without much success:\r\n\r\n    MATCH (s {type: &#39;service&#39;)\r\n    OPTIONAL MATCH (s)-[:Sync*]-&gt;(dependent), (s)&lt;-[:Async*]-(d)\r\n    WITH s, totalNodes, COLLECT(DISTINCT dependent) AS allDependentNodes\r\n\r\n\r\nHow can I OR&#39;d together relationship matches or how can I match different types of relationships with different directions?",
      "link": "https://stackoverflow.com/questions/77565696/how-to-match-nodes-in-cypher-query-based-on-different-directions-per-relationshi",
      "title": "How to match nodes in Cypher query based on different directions per relationship type"
    },
    {
      "tags": ["csv", "vector", "neo4j", "cypher", "neo4j-admin"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 88773,
            "user_id": 379235,
            "user_type": "registered",
            "accept_rate": 62,
            "profile_image": "https://i.stack.imgur.com/qSUBs.png?s=256&g=1",
            "display_name": "daydreamer",
            "link": "https://stackoverflow.com/users/379235/daydreamer"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700601817,
          "creation_date": 1700601817,
          "answer_id": 77526008,
          "question_id": 77525633,
          "share_link": "https://stackoverflow.com/a/77526008",
          "body_markdown": "I was able to solve this in 2 steps\r\n\r\n## Step 1: Fix the header file\r\n```\r\nid:ID,:LABEL,amount:double,measureUnit:string,gramWeight:double,embedding:float[]\r\n```\r\nNote the `float[]` as the type\r\n\r\n## Step 2: Importing array\r\nThis involved 2 steps\r\n### Step 2.1: Create a valid delimiter for array\r\n\r\n```\r\nconst embedding = await createEmbedding(embeddingInput);\r\nconst embeddingString = embedding.join(ARRAY_DELIMITER);\r\n```\r\nWhere `ARRAY_DELIMITER` is `|`\r\n\r\n### Step 2.2 Update import command to tell about delimiter\r\n```\r\nneo4j-admin database import full --array-delimiter=&#39;|&#39; // and so on...\r\n```\r\nNote `--array-delimiter=&#39;|&#39;` here.\r\n\r\nThis helped me fix the issue.",
          "link": "https://stackoverflow.com/questions/77525633/importing-vector-embedding-in-neo4j-via-neo4j-admin-import-is-failing-with-unkno/77526008#77526008",
          "title": "Importing Vector Embedding in Neo4J via neo4j-admin import is failing with unknown property type &#39;LIST&lt;FLOAT&gt;&#39;"
        }
      ],
      "owner": {
        "reputation": 88773,
        "user_id": 379235,
        "user_type": "registered",
        "accept_rate": 62,
        "profile_image": "https://i.stack.imgur.com/qSUBs.png?s=256&g=1",
        "display_name": "daydreamer",
        "link": "https://stackoverflow.com/users/379235/daydreamer"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 18,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1700601817,
      "creation_date": 1700596915,
      "question_id": 77525633,
      "share_link": "https://stackoverflow.com/q/77525633",
      "body_markdown": "I have a CSV header and data file that I want to import in Neo4J using `neo4j-admin database` along with other files.\r\n\r\nHere are my files\r\n\r\n`HEADER`\r\n```\r\nid:ID,:LABEL,amount:double,measureUnit:string,gramWeight:double,embedding:LIST&lt;FLOAT&gt;\r\n```\r\n\r\n`DATA`\r\n```\r\nFFP_0_321358,FoodPortion_3_0_0,2,&quot;tablespoon&quot;,33.9,[0.1671835333108902,-0.7092851996421814,0.14913123846054077,0.7785872220993042,-0.312934011220932,0.08211034536361694,-0.028107712045311928,-0.25594303011894226,0.5699977278709412,0.6135631799697876,0.19823063910007477,0.09847097098827362,-0.6676387190818787,0.004426721017807722,-0.5394071340560913,0.9914360046386719,0.37802284955978394,0.2705143392086029,-0.06354071199893951,-0.3283253610134125,-0.12500542402267456,0.5226773023605347,-0.5599125623703003,-0.17582887411117554,0.33407628536224365,0.8492608666419983,1.6623034477233887,1.037268877029419,0.22571976482868195,0.5713614821434021,0.004049248062074184,-0.3291890323162079,-0.2762421667575836,0.2313031107187271,-0.1946457028388977,-0.17294952273368835,-0.08332429081201553,0.3433372676372528,0.5293984413146973,1.145921230316162,-0.6517155170440674,0.8047919273376465,0.012163370847702026,0.3513254225254059,-0.04551488906145096,0.2955775856971741,-0.023389466106891632,0.06517010182142258,-0.1647074818611145,-0.0821857675909996,0.23624971508979797,-0.7499469518661499,0.3026871979236603,-0.996300995349884,0.4166252911090851,0.338083416223526,1.4630589485168457,0.3421212434768677,-0.740848183631897,0.10450270026922226,-0.5746254920959473,0.9487141370773315,-0.6349362134933472,0.6473907232284546,0.737545907497406,0.631997287273407,-0.585864782333374,-1.2288835048675537,-0.4180561304092407,-0.2542168200016022,0.2972530126571655,0.14671950042247772,-0.22330710291862488,-0.602167546749115,0.29623106122016907,0.7523813247680664,-0.7711286544799805,-0.46698877215385437,-0.6049727201461792,0.5525864362716675,0.3214971125125885,-0.0008972518844529986,0.024934018030762672,0.09121513366699219,-0.99419105052948,0.01268870010972023,-0.25948208570480347,0.0844053328037262,-0.198614239692688,-0.03724987059831619,-0.6223516464233398,0.616694450378418,-0.7710570693016052,0.1813107579946518,0.2166164517402649,-0.2937754690647125,0.03168824687600136,-0.09738413244485855,-0.9887257814407349,-0.2576909363269806,-0.003925889730453491,0.039951808750629425,-0.1942584365606308,0.01654890924692154,0.027941200882196426,0.060958266258239746,0.31667277216911316,-0.5193405747413635,-0.5178394317626953,0.2285129725933075,-0.3170968294143677,-0.2246341109275818,0.2833319902420044,-0.5099343657493591,-0.49715498089790344,-0.3493226170539856,0.3292626142501831,0.24636048078536987,0.7207037210464478,0.16913318634033203,-0.6909018754959106,0.06924944370985031,0.4800015687942505,-0.2168654501438141,0.5917078852653503,0.23160593211650848,0.537395715713501,0.7937036752700806,0.17396502196788788,-0.3983372151851654,0.8670725226402283,-0.21596691012382507,0.7286391854286194,0.338647723197937,-0.541279137134552,-0.24414321780204773,0.7341932058334351,0.4927745461463928,-0.7745022177696228,0.8004167079925537,-0.6826944947242737,0.13118436932563782,-0.19548332691192627,0.07437360286712646,-0.5719180703163147,0.24923273921012878,-0.5927393436431885,0.8679149150848389,0.5983684062957764,-0.027823010459542274,0.7718298435211182,-0.4654153287410736,-1.3462893962860107,0.7995166182518005,-0.011185641400516033,-0.4824565351009369,0.5111072063446045,-0.44001948833465576,-0.3706497848033905,-0.5190173983573914,0.32828569412231445,-0.08511803299188614,-0.2909694015979767,0.6947621703147888,-0.48054996132850647,0.9403616786003113,0.9104567766189575,-0.3861950635910034,0.12150025367736816,-1.0906805992126465,-0.4025906026363373,0.9348596930503845,-1.0202574729919434,0.20373153686523438,-0.523996114730835,0.053802911192178726,0.24222053587436676,0.3762281537055969,-0.5176705121994019,-0.20220249891281128,0.03934430330991745,0.09392368793487549,0.7321622967720032,-0.14787785708904266,0.09097499400377274,-1.0559947490692139,0.48921504616737366,0.05759872868657112,0.8594281077384949,0.7001445293426514,-0.5685751438140869,-1.088683009147644,-0.6474522948265076,0.7292926907539368,0.09484611451625824,-0.13430261611938477,0.5815054774284363,-0.12725986540317535,-0.2390153408050537,-0.5564658641815186,0.03633316978812218,-0.13943913578987122,0.8008201122283936,-0.03932861611247063,-0.592444121837616,-0.28947505354881287,-1.3887320756912231,-0.2919691503047943,0.10906774550676346,-0.16127485036849976,0.4028816521167755,0.18391253054141998,-0.4581294655799866,0.7862441539764404,-0.8642418384552002,-0.8036615252494812,-0.20525407791137695,0.0392296127974987,0.9526417255401611,0.42765557765960693,0.33285951614379883,-0.5506075620651245,-0.6694586873054504,0.07510815560817719,-0.038032107055187225,-0.03092881664633751,-0.04241414740681648,0.1725407838821411,-0.5417670607566833,-0.5349268317222595,-0.5855259299278259,0.5592337250709534,0.4357283115386963,-0.47289806604385376,0.4332028329372406,-0.8731499910354614,0.6391263604164124,-0.5809072256088257,0.13061028718948364,0.1224871352314949,-0.35391929745674133,0.005123510956764221,-0.035462722182273865,-0.3733997642993927,-0.28362974524497986,-0.5538771152496338,0.3602936565876007,-0.6868255138397217,-0.03687463328242302,-0.02161470241844654,-0.01347095426172018,0.33665063977241516,0.17859768867492676,-0.11408817768096924,0.9829856157302856,0.2166203111410141,-0.8720398545265198,0.5416585206985474,0.4413844347000122,-0.45122820138931274,0.6702153086662292,-0.8764693140983582,-0.2828983664512634,-0.3100939989089966,-0.12255239486694336,-1.0492029190063477,-0.8187520503997803,0.24328432977199554,-0.6477587223052979,-0.5662667155265808,0.5299931168556213,-0.16486720740795135,-0.5515258312225342,-0.4993116557598114,0.20804063975811005,0.5959509611129761,-0.5303364992141724,0.33830690383911133,0.6449111104011536,0.15322712063789368,-0.5701629519462585,-0.8095422387123108,0.299686998128891,-0.15813173353672028,-0.42938998341560364,0.01225562859326601,0.2296690195798874,-0.003090759040787816,-0.4748457670211792,-0.6214565634727478,-0.34394094347953796,0.25212395191192627,0.6680505275726318,-0.4346116781234741,0.05700011923909187,-0.5419701337814331,-0.06856900453567505,0.22415021061897278,0.39412787556648254,0.15209266543388367,-0.12497655302286148,-0.14452865719795227,0.10466565191745758,-0.885491669178009,0.16965919733047485,0.3295234143733978,0.5647721886634827,0.6704097390174866,0.3424019515514374,-0.03930060938000679,-0.09012854844331741,-0.4867702126502991,-0.19723494350910187,-0.3999251127243042,-0.12402091920375824,-0.3148922622203827,-0.03522349148988724,0.08981114625930786,-0.5273032784461975,-0.2906345725059509,-0.008796274662017822,0.10828336328268051,-0.5253278017044067,0.32934826612472534,0.1370808184146881,0.40024134516716003,0.15117497742176056,-0.39427340030670166,0.28206363320350647,0.03590822592377663,-0.5984677076339722,-0.7090610861778259,-0.9651968479156494,0.2385367751121521,-0.6296990513801575,0.4865530729293823,-0.3372344374656677,-0.4074413478374481,0.40377700328826904,0.2570020258426666,0.4174588918685913,0.8144797086715698,0.36606156826019287,0.3249886631965637,-0.3144724667072296,-0.13040763139724731,0.11302396655082703,-0.5673134326934814,-0.302737295627594,0.07992523908615112,0.8787054419517517,1.172546148300171,0.4492942988872528,-0.030851297080516815,0.2505459785461426,0.41262075304985046,-0.49564653635025024,0.8719723224639893,0.07523376494646072,-1.1572521924972534,-0.01636483334004879,-0.26380544900894165,-1.4837547540664673,0.5048713088035583,-0.08823634684085846,0.07521479576826096,-0.49488142132759094,0.26249536871910095,-0.6110193729400635,-0.2207442820072174,-0.6484773755073547,1.0147236585617065,-0.44640663266181946,-0.5317413806915283,-0.14681464433670044,-1.1751823425292969,0.23739926517009735,0.7769442796707153,0.5977027416229248,-0.09468377381563187,-0.1947668194770813,0.8031347990036011,-0.27485743165016174,0.3829503059387207,0.008609862998127937,-0.12533974647521973,-0.14479875564575195,0.09938973188400269,0.32281163334846497,0.9557879567146301,0.44236403703689575,-0.3139778673648834,-0.6251403093338013,-0.9560933709144592,-0.026251723989844322,1.0045522451400757,-0.37324783205986023,-1.1330887079238892,-0.7285730242729187,-0.8578240871429443,0.283489465713501,0.3208872675895691,-0.19238921999931335,0.018476346507668495,-0.5433160066604614,0.7849560379981995,0.6621338725090027,-0.04260914772748947,0.5969443321228027,0.44642236828804016,-0.26311758160591125,-0.9876590371131897,0.3932715058326721,-0.15448811650276184,0.13365773856639862,-0.0799962505698204,0.7488629817962646,-0.6475675106048584,-0.009853999130427837,-0.7468257546424866,0.47061026096343994,-0.3518182933330536,-0.18345221877098083,-0.5140756368637085,0.1674567610025406,-0.9340670704841614,-0.025641120970249176,-0.34011444449424744,-0.8153799176216125,-0.26087984442710876,0.3495074212551117,-0.07597187161445618,0.6782748699188232,-0.12641578912734985,1.2685917615890503,-0.8028026819229126,0.5285968780517578,0.5295302271842957,0.3867567479610443,-0.1515539586544037,-1.0572096109390259,-0.49948495626449585,-0.39823028445243835,-0.8323652744293213,-0.9415347576141357,0.6449390053749084,-0.14691118896007538,0.04789162799715996,1.2827277183532715,-0.09551580995321274,0.603675901889801,0.09274474531412125,1.0837756395339966,0.4858129918575287,-0.9330762028694153,0.09257236123085022,-0.6846525073051453,0.6818339824676514,0.4644860029220581,0.8943250179290771,-0.5759118795394897,-0.05204038321971893,-1.039456844329834,-0.7968854308128357,0.25239646434783936,0.4111694395542145,0.0011898776283487678,0.04329173266887665,-0.7683977484703064,0.09674887359142303,0.5332443118095398,-0.8648918271064758,-0.4710420072078705,0.2660006582736969,0.22469790279865265,0.5526612401008606,-0.2161717712879181,-0.48416608572006226,-0.924457848072052,0.5668873190879822,0.4644615948200226,0.016160206869244576,-0.16353924572467804,-0.13962322473526,-0.3175646960735321,0.4352322518825531,0.6779831051826477,0.9168933033943176,-0.7922529578208923,0.5794135332107544,-0.05354280769824982,-0.3465318977832794,0.06871140003204346,-0.2459251582622528,-0.05720151960849762,0.32953858375549316,-0.44721513986587524,0.050602808594703674,0.8087331056594849,-0.5344159603118896,0.305500328540802,-0.18340158462524414,-0.19031253457069397,-0.309244304895401,-0.2884880304336548,0.11887530237436295,0.18470722436904907,0.199752539396286,-0.06084237992763519,0.24666717648506165,-0.26213422417640686,0.49224817752838135,0.48226016759872437,-0.5415734052658081,-0.3253564238548279,1.3615599870681763,0.5222530364990234,-0.32182902097702026,0.46122345328330994,0.24173259735107422,-0.0673547014594078,0.5831491351127625,1.2432188987731934,0.49218353629112244,-0.5042010545730591,0.7092238664627075,0.06750074774026871,-0.09383261948823929,-0.0081543093547225,0.44860950112342834,-0.1970268189907074,-0.28806084394454956,0.6269216537475586,-0.803895890712738,-0.22598743438720703,0.5601255893707275,-0.3778359591960907,0.2135166972875595,-0.7522717118263245,-0.779211163520813,0.1779584139585495,-0.11637934297323227,-0.5567536354064941,0.4780929386615753,0.07993963360786438,1.180921196937561,-1.0012739896774292,1.0854748487472534,1.2030161619186401,-0.39551323652267456,-0.3470480144023895,-0.5964025259017944,-0.003305548569187522,-0.5828757882118225,0.6706764698028564,-0.07850617915391922,0.16851960122585297,-0.20571738481521606,-0.268282413482666,-0.7996156215667725,0.33568376302719116,-0.12711429595947266,-0.25941455364227295,-0.015434486791491508,0.42356789112091064,-0.13292774558067322,0.0037969565019011497,-0.18581432104110718,0.9464324116706848,0.8409354090690613,0.4372020363807678,-0.6313837170600891,-0.055603086948394775,0.09673861414194107,0.3239489793777466,-0.06169762834906578,-0.7502389550209045,0.7076743245124817,-0.45781442523002625,-0.16617447137832642,0.38411039113998413,1.180161476135254,0.21009182929992676,0.11365732550621033,0.5472085475921631,1.1442530155181885,0.2281898409128189,0.2820669710636139,0.9721088409423828,0.5765435099601746,0.4725164771080017,0.8732017874717712,-0.15962526202201843,-0.06697147339582443,0.9765822291374207,-0.6608487963676453,0.43563368916511536,0.46180063486099243,0.11050009727478027,0.5212056636810303,0.6355578899383545,-0.280332088470459,0.11997316777706146,-0.800595760345459,-0.287690669298172,0.43648675084114075,0.026447953656315804,-0.4591667354106903,-0.9742065072059631,-0.11056825518608093,0.07913459837436676,0.3082919120788574,0.22297149896621704,0.4662155508995056,0.24451857805252075,-0.3344615399837494,0.6512241363525391,0.04811880365014076,-0.011844181455671787,-0.10874098539352417,-0.20612436532974243,-0.27597931027412415,0.6450008749961853,0.038915444165468216,-0.8701965808868408,0.19781824946403503,-0.5256267189979553,-0.1740768998861313,-0.16985800862312317,0.12679293751716614,-0.4636904299259186,-0.16456031799316406,-0.21601201593875885,0.27244970202445984,0.41580191254615784,0.47157996892929077,-1.0791044235229492,0.27602824568748474,-0.12321404367685318,-0.1431848406791687,-0.016102466732263565,-0.11164054274559021,0.3355039954185486,0.7526078820228577,0.3873237371444702,0.43889203667640686,0.020581483840942383,0.0665377601981163,0.7098839282989502,-1.2233948707580566,-0.8678389191627502,-0.30513134598731995,0.3215208649635315,-0.3935432434082031,-0.5412213206291199,1.115997314453125,0.9920573830604553,0.914484977722168,-0.9107837677001953,0.017293615266680717,-0.2077222615480423,0.2669888138771057,0.22706453502178192,0.649146318435669,-0.4583829343318939,-0.22682905197143555,0.2800329625606537,-1.0090821981430054,-0.362485408782959,0.4176114797592163,0.1970158964395523,-0.38053134083747864,0.5054555535316467,0.6325038075447083,-0.4901634752750397,0.21487581729888916,0.31514257192611694,0.20230068266391754,-0.10582146048545837,0.22879809141159058,0.8290401101112366,-0.5272077918052673,-0.1003471314907074,-0.4193391501903534,-0.3952881693840027,-0.5583227872848511,-0.6888096332550049,-0.0452975295484066,-0.13799642026424408,-0.62837815284729,-0.4729372262954712,-0.14849378168582916,1.0821017026901245,0.9769520163536072,-1.0336458683013916,-0.852587878704071,0.9743750691413879,0.370536208152771,-0.6756088137626648,-0.23825114965438843,-0.1673172116279602,-0.07628379762172699,-0.5976764559745789,0.7753019332885742,0.6446144580841064,0.5124966502189636,0.31413015723228455,-0.00003639691567514092,-0.8735217452049255,0.5028191208839417,0.49051231145858765,0.2277340292930603,-0.6177209615707397,-0.30641138553619385,-0.605127215385437,-0.2127356231212616,0.28962069749832153,0.7604162096977234,-0.3130319118499756,-0.11445695906877518,0.4159240424633026,0.6234878301620483,0.2780379056930542,0.5945948958396912,0.37354910373687744,-1.0610800981521606,0.521527111530304,0.31822124123573303,0.33180931210517883,-0.10160930454730988,-0.513020396232605,0.570996105670929,0.47622430324554443,-0.8863240480422974,-0.44037914276123047,-0.3269352912902832,-1.8785266876220703,-0.6457673907279968,0.8876060247421265,-0.08890876173973083,-1.0130339860916138,-0.2681725323200226,-0.025494800880551338,0.30071747303009033,-0.7092866897583008,0.8538867831230164,-0.08444361388683319,0.1759151965379715,-0.0645117536187172,-0.6093289852142334,0.3150272071361542,0.6975864768028259,-0.7012813687324524,-0.22271794080734253,0.649813711643219,0.5986615419387817,-0.08681211620569229,0.04726758971810341,-0.36053359508514404,0.36199748516082764,-0.09300746023654938,-0.1462542563676834,-0.13827596604824066,-0.6411302089691162,0.06707187741994858,0.31476008892059326,0.3629421889781952,-1.0855286121368408]\r\n```\r\n\r\nMy command is \r\n```\r\nneo4j-admin database import full --nodes=datasets/bulk/t/ff_sr_fndds_food_portions_header.csv,datasets/bulk/t/ff_sr_fndds_food_portions.csv --relationships=datasets/bulk/t/ff_sr_fndds_food_portions_relations_header.csv,datasets/bulk/t/ff_sr_fndds_food_portions_relations.csv\r\n```\r\n\r\nIt fails with the following error\r\n```\r\norg.neo4j.internal.batchimport.input.HeaderException: Unable to parse header, unknown property type &#39;LIST&lt;FLOAT&gt;&#39;\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories.parsePropertyType(DataFactories.java:483)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories$AbstractDefaultFileHeaderParser.propertyExtractor(DataFactories.java:280)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories$DefaultNodeFileHeaderParser.create(DataFactories.java:410)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories.parseHeaderEntries(DataFactories.java:196)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories$AbstractDefaultFileHeaderParser.create(DataFactories.java:221)\r\n\tat org.neo4j.internal.batchimport.input.csv.CsvInput.verifyHeaders(CsvInput.java:164)\r\n\tat org.neo4j.internal.batchimport.input.csv.CsvInput.&lt;init&gt;(CsvInput.java:145)\r\n\tat org.neo4j.internal.batchimport.input.csv.CsvInput.&lt;init&gt;(CsvInput.java:108)\r\n\tat org.neo4j.importer.CsvImporter.doImport(CsvImporter.java:175)\r\n\tat org.neo4j.importer.ImportCommand$Base.doExecute(ImportCommand.java:431)\r\n\tat org.neo4j.importer.ImportCommand$Full.execute(ImportCommand.java:590)\r\n\tat org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n\tat org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n\tat picocli.CommandLine.access$1500(CommandLine.java:148)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2170)\r\n\tat org.neo4j.cli.AdminTool.execute(AdminTool.java:94)\r\n\tat org.neo4j.cli.AdminTool.main(AdminTool.java:82)\r\nCaused by: java.lang.IllegalArgumentException: &#39;LIST&lt;FLOAT&gt;&#39;\r\n\tat org.neo4j.csv.reader.Extractors.valueOf(Extractors.java:199)\r\n\tat org.neo4j.internal.batchimport.input.csv.DataFactories.parsePropertyType(DataFactories.java:481)\r\n\t... 22 more\r\nroot@51d13ae3cbf2:/var/lib/neo4j/import# \r\n```\r\n\r\nI am using neo4j in my docker with following version\r\n```\r\nroot@51d13ae3cbf2:/var/lib/neo4j/import# neo4j version\r\nneo4j 5.13.0\r\n```\r\n\r\nIt seems admin command only understand simple types like `STRING`, `INT`, etc. so, how can I fix this issue? ",
      "link": "https://stackoverflow.com/questions/77525633/importing-vector-embedding-in-neo4j-via-neo4j-admin-import-is-failing-with-unkno",
      "title": "Importing Vector Embedding in Neo4J via neo4j-admin import is failing with unknown property type &#39;LIST&lt;FLOAT&gt;&#39;"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700598572,
          "post_id": 77524947,
          "comment_id": 136673875,
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re#comment136673875_77524947"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 6487302,
            "user_type": "registered",
            "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
            "display_name": "Daniel Kohli",
            "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
          },
          "reply_to_user": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700607252,
          "post_id": 77524947,
          "comment_id": 136675002,
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re#comment136675002_77524947"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700607397,
              "post_id": 77525820,
              "comment_id": 136675017,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136675017_77525820"
            },
            {
              "owner": {
                "reputation": 29966,
                "user_id": 92359,
                "user_type": "registered",
                "accept_rate": 94,
                "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
                "display_name": "InverseFalcon",
                "link": "https://stackoverflow.com/users/92359/inversefalcon"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700609249,
              "post_id": 77525820,
              "comment_id": 136675216,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136675216_77525820"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700616834,
              "post_id": 77525820,
              "comment_id": 136675856,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136675856_77525820"
            },
            {
              "owner": {
                "reputation": 29966,
                "user_id": 92359,
                "user_type": "registered",
                "accept_rate": 94,
                "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
                "display_name": "InverseFalcon",
                "link": "https://stackoverflow.com/users/92359/inversefalcon"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700707665,
              "post_id": 77525820,
              "comment_id": 136688539,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136688539_77525820"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700851705,
              "post_id": 77525820,
              "comment_id": 136707429,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#comment136707429_77525820"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "last_editor": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1700707628,
          "last_edit_date": 1700707628,
          "creation_date": 1700599333,
          "answer_id": 77525820,
          "question_id": 77524947,
          "share_link": "https://stackoverflow.com/a/77525820",
          "body_markdown": "You could try a query like this:\r\n\r\n```\r\nMATCH (n:Resource)\r\nWHERE EXISTS {\r\n    MATCH (n)-[*0..1]-&gt;(x)\r\n    WHERE (x:Resource OR x:Tag)\r\n    AND any(prop IN [&#39;name&#39;, &#39;description&#39;, &#39;legal_name&#39;, &#39;organization_type&#39;, &#39;tag&#39;] WHERE x[prop] CONTAINS &#39;school&#39;)\r\n}\r\n\r\nWITH n, [(n)-[]-&gt;(m) | m] as resources\r\nRETURN n, resources;\r\n```\r\n\r\nThis uses an EXISTS {} subquery to say that you&#39;re looking for a node (that could be the same node, or could be a connected node) that is a :Resource or :Tag node that has any of the given properties with the property value contains &#39;school&#39;.\r\n\r\nFor the resulting nodes that pass that filter, THEN you can match out to and collect the connected nodes (though in this case I&#39;m using a pattern comprehension to do so, which will be more efficient).\r\n\r\nEDIT: Fixed up the grouping of the AND and OR operators, that should ensure the any() list predicate must always be considered.",
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77525820#77525820",
          "title": "[Neo4j][Cypher Query] Filter On Node or Relationship Node Properties and Then Return All Nodes and Their Relationship Nodes"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 6487302,
                "user_type": "registered",
                "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
                "display_name": "Daniel Kohli",
                "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700851848,
              "post_id": 77539656,
              "comment_id": 136707444,
              "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77539656#comment136707444_77539656"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700774191,
          "creation_date": 1700774191,
          "answer_id": 77539656,
          "question_id": 77524947,
          "share_link": "https://stackoverflow.com/a/77539656",
          "body_markdown": "The `Tags` look a lot like labels. Their one property, `tag`,  could just as easily be the label identifier. With the tags as labels, the predicates can be simplified like so:\r\n```sql\r\nWITH [&#39;name&#39;, &#39;description&#39;, &#39;legal&#39;, &#39;organization_type&#39;] AS props\r\nMATCH (n:Resource)--&gt;(m) \r\nWHERE n:School OR any(prop IN props WHERE m[prop] CONTAINS &#39;school&#39;)\r\nRETURN n, collect(m);\r\n```",
          "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re/77539656#77539656",
          "title": "[Neo4j][Cypher Query] Filter On Node or Relationship Node Properties and Then Return All Nodes and Their Relationship Nodes"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 6487302,
        "user_type": "registered",
        "profile_image": "https://graph.facebook.com/10110994760169374/picture?type=large",
        "display_name": "Daniel Kohli",
        "link": "https://stackoverflow.com/users/6487302/daniel-kohli"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 58,
      "favorite_count": 0,
      "down_vote_count": 1,
      "up_vote_count": 1,
      "accepted_answer_id": 77525820,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1701669286,
      "creation_date": 1700589233,
      "last_edit_date": 1701669286,
      "question_id": 77524947,
      "share_link": "https://stackoverflow.com/q/77524947",
      "body_markdown": "I&#39;ve got a Neo4j DB that contains `Resource` nodes with several relationship nodes including `Tag`, `Address`, `PhoneNumber`, etc.\r\n\r\nThe schema for `Resource` is as follows:\r\n```\r\nResource: {\r\n  name: str,\r\n  description: str,\r\n  legal_name: str,\r\n  organization_type: str,\r\n}\r\n```\r\n\r\nThe schema for `Tag` is as follows:\r\n```\r\nTag: {\r\n  tag: str,\r\n}\r\n```\r\n\r\nI&#39;m building a query that returns all `Resource` nodes along with their relationship nodes where the `Resource` node has a property that contains a specific string AND/OR related `Tag` node(s) has(ve) a property that contains the same string.\r\n\r\nExample cases to return:\r\n1. A `Resource` node DOES have one or more property that contains the string &quot;school&quot; but all related `Tag` nodes DO NOT have a `tag` property containing the string &quot;school&quot;: the `Resource` node is returned along with all of its relationship nodes\r\n2. A `Resource` node DOES NOT have any properties that contain the string &quot;school&quot; but has at least one related `Tag` node that DOES have a `tag` property containing the string &quot;school&quot;: the `Resource` node is returned along with all of its relationship nodes\r\n3. A `Resource` node DOES have one or more property that contains the string &quot;school&quot; and has at least one related `Tag` node that DOES have a `tag` property containing the string &quot;school&quot;: the `Resource` node is returned along with all of its relationship nodes\r\n\r\n  I&#39;m currently using the below query and it works for the most part; however, for case 2 above no other relationship nodes of the originating `Resource` node are returned in the result set.  Ideally, we would ALWAYS get all relationship nodes of the `Resource` node matching the above criteria.  Any help would be greatly appreciated!\r\n\r\n```\r\nMATCH (n:Resource)-[]-&gt;(m) \r\nWHERE n.name CONTAINS &#39;school&#39;\r\n    OR n.description CONTAINS &#39;school&#39;\r\n    OR n.legal_name CONTAINS &#39;school&#39;\r\n    OR n.organization_type CONTAINS &#39;school&#39;\r\n    OR m.tag CONTAINS &#39;school&#39;\r\nRETURN n, collect(m);\r\n```",
      "link": "https://stackoverflow.com/questions/77524947/neo4jcypher-query-filter-on-node-or-relationship-node-properties-and-then-re",
      "title": "[Neo4j][Cypher Query] Filter On Node or Relationship Node Properties and Then Return All Nodes and Their Relationship Nodes"
    },
    {
      "tags": ["neo4j", "cypher", "database-connection"],
      "owner": {
        "reputation": 143,
        "user_id": 4824040,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c91f9a7a8e72ade4d59448bf62f41b08?s=256&d=identicon&r=PG",
        "display_name": "Pantheos Max",
        "link": "https://stackoverflow.com/users/4824040/pantheos-max"
      },
      "last_editor": {
        "reputation": 605,
        "user_id": 13899010,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/2Iwbk.jpg?s=256&g=1",
        "display_name": "Chinez",
        "link": "https://stackoverflow.com/users/13899010/chinez"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 23,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1700990811,
      "creation_date": 1700584010,
      "last_edit_date": 1700990811,
      "question_id": 77524421,
      "share_link": "https://stackoverflow.com/q/77524421",
      "body_markdown": "I downloaded the neo4j OVA from bitnami and spun it up on my VSphere Server. The installed version of Neo4j on this prepackaged VM is 5.13 Community Edition.\r\n\r\nIt has a static IP address (192.168.1.6)\r\n\r\nI am able to connect via SSH, I can ping it, and everything&#39;s fine here\r\n\r\nThe neo4j.conf was altered like this:\r\n\r\n    server.default_listen_adress = 0.0.0.0\r\n    server.default_advertised_adress = 192.168.1.6\r\n    server.bolt.enabled=true\r\n    server.bolt.list_adress=:7687\r\n    server.bolt.advertised_adress=:7687\r\n    server.http.enabled=true\r\n    server.http.listen_adress=:7474\r\n    server.http.advertised_adressadress=:7474\r\n    \r\nThe `sudo neo4j-admin server validate-config` does not show any errors\r\n\r\nI am able to connect to the graph from within the server VM using `cyper-shell -a localhost -u neo4j -p myPassword`, so I know the user credentials work.\r\n\r\nThe `ss -tulpn` shows\r\n|netid|state|Local Address:Port|Peer Address:Port|\r\n|:----|:----|:-----------------|:----------------|\r\n|tcp|LISTEN|*:7687|* : *|\r\n|tcp|LISTEN|*:7474|* : *|\r\n\r\n\r\nBut whatever I try to use to connect this server as a remote connection within the Neo4j Desktop Client, I can&#39;t get a connection. Every possible combination of port, and protocol (neo4j, bolt, neo4j+s, etc.) just yields &quot;Unable to establish remote connection: ServiceUnavailable&quot;.\r\n\r\nWhat am I doing wrong? Is it just not possible to connect to a community edition using the Desktop app?",
      "link": "https://stackoverflow.com/questions/77524421/unable-to-connect-to-neo4j-vm-on-the-network-via-neo4jdesktop",
      "title": "Unable to connect to neo4j VM on the network via Neo4jDesktop"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700568875,
          "post_id": 77522450,
          "comment_id": 136668341,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136668341_77522450"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 22845737,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
            "display_name": "Somnath Deb",
            "link": "https://stackoverflow.com/users/22845737/somnath-deb"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700569371,
          "post_id": 77522450,
          "comment_id": 136668426,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136668426_77522450"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 22845737,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
            "display_name": "Somnath Deb",
            "link": "https://stackoverflow.com/users/22845737/somnath-deb"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700569412,
          "post_id": 77522450,
          "comment_id": 136668432,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136668432_77522450"
        },
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700577938,
          "post_id": 77522450,
          "comment_id": 136670159,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136670159_77522450"
        },
        {
          "owner": {
            "reputation": 11,
            "user_id": 22845737,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
            "display_name": "Somnath Deb",
            "link": "https://stackoverflow.com/users/22845737/somnath-deb"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700580946,
          "post_id": 77522450,
          "comment_id": 136670739,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136670739_77522450"
        },
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1700588772,
          "post_id": 77522450,
          "comment_id": 136672265,
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement#comment136672265_77522450"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1701792720,
          "creation_date": 1701792720,
          "answer_id": 77607672,
          "question_id": 77522450,
          "share_link": "https://stackoverflow.com/a/77607672",
          "body_markdown": "One thing I see is that you have a long pattern, and within that pattern you have a condition that uses a property of a node in that pattern.\r\n\r\nThat is, you match on t1 and require `{movOre: t1.nutel}`, and the same thing again when you use a REBIX relationship property to filter on `t2: Tel`\r\n\r\nThis means every t1 has to be found, and every value of `t1.nuTel` used in the pattern. If you have 1000 Tel nodes, you have 1000 nuTel properties. Basically, the possibilities for nuTel and movBene are exploding.\r\n\r\nYou might refactor to split this into multiple MATCH statements:\r\n\r\n```\r\nMATCH (t1:Tel {TB:true})\r\nWITH distinct t1.nuTel as t1nuTel\r\nMATCH (t1:Tel {TB:true, nulTel:t1nuTel})&lt;-[:TelBIZ]-(:ACC {TB:true})-[or:REBIZ {movOre: t1nuTel}]-&gt;(:ACC {TB:true})-&gt;(t2:Tel {TB:true, nuTel: or.movBene})\r\nWHERE t1.nuTel &lt;&gt; t2.nuTel\r\nRETURN t1, t2, count(or) as Ope, sum(or.imp) as Total, 10^3 as Precision, max(or.Txt) as mRB\r\n```\r\n\r\nThat may not be the best solution for your graph, and there&#39;s still the issue with `or.movBene` being used as a filter when it&#39;s part of a pattern, but hopefully I&#39;ve communicated the idea and you can refine from there.\r\n\r\nAlso, indexes on nuTel, movBene, and TB will be incredibly faster, if you don&#39;t haver them already.",
          "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement/77607672#77607672",
          "title": "Optimization of a MATCH statement"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22845737,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
        "display_name": "Somnath Deb",
        "link": "https://stackoverflow.com/users/22845737/somnath-deb"
      },
      "last_editor": {
        "reputation": 69957,
        "user_id": 272109,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=256&d=identicon&r=PG",
        "display_name": "David Makogon",
        "link": "https://stackoverflow.com/users/272109/david-makogon"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 58,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1702006948,
      "creation_date": 1700566122,
      "last_edit_date": 1702006948,
      "question_id": 77522450,
      "share_link": "https://stackoverflow.com/q/77522450",
      "body_markdown": "```\r\nMATCH (t1:Tel {TB:true})&lt;-[:TelBIZ]-\r\n  (:ACC {TB:true})-[or:REBIZ {movOre:t1.nuTel}]-&gt;\r\n  (:ACC {TB:true})-[:TelBIZ]-&gt;(t2:Tel {TB:true,nuTel:or.movBene}) \r\nWHERE t1.nuTel&lt;&gt;t2.nuTel\r\nRETURN t1, t2, COUNT(or) AS Ope, SUM(or.imp) AS Total, \r\n  10^3 as Precision, max(or.Txt) AS mRB\r\n```\r\n\r\nI am trying to get this query to return few values, but I find the query is not optimised and returns a lot of data. Please suggest me how I can optimize it. I am using Neo4j v3.5.",
      "link": "https://stackoverflow.com/questions/77522450/optimization-of-a-match-statement",
      "title": "Optimization of a MATCH statement"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700348035,
              "post_id": 77508731,
              "comment_id": 136644096,
              "link": "https://stackoverflow.com/questions/77508656/practical-way-of-doing-equality-against-multiple-possible-values-in-cypher/77508731#comment136644096_77508731"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1700341881,
          "creation_date": 1700341881,
          "answer_id": 77508731,
          "question_id": 77508656,
          "share_link": "https://stackoverflow.com/a/77508731",
          "body_markdown": "You&#39;re looking for the `ANY` predicate\r\n\r\n```\r\nMATCH p =(mFirst:MoveNode)-[:NEXT_MOVE*${patternLength - 1}]-&gt;(:MoveNode)\r\nWHERE ANY(\r\n  x IN $patterns \r\n  WHERE ( mFirst.move = head(x) AND [m IN nodes(p) | m.move] = x )\r\n)\r\n```",
          "link": "https://stackoverflow.com/questions/77508656/practical-way-of-doing-equality-against-multiple-possible-values-in-cypher/77508731#77508731",
          "title": "Practical Way of Doing Equality Against Multiple Possible Values in Cypher"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 29,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77508731,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1700341881,
      "creation_date": 1700340432,
      "question_id": 77508656,
      "share_link": "https://stackoverflow.com/q/77508656",
      "body_markdown": "&gt; This question follows up on [@cybersam&#39;s answer to one of my previous questions](https://stackoverflow.com/a/77499034/4756173), however no previous knowledge about this problem is necessary.\r\n\r\nIn a pattern-search query, a simplified version of [@cybersam&#39;s query here](https://stackoverflow.com/a/77499034/4756173), I would like to, ideally, match paths not only to an input pattern but to all of its isomorphisms (board rotations and reflections) and permutations.\r\n\r\n&gt; A pattern in this case is a list of strings (A-Z) of length 2, e.g. `[&#39;pq&#39;, &#39;dd&#39;, &#39;pp&#39;]`.\r\n\r\nSo, in that query, I would have to create an `OR` statement for each pattern in a pattern list:\r\n\r\n```cypher\r\nMATCH p =   (mFirst:MoveNode)\r\n           -[:NEXT_MOVE*${patternLength - 1}]\r\n          -&gt;(:MoveNode)\r\n\r\nWHERE (\r\n            mFirst.move = HEAD($patterns[0]) \r\n        AND [m IN NODES(p) | m.move] = $patterns[0]\r\n      )\r\n   OR (\r\n            mFirst.move = HEAD($patterns[1]) \r\n        AND [m IN NODES(p) | m.move] = $patterns[1]\r\n      )\r\n   OR (...)\r\n   .\r\n   .\r\n   .\r\n```\r\n\r\nIs there a way of making this programmatic? Cause, this isn&#39;t scalable, since I don&#39;t know how many permutations I&#39;m gonna end up having. ",
      "link": "https://stackoverflow.com/questions/77508656/practical-way-of-doing-equality-against-multiple-possible-values-in-cypher",
      "title": "Practical Way of Doing Equality Against Multiple Possible Values in Cypher"
    },
    {
      "tags": ["recursion", "graph", "neo4j", "tree", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700169200,
              "post_id": 77497956,
              "comment_id": 136624970,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136624970_77497956"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700169251,
              "post_id": 77497956,
              "comment_id": 136624978,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136624978_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700169516,
              "post_id": 77497956,
              "comment_id": 136625010,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625010_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700169649,
              "post_id": 77497956,
              "comment_id": 136625025,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625025_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700169843,
              "post_id": 77497956,
              "comment_id": 136625047,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625047_77497956"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700174928,
              "post_id": 77497956,
              "comment_id": 136625629,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625629_77497956"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700176465,
              "post_id": 77497956,
              "comment_id": 136625789,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136625789_77497956"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700180944,
              "post_id": 77497956,
              "comment_id": 136626219,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#comment136626219_77497956"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 8,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1700169471,
          "last_edit_date": 1700169471,
          "creation_date": 1700167612,
          "answer_id": 77497956,
          "question_id": 77497411,
          "share_link": "https://stackoverflow.com/a/77497956",
          "body_markdown": "To get the path `p` from the root `GameNode` up to and including the sequence of moves `[&#39;rm&#39;,&#39;ro&#39;]`, you can write the following in Neo4j 5.9+:\r\n```sql\r\nMATCH p = (g:GameNode)-[:NEXT_MOVE]-&gt;+(m1:MoveNode)-[:NEXT_MOVE]-&gt;(m2:MoveNode)\r\nWHERE m1.move = &#39;rm&#39; AND m2.move = &#39;ro&#39;\r\nRETURN p\r\n```\r\nTo get the whole path, up to the last move in the sequence, you need to add a check that there are no further moves:\r\n```sql\r\nMATCH p = (g:GameNode)-[:NEXT_MOVE]-&gt;+(m1:MoveNode)-[:NEXT_MOVE]-&gt;\r\n  (m2:MoveNode)-[:NEXT_MOVE]-&gt;*(lastMove:MoveNode)\r\nWHERE m1.move = &#39;rm&#39; AND m2.move = &#39;ro&#39;\r\n  AND NOT EXISTS { (lastMove)-[:NEXT_MOVE]-&gt;(:MoveNode) }\r\nRETURN p\r\n```\r\nIt would be surprising if there were performance issues: specific enough patterns over small graphs representing each game should not be slow. ",
          "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77497956#77497956",
          "title": "How to (Efficiently) Find Subpaths in Recursive Trees through Cypher (Graph vs Regex)"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700220653,
              "post_id": 77499034,
              "comment_id": 136630484,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630484_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700220772,
              "post_id": 77499034,
              "comment_id": 136630510,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630510_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700221314,
              "post_id": 77499034,
              "comment_id": 136630597,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630597_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700221583,
              "post_id": 77499034,
              "comment_id": 136630658,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136630658_77499034"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700236286,
              "post_id": 77499034,
              "comment_id": 136633299,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136633299_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700237488,
              "post_id": 77499034,
              "comment_id": 136633545,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136633545_77499034"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1700242364,
              "post_id": 77499034,
              "comment_id": 136634499,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136634499_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700252942,
              "post_id": 77499034,
              "comment_id": 136636097,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136636097_77499034"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700340476,
              "post_id": 77499034,
              "comment_id": 136643448,
              "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#comment136643448_77499034"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 9,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1700253284,
          "last_edit_date": 1700253284,
          "creation_date": 1700187843,
          "answer_id": 77499034,
          "question_id": 77497411,
          "share_link": "https://stackoverflow.com/a/77499034",
          "body_markdown": "The query below should be fairly performant in returning the moves in every game that contains the desired sequence of moves. It assumes you:\r\n- Have an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) on `MoveNode.move`,\r\n- Pass the list of desired moves in the `$moves` [parameter](),\r\n- Adjust the length of the variable-length relationship in the first `MATCH` to be 1 less than the length of `$moves`. For example, if `$moves` has 2 items, use `*1` instead of `*2`. *This is admittedly ugly, but Cypher does not support dynamic bounds.*\r\n\r\n#### Query\r\n\r\n    MATCH p1=(m1:MoveNode)-[:NEXT_MOVE*2]-&gt;(m2)\r\n    WHERE m1.move = HEAD($moves) AND [m IN TAIL(NODES(p1)) | m.move] = TAIL($moves)\r\n    MATCH p2 = (m2)-[:NEXT_MOVE*0..]-&gt;(end) WHERE NOT (end)-[:NEXT_MOVE]-&gt;()\r\n    MATCH p3 = (g:GameNode)-[:NEXT_MOVE*]-&gt;(m1)\r\n    RETURN [a IN NODES(p3)[1..-1] | a.move] + $moves + [b IN NODES(p2)[1..] | b.move]\r\n\r\nThe index is used to limit and anchor the search by quickly finding the `m1` nodes (the `MoveNode`s matching the first item in `$moves`), instead of wading through all paths from every `GameNode`. Then the query:\r\n- Filters `m1` by requiring that it is followed by a subpath satisfying the rest of the `$moves` list,\r\n- Finds the sequence of moves that follow each subpath,\r\n- Works backwards from the surviving `m1` nodes to find the corresponding `GameNode`s.\r\n- Constructs and returns the sequence of moves for each matching game.\r\n\r\nSo, this query starts off by using the index to find the first set of relevant nodes, and keeps adding relationships (and end nodes) to what was already found until it finally has the desired results. There is never a need to scan through irrelevant data.",
          "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r/77499034#77499034",
          "title": "How to (Efficiently) Find Subpaths in Recursive Trees through Cypher (Graph vs Regex)"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 79,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77499034,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1700253284,
      "creation_date": 1700161233,
      "last_edit_date": 1700221543,
      "question_id": 77497411,
      "share_link": "https://stackoverflow.com/q/77497411",
      "body_markdown": "I&#39;m trying to reproduce a Go SGF game tree in Neo4j through Cypher so I can pattern-search through, as a graph. This is the shape of a Go game tree &amp;mdash; based on [Sabaki&#39;s SGF Parser](https://github.com/SabakiHQ/sgf) &amp;mdash;:\r\n\r\n```typescript\r\ntype GameTree = {\r\n  id: number;\r\n  data: { [key: string]: string[] };\r\n  parentId: number | null;\r\n  children: GameTree[];\r\n};\r\n```\r\n\r\n&gt; You can find a reproducible sample of the problem [in this commit](https://github.com/psygo/go_pattern_search/tree/01a11ff85b85e226b2f222aa4743e87842649651).\r\n\r\nSo far, I&#39;ve successfully managed to model it just like it appears in a Go editor&#39;s game tree:\r\n\r\n[![Game Tree on Neo4j Desktop][1]][1]\r\n\r\n&gt; `B` and `W` mean Black and White moves. `AB` and `AW` are &quot;added black or white stones&quot;, for when editing the board position. For this question&#39;s purposes, only `move` matters actually, which has the same value as either `B` or `W`. Board coordinates are given in 2 letters, e.g. column `m` and row `r` gives out the string `&#39;rm&#39;`.\r\n\r\nNow, what I would like to do is return the full path (probably the root node would suffice actually) from the root if a specified subpath (no skipping) is found. So far, I have this, which does work:\r\n\r\n```cypher\r\nMATCH p=(g:GameNode)-[:NEXT_MOVE*]-&gt;()\r\n\r\nWITH g, p,\r\n     [m in TAIL(NODES(p)) | m.move] AS moves\r\n\r\nWITH g, p,\r\n     REDUCE(path = &#39;&#39;, move in moves | path + move) AS joined_moves\r\n\r\nWHERE joined_moves CONTAINS &quot;rmro&quot;\r\n\r\nRETURN g, p, joined_moves\r\n```\r\n\r\nFollowing @cybersam&#39;s answer, I think this could make it more explicit to Neo4j so it uses an index on `m.move` &amp;mdash; e.g. `CREATE INDEX move_node_move_idx FOR (m:MoveNode) ON (m.move)` &amp;mdash;:\r\n\r\n```cypher\r\nMATCH p=(g:GameNode)-[:NEXT_MOVE*]-&gt;(m1:MoveNode)-[:NEXT_MOVE*]-&gt;()\r\n\r\nWHERE m1.move = HEAD([&#39;rm&#39;, &#39;ro&#39;])\r\n\r\nWITH g, p,\r\n     [m in TAIL(NODES(p)) | m.move] AS moves\r\n\r\nWITH g, p,\r\n     REDUCE(path = &#39;&#39;, move in moves | path + move) AS joined_moves\r\n\r\nWHERE joined_moves CONTAINS &quot;rmro&quot;\r\n\r\nRETURN g, p, joined_moves\r\n```\r\n\r\nBut I really don&#39;t know if this type of pattern-search would be efficient enough through Neo4j or other graph databases. I think it could be since, even though most games have 200+ move branches, there aren&#39;t that many of them usually. And the analysis would be on unidirectional branches where order matters (no skipping), so it should probably limit the search space even more.\r\n\r\nAlternatively, I&#39;m considering placing a string with the full path to it in each move node. This way I could use Regexes (I know Regexes can also be modeled as graphs) instead of path searches. That said, if it works, then I think using a SQL database would be probably enough. However, I would probably stick to Neo4j still, cause modeling this as a graph could provide more useful features in the future.\r\n\r\n---\r\n\r\n## References\r\n\r\n- [Stack Overflow - *Neo4j how to match subpath*](https://stackoverflow.com/a/51872011/4756173)\r\n- [Stack Overlflow - *Efficient way of matching a subtree, using cypher in Neo4J?*](https://stackoverflow.com/a/31587455/4756173)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XMF1g.png",
      "link": "https://stackoverflow.com/questions/77497411/how-to-efficiently-find-subpaths-in-recursive-trees-through-cypher-graph-vs-r",
      "title": "How to (Efficiently) Find Subpaths in Recursive Trees through Cypher (Graph vs Regex)"
    },
    {
      "tags": ["recursion", "graph", "neo4j", "tree", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1700167898,
          "last_edit_date": 1700167898,
          "creation_date": 1700145204,
          "answer_id": 77495682,
          "question_id": 77495108,
          "share_link": "https://stackoverflow.com/a/77495682",
          "body_markdown": "If each query execution is for a single chain of moves that are in order of play, and the parent `GameNode` already exists, then you can use the following:\r\n```sql\r\nUNWIND $moveNodes AS move\r\nCALL {\r\n    WITH move\r\n    MATCH (parent:GameNode|MoveNode {game_id: $gameId, id: move.parentId})\r\n    CREATE (parent)-[:NEXT_MOVE]-&gt;(m:MoveNode {game_id: $gameId, id: move.id})\r\n}\r\n```",
          "link": "https://stackoverflow.com/questions/77495108/how-to-recursively-create-a-tree-with-cypher-neo4j/77495682#77495682",
          "title": "How to Recursively Create a Tree with Cypher (Neo4j)"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 56,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77495682,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1700167898,
      "creation_date": 1700140416,
      "last_edit_date": 1700159203,
      "question_id": 77495108,
      "share_link": "https://stackoverflow.com/q/77495108",
      "body_markdown": "I&#39;m trying to replicate an SGF game tree on Neo4j with Cypher. The tree is of this shape:\r\n\r\n```typescript\r\ntype GameTree = {\r\n  id: number;\r\n  data: { [key: string]: string[] };\r\n  parentId: number | null;\r\n  children: GameTree[];\r\n};\r\n```\r\n\r\nThis is the creation query I&#39;m trying to work out:\r\n\r\n```cypher\r\nUNWIND $moves AS move\r\n\r\nMATCH (parent)\r\n\r\nWHERE ((parent:GameNode) OR (parent:MoveNode))\r\n  AND parent.game_id = $gameId\r\n  AND parent.id = move.parentId\r\n\r\nCREATE   (parent)\r\n        -[:NEXT_MOVE]\r\n       -&gt;(:MoveNode{\r\n           game_id: $gameId,\r\n           id:      move.id\r\n         })\r\n```\r\n\r\nInitially, the root of the tree is a `GameNode`, which I create separately, because it holds interesting metadata. Anyways, this won&#39;t work like this because, at the time of the `UNWIND` and `MATCH` clauses, there exists only one parent, the rest of them will/should be created recursively.\r\n\r\nIs there a way of doing this recursive creation in Cypher? Maybe there&#39;s some recursive keyword I can&#39;t seem to find (this seems like such a common kind of problem...)? Maybe there&#39;s a useful APOC procedure somewhere?\r\n\r\nAs a workaround, I&#39;m thinking about creating all the `MoveNode`s first, and then using the query above to string them back together. It would look like this:\r\n\r\n```cypher\r\n// 1. Create All The Move Nodes\r\n\r\nUNWIND $moveNodes AS move\r\n\r\nCREATE (:MoveNode{\r\n         game_id: move.game_id,\r\n         id:      move.id\r\n       })\r\n\r\n// 2. Tie them to their Parents\r\n\r\nWITH move\r\n\r\nMATCH (parent{\r\n        game_id: move.game_id,\r\n        id:      move.parentId\r\n      }),\r\n      (m:MoveNode{\r\n        game_id: move.game_id,\r\n        id:      move.id\r\n      })\r\n\r\nWHERE parent:GameNode\r\n   OR parent:MoveNode\r\n  \r\nCREATE (parent)-[:NEXT_MOVE]-&gt;(m)\r\n```",
      "link": "https://stackoverflow.com/questions/77495108/how-to-recursively-create-a-tree-with-cypher-neo4j",
      "title": "How to Recursively Create a Tree with Cypher (Neo4j)"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1955,
                "user_id": 554481,
                "user_type": "registered",
                "accept_rate": 43,
                "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
                "display_name": "user554481",
                "link": "https://stackoverflow.com/users/554481/user554481"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700093770,
              "post_id": 77490681,
              "comment_id": 136613838,
              "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77490681#comment136613838_77490681"
            },
            {
              "owner": {
                "reputation": 19639,
                "user_id": 2662355,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
                "display_name": "Christophe Willemsen",
                "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
              },
              "reply_to_user": {
                "reputation": 1955,
                "user_id": 554481,
                "user_type": "registered",
                "accept_rate": 43,
                "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
                "display_name": "user554481",
                "link": "https://stackoverflow.com/users/554481/user554481"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700127839,
              "post_id": 77490681,
              "comment_id": 136617398,
              "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77490681#comment136617398_77490681"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1700079732,
          "creation_date": 1700079732,
          "answer_id": 77490681,
          "question_id": 77484411,
          "share_link": "https://stackoverflow.com/a/77490681",
          "body_markdown": "It is achievable with the following query ( added comments )\r\n\r\n```cypher\r\n// simulate your input\r\nWITH &quot;a.b.c.d&quot; AS pkg \r\n// split on the dot, producing an array \r\nWITH split(pkg, &quot;.&quot;) AS parts [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;]\r\n// iterating of the array\r\nUNWIND parts AS part \r\n// MERGE (match or create) the module with the name as id ( up to you which property to use )\r\nMERGE (m:Module {id: part}) \r\n// break and introduce a variable being an array of the nodes created or matched\r\nWITH collect(m) AS modules \r\n// use APOC to link those nodes together with the NEXT relationship\r\nCALL apoc.nodes.link(modules,&#39;NEXT&#39;) \r\n```\r\n\r\nIt produces such graph\r\n\r\n[![enter image description here][1]][1]\r\n\r\nLater on, if you try to do the same with module paths that do already exist, it will do nothing, for eg after the above, the following query will not create anything\r\n\r\n```\r\nWITH &quot;a.b.c&quot; AS pkg\r\nWITH split(pkg, &quot;.&quot;) AS parts\r\nUNWIND parts AS part\r\nMERGE (m:Module {id: part})\r\nWITH collect(m) AS modules\r\nCALL apoc.nodes.link(modules,&#39;NEXT&#39;)\r\n```\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gVSf0.png\r\n  [2]: https://i.stack.imgur.com/G7VIG.png",
          "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77490681#77490681",
          "title": "Create all nonexistent nodes and edges if path doesn&#39;t exist"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1700092735,
          "creation_date": 1700092735,
          "answer_id": 77491575,
          "question_id": 77484411,
          "share_link": "https://stackoverflow.com/a/77491575",
          "body_markdown": "You can use a pure Cypher approach with the following:\r\n```\r\nFOREACH (i IN range(0, size($module_path) - 2) | \r\n           MERGE (l:Module {name: $module_path[i]})\r\n           MERGE (r:Module {name: $module_path[i+1]})          \r\n           MERGE (l)-[:contains]-&gt;(r) );\r\n```\r\nYou can test how this works with the data in your question:\r\n```\r\nUNWIND [[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;],[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;e&#39;],[&#39;a&#39;],[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;],\r\n        [&#39;a&#39;,&#39;b&#39;]] AS modules\r\nFOREACH (i IN range(0, size(modules) - 2) | \r\n            MERGE (l:Module {name: modules[i]})\r\n            MERGE (r:Module {name: modules[i+1]})          \r\n            MERGE (l)-[:contains]-&gt;(r) )\r\n```\r\nHere is the result:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T7cEA.png",
          "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist/77491575#77491575",
          "title": "Create all nonexistent nodes and edges if path doesn&#39;t exist"
        }
      ],
      "owner": {
        "reputation": 1955,
        "user_id": 554481,
        "user_type": "registered",
        "accept_rate": 43,
        "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
        "display_name": "user554481",
        "link": "https://stackoverflow.com/users/554481/user554481"
      },
      "last_editor": {
        "reputation": 1955,
        "user_id": 554481,
        "user_type": "registered",
        "accept_rate": 43,
        "profile_image": "https://i.stack.imgur.com/G0s1w.jpg?s=256&g=1",
        "display_name": "user554481",
        "link": "https://stackoverflow.com/users/554481/user554481"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1700094045,
      "creation_date": 1700004397,
      "last_edit_date": 1700094045,
      "question_id": 77484411,
      "share_link": "https://stackoverflow.com/q/77484411",
      "body_markdown": "I want to represent the modules of a Python package as nodes in a neo4j graph. I get inputs like the following and have to update the graph if the module hasn&#39;t already been included. Let&#39;s say my inputs look like this:\r\n\r\n```\r\na.b.c.d\r\na.b.c.e\r\na\r\na.b.c\r\na.b\r\n```\r\n\r\nIf `a.b.c` already exists, I don&#39;t want to recreate those nodes when I encounter `a.b.c.d`. I would only want to make a new node called `d` and connect it to `c`. Likewise if I get `a.b.c` and none of those nodes exist yet, then I want to create all of the nodes and connect them accordingly. My real inputs can have an arbitrary number of nodes per path, so I&#39;d like a Cypher query that can handle arbitrary path lengths.\r\n\r\nI&#39;m new to Cypher. Here was my first attempt.\r\n\r\n```cypher\r\nMERGE p=(module:Module {name: $module_name})\r\nWITH p, module\r\nMATCH (package:Module)-[:contains*]-&gt;(module)\r\nWHERE [x in nodes(p) | x.name] = $module_path\r\n```\r\n\r\nHowever, Cypher gives me the following error:\r\n\r\n&gt; Query cannot conclude with MATCH\r\n\r\nI also tried this:\r\n```\r\nMERGE p=(:Module)-[:contains*]-&gt;(:Module)\r\nWHERE [x in nodes(p) | x.name] = $module_path\r\n```\r\n\r\nBut then Cypher complains about the presence of `WHERE`.\r\n\r\nNote that I&#39;m using the neo4j Python library to run this query, and I pass in parameters like this: `{&quot;module_path&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;module_name&quot;:&quot;c&quot;}`. I&#39;m happy to parameterize my query differently if there is a better way, but I don&#39;t think that is the source of my errors.\r\n\r\nI&#39;m using neo4j `5.12`, community edition.",
      "link": "https://stackoverflow.com/questions/77484411/create-all-nonexistent-nodes-and-edges-if-path-doesnt-exist",
      "title": "Create all nonexistent nodes and edges if path doesn&#39;t exist"
    },
    {
      "tags": ["if-statement", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699978993,
          "post_id": 77482002,
          "comment_id": 136597240,
          "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j#comment136597240_77482002"
        },
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699979207,
          "post_id": 77482002,
          "comment_id": 136597284,
          "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j#comment136597284_77482002"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1699979124,
          "creation_date": 1699979124,
          "answer_id": 77482258,
          "question_id": 77482002,
          "share_link": "https://stackoverflow.com/a/77482258",
          "body_markdown": "It looks like you are looking for `WHERE`:\r\n```\r\nMATCH (n:person)&lt;-[r:aetei]-(m:person)\r\nWHERE m.ai &gt;= 2 \r\nRETURN n, m, r\r\n```",
          "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j/77482258#77482258",
          "title": "testing value in NEO4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 6380243,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a87ef44332d0aafe624182b1861794ea?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Olivier Caignart",
        "link": "https://stackoverflow.com/users/6380243/olivier-caignart"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 37,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77482258,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699994855,
      "creation_date": 1699976941,
      "last_edit_date": 1699994855,
      "question_id": 77482002,
      "share_link": "https://stackoverflow.com/q/77482002",
      "body_markdown": "I&#39;m trying to get around IF queries in NEO4J.\r\n\r\nSomething like (if I could use  IF):\r\n\r\n    MATCH (n:person)&lt;-[r:aetei]-(m:person)    \r\n    IF m.ai &gt;= 2\r\n    RETURN n, m, r\r\n\r\nwith `aetei` being a relationship between persons, and `ai` an attribute (obviously).\r\n\r\nI tried some queries with foreach, but without results as I don&#39;t understand what to put after the | and how to get into the return. \r\nI&#39;ve seen some examples with queries in the RETURN ... is that possible ?\r\ngreetings\r\n\r\nI tried several solutions like FOREACH or CASE, but nothing worked. I guess I&#39;m too fresh on NEO4J to really get what &#39;im doing. \r\nShould i install apoc ?",
      "link": "https://stackoverflow.com/questions/77482002/testing-value-in-neo4j",
      "title": "testing value in NEO4j"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699900787,
              "post_id": 77473606,
              "comment_id": 136586392,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136586392_77473606"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699910401,
              "post_id": 77473606,
              "comment_id": 136587876,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136587876_77473606"
            },
            {
              "owner": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699974367,
              "post_id": 77473606,
              "comment_id": 136596195,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136596195_77473606"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699979652,
              "post_id": 77473606,
              "comment_id": 136597378,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#comment136597378_77473606"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1700008382,
          "last_edit_date": 1700008382,
          "creation_date": 1699875448,
          "answer_id": 77473606,
          "question_id": 77473139,
          "share_link": "https://stackoverflow.com/a/77473606",
          "body_markdown": "If you are inferring the possible properties from the `Person` nodes in the `MATCH`, then you can get the count of non-empty properties with the following:\r\n```sql\r\nMATCH (p:Person)\r\nUNWIND keys(p) AS key\r\nWITH key, CASE WHEN p[key] &lt;&gt; &quot;&quot; THEN 1 ELSE 0 END AS isNonEmpty\r\nRETURN key, sum(isNonEmpty) AS cnt\r\nORDER BY key\r\n```\r\nNote that because Neo4j treats null properties as non-existent, then if none of the nodes returned by the `MATCH` statement has the property, those properties can&#39;t be inferred.\r\n\r\nThe `CASE` can easily be adapted to exclude other property values from the count. For example, to exclude empty lists, you can write:\r\n\r\n```sql\r\nMATCH (p:Person)\r\nUNWIND keys(p) AS key\r\nWITH key, \r\n     CASE p[key]\r\n       WHEN [] THEN 0 \r\n       WHEN &quot;&quot; THEN 0\r\n       WHEN 0 THEN 0\r\n       ELSE 1 \r\n     END AS isNonEmpty\r\nRETURN key, sum(isNonEmpty) AS cnt\r\nORDER BY key\r\n```\r\n\r\nIf you know the properties in advance because, for example, you know the schema, then you could provide them as a list or set of records. For example, if the properties were `&#39;a&#39;` through to `&#39;g&#39;`, you could use the following:\r\n```sql\r\nUNWIND [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;] AS key\r\nMATCH (p)\r\nWITH key, CASE WHEN p[key] &lt;&gt; &quot;&quot; THEN 1 ELSE 0 END AS isNonEmpty\r\nRETURN key, sum(isNonEmpty) AS cnt\r\nORDER BY key\r\n```",
          "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77473606#77473606",
          "title": "Noe4j : how to get property names with count of non-null or non-empty value for a given node label"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699974204,
              "post_id": 77475985,
              "comment_id": 136596156,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77475985#comment136596156_77475985"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 13,
                "user_id": 13954862,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
                "display_name": "Tony Riddle",
                "link": "https://stackoverflow.com/users/13954862/tony-riddle"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699994628,
              "post_id": 77475985,
              "comment_id": 136599893,
              "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77475985#comment136599893_77475985"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699996285,
          "last_edit_date": 1699996285,
          "creation_date": 1699899242,
          "answer_id": 77475985,
          "question_id": 77473139,
          "share_link": "https://stackoverflow.com/a/77475985",
          "body_markdown": "[UPDATED]\r\n\r\n[Aggregating functions](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/) like `COUNT` already group by non-aggregating expressions like `key`, so `DISTINCT` is not needed. And comparisons to `NULL` are considered `false` by `WHERE`, so an explicit `NULL` test would be redundant.\r\n\r\nHere is a query that uses:\r\n- [ISEMPTY](https://neo4j.com/docs/cypher-manual/current/functions/predicate/#functions-isempty) to detect all &quot;empty&quot; properties (with `&quot;&quot;`, `[]`, or `{}` values).\r\n- [TOINTEGER](https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-tointeger) to convert booleans to 1 (for `true`) or 0.\r\n\r\nIt will also return a `0` count for properties that are always empty.\r\n\r\n    MATCH (p:Person)\r\n    UNWIND KEYS(p) AS key\r\n    RETURN key, SUM(TOINTEGER(NOT ISEMPTY(p[key]))) AS cnt \r\n    ORDER BY key\r\n\r\nYou should [PROFILE](https://neo4j.com/docs/cypher-manual/current/planning-and-tuning/query-tuning/#how-do-i-profile-a-query) the queries in the proposed answers to your question see which one uses the fewest DB hits.\r\n\r\nAlso, if it makes sense, you should consider removing all properties that have an empty string value if they should be considered as non-existent. That would allow you to use evern simpler and faster queries.",
          "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for/77475985#77475985",
          "title": "Noe4j : how to get property names with count of non-null or non-empty value for a given node label"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 13954862,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgORuAo4l7z5I7r9heR88ZhXOiM1FSSf-RgTqlJ=k-s256",
        "display_name": "Tony Riddle",
        "link": "https://stackoverflow.com/users/13954862/tony-riddle"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 78,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77473606,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1700008382,
      "creation_date": 1699870636,
      "question_id": 77473139,
      "share_link": "https://stackoverflow.com/q/77473139",
      "body_markdown": "So there is a requirement of counting the number of occurrences of non null and non empty values of all properties for a given node label.\r\n\r\nFor example, \r\n```\r\nMATCH(p:Person) \r\nWHERE p.name IS NOT NULL and p.name &lt;&gt; &quot;&quot; \r\nRETURN COUNT(p.name);\r\n```\r\n\r\nThis gives me a count for name properties for node label ```Person```\r\nI have to get the count of such other 200 properties for this node label. I am able to get the count of the properties but I am not sure for conditional count like the above. Anything would be helpful as I have just started learning neo4j.\r\n\r\nThe query I am using for all properties count is \r\n```\r\nMATCH(p:Person)\r\nWITH p\r\nUNWIND keys(p) as key\r\nWITH key, COUNT(keys(p)) as cnt\r\nRETURN DISTINCT key, cnt\r\nORDER BY key\r\n```\r\n\r\n\r\nWhat needs to be modified in the query? Or my query is wrong to start with. Thanks in advance.",
      "link": "https://stackoverflow.com/questions/77473139/noe4j-how-to-get-property-names-with-count-of-non-null-or-non-empty-value-for",
      "title": "Noe4j : how to get property names with count of non-null or non-empty value for a given node label"
    },
    {
      "tags": ["neo4j", "cypher", "query-optimization"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699891704,
          "post_id": 77471207,
          "comment_id": 136584787,
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition#comment136584787_77471207"
        },
        {
          "owner": {
            "reputation": 24739,
            "user_id": 1219755,
            "user_type": "registered",
            "accept_rate": 84,
            "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
            "display_name": "alexanoid",
            "link": "https://stackoverflow.com/users/1219755/alexanoid"
          },
          "reply_to_user": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699895496,
          "post_id": 77471207,
          "comment_id": 136585549,
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition#comment136585549_77471207"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699901890,
          "post_id": 77471207,
          "comment_id": 136586553,
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition#comment136586553_77471207"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699906391,
              "post_id": 77476221,
              "comment_id": 136587240,
              "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition/77476221#comment136587240_77476221"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 24739,
                "user_id": 1219755,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
                "display_name": "alexanoid",
                "link": "https://stackoverflow.com/users/1219755/alexanoid"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699910987,
              "post_id": 77476221,
              "comment_id": 136587954,
              "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition/77476221#comment136587954_77476221"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699905701,
          "last_edit_date": 1699905701,
          "creation_date": 1699901918,
          "answer_id": 77476221,
          "question_id": 77471207,
          "share_link": "https://stackoverflow.com/a/77476221",
          "body_markdown": "In `(childDStatCriterionAvgVoteWeight = 0 OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight OR criterionAvgVoteWeight IS NULL)`:\r\n\r\n- You should test `criterionAvgVoteWeight IS NULL` first. That way, if it is `NULL`, then you would not waste time testing with a `NULL` value in the `childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight` expression (which would be considered `false`), and you would also not need to test `childDStatCriterionAvgVoteWeight = 0`. This could be a big win if the value is frequently `NULL`.\r\n- If `criterionAvgVoteWeight` is always &gt;= 0 (when it is not `NULL`), then the `childDStatCriterionAvgVoteWeight = 0` test can be eliminated completely.\r\n\r\nIn short, you could consider using this expression instead: `(criterionAvgVoteWeight IS NULL OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight)`.\r\n\r\nSimilar considerations apply to `(childDStatCriterionExperienceMonth = 0 OR childDStatCriterionExperienceMonth &lt;= criterionExperienceMonth OR criterionExperienceMonth IS NULL)`.\r\n\r\nThese changes may save some time, depending on your actual data characteristics, but filtering is not free.",
          "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition/77476221#77476221",
          "title": "Neo4j Cypher query performnce optimization with WHERE condition"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 50,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77476221,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699905701,
      "creation_date": 1699835053,
      "last_edit_date": 1699901877,
      "question_id": 77471207,
      "share_link": "https://stackoverflow.com/q/77471207",
      "body_markdown": "I have the following Cypher query:\r\n    \r\n    PROFILE\r\n    MATCH (childDStat:JobableStatistic {jobableId: childD.id}) \r\n    WITH collect({`childDStat`:childDStat, `childD`:childD}) as childDStats \r\n    CALL apoc.cypher.mapParallel2(\r\n      &quot; WITH _.childD as childD, _.childDStat as childDStat \r\n        WITH childD, childDStat \r\n        UNWIND childD.detailedCriterionIds as dCId \r\n        WITH childD, childDStat, dCId + coalesce(childDStat[&#39;replaceableCriterionIds.&#39; + dCId],[]) as cGroup \r\n        WITH childD, childDStat, cGroup \r\n        WHERE NOT AlL(x IN cGroup WHERE x IN $zeroCriterionIds ) \r\n        WITH childD, childDStat, collect(cGroup) as cGroups \r\n        WHERE size(cGroups) &gt;= size(childD.detailedCriterionIds) \r\n        UNWIND cGroups as cGroup \r\n        WITH childD, childDStat, cGroup \r\n        WHERE ANY(x IN cGroup WHERE x IN $detailedCriterionIds) \r\n        WITH childD, childDStat, collect(cGroup) as cGroups \r\n        WHERE size(cGroups) &gt; 1 \r\n        RETURN childD, childDStat, cGroups &quot;,\r\n      {`detailedCriterionIds`: [3, 5, 7, 8, 12, 13, 14, 15, 16, 18, 20, 21, 23, 26, 28, 29, 30, 31, 33, 35, 36, 40, 42, 44, 45, 46, 47, 51, 54],\r\n       `zeroCriterionIds`: []},\r\n      childDStats, 6, 10) \r\n    YIELD value\r\n    WITH value.childD as childD, value.childDStat as childDStat, value.cGroups as cGroups WITH collect({`childDStat`:childDStat, `childD`:childD, `cGroups`:cGroups}) as childDStats \r\n    \r\n    CALL apoc.cypher.mapParallel2(\r\n      &quot; WITH _.childD as childD, _.childDStat as childDStat, _.cGroups as cGroups WITH childD, childDStat, size(cGroups) as cGroupsSize, cGroups \r\n        UNWIND cGroups as cGroup \r\n        WITH childD, childDStat, cGroupsSize, cGroup \r\n        UNWIND cGroup as cId WITH childD, childDStat, cGroupsSize, cGroup, cId, cGroup[0] as cG0\r\n    \r\n        WITH childD, childDStat, cGroupsSize, cGroup, cId, cG0, childDStat[&#39;criterionAvgVoteWeights.&#39; + cG0] as childDStatCriterionAvgVoteWeight,\r\n          childDStat[&#39;criterionExperienceMonths.&#39; + cG0] as childDStatCriterionExperienceMonth, \r\n          $criterionAvgVoteWeights[toString(cId)] as criterionAvgVoteWeight, $criterionExperienceMonths[toString(cId)] as criterionExperienceMonth \r\n        WHERE \r\n          (childDStatCriterionAvgVoteWeight = 0 OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight OR criterionAvgVoteWeight IS NULL) AND\r\n          (childDStatCriterionExperienceMonth = 0 OR childDStatCriterionExperienceMonth &lt;= criterionExperienceMonth OR criterionExperienceMonth IS NULL)\r\n    \r\n        WITH childD, childDStat, cGroupsSize, cG0, collect(cId) as cIds WITH childD, childDStat, cGroupsSize, collect(DISTINCT cG0 + cIds) as cGroups\r\n        WHERE size(cGroups) &gt;= cGroupsSize\r\n        RETURN childD, childDStat, cGroups &quot;,\r\n      {`detailedCriterionIds`: [3, 5, 7, 8, 12, 13, 14, 15, 16, 18, 20, 21, 23, 26, 28, 29, 30, 31, 33, 35, 36, 40, 42, 44, 45, 46, 47, 51, 54],\r\n       `zeroCriterionIds`: [],\r\n       `criterionAvgVoteWeights`: {`51`:5.0, `8`:0.0, `33`:5.0, `21`:0.0, `31`:0.0, `26`:4.0, `14`:5.0, `36`:3.0, `46`:3.0, `12`:3.0, `18`:5.0, `28`:5.0, `16`:2.0, `7`:5.0, `40`:1.0, `5`:5.0, `44`:4.0, `3`:1.0, `54`:4.0, `20`:4.0, `42`:4.0, `30`:3.0, `15`:4.0, `47`:1.0, `35`:1.0, `13`:3.0, `45`:3.0, `23`:4.0, `29`:1.0},\r\n       `criterionExperienceMonths`: {`8`:109, `33`:8, `21`:184, `31`:14, `26`:100, `14`:157, `36`:140, `46`:123, `12`:85, `18`:96, `28`:116, `16`:15, `7`:63, `40`:56, `5`:166, `44`:101, `3`:129, `42`:84, `20`:102, `30`:173, `15`:97, `47`:54, `13`:91, `35`:137, `45`:119, `23`:162, `29`:97}\r\n      },\r\n      childDStats, 6, 10) \r\n    YIELD value\r\n    RETURN value.childD.id\r\nThe following condition takes most of the query execution time:\r\n\r\n    WHERE \r\n      (childDStatCriterionAvgVoteWeight = 0 OR childDStatCriterionAvgVoteWeight &lt;= criterionAvgVoteWeight OR criterionAvgVoteWeight IS NULL) AND\r\n      (childDStatCriterionExperienceMonth = 0 OR childDStatCriterionExperienceMonth &lt;= criterionExperienceMonth OR criterionExperienceMonth IS NULL)\r\n\r\nWith this condition in place the query works `~1000ms`, without it `5ms`.\r\n\r\nIs there something I may do with this condition in order to improve the query performance?\r\n\r\nP.S\r\n\r\nThis is just a test query. The real query uses parameters for each single value.",
      "link": "https://stackoverflow.com/questions/77471207/neo4j-cypher-query-performnce-optimization-with-where-condition",
      "title": "Neo4j Cypher query performnce optimization with WHERE condition"
    },
    {
      "tags": ["java", "neo4j", "spring-data", "cypher", "spring-data-neo4j"],
      "comments": [
        {
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699891849,
          "post_id": 77446718,
          "comment_id": 136584823,
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j#comment136584823_77446718"
        },
        {
          "owner": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "reply_to_user": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699963937,
          "post_id": 77446718,
          "comment_id": 136594097,
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j#comment136594097_77446718"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699992038,
              "post_id": 77483393,
              "comment_id": 136599522,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136599522_77483393"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699995575,
              "post_id": 77483393,
              "comment_id": 136600027,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136600027_77483393"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699996573,
              "post_id": 77483393,
              "comment_id": 136600184,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136600184_77483393"
            },
            {
              "owner": {
                "reputation": 672,
                "user_id": 4024409,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
                "display_name": "Vincent Rupp",
                "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699998487,
              "post_id": 77483393,
              "comment_id": 136600451,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136600451_77483393"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700005316,
              "post_id": 77483393,
              "comment_id": 136601306,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#comment136601306_77483393"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "last_editor": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699991543,
          "last_edit_date": 1699991543,
          "creation_date": 1699990764,
          "answer_id": 77483393,
          "question_id": 77446718,
          "share_link": "https://stackoverflow.com/a/77483393",
          "body_markdown": "I suspect the problem lies in evaluating node equality.\r\n\r\nInstead of `WHERE p = $person` try `WHERE id(p) = id($person)`\r\n\r\nUPDATE: Based on this post, I could be mistaken:\r\nhttps://stackoverflow.com/questions/59844124/should-nodes-be-compared-directly-or-they-must-be-going-through-id-first",
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77483393#77483393",
          "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705561674,
              "post_id": 77831344,
              "comment_id": 137222551,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137222551_77831344"
            },
            {
              "owner": {
                "reputation": 959,
                "user_id": 3332879,
                "user_type": "registered",
                "accept_rate": 38,
                "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
                "display_name": "Cugomastik",
                "link": "https://stackoverflow.com/users/3332879/cugomastik"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705573075,
              "post_id": 77831344,
              "comment_id": 137224471,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137224471_77831344"
            },
            {
              "owner": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705581092,
              "post_id": 77831344,
              "comment_id": 137225677,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137225677_77831344"
            },
            {
              "owner": {
                "reputation": 959,
                "user_id": 3332879,
                "user_type": "registered",
                "accept_rate": 38,
                "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
                "display_name": "Cugomastik",
                "link": "https://stackoverflow.com/users/3332879/cugomastik"
              },
              "reply_to_user": {
                "reputation": 141,
                "user_id": 20340543,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
                "display_name": "Podbrushkin",
                "link": "https://stackoverflow.com/users/20340543/podbrushkin"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705670676,
              "post_id": 77831344,
              "comment_id": 137238230,
              "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#comment137238230_77831344"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 959,
            "user_id": 3332879,
            "user_type": "registered",
            "accept_rate": 38,
            "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
            "display_name": "Cugomastik",
            "link": "https://stackoverflow.com/users/3332879/cugomastik"
          },
          "last_editor": {
            "reputation": 959,
            "user_id": 3332879,
            "user_type": "registered",
            "accept_rate": 38,
            "profile_image": "https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1",
            "display_name": "Cugomastik",
            "link": "https://stackoverflow.com/users/3332879/cugomastik"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705574229,
          "last_edit_date": 1705574229,
          "creation_date": 1705484339,
          "answer_id": 77831344,
          "question_id": 77446718,
          "share_link": "https://stackoverflow.com/a/77831344",
          "body_markdown": "There are 2 ways of passing fields.\r\n\r\n**Note:** I used Spring Boot 3.2, SDN v7.2.2 and Neo4j v5. \r\n\r\n1) Use a Map without saving the Node:\r\n\r\n**Model:**    \r\n\r\n    @Setter\r\n    @Getter\r\n    @Node\r\n    public class Car {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n    \r\n        @Property(name = &quot;model&quot;)\r\n        private String model;\r\n\r\n        public Car(){} // have an empty constructor to save\r\n    }\r\n**Repository class:**\r\n\r\n    public interface CarRepository extends Neo4jRepository&lt;Car, Long&gt; {\r\n        \r\n        @Query(&quot;WITH $car AS c &quot; +\r\n                &quot;RETURN c[&#39;model&#39;] AS model&quot;)\r\n        String getCarModel(@Param(&quot;car&quot;) Map&lt;String, Object&gt; carMap); \r\n    }\r\n\r\n**Testing:**\r\n\r\n     private void testCar() {\r\n            Car car = new Car();\r\n            car.setModel(&quot;Tesla Model S&quot;);\r\n    \r\n            Map&lt;String, Object&gt; carMap = new HashMap&lt;&gt;();\r\n            carMap.put(&quot;model&quot;, car.getModel());\r\n            String model = carRepository.getCarModel(carMap);\r\n            System.out.println(&quot;\\nModel: &quot; + model);\r\n    \r\n        }\r\n\r\n\r\n\r\n2) Save the Node and use Id to access the parameters\r\n\r\n\r\n**Repository:**\r\nThe important part is to use `__id__` here. &quot;*.id*&quot; did not work in tests.\r\n\r\n     public interface CarRepository extends Neo4jRepository&lt;Car, Long&gt; {\r\n            @Query(&quot;MATCH (c:car) WHERE id(c) = $car.__id__ &quot; +\r\n                    &quot;RETURN c.model as model&quot;)\r\n            String getCarModel(@Param(&quot;car&quot;) Car car);\r\n        }\r\n\r\n\r\n**Testing:**\r\n\r\n        private void testCar() {\r\n            Car car = new Car();\r\n            car.setModel(&quot;Tesla Model S&quot;);\r\n        \r\n            carRepository.save(car); //this will save it with an ID\r\n            System.out.println(&quot;\\nModel: &quot; + \r\n            carRepository.getCarModel(car));\r\n            carRepository.delete(car);//if you want\r\n        }\r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77831344#77831344",
          "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 141,
            "user_id": 20340543,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
            "display_name": "Podbrushkin",
            "link": "https://stackoverflow.com/users/20340543/podbrushkin"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705593475,
          "creation_date": 1705593475,
          "answer_id": 77840765,
          "question_id": 77446718,
          "share_link": "https://stackoverflow.com/a/77840765",
          "body_markdown": "## Solution\r\n```java\r\npublic interface ImageRepositoryNeo4j extends Neo4jRepository&lt;Image, String&gt; {\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n    WHERE id(p) = toInteger(split($person.__id__, &#39;:&#39;)[-1])\r\n    RETURN count(i)\r\n    &quot;&quot;&quot;)\r\npublic Integer countImagesDepictingPerson(@Param(&quot;person&quot;) Person person);\r\n```\r\nUgly, but it works. Note: Person.id is of type String. Maybe you wouldn&#39;t need all this hassle if your Person.id is of type Integer or Long.\r\n\r\n## Explanation\r\nWhen we have \r\n```java\r\n@Node(&quot;Person&quot;)\r\npublic class Person {\r\n    \r\n    @Id\r\n    @GeneratedValue\r\n    private String id;\r\n```\r\nThis is what exactly neo4j generates as an id:\r\n```java\r\nvar freshPerson = personRepository.findOneByBirthday(LocalDate.of(1993,3,3));\r\nlog.info(&quot;freshPerson.getId()={}&quot;, freshPerson.getId());\r\n// freshPerson.getId()=4:a8bd1c80-0f61-4a2b-b094-7e7aed736caf:2\r\n```\r\nAs you can see, freshPerson.id is a long string.\r\n\r\nBut if you will call this cypher:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (p:Person {name: &#39;Roy&#39;})\r\n    RETURN id(p)\r\n    &quot;&quot;&quot;)\r\npublic Integer getRoyIdInt();\r\n```\r\nYou will get an Integer (and a warning message about `id()` function being deprecated).\r\n\r\nAnd if you will call this cypher:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (p:Person {name: &#39;Roy&#39;})\r\n    RETURN p.id\r\n    &quot;&quot;&quot;)\r\npublic String getRoyId();\r\n```\r\nYou will get null instead of String and this warning:\r\n```\r\nWARN 7164 --- [           main] o.s.data.neo4j.cypher.unrecognized       : Neo.ClientNotification.Statement.UnknownPropertyKeyWarning: The provided property key is not in the database\r\n        MATCH (p:Person {name: &#39;Roy&#39;})\r\n        RETURN p.id\r\n                 ^\r\n    One of the property names in your query is not available in the database, make sure you didn&#39;t misspell it or that the label is available when you run this statement in your application (the missing property name is: id)\r\n```\r\nThis is unexpected, because obviously we have `id` property in our Person class, even though it is annotated with `@Id @GeneratedValue`.\r\n\r\nInteger in the end of `4:a8bd1c80-0f61-4a2b-b094-7e7aed736caf:2` is actually what `id()` function returns, so we can extract it and find a node by it. This is exactly what is happening in Solution section.\r\n\r\nAlso we can extract it in java, check out last section. I&#39;ve made it verbose so it will be clear what is going on.\r\n\r\n## Solution 2\r\nDeclare neo4j repo method which takes Integer as an arg:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n    MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n    WHERE id(p) = $id\r\n    RETURN count(i)\r\n    &quot;&quot;&quot;)\r\npublic Integer countImagesDepictingPersonWithId(@Param(&quot;id&quot;) Integer id);\r\n```\r\n\r\nUse this method:\r\n```java\r\n// Create Greg with birthday:\r\nPerson greg = new Person(&quot;Greg&quot;, LocalDate.of(1993,3,3));\r\ngreg = personRepository.save(greg);\r\n\r\n// Create image depicting Greg:\r\nvar img2 = new Image(&quot;/blabla2.jpg&quot;);\r\nimg2.getPeople().add(greg);\r\n\r\n// Find someone by birthday (we know it&#39;s Greg):\r\nvar freshPerson = personRepository.findOneByBirthday(LocalDate.of(1993,3,3));\r\n\r\n// Extract Integer id from String id:\r\nString[] tokens = freshPerson.getId().split(&quot;:&quot;);\r\nString lastToken = tokens[tokens.length - 1];\r\nInteger gregId = Integer.parseInt(lastToken);\r\n\r\n// Count images depicting Greg:\r\nvar count = imageRepository.countImagesDepictingPersonWithId(gregId);\r\nlog.info(&quot;Greg1993 is depicted in {} images.&quot;, count); //1\r\n```\r\n\r\nWe just moved String splitting logic from Cypher to Java.",
          "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j/77840765#77840765",
          "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
        }
      ],
      "owner": {
        "reputation": 141,
        "user_id": 20340543,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
        "display_name": "Podbrushkin",
        "link": "https://stackoverflow.com/users/20340543/podbrushkin"
      },
      "last_editor": {
        "reputation": 141,
        "user_id": 20340543,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
        "display_name": "Podbrushkin",
        "link": "https://stackoverflow.com/users/20340543/podbrushkin"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 94,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1705593475,
      "creation_date": 1699455750,
      "last_edit_date": 1700494620,
      "question_id": 77446718,
      "share_link": "https://stackoverflow.com/q/77446718",
      "body_markdown": "I&#39;m writing Spring Data Neo4j webapp.\r\nI have this domain object:\r\n```java\r\n@Node(&quot;Person&quot;)\r\npublic class Person {\r\n    \r\n    @Id\r\n    @GeneratedValue\r\n    private String id;\r\n```\r\n\r\nand a `(:Image) - [:DEPICTS] -&gt; (:Person)` relationship.\r\n\r\nI need to count images depicting specific person.\r\nThis was my attempt:\r\n```java\r\npublic interface ImageRepositoryNeo4j extends Neo4jRepository&lt;Image, String&gt; {\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n        WHERE p = $person\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) Person person);\r\n```\r\nbut it always returns 0.\r\n\r\n## Other failed attempts\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image)-[:DEPICTS]-&gt;(p:Person)\r\n        WHERE p IN $people\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DOESN&#39;T WORK, 0 RESULTS\r\n    public Integer countByPeopleContains(@Param(&quot;people&quot;) Collection&lt;Person&gt; people);\r\n\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n        WHERE ID(p) = $person.__id__\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) Person person);\r\n\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n        WHERE id(p)=$person\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) String personId);\r\n\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person {id: $person.__id__})\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // DSNT WORK, ALWAYS 0\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) Person person);\r\n```\r\nAll of them return 0.\r\n\r\nAnd this one works, but since `fullName` isn&#39;t unique property, it is not suitable by domain logic:\r\n```java\r\n@Query(&quot;&quot;&quot;\r\n        MATCH (i:Image) -[:DEPICTS] -&gt; (p:Person {fullName: $person})\r\n        RETURN count(i)\r\n        &quot;&quot;&quot;)\r\n    // TODO: personFullname is not unique, use smth else\r\n    public Integer countByPeopleContains(@Param(&quot;person&quot;) String personFullName);\r\n```\r\n\r\nHow do I use domain object in custom Cypher query in Spring Data Neo4j Repository?\r\n\r\n## Clue\r\nIn [Spring Data Neo4j documentation][1] closest what I&#39;ve found to what I need is this:\r\n```java\r\n@Node\r\npublic final class Movie {\r\n\r\n    @Id\r\n    private final String title;\r\n...\r\ninterface MovieRepository extends Neo4jRepository&lt;Movie, String&gt; {\r\n\r\n    @Query(&quot;MATCH (m:Movie {title: $movie.__id__})\\n&quot;\r\n           + &quot;MATCH (m) &lt;- [r:DIRECTED|REVIEWED|ACTED_IN] - (p:Person)\\n&quot;\r\n           + &quot;return m, collect(r), collect(p)&quot;)\r\n    Movie findByMovie(@Param(&quot;movie&quot;) Movie movie);\r\n}\r\n```\r\nbut for some reason it doesn&#39;t work in my case. Maybe that&#39;s because my id is `@GeneratedValue`.\r\n\r\n## Another clue\r\n\r\nIn [Neo4j embedded docs](https://neo4j.com/docs/java-reference/current/java-embedded/query-parameters/) there is an example on how to pass an object to Cypher without Spring Data Neo4j:\r\n```\r\nMap&lt;String,Object&gt; params = new HashMap&lt;&gt;();\r\nparams.put( &quot;node&quot;, bobNode );\r\n\r\nString query =\r\n    &quot;MATCH (n:Person)&quot; + &quot;\\n&quot; +\r\n    &quot;WHERE n = $node&quot; + &quot;\\n&quot; +\r\n    &quot;RETURN n.name&quot;;\r\n\r\nResult result = transaction.execute( query, params );\r\n```\r\nIt works wif $node is `org.neo4j.graphdb.Node`:\r\n```java\r\n@Bean\r\nCommandLineRunner countForGregWithoutSDN(GraphDatabaseService graphDatabaseService) {\r\n\treturn args -&gt; {\r\n\t\ttry (var tx = graphDatabaseService.beginTx()) {\r\n\t\t\tString cypherGetGreg = &quot;MATCH (n:Person {birthday: date(&#39;1993-03-03&#39;)}) RETURN n LIMIT 5;&quot;;\r\n\t\t\tResult result = tx.execute(cypherGetGreg);\r\n\t\t\tvar greg1993 = (Node) result.next().get(&quot;n&quot;);\r\n\t\t\tif (!greg1993.getProperty(&quot;name&quot;).equals(&quot;Greg&quot;)) \r\n\t\t\t\tthrow new RuntimeException(&quot;Should be Greg1993 but actually &quot;+greg1993);\r\n\t\t\tresult.close();\r\n\r\n\t\t\tMap&lt;String,Object&gt; params = new HashMap&lt;&gt;();\r\n\t\t\tparams.put( &quot;node&quot;, greg1993 );\r\n\r\n\t\t\tString cypherCountForGreg = &quot;&quot;&quot;\r\n\t\t\t\tMATCH (i:Image) -[:DEPICTS] -&gt; (p:Person)\r\n\t\t\t\tWHERE p = $node\r\n\t\t\t\tRETURN count(i)\r\n\t\t\t\t&quot;&quot;&quot;;\r\n\t\t\tresult = tx.execute( cypherCountForGreg, params );\r\n\t\t\tvar count = result.next().values().iterator().next();\r\n\t\t\tSystem.out.println(&quot;Count for Greg1993 is &quot;+count);\t// 1\r\n\t\t\tresult.close();\r\n\t\t}\r\n\t};\r\n}\r\n```\r\n but it results in 0 if $node is SDN Entity.\r\n\r\n  [1]: https://docs.spring.io/spring-data/neo4j/reference/appendix/custom-queries.html#custom-queries.parameters",
      "link": "https://stackoverflow.com/questions/77446718/passing-domain-object-as-argument-to-custom-cypher-query-in-spring-data-neo4j",
      "title": "Passing domain object as argument to custom Cypher query in Spring Data Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1699304964,
          "post_id": 77434080,
          "comment_id": 136512735,
          "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship#comment136512735_77434080"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699304858,
              "post_id": 77434200,
              "comment_id": 136512719,
              "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77434200#comment136512719_77434200"
            },
            {
              "owner": {
                "reputation": 1631,
                "user_id": 5520810,
                "user_type": "registered",
                "accept_rate": 69,
                "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
                "display_name": "Skel",
                "link": "https://stackoverflow.com/users/5520810/skel"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699306921,
              "post_id": 77434200,
              "comment_id": 136513019,
              "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77434200#comment136513019_77434200"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1631,
            "user_id": 5520810,
            "user_type": "registered",
            "accept_rate": 69,
            "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
            "display_name": "Skel",
            "link": "https://stackoverflow.com/users/5520810/skel"
          },
          "last_editor": {
            "reputation": 1631,
            "user_id": 5520810,
            "user_type": "registered",
            "accept_rate": 69,
            "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
            "display_name": "Skel",
            "link": "https://stackoverflow.com/users/5520810/skel"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699307366,
          "last_edit_date": 1699307366,
          "creation_date": 1699304090,
          "answer_id": 77434200,
          "question_id": 77434080,
          "share_link": "https://stackoverflow.com/a/77434200",
          "body_markdown": "I found an answer [here][1]\r\n\r\nI&#39;ve updated it to look like this\r\n\r\n```\r\nMATCH (doc:Captions)\r\nMATCH (p:Pillars {name: &#39;Feel Good&#39;})\r\nMATCH (doc)-[:HAS_PILLAR]-(p)\r\nMATCH (c:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc)-[:HAS_CATEGORY]-(c)\r\nWITH count(*) as docCount, collect(doc) as parts\r\nUNWIND parts as a\r\nRETURN docCount,a \r\nlimit 12\r\n```\r\n\r\nI have Updated based off @cyberSam&#39;s comment\r\n\r\n```typescript\r\nconst hasPillar = pageOptionsDto.pillar\r\n  ? `(p:Pillars {id: &#39;${pageOptionsDto.pillar}&#39;})&lt;-[:HAS_PILLAR]-`\r\n  : &#39;&#39;;\r\nconst hasCat = pageOptionsDto.category\r\n  ? `-[:HAS_CATEGORY]-&gt;(c:Categories {id:&#39;${pageOptionsDto.category}&#39;})`\r\n  : &#39;&#39;;\r\nconst hasOrderBy = pageOptionsDto.orderBy\r\n  ? `ORDER BY doc.${pageOptionsDto.order}, r.date`\r\n  : &#39;ORDER BY r.date&#39;;\r\nconst res = await this.neo4jService.read(`\r\n  MATCH ${hasPillar}(doc:${collection} {active: true})${hasCat}\r\n  WITH count(*) as docCount, collect(doc) as docs\r\n  UNWIND docs as doc\r\n  OPTIONAL MATCH (u:Users {id: &#39;${activeUserData.sub}&#39;})&lt;-[r:USED_BY]-(doc)\r\n  OPTIONAL MATCH (c:Categories)&lt;-[cr:HAS_CATEGORY]-(doc)\r\n  OPTIONAL MATCH (doc)-[:HAS_PILLAR]-&gt;(p:Pillars)\r\n  WITH docCount, doc, r, cr, c, p\r\n  ${hasOrderBy}\r\n  RETURN docCount, doc, COLLECT(r) as rs, COLLECT(c) as crs, COLLECT(p) as prs\r\n  SKIP ${pageOptionsDto.skip} LIMIT ${pageOptionsDto.limit}\r\n`);\r\n\r\nreturn res;\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/29593998/can-you-get-the-full-count-of-result-even-when-using-limit-clause-with-neo4j",
          "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77434200#77434200",
          "title": "Neo4j Query set of node with 2 relationships and set value for each relationship node"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699892419,
          "creation_date": 1699892419,
          "answer_id": 77475327,
          "question_id": 77434080,
          "share_link": "https://stackoverflow.com/a/77475327",
          "body_markdown": "A simple answer is to traverse the graph once and collect the nodes:\r\n\r\n```\r\nMATCH (doc:Captions)-[:HAS_CATEGORY]-(:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc:Captions)-[:HAS_PILLAR]-(p:Pillars {name: &#39;Feel Good&#39;})\r\nwith collect(doc) as Docs\r\nwith [i in range(0,12) | Docs[i] ] as MyDocs, size(Docs) as docCount\r\nunwind MyDocs as Doc\r\nreturn Doc, docCount\r\n```\r\nThis will return 12 lines. Each line is a node and the count of the docs.\r\n\r\nYour comment above says the doc could have a pillar or a category. This query will only find docs that have _both_.\r\n\r\nTo avoid that, collect the docs from the first match statement, collect the docs from the second, and then join the lists before procedding.\r\n\r\nThe other option is to match on the docs first, then `optional match` the two possible paths.",
          "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship/77475327#77475327",
          "title": "Neo4j Query set of node with 2 relationships and set value for each relationship node"
        }
      ],
      "owner": {
        "reputation": 1631,
        "user_id": 5520810,
        "user_type": "registered",
        "accept_rate": 69,
        "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
        "display_name": "Skel",
        "link": "https://stackoverflow.com/users/5520810/skel"
      },
      "last_editor": {
        "reputation": 1631,
        "user_id": 5520810,
        "user_type": "registered",
        "accept_rate": 69,
        "profile_image": "https://lh5.googleusercontent.com/-Ur8TYb0ls7A/AAAAAAAAAAI/AAAAAAAAAFI/huQDsMpIVGc/photo.jpg?sz=256",
        "display_name": "Skel",
        "link": "https://stackoverflow.com/users/5520810/skel"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1699892419,
      "creation_date": 1699302877,
      "last_edit_date": 1699306950,
      "question_id": 77434080,
      "share_link": "https://stackoverflow.com/q/77434080",
      "body_markdown": "I&#39;ve got this Query working:\r\n\r\n```cypher\r\nMATCH (doc:Captions)-[:HAS_CATEGORY]-(c:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc:Captions)-[:HAS_PILLAR]-(p:Pillars {name: &#39;Feel Good&#39;})\r\nWITH count(doc) as docCount\r\nMATCH (doc:Captions)-[:HAS_CATEGORY]-(c:Categories {id: &#39;ne0MtinOO6DXryRvqMxS&#39;})\r\nMATCH (doc:Captions)-[:HAS_PILLAR]-(p:Pillars {name: &#39;Feel Good&#39;})\r\nWITH docCount, doc Limit 12\r\nRETURN doc, docCount\r\n```\r\n\r\nThis will return a `docCount` of 25 and the `doc`s, limited to 12.\r\nBut it feels like I&#39;m making the same call twice.\r\n\r\nI&#39;m wanting to not make the same call twice",
      "link": "https://stackoverflow.com/questions/77434080/neo4j-query-set-of-node-with-2-relationships-and-set-value-for-each-relationship",
      "title": "Neo4j Query set of node with 2 relationships and set value for each relationship node"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1699266680,
          "post_id": 77430266,
          "comment_id": 136505500,
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node#comment136505500_77430266"
        },
        {
          "owner": {
            "reputation": 493,
            "user_id": 2259302,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/aff4a398f6f272cbdb4dab0c4df4f3b2?s=256&d=identicon&r=PG",
            "display_name": "H&#229;kan L&#246;fqvist",
            "link": "https://stackoverflow.com/users/2259302/h%c3%a5kan-l%c3%b6fqvist"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699267372,
          "post_id": 77430266,
          "comment_id": 136505633,
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node#comment136505633_77430266"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1699300562,
          "post_id": 77430266,
          "comment_id": 136511968,
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node#comment136511968_77430266"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1699268823,
          "last_edit_date": 1699268823,
          "creation_date": 1699267393,
          "answer_id": 77430467,
          "question_id": 77430266,
          "share_link": "https://stackoverflow.com/a/77430467",
          "body_markdown": "To get the first and last `SECTION` in your path, declare a variable in the node patterns either side of the `NEXT_SECTION` variable length portion:\r\n```\r\nMATCH (start:CITY {Name: &quot;London&quot;})\r\nMATCH (end:CITY {Name: &quot;Edinburgh&quot;})\r\nMATCH path = (start)-[:HAS_STATION]-&gt;(:STATION)-[:BOARDS]-&gt;\r\n             (first:SECTION)-[:NEXT_SECTION*]-&gt;(last:SECTION)-[:UNBOARDS]-&gt;\r\n             (:STATION)&lt;-[:HAS_STATION]-(end)\r\nRETURN first, last\r\n```",
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node/77430467#77430467",
          "title": "Neo4j Cypher show first and last connected node"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 672,
            "user_id": 4024409,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256",
            "display_name": "Vincent Rupp",
            "link": "https://stackoverflow.com/users/4024409/vincent-rupp"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699894635,
          "creation_date": 1699894635,
          "answer_id": 77475549,
          "question_id": 77430266,
          "share_link": "https://stackoverflow.com/a/77475549",
          "body_markdown": "The title asks for the first and last sections.\r\n\r\nYour text asks to find &quot;every section that is directly connected to a station from the path.&quot; For that, we&#39;ll find the path and then filter for the station nodes.\r\n\r\n```\r\nMATCH (start:CITY {Name: &quot;London&quot;})\r\nMATCH (end:CITY {Name: &quot;Edinburgh&quot;})\r\nmatch path = (start)-[mid:HAS_STATION|BOARDS|NEXT_SECTION|UNBOARDS*]-(end)\r\nwith mid\r\nwhere mid:STATION\r\nreturn mid\r\n```\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node/77475549#77475549",
          "title": "Neo4j Cypher show first and last connected node"
        }
      ],
      "owner": {
        "reputation": 19,
        "user_id": 21613020,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/7183a46897df9d6f4e57395a306a29cb?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "thomaswiiswitch",
        "link": "https://stackoverflow.com/users/21613020/thomaswiiswitch"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 53,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1699894635,
      "creation_date": 1699265434,
      "last_edit_date": 1699392175,
      "question_id": 77430266,
      "share_link": "https://stackoverflow.com/q/77430266",
      "body_markdown": "I created a graph in Neo4j for test purposes. Graph looks like screenshot below (simplified):\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mzzug.png\r\n\r\nWhat I want is the path from London to Edinburgh. For that I created following Cypher Query:\r\n\r\n\r\n```\r\nMATCH (start:CITY {Name: &quot;London&quot;})\r\nMATCH (end:CITY {Name: &quot;Edinburgh&quot;})\r\nMATCH path = (start)-[:HAS_STATION]-&gt;(:STATION)-[:BOARDS]-&gt;(:SECTION)-[:NEXT_SECTION*]-&gt;(:SECTION)-[:UNBOARDS]-&gt;(:STATION)&lt;-[:HAS_STATION]-(end)\r\n \r\n```\r\n\r\nThis Query leaves me with the whole path Via Section 1, 2 and 3. All I need for my result is the first and last section. If there is a transshipment in between (i.e. Glasgow), I also would need the last section before transshipment and the first after the transshipment.\r\n\r\nIn other words: I need every section that is directly connected to a station from the path. I tried out following extension:\r\n\r\n```\r\nwith nodes(path) as nodes\r\nunwind nodes as node\r\nwith node\r\nwhere ()-[:BOARDS]-&gt;(node) or (node)-[:UNBOARDS]-&gt;()\r\n```\r\n\r\nBut with that query extension I ended up with all Sections, since they all can either board or unboard at a specific station (even if that station is not part of the path).",
      "link": "https://stackoverflow.com/questions/77430266/neo4j-cypher-show-first-and-last-connected-node",
      "title": "Neo4j Cypher show first and last connected node"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699082110,
              "post_id": 77418774,
              "comment_id": 136489031,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136489031_77418774"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699183923,
              "post_id": 77418774,
              "comment_id": 136497086,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136497086_77418774"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699183949,
              "post_id": 77418774,
              "comment_id": 136497088,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136497088_77418774"
            },
            {
              "owner": {
                "reputation": 437,
                "user_id": 5831358,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Marj",
                "link": "https://stackoverflow.com/users/5831358/marj"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699259551,
              "post_id": 77418774,
              "comment_id": 136504285,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136504285_77418774"
            },
            {
              "owner": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699285785,
              "post_id": 77418774,
              "comment_id": 136509318,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#comment136509318_77418774"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1699034115,
          "creation_date": 1699034115,
          "answer_id": 77418774,
          "question_id": 77417923,
          "share_link": "https://stackoverflow.com/a/77418774",
          "body_markdown": "Because you&#39;re only counting relationships for a single node, either version will take milliseconds, so performance isn&#39;t relevant. Only where counts were being done for many nodes would you consider it. In any case, without profiling, the best way would be to actually measure it.\r\n\r\nI compared the following Cypher and APOC versions for different numbers of relationships (the actual `MATCH` double counts, but that doesn&#39;t matter for this):\r\n\r\n**Cypher**\r\n```sql\r\nMATCH (n)-[r]-()\r\nRETURN \r\n  CASE \r\n    WHEN (startNode(r) = n) THEN type(r) + &#39;&gt;&#39; \r\n    ELSE &#39;&lt;&#39; + type(r)\r\n  END AS type, \r\n  count(r) AS count\r\n```\r\n\r\n**APOC**\r\n```sql\r\nMATCH (n)\r\nCALL {\r\n    WITH n\r\n    WITH n, apoc.node.relationship.types(n) AS types\r\n    CALL {\r\n        WITH n, types\r\n        UNWIND types as type\r\n        RETURN &#39;&lt;&#39;+type AS type, apoc.node.degree.in(n, type) as count\r\n    UNION ALL \r\n        WITH n, types\r\n        UNWIND types as type\r\n        RETURN type+&#39;&gt;&#39; AS type, apoc.node.degree.out(n, type) as count\r\n    }\r\n    RETURN type, count\r\n}\r\nRETURN type, sum(count)\r\n```\r\n\r\nHere is a comparison (based on running the DB locally):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThere may be a more efficient version for the APOC query, but in any case, the Cypher here is faster.\r\n\r\n  [1]: https://i.stack.imgur.com/rIvld.png",
          "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77418774#77418774",
          "title": "Neo4j count relationships of each type for given node"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699082019,
              "post_id": 77419012,
              "comment_id": 136489027,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77419012#comment136489027_77419012"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1493,
                "user_id": 1967693,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
                "display_name": "zirkelc",
                "link": "https://stackoverflow.com/users/1967693/zirkelc"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1699087311,
              "post_id": 77419012,
              "comment_id": 136489374,
              "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77419012#comment136489374_77419012"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699087293,
          "last_edit_date": 1699087293,
          "creation_date": 1699036773,
          "answer_id": 77419012,
          "question_id": 77417923,
          "share_link": "https://stackoverflow.com/a/77419012",
          "body_markdown": "There is actually a faster approach that also fixes a potential problem in your current queries. If `n` has any self-relationships (relationships that start/end at `n`), then such relationships would be counted twice (as both inbound and outbound relationships). In other words, the sum of the counts could be greater than the actual number of relationships.\r\n\r\nThis query should be fast and also solve the self-relationship problem:\r\n\r\n    MATCH (n)-[r]-() WHERE id(n) = 0\r\n    RETURN\r\n      CASE n WHEN ENDNODE(r) THEN &#39;&lt;&#39; ELSE &#39;&#39; END +\r\n      TYPE(r) +\r\n      CASE n WHEN STARTNODE(r) THEN &#39;&gt;&#39; ELSE &#39;&#39; END AS type,\r\n      COUNT(*) AS count\r\n\r\nAn inbound `REL` relationship would be represented as `&lt;REL`, an outbound one as `REL&gt;`, and a self-relationship as `&lt;REL&gt;`. And the sum of the counts would equal the actual number of relationships.\r\n\r\n#### Including endnode labels\r\nHere is a slightly altered query that returns a count of each distinct combination of type and end node labels (a node can have multiple labels):\r\n\r\n    MATCH (n)-[r]-(m) WHERE id(n) = 0\r\n    RETURN\r\n      CASE n WHEN ENDNODE(r) THEN &#39;&lt;&#39; ELSE &#39;&#39; END +\r\n      TYPE(r) +\r\n      CASE n WHEN STARTNODE(r) THEN &#39;&gt;&#39; ELSE &#39;&#39; END AS type,\r\n      LABELS(m) AS endNodeLabels,\r\n      COUNT(*) AS count\r\n\r\nReading how [aggregating functions](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/) work will help you understand these 2 queries.",
          "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node/77419012#77419012",
          "title": "Neo4j count relationships of each type for given node"
        }
      ],
      "owner": {
        "reputation": 1493,
        "user_id": 1967693,
        "user_type": "registered",
        "accept_rate": 62,
        "profile_image": "https://www.gravatar.com/avatar/91a12c6019aaf3d7635e9d4b09522322?s=256&d=identicon&r=PG",
        "display_name": "zirkelc",
        "link": "https://stackoverflow.com/users/1967693/zirkelc"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 61,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77419012,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1699087293,
      "creation_date": 1699025458,
      "question_id": 77417923,
      "share_link": "https://stackoverflow.com/q/77417923",
      "body_markdown": "I want to count the relationships for each type of a given start node. I have constructed two possible queries to achieve that, but I don&#39;t know which one is going to be more efficient when dealing with lots of relationships.\r\n\r\n1. Cypher only query with `count()`\r\n```sql\r\nMATCH (n) WHERE id(n) = 0\r\nCALL {\r\n    WITH n\r\n    MATCH (n)&lt;-[r]-()\r\n    RETURN &#39;&lt;&#39;+TYPE(r) AS type, COUNT(r) AS count\r\nUNION ALL \r\n    WITH n\r\n    MATCH (n)-[r]-&gt;()\r\n    RETURN TYPE(r)+&#39;&gt;&#39; AS type, COUNT(r) AS count\r\n}\r\nRETURN type, count\r\n```\r\n\r\nResult:\r\n```\r\n╒════════════╤═════╕\r\n│type        │count│\r\n╞════════════╪═════╡\r\n│&quot;&lt;ACTED_IN&quot; │5    │\r\n├────────────┼─────┤\r\n│&quot;&lt;PRODUCED&quot; │1    │\r\n├────────────┼─────┤\r\n│&quot;&lt;DIRECTED&quot; │2    │\r\n└────────────┴─────┘\r\n```\r\n\r\n2. Cypher + APOC `apoc.node.relationship.types()` and `type, apoc.node.degree.[in|out]()`\r\n```sql\r\nMATCH (n) WHERE id(n) = 0\r\nWITH n, apoc.node.relationship.types(n) AS types\r\nCALL {\r\n    WITH n, types\r\n    UNWIND types as type\r\n    RETURN &#39;&lt;&#39;+type AS type, apoc.node.degree.in(n, type) as count\r\nUNION ALL \r\n    WITH n, types\r\n    UNWIND types as type\r\n    RETURN type+&#39;&gt;&#39; AS type, apoc.node.degree.out(n, type) as count\r\n}\r\nRETURN type, count\r\n```\r\nResult:\r\n```\r\n╒════════════╤═════╕\r\n│type        │count│\r\n╞════════════╪═════╡\r\n│&quot;&lt;ACTED_IN&quot; │5    │\r\n├────────────┼─────┤\r\n│&quot;&lt;DIRECTED&quot; │2    │\r\n├────────────┼─────┤\r\n│&quot;&lt;PRODUCED&quot; │1    │\r\n├────────────┼─────┤\r\n│&quot;ACTED_IN&gt;&quot; │0    │\r\n├────────────┼─────┤\r\n│&quot;DIRECTED&gt;&quot; │0    │\r\n├────────────┼─────┤\r\n│&quot;PRODUCED&gt;&quot; │0    │\r\n└────────────┴─────┘\r\n```\r\n\r\nThe second query returns rows for empty relationship types, but this can be neglected.\r\n\r\nI can only profile the first cypher-only query, because custom procedures like APOC can&#39;t be profiled.  ",
      "link": "https://stackoverflow.com/questions/77417923/neo4j-count-relationships-of-each-type-for-given-node",
      "title": "Neo4j count relationships of each type for given node"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698926447,
          "creation_date": 1698926447,
          "answer_id": 77409391,
          "question_id": 77409184,
          "share_link": "https://stackoverflow.com/a/77409391",
          "body_markdown": "Simple delete is ok!\r\n\r\nDETACH DELETE is a shorter way of doing a delete relationship then delete node. So instead of doing two steps of Delete node then Delete relationship, we use DETACH DELETE in one go.\r\n\r\nFor relationship, you are NOT detach(ing) it from a node, you simply deleting it. So using detach is not needed but neo4j will flag it as an error if you do DETACH DELETE for a relationship.  It understands the redundancy and deletes it anyway.",
          "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77409391#77409391",
          "title": "Optimization of a cypher query which deletes duplicate relationships"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698991688,
              "post_id": 77410965,
              "comment_id": 136477157,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136477157_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698991731,
              "post_id": 77410965,
              "comment_id": 136477161,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136477161_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698994325,
              "post_id": 77410965,
              "comment_id": 136477423,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136477423_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699009420,
              "post_id": 77410965,
              "comment_id": 136479689,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136479689_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699009473,
              "post_id": 77410965,
              "comment_id": 136479701,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136479701_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699009477,
              "post_id": 77410965,
              "comment_id": 136479704,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136479704_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699266784,
              "post_id": 77410965,
              "comment_id": 136505513,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136505513_77410965"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699268177,
              "post_id": 77410965,
              "comment_id": 136505787,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136505787_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699337842,
              "post_id": 77410965,
              "comment_id": 136515684,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136515684_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699340066,
              "post_id": 77410965,
              "comment_id": 136515923,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136515923_77410965"
            },
            {
              "owner": {
                "reputation": 11,
                "user_id": 22845737,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
                "display_name": "Somnath Deb",
                "link": "https://stackoverflow.com/users/22845737/somnath-deb"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1699341166,
              "post_id": 77410965,
              "comment_id": 136516057,
              "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#comment136516057_77410965"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 11,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1699009215,
          "last_edit_date": 1699009215,
          "creation_date": 1698939567,
          "answer_id": 77410965,
          "question_id": 77409184,
          "share_link": "https://stackoverflow.com/a/77410965",
          "body_markdown": "`DETACH DELETE` will delete _all_ relationships attached to a given node before deleting that node. In your case, you are deleting specified relationships, so the `DETACH` keyword has no effect.\r\n\r\nAs you are using Neo4j 3.5, you could use the following as an optimized version of your query—assuming you have apoc installed:\r\n\r\n```\r\nCALL apoc.periodic.iterate(\r\n    &quot;MATCH (n)-[r:R]-&gt;(m)\r\n     WHERE exists((n)-[r]-&gt;(m)&lt;-[:R {id: r.id}]-(n))\r\n     WITH r.id AS id, tail(collect(r)) AS branches\r\n     UNWIND branches AS branch\r\n     RETURN branch&quot;,\r\n    &quot;DELETE branch&quot;,\r\n    {batchSize: 10000, parallel: true}\r\n)\r\n```\r\n\r\nUsing `r.id` as the grouping key works because its value is the same for all relationships that are duplicates of each other. The `exists` also assumes that the duplicate relationships have the same source and target nodes.\r\n\r\nIf you are on Neo4j 5, you could do a safer batched version of the above with `CALL IN TRANSACTIONS`:\r\n```\r\nMATCH (n)-[r:R]-&gt;(m) \r\nWHERE EXISTS { (n)-[r]-&gt;(m)&lt;-[:R {id: r.id}]-(n) }\r\nWITH r.id AS id, tail(collect(r)) AS branches\r\nUNWIND branches AS branch\r\nCALL { \r\n    WITH branch\r\n    DELETE branch\r\n} IN TRANSACTIONS OF 10000 ROWS\r\n```",
          "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships/77410965#77410965",
          "title": "Optimization of a cypher query which deletes duplicate relationships"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22845737,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKNKzG4ZG21RjKJZ87NmjljaKskSXrI6x6i6Z3c2cr241k=k-s256",
        "display_name": "Somnath Deb",
        "link": "https://stackoverflow.com/users/22845737/somnath-deb"
      },
      "last_editor": {
        "reputation": 3372,
        "user_id": 9538068,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/H0yC9.jpg?s=256&g=1",
        "display_name": "Tyson Gibby",
        "link": "https://stackoverflow.com/users/9538068/tyson-gibby"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 85,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1699950043,
      "creation_date": 1698924475,
      "last_edit_date": 1699950043,
      "question_id": 77409184,
      "share_link": "https://stackoverflow.com/q/77409184",
      "body_markdown": "I am trying to delete a few duplicate relationships that got created between the same nodes. For example, node A is connected to node B with relationship R two times. Hence I have to delete one relationship. To do that I have written a query like this: \r\n```\r\nMATCH p = ()-[r:relationship]-&gt;()\r\nWITH r.id AS id, collect(r) AS branches WHERE size(branches) &gt; 1\r\nFOREACH (n IN tail(branches) | DELETE n)\r\n```\r\n\r\nMy question is whether I should use `DETACH DELETE`, or is a simple `DELETE` ok? Or in this case will `DETACH DELETE` and `DELETE` both do the same work?\r\n\r\nIn addition, please suggest how I can optimize this query!! Since there are millions of records to be deleted.\r\n\r\nI have tried using both the `DELETE` clause and the `DETACH DELETE` clause, seems both worked the same. Note: I am using Neo4j version 3.5.",
      "link": "https://stackoverflow.com/questions/77409184/optimization-of-a-cypher-query-which-deletes-duplicate-relationships",
      "title": "Optimization of a cypher query which deletes duplicate relationships"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698882420,
              "post_id": 77405263,
              "comment_id": 136462513,
              "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#comment136462513_77405263"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698883123,
              "post_id": 77405263,
              "comment_id": 136462570,
              "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#comment136462570_77405263"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698887235,
              "post_id": 77405263,
              "comment_id": 136462878,
              "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#comment136462878_77405263"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1698872291,
          "last_edit_date": 1698872291,
          "creation_date": 1698868516,
          "answer_id": 77405263,
          "question_id": 77404810,
          "share_link": "https://stackoverflow.com/a/77405263",
          "body_markdown": "You have inconsistencies in your sample data.\r\n\r\n- `scenario2` says it has 3 parents, but there are only 2 `GAP` nodes containing the `s2` key.\r\n- `scenario3` says it has 1 parent, but there are actually 2 `GAP` nodes containing the `s3` key.\r\n\r\nHere is a query that should work, assuming you fix your data to be consistent:\r\n\r\n    MATCH (gap:GAP)\r\n    WHERE gap.name IN $gaps\r\n    UNWIND SPLIT(gap.next, &#39;,&#39;) AS sKey\r\n    WITH sKey, COUNT(*) AS cnt\r\n    WITH COLLECT({sKey: sKey, cnt: cnt}) AS data\r\n    MATCH (s:SCENARIO)\r\n    WHERE ANY(d IN data WHERE d.sKey = s.key AND d.cnt = s.parents)\r\n    RETURN s.name AS ScenarioName;\r\n\r\nThe query assumes that the list of `GAP` names is provided as a `$gaps` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/).\r\n\r\n#### Suggested new model\r\n\r\nYou should strongly consider changing your data model, however. You are not using any relationships, which is the main strength of a graph database. `GAP` and `SCENARIO` nodes should not store relationship information as properties, but should be linked by actual relationships. I would also recommend conforming to the [recommended neo4j naming convention](https://neo4j.com/docs/cypher-manual/current/syntax/naming/#_recommendations), where labels are camel-cased.\r\n\r\nFor example, this could conceptually be your new data model (without the `next` and `parents` properties):\r\n\r\n    (g:Gap {name, key, desc})-[:HAS_SCENARIO]-&gt;(s:Scenario {name, key, desc})\r\n\r\nWith this new model, the query for your use case would simply be:\r\n\r\n    MATCH (g:Gap)-[:HAS_SCENARIO]-&gt;(s:Scenario)\r\n    WHERE g.name IN $gaps\r\n    WITH s, COUNT(g) AS cnt\r\n    WHERE COUNT{ ()-[:HAS_SCENARIO]-&gt;(s) } = cnt\r\n    RETURN s.name AS scenarioName;\r\n",
          "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes/77405263#77405263",
          "title": "Cypher Query to Filter SCENARIO Nodes Based on GAP Nodes"
        }
      ],
      "owner": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "last_editor": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77405263,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698882141,
      "creation_date": 1698863109,
      "last_edit_date": 1698882141,
      "question_id": 77404810,
      "share_link": "https://stackoverflow.com/q/77404810",
      "body_markdown": "I&#39;m working with a Neo4j database with a data model with GAP and SCENARIO nodes. Each GAP node has a &quot;next&quot; property that lists the keys of connected SCENARIO nodes. The SCENARIO nodes have a &quot;parents&quot; property indicating how many parent nodes they have. I want to filter SCENARIO nodes based on a list of selected GAP nodes and the number of parents. \r\n\r\nHere is how GAP nodes are supposed to SCENARIO nodes:   \r\n\r\n- gap1 key:g1\r\n- gap2 key:g2\r\n- gap3 key:g3\r\n\r\n----------\r\n\r\n- scenario1 key:  s1 \r\n- scenario2 key:  s2\r\n- scenario3 key: s3\r\n\r\n----------\r\n\r\n- parents of scenario 1 are: gap1, gap2\r\n- parents of scenario 2 are: gap1, gap2, gap3\r\n- parents of scenario 3 are: gap2\r\n\r\nHere is my GAP and SCENARIO nodes model:    \r\n\r\n     (gap1:GAP {name:  &#39;g1&#39;,\r\n\t            key:   &#39;g1&#39;,\r\n\t            desc:  &#39;&#39;,\r\n\t            next:  &#39;s1,s2&#39;\r\n\t  }),\r\n\t//GAP2\r\n\t  (gap2:GAP {name:  &#39;g2&#39;,\r\n                 key:   &#39;g2&#39;,\r\n                 desc:  &#39;&#39;,\r\n                 next:  &#39;s1,s2,s3&#39;\r\n\t  }),\r\n\t//GAP3\r\n\t  (gap3:GAP {name:  &#39;g3&#39;,\r\n                 key:   &#39;g3&#39;,\r\n                 desc:  &#39;g3&#39;,\r\n                 next:  &#39;s2&#39;\r\n\t  }),\r\n\r\n\t//SCENARIO\r\n\t  (scenario1:SCENARIO {name:    &#39;s1&#39;,\r\n                           key:     &#39;s1&#39;,\r\n                           DESC:    &#39;&#39;,\r\n                           parents: 2\r\n                           }),\r\n\t  (scenario2:SCENARIO {name:    &#39;s2&#39;,\r\n                           key:     &#39;s2&#39;,\r\n                           DESC:    &#39;&#39;,\r\n                           parents: 3\r\n                           }),\r\n\t  (scenario3:SCENARIO {name:    &#39;s3&#39;,\r\n                           key:     &#39;s3&#39;,\r\n                           DESC:    &#39;&#39;,\r\n                           parents: 1}),\r\n\r\nIf a gap is provided as input in the query and it is a parent of a scenario, but the number of parents of that scenario is more than 1 in the parent node, it should exclude the scenario from the result. If two gaps are provided, and both are parents of a single scenario, other scenario nodes are included. Still, the parent condition only meets for that single node; it should only return that single node. \r\n\r\nI have tried too many combinations but always fail somewhere.\r\nThis query somehow worked, but it failed for the following conditions: \r\n\r\n 1. When g1,g2 are provided, it should return s1 only. it returns all three scenario\r\n 2. if g1 is provided, it should return empty, but it returns s1,s2\r\n 3. if g2 is provided, it should return only s3 but it returns all s1,s2,s3    \r\n\r\n\r\nI have been stuck on this for around three days but have been unable to figure out a solution. Please note that, per the scenario, a direct link from GAP to SCENARIO will not solve the problem.\r\n\r\n    MATCH (gap:GAP)\r\n\tWHERE gap.name IN [&#39;g1&#39;, &#39;g2&#39;, &#39;g3&#39;]\r\n\r\n\tWITH COLLECT(DISTINCT gap) AS selectedGaps\r\n\r\n\tWHERE size(selectedGaps) &gt; 0  \r\n\r\n\tMATCH (scenario:SCENARIO)\r\n\tWHERE ANY(gap IN selectedGaps WHERE scenario.key IN split(gap.next, &#39;,&#39;))\r\n\tRETURN scenario.name AS ScenarioName;\r\n",
      "link": "https://stackoverflow.com/questions/77404810/cypher-query-to-filter-scenario-nodes-based-on-gap-nodes",
      "title": "Cypher Query to Filter SCENARIO Nodes Based on GAP Nodes"
    },
    {
      "tags": ["neo4j", "cypher", "openapi", "langchain"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698772890,
          "post_id": 77397307,
          "comment_id": 136447050,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136447050_77397307"
        },
        {
          "owner": {
            "reputation": 29,
            "user_id": 19281880,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
            "display_name": "Raha",
            "link": "https://stackoverflow.com/users/19281880/raha"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698832579,
          "post_id": 77397307,
          "comment_id": 136453964,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136453964_77397307"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698860303,
          "post_id": 77397307,
          "comment_id": 136459455,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136459455_77397307"
        },
        {
          "owner": {
            "reputation": 29,
            "user_id": 19281880,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
            "display_name": "Raha",
            "link": "https://stackoverflow.com/users/19281880/raha"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698871486,
          "post_id": 77397307,
          "comment_id": 136461221,
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result#comment136461221_77397307"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 29,
                "user_id": 19281880,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
                "display_name": "Raha",
                "link": "https://stackoverflow.com/users/19281880/raha"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1705659313,
              "post_id": 77830259,
              "comment_id": 137236424,
              "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result/77830259#comment137236424_77830259"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 23256411,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/768e519eba430296035bcb5e7d4dc950?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Amit Pawar",
            "link": "https://stackoverflow.com/users/23256411/amit-pawar"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1705471434,
          "creation_date": 1705471434,
          "answer_id": 77830259,
          "question_id": 77397307,
          "share_link": "https://stackoverflow.com/a/77830259",
          "body_markdown": "Have you tried using qa_prompt??\r\n\r\n    chain = GraphCypherQAChain.from_llm(\r\n        llm=llm,\r\n        graph=graph,\r\n        verbose=True,\r\n        return_intermediate_steps=True,\r\n        cypher_prompt=cypher_prompt,\r\n        qa_prompt=qa_prompt\r\n    )\r\n\r\nSomething like this:\r\n\r\n    cypher_qa_prompt = &quot;&quot;&quot;You are an assistant that helps to form nice and human understandable answers.\r\n    The information part contains the provided information that you must use to construct an answer.\r\n    The provided information is authoritative, you must never doubt it or try to use your internal knowledge to correct it.\r\n    Make the answer sound as a response to the question. Do not mention that you based the result on the given information.\r\n    If the provided information is empty, say that you don&#39;t know the answer.\r\n    Final answer should be easily readable and structured.\r\n    Information:\r\n    {context}\r\n\r\n    Question: {question}\r\n    Helpful Answer:&quot;&quot;&quot;\r\n\r\n    qa_prompt = PromptTemplate(\r\n    input_variables=[&quot;context&quot;, &quot;question&quot;], template=cypher_qa_prompt\r\n)\r\n\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result/77830259#77830259",
          "title": "Langchain neo4j integration return no result"
        }
      ],
      "owner": {
        "reputation": 29,
        "user_id": 19281880,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
        "display_name": "Raha",
        "link": "https://stackoverflow.com/users/19281880/raha"
      },
      "last_editor": {
        "reputation": 29,
        "user_id": 19281880,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG",
        "display_name": "Raha",
        "link": "https://stackoverflow.com/users/19281880/raha"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 131,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1705471434,
      "creation_date": 1698766944,
      "last_edit_date": 1698832347,
      "question_id": 77397307,
      "share_link": "https://stackoverflow.com/q/77397307",
      "body_markdown": "I am using langchain and neo4j Libs to convert NL to cypher.\r\nEverything is working, I even get the finish chain and it is clearly not empty\r\n``` \r\nFull Context:\r\n[{&#39;d&#39;: {&#39;name&#39;: &#39;Quinapril&#39;, &#39;ID&#39;: &#39;CHEMBL1592&#39;}}]\r\n\r\n&gt; Finished chain.\r\n```\r\n\r\nBut the final results is like this\r\n```\r\nI&#39;m sorry, but I don&#39;t have the information.\r\n```\r\nAny Ideas what is happening? And how can i get full context results instead of the final interpretation.\r\nI am following this blog steps [blog-link][1]\r\n```\r\nllm = ChatOpenAI(temperature=0.0, openai_api_key=openai_api_key)\r\n\r\nCYPHER_GENERATION_TEMPLATE = &quot;&quot;&quot;Task:Generate Cypher statement to query a graph database.\r\nInstructions:\r\nUse only the provided relationship types and properties in the schema.\r\n{schema}\r\n\r\nThe question is:\r\n{question}&quot;&quot;&quot;\r\n\r\n\r\nCYPHER_GENERATION_PROMPT = PromptTemplate(\r\n    input_variables=[&quot;schema&quot;, &quot;question&quot;], template=CYPHER_GENERATION_TEMPLATE\r\n)\r\n\r\nchain = GraphCypherQAChain.from_llm(\r\n    llm,\r\n    graph=graph,\r\n    verbose=True,\r\n    cypher_prompt=CYPHER_GENERATION_PROMPT\r\n)\r\n\r\ndef convert_question_to_cypher(question):\r\n    return (chain.run(question))\r\n\r\n#convert_question_to_cypher(&quot;find name of drugs that target gene XYZ&quot;)\r\n```\r\n\r\n  [1]: https://neo4j.com/developer-blog/langchain-cypher-search-tips-tricks/",
      "link": "https://stackoverflow.com/questions/77397307/langchain-neo4j-integration-return-no-result",
      "title": "Langchain neo4j integration return no result"
    },
    {
      "tags": ["graph", "neo4j", "cypher", "graph-data-science"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698971254,
          "creation_date": 1698971254,
          "answer_id": 77413581,
          "question_id": 77396899,
          "share_link": "https://stackoverflow.com/a/77413581",
          "body_markdown": "You have set the `undirectedRelationshipTypes` incorrectly. Use the following instead:\r\n\r\n```\r\nMATCH (src:Subnet)-[r:SUB_OF|CONNECT_TO]-&gt;(trg:Network|TGW)\r\nRETURN gds.graph.project(\r\n  &#39;cypherGraph10&#39;,\r\n  src,\r\n  trg,\r\n  {relationshipType: type(r)},\r\n  {undirectedRelationshipTypes: [&#39;*&#39;]})\r\n```\r\n\r\nThe problem lay with you setting the `undirectedRelationshipTypes` dynamically. The graph projection will only set to undirected those relationships that have the type to whatever value `type(r)` has for its first invocation i.e. the type of the relationship `r` in whatever happens to be the first record from the `MATCH` clause. For example, if the first record happens to have relationship with type `SUB_OF`, then only those relationships will be undirected in the projection.\r\n\r\nThe reason this matters is that APSP will only traverse directed relationships following their direction. If you look at your graph, if all the `CONNECT_TO` relationships were directed, then the graph would be partitioned at the green `TGW` nodes:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd in that case, you will get no paths connecting sub2 to sub6.   \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nObiC.png",
          "link": "https://stackoverflow.com/questions/77396899/why-is-all-pairs-shortest-paths-not-finding-some-paths-between-subnets/77413581#77413581",
          "title": "Why is All Pairs Shortest Paths not finding some paths between subnets?"
        }
      ],
      "owner": {
        "reputation": 11,
        "user_id": 22816114,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocKPe1CbLAdQKQvw37pP4bzZb2sxMWyqTBP8Vy1iX2Hh=k-s256",
        "display_name": "Sur",
        "link": "https://stackoverflow.com/users/22816114/sur"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 45,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1699554184,
      "creation_date": 1698763633,
      "last_edit_date": 1699554184,
      "question_id": 77396899,
      "share_link": "https://stackoverflow.com/q/77396899",
      "body_markdown": "For example In my case there should be path from sub2 to sub6 and sub2 to sub8, sub2 to tgw2 etc.. But I am not getting any of these paths. \r\n\r\nMy data:\r\n\r\n```\r\nCREATE \r\n(s1:Subnet{name:&quot;sub1&quot;}),\r\n(s2:Subnet{name:&quot;sub2&quot;}),\r\n(s3:Subnet{name:&quot;sub3&quot;}),\r\n(s4:Subnet{name:&quot;sub4&quot;}),\r\n(n1:Network{name:&quot;net1&quot;}),\r\n(s1)-[:SUB_OF]-&gt; (n1),\r\n(s3)-[:SUB_OF]-&gt; (n1),\r\n(s2)-[:SUB_OF]-&gt; (n1),\r\n(s4)-[:SUB_OF]-&gt; (n1),\r\n(s5:Subnet{name:&quot;sub5&quot;}),\r\n(s6:Subnet{name:&quot;sub6&quot;}),\r\n(s7:Subnet{name:&quot;sub7&quot;}),\r\n(s8:Subnet{name:&quot;sub8&quot;}),\r\n(n2:Network{name:&quot;net2&quot;}),\r\n(t1:TGW{name:&quot;tgw1&quot;}),\r\n(t2:TGW{name:&quot;tgw2&quot;}),\r\n(s5)-[:SUB_OF]-&gt; (n2),\r\n(s6)-[:SUB_OF]-&gt; (n2),\r\n(s7)-[:SUB_OF]-&gt; (n2),\r\n(s8)-[:SUB_OF]-&gt; (n2),\r\n(s5)-[:CONNECT_TO]-&gt;(t1),\r\n(s3)-[:CONNECT_TO]-&gt;(t1),\r\n(s4)-[:CONNECT_TO]-&gt;(t2),\r\n(s8)-[:CONNECT_TO]-&gt;(t2);\r\n```\r\nmy Projection is:\r\n```\r\nMATCH (src:Subnet)-[r:SUB_OF | CONNECT_TO]-&gt;(trg:Network|TGW)\r\nRETURN gds.graph.project(\r\n  &#39;cypherGraph10&#39;,\r\n  src,\r\n  trg,\r\n  {relationshipType: type(r)},\r\n  {undirectedRelationshipTypes: [type(r)]\r\n})\r\n```\r\nI am not getting all y\\my answers after trying this:\r\n\r\n```\r\nCALL gds.allShortestPaths.stream(&#39;cypherGraph10&#39;) YIELD sourceNodeId, targetNodeId, distance\r\nWHERE gds.util.isFinite(distance) AND sourceNodeId &lt;&gt; targetNodeId\r\nWITH gds.util.asNode(sourceNodeId) AS source, gds.util.asNode(targetNodeId) AS target, distance\r\nWHERE NONE(n IN [source, target] WHERE n:Network|TGW)\r\nRETURN source.name AS source, target.name AS target, distance\r\nORDER BY distance DESC, source ASC, target ASC\r\n```",
      "link": "https://stackoverflow.com/questions/77396899/why-is-all-pairs-shortest-paths-not-finding-some-paths-between-subnets",
      "title": "Why is All Pairs Shortest Paths not finding some paths between subnets?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 17868,
            "user_id": 167745,
            "user_type": "registered",
            "accept_rate": 76,
            "profile_image": "https://i.stack.imgur.com/wBebv.jpg?s=256&g=1",
            "display_name": "Stewart",
            "link": "https://stackoverflow.com/users/167745/stewart"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698750817,
          "creation_date": 1698750817,
          "answer_id": 77395391,
          "question_id": 77395141,
          "share_link": "https://stackoverflow.com/a/77395391",
          "body_markdown": "Both queries have a `LIMIT 10`, but the second query is not qualified by any `WHERE` clause, so it can simply return you the first 10 it finds.\r\n\r\nIt just finds 10 and stops.\r\n\r\nThe first query, with the additional `WHERE`, means your returned 10 *must* have a path length &gt; 3, which means it must traverse all the shorter paths and discard them, keeping track in memory of the paths it has tried. You are only looking for the longer paths. So it is simply more computation effort. And maybe more computation effort than we have patience for waiting.\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77395141/why-does-this-neo4j-query-not-finish/77395391#77395391",
          "title": "Why does this neo4j query not finish?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698773318,
          "last_edit_date": 1698773318,
          "creation_date": 1698751612,
          "answer_id": 77395476,
          "question_id": 77395141,
          "share_link": "https://stackoverflow.com/a/77395476",
          "body_markdown": "The [answer][1] by Stewart correctly answers your question as to why the `WHERE` changes the performance. \r\n\r\nBut to actually improve the performance of your first query, move the criteria into the lower bound for the length of paths matched:\r\n```\r\nMATCH path = (start:A)-[*4..]-&gt;(end:A)\r\nWHERE start.fen = &#39;abc&#39;\r\nWITH DISTINCT path AS distinct_path\r\nRETURN distinct_path\r\nLIMIT 10\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77395391/2258090",
          "link": "https://stackoverflow.com/questions/77395141/why-does-this-neo4j-query-not-finish/77395476#77395476",
          "title": "Why does this neo4j query not finish?"
        }
      ],
      "owner": {
        "reputation": 6345,
        "user_id": 1099123,
        "user_type": "registered",
        "accept_rate": 55,
        "profile_image": "https://www.gravatar.com/avatar/41f5144169c49d431963661b24fa918d?s=256&d=identicon&r=PG",
        "display_name": "user1099123",
        "link": "https://stackoverflow.com/users/1099123/user1099123"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1698773318,
      "creation_date": 1698748502,
      "question_id": 77395141,
      "share_link": "https://stackoverflow.com/q/77395141",
      "body_markdown": "The following doesn&#39;t finish\r\n\r\n    MATCH path = (start:A)-[*]-&gt;(end:A)\r\n    WHERE start.fen = &#39;abc&#39;\r\n    WITH distinct path as distinct_path\r\n    WHERE length(distinct_path) &gt; 3\r\n    return distinct_path\r\n    LIMIT 10\r\n\r\nBut when removing the WHERE clause, it returns\r\n\r\n    MATCH path = (start:A)-[*]-&gt;(end:A)\r\n    WHERE start.fen = &#39;abc&#39;\r\n    WITH distinct path as distinct_path\r\n    return distinct_path\r\n    LIMIT 10\r\n\r\nWhat about the WHERE clause makes it not finish?",
      "link": "https://stackoverflow.com/questions/77395141/why-does-this-neo4j-query-not-finish",
      "title": "Why does this neo4j query not finish?"
    },
    {
      "tags": ["neo4j", "cypher", "graph-data-science"],
      "comments": [
        {
          "owner": {
            "reputation": 136,
            "user_id": 10768865,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Stephanie",
            "link": "https://stackoverflow.com/users/10768865/stephanie"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1702563578,
          "post_id": 77394339,
          "comment_id": 136913230,
          "link": "https://stackoverflow.com/questions/77394339/how-to-create-a-copy-of-an-existing-graph-and-perform-operations-on-it#comment136913230_77394339"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22825304,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJ5YftK1e9SbtnRKTfxc24zkgzPgGVeRqGPi1He9Qhvmw=k-s256",
        "display_name": "malcolm.O",
        "link": "https://stackoverflow.com/users/22825304/malcolm-o"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 22825304,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJ5YftK1e9SbtnRKTfxc24zkgzPgGVeRqGPi1He9Qhvmw=k-s256",
        "display_name": "malcolm.O",
        "link": "https://stackoverflow.com/users/22825304/malcolm-o"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698741325,
      "creation_date": 1698741126,
      "last_edit_date": 1698741325,
      "question_id": 77394339,
      "share_link": "https://stackoverflow.com/q/77394339",
      "body_markdown": "I&#39;m new to neo4j and cypher.\r\n\r\nMy main question is: How to create a copy of an existing graph and perform operations on it?\r\n\r\nI have a huge graph that requires modifications. I do not want to mess up the original graph and would like to know how to create a copy of it to test my algorithms on the copy first, and then apply it to the real graph. Maybe there are other alternatives to &#39;copy&#39;.\r\n\r\nI also have a few other supportive questions:\r\n1. What is an in-memory graph and its usage? \r\n\r\n   If I have a graph populated with nodes `CREATE (:Node {name: &#39;Node 1&#39;})` will it be an in-memory graph?\r\n2. What is the usage of `graph.project` from the Graph Data Science library? I assume it is used to create sub-graphs. But then can I use `project` to create a copy of a graph?\r\n\r\nI was going through neo4j docs, but could not understand the functionality.",
      "link": "https://stackoverflow.com/questions/77394339/how-to-create-a-copy-of-an-existing-graph-and-perform-operations-on-it",
      "title": "How to create a copy of an existing graph and perform operations on it?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 19571,
            "user_id": 16582,
            "user_type": "registered",
            "accept_rate": 67,
            "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG",
            "display_name": "ravenspoint",
            "link": "https://stackoverflow.com/users/16582/ravenspoint"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698683852,
          "post_id": 77390261,
          "comment_id": 136433550,
          "link": "https://stackoverflow.com/questions/77390261/how-to-graph-relationships-between-movies-and-actors-that-they-performed-in-com#comment136433550_77390261"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698684079,
          "creation_date": 1698684079,
          "answer_id": 77390440,
          "question_id": 77390261,
          "share_link": "https://stackoverflow.com/a/77390440",
          "body_markdown": "Since your query did not return any nodes, relationships, or paths, no *graph visualization* is possible.\r\n\r\nFor example, if you want the Neo4j Browser to display the `a` nodes in a graph visualization, your `RETURN` clause will also have to include `a` as a term (not just `a.name`, which is only a string property and not the entire node). ",
          "link": "https://stackoverflow.com/questions/77390261/how-to-graph-relationships-between-movies-and-actors-that-they-performed-in-com/77390440#77390440",
          "title": "How to graph relationships between movies and actors (that they performed in common) in Neo4J movies database?"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 20324642,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/4f67d7aefbf897789708d8ab5899e992?s=256&d=identicon&r=PG",
        "display_name": "Tadeo",
        "link": "https://stackoverflow.com/users/20324642/tadeo"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 51,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698684079,
      "creation_date": 1698682380,
      "last_edit_date": 1698683726,
      "question_id": 77390261,
      "share_link": "https://stackoverflow.com/q/77390261",
      "body_markdown": "I have a custom CSV with movies data with the following strucuture:\r\n\r\n    id,title,media_type,original_language,actor\r\n    1002185.0,A Million Miles Away,movie,en,Emma Fassler\r\n    447332.0,A Quiet Place,movie,en,Noah Jupe\r\n\r\nand i want to graph in neo4j the actors (names) that share one or more movies (title) between each other, the code where i load the data:\r\n\r\n    LOAD CSV WITH HEADERS FROM &quot;file:///movies_neo_graph/part-00000-c5c5507e-5501-4adb-87fc-38be1d908076-c000.csv&quot; AS row\r\n    CREATE (m:Movie)\r\n    SET m = row,\r\n    m.id = toInteger(row.id),\r\n    m.title = toString(row.title),\r\n    m.language = toString(row.original_language);\r\n    \r\n    LOAD CSV WITH HEADERS FROM &quot;file:///movies_neo_graph/part-00000-c5c5507e-5501-4adb-87fc-38be1d908076-c000.csv&quot; AS row\r\n    CREATE (a:Actor)\r\n    SET a = row,\r\n    a.name = toString(row.actor),\r\n    a.movie_id = toInteger(row.id);\r\n\r\nThen I setup the relationship between nodes Movie and Actor:\r\n\r\n    MATCH (a:Actor),(m:Movie)\r\n    WHERE a.movie_id = m.id\r\n    CREATE (a)-[:ACTED_IN]-&gt;(m);\r\n\r\nThis is my first time in Neo4J and i don&#39;t know how to perform the query, i tried with\r\n\r\n    MATCH (a:Actor)-[:ACTED_IN]-&gt;(m:Movie) \r\n    RETURN a.name AS actor, COLLECT(DISTINCT m.title) AS movies_acted, COUNT(m.title) AS movies_cnt\r\n    ORDER BY movies_cnt DESC\r\n    LIMIT 50;\r\n\r\nAnd the result is a table but not a graph:\r\n\r\n![Neo4J query table][1]\r\n\r\n  [1]: https://i.stack.imgur.com/Sa20k.png\r\n\r\nAny ideas? really appreciate the help",
      "link": "https://stackoverflow.com/questions/77390261/how-to-graph-relationships-between-movies-and-actors-that-they-performed-in-com",
      "title": "How to graph relationships between movies and actors (that they performed in common) in Neo4J movies database?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698691025,
              "post_id": 77390382,
              "comment_id": 136434866,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136434866_77390382"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698691186,
              "post_id": 77390382,
              "comment_id": 136434895,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136434895_77390382"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698693585,
              "post_id": 77390382,
              "comment_id": 136435319,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136435319_77390382"
            },
            {
              "owner": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698699544,
              "post_id": 77390382,
              "comment_id": 136436174,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136436174_77390382"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 6333,
                "user_id": 4756173,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
                "display_name": "Philippe Fanaro",
                "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698699664,
              "post_id": 77390382,
              "comment_id": 136436190,
              "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#comment136436190_77390382"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 6333,
            "user_id": 4756173,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
            "display_name": "Philippe Fanaro",
            "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1699369707,
          "last_edit_date": 1699369707,
          "creation_date": 1698683528,
          "answer_id": 77390382,
          "question_id": 77389501,
          "share_link": "https://stackoverflow.com/a/77390382",
          "body_markdown": "You can use the APOC procedure [`apoc.do.when`](https://neo4j.com/labs/apoc/4.2/overview/apoc.do/apoc.do.when/) to do conditional if-then-else writes. There is also a more general procedure, [`apoc.do.case`](https://neo4j.com/labs/apoc/4.2/overview/apoc.do/apoc.do.case/) for more complex conditional writes.\r\n\r\nFor example:\r\n\r\n    CREATE (u:User)-[v:VOTES_ON {points: $points}]-&gt;(i:Item)\r\n    WITH u, v, i\r\n    CALL apoc.do.when(\r\n      $points &gt; 0,\r\n      &#39;SET i.points_up = COALESCE(i.points_up, 0) + points RETURN i&#39;,\r\n      &#39;SET i.points_down = COALESCE(i.points_down, 0) + points RETURN i&#39;,\r\n      { i: i, points: $points }\r\n    )\r\n    YIELD value AS _\r\n    SET i.points = COALESCE(i.points, 0) + $points\r\n    RETURN u, v, i\r\n\r\n(Note the `RETURN i` statement in the `apoc.do.when` call, so that we get back the value and then return it later on.)",
          "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter/77390382#77390382",
          "title": "How to Conditionally SET in Cypher depending on parameter?"
        }
      ],
      "owner": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "last_editor": {
        "reputation": 6333,
        "user_id": 4756173,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0e50f7e8bb3963d1dc749e278c3d8d33?s=256&d=identicon&r=PG",
        "display_name": "Philippe Fanaro",
        "link": "https://stackoverflow.com/users/4756173/philippe-fanaro"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77390382,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1699369707,
      "creation_date": 1698676214,
      "last_edit_date": 1698676684,
      "question_id": 77389501,
      "share_link": "https://stackoverflow.com/q/77389501",
      "body_markdown": "When voting on a node, I would like to register the points related to the vote. However, I would also like to keep track, in separate properties, of the amount of negative and positive points.\r\n\r\nHere&#39;s a sketch of what I&#39;m trying to achieve, even though it doesn&#39;t work:\r\n\r\n```cypher\r\nCREATE   (u:User)\r\n        -[v:VOTES_ON{ points: $points }]\r\n       -&gt;(i:Item)\r\n\r\nCASE\r\n  WHEN $points &gt; 0 SET i.points_up = COALESCE(i.points_up, 0) + $points\r\n  ELSE SET i.points_down = COALESCE(i.points_down, 0) + $points\r\n\r\nSET i.points = COALESCE(i.points, 0) + $points\r\n       \r\nRETURN u, v, i\r\n```\r\n\r\n(I&#39;m using Neo4j&#39;s JavaScript&#39;s driver, that&#39;s the reason for `$points`.)\r\n\r\nIs there a way of doing this in Cypher?",
      "link": "https://stackoverflow.com/questions/77389501/how-to-conditionally-set-in-cypher-depending-on-parameter",
      "title": "How to Conditionally SET in Cypher depending on parameter?"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "owner": {
        "reputation": 1,
        "user_id": 22238471,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/839db5c8673b76e9c687ecb9fdfcc0da?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "mona",
        "link": "https://stackoverflow.com/users/22238471/mona"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 31,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698680500,
      "creation_date": 1698648542,
      "last_edit_date": 1698680500,
      "question_id": 77386634,
      "share_link": "https://stackoverflow.com/q/77386634",
      "body_markdown": "I have deployed Neo4j version 5.12.0 on Kubernetes using helm charts in an EC2 server. In neo4j desktop (V 1.5.9) I have created a remote database connection. How to enable all apoc related plugins in the YAML file?\r\n\r\nWhen I run a particular Cypher query I&#39;m facing this error:\r\n\r\n&gt; Something went wrong: Neo4jError: Unknown function\r\n&gt; &#39;apoc.map.removeKey&#39; (line 9, column 59 (offset: 490)) [0] &quot;     \r\n&gt; attributes: CASE WHEN ecuProps IS NULL THEN {} ELSE\r\n&gt; apoc.map.removeKey(properties(ecuProps), &#39;name&#39;) END&quot;",
      "link": "https://stackoverflow.com/questions/77386634/how-to-enable-all-apoc-related-plugins-in-a-remote-neo4j-database-connection",
      "title": "How to enable all apoc related plugins in a remote Neo4j database connection?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698681881,
          "creation_date": 1698681881,
          "answer_id": 77390212,
          "question_id": 77385680,
          "share_link": "https://stackoverflow.com/a/77390212",
          "body_markdown": "In a `WITH` or `RETURN` clause, an [aggregating function](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/) (like [COLLECT](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/#functions-collect)) aggregates over the [grouping keys](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/#grouping-keys) (i.e., non-aggregating expressions) in the same clause.\r\n\r\nTherefore:\r\n\r\n 1. In `WITH p1, p2, interest, COUNT(interest) AS conto`:\r\n    - `conto` is the number of `interest` nodes associated with each unique set of `p1`, `p2`, and `interest` values.\r\n 2. In `RETURN p1.name, p2.name, COUNT(interest), conto, COLLECT(interest.name) AS interessi`:\r\n    - `COUNT(interest)` is the number of `interest` nodes associated with each unique set of `p1.name`, `p2.name`, and `conto` values.\r\n    - `interessi` is a collection of `interest.name` values associated with each unique set of `p1.name`, `p2.name`, and `conto` values.\r\n\r\nIn summary, since #1 and #2 have different grouping keys, the `COUNT(interest`) values are different as well.\r\n ",
          "link": "https://stackoverflow.com/questions/77385680/cypher-queries-misuse-of-the-with-clause/77390212#77390212",
          "title": "Cypher queries: misuse of the with clause"
        }
      ],
      "owner": {
        "reputation": 259,
        "user_id": 12743491,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/1420615ac458d23777a7d31172c467db?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Jenny",
        "link": "https://stackoverflow.com/users/12743491/jenny"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698681881,
      "creation_date": 1698625736,
      "last_edit_date": 1698680613,
      "question_id": 77385680,
      "share_link": "https://stackoverflow.com/q/77385680",
      "body_markdown": "I am now starting approaching Cypher and I have probably a trivial question; so i provide an example query to make you understand what i mean:\r\n\r\n    match (p1:Person)-[:works_on]-&gt;(project1:Project), (p2:Person)-[:works_on]-&gt;(project2:Project), (p1)-[:interested_in]-&gt;(interest:Skill)&lt;-[:interested_in]-(p2)\r\n    where id(p1)&gt;id(p2) \r\n    with p1,p2, interest, count(interest) as conto\r\n    return p1.name, p2.name, count(interest) ,conto,  collect(interest.name) as interessi\r\n\r\nresults:\r\n\r\n    ╒════════╤═════════╤═══════════════╤═════╤══════════════════════════╕\r\n    │p1.name │p2.name  │count(interest)│conto│interessi                 │\r\n    ╞════════╪═════════╪═══════════════╪═════╪══════════════════════════╡\r\n    │&quot;Sarah&quot; │&quot;Charlie&quot;│1              │2    │[&quot;DBMS&quot;]                │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Sarah&quot; │&quot;Ben&quot;    │2              │2    │[&quot;DBMS&quot;, &quot;TRAVEL&quot;]        │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Ben&quot;   │&quot;Charlie&quot;│1              │1    │[&quot;DBMS&quot;]                │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Arnold&quot;│&quot;Sarah&quot;  │3              │2    │[&quot;TRAVEL&quot;, &quot;JAVA&quot;, &quot;DBMS&quot;]│\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Arnold&quot;│&quot;Ben&quot;    │2              │1    │[&quot;TRAVEL&quot;, &quot;DBMS&quot;]        │\r\n    ├────────┼─────────┼───────────────┼─────┼──────────────────────────┤\r\n    │&quot;Arnold&quot;│&quot;Charlie&quot;│1              │1    │[&quot;DBMSs&quot;]                │\r\n\r\nThe thing I&#39;d like to understand is why the 2 columns `count(interest)` and `conto` differ. Why? what is the latter actually counting?",
      "link": "https://stackoverflow.com/questions/77385680/cypher-queries-misuse-of-the-with-clause",
      "title": "Cypher queries: misuse of the with clause"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698432045,
          "post_id": 77376071,
          "comment_id": 136409654,
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another#comment136409654_77376071"
        },
        {
          "owner": {
            "reputation": 3996,
            "user_id": 3897214,
            "user_type": "registered",
            "accept_rate": 56,
            "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Antony",
            "link": "https://stackoverflow.com/users/3897214/antony"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698432139,
          "post_id": 77376071,
          "comment_id": 136409672,
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another#comment136409672_77376071"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698434143,
          "post_id": 77376071,
          "comment_id": 136409975,
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another#comment136409975_77376071"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3996,
                "user_id": 3897214,
                "user_type": "registered",
                "accept_rate": 56,
                "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Antony",
                "link": "https://stackoverflow.com/users/3897214/antony"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698475966,
              "post_id": 77376560,
              "comment_id": 136413073,
              "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376560#comment136413073_77376560"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698434616,
          "last_edit_date": 1698434616,
          "creation_date": 1698433887,
          "answer_id": 77376560,
          "question_id": 77376071,
          "share_link": "https://stackoverflow.com/a/77376560",
          "body_markdown": "Your main problem is that relationships always have 1 and only 1 type. You need to reconsider how to carry out your use case.\r\n\r\nI also have a lot of observations.\r\n\r\n 1. `X` and `Y` are not defined, so queries 1 and 2 would fail anyway.\r\n 2. You are incorrectly using the term &quot;label&quot;, which only applies to nodes (for example, `c` has the label `Companies`). Every relationship has **1 and only 1** &quot;type&quot;.\r\n 3. The `SET` clause syntaxes you used are only for copying *properties*, not node labels or relationship types. In fact, you cannot change a relationship instance&#39;s type, so there is no way to do that in Cypher.\r\n 4. Your third query is missing a `SET` clause, which I assume was accidentally omitted from your question.\r\n 5. For better performance, filtering should always be done as soon as possible (like, right after the relevant `MATCH`).\r\n    - Option 1: move the `c.CompanyID = 477` test immediately after `MATCH\r\n    (c:Companies)-[r:Rel_Office]-(o:Companies)`.\r\n    - Option 2, combine the 2 `MATCH` clauses, like this: `MATCH (c:Companies)-[r:Rel_Office]-(o:Companies), (n:Companies)`\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376560#77376560",
          "title": "Neo4j/cypher - copy relationship labels to another"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698434769,
              "post_id": 77376601,
              "comment_id": 136410067,
              "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376601#comment136410067_77376601"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698434356,
          "creation_date": 1698434356,
          "answer_id": 77376601,
          "question_id": 77376071,
          "share_link": "https://stackoverflow.com/a/77376601",
          "body_markdown": "Your question can be treated as &quot;copy or duplicate all relationships from : Rel_Office into a new one called : Props.  Thus below query will work.\r\n\r\n    MATCH (c:Companies)-[r:Rel_Office]-(o:Companies)\r\n    MERGE (c)-[rn:Props]-(o)\r\n    SET rn = properties(r)\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ziald.png",
          "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another/77376601#77376601",
          "title": "Neo4j/cypher - copy relationship labels to another"
        }
      ],
      "owner": {
        "reputation": 3996,
        "user_id": 3897214,
        "user_type": "registered",
        "accept_rate": 56,
        "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Antony",
        "link": "https://stackoverflow.com/users/3897214/antony"
      },
      "last_editor": {
        "reputation": 3996,
        "user_id": 3897214,
        "user_type": "registered",
        "accept_rate": 56,
        "profile_image": "https://www.gravatar.com/avatar/3f029f1fe1b13872be86f5694bd05c40?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Antony",
        "link": "https://stackoverflow.com/users/3897214/antony"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 38,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1698476046,
      "creation_date": 1698428006,
      "last_edit_date": 1698476046,
      "question_id": 77376071,
      "share_link": "https://stackoverflow.com/q/77376071",
      "body_markdown": "I have done a number of different queries but am trying to copy *all* the relationships between my two nodes `r` to `rn` (where there is a Rel_Office label) but for some reason only the final query here works. I&#39;m using Neo4j Community 5.13.0.\r\n\r\n*Doesn&#39;t work*\r\n\r\n\tMATCH (c:Companies)-[r:Rel_Office]-(o:Companies) \r\n\tMATCH (n:Companies) WHERE c.CompanyID = X AND n.CompanyID = Y\r\n\tMERGE (n)-[rn:Props]-(o) \r\n\tSET rn = properties(r)\r\n\r\n*Doesn&#39;t work*\r\n\r\n\tMATCH (c:Companies)-[r:Rel_Office]-(o:Companies) \r\n\tMATCH (n:Companies) WHERE c.CompanyID = X AND n.CompanyID = Y\r\n\tMERGE (n)-[rn:Props]-(o) \r\n\tSET rn = r\r\n\r\n*Does work but limited to one label!*\r\n\r\n\tMATCH (c:Companies)-[r:Rel_Office]-(o:Companies) \r\n\tMATCH (n:Companies) WHERE c.CompanyID = 477 AND n.CompanyID = 9045\r\n\tMERGE (n)-[rn:Rel_Office]-(o) \r\n\r\n\r\nI suspect its something obvious, but please can someone explain how this should be working to do a full copy of all the labels/properties?",
      "link": "https://stackoverflow.com/questions/77376071/neo4j-cypher-copy-relationship-labels-to-another",
      "title": "Neo4j/cypher - copy relationship labels to another"
    },
    {
      "tags": ["neo4j", "cypher", "csv-import"],
      "comments": [
        {
          "owner": {
            "reputation": 1,
            "user_id": -1,
            "user_type": "moderator",
            "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
            "display_name": "Community",
            "link": "https://stackoverflow.com/users/-1/community"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1698427227,
          "post_id": 77374200,
          "comment_id": 136409014,
          "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j#comment136409014_77374200"
        },
        {
          "owner": {
            "reputation": 3,
            "user_id": 22695083,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIbz5v9WUcVtiZjc3jj_yGeXR4j-EYL2oP06CUAJCaq0a4=k-s256",
            "display_name": "Santosh Jamale",
            "link": "https://stackoverflow.com/users/22695083/santosh-jamale"
          },
          "reply_to_user": {
            "reputation": 1,
            "user_id": -1,
            "user_type": "moderator",
            "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
            "display_name": "Community",
            "link": "https://stackoverflow.com/users/-1/community"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698577800,
          "post_id": 77374200,
          "comment_id": 136420928,
          "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j#comment136420928_77374200"
        },
        {
          "owner": {
            "reputation": 136,
            "user_id": 10768865,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/b2007b392a9d090f09eee71a8081dc9b?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Stephanie",
            "link": "https://stackoverflow.com/users/10768865/stephanie"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1706106451,
          "post_id": 77374200,
          "comment_id": 137286438,
          "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j#comment137286438_77374200"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22695083,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIbz5v9WUcVtiZjc3jj_yGeXR4j-EYL2oP06CUAJCaq0a4=k-s256",
        "display_name": "Santosh Jamale",
        "link": "https://stackoverflow.com/users/22695083/santosh-jamale"
      },
      "comment_count": 3,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698410150,
      "creation_date": 1698410150,
      "question_id": 77374200,
      "share_link": "https://stackoverflow.com/q/77374200",
      "body_markdown": "I am facing an issue with importing multiple values for a property of node from csv file.\r\nFor example we have below values in csv file,\r\n\r\n| CarDriver   | Passengers |\r\n| -----       | -------    |\r\n| Ganesh      | Rajesh     |\r\n| Ganesh      | Sunil      |\r\n| Ganesh      | Mangesh    |\r\n| Suresh      | Mukesh     |\r\n| Suresh      | Nitesh     |\r\n\r\n\r\nCan anyone please suggest some solution for this issue?\r\n\r\nThanks,\r\nSantosh\r\n\r\nI tried to modify my query as per below two solutions from stackoverflow but it did not work,\r\n\r\nIt gave me below error, &quot;Cannot merge the following node because of null property value for &#39;id&#39;: (:Person {id: null})&quot;.",
      "link": "https://stackoverflow.com/questions/77374200/how-to-import-multiple-values-for-a-property-from-csv-file-in-neo4j",
      "title": "How to import multiple values for a property from csv file in Neo4j"
    },
    {
      "tags": ["neo4j", "cypher", "spring-data-neo4j"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698338575,
          "last_edit_date": 1698338575,
          "creation_date": 1698262486,
          "answer_id": 77362433,
          "question_id": 77359271,
          "share_link": "https://stackoverflow.com/a/77362433",
          "body_markdown": "Since your original query returns a path, you can try using [apoc.path.expand](https://neo4j.com/docs/apoc/current/graph-querying/expand-paths/) instead of `apoc.path.subgraphAll`:\r\n\r\n    @Query(&quot;&quot;&quot;\r\n       MATCH (ord:Order {id: $orderId})\r\n       CALL apoc.path.expand(ord, null, null, 0, -1) YIELD path\r\n       RETURN path\r\n    &quot;&quot;&quot;)\r\n    List&lt;Order&gt; getOrders(@Param(&quot;orderId&quot;) Long orderId);\r\n\r\n*NOTE: The above specifies a lower bound of `0`, so a path containing just `ord` would be returned if that node has no relationships, which I think is maybe what you intended. But this behavior is different than your original query&#39;s, which used a (defaulted) lower bound of 1 and would return nothing if `ord` has no relationships. If the latter is what you intended, change my `0` to `1`.*\r\n\r\nAlternatively, if acceptable, a simple workaround would be to limit the length of the variable-length path search. For example, to limit the search to at most 10 hops, you could replace `[*]` with `[*..10]` (or, to use `0` lower bound: `[*0..10]`) in your original query. With my query, use `10` instead of `-1`.",
          "link": "https://stackoverflow.com/questions/77359271/running-apoc-subgraphall-in-spring-data-neo4j/77362433#77362433",
          "title": "Running APOC subGraphAll() in Spring Data Neo4j"
        }
      ],
      "owner": {
        "reputation": 431,
        "user_id": 7316385,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://www.gravatar.com/avatar/1f73fa9ad138c2a629498256c2d203a8?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Can Cinar",
        "link": "https://stackoverflow.com/users/7316385/can-cinar"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 25,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1698338575,
      "creation_date": 1698235120,
      "question_id": 77359271,
      "share_link": "https://stackoverflow.com/q/77359271",
      "body_markdown": "I am using Spring Data Neo4j, and trying to execute the following code:\r\n\r\n        @Query(&quot;&quot;&quot;\r\n             MATCH (orders:Order {id:1})\r\n             CALL apoc.path.subgraphAll(orders, {})\r\n             YIELD nodes, relationships\r\n             RETURN  nodes, relationships\r\n            &quot;&quot;&quot;)\r\n    List&lt;Order&gt; getOrders(@Param(&quot;orderId&quot;) Long orderId);\r\n\r\nHowever, it returns only one Order with null fields instead of two with all fields populated.\r\n\r\nBefore, I was using the following code:\r\n\r\n          @Query(&quot;&quot;&quot;\r\n             MATCH path = (orders:Order {id: $orderId})-[*]-(commons)\r\n             RETURN path\r\n            &quot;&quot;&quot;)\r\n    List&lt;Order&gt; getOrders(@Param(&quot;orderId&quot;) Long orderId);\r\n\r\nHowever, it becomes prolonged after adding 10-20 nodes... So I either need to improve this query or somehow make Spring work with APOC procedures.\r\n\r\nI really appreciate it if you could helm me on this matter.\r\n\r\nThank you in advance!\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77359271/running-apoc-subgraphall-in-spring-data-neo4j",
      "title": "Running APOC subGraphAll() in Spring Data Neo4j"
    },
    {
      "tags": ["cypher", "memgraphdb", "opencypher", "memgraph"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698218564,
          "creation_date": 1698218564,
          "answer_id": 77357354,
          "question_id": 77357033,
          "share_link": "https://stackoverflow.com/a/77357354",
          "body_markdown": "I don&#39;t really know Memgraph, but in Neo4j I would solve it like this:\r\n\r\n    UNWIND [&#39;London&#39;, &#39;Paris&#39;, &#39;Berlin&#39;, &#39;Rome&#39;] AS capital\r\n    OPTIONAL MATCH (n:Captial {name: capital})\r\n    WITH n, capital WHERE n IS NULL\r\n    RETURN capital",
          "link": "https://stackoverflow.com/questions/77357033/how-can-i-list-only-nodes-that-were-not-found-using-cypher/77357354#77357354",
          "title": "How can I list only nodes that were not found using Cypher?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 357,
            "user_id": 19994481,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/1cd5db8ba474a9cb863e931b5d3eea69?s=256&d=identicon&r=PG",
            "display_name": "MPesi",
            "link": "https://stackoverflow.com/users/19994481/mpesi"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1698223429,
          "creation_date": 1698223429,
          "answer_id": 77357928,
          "question_id": 77357033,
          "share_link": "https://stackoverflow.com/a/77357928",
          "body_markdown": "In Memgraph, it could be solved similarly:\r\n\r\n    WITH [&#39;London&#39;, &#39;Paris&#39;, &#39;Berlin&#39;, &#39;Rome&#39;] AS capitals\r\n    UNWIND capitals as capital\r\n    OPTIONAL MATCH (c:Capital {name: capital})\r\n    WITH capital, c\r\n    WHERE c IS NULL\r\n    RETURN capital\r\n\r\nAfter you define your list and unwind it to get each element, you can use `OPTIONAL MATCH` (we&#39;re not using `MATCH` since `OPTIONAL` allows null) to match each item of the list to the `name` property of nodes. If there are no such nodes we return that capital as an output.",
          "link": "https://stackoverflow.com/questions/77357033/how-can-i-list-only-nodes-that-were-not-found-using-cypher/77357928#77357928",
          "title": "How can I list only nodes that were not found using Cypher?"
        }
      ],
      "owner": {
        "reputation": 103,
        "user_id": 21507344,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/IGHRx.png?s=256&g=1",
        "display_name": "TenTonBonton",
        "link": "https://stackoverflow.com/users/21507344/tentonbonton"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 35,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 2,
      "accepted_answer_id": 77357928,
      "answer_count": 2,
      "score": 2,
      "last_activity_date": 1698223429,
      "creation_date": 1698215074,
      "question_id": 77357033,
      "share_link": "https://stackoverflow.com/q/77357033",
      "body_markdown": "I have a list of capital cities. I want to see if I have all of them. How can I see which cities I don&#39;t have inside? My query looks like this at the moment:\r\n\r\n    OPTIONAL MATCH (n:Captial {name: &#39;London&#39;})\r\n    RETURN n.name\r\n    UNION\r\n    OPTIONAL MATCH (n:Captial {name: &#39;Paris&#39;})\r\n    RETURN n.name\r\n    UNION\r\n    OPTIONAL MATCH (n:Captial {name: &#39;Berlin&#39;})\r\n    RETURN n.name\r\n    UNION\r\n    OPTIONAL MATCH (n:Captial {name: &#39;Rome&#39;})\r\n    RETURN n.name\r\n\r\nThis doesn&#39;t seem elegant and on top of everything as a result I get:\r\n\r\n    London\r\n    Paris\r\n    Berlin\r\n    null\r\n\r\nTo me it means that I don&#39;t have Rome in my database. But can the output be `Rome` only, and not list off all cities that are there and `null` for one that isn&#39;t there?\r\n",
      "link": "https://stackoverflow.com/questions/77357033/how-can-i-list-only-nodes-that-were-not-found-using-cypher",
      "title": "How can I list only nodes that were not found using Cypher?"
    },
    {
      "tags": ["python", "neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698170323,
          "post_id": 77353888,
          "comment_id": 136370372,
          "link": "https://stackoverflow.com/questions/77353888/cannot-connect-to-neo4j-in-python-to-push-data#comment136370372_77353888"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 5595816,
            "user_type": "registered",
            "profile_image": "https://lh5.googleusercontent.com/-Sm1ZDFRC7pQ/AAAAAAAAAAI/AAAAAAAAAIo/wv-tNaaDmDU/photo.jpg?sz=256",
            "display_name": "Samuel Fran&#231;a",
            "link": "https://stackoverflow.com/users/5595816/samuel-fran%c3%a7a"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698347812,
          "creation_date": 1698347812,
          "answer_id": 77369794,
          "question_id": 77353888,
          "share_link": "https://stackoverflow.com/a/77369794",
          "body_markdown": "Try to use &quot;neo4j+ssc&quot; on the uri like this \r\nURI = &quot;neo4j+ssc://838f9df7.databases.neo4j.io&quot;",
          "link": "https://stackoverflow.com/questions/77353888/cannot-connect-to-neo4j-in-python-to-push-data/77369794#77369794",
          "title": "Cannot connect to Neo4j in Python to push data"
        }
      ],
      "owner": {
        "reputation": 29,
        "user_id": 18566978,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjAj7isO-roI4iM4ZBFQYV91O-r1pLNJht_JBB6rg=k-s256",
        "display_name": "Benjamin Hammond",
        "link": "https://stackoverflow.com/users/18566978/benjamin-hammond"
      },
      "last_editor": {
        "reputation": 7046,
        "user_id": 14529779,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/Gx3Jf.jpg?s=256&g=1",
        "display_name": "XM01 - stands with Palestine",
        "link": "https://stackoverflow.com/users/14529779/xm01-stands-with-palestine"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 86,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1698347812,
      "creation_date": 1698165150,
      "last_edit_date": 1698261644,
      "question_id": 77353888,
      "share_link": "https://stackoverflow.com/q/77353888",
      "body_markdown": "I am going slightly crazy trying to understand why I can&#39;t push data to my Neo4j database using CYPHER in Python.\r\n\r\nI am running basic testing code just to see if I can push data. Here is my testing code:\r\n\r\n```py\r\nimport logging\r\nfrom neo4j import GraphDatabase\r\n\r\n# Set up logging\r\nlogging.basicConfig(level=logging.DEBUG)  # Change the level to ERROR, WARNING, INFO, or DEBUG as needed\r\nlog = logging.getLogger(&quot;neo4j&quot;)\r\n\r\nclass Neo4jService:\r\n    def __init__(self, uri, user, password):\r\n        self._driver = GraphDatabase.driver(uri, auth=(user, password))\r\n        \r\n    def close(self):\r\n        log.debug(&quot;Closing driver.&quot;)\r\n        self._driver.close()\r\n        \r\n    def run_queries(self, queries):\r\n        log.debug(&quot;Running queries.&quot;)\r\n        with self._driver.session() as session:\r\n            for query in queries:\r\n                log.debug(f&quot;Executing query: {query}&quot;)\r\n                session.run(query)\r\n\r\ntry:\r\n    # Initialize the Neo4j service\r\n    URI = &quot;neo4j+s://838f9df7.databases.neo4j.io&quot;\r\n    AUTH = (&quot;neo4j&quot;, &quot;my_password&quot;)\r\n\r\n    log.info(&quot;Initializing driver.&quot;)\r\n    with GraphDatabase.driver(URI, auth=AUTH) as driver:\r\n        log.info(&quot;Verifying connectivity.&quot;)\r\n        driver.verify_connectivity()\r\n\r\n    summary = driver.execute_query(\r\n        &quot;MERGE (:Person {name: $name})&quot;,\r\n        name=&quot;Alice&quot;,\r\n        database_=&quot;neo4j&quot;,\r\n    ).summary\r\n\r\n    log.info(f&quot;Created {summary.counters.nodes_created} nodes in {summary.result_available_after} ms.&quot;)\r\n\r\nexcept Exception as e:\r\n    log.error(&quot;An error occurred:&quot;, exc_info=True)\r\n```\r\n\r\nWhatever I seem to do, I get an error like this:\r\n\r\n```\r\nneo4j.exceptions.ServiceUnavailable: Unable to retrieve routing information\r\n```\r\n\r\nI have tried manually telling the Neo4j to trust the certificate by saving the certificate as a file and including a trust setting in my code. But this didn&#39;t work. I have tried swithcing from neo4j+s to bolt or just neo4j. I have updated neo4j and python. I feel like I have been debugging for about two days. Whatever I do, nothing happens in my Neo4j database. Help appreciated!",
      "link": "https://stackoverflow.com/questions/77353888/cannot-connect-to-neo4j-in-python-to-push-data",
      "title": "Cannot connect to Neo4j in Python to push data"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698130399,
              "post_id": 77347595,
              "comment_id": 136362676,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#comment136362676_77347595"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698130432,
              "post_id": 77347595,
              "comment_id": 136362679,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#comment136362679_77347595"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698163528,
              "post_id": 77347595,
              "comment_id": 136369182,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#comment136369182_77347595"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698163831,
          "last_edit_date": 1698163831,
          "creation_date": 1698086458,
          "answer_id": 77347595,
          "question_id": 77347515,
          "share_link": "https://stackoverflow.com/a/77347595",
          "body_markdown": "It appears that there is no sequence of relationships from `parent` to `gap` that passes through a `FACT` relationship.\r\n\r\nIf that is true, then your query is working as expected and should not find any `FACT` relationships.\r\n\r\n#### Answer 1\r\n\r\nHere is one way to display each path `p` and a list of the &quot;factoids&quot; for the nodes in that path.\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    UNWIND NODES(p) AS n\r\n    RETURN p, REDUCE(\r\n      s = [], t IN COLLECT({n: n, facts: [(n)&lt;-[r:FACT]-(f) | {rel: f, fact: f}]}) |\r\n      CASE WHEN SIZE(t.facts) &gt; 0 THEN s + t ELSE s END) AS factoids\r\n\r\nA &quot;factoid&quot; is a map with these properties:\r\n  - `n` is a node in the path that has an incoming `FACT` relationship (even if that relationship is not on the path)\r\n  - `rel` is the `FACT` relationship\r\n  - `fact` is the source node of that `FACT` relationship\r\n\r\n#### Answer 2\r\n\r\n@Graphileon&#39;s fine answer is more compact, but its result contains a superfluous empty list for every path node that has no incoming `FACT` relationship.\r\n\r\nThis version of his answer uses [apoc.coll.removeAll](https://neo4j.com/docs/apoc/current/overview/apoc.coll/apoc.coll.removeAll/) to remove the empty lists:\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    RETURN p,\r\n           apoc.coll.removeAll(\r\n             [node IN NODES(p) | [fp = (node)&lt;-[:FACT]-(f) | fp ]],\r\n             [[]]) AS factPaths\r\n\r\nUsing`apoc.coll.removeAll` to remove empty lists is for convenience and readability, but not necessary. For example, we could use `REDUCE` instead, as in Answer #1.",
          "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77347595#77347595",
          "title": "Displaying hidden nodes in Neo4j"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698108441,
              "post_id": 77348149,
              "comment_id": 136360856,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136360856_77348149"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698130357,
              "post_id": 77348149,
              "comment_id": 136362673,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136362673_77348149"
            },
            {
              "owner": {
                "reputation": 5335,
                "user_id": 1734996,
                "user_type": "registered",
                "accept_rate": 85,
                "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
                "display_name": "Graphileon",
                "link": "https://stackoverflow.com/users/1734996/graphileon"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698132307,
              "post_id": 77348149,
              "comment_id": 136363012,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136363012_77348149"
            },
            {
              "owner": {
                "reputation": 1261,
                "user_id": 7497127,
                "user_type": "registered",
                "accept_rate": 67,
                "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
                "display_name": "JAMSHAID",
                "link": "https://stackoverflow.com/users/7497127/jamshaid"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698145486,
              "post_id": 77348149,
              "comment_id": 136365337,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136365337_77348149"
            },
            {
              "owner": {
                "reputation": 5335,
                "user_id": 1734996,
                "user_type": "registered",
                "accept_rate": 85,
                "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
                "display_name": "Graphileon",
                "link": "https://stackoverflow.com/users/1734996/graphileon"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698145673,
              "post_id": 77348149,
              "comment_id": 136365362,
              "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#comment136365362_77348149"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "last_editor": {
            "reputation": 5335,
            "user_id": 1734996,
            "user_type": "registered",
            "accept_rate": 85,
            "profile_image": "https://i.stack.imgur.com/MaqL4.png?s=256&g=1",
            "display_name": "Graphileon",
            "link": "https://stackoverflow.com/users/1734996/graphileon"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698132200,
          "last_edit_date": 1698132200,
          "creation_date": 1698093061,
          "answer_id": 77348149,
          "question_id": 77347515,
          "share_link": "https://stackoverflow.com/a/77348149",
          "body_markdown": "I would go for something like this:\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    RETURN p,\r\n           [node IN nodes(p) |\r\n    \t       [ factPath = (node)&lt;-[:FACT]-(f) | factPath ]\r\n    \t   ] AS factPaths\r\n\r\nSo you basically loop through the nodes on the path p, and pick up any incoming paths with FACT relationships\r\n\r\nIn case you want to filter out the empty lists (for nodes that do not have incoming FACT rels) it can be done with an additional WHERE\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP)\r\n    WHERE parent.name = &quot;Update Profile&quot; AND gap.name contains &quot;CSRF&quot;\r\n    RETURN p,\r\n         [node IN nodes(p) WHERE EXISTS((node)&lt;-[:FACT]-()) |\r\n    \t       [ factPath = (node)&lt;-[:FACT]-(f) | factPath ]\r\n    \t ] AS factPaths\r\n\r\n NOTE: factPaths is returned as a nested array of paths. Depending on what you want to do with it (to the viz) or further processing, you may want to use apoc.coll.flatten() to ..eh .. flatten it",
          "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j/77348149#77348149",
          "title": "Displaying hidden nodes in Neo4j"
        }
      ],
      "owner": {
        "reputation": 1261,
        "user_id": 7497127,
        "user_type": "registered",
        "accept_rate": 67,
        "profile_image": "https://lh6.googleusercontent.com/-DUakSAslaoA/AAAAAAAAAAI/AAAAAAAADHc/lIAG1nu4vzM/photo.jpg?sz=256",
        "display_name": "JAMSHAID",
        "link": "https://stackoverflow.com/users/7497127/jamshaid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1698163831,
      "creation_date": 1698085429,
      "question_id": 77347515,
      "share_link": "https://stackoverflow.com/q/77347515",
      "body_markdown": "I have a query that shows the results from my large graph as follows:\r\n\r\n[![graph][1]][1]\r\n\r\nHere is my query to show the graph\r\n\r\n    MATCH p=(parent:FEATURE)-[*]-&gt;(gap:GAP) WHERE parent.name = &quot;Update Profile&quot; \r\n    and (gap.name contains &quot;CSRF&quot; )  RETURN p\r\n\r\nThe nodes R11_UP and R12_UP have an incoming edge of type FACT; this query is not displaying that. Here is what the graph looks like if I manually show these incoming edges:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI want to update my query to show these FACT nodes along with the other graph shown by this query. I am unable to design a query for it. I tried several queries, but none of them worked. I am always stuck with this graph at the end.\r\n\r\n  [1]: https://i.stack.imgur.com/nrhJ0.png\r\n  [2]: https://i.stack.imgur.com/r5ESA.png",
      "link": "https://stackoverflow.com/questions/77347515/displaying-hidden-nodes-in-neo4j",
      "title": "Displaying hidden nodes in Neo4j"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698064118,
          "post_id": 77341501,
          "comment_id": 136353723,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136353723_77341501"
        },
        {
          "owner": {
            "reputation": 3,
            "user_id": 22352646,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
            "display_name": "SimG",
            "link": "https://stackoverflow.com/users/22352646/simg"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698091825,
          "post_id": 77341501,
          "comment_id": 136358995,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136358995_77341501"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698165984,
          "post_id": 77341501,
          "comment_id": 136369633,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136369633_77341501"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698166686,
          "post_id": 77341501,
          "comment_id": 136369755,
          "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes#comment136369755_77341501"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22352646,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/73e47db0fddbd88a67b90fc78e2c20bf?s=256&d=identicon&r=PG",
        "display_name": "SimG",
        "link": "https://stackoverflow.com/users/22352646/simg"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 62,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 0,
      "score": 0,
      "last_activity_date": 1698004696,
      "creation_date": 1698004696,
      "question_id": 77341501,
      "share_link": "https://stackoverflow.com/q/77341501",
      "body_markdown": "I have Officer nodes belonging to the same community (property community_probably_same_officer that I created with Graph Data Science). I would like to merge those nodes with apoc.refactor.mergeNodes.\r\nI cannot use the iterate apoc since it has a bug that I reported so this is a workaround.\r\n\r\nI wrote this code:\r\n\r\n```\r\nmatch (n:Officer)\r\nwith collect(distinct n.community_probably_same_officer) as idcom\r\nunwind idcom as unwidcom\r\nMATCH (n:Officer) where n.community_probably_same_officer=unwidcom\r\nWITH unwidcom, collect(n) AS nodicom\r\nCALL apoc.refactor.mergeNodes(nodicom,{\r\nproperties:&quot;discard&quot;, mergeRels:true, preserveExistingSelfRels:false})\r\nyield node\r\nreturn count(*)\r\n```\r\n\r\nand I have this error\r\n\r\nFailed to invoke procedure `apoc.refactor.mergeNodes`: Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Throwable.getMessage()&quot; because the return value of &quot;org.neo4j.graphdb.NotFoundException.getCause()&quot; is null\r\n\r\nWhen I used this code for other communities based on a different property it worked with no problems.\r\n\r\nThanks in advance.",
      "link": "https://stackoverflow.com/questions/77341501/neo4j-failed-to-invoke-procedure-apoc-refactor-mergenodes",
      "title": "Neo4J: Failed to invoke procedure `apoc.refactor.mergeNodes`"
    },
    {
      "tags": ["neo4j", "cypher", "memgraphdb"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 6345,
                "user_id": 1099123,
                "user_type": "registered",
                "accept_rate": 55,
                "profile_image": "https://www.gravatar.com/avatar/41f5144169c49d431963661b24fa918d?s=256&d=identicon&r=PG",
                "display_name": "user1099123",
                "link": "https://stackoverflow.com/users/1099123/user1099123"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698494326,
              "post_id": 77341642,
              "comment_id": 136414608,
              "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77341642#comment136414608_77341642"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 3,
          "is_accepted": true,
          "score": 3,
          "last_activity_date": 1698007525,
          "creation_date": 1698007525,
          "answer_id": 77341642,
          "question_id": 77341203,
          "share_link": "https://stackoverflow.com/a/77341642",
          "body_markdown": "You can return pairs of endpoints in the results, in descending order of the number of paths between them, like so:\r\n```\r\nMATCH path = (start:Fen)-[*]-&gt;(end:Fen)\r\nWHERE start.Name = &#39;A&#39;\r\nRETURN start, end, count(*) AS count\r\nORDER BY count DESC\r\n```\r\nAs an aside, you depict your desired result in the form of `A -r-&gt; B`. Assuming by `-r-&gt;` you mean all the intermediate nodes and relationships in the path, then these would all be distinct and appear in separate rows.",
          "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77341642#77341642",
          "title": "How do I get the unique paths in a graph in memgraph/cypher?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698057637,
              "post_id": 77343237,
              "comment_id": 136352562,
              "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77343237#comment136352562_77343237"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 205,
            "user_id": 21138720,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/0f2f11bd6cc32fc7f0497cb4e7aa9aa3?s=256&d=identicon&r=PG",
            "display_name": "GrandMel",
            "link": "https://stackoverflow.com/users/21138720/grandmel"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1698044891,
          "creation_date": 1698044891,
          "answer_id": 77343237,
          "question_id": 77341203,
          "share_link": "https://stackoverflow.com/a/77343237",
          "body_markdown": "If you have a this type of dataset:\r\n\r\n    CREATE (:Node {name: &#39;A&#39;});\r\n    CREATE (:Node {name: &#39;B&#39;});\r\n    CREATE (:Node {name: &#39;C&#39;});\r\n    CREATE (:Node {name: &#39;D&#39;});\r\n    CREATE (:Node {name: &#39;E&#39;});\r\n    MATCH (a:Node {name: &#39;A&#39;}), (b:Node {name: &#39;B&#39;})\r\n    CREATE (a)-[:r1]-&gt;(b)\r\n    CREATE (a)-[:r2]-&gt;(b);\r\n    MATCH (a:Node {name: &#39;A&#39;}), (c:Node {name: &#39;C&#39;})\r\n    CREATE (a)-[:r3]-&gt;(c);\r\n    MATCH (d:Node {name: &#39;D&#39;}), (e:Node {name: &#39;E&#39;})\r\n    CREATE (d)-[:r4]-&gt;(e);\r\n    MATCH (b:Node {name: &#39;B&#39;}), (d:Node {name: &#39;D&#39;})\r\n    CREATE (b)-[:r5]-&gt;(d);\r\n    MATCH (c:Node {name: &#39;C&#39;}), (e:Node {name: &#39;E&#39;})\r\n    CREATE (c)-[:r6]-&gt;(e);\r\n\r\nThis should work in Memgraph:\r\n\r\n    MATCH (start:Node {name: &#39;A&#39;})-[r]-&gt;(end:Node)\r\n    WITH start, end, collect(r) AS rels\r\n    ORDER BY size(rels) DESC\r\n    RETURN start.name AS StartNode, end.name AS EndNode, size(rels) AS RelationshipCount\r\n\r\nAs result I get `A-&gt;B count:2`, `A-&gt;C count:1`\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher/77343237#77343237",
          "title": "How do I get the unique paths in a graph in memgraph/cypher?"
        }
      ],
      "owner": {
        "reputation": 6345,
        "user_id": 1099123,
        "user_type": "registered",
        "accept_rate": 55,
        "profile_image": "https://www.gravatar.com/avatar/41f5144169c49d431963661b24fa918d?s=256&d=identicon&r=PG",
        "display_name": "user1099123",
        "link": "https://stackoverflow.com/users/1099123/user1099123"
      },
      "last_editor": {
        "reputation": 205,
        "user_id": 21138720,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/0f2f11bd6cc32fc7f0497cb4e7aa9aa3?s=256&d=identicon&r=PG",
        "display_name": "GrandMel",
        "link": "https://stackoverflow.com/users/21138720/grandmel"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 79,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 4,
      "accepted_answer_id": 77341642,
      "answer_count": 2,
      "score": 4,
      "last_activity_date": 1698513750,
      "creation_date": 1697999220,
      "last_edit_date": 1698513750,
      "question_id": 77341203,
      "share_link": "https://stackoverflow.com/q/77341203",
      "body_markdown": "Suppose I had two nodes: A and B. Now suppose I had two relations that are similar:\r\n\r\n```\r\nA -r1-&gt; B\r\nA -r2-&gt; B\r\n```\r\n\r\nHow do I make a query that returns just a path from A -&gt; B? The following query returns two paths that are identical. Can we merge the results?\r\n\r\n```\r\nMATCH path = (start:Fen)-[r*]-&gt;(end:Fen)\r\nWHERE start.Name = &#39;A&#39;\r\nRETURN DISTINCT(path)\r\n```\r\n\r\nWhat I am trying to solve is to find the most popular paths between nodes. so given the graph:\r\n\r\n```\r\nA -r1-&gt; B\r\nA -r2-&gt; B\r\nA -r3-&gt; C\r\n```\r\nthe query should return \r\n```\r\nA -r-&gt; B\r\nA -r-&gt; C\r\n```\r\nsince A -&gt; B is the most popular it appears first\r\n",
      "link": "https://stackoverflow.com/questions/77341203/how-do-i-get-the-unique-paths-in-a-graph-in-memgraph-cypher",
      "title": "How do I get the unique paths in a graph in memgraph/cypher?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698001007,
              "post_id": 77340950,
              "comment_id": 136346934,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136346934_77340950"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698006381,
              "post_id": 77340950,
              "comment_id": 136347466,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136347466_77340950"
            },
            {
              "owner": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698034308,
              "post_id": 77340950,
              "comment_id": 136349342,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136349342_77340950"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698057253,
              "post_id": 77340950,
              "comment_id": 136352506,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136352506_77340950"
            },
            {
              "owner": {
                "reputation": 43,
                "user_id": 9165128,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "basic",
                "link": "https://stackoverflow.com/users/9165128/basic"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1698067946,
              "post_id": 77340950,
              "comment_id": 136354561,
              "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#comment136354561_77340950"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 5,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697994572,
          "creation_date": 1697994572,
          "answer_id": 77340950,
          "question_id": 77339992,
          "share_link": "https://stackoverflow.com/a/77340950",
          "body_markdown": "Paths are linear, so it isn&#39;t possible to have a result with `D` as part of the same path as `A`, `B` and `F` (without re-traversing the relationship that joins `B` and `D`—but that would yield a path with `B` appearing twice i.e. `A-&gt;B-&gt;D-&gt;B-&gt;F`). \r\n\r\nYou can assign the second pattern to another path variable e.g. `q` and return that along with `p`:\r\n```\r\nMATCH p = (:Service {name: &quot;A&quot;})-[r1:CAN_READ]-&gt;(n:Service)-[r2:CAN_WRITE]-&gt;\r\n            (:Service {name: &quot;F&quot;}),\r\n      q = (n)-[r3:CAN_WRITE]-&gt;(:Service {name: &quot;D&quot;}) \r\nRETURN p, q\r\n\r\nResults:\r\n╒══════════════════════════════════════════════════════════════════════╤═══════════════════════════════════════════════════════════╕\r\n│p                                                                     │q                                                          │\r\n╞══════════════════════════════════════════════════════════════════════╪═══════════════════════════════════════════════════════════╡\r\n│(:Service {name: &quot;A&quot;})-[:CAN_READ]-&gt;(:Service {name: &quot;B&quot;})-[:CAN_WRITE│(:Service {name: &quot;B&quot;})-[:CAN_WRITE]-&gt;(:Service {name: &quot;D&quot;})│\r\n│]-&gt;(:Service {name: &quot;F&quot;})                                             │                                                           │\r\n├──────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\r\n│(:Service {name: &quot;A&quot;})-[:CAN_READ]-&gt;(:Service {name: &quot;C&quot;})-[:CAN_WRITE│(:Service {name: &quot;C&quot;})-[:CAN_WRITE]-&gt;(:Service {name: &quot;D&quot;})│\r\n│]-&gt;(:Service {name: &quot;F&quot;})                                             │                                                           │\r\n└──────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\r\n```\r\n",
          "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j/77340950#77340950",
          "title": "How to find paths between different services in Neo4j"
        }
      ],
      "owner": {
        "reputation": 43,
        "user_id": 9165128,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "basic",
        "link": "https://stackoverflow.com/users/9165128/basic"
      },
      "last_editor": {
        "reputation": 43,
        "user_id": 9165128,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a6e20379f5387fd7f4902a072e308f7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "basic",
        "link": "https://stackoverflow.com/users/9165128/basic"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 45,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77340950,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697994572,
      "creation_date": 1697978777,
      "last_edit_date": 1697979124,
      "question_id": 77339992,
      "share_link": "https://stackoverflow.com/q/77339992",
      "body_markdown": "I&#39;m new to Neo4j and I&#39;m working on poc where there are multiple services that can read and write to each other and modeled with &lt;CAN_READ(INCOMING):CAN_WRITE(OUTGOING)&gt; directed relationships as shown in the image below. I want to find all paths from A to F through compute services which can read from A and write to Service F and compute service should also able to write data to Service D. So the query should able to return paths highlighted in green and purple.\r\n\r\nI have tried the below query which is giving Compute Services B,C and Storage Service A and Database Service F but Service D is not part of result path\r\n\r\nWhat I&#39;m trying to achieve is, I&#39;m trying to find the services that can read from a service and write to multiple other services with the same relations\r\n\r\n    Query : MATCH p= (m:Service WHERE m.name = &quot;A&quot;)-[r1:CAN_READ]-&gt;(n:Service)-[r2:CAN_WRITE]-&gt;(o:Service WHERE o.name = &quot;F&quot;),(n)-[r3:CAN_WRITE]-&gt;(t:Service WHERE t.name = &quot;D&quot;) RETURN p\r\n\r\n    Result Output Paths: (A)&lt;-[:CAN_READ]-(B)-[:WRITE_TO]-&gt;(F), (A)&lt;-[:CAN_READ]-(C)-[:WRITE_TO]-&gt;(F)\r\n\r\nHow to get the node D as part of output path? Will i able to get the node D as part of output or it will be omitted as it not part of the primary MATCH path ? Do I need to use any other functions or features of neo4j to achieve the same\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8kvbu.png",
      "link": "https://stackoverflow.com/questions/77339992/how-to-find-paths-between-different-services-in-neo4j",
      "title": "How to find paths between different services in Neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 8570,
            "user_id": 277128,
            "user_type": "registered",
            "accept_rate": 79,
            "profile_image": "https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG",
            "display_name": "fbiville",
            "link": "https://stackoverflow.com/users/277128/fbiville"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1697809686,
          "post_id": 77331216,
          "comment_id": 136330121,
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j#comment136330121_77331216"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 1,
          "creation_date": 1697810243,
          "post_id": 77331216,
          "comment_id": 136330232,
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j#comment136330232_77331216"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697812966,
          "creation_date": 1697812966,
          "answer_id": 77331835,
          "question_id": 77331216,
          "share_link": "https://stackoverflow.com/a/77331835",
          "body_markdown": "You can sort the items on the list in below examples:\r\n\r\n1) Using UNWIND and COLLECT\r\n\r\n```\r\n    WITH  [ &quot;Coyote&quot;,&quot; Eastern Coyote&quot;]  as lst\r\n    UNWIND lst as l\r\n    WITH l ORDER by l\r\n    RETURN  collect(l) as sorted_lst\r\n```\r\n2) Using apoc function sort\r\n\r\n\r\n```\r\n    WITH  [ &quot;Coyote&quot;,&quot; Eastern Coyote&quot;]  as lst\r\n    RETURN apoc.coll.sort(lst) as sorted_lst\r\n```\r\n\r\nResult:\r\n\r\n    ╒════════════════════════════╕\r\n    │&quot;sorted_lst&quot;                │\r\n    ╞════════════════════════════╡\r\n    │[&quot; Eastern Coyote&quot;,&quot;Coyote&quot;]│\r\n    └────────────────────────────┘\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j/77331835#77331835",
          "title": "How string item order in neo4j"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697829616,
          "last_edit_date": 1697829616,
          "creation_date": 1697828517,
          "answer_id": 77333248,
          "question_id": 77331216,
          "share_link": "https://stackoverflow.com/a/77333248",
          "body_markdown": "In your question, you made some major mistakes:\r\n\r\n1. `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]` is a **list** of strings, not a string.\r\n2. `ORDER BY xxx DESC` sorts in **descending** order, not ascending.\r\n3. You said:\r\n\r\n    &gt; ... still not make sense, cause &quot;E&quot; is Larger than &quot;C&quot;\r\n\r\n   But the string &quot; Eastern Coyote&quot; actually starts with a **space** character, so you should have been comparing &quot; &quot; to &quot;C&quot;. The &quot; &quot; character has a lower lexical value than &quot;C&quot;. Therefore, `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]` is the correct answer after sorting the list items in **descending** order.\r\n\r\n\r\nYou need to double-check your string values to remove extraneous spaces.\r\n\r\nAlso, to return a list of the strings from `xxx` in **ascending** order (which is the default order), you can use this snippet:\r\n\r\n    ...\r\n    UNWIND xxx AS y\r\n    WITH y ORDER BY y\r\n    RETURN COLLECT(y) AS result\r\n\r\nOr, if you really want to return the list in **descending** order:\r\n\r\n    ...\r\n    UNWIND xxx AS y\r\n    WITH y ORDER BY y DESC\r\n    RETURN COLLECT(y) AS result",
          "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j/77333248#77333248",
          "title": "How string item order in neo4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 15858616,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/987018c9cecb2d014aacae331dfb2e9a?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Frank.H",
        "link": "https://stackoverflow.com/users/15858616/frank-h"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 43,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1697829616,
      "creation_date": 1697807745,
      "last_edit_date": 1697826293,
      "question_id": 77331216,
      "share_link": "https://stackoverflow.com/q/77331216",
      "body_markdown": "I ran a Cypher query with the clause:\r\n\r\n&gt; ORDER BY xxx DESC\r\n\r\nwhere `xxx` is a string, like `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]`. I want it ordered with first alphabet ASC, like this: `[&quot; Eastern Coyote&quot;,&quot;Coyote&quot;]`.\r\nbut the outcome is still this: `[&quot;Coyote&quot;,&quot; Eastern Coyote&quot;]`.\r\n\r\nFYI: i asked chatgpt,it said order in neo4j is depends on alphabet&#39;s unicode, but it still not make sense, cause &quot;E&quot; is Larger than &quot;C&quot;",
      "link": "https://stackoverflow.com/questions/77331216/how-string-item-order-in-neo4j",
      "title": "How string item order in neo4j"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697802612,
          "post_id": 77328455,
          "comment_id": 136328801,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136328801_77328455"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697824893,
          "post_id": 77328455,
          "comment_id": 136332862,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136332862_77328455"
        },
        {
          "owner": {
            "reputation": 23,
            "user_id": 22523452,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
            "display_name": "Garv",
            "link": "https://stackoverflow.com/users/22523452/garv"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697868213,
          "post_id": 77328455,
          "comment_id": 136336293,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136336293_77328455"
        },
        {
          "owner": {
            "reputation": 23,
            "user_id": 22523452,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
            "display_name": "Garv",
            "link": "https://stackoverflow.com/users/22523452/garv"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697868506,
          "post_id": 77328455,
          "comment_id": 136336310,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136336310_77328455"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698064350,
          "post_id": 77328455,
          "comment_id": 136353774,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136353774_77328455"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1698336538,
          "post_id": 77328455,
          "comment_id": 136395563,
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query#comment136395563_77328455"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1697914335,
          "last_edit_date": 1697914335,
          "creation_date": 1697825798,
          "answer_id": 77333022,
          "question_id": 77328455,
          "share_link": "https://stackoverflow.com/a/77333022",
          "body_markdown": "Your query seems to be spending most of its time scanning through all the possible `SubjectUserNode` candidates.\r\n\r\nSo, try adding an index on `User.NodeID`. The execution planner should be able to use that index to reduce the execution time.\r\n\r\n#### Addendum\r\n\r\nAlso, unless logically required, you should simplify your query to remove unnecessary filtering, which wastes time. For example, if all `User` nodes are also `Transaction` nodes, use `(SubjectUserNode:User ...)` instead of `(SubjectUserNode:User:Transaction ...)`.",
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query/77333022#77333022",
          "title": "How to Optimize this Neo4j Query"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "last_editor": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1698340149,
          "last_edit_date": 1698340149,
          "creation_date": 1698336304,
          "answer_id": 77368647,
          "question_id": 77328455,
          "share_link": "https://stackoverflow.com/a/77368647",
          "body_markdown": "As per meeting with Garv (and also from @cybersam previous answer), removing :Transaction label on the query fixed the slow performance. The query is doing a table scan because all data in the database is labeled as Transaction.  After the fix, the run time is now 6ms vs 3.4s before. \r\n \r\n\r\n    MATCH (subjectUserNode:User{NodeID: &quot;2547:12109:000:381864&quot;})-[dimensionRelation:LegalEntity\r\n        WHERE dimensionRelation.Status = &quot;1&quot;\r\n    ]-&gt;(dimension:LegalEntity)&lt;-[udimensionRelation:LegalEntity\r\n        WHERE udimensionRelation.Status = &quot;1&quot;\r\n    ]-(user:User)-[roleRelationship:Role\r\n        WHERE roleRelationship.Status = &quot;1&quot;\r\n    ]-&gt;(role:Role{NodeID: &quot;2547:12122:000:70163&quot;})\r\n    RETURN user.TransactionID as UserID",
          "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query/77368647#77368647",
          "title": "How to Optimize this Neo4j Query"
        }
      ],
      "owner": {
        "reputation": 23,
        "user_id": 22523452,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
        "display_name": "Garv",
        "link": "https://stackoverflow.com/users/22523452/garv"
      },
      "comment_count": 6,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 60,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77333022,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1698340149,
      "creation_date": 1697778950,
      "question_id": 77328455,
      "share_link": "https://stackoverflow.com/q/77328455",
      "body_markdown": "I have this cypher query that I had written:\r\n\r\n    MATCH (SubjectUserNode:User:Transaction {NodeID: &quot;2547:12109:000:381864&quot;})-[dimensionRelation:LegalEntity\r\n        WHERE dimensionRelation.Status = &quot;1&quot;\r\n    ]-&gt;(dimension:LegalEntity:Transaction)&lt;-[udimensionRelation:LegalEntity\r\n        WHERE udimensionRelation.Status = &quot;1&quot;\r\n    ]-(User:User:Transaction)-[RoleRelationship:Role\r\n        WHERE RoleRelationship.Status = &quot;1&quot;\r\n    ]-&gt;(Role:Role:Transaction {NodeID: &quot;2547:12122:000:70163&quot;})\r\n    RETURN User.TransactionID as UserID\r\n\r\nIn this query, I&#39;m trying to get all those User nodes that are related to a given Role node(NodeID given) and are also related to the LegalEntity node which has a relation to the given User node(NodeID given).\r\n\r\nExample:\r\n\r\n[![Node image][1]][1]\r\n\r\nThe query profile is:\r\n\r\n[![Query Profile][2]][2]\r\n\r\nThe query is taking between 4-5 seconds to return the data and the number of nodes being returned is about 150.\r\n\r\nIs there anyway to improve this query like by using any apoc procedure? I can&#39;t think of any other way as according to me this is a simple query in itself. Also, indices are already created on the nodeID of each node type.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jnxtf.png\r\n  [2]: https://i.stack.imgur.com/XUgH7.png",
      "link": "https://stackoverflow.com/questions/77328455/how-to-optimize-this-neo4j-query",
      "title": "How to Optimize this Neo4j Query"
    },
    {
      "tags": ["cypher", "memgraphdb", "opencypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1697710271,
          "creation_date": 1697710271,
          "answer_id": 77322859,
          "question_id": 77321256,
          "share_link": "https://stackoverflow.com/a/77322859",
          "body_markdown": "You need to match on the integers 0 and 3, not the strings &quot;0&quot; and &quot;3&quot;:\r\n```\r\nMATCH p = (:Node {id: 0})-[*]-&gt;(:Node {id: 3})\r\nRETURN p;\r\n```",
          "link": "https://stackoverflow.com/questions/77321256/graph-traversing-query-returns-no-results/77322859#77322859",
          "title": "Graph traversing query returns no results"
        }
      ],
      "owner": {
        "reputation": 27,
        "user_id": 21257965,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/DUqxy.jpg?s=256&g=1",
        "display_name": "EWoodAv",
        "link": "https://stackoverflow.com/users/21257965/ewoodav"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 24,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77322859,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1697710271,
      "creation_date": 1697694884,
      "question_id": 77321256,
      "share_link": "https://stackoverflow.com/q/77321256",
      "body_markdown": "I&#39;m a bit confused by graph traversing queries. After executing:\r\n\r\n```\r\nCREATE (:Node {id: 0});\r\nCREATE (:Node {id: 1});\r\nCREATE (:Node {id: 2});\r\nCREATE (:Node {id: 3});\r\nMATCH (n:Node {id: 0}), (m:Node {id: 1})\r\nCREATE (n)-[:LINK {date: &quot;2023-03&quot;}]-&gt;(m);\r\nMATCH (n:Node {id: 1}), (m:Node {id: 2})\r\nCREATE (n)-[:LINK {date: &quot;2023-03&quot;}]-&gt;(m);\r\nMATCH (n:Node {id: 2}), (m:Node {id: 3})\r\nCREATE (n)-[:LINK {date: &quot;2023-03&quot;}]-&gt;(m);\r\n```\r\n\r\nI want to find paths between Node with id 0 and Node with id 3, so I run next query:\r\n\r\n```\r\nMATCH p = (:Node {id:&quot;0&quot;})-[*]-&gt;(:Node {id: &quot;3&quot;})\r\nRETURN p;\r\n```\r\n\r\nand this will return an empty set.\r\nIsn&#39;t it supposed to return all paths between these two nodes?\r\n",
      "link": "https://stackoverflow.com/questions/77321256/graph-traversing-query-returns-no-results",
      "title": "Graph traversing query returns no results"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697564752,
          "last_edit_date": 1697564752,
          "creation_date": 1697564318,
          "answer_id": 77311131,
          "question_id": 77311116,
          "share_link": "https://stackoverflow.com/a/77311131",
          "body_markdown": "Aggregation functions like `COUNT` can only be used in `WITH` and `RETURN` clauses.\r\n\r\nBut starting with neo4j 5.0 you can use the new [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/count/#:~:text=COUNT%20subquery%20with%20a%20UNION,not%20require%20the%20RETURN%20clause.). For example:\r\n\r\n    MATCH (childD:ChildD {id:123})\r\n    RETURN COUNT { (:Vacancy)&lt;-[:POTENTIAL_PROFILE]-(childD) } AS potentialJobablesCount",
          "link": "https://stackoverflow.com/questions/77311116/return-count-from-cypher-pattern-comprehension/77311131#77311131",
          "title": "Return count() from Cypher pattern comprehension"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77311131,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697564752,
      "creation_date": 1697564138,
      "question_id": 77311116,
      "share_link": "https://stackoverflow.com/q/77311116",
      "body_markdown": "Is it possible to return `count()` from Cypher pattern comprehension ?\r\n\r\nThe following query doesn&#39;t work:\r\n\r\n    [ (:Vacancy)&lt;-[rpp:POTENTIAL_PROFILE]-(childD) | count(rpp) ] AS potentialJobablesCount\r\n\r\nwith the following error:\r\n\r\n    Aggregation column contains implicit grouping expressions. For example, in &#39;RETURN n.a, n.a + n.b + count(*)&#39; the aggregation expression &#39;n.a + n.b + count(*)&#39; includes the implicit grouping key &#39;n.b&#39;. It may be possible to rewrite the query by extracting these grouping/aggregation expressions into a preceding WITH clause. Illegal expression(s): rpp\r\n",
      "link": "https://stackoverflow.com/questions/77311116/return-count-from-cypher-pattern-comprehension",
      "title": "Return count() from Cypher pattern comprehension"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 95,
                "user_id": 9240633,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/t0RDd.png?s=256&g=1",
                "display_name": "Duda Validator",
                "link": "https://stackoverflow.com/users/9240633/duda-validator"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697613688,
              "post_id": 77310912,
              "comment_id": 136300291,
              "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c/77310912#comment136300291_77310912"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 95,
                "user_id": 9240633,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/t0RDd.png?s=256&g=1",
                "display_name": "Duda Validator",
                "link": "https://stackoverflow.com/users/9240633/duda-validator"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697649196,
              "post_id": 77310912,
              "comment_id": 136307639,
              "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c/77310912#comment136307639_77310912"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697564057,
          "last_edit_date": 1697564057,
          "creation_date": 1697562129,
          "answer_id": 77310912,
          "question_id": 77309885,
          "share_link": "https://stackoverflow.com/a/77310912",
          "body_markdown": "You need to carefully read the [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/) clause documentation, as it is easy to use incorrectly and get unexpected results. For example, individual nodes and relationships should always be `MERGE`d separately.\r\n\r\nAlso, since your query `MATCH`es `Id` nodes at the outset, all `Id` nodes mentioned in the CSV file must already exist, or else some `line`s will do nothing. It is not clear if that is intentional.\r\n\r\nHere is a query that should work as expected (and create `Id` nodes as necessary). Note that I changed the node labels to mixed case to match the standard neo4j naming convention. Also, there is no need for a temporary node.\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;path&#39; AS line\r\n    MERGE (id:Id {id: line.ID})\r\n    WITH line, id\r\n    UNWIND SPLIT(line.Class, &quot; &quot;) AS cId\r\n    MERGE (class:Class {id: cId})\r\n    MERGE (id)-[r:HAS]-&gt;(class)\r\n    RETURN r",
          "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c/77310912#77310912",
          "title": "How to make nodes and form n to m relationship in neo4j when given &#39;m&#39; data is constructed in one csv column?"
        }
      ],
      "owner": {
        "reputation": 95,
        "user_id": 9240633,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/t0RDd.png?s=256&g=1",
        "display_name": "Duda Validator",
        "link": "https://stackoverflow.com/users/9240633/duda-validator"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 33,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77310912,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697564057,
      "creation_date": 1697552779,
      "last_edit_date": 1697562323,
      "question_id": 77309885,
      "share_link": "https://stackoverflow.com/q/77309885",
      "body_markdown": "I want to design a database in neo4j where I want to make nodes and relationships between other nodes. To explain it neatly please consider following scenario:\r\n\r\nFrom given csv file one column represents unique IDs and another column represents classes, where in some class column there is only one class whereas in many column there are many classes. \r\n\r\ni.e.\r\n\r\n    ---------------------\r\n    |  ID   |  Class    |\r\n    ---------------------\r\n    |  ID1  |  Class-A  |\r\n    ---------------------\r\n    |  ID2  |  Class-A  |\r\n    |       |  Class-B  |\r\n    |       |  Class-C  |\r\n    ---------------------\r\n\r\nFrom the above example data, the query must generate `(ID1)` node and `(Class-A)` node with HAS relationship. Same with `ID2`. `(ID2)--[HAS]--&gt;(Class-A)` , `(ID2)--[HAS]--&gt;(Class-B)` and so on. \r\n\r\n\r\n\r\n\r\nI was able to write following query.\r\n\r\n```\r\nload csv with headers from &#39;path&#39; as line\r\nmatch(id:ID{id:line.ID}), (temp:TEMP{id:line.Class})\r\n    with temp, split(temp.id, &quot; &quot;) as ids\r\n    unwind range(0,size(ids)-1) as i\r\nmerge(id)-[n:HAS]-&gt;(class:CLASS{id:ids[i]})\r\ndelete temp\r\nreturn n\r\n```\r\n\r\nI am able to create individual nodes from Class column, but it creates relationships with empty nodes and not with associated IDs.\r\n\r\nAny lead would be great help. \r\n\r\nI am new to database design.\r\nThanks",
      "link": "https://stackoverflow.com/questions/77309885/how-to-make-nodes-and-form-n-to-m-relationship-in-neo4j-when-given-m-data-is-c",
      "title": "How to make nodes and form n to m relationship in neo4j when given &#39;m&#39; data is constructed in one csv column?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 629,
            "user_id": 10806063,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
            "display_name": "Nils",
            "link": "https://stackoverflow.com/users/10806063/nils"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697449750,
          "post_id": 77300899,
          "comment_id": 136276928,
          "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret#comment136276928_77300899"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 629,
                "user_id": 10806063,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
                "display_name": "Nils",
                "link": "https://stackoverflow.com/users/10806063/nils"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697530753,
              "post_id": 77303078,
              "comment_id": 136288057,
              "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret/77303078#comment136288057_77303078"
            },
            {
              "owner": {
                "reputation": 9094,
                "user_id": 12368154,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Charchit Kapoor",
                "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
              },
              "reply_to_user": {
                "reputation": 629,
                "user_id": 10806063,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
                "display_name": "Nils",
                "link": "https://stackoverflow.com/users/10806063/nils"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697618308,
              "post_id": 77303078,
              "comment_id": 136301131,
              "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret/77303078#comment136301131_77303078"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "last_editor": {
            "reputation": 9094,
            "user_id": 12368154,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/7fcc314eb5f3167abcc6dbb28b5ad350?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Charchit Kapoor",
            "link": "https://stackoverflow.com/users/12368154/charchit-kapoor"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1697534835,
          "last_edit_date": 1697534835,
          "creation_date": 1697468703,
          "answer_id": 77303078,
          "question_id": 77300899,
          "share_link": "https://stackoverflow.com/a/77303078",
          "body_markdown": "You can try making the last `MATCH` optional, and then use `WITH` to filter the rows.\r\nLike this:\r\n\r\n    MATCH (n {id: &quot;exists&quot;})\r\n    CALL {\r\n        WITH n\r\n        OPTIONAL MATCH (n)--(m {id: &quot;mightExist&quot;})\r\n        CALL {\r\n            WITH m\r\n            OPTIONAL MATCH (m)--(o {id: &quot;does-not-exist&quot;})\r\n            WITH \r\n            CASE WHEN m IS NULL THEN NULL\r\n            WHEN m IS NOT NULL AND o IS NULL THEN m\r\n            ELSE o END AS inner\r\n            RETURN inner\r\n        }\r\n        RETURN inner\r\n    }\r\n    RETURN inner",
          "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret/77303078#77303078",
          "title": "How do I prevent a subquery from executing when an `OPTIONAL MATCH` does not return any rows"
        }
      ],
      "owner": {
        "reputation": 629,
        "user_id": 10806063,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/dd967.jpg?s=256&g=1",
        "display_name": "Nils",
        "link": "https://stackoverflow.com/users/10806063/nils"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 60,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1697534835,
      "creation_date": 1697449260,
      "question_id": 77300899,
      "share_link": "https://stackoverflow.com/q/77300899",
      "body_markdown": "Using this query:\r\n```cypher\r\nOPTIONAL MATCH (n {id: &quot;does-not-exist&quot;})\r\nCALL {\r\n    RETURN &quot;test&quot; as inner\r\n}\r\nRETURN inner\r\n```\r\nI would expect the subquery not to be executed and the outer `RETURN` to return no results. Instead, the subquery is executed once and the return value is `&quot;test&quot;`. I suppose it being `OPTIONAL` causes the whole query to continue with one empty row.  \r\nMy actual query looks more like this:\r\n```cypher\r\nMATCH (n {id: &quot;exists&quot;})\r\nCALL {\r\n    WITH n\r\n    OPTIONAL MATCH (n)--(m {id: &quot;mightExist&quot;})\r\n    CALL {\r\n        WITH m\r\n        MATCH (m)--(o {id: &quot;does-not-exist&quot;})\r\n        RETURN &quot;test&quot; as inner\r\n    }\r\n    RETURN inner\r\n}\r\nRETURN inner\r\n```  \r\nThis causes the query to return nothing as the deepest subquery does not `MATCH` anything. The deepest subquery is still called once because the behavior of `OPTIONAL MATCH`. I can&#39;t change the `OPTIONAL MATCH` to be `MATCH` because then the whole query would not return anything when that relation does not exist, even though it should.\r\n\r\n\r\n**Essentially, I&#39;m trying to return a nested relation of a node which may or may not exist as a relation to the root node. How can I do that?**\r\n\r\n\r\n*Note: I&#39;m trying to stay away from APOC as much as I can to reduce vendor lock-in, but if I absolutely must use something like `apoc.when`, I could.*",
      "link": "https://stackoverflow.com/questions/77300899/how-do-i-prevent-a-subquery-from-executing-when-an-optional-match-does-not-ret",
      "title": "How do I prevent a subquery from executing when an `OPTIONAL MATCH` does not return any rows"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1697223556,
          "creation_date": 1697223556,
          "answer_id": 77290102,
          "question_id": 77289431,
          "share_link": "https://stackoverflow.com/a/77290102",
          "body_markdown": "GDS currently does not support `elementId()` values, so you will have to use `id()`.",
          "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77290102#77290102",
          "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1697250528,
          "creation_date": 1697250528,
          "answer_id": 77291412,
          "question_id": 77289431,
          "share_link": "https://stackoverflow.com/a/77291412",
          "body_markdown": "elementID is a string, but you can get the id as illustrated here:\r\n\r\n    match (n) return  toInteger(split(elementId(n),&#39;:&#39;)[2]) \r\n\r\n",
          "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77291412#77291412",
          "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 510,
                "user_id": 888367,
                "user_type": "registered",
                "accept_rate": 33,
                "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
                "display_name": "Andr&#233;s Meza-Escall&#243;n",
                "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1698192851,
              "post_id": 77298404,
              "comment_id": 136373414,
              "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77298404#comment136373414_77298404"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 51,
            "user_id": 22051375,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/ebac96d9426add4ab84d30940c7cd511?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "florentin",
            "link": "https://stackoverflow.com/users/22051375/florentin"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697402128,
          "creation_date": 1697402128,
          "answer_id": 77298404,
          "question_id": 77289431,
          "share_link": "https://stackoverflow.com/a/77298404",
          "body_markdown": "You can also pass the whole node to the procedure. lets GDS handle the rest on how to identify the node.",
          "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod/77298404#77298404",
          "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
        }
      ],
      "owner": {
        "reputation": 510,
        "user_id": 888367,
        "user_type": "registered",
        "accept_rate": 33,
        "profile_image": "https://i.stack.imgur.com/hGdwz.jpg?s=256&g=1",
        "display_name": "Andr&#233;s Meza-Escall&#243;n",
        "link": "https://stackoverflow.com/users/888367/andr%c3%a9s-meza-escall%c3%b3n"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 49,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77298404,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1697402128,
      "creation_date": 1697215438,
      "last_edit_date": 1697223571,
      "question_id": 77289431,
      "share_link": "https://stackoverflow.com/q/77289431",
      "body_markdown": "I have a graph projected from nodes and relationships &quot;(n1:Place)-[r:COST]-&gt;(n2:Place)&quot;.\r\nTo find the cheapest path between two nodes with names &#39;a&#39; and &#39;z&#39; I use [Dijkstra&#39;s shortest path algorithm][1]:\r\n\r\n    MATCH (start:Place) where &#39;a&#39; = start.name\r\n    MATCH (end:Place) where &#39;z&#39; = end.name\r\n    CALL gds.shortestPath.dijkstra.stream(&#39;my-graph&#39;,{\r\n        sourceNode: id(start),\r\n        targetNode: id(end),\r\n        relationshipWeightProperty: &#39;cost&#39;\r\n    })\r\n    YIELD nodeIds\r\n\r\nIt works perfectly, but I read that [id(node):int is deprecated][2] and in Neo4j 1.5.8 I should use the new [elementId(node):string][3] function instead. \r\n\r\n\r\n    MATCH (start:Place) where &#39;a&#39; = start.name\r\n    MATCH (end:Place) where &#39;z&#39; = end.name\r\n    CALL gds.shortestPath.dijkstra.stream(&#39;my-graph&#39;,{\r\n        sourceNode: elementId(start),\r\n        targetNode: elementId(end),\r\n        relationshipWeightProperty: &#39;cost&#39;\r\n    })\r\n    YIELD nodeIds\r\n\r\nHowever, since elementId() returns a string instead of an int, it causes an exception:\r\n\r\n    Failed to invoke procedure `gds.shortestPath.dijkstra.stream`: Caused by: java.lang.IllegalArgumentException: Expected a node or a node id for `sourceNode`. Got String. \r\n\r\n \r\n\r\nIs there another option that supports pathfinding using elementId() instead of id()? \r\n\r\n\r\n  [1]: https://neo4j.com/docs/graph-data-science/current/algorithms/dijkstra-source-target/\r\n  [2]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-id\r\n  [3]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-elementid",
      "link": "https://stackoverflow.com/questions/77289431/how-to-use-neo4js-gds-shortestpath-dijkstra-stream-for-nodes-with-elementidnod",
      "title": "How to use Neo4j&#39;s gds.shortestPath.dijkstra.stream for nodes with elementId(node) intead of id(node)?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1697047480,
          "post_id": 77272847,
          "comment_id": 136231569,
          "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label#comment136231569_77272847"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697216358,
              "post_id": 77275116,
              "comment_id": 136256721,
              "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#comment136256721_77275116"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697222057,
              "post_id": 77275116,
              "comment_id": 136257677,
              "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#comment136257677_77275116"
            },
            {
              "owner": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697287692,
              "post_id": 77275116,
              "comment_id": 136262521,
              "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#comment136262521_77275116"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 3,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1697221392,
          "last_edit_date": 1697221392,
          "creation_date": 1697044524,
          "answer_id": 77275116,
          "question_id": 77272847,
          "share_link": "https://stackoverflow.com/a/77275116",
          "body_markdown": "If you already have the data in your DB, you can use a query like the following. It also removes the redundant `infId` property after creating the relationships.\r\n\r\n    MATCH (s1:Style)\r\n    WITH s1, SPLIT(s1.infId, &#39;;&#39;) AS infs\r\n    MATCH (s2:Style)\r\n    WHERE s2.styId IN infs\r\n    CREATE (s1)-[:INFLUENCED_BY]-&gt;(s2)\r\n    REMOVE s1.infId // Remove redundant infId property\r\n\r\nBeforehand, you should create an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) on the `styId` property of `Style`, to speed up the query:\r\n\r\n    CREATE INDEX Style_styId FOR (s:Style) ON (s.styId)\r\n\r\n#### Alternate suggestion\r\n\r\nBut, even better, you should have created the data model you wanted when ingesting the data into your DB, instead of fixing up the DB afterwards.\r\n\r\nThere are multiple [ways to import CSV](https://neo4j.com/docs/getting-started/data-import/csv-import/) into neo4j. The simplest is via [LOAD CSV](https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/), so here is an example. Assuming your CSV file has a header row:\r\n\r\n    CALL {\r\n      LOAD CSV WITH HEADERS FROM &#39;file:///styles.csv&#39; AS r\r\n      CREATE (s:Style {id: r.styId, name: r.Style, dates: r.Dates, influences: SPLIT(r.Influences, &#39;;&#39;)})\r\n      MERGE (loc:Location {name: r.Location})\r\n      CREATE (s)-[:LOCATION]-&gt;(l)\r\n    }\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///styles.csv&#39; AS row\r\n    MATCH (s1:Style)\r\n    WHERE s1.id = row.styId\r\n    WITH s1, SPLIT(s1.infId, &#39;;&#39;) AS infs\r\n    MATCH (s2:Style)\r\n    WHERE s2.id IN infs\r\n    CREATE (s1)-[:INFLUENCED_BY]-&gt;(s2)\r\n\r\nYou may also want to create an index on `Location.name` if you have more than a few locations.\r\n\r\nNote that this creates a slightly different data model than yours, in that:\r\n - each `Style` node points to a unique `Location` node\r\n - the `influences` property (which you may want to omit) is a list of strings\r\n - the `styId` is stored as the `id` property (since it is obvious that the id is for a style). This requires that your id index is created like this:\r\n\r\n       CREATE INDEX Style_id FOR (s:Style) ON (s.id)\r\n\r\nThe ingestion is done with 2 imports from the CSV file; the first is for creating all the `Style` nodes, and the second is for creating all the `INFLUENCED_BY` relationships. The [CALL subquery](https://neo4j.com/docs/cypher-manual/current/subqueries/call-subquery/) is used to cleanly separate the 2 `LOAD CSV` invocations (otherwise, you would need to perform an aggregation between them just to reduce the number of rows back down to 1).\r\n\r\nThe above solution assumes you do not have a lot of styles, and so it does everything in a single transaction. If you have a lot of styles, you will have to change (and perhaps split up) the query to avoid running out of memory and/or taking too long.",
          "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77275116#77275116",
          "title": "Creating relationships between nodes of the same label?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 793,
            "user_id": 4414246,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1",
            "display_name": "David A Stumpf",
            "link": "https://stackoverflow.com/users/4414246/david-a-stumpf"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1697162046,
          "creation_date": 1697162046,
          "answer_id": 77284656,
          "question_id": 77272847,
          "share_link": "https://stackoverflow.com/a/77284656",
          "body_markdown": "Remember, your relationships can have properties and they too can be indexed. A major advantage of graphs is the relationships, unlike a RBDS database, are not mere connections. They have knowledge. This can be used for provenance, filtered traversals, storing unique data that should not be in the connected nodes, etc. \r\n\r\nIf you want examples, look at how this was done with DNA segments that are used in matching persons in genealogy. With a well developed knowledge graph you create amazing vale ... such as re-creating your ancestor&#39;s DNA\r\n\r\n[https://www.wai.md/post/the-field-of-dreams-ancestor-avatars][1]\r\n\r\n\r\n  [1]: https://www.wai.md/post/the-field-of-dreams-ancestor-avatars",
          "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label/77284656#77284656",
          "title": "Creating relationships between nodes of the same label?"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 22671757,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
        "display_name": "anji",
        "link": "https://stackoverflow.com/users/22671757/anji"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 44,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77275116,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1697221392,
      "creation_date": 1697025443,
      "last_edit_date": 1697043054,
      "question_id": 77272847,
      "share_link": "https://stackoverflow.com/q/77272847",
      "body_markdown": "I have a database of architectural style periods, imported from a csv. Each `Style` has a `styId`, and an `infId` which shows the previous styles that have influenced it.\r\n\r\nI would like to create relationships between the styles if they are mentioned as an influence, like so:\r\n\r\n#### Anglo-saxon style influenced by Roman style\r\n\r\n![Anglo-saxon style influenced by Roman style](https://i.stack.imgur.com/f6WR5.png)\r\n\r\n#### styId and infId with matching values\r\n\r\n![styId and infId with matching values](https://i.stack.imgur.com/eUgyT.png)\r\n\r\nI know that this will be a case of matching the `styId` to the `infId` but I am not a data scientist and very new to NEO4j. I can do this by manually specifying relationships, but I&#39;m building this dataset myself and plan to add more entries later, so if there is a best practice to creating these relationships by going off of the `styId` and `infId` alone I&#39;d much prefer that option.\r\n\r\nThanks for any help, let me know if anything is unclear.",
      "link": "https://stackoverflow.com/questions/77272847/creating-relationships-between-nodes-of-the-same-label",
      "title": "Creating relationships between nodes of the same label?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696948574,
              "post_id": 77260862,
              "comment_id": 136216183,
              "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files/77260862#comment136216183_77260862"
            },
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "reply_to_user": {
                "reputation": 25,
                "user_id": 22671757,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
                "display_name": "anji",
                "link": "https://stackoverflow.com/users/22671757/anji"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696949704,
              "post_id": 77260862,
              "comment_id": 136216443,
              "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files/77260862#comment136216443_77260862"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696877429,
          "last_edit_date": 1696877429,
          "creation_date": 1696873776,
          "answer_id": 77260862,
          "question_id": 77260454,
          "share_link": "https://stackoverflow.com/a/77260862",
          "body_markdown": "[Your graph](https://i.stack.imgur.com/J5RN1.png) is inconsistent with the Cypher code you have shown. It has have a `Style` node that has a `name` property and is missing `Style`, `Dates`, and `Location` properties. You need to fix what is creating these inconsistent `Style` nodes, since `MERGE (s:Style {Style: stylesheet.Style, Dates: stylesheet.`Dates`, Location: stylesheet.Location})` will never match such a `Style` node.\r\n\r\n### Some MERGE best practices\r\n\r\n 1.   Multiple [MERGE](https://neo4j.com/docs/cypher-manual/current/clauses/merge/) clauses for the same label should all specify the same set of properties, since a `MERGE` clause with more properties will not match a node created by a `MERGE` clause with fewer properties.\r\n\r\n 2. Ideally, a `MERGE` clause should only specify the minimum properties needed (if any) to uniquely identify a node (or relationship).\r\n\r\n    For example, instead of:\r\n\r\n        MERGE (a:Architect {Architect: architectsheet.Name, Born: architectsheet.Born, Died: architectsheet.Died, Description: architectsheet.Description})\r\n\r\n    it would be safer to use this (assuming architect names are unique -- which is a bad assumption, by the way):\r\n\r\n        MERGE (a:Architect {Architect: architectsheet.Name})\r\n        ON CREATE SET s += {Born: architectsheet.Born, Died: architectsheet.Died, Description: architectsheet.Description}\r\n\r\n    or, even better, since architects can have the same name (but this option requires your non-Architects csv files to reference an architect using an id instead of a name):\r\n\r\n        MERGE (s:Style {id: architectsheet.archId})\r\n        ON CREATE SET s += {Architect: architectsheet.Name, Style: Dates: stylesheet.`Dates`, Location: stylesheet.Location}\r\n3. Do not use `MERGE` when you do not have data for all the properties needed to populate the node.",
          "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files/77260862#77260862",
          "title": "How do I merge duplicate nodes as I load them in from multiple csv files?"
        }
      ],
      "owner": {
        "reputation": 25,
        "user_id": 22671757,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJhDjoEsKNCaLI6rhKKAu0iGIdhEKiClG6pv311HWs2=k-s256",
        "display_name": "anji",
        "link": "https://stackoverflow.com/users/22671757/anji"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77260862,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1696877429,
      "creation_date": 1696869145,
      "last_edit_date": 1696871629,
      "question_id": 77260454,
      "share_link": "https://stackoverflow.com/q/77260454",
      "body_markdown": "Sorry if this is difficult to parse, have only been using NEO4j for a few days.\r\nI&#39;m trying to build a database from multiple csv files. &#39;styles.csv&#39; includes notable architects and buildings. The architect and buildings csv files have additional info on their respective entries.\r\n\r\n### Examples of data structures\r\n\r\n#### Styles csv\r\n![Styles csv snapshot][1]\r\n\r\n#### Buildings csv\r\n![Buildings csv snapshot][2]\r\n\r\n#### Architects csv\r\n![Architects csv snapshot][3]\r\n\r\nHowever, when I import the csv files sequentially it creates duplicate nodes for each node with the same name value. For example, [here it is creating a node for the &#39;roman&#39; style.][4]\r\n\r\nI am loading each csv sequentially and unwinding where there are cells with multiple values.\r\n\r\n\r\n```\r\nLOAD CSV WITH HEADERS FROM &#39;file:///restructured_data_styles.csv&#39; AS stylesheet\r\nMERGE (s:Style {Style: stylesheet.Style, Dates: stylesheet.`Dates`, Location: stylesheet.Location})\r\nWITH s, stylesheet\r\nUNWIND split(stylesheet.`Examples`, &#39;;&#39;) AS stylebuildings\r\nMERGE (buildings:Building{name:stylebuildings})\r\nMERGE (s)-[rbs:BUILT_IN_STYLE]-&gt;(buildings)\r\n```\r\n\r\n```\r\nLOAD CSV WITH HEADERS FROM &#39;file:///restructured_data_architects.csv&#39; AS architectsheet\r\nMERGE (a:Architect {Architect: architectsheet.Name, Born: architectsheet.Born, Died: architectsheet.Died, Description: architectsheet.Description})\r\nWITH a, architectsheet\r\nUNWIND split(architectsheet.`Buildings`, &#39;;&#39;) AS architectbuildings\r\nMERGE (buildings:Building{name:architectbuildings})\r\nMERGE (a)-[rab:NOTABLE_PROJECTS]-&gt;(buildings)\r\n\r\n```\r\n\r\nWhat I want is to load each csv and have neo4j add the additional information provided by each csv file, but also merge the duplicate nodes created while maintaining the relationships already present.\r\nAs it stands, the relationships built within files are fine, but I&#39;m having trouble linking these nodes and relationships *between* the csvs. Does that make sense? Will clarify further if not! Thanks!\r\n\r\nNodes are being created, but they don&#39;t merge based on their name values. Have looked into APOC refactoring but I am very new to this (and also not a data scientist!) - a dumbed down explanation would be very helpful.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ea5oP.png\r\n  [2]: https://i.stack.imgur.com/g71dM.png\r\n  [3]: https://i.stack.imgur.com/a5Yms.png\r\n  [4]: https://i.stack.imgur.com/J5RN1.png",
      "link": "https://stackoverflow.com/questions/77260454/how-do-i-merge-duplicate-nodes-as-i-load-them-in-from-multiple-csv-files",
      "title": "How do I merge duplicate nodes as I load them in from multiple csv files?"
    },
    {
      "tags": ["recursion", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 53,
                "user_id": 13685040,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/50d1ff235a58e2d5c5ac7b2c2db90eab?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "snakebite-382",
                "link": "https://stackoverflow.com/users/13685040/snakebite-382"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696885402,
              "post_id": 77261015,
              "comment_id": 136207815,
              "link": "https://stackoverflow.com/questions/77256130/cypher-query-to-get-a-nested-array-of-nodes-at-each-level-of-a-tree-of-nodes/77261015#comment136207815_77261015"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1696875559,
          "creation_date": 1696875559,
          "answer_id": 77261015,
          "question_id": 77256130,
          "share_link": "https://stackoverflow.com/a/77261015",
          "body_markdown": "This query uses the APOC procedure [apoc.convert.toTree](https://neo4j.com/docs/apoc/current/overview/apoc.convert/apoc.convert.toTree/) to generate a tree:\r\n\r\n    MATCH p = (post:POST)&lt;-[:COMMENTED_ON]-(:COMMENT)-[:REPLIED_TO|COMMENTED_ON *0..]-(:COMMENT)\r\n    WHERE ID(post) = 5\r\n    WITH COLLECT(p) AS paths\r\n    CALL apoc.convert.toTree(paths) YIELD value\r\n    RETURN value\r\n\r\nRead [the docs](https://neo4j.com/docs/apoc/current/overview/apoc.convert/apoc.convert.toTree/) to see how to configure the properties that are included or excluded from the generated tree.",
          "link": "https://stackoverflow.com/questions/77256130/cypher-query-to-get-a-nested-array-of-nodes-at-each-level-of-a-tree-of-nodes/77261015#77261015",
          "title": "Cypher Query to get a nested array of nodes at each level of a tree of nodes"
        }
      ],
      "owner": {
        "reputation": 53,
        "user_id": 13685040,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/50d1ff235a58e2d5c5ac7b2c2db90eab?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "snakebite-382",
        "link": "https://stackoverflow.com/users/13685040/snakebite-382"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 24,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77261015,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696875559,
      "creation_date": 1696822048,
      "question_id": 77256130,
      "share_link": "https://stackoverflow.com/q/77256130",
      "body_markdown": "I have a series of comments and replies, each comment can have multiple replies and each reply can in turn have any number of nested or immediate replies.\r\n\r\nHere is some sample data graphed:\r\n[![][1]][1]\r\n\r\nHere I have one post with 4 comments, each replied to the previous comment\r\nI would like to write a query so I can get them returned as nested lists like so\r\n```JSON\r\nPost = {\r\n   ...\r\n   comments: [\r\n      comment: {\r\n          ...\r\n          replies: [\r\n              comment: {\r\n                  ...\r\n                  replies: [\r\n                      comment : {\r\n                         etc\r\n                  ]\r\n              }\r\n          ]\r\n      }\r\n   ]\r\n}\r\n```\r\nWhere each comment has a list of replies and each of those replies has replies you get the point\r\n\r\nI&#39;m very new to using cypher I&#39;m more familiar with mongoDB so this is the query I have so far\r\n```\r\nMATCH tree1 = (post:POST)&lt;-[:COMMENTED_ON]-(comment:COMMENT)\r\nOPTIONAL MATCH tree2 = (comment)&lt;-[replied_to:REPLIED_TO *]-(reply:COMMENT)\r\nWHERE ID(post) = 5\r\nRETURN nodes(tree1), nodes(tree2)\r\n```\r\nWhich gets all the nodes, but it&#39;s just the list of nodes, with a lot of repeats\r\nI&#39;ve done a lot of googling, and I looked at the FOREACH functionality but I&#39;m not sure how I would properly apply it here. I can almost definitely write a query that I can then use code to turn into the structure I need it to be in but it would be nice if I could write a query to do that for me or at least one that returns the nodes in a format where it&#39;s easier to do that \r\n\r\n  [1]: https://i.stack.imgur.com/1yWhz.png",
      "link": "https://stackoverflow.com/questions/77256130/cypher-query-to-get-a-nested-array-of-nodes-at-each-level-of-a-tree-of-nodes",
      "title": "Cypher Query to get a nested array of nodes at each level of a tree of nodes"
    },
    {
      "tags": ["cypher", "memgraphdb", "opencypher", "cypherl"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 5969,
                "user_id": 271736,
                "user_type": "registered",
                "accept_rate": 64,
                "profile_image": "https://www.gravatar.com/avatar/1b1f2c4075a99d2dbff0dd6470630343?s=256&d=identicon&r=PG",
                "display_name": "RobGThai",
                "link": "https://stackoverflow.com/users/271736/robgthai"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696818551,
              "post_id": 77255562,
              "comment_id": 136197286,
              "link": "https://stackoverflow.com/questions/77254345/how-to-make-cypherl-file-more-human-readable/77255562#comment136197286_77255562"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1696806647,
          "last_edit_date": 1696806647,
          "creation_date": 1696804461,
          "answer_id": 77255562,
          "question_id": 77254345,
          "share_link": "https://stackoverflow.com/a/77255562",
          "body_markdown": "It seems the `CYPHERL` file format is not explicitly documented anywhere (at least Google is not able to find anything).\r\n\r\nBut looking at the examples on [this Memgraph page](https://memgraph.com/docs/data-migration/cypherl), it seems a `CYPHERL` file just contains a number of opencypher statements, where each statement ends with a [semicolon](https://neo4j.com/developer/cypher/style-guide/#_semicolons). Each statement is executed as a separate query.",
          "link": "https://stackoverflow.com/questions/77254345/how-to-make-cypherl-file-more-human-readable/77255562#77255562",
          "title": "How to make CYPHERL file more human readable?"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 331,
            "user_id": 22661098,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/888742f5f2ec4c7617d7232596e1f310?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Graph Dveler",
            "link": "https://stackoverflow.com/users/22661098/graph-dveler"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": true,
          "score": 2,
          "last_activity_date": 1696847453,
          "creation_date": 1696847453,
          "answer_id": 77258091,
          "question_id": 77254345,
          "share_link": "https://stackoverflow.com/a/77258091",
          "body_markdown": "The `.cypherl` format is specific to Memgraph and is designed to house a series of Cypher queries to be executed sequentially. When you export data into a `.cypherl` file, Memgraph generates a series of Cypher queries, which, when run in the specified order, recreate the database&#39;s state. Memgraph utilizes the newline character to delineate the start of a new query; this means that you can&#39;t use new lines to break down single queries into multiple lines within a `.cypherl` file.\r\n\r\nSo you are not doing anything wrong. This just isn&#39;t supported at this time. You can open up an issues/feature request in [Memgraph GitHub repository][1] so that our developers can take this into consideration for future versions.\r\n\r\nDiscalimere: I work at Memgraph.\r\n\r\n\r\n  [1]: https://github.com/memgraph/memgraph",
          "link": "https://stackoverflow.com/questions/77254345/how-to-make-cypherl-file-more-human-readable/77258091#77258091",
          "title": "How to make CYPHERL file more human readable?"
        }
      ],
      "owner": {
        "reputation": 5969,
        "user_id": 271736,
        "user_type": "registered",
        "accept_rate": 64,
        "profile_image": "https://www.gravatar.com/avatar/1b1f2c4075a99d2dbff0dd6470630343?s=256&d=identicon&r=PG",
        "display_name": "RobGThai",
        "link": "https://stackoverflow.com/users/271736/robgthai"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 71,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 3,
      "accepted_answer_id": 77258091,
      "answer_count": 2,
      "score": 3,
      "last_activity_date": 1696847453,
      "creation_date": 1696781337,
      "last_edit_date": 1696803112,
      "question_id": 77254345,
      "share_link": "https://stackoverflow.com/q/77254345",
      "body_markdown": "I&#39;m currently testing Memgraph(2.11.0) in docker. I have successfully imported my CYPHERL file via Memgraph Lab. However, it&#39;s very hard to read and maintain. Is it possible to improve that? Is there a document on the format any where?\r\n\r\nHere&#39;s example of the CYPHERL file I have except that the WHERE clause in the real thing is longer.\r\n\r\n```\r\nCREATE (:EndPoint {service: &quot;x-svc&quot;, owner: &quot;x&quot;, method: &quot;POST&quot;, path: &quot;accounts/&quot;});\r\nCREATE (:EndPoint {service: &quot;y-svc&quot;, owner: &quot;y&quot;, method: &quot;GET&quot;, path: &quot;wallets/&quot;});\r\nCREATE (:EndPoint {service: &quot;z-svc&quot;, owner: &quot;z&quot;, method: &quot;GET&quot;, path: &quot;files/&quot;});\r\nCREATE (:DataSource {type: &quot;mysql&quot;, name: &quot;acc-db&quot;});\r\nMATCH (e:EndPoint), (e2:EndPoint) WHERE e.service = &quot;x-svc&quot; AND e.path = &quot;accounts/&quot; AND e2.service = &quot;y-svc&quot; AND e2.path = &quot;wallets/&quot; CREATE (e)-[:IS_CALLING]-&gt;(e2); \r\nMATCH (e:EndPoint), (d:DataSource) WHERE e.service = &quot;x-svc&quot; AND e.path = &quot;accounts/&quot; AND d.name = &quot;acc-db&quot; CREATE (e)-[:READ_FROM]-&gt;(d);\r\nMATCH (e:EndPoint), (e2:EndPoint) WHERE e.service = &quot;y-svc&quot; AND e.path = &quot;wallets/&quot; AND e2.service = &quot;z-svc&quot; AND e2.path = &quot;files/&quot; CREATE (e)-[:IS_CALLING]-&gt;(e2); \r\n```",
      "link": "https://stackoverflow.com/questions/77254345/how-to-make-cypherl-file-more-human-readable",
      "title": "How to make CYPHERL file more human readable?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 187,
                "user_id": 3234217,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
                "display_name": "Makarov",
                "link": "https://stackoverflow.com/users/3234217/makarov"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696629298,
              "post_id": 77246728,
              "comment_id": 136182799,
              "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph/77246728#comment136182799_77246728"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1696618131,
          "last_edit_date": 1696618131,
          "creation_date": 1696617728,
          "answer_id": 77246728,
          "question_id": 77246324,
          "share_link": "https://stackoverflow.com/a/77246728",
          "body_markdown": "This query will return a list of the highest level (&quot;visible&quot;) spaces of which a `User` is a member:\r\n\r\n    MATCH (user:User {auth_token: $auth_token})-[:MEMBER_OF]-&gt;(space)\r\n    WITH user, COLLECT(space) AS spaces\r\n    RETURN user, REDUCE(vs = [], s IN spaces |\r\n      CASE WHEN NONE(a IN [(s)&lt;-[:PARENT_OF*]-(ancestor)|ancestor] WHERE a IN spaces)\r\n      THEN vs + s\r\n      ELSE vs END\r\n    ) AS visibleSpaces\r\n\r\nIt ignores the `pod_state` property, as you did not specify how that should be used.",
          "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph/77246728#77246728",
          "title": "NEO4J query clause in a tree like membership graph"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 187,
            "user_id": 3234217,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
            "display_name": "Makarov",
            "link": "https://stackoverflow.com/users/3234217/makarov"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696629493,
          "creation_date": 1696629493,
          "answer_id": 77247558,
          "question_id": 77246324,
          "share_link": "https://stackoverflow.com/a/77247558",
          "body_markdown": "This is the final query:\r\n\r\nI added some extra logic to fit my needs, but also `UNWIND` the original result to be able to `ORDER BY` and paginate with `SKIP` and `LIMIT`.\r\n\r\n        MATCH (user:User {auth_token: $auth_token})-[:MEMBER_OF]-&gt;(space)\r\n         WHERE space.pod_state IN [&#39;active&#39;, &#39;pending&#39;] AND space.pod_type IN [&#39;standard&#39;, &#39;readonly&#39;]\r\n         WITH user, COLLECT(space) AS spaces\r\n         WITH REDUCE(vs = [], s IN spaces |\r\n          CASE WHEN NONE(a IN [(s)&lt;-[:PARENT_OF*]-(ancestor)|ancestor] WHERE a IN spaces)\r\n          THEN vs + s\r\n          ELSE vs END\r\n        ) AS visibleSpaces\r\n        UNWIND visibleSpaces AS space\r\n        WITH space\r\n        RETURN space\r\n        ORDER BY datetime(space.last_active) DESC\r\n        SKIP toInteger($page) \r\n        LIMIT 50",
          "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph/77247558#77247558",
          "title": "NEO4J query clause in a tree like membership graph"
        }
      ],
      "owner": {
        "reputation": 187,
        "user_id": 3234217,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/fdf0b82ca9731a859d7705aff9123621?s=256&d=identicon&r=PG",
        "display_name": "Makarov",
        "link": "https://stackoverflow.com/users/3234217/makarov"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 34,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77246728,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1696629493,
      "creation_date": 1696612280,
      "last_edit_date": 1696616805,
      "question_id": 77246324,
      "share_link": "https://stackoverflow.com/q/77246324",
      "body_markdown": "So I have this graph structure where many &quot;Top level&quot; and subspaces spaces can exist like this:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kOPCH.png\r\n\r\nI have the next cypher query:\r\n\r\n    MATCH (user:User {auth_token: $auth_token}) \r\n          MATCH (space:Space)\r\n          WHERE (\r\n            (NOT (space)&lt;-[:PARENT_OF]-(:Space) AND (user)-[:MEMBER_OF]-&gt;(space) AND space.pod_state IN [&#39;active&#39;, &#39;pending&#39;] AND space.pod_type IN [&#39;standard&#39;, &#39;readonly&#39;])\r\n            OR\r\n            (EXISTS {MATCH (parent:Space)-[:PARENT_OF*]-&gt;(space)&lt;-[:MEMBER_OF]-(user) WHERE NOT (user)-[:MEMBER_OF]-&gt;(parent) AND space.pod_state IN [&#39;active&#39;, &#39;pending&#39;] AND space.pod_type IN [&#39;standard&#39;, &#39;readonly&#39;]})\r\n          )\r\n          RETURN space\r\n    \r\nWhat I need in this case is the list of spaces (blue) that a user can see (yellow) \r\nSo:\r\n - Simon DDD should only see &quot;TOP LEVEL SPACE&quot; even when he is also a member of &quot;LEVEL 2 SPACE&quot; he should see the space with the highest level in every hierarchy.\r\n - Simon LALALA on the other hand should see &quot;LEVEL 2 SPACE&quot; since he is only a member of that space.\r\n\r\nIn the query provided SIMON DDD is getting both &quot;TOP LEVEL SPACE&quot; and &quot;LEVEL 2 SPACE&quot;\r\nSIMON LALALA is okay since he is only a member of one space in the path\r\n\r\nAlso, the query works fine if, for example, SIMON DDD is a member of the &quot;LEVEL 1 SPACE A&quot; because the &quot;NOT&quot; clause on the query will work, which means if the user is a MEMBER OF every space in the path only shows the top level space",
      "link": "https://stackoverflow.com/questions/77246324/neo4j-query-clause-in-a-tree-like-membership-graph",
      "title": "NEO4J query clause in a tree like membership graph"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696608768,
          "creation_date": 1696608768,
          "answer_id": 77245988,
          "question_id": 77245127,
          "share_link": "https://stackoverflow.com/a/77245988",
          "body_markdown": "`MERGE` is not suitable for your use case. Here is one way to ensure a `Position` node with the exact set of properties you want exists. The query assumes that the desired properties are passed to the query in a `props` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) (e.g., `{symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, location:&quot;zzz&quot;, effective: false}`)\r\n\r\n    OPTIONAL MATCH (p:Position)\r\n    WHERE PROPERTIES(p) = $props\r\n    CALL {\r\n      WITH p\r\n      WITH p WHERE p IS NULL\r\n      CREATE (q:Position)\r\n      SET q = $props\r\n      RETURN result\r\n      UNION\r\n      WITH p\r\n      WITH p WHERE p IS NOT NULL\r\n      RETURN p AS result\r\n    }\r\n    RETURN ID(result)",
          "link": "https://stackoverflow.com/questions/77245127/inserting-general-entities-in-neo4j-using-merge-matching-issue-with-similar-nod/77245988#77245988",
          "title": "Inserting General Entities in Neo4j Using MERGE: Matching Issue with Similar Nodes"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 22695803,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d5361fa477fa6781e54d650af857f050?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Gabriel Nogueira",
        "link": "https://stackoverflow.com/users/22695803/gabriel-nogueira"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 22695803,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d5361fa477fa6781e54d650af857f050?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Gabriel Nogueira",
        "link": "https://stackoverflow.com/users/22695803/gabriel-nogueira"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 26,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696608768,
      "creation_date": 1696601281,
      "last_edit_date": 1696601444,
      "question_id": 77245127,
      "share_link": "https://stackoverflow.com/q/77245127",
      "body_markdown": "I&#39;m using Neo4j to relate data extracted from official government documents, and I&#39;m developing a Python program to automate this process. However, there are cases where a more general entity is extracted, like `(:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, effective: false})`. When I attempt to insert it into the database using a query like:\r\n\r\n```cypher\r\nMERGE (c:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, effective: false})\r\nRETURN ID(c)\r\n```\r\n\r\nThe `MERGE` clause ends up matching a node of the type `(:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, location:&quot;zzz&quot;, effective: false})`.\r\n\r\nHow can I modify my Cypher query to ensure that the node `(c:Position {symbol: &quot;xxx&quot;, name: &quot;yyy&quot;, effective: false})` is inserted into the database? In this case, using `CREATE` alone is not sufficient, as similar nodes might be extracted again.\r\n\r\nI encountered a similar issue in [this post](https://stackoverflow.com/questions/38190061/merge-node-with-null-property-neo4j). However, the provided solution doesn&#39;t work in my case because the `WHERE` clause returns nothing.",
      "link": "https://stackoverflow.com/questions/77245127/inserting-general-entities-in-neo4j-using-merge-matching-issue-with-similar-nod",
      "title": "Inserting General Entities in Neo4j Using MERGE: Matching Issue with Similar Nodes"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 878,
            "user_id": 3952697,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6f711663b08cbcc7ea756a11d7857b16?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Dave Fauth",
            "link": "https://stackoverflow.com/users/3952697/dave-fauth"
          },
          "last_editor": {
            "reputation": 19639,
            "user_id": 2662355,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG",
            "display_name": "Christophe Willemsen",
            "link": "https://stackoverflow.com/users/2662355/christophe-willemsen"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696595685,
          "last_edit_date": 1696595685,
          "creation_date": 1696594522,
          "answer_id": 77244356,
          "question_id": 77244145,
          "share_link": "https://stackoverflow.com/a/77244356",
          "body_markdown": "I think this will work for you:\r\n\r\n```\r\nMATCH (mt:MoneyTransfer)&lt;-[s:SEND]-(:BankAccount)&lt;-[hba:HAS_BANKACCOUNT]-(ah:AccountHolder) \r\nWHERE (mt.TransactionDate &lt;= date(&quot;2023-09-30&quot;) \r\nAND mt.TransactionDate &gt;= date(&quot;2023-09-01&quot;)) \r\nwith ah.Name as AccountHolder, AVG(mt.MoneyTransferAmount) as avgTransfer \r\nwhere avgTransfer &gt; 1000\r\nRETURN AccountHolder, avgTransfer;\r\n```\r\n",
          "link": "https://stackoverflow.com/questions/77244145/how-to-apply-conditions-on-return-values-in-neo4j-cypher/77244356#77244356",
          "title": "How to apply conditions on return values in Neo4j cypher"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696619827,
          "creation_date": 1696619827,
          "answer_id": 77246900,
          "question_id": 77244145,
          "share_link": "https://stackoverflow.com/a/77246900",
          "body_markdown": "This query will return a list of the names of the account holders that met a threshold transfer amount, and another list of the ones who did not.\r\n\r\n    MATCH (mt:MoneyTransfer)&lt;-[:SEND]-(:BankAccount)&lt;-[:HAS_BANKACCOUNT]-(ah:AccountHolder)\r\n    WHERE date($start) &lt;= mt.TransactionDate &lt;= date($end)\r\n    WITH ah.Name as accountHolder, AVG(mt.MoneyTransferAmount) AS avgTransfer\r\n    RETURN avgTransfer &gt;= $amount AS metThresholdAmount, COLLECT(accountHolder) AS accountHolders\r\n\r\nThe query assumes that the string `start` and `end` dates, and the threshold `amount` are passed as [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/).\r\n\r\nFor example, if there are 2 account holders, the result would look something like this:\r\n\r\n    ╒══════════════════╤══════════════╕\r\n    │metThresholdAmount│accountHolders│\r\n    ╞══════════════════╪══════════════╡\r\n    │true              │[&quot;Fred&quot;]      │\r\n    ├──────────────────┼──────────────┤\r\n    │false             │[&quot;Wilma&quot;]     │\r\n    └──────────────────┴──────────────┘",
          "link": "https://stackoverflow.com/questions/77244145/how-to-apply-conditions-on-return-values-in-neo4j-cypher/77246900#77246900",
          "title": "How to apply conditions on return values in Neo4j cypher"
        }
      ],
      "owner": {
        "reputation": 3,
        "user_id": 22695083,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIbz5v9WUcVtiZjc3jj_yGeXR4j-EYL2oP06CUAJCaq0a4=k-s256",
        "display_name": "Santosh Jamale",
        "link": "https://stackoverflow.com/users/22695083/santosh-jamale"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 36,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77244356,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1696619827,
      "creation_date": 1696592412,
      "last_edit_date": 1696607459,
      "question_id": 77244145,
      "share_link": "https://stackoverflow.com/q/77244145",
      "body_markdown": "I have a query as follows which returns account holder with their monthly average transaction amount.\r\n\r\n```\r\nMATCH (mt:MoneyTransfer)&lt;-[s:SEND]-(:BankAccount)&lt;-[hba:HAS_BANKACCOUNT]-(ah:AccountHolder)\r\nWHERE (mt.TransactionDate &lt;= date(&quot;2023-09-30&quot;) AND mt.TransactionDate &gt;= date(&quot;2023-09-01&quot;))\r\nRETURN ah.Name as AccountHolder, AVG(mt.MoneyTransferAmount);\r\n```\r\n\r\nHow to apply condition on above output so that I will get account holders whose average monthly money transfer amount (`AVG(mt.MoneyTransferAmount)`) is greater or less than any certain amount?\r\n\r\nI tried multiple things but nothing worked for me.",
      "link": "https://stackoverflow.com/questions/77244145/how-to-apply-conditions-on-return-values-in-neo4j-cypher",
      "title": "How to apply conditions on return values in Neo4j cypher"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 3748,
            "user_id": 1643749,
            "user_type": "registered",
            "accept_rate": 60,
            "profile_image": "https://www.gravatar.com/avatar/5bd4a4b0d684b21f42c79c5e5b4adf3d?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Apidcloud",
            "link": "https://stackoverflow.com/users/1643749/apidcloud"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696601462,
          "post_id": 77242556,
          "comment_id": 136178198,
          "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j#comment136178198_77242556"
        },
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696602200,
          "post_id": 77242556,
          "comment_id": 136178370,
          "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j#comment136178370_77242556"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 214,
                "user_id": 8511812,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
                "display_name": "v2belleville",
                "link": "https://stackoverflow.com/users/8511812/v2belleville"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696934775,
              "post_id": 77247988,
              "comment_id": 136213262,
              "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j/77247988#comment136213262_77247988"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696640908,
          "creation_date": 1696640908,
          "answer_id": 77247988,
          "question_id": 77242556,
          "share_link": "https://stackoverflow.com/a/77247988",
          "body_markdown": "If you [install](https://neo4j.com/docs/graph-data-science/current/installation/) the Neo4j Graph Data Science (GDS) plugin, you can use community detection algorithms. In particular, the [Weakly Connected Components](https://neo4j.com/docs/graph-data-science/current/algorithms/wcc/) (WCC) algorithm will be useful for you use case. Here is a snippet from its documentation:\r\n\r\n&gt; The Weakly Connected Components (WCC) algorithm finds sets of\r\n&gt; connected nodes in directed and undirected graphs. Two nodes are\r\n&gt; connected, if there exists a path between them. The set of all nodes\r\n&gt; that are connected with each other form a component. In contrast to\r\n&gt; Strongly Connected Components (SCC), the direction of relationships on\r\n&gt; the path between two nodes is not considered.\r\n\r\nFor example, if you only care about `Img` nodes (with `name` properties) and `DISTANCE` relationships, you can do something like this:\r\n\r\n    // Create an in-memory GDS projection for the Img nodes and DISTANCE relationships\r\n    CALL gds.graph.project(&#39;imgs&#39;, &#39;Img&#39;, &#39;DISTANCE&#39;) YIELD graphName\r\n    // Run WCC algorithm to find each &quot;component&quot;, in which every pair of nodes is connected by some path (ignoring directionality)\r\n    CALL gds.wcc.stream(&#39;imgs&#39;, {}) YIELD nodeId, componentId\r\n    // For each component, collect a list of the names of all nodes in that component\r\n    WITH componentId, COLLECT(gds.util.asNode(nodeId).name) AS names\r\n    // Collect all those lists into an outer list (this is the result you asked for)\r\n    RETURN COLLECT(names) AS result\r\n\r\nThe GDS projection will keep taking up memory on the server until your drop the projection or restart neo4j. To drop the projection named &quot;imgs&quot;, do this:\r\n\r\n    CALL gds.graph.drop(&#39;imgs&#39;)\r\n\r\nThe above is barely scratching the surface of GDS, but should give you a leg up on implementing your use case.",
          "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j/77247988#77247988",
          "title": "How do you return clusters in Neo4j?"
        }
      ],
      "owner": {
        "reputation": 23,
        "user_id": 11299860,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/cf548f99e2b8bb58af4786719c14a69f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "svk003",
        "link": "https://stackoverflow.com/users/11299860/svk003"
      },
      "last_editor": {
        "reputation": 692,
        "user_id": 2258090,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
        "display_name": "Finbar Good",
        "link": "https://stackoverflow.com/users/2258090/finbar-good"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 76,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1696654275,
      "creation_date": 1696577166,
      "last_edit_date": 1696654275,
      "question_id": 77242556,
      "share_link": "https://stackoverflow.com/q/77242556",
      "body_markdown": "I&#39;m very new for neo4j.\r\n\r\nNeed to get output as array for already grouped nodes.[![enter image description here](https://i.stack.imgur.com/O8Y1j.png)](https://i.stack.imgur.com/O8Y1j.png)\r\n\r\nIn attached image having 13 node groups.\r\n\r\nFor example,\r\n\r\n\\[&#39;img8&#39;,&#39;img9&#39;,&#39;img47&#39;,&#39;img50&#39;,&#39;img51&#39;\\] is one set\r\n\r\n\\[&#39;img20&#39;, &#39;img21&#39;\\] is another set.\r\n\r\nLike this we are having 13 node sets in attached image.\r\n\r\nI need output like.\r\n\r\n\\[\\[set1\\],\\[set2\\],.....,\\[set13\\]\\]",
      "link": "https://stackoverflow.com/questions/77242556/how-do-you-return-clusters-in-neo4j",
      "title": "How do you return clusters in Neo4j?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696332898,
          "post_id": 77221688,
          "comment_id": 136136560,
          "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j#comment136136560_77221688"
        },
        {
          "owner": {
            "reputation": 13,
            "user_id": 20630792,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu2deeksK5xw2EENJ36MpdAEVct6_iZ2dudXnhFl=k-s256",
            "display_name": "Mittal Vaghela",
            "link": "https://stackoverflow.com/users/20630792/mittal-vaghela"
          },
          "reply_to_user": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1696336482,
          "post_id": 77221688,
          "comment_id": 136137272,
          "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j#comment136137272_77221688"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1696358484,
          "creation_date": 1696358484,
          "answer_id": 77224777,
          "question_id": 77221688,
          "share_link": "https://stackoverflow.com/a/77224777",
          "body_markdown": "1. The first 3 `MATCH` clauses did not use a colon in front of the relationship type. For example, `[provid_by]` should be `[:provid_by]`. This may or may not have caused a difference in the results, but it would have slowed down the query.\r\n\r\n2. Another issue, and it is a big one, is that `UNION` can only add rows to the ultimate result. It cannot filter out any rows provided by other `UNION` terms.\r\n\r\n3. Also, it is not clear why you have the last 3 `UNION`s. They would only add a lot of nodes that do not pass your stated criteria.\r\n\r\nThis simpler query may be sufficient:\r\n\r\n    MATCH (node:service)\r\n    WHERE\r\n     (\r\n       NONE(n IN [(node)-[:provid_by]-&gt;(dst:provider)|dst.name] WHERE n =~ &quot;(?i)Adani Transmission Limited&quot;) OR\r\n       NONE(n IN [(node)-[:address_in]-&gt;(dst:Address)|dst.name] WHERE n =~ &quot;(?i)Formosa&quot;)\r\n     ) AND\r\n     NONE(n IN [(node)-[:depen_on]-&gt;(dst:res)|dst.name] WHERE n =~ &quot;(?i)Video interview data&quot;)\r\n    RETURN node\r\n    ORDER BY node.createdAt DESC",
          "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j/77224777#77224777",
          "title": "How to write or with not query in neo4j"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 20630792,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu2deeksK5xw2EENJ36MpdAEVct6_iZ2dudXnhFl=k-s256",
        "display_name": "Mittal Vaghela",
        "link": "https://stackoverflow.com/users/20630792/mittal-vaghela"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 2,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 48,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77224777,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696358484,
      "creation_date": 1696330947,
      "last_edit_date": 1696357653,
      "question_id": 77221688,
      "share_link": "https://stackoverflow.com/q/77221688",
      "body_markdown": "I want to perform this query in neo4j but i&#39;m not getting proper.\r\n\r\nNOT((service provid_by Adani Transmission Limited AND service address_in Formosa) OR service depen_on Video interview data)\r\n\r\n#### Cypher query  \r\n\r\n```\r\nMATCH (node:service )-[provid_by]-&gt;(dst:provider)\r\nWITH DISTINCT node, COLLECT(DISTINCT TOLOWER(dst.name)) AS names\r\nWHERE NONE(name IN names WHERE name IN [&quot;adani transmission limited&quot;]) OR size(names) = 0\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service )-[address_in]-&gt;(dst:Address)\r\nWITH DISTINCT node, COLLECT(DISTINCT TOLOWER(dst.name)) AS names\r\nWHERE NONE(name IN names WHERE name IN [&quot;formosa&quot;]) OR size(names) = 0\r\nWITH DISTINCT node\r\nMATCH (node:service)-[depen_on]-&gt;(dst:res)\r\nWITH DISTINCT node, COLLECT(DISTINCT TOLOWER(dst.name)) AS names\r\nWHERE NONE(name IN names WHERE name IN [&quot;video interview data&quot;]) OR size(names) = 0\r\nWITH DISTINCT node\r\nWITH DISTINCT node\r\nORDER BY node.createdAt DESC\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service) WHERE NOT (node)-[:provid_by]-&gt;(:Participant)\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service)\r\nWHERE NOT (node)-[:address_in]-&gt;(:Address)\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\nUNION\r\nMATCH (node:service)\r\nWHERE NOT (node)-[:depen_on]-&gt;(:res)\r\nWITH DISTINCT node\r\nRETURN DISTINCT node\r\n```",
      "link": "https://stackoverflow.com/questions/77221688/how-to-write-or-with-not-query-in-neo4j",
      "title": "How to write or with not query in neo4j"
    },
    {
      "tags": ["neo4j", "cypher", "constraints"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696267986,
              "post_id": 77215248,
              "comment_id": 136128387,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136128387_77215248"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "reply_to_user": {
                "reputation": 64800,
                "user_id": 974731,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
                "display_name": "cybersam",
                "link": "https://stackoverflow.com/users/974731/cybersam"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696281843,
              "post_id": 77215248,
              "comment_id": 136130775,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136130775_77215248"
            },
            {
              "owner": {
                "reputation": 1,
                "user_id": 20132179,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
                "display_name": "Boris Buklov",
                "link": "https://stackoverflow.com/users/20132179/boris-buklov"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700084964,
              "post_id": 77215248,
              "comment_id": 136612842,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136612842_77215248"
            },
            {
              "owner": {
                "reputation": 692,
                "user_id": 2258090,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
                "display_name": "Finbar Good",
                "link": "https://stackoverflow.com/users/2258090/finbar-good"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1700090363,
              "post_id": 77215248,
              "comment_id": 136613550,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#comment136613550_77215248"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 4,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696324504,
          "last_edit_date": 1696324504,
          "creation_date": 1696246303,
          "answer_id": 77215248,
          "question_id": 77215052,
          "share_link": "https://stackoverflow.com/a/77215248",
          "body_markdown": "You can&#39;t create a `CONSTRAINT` on node-relationship-node combinations. \r\n\r\nIt could be enforced in a DML statement for creating the relationship. For example:\r\n```\r\nMATCH (p:Person { name: &quot;Claudia&quot; })\r\nWHERE NOT EXISTS { (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;}) }\r\nCREATE (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;, experience: &quot;2 years&quot;})\r\n```\r\nThis assumes the hobby might not already exist. ",
          "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215248#77215248",
          "title": "How can I create a constraint on pairs of nodes based on their labels and attributes?"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 1,
                "user_id": 20132179,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
                "display_name": "Boris Buklov",
                "link": "https://stackoverflow.com/users/20132179/boris-buklov"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696257754,
              "post_id": 77215322,
              "comment_id": 136126521,
              "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215322#comment136126521_77215322"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 176,
            "user_id": 21624328,
            "user_type": "registered",
            "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxZzl1uvGNT2Zj90oWIgnDozeOoiJzA7-rJgem4f=k-s256",
            "display_name": "Christoffer Bergman",
            "link": "https://stackoverflow.com/users/21624328/christoffer-bergman"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696247173,
          "creation_date": 1696247173,
          "answer_id": 77215322,
          "question_id": 77215052,
          "share_link": "https://stackoverflow.com/a/77215322",
          "body_markdown": "One option would be to change the data model slightly (don&#39;t know if that is a feasible option for you) so that you make Hobby unique by name for all. So there would only be one Hobby node with name &quot;football&quot; and all who likes football would point to the same node. That way you could have a uniqueness constraint on the name of Hobby.\r\n\r\nWith this model you would move the experience property to the relationship instead (so that the LIKES relationship would have the experience property).\r\n\r\nHowever, this would not prevent the same person node to have multiple LIKES relationships to the same Hobby, but at least the same Hobby would only exist once.",
          "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib/77215322#77215322",
          "title": "How can I create a constraint on pairs of nodes based on their labels and attributes?"
        }
      ],
      "owner": {
        "reputation": 1,
        "user_id": 20132179,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
        "display_name": "Boris Buklov",
        "link": "https://stackoverflow.com/users/20132179/boris-buklov"
      },
      "last_editor": {
        "reputation": 1,
        "user_id": 20132179,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/657b5652117a06fabae223f88d311408?s=256&d=identicon&r=PG",
        "display_name": "Boris Buklov",
        "link": "https://stackoverflow.com/users/20132179/boris-buklov"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 52,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1700084855,
      "creation_date": 1696244277,
      "last_edit_date": 1700084855,
      "question_id": 77215052,
      "share_link": "https://stackoverflow.com/q/77215052",
      "body_markdown": "Let&#39;s say i have two different nodes in my DB:\r\n\r\n```none\r\n(p:person {name: &quot;Claudia&quot;})-[:likes]-&gt;(h:hobby {name: &quot;football&quot;, experience: &quot;2 years&quot;})\r\n```\r\n\r\nMy goal is to make each person&#39;s hobby unique by its `name` attribute, but at the same time I want to be able to create another `(h:hobby {name: &quot;football&quot;})` node, related to some other `person` and it would be 2 different nodes (it&#39;s important!).\r\n\r\nHow can I do that?\r\n\r\nI tried:\r\n```\r\nCREATE CONSTRAINT FOR (h:hobby),(p:person) REQUIRE (p:person)-[:likes]-&gt;(h.name) IS UNIQUE\r\n```\r\nbut it doesn&#39;t even work, giving me:\r\n\r\n```none\r\nInvalid input &#39;(&#39;: expected &quot;)&quot; or an identifier (line 2, column 6 (offset: 24))\r\n&quot;FOR ((h:hobby),(p:person))&quot;\r\n```\r\n\r\n**SOLUTION:**\r\n\r\nIn [Finbar&#39;s Good answer](https://stackoverflow.com/a/77215248/20132179) I found useful statement: `WHERE NOT EXISTS`.\r\n\r\nI can guarantee each `person` has only one related `(h:hobby {name: &quot;football&quot;})` node using this statement and I can add `uuid` property for each `hobby` node I create to make sure it&#39;s unique  within the database:\r\n```cypher\r\nMATCH (p:Person { name: &quot;Claudia&quot; })\r\nWHERE NOT EXISTS { (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;}) }\r\nCREATE (p)-[:LIKES]-&gt;(:Hobby {name: &quot;football&quot;, experience: &quot;2 years&quot;, id: apoc.create.uuid()})\r\n```",
      "link": "https://stackoverflow.com/questions/77215052/how-can-i-create-a-constraint-on-pairs-of-nodes-based-on-their-labels-and-attrib",
      "title": "How can I create a constraint on pairs of nodes based on their labels and attributes?"
    },
    {
      "tags": ["neo4j", "cypher", "query-optimization"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 29966,
            "user_id": 92359,
            "user_type": "registered",
            "accept_rate": 94,
            "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=256&d=identicon&r=PG",
            "display_name": "InverseFalcon",
            "link": "https://stackoverflow.com/users/92359/inversefalcon"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 2,
          "is_accepted": false,
          "score": 2,
          "last_activity_date": 1696198683,
          "creation_date": 1696198683,
          "answer_id": 77212510,
          "question_id": 77212102,
          "share_link": "https://stackoverflow.com/a/77212510",
          "body_markdown": "Your query creates a cartesian product between all :Profile nodes and the :Vacency:Decision node, then expands from each one of them checking that they&#39;re not connected.\r\n\r\nIt would likely be more efficient to match to the possible profiles from v, then match to all :Profile nodes that are NOT those. Something like this:\r\n\r\n    PROFILE\r\n    MATCH (v:Vacancy:Decision {id: 17210})&lt;-[:POSSIBLE_PROFILE]-(possible)\r\n    WITH v, collect(possible) as toExclude\r\n    MATCH (p:Profile)\r\n    WHERE NOT p IN toExclude\r\n    RETURN p, v;",
          "link": "https://stackoverflow.com/questions/77212102/neo4j-cypher-query-db-hits-optimization/77212510#77212510",
          "title": "Neo4j Cypher query DB hits optimization"
        }
      ],
      "owner": {
        "reputation": 24739,
        "user_id": 1219755,
        "user_type": "registered",
        "accept_rate": 84,
        "profile_image": "https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1",
        "display_name": "alexanoid",
        "link": "https://stackoverflow.com/users/1219755/alexanoid"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 39,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1696198683,
      "creation_date": 1696190251,
      "question_id": 77212102,
      "share_link": "https://stackoverflow.com/q/77212102",
      "body_markdown": "I have the following Cypher query:\r\n\r\n    PROFILE MATCH (p:Profile)  MATCH (v:Vacancy:Decision {id: 17210})\r\n    WHERE NOT exists((v)&lt;-[:POSSIBLE_PROFILE]-(p))\r\n    RETURN p, v;\r\n\r\nand only 5000 Profiles in my test DB.\r\n\r\nThe plan:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI&#39;m concerned about the number of DB hits highlighted in the green rectangle. Could you please show me how to optimize this query?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dz2FS.png",
      "link": "https://stackoverflow.com/questions/77212102/neo4j-cypher-query-db-hits-optimization",
      "title": "Neo4j Cypher query DB hits optimization"
    },
    {
      "tags": ["python", "neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 19443460,
                "user_type": "registered",
                "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
                "display_name": "Kevin Paul Babu",
                "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696180359,
              "post_id": 77209175,
              "comment_id": 136117476,
              "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77209175#comment136117476_77209175"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696132685,
          "creation_date": 1696132685,
          "answer_id": 77209175,
          "question_id": 77206137,
          "share_link": "https://stackoverflow.com/a/77209175",
          "body_markdown": "The code return_name(n) should be n.return_name",
          "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77209175#77209175",
          "title": "How to update the existing nodes in neo4j using python"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696185598,
          "last_edit_date": 1696185598,
          "creation_date": 1696185226,
          "answer_id": 77211803,
          "question_id": 77206137,
          "share_link": "https://stackoverflow.com/a/77211803",
          "body_markdown": "There are a few errors (and areas for improvement) in your `query`:\r\n\r\n    query = (\r\n        &quot;MATCH (n) WHERE return_name(n) = $return_name&quot;\r\n        &quot;SET n.profile_id = $new_profile_id, &quot;\r\n        &quot;    n.message = $new_message, &quot;\r\n        &quot;    n.processing_flag = $new_processing_flag &quot;\r\n    )\r\n\r\n1. As $jose_bacoy stated, `return_name(n)` should be `n.return_name`, since `return_name` is a property of `Message` nodes, and Cypher has no `return_name` function.\r\n\r\n2. `query` must have whitespace before the `SET` clause. Your query string contains the snippet `... $return_nameSET ...`, which has no whitespace before `SET`, so the query will fail to parse properly. You can actually see this issue in the query shown by the error message.\r\n\r\n3. For efficiency and to avoid unintentional matches, you should use the node label `Message` to qualify `n`. That is, `MATCH (n:Message)` instead of `MATCH (n)`.\r\n\r\nHere is a corrected version of your query:\r\n\r\n    query = (\r\n        &quot;MATCH (n:Message) WHERE n.return_name = $return_name &quot;\r\n        &quot;SET n.profile_id = $new_profile_id, &quot;\r\n        &quot;    n.message = $new_message, &quot;\r\n        &quot;    n.processing_flag = $new_processing_flag &quot;\r\n    )",
          "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77211803#77211803",
          "title": "How to update the existing nodes in neo4j using python"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 2445,
                "user_id": 21144042,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/4SIEF.jpg?s=256&g=1",
                "display_name": "Diego Borba",
                "link": "https://stackoverflow.com/users/21144042/diego-borba"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1696250562,
              "post_id": 77212219,
              "comment_id": 136125057,
              "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77212219#comment136125057_77212219"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 1,
            "user_id": 22214354,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/96faa0d16e180bc41836018844e66c62?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "Jonathan Giffard",
            "link": "https://stackoverflow.com/users/22214354/jonathan-giffard"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1696192079,
          "creation_date": 1696192079,
          "answer_id": 77212219,
          "question_id": 77206137,
          "share_link": "https://stackoverflow.com/a/77212219",
          "body_markdown": "As well as the other guidance already given, you might want to try using .execute_query with the Python driver. See https://neo4j.com/docs/python-manual/current/query-simple/ for more details",
          "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python/77212219#77212219",
          "title": "How to update the existing nodes in neo4j using python"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 19443460,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AATXAJww51pxUl9Y4zOSRkBlvASDGz9bXc4RF8ZJ-5VnCA=k-s256",
        "display_name": "Kevin Paul Babu",
        "link": "https://stackoverflow.com/users/19443460/kevin-paul-babu"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 80,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 3,
      "score": 0,
      "last_activity_date": 1696192079,
      "creation_date": 1696060493,
      "question_id": 77206137,
      "share_link": "https://stackoverflow.com/q/77206137",
      "body_markdown": "I&#39;ve successfully managed to display and create nodes in Neo4j using Python, but I&#39;m struggling to update nodes in Neo4j using Python. I&#39;ve attempted to seek assistance from ChatGPT, but I&#39;m still unable to figure out how to update nodes in Neo4j\r\nThis is the python code\r\n```\r\nfrom neo4j import GraphDatabase\r\n\r\n\r\nclass Neo4jConnector:\r\n    def __init__(self, uri, user, password):\r\n        self._driver = GraphDatabase.driver(uri, auth=(user, password))\r\n\r\n    def close(self):\r\n        self._driver.close()\r\n\r\n    @property\r\n    def driver(self):\r\n        return self._driver\r\n\r\n\r\ndef create_node(neo4j_conn, sender, receiver, message, profile_id, rule_type, processing_flag, return_name):\r\n    query = (\r\n        &quot;CREATE (n:Message {sender: $sender, receiver: $receiver, &quot;\r\n        &quot;message: $message, profile_id: $profile_id, rule_type: $rule_type, &quot;\r\n        &quot;processing_flag: $processing_flag,return_name:$return_name})&quot;\r\n    )\r\n\r\n    with neo4j_conn._driver.session() as session:\r\n        session.write_transaction(lambda tx: tx.run(query, sender=sender, receiver=receiver,\r\n                                                    message=message, profile_id=profile_id,\r\n                                                    rule_type=rule_type, processing_flag=processing_flag,\r\n                                                    return_name=return_name))\r\n\r\n\r\ndef display_nodes(neo4j_conn):\r\n    query = &quot;MATCH (n:Message) RETURN n&quot;\r\n\r\n    with neo4j_conn._driver.session() as session:\r\n        result = session.run(query)\r\n        for record in result:\r\n            node = record[&quot;n&quot;]\r\n            print(node)\r\n\r\n\r\ndef get_nodes_by_processing_flag(tx, processing_flag):\r\n    query = (\r\n        &quot;MATCH (node:Message) &quot;\r\n        &quot;WHERE node.processing_flag = $processing_flag &quot;\r\n        &quot;RETURN node&quot;\r\n    )\r\n    result = []\r\n    for record in tx.run(query, processing_flag=processing_flag):\r\n        result.append(record[&quot;node&quot;])\r\n    return result\r\n\r\n\r\ndef update_node(tx, new_profile_id, new_message, new_processing_flag, return_name):\r\n    query = (\r\n        &quot;MATCH (n) WHERE return_name(n) = $return_name&quot;\r\n        &quot;SET n.profile_id = $new_profile_id, &quot;\r\n        &quot;    n.message = $new_message, &quot;\r\n        &quot;    n.processing_flag = $new_processing_flag &quot;\r\n    )\r\n    tx.run(query,  new_profile_id=new_profile_id, new_message=new_message,\r\n           new_processing_flag=new_processing_flag, return_name=return_name)\r\n\r\n\r\ndef main():\r\n    uri = &quot;bolt://localhost:7687&quot;  # Update with your Neo4j server URI\r\n    user = &quot;admin&quot;  # Update with your Neo4j username\r\n    password = &quot;password&quot;  # Update with your Neo4j password\r\n\r\n    connector = Neo4jConnector(uri, user, password)\r\n\r\n    while True:\r\n        print(&quot;1. Create Node&quot;)\r\n        print(&quot;2. Display Nodes&quot;)\r\n        print(&quot;3. Get Nodes by Processing Flag&quot;)\r\n        print(&quot;4. Update Node&quot;)\r\n        print(&quot;5. Quit&quot;)\r\n\r\n        choice = input(&quot;Enter your choice: &quot;)\r\n\r\n        if choice == &quot;1&quot;:\r\n            sender = input(&quot;Enter sender: &quot;)\r\n            receiver = input(&quot;Enter receiver: &quot;)\r\n            message = input(&quot;Enter message: &quot;)\r\n            profile_id = input(&quot;Enter profile_id: &quot;)\r\n            rule_type = input(&quot;Enter rule_type: &quot;)\r\n            processing_flag = input(&quot;Enter processing_flag: &quot;)\r\n            return_name = sender + rule_type + receiver\r\n            create_node(connector, sender, receiver, message, profile_id, rule_type, processing_flag, return_name)\r\n\r\n        elif choice == &quot;2&quot;:\r\n            display_nodes(connector)\r\n\r\n        elif choice == &quot;3&quot;:\r\n            user_input = input(&quot;Enter the processing flag: &quot;)\r\n            with connector._driver.session() as session:\r\n                nodes = session.read_transaction(get_nodes_by_processing_flag, user_input)\r\n\r\n            if nodes:\r\n                print(f&quot;Nodes with processing flag &#39;{user_input}&#39;:&quot;)\r\n                for node in nodes:\r\n                    print(node)\r\n            else:\r\n                print(f&quot;No nodes found with processing flag &#39;{user_input}&#39;.&quot;)\r\n\r\n        elif choice == &quot;4&quot;:\r\n            return_name = input(&quot;Enter return name: &quot;)\r\n            new_profile_id = input(&quot;Enter new profile_id: &quot;)\r\n            new_message = input(&quot;Enter new message: &quot;)\r\n            new_processing_flag = input(&quot;Enter new processing_flag: &quot;)\r\n            with connector.driver.session() as session:\r\n                session.write_transaction(update_node,  new_profile_id, new_message,\r\n                                          new_processing_flag, return_name)\r\n            print(&quot;Node updated successfully.&quot;)\r\n\r\n        elif choice == &quot;5&quot;:\r\n            connector.close()\r\n            break\r\n\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    main()\r\n\r\n```\r\n\r\n\r\nThis was the error from the code\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\main.py&quot;, line 120, in &lt;module&gt;\r\n    main()\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\main.py&quot;, line 110, in main\r\n    session.write_transaction(update_node,  new_profile_id, new_message,\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_meta.py&quot;, line 209, in inner\r\n    return f(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\session.py&quot;, line 791, in write_transaction\r\n    return self._run_transaction(\r\n           ^^^^^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\session.py&quot;, line 550, in _run_transaction\r\n    result = transaction_function(tx, *args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\main.py&quot;, line 59, in update_node\r\n    tx.run(query,  new_profile_id=new_profile_id, new_message=new_message,\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\transaction.py&quot;, line 164, in run\r\n    result._tx_ready_run(query, parameters)\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\result.py&quot;, line 116, in _tx_ready_run\r\n    self._run(query, parameters, None, None, None, None, None, None)\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\result.py&quot;, line 166, in _run\r\n    self._attach()\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\work\\result.py&quot;, line 274, in _attach\r\n    self._connection.fetch_message()\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_common.py&quot;, line 180, in inner\r\n    func(*args, **kwargs)\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_bolt.py&quot;, line 851, in fetch_message\r\n    res = self._process_message(tag, fields)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_bolt5.py&quot;, line 376, in _process_message\r\n    response.on_failure(summary_metadata or {})\r\n  File &quot;C:\\Users\\kevin\\PycharmProjects\\pyneo4j\\venv\\Lib\\site-packages\\neo4j\\_sync\\io\\_common.py&quot;, line 247, in on_failure\r\n    raise Neo4jError.hydrate(**metadata)\r\nneo4j.exceptions.CypherSyntaxError: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input &#39;n&#39;: expected\r\n  &quot;!=&quot;\r\n  &quot;%&quot;\r\n  &quot;*&quot;\r\n  &quot;+&quot;\r\n  &quot;-&quot;\r\n  &quot;.&quot;\r\n  &quot;/&quot;\r\n  &quot;:&quot;\r\n  &quot;&lt;&quot;\r\n  &quot;&lt;=&quot;\r\n  &quot;&lt;&gt;&quot;\r\n  &quot;=&quot;\r\n  &quot;=~&quot;\r\n  &quot;&gt;&quot;\r\n  &quot;&gt;=&quot;\r\n  &quot;AND&quot;\r\n  &quot;CALL&quot;\r\n  &quot;CONTAINS&quot;\r\n  &quot;CREATE&quot;\r\n  &quot;DELETE&quot;\r\n  &quot;DETACH&quot;\r\n  &quot;ENDS&quot;\r\n  &quot;FOREACH&quot;\r\n  &quot;IN&quot;\r\n  &quot;IS&quot;\r\n  &quot;LOAD&quot;\r\n  &quot;MATCH&quot;\r\n  &quot;MERGE&quot;\r\n  &quot;OPTIONAL&quot;\r\n  &quot;OR&quot;\r\n  &quot;REMOVE&quot;\r\n  &quot;RETURN&quot;\r\n  &quot;SET&quot;\r\n  &quot;STARTS&quot;\r\n  &quot;UNION&quot;\r\n  &quot;UNWIND&quot;\r\n  &quot;USE&quot;\r\n  &quot;WITH&quot;\r\n  &quot;XOR&quot;\r\n  &quot;[&quot;\r\n  &quot;^&quot;\r\n  &lt;EOF&gt; (line 1, column 50 (offset: 49))\r\n&quot;MATCH (n) WHERE return_name(n) = $return_nameSET n.profile_id = $new_profile_id,     n.message = $new_message,     n.processing_flag = $new_processing_flag&quot;\r\n                                                  ^}\r\n```\r\n ",
      "link": "https://stackoverflow.com/questions/77206137/how-to-update-the-existing-nodes-in-neo4j-using-python",
      "title": "How to update the existing nodes in neo4j using python"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc", "apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 214,
                "user_id": 8511812,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
                "display_name": "v2belleville",
                "link": "https://stackoverflow.com/users/8511812/v2belleville"
              },
              "reply_to_user": {
                "reputation": 299,
                "user_id": 2167741,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/edb162a96cd10ea3e2185fa6976a322c?s=256&d=identicon&r=PG",
                "display_name": "user2167741",
                "link": "https://stackoverflow.com/users/2167741/user2167741"
              },
              "edited": false,
              "score": 1,
              "creation_date": 1695929679,
              "post_id": 77197477,
              "comment_id": 136092859,
              "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate/77197477#comment136092859_77197477"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1695926475,
          "creation_date": 1695926475,
          "answer_id": 77197477,
          "question_id": 77196825,
          "share_link": "https://stackoverflow.com/a/77197477",
          "body_markdown": "in the split, the single quotes around the coma are messing up with opening and closing the 3 strings for periodic iterate\r\n\r\nuse double quotes and you should be good...",
          "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate/77197477#77197477",
          "title": "Splitting string with apoc.periodic.iterate"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 299,
            "user_id": 2167741,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/edb162a96cd10ea3e2185fa6976a322c?s=256&d=identicon&r=PG",
            "display_name": "user2167741",
            "link": "https://stackoverflow.com/users/2167741/user2167741"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1695926482,
          "creation_date": 1695926482,
          "answer_id": 77197478,
          "question_id": 77196825,
          "share_link": "https://stackoverflow.com/a/77197478",
          "body_markdown": "This needs a double quote for the split function. Namely,\r\nsplit(csv.patients,&quot;,&quot;) as pts\r\n\r\n",
          "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate/77197478#77197478",
          "title": "Splitting string with apoc.periodic.iterate"
        }
      ],
      "owner": {
        "reputation": 299,
        "user_id": 2167741,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/edb162a96cd10ea3e2185fa6976a322c?s=256&d=identicon&r=PG",
        "display_name": "user2167741",
        "link": "https://stackoverflow.com/users/2167741/user2167741"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 41,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77197477,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1695926482,
      "creation_date": 1695919180,
      "question_id": 77196825,
      "share_link": "https://stackoverflow.com/q/77196825",
      "body_markdown": "I am encountering errors when including a function to split a string inside apoc.periodic.iterate in Neo4j. Namely, here is my query which runs fine:\r\n\r\n```\r\nWITH collect(file.URL) AS fileURLs\r\nUNWIND fileURLs AS fileURL\r\nCALL apoc.periodic.iterate(\r\n&#39;\r\nCALL apoc.load.csv($url) YIELD map AS csv\r\nRETURN csv\r\n&#39;,\r\n&#39;\r\nWITH round(toFloat(csv.dendrogram_height),3,&quot;HALF_UP&quot;) as height, csv.gene_name as gene, csv.event_no as event, csv.samples as sp, round(toFloat(csv.median_ge),3,&quot;HALF_UP&quot;) as me, csv.no_of_samples as no_s, csv.leaf_status as leaf, csv.patients as pts, csv.no_of_uniq_patients as no_pt, round((toFloat(csv.log2fc)),3,&quot;HALF_UP&quot;) as log2, round(toFloat(csv.padj_deseq2),3,&quot;HALF_UP&quot;) as padj, csv.up_or_down as up\r\nCREATE (:Expression:Primary {name: gene, event_no: event, dendrogram_height: height, samples: sp, median_exp: me, no_of_samples: no_s, leaf_status: leaf, patients: pts, no_of_unique_patients: no_pt, log2fc: log2, padj_deseq2: padj, up_or_down: up});\r\n&#39;,\r\n{batchSize:10000,parallel:true,params:{url:fileURL}}) YIELD batches, total\r\nRETURN batches, total;\r\n```\r\n\r\nBut when I include the function ```split``` (or ```apoc.text.split``` for that matter) in the ```WITH``` statement, namely,\r\n\r\n```\r\nMATCH (file:File) WITH file\r\nWITH collect(file.URL) AS fileURLs\r\nUNWIND fileURLs AS fileURL\r\nCALL apoc.periodic.iterate(\r\n&#39;\r\nCALL apoc.load.csv($url) YIELD map AS csv\r\nRETURN csv\r\n&#39;,\r\n&#39;\r\nWITH round(toFloat(csv.dendrogram_height),3,&quot;HALF_UP&quot;) as height, csv.gene_name as gene, csv.event_no as event, csv.samples as sp, round(toFloat(csv.median_ge),3,&quot;HALF_UP&quot;) as me, csv.no_of_samples as no_s, csv.leaf_status as leaf, split(csv.patients,&#39;,&#39;) as pts, csv.no_of_uniq_patients as no_pt, round((toFloat(csv.log2fc)),3,&quot;HALF_UP&quot;) as log2, round(toFloat(csv.padj_deseq2),3,&quot;HALF_UP&quot;) as padj, csv.up_or_down as up\r\nCREATE (:Expression:Primary {name: gene, event_no: event, dendrogram_height: height, samples: sp, median_exp: me, no_of_samples: no_s, leaf_status: leaf, patients: pts, no_of_unique_patients: no_pt, log2fc: log2, padj_deseq2: padj, up_or_down: up});\r\n&#39;,\r\n{batchSize:10000,parallel:true,params:{url:fileURL}}) YIELD batches, total\r\nRETURN batches, total;\r\n\r\n```\r\nI get an error saying:\r\n\r\n```\r\n\r\nProcedure call provides too many arguments: got 4 expected no more than 3.\r\n\r\nProcedure apoc.periodic.iterate has signature: apoc.periodic.iterate(cypherIterate :: STRING?, cypherAction :: STRING?, config :: MAP?) :: batches :: INTEGER?, total :: INTEGER?, timeTaken :: INTEGER?, committedOperations :: INTEGER?, failedOperations :: INTEGER?, failedBatches :: INTEGER?, retries :: INTEGER?, errorMessages :: MAP?, batch :: MAP?, operations :: MAP?, wasTerminated :: BOOLEAN?, failedParams :: MAP?, updateStatistics :: MAP?\r\nmeaning that it expects at least 3 arguments of types STRING?, STRING?, MAP?\r\nDescription: Runs the second statement for each item returned by the first statement.\r\nThis procedure returns the number of batches and the total number of processed rows. (line 4, column 1 (offset: 90))\r\n&quot;CALL apoc.periodic.iterate(&quot;\r\n ^\r\n```\r\n\r\nThe only difference is the ```split``` function in ```split(csv.patients,&#39;,&#39;)``` than ```csv.patients``` in the second query chunk.\r\n\r\nHow to resolve this? Thanks.",
      "link": "https://stackoverflow.com/questions/77196825/splitting-string-with-apoc-periodic-iterate",
      "title": "Splitting string with apoc.periodic.iterate"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 13,
                "user_id": 22646786,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ef3d5eaec4d8deb1d085700c8b7e1407?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "Lisvar27",
                "link": "https://stackoverflow.com/users/22646786/lisvar27"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695912574,
              "post_id": 77191126,
              "comment_id": 136089745,
              "link": "https://stackoverflow.com/questions/77190279/grouping-cypher-query-results-by-direct-relationships/77191126#comment136089745_77191126"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "last_editor": {
            "reputation": 214,
            "user_id": 8511812,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/66ycQ.jpg?s=256&g=1",
            "display_name": "v2belleville",
            "link": "https://stackoverflow.com/users/8511812/v2belleville"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1695852946,
          "last_edit_date": 1695852946,
          "creation_date": 1695851923,
          "answer_id": 77191126,
          "question_id": 77190279,
          "share_link": "https://stackoverflow.com/a/77191126",
          "body_markdown": "your description and your example are not exactly the same : you say &quot;previous and next node(s) of a given node&quot; and your example has two sets : next and after next\r\n\r\ngiven the following nodes\r\n\r\n    create (:Person {name:&quot;H&quot;})-[:FOLLOWS]-&gt;(:Person {name:&quot;G&quot;})-[:FOLLOWS]-&gt;(:Person {name:&quot;E&quot;})-[:FOLLOWS]-&gt;(:Person {name:&quot;D&quot;});\r\n    match (g:Person {name:&quot;G&quot;}) merge (g)-[:FOLLOWS]-&gt;(:Person {name:&quot;F&quot;})\r\n\r\n[![screenprint of nodes created][1]][1]\r\n\r\nhere is a possible query\r\n\r\n    match (prev:Person)-[:FOLLOWS]-&gt;(p:Person {name:&quot;G&quot;})-[:FOLLOWS]-&gt;(next:Person)\r\n    optional match (next)-[:FOLLOWS]-&gt;(next2:Person)\r\n    return collect(distinct prev.name),p.name,collect(distinct next.name),collect(distinct next2.name)\r\n\r\n[![query result][2]][2]\r\n\r\nhere is the other query\r\n\r\n[![other query and result][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IDjCk.png\r\n  [2]: https://i.stack.imgur.com/4LmZT.png\r\n  [3]: https://i.stack.imgur.com/AltLe.png",
          "link": "https://stackoverflow.com/questions/77190279/grouping-cypher-query-results-by-direct-relationships/77191126#77191126",
          "title": "Grouping Cypher query results by direct relationships"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "last_editor": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": true,
          "score": 0,
          "last_activity_date": 1695901258,
          "last_edit_date": 1695901258,
          "creation_date": 1695855543,
          "answer_id": 77191320,
          "question_id": 77190279,
          "share_link": "https://stackoverflow.com/a/77191320",
          "body_markdown": "From your question, there looks to be two types of solution. \r\n\r\nTo show what I mean I&#39;ll use this slightly more complicated graph that includes a merging of `FOLLOWS` downstream from `H`:\r\n```\r\n                                ┌───┐\r\n                          ┌────▶│ J │\r\n                          │     └───┘\r\n┌───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐\r\n│ H │──▶│ G │──▶│ E │──▶│ D │──▶│ I │\r\n└───┘   └───┘   └───┘   └───┘   └───┘\r\n          │               ▲\r\n          │               │\r\n          │     ┌───┐   ┌───┐   ┌───┐\r\n          └────▶│ F │──▶│ L │──▶│ K │\r\n                └───┘   └───┘   └───┘\r\n```\r\nTo group every path from `Person` with `name = &#39;H&#39;` by length, showing the same `Person` more than once (because there is more than one path from, for example, `H` to `D`), use this:\r\n```\r\nMATCH p = (:Person {name: &#39;H&#39;})-[:FOLLOWS*0..]-&gt;(e:Person)\r\nWITH length(p) AS l, collect(e.name) AS people\r\nRETURN collect(people) AS result\r\n```\r\nResult:\r\n```\r\n[[&quot;H&quot;], [&quot;G&quot;], [&quot;E&quot;, &quot;F&quot;], [&quot;D&quot;, &quot;L&quot;], [&quot;I&quot;, &quot;J&quot;, &quot;D&quot;, &quot;K&quot;], [&quot;I&quot;, &quot;J&quot;]]\r\n```\r\nIf instead you want each person to appear once, you can use the `shortestPath` function like so:\r\n```\r\nMATCH p = shortestPath((:Person {name: &#39;H&#39;})-[:FOLLOWS*0..]-&gt;(e:Person))\r\nWITH length(p) AS len, collect(e.name) AS people\r\nRETURN collect(people) AS result\r\n```\r\nResult:\r\n```\r\n[[&quot;H&quot;], [&quot;G&quot;], [&quot;E&quot;, &quot;F&quot;], [&quot;D&quot;, &quot;L&quot;], [&quot;K&quot;, &quot;I&quot;, &quot;J&quot;]]\r\n```",
          "link": "https://stackoverflow.com/questions/77190279/grouping-cypher-query-results-by-direct-relationships/77191320#77191320",
          "title": "Grouping Cypher query results by direct relationships"
        }
      ],
      "owner": {
        "reputation": 13,
        "user_id": 22646786,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/ef3d5eaec4d8deb1d085700c8b7e1407?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Lisvar27",
        "link": "https://stackoverflow.com/users/22646786/lisvar27"
      },
      "last_editor": {
        "reputation": 64800,
        "user_id": 974731,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
        "display_name": "cybersam",
        "link": "https://stackoverflow.com/users/974731/cybersam"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 56,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77191320,
      "answer_count": 2,
      "score": 1,
      "last_activity_date": 1695901258,
      "creation_date": 1695841952,
      "last_edit_date": 1695864171,
      "question_id": 77190279,
      "share_link": "https://stackoverflow.com/q/77190279",
      "body_markdown": "Given the following graph (where all relationships have the `FOLLOWS` type), how can we get the results such that they are grouped according to previous and next node(s) of a given node?\r\n\r\n```\r\n H-&gt;G-&gt;E-&gt;D\r\n     -&gt;F\r\n```\r\n\r\n- Where H follows G \r\n- Where G follows both E &amp; F. \r\n- E follows D\r\n\r\nSo given some property of G, expecting results in the form:\r\n`[{H}, {G}, {E, F}, {D}]`\r\n\r\nTried:\r\n```\r\nMATCH (prev:Person)&lt;-[:FOLLOWS *0..]-(p:Person)&lt;-[:FOLLOWS *0..]-(next:Person) WHERE p.name =&#39;G&#39; RETURN collect(prev), p, collect(next) as result\r\n```\r\n\r\n",
      "link": "https://stackoverflow.com/questions/77190279/grouping-cypher-query-results-by-direct-relationships",
      "title": "Grouping Cypher query results by direct relationships"
    },
    {
      "tags": ["php", "neo4j", "cypher", "neo4jphp"],
      "comments": [
        {
          "owner": {
            "reputation": 15831,
            "user_id": 3986005,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/kUYP4.jpg?s=256&g=1",
            "display_name": "KIKO Software",
            "link": "https://stackoverflow.com/users/3986005/kiko-software"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695555011,
          "post_id": 77166834,
          "comment_id": 136037442,
          "link": "https://stackoverflow.com/questions/77166834/how-can-i-translate-this-neo4j-cypher-query-to-a-php-cypher-dsl#comment136037442_77166834"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 194,
            "user_id": 7513161,
            "user_type": "registered",
            "profile_image": "https://lh5.googleusercontent.com/-dDYMwbT4jFQ/AAAAAAAAAAI/AAAAAAAAAB8/IeytunG-HWY/photo.jpg?sz=256",
            "display_name": "Xxmarijnw",
            "link": "https://stackoverflow.com/users/7513161/xxmarijnw"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1696109794,
          "creation_date": 1696109794,
          "answer_id": 77208534,
          "question_id": 77166834,
          "share_link": "https://stackoverflow.com/a/77208534",
          "body_markdown": "The first thing you need to do is create all the nodes that you want to match on, as well as the parameters you want to use, like so:\r\n\r\n```php\r\n$a = node(&quot;Resource&quot;); // (a:Resource)\r\n$b = node(&quot;Resource&quot;); // (b:Resource)\r\n\r\n$uri = parameter(&quot;uri&quot;); // $uri\r\n$object = parameter(&quot;object&quot;); // $object\r\n```\r\n\r\nThe `node` function takes as its only argument the label of the node and the `parameter` function the name of the parameter. Next, you can start to compose your query. You can start a new query using the `query` function, like so:\r\n\r\n```php\r\n$query = query();\r\n```\r\n\r\nThis returns a `Query` object, which has a number of methods to add new clauses to your query, such as `match`, `set`, `where` and `create`. These correspond to the clauses that Cypher offers.\r\n\r\nWe start by matching on the nodes `$a` and `$b`:\r\n\r\n```php\r\n$query = query() // Start a new query\r\n    -&gt;match([$a, $b]) // Match on both &quot;a&quot; and &quot;b&quot;\r\n    ...\r\n```\r\n\r\nNext, we want to create the condition to match on. php-cypher-dsl comes with a builder pattern for creating such expressions:\r\n\r\n```php\r\n    ...\r\n    -&gt;where($a-&gt;property(&quot;uri&quot;)-&gt;equals($uri)-&gt;and($b-&gt;property(&quot;uri&quot;)-&gt;equals($object))\r\n    ...\r\n```\r\n\r\nNext, before we create our `CREATE` clause, we need to create a new variable `$r` that gets shared between our `CREATE` and `RETURN` clause:\r\n\r\n```php\r\n$r = variable(); // Create a new variable\r\n```\r\n\r\nTo create the `CREATE` clause, we need to perform some trickery to remove the `:Resource` label from our nodes again. This part of the API still needs some improvement. We can get a new node with the same variable by using `node()-&gt;withVariable($a-&gt;getVariable())`. All together, that looks like:\r\n\r\n```php\r\n    ...\r\n    -&gt;create(node()-&gt;withVariable($a-&gt;getVariable())-&gt;relationshipTo(node()-&gt;withVariable($b-&gt;getVariable()), type: $propertyUri, name: $r))\r\n    ...\r\n```\r\n\r\nFinally, we can return the value we want:\r\n\r\n```php\r\n    ...\r\n    -&gt;returning(Procedure::raw(&#39;type&#39;, $r)) // The &quot;type&quot; function is not implemented natively, so we use raw\r\n    -&gt;toQuery(); // Convert the query to a string\r\n```\r\n\r\nAll put together, the code looks like this:\r\n\r\n```php\r\nuse WikibaseSolutions\\CypherDSL\\Expressions\\Procedures\\Procedure;\r\nuse function WikibaseSolutions\\CypherDSL\\node;\r\nuse function WikibaseSolutions\\CypherDSL\\parameter;\r\nuse function WikibaseSolutions\\CypherDSL\\query;\r\nuse function WikibaseSolutions\\CypherDSL\\variable;\r\n\r\n$propertyUri = &quot;http://example.com&quot;;\r\n\r\n$a = node(&quot;Resource&quot;);\r\n$b = node(&quot;Resource&quot;);\r\n$uri = parameter(&quot;uri&quot;);\r\n$object = parameter(&quot;object&quot;);\r\n$r = variable();\r\n\r\n$query = query()\r\n    -&gt;match([$a, $b])\r\n    -&gt;where($a-&gt;property(&quot;uri&quot;)-&gt;equals($uri)-&gt;and($b-&gt;property(&quot;uri&quot;)-&gt;equals($object)))\r\n    -&gt;create(node()-&gt;withVariable($a-&gt;getVariable())-&gt;relationshipTo(node()-&gt;withVariable($b-&gt;getVariable()), type: $propertyUri, name: $r))\r\n    -&gt;returning(Procedure::raw(&#39;type&#39;, $r))\r\n    -&gt;toQuery();\r\n```\r\n\r\nWhich I think is much *less* readable than using a normal query with variables. If you don&#39;t require complex logic to build queries (and only use pre-created queries, such as the one in your question), I&#39;d recommend you to not use this library.",
          "link": "https://stackoverflow.com/questions/77166834/how-can-i-translate-this-neo4j-cypher-query-to-a-php-cypher-dsl/77208534#77208534",
          "title": "How can I translate this Neo4j cypher query to a PHP cypher DSL?"
        }
      ],
      "owner": {
        "reputation": 67,
        "user_id": 2063104,
        "user_type": "registered",
        "accept_rate": 80,
        "profile_image": "https://i.stack.imgur.com/VqwTT.jpg?s=256&g=1",
        "display_name": "Victor Donet",
        "link": "https://stackoverflow.com/users/2063104/victor-donet"
      },
      "last_editor": {
        "reputation": 15831,
        "user_id": 3986005,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/kUYP4.jpg?s=256&g=1",
        "display_name": "KIKO Software",
        "link": "https://stackoverflow.com/users/3986005/kiko-software"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 60,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 1,
      "accepted_answer_id": 77208534,
      "answer_count": 1,
      "score": 1,
      "last_activity_date": 1696109794,
      "creation_date": 1695553893,
      "last_edit_date": 1695554694,
      "question_id": 77166834,
      "share_link": "https://stackoverflow.com/q/77166834",
      "body_markdown": "We are translating a Neo4j cypher query to PHP cypher DSL (Domain-Specific Language) using [the php-cypher-dsl library](https://github.com/neo4j-php/php-cypher-dsl/) to have more flexibility. \r\n\r\nWe struggle with this because the library&#39;s documentation is not really explaining how to use it in much detail. Given that we have a plain query in cypher Neo4j:\r\n\r\n    MATCH (a:Resource), (b:Resource) \r\n    WHERE a.uri = $uri AND b.uri = $object\r\n    CREATE (a)-[r:{$propertyUri}]-&gt;(b)\r\n    RETURN type(r)\r\n\r\n**How can we translate this Neo4j cypher query to PHP cypher DSL?**\r\n",
      "link": "https://stackoverflow.com/questions/77166834/how-can-i-translate-this-neo4j-cypher-query-to-a-php-cypher-dsl",
      "title": "How can I translate this Neo4j cypher query to a PHP cypher DSL?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": false,
          "score": 1,
          "last_activity_date": 1695430229,
          "last_edit_date": 1695430229,
          "creation_date": 1695429903,
          "answer_id": 77161264,
          "question_id": 77161091,
          "share_link": "https://stackoverflow.com/a/77161264",
          "body_markdown": "I see that the [commit](https://github.com/neo4j/neo4j/commit/6ffe6e48e7f3bc49ace6c1855a05ccc8a9123600) that added support for normalizing types has this comment:\r\n\r\n&gt; **Importer normalizes property types to match Cypher**\r\n&gt;\r\n&gt; Effectively meaning that a type, specified in some .csv header that says that a\r\n&gt; certain property should be of type e.g. &quot;short&quot; will be imported as\r\n&gt; type &quot;long&quot;. Basically all integer types will be imported and stored\r\n&gt; as long and floating point types will be imported and stored as\r\n&gt; double.\r\n&gt; \r\n&gt; This will be the default behaviour, but can be overridden for specific\r\n&gt; scenarios by providing &quot;--normalize-types=false&quot;\r\n\r\nI presume this means that if you do not normalize types, then any un-normalized data types will have to be converted to/from normalized types whenever you use Cypher. So, even though you may save on storage space, your Cypher queries will be slowed down.\r\n\r\nYou may want to test it both ways to see if this is true (and let us know).",
          "link": "https://stackoverflow.com/questions/77161091/neo4j-what-are-the-tradeoffs-of-normalize-types-false/77161264#77161264",
          "title": "neo4j: What are the tradeoffs of --normalize-types=false?"
        }
      ],
      "owner": {
        "reputation": 17446,
        "user_id": 162094,
        "user_type": "registered",
        "accept_rate": 42,
        "profile_image": "https://www.gravatar.com/avatar/f9d63598e5173aef56d778b6208e45fb?s=256&d=identicon&r=PG",
        "display_name": "Stuart Berg",
        "link": "https://stackoverflow.com/users/162094/stuart-berg"
      },
      "last_editor": {
        "reputation": 17446,
        "user_id": 162094,
        "user_type": "registered",
        "accept_rate": 42,
        "profile_image": "https://www.gravatar.com/avatar/f9d63598e5173aef56d778b6208e45fb?s=256&d=identicon&r=PG",
        "display_name": "Stuart Berg",
        "link": "https://stackoverflow.com/users/162094/stuart-berg"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 30,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1695430229,
      "creation_date": 1695424907,
      "last_edit_date": 1695425948,
      "question_id": 77161091,
      "share_link": "https://stackoverflow.com/q/77161091",
      "body_markdown": "The `neo4j-admin` tool can import data from CSV.  [One of the options][1] it takes is:\r\n\r\n[1]: https://neo4j.com/docs/operations-manual/4.4/tools/neo4j-admin/neo4j-admin-import/#import-tool-option-normalize-types\r\n\r\n&gt;\r\n&gt;\r\n&gt;`--normalize-types[=&lt;true/false&gt;]`\r\n&gt;\r\n&gt;    Determines whether or not to normalize property types to Cypher types, e.g. `int` becomes `long` and `float` becomes `double`.\r\n&gt;\r\n&gt;    Default: `true`\r\n\r\n\r\nIf I don&#39;t explicitly set `--normalize-types=false`, then the `neo4j-admin` tool produces messages like this:\r\n\r\n```\r\nProperty type of &#39;foo&#39; normalized from &#39;int&#39; --&gt; &#39;long&#39; in /path/to/my-nodes.csv\r\n```\r\n\r\n\r\nMy database has billions of properties, so I&#39;d like to save space (and RAM) if possible. I know that the integer properties fit within 32 bits, and I don&#39;t need 64-bit precision for floating-point properties.  (See [this reference][2] for the bit-width of each property type.)\r\n\r\n[2]: https://neo4j.com/docs/java-reference/4.4/java-embedded/property-values/\r\n\r\n### What are the tradeoffs of normalizing the types vs. not normalizing?\r\n\r\nFor example, do narrower types actually save space/RAM?  Are they somehow incompatible with Cypher queries?",
      "link": "https://stackoverflow.com/questions/77161091/neo4j-what-are-the-tradeoffs-of-normalize-types-false",
      "title": "neo4j: What are the tradeoffs of --normalize-types=false?"
    },
    {
      "tags": ["neo4j", "cypher"],
      "comments": [
        {
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695423235,
          "post_id": 77160928,
          "comment_id": 136027439,
          "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels#comment136027439_77160928"
        },
        {
          "owner": {
            "reputation": 119,
            "user_id": 2852481,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/87f30bbc18cc76aa21517857467ce676?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "I.F. Adams",
            "link": "https://stackoverflow.com/users/2852481/i-f-adams"
          },
          "reply_to_user": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695662721,
          "post_id": 77160928,
          "comment_id": 136051615,
          "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels#comment136051615_77160928"
        },
        {
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695668427,
          "post_id": 77160928,
          "comment_id": 136052608,
          "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels#comment136052608_77160928"
        },
        {
          "owner": {
            "reputation": 119,
            "user_id": 2852481,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/87f30bbc18cc76aa21517857467ce676?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "I.F. Adams",
            "link": "https://stackoverflow.com/users/2852481/i-f-adams"
          },
          "reply_to_user": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695669642,
          "post_id": 77160928,
          "comment_id": 136052787,
          "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels#comment136052787_77160928"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 119,
                "user_id": 2852481,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/87f30bbc18cc76aa21517857467ce676?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "I.F. Adams",
                "link": "https://stackoverflow.com/users/2852481/i-f-adams"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695662759,
              "post_id": 77161144,
              "comment_id": 136051622,
              "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels/77161144#comment136051622_77161144"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1695426466,
          "creation_date": 1695426466,
          "answer_id": 77161144,
          "question_id": 77160928,
          "share_link": "https://stackoverflow.com/a/77161144",
          "body_markdown": "You can create [APOC triggers](https://neo4j.com/docs/apoc/current/background-operations/triggers/) to perform additional processing whenever a node or relationship is created or updated.",
          "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels/77161144#77161144",
          "title": "Modifying cypher query with additional properties and labels"
        },
        {
          "comments": [
            {
              "owner": {
                "reputation": 119,
                "user_id": 2852481,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/87f30bbc18cc76aa21517857467ce676?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "I.F. Adams",
                "link": "https://stackoverflow.com/users/2852481/i-f-adams"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1697151851,
              "post_id": 77225280,
              "comment_id": 136247419,
              "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels/77225280#comment136247419_77225280"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 692,
            "user_id": 2258090,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/g8J8h.jpg?s=256&g=1",
            "display_name": "Finbar Good",
            "link": "https://stackoverflow.com/users/2258090/finbar-good"
          },
          "comment_count": 1,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1696364103,
          "creation_date": 1696364103,
          "answer_id": 77225280,
          "question_id": 77160928,
          "share_link": "https://stackoverflow.com/a/77225280",
          "body_markdown": "If you are allowing a string to be appended to the original query string before submitting, and there is a variable declared in the node, you can use the `SET` clause:\r\n```\r\nCREATE (newnode:testnode {tag_str: \\&quot;mytag\\&quot;})\r\nSET newnode.property1 = value1,\r\n    newnode.property2 = value2 ...\r\n```",
          "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels/77225280#77225280",
          "title": "Modifying cypher query with additional properties and labels"
        }
      ],
      "owner": {
        "reputation": 119,
        "user_id": 2852481,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/87f30bbc18cc76aa21517857467ce676?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "I.F. Adams",
        "link": "https://stackoverflow.com/users/2852481/i-f-adams"
      },
      "last_editor": {
        "reputation": 119,
        "user_id": 2852481,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/87f30bbc18cc76aa21517857467ce676?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "I.F. Adams",
        "link": "https://stackoverflow.com/users/2852481/i-f-adams"
      },
      "comment_count": 4,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 47,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "accepted_answer_id": 77225280,
      "answer_count": 2,
      "score": 0,
      "last_activity_date": 1696364103,
      "creation_date": 1695421153,
      "last_edit_date": 1695669702,
      "question_id": 77160928,
      "share_link": "https://stackoverflow.com/q/77160928",
      "body_markdown": "So I have a system whereby I will be handed in cypher queries to do specific operations (e.g. create a new node) as part of a pipeline. \r\n\r\nThe question I have, is that I would like to add additional properties and labels to this query that has been handed in to a process before it sends it off to the database (Neo4j) , but I would like to avoid a complex string parsing/update exercise.\r\n\r\nFor example, I may be given something like this:\r\n\r\n```CREATE (:testnode {tag_str: \\&quot;CgESpOVg\\&quot;})```\r\n\r\nBut I want to add additional system (i.e. source process outside of the databse) provided properties and labels to this node creation _before_ we hand it off to Neo4J.\r\n\r\nIs there a way to do this without having to modify the original query, but instead just &quot;bolting&quot; on to it at the end?\r\n\r\nAs an obviously nonworking example, something like as follows?\r\n\r\n```CREATE (newnode:testnode {tag_str: \\&quot;mytag\\&quot;}) + &lt;additional property foobar: usefuldata on variable new node&gt;```\r\n\r\nThe WITH clause sounds promising, but thus far I have not been able to make it work.\r\n\r\n\r\n\r\n ",
      "link": "https://stackoverflow.com/questions/77160928/modifying-cypher-query-with-additional-properties-and-labels",
      "title": "Modifying cypher query with additional properties and labels"
    },
    {
      "tags": ["neo4j", "cypher", "neo4j-apoc", "apoc"],
      "answers": [
        {
          "comments": [
            {
              "owner": {
                "reputation": 3624,
                "user_id": 3209523,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/yeaZC.jpg?s=256&g=1",
                "display_name": "canbax",
                "link": "https://stackoverflow.com/users/3209523/canbax"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695115288,
              "post_id": 77132469,
              "comment_id": 135977756,
              "link": "https://stackoverflow.com/questions/77132269/converting-an-integer-to-a-fixed-length-string-with-leading-zeros/77132469#comment135977756_77132469"
            },
            {
              "owner": {
                "reputation": 15053,
                "user_id": 18482310,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
                "display_name": "nimrod serok",
                "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
              },
              "reply_to_user": {
                "reputation": 3624,
                "user_id": 3209523,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/yeaZC.jpg?s=256&g=1",
                "display_name": "canbax",
                "link": "https://stackoverflow.com/users/3209523/canbax"
              },
              "edited": false,
              "score": 0,
              "creation_date": 1695115529,
              "post_id": 77132469,
              "comment_id": 135977807,
              "link": "https://stackoverflow.com/questions/77132269/converting-an-integer-to-a-fixed-length-string-with-leading-zeros/77132469#comment135977807_77132469"
            }
          ],
          "tags": [],
          "owner": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "last_editor": {
            "reputation": 15053,
            "user_id": 18482310,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/df7394b688d32bf80c57541db64ab530?s=256&d=identicon&r=PG&f=y&so-version=2",
            "display_name": "nimrod serok",
            "link": "https://stackoverflow.com/users/18482310/nimrod-serok"
          },
          "comment_count": 2,
          "down_vote_count": 0,
          "up_vote_count": 1,
          "is_accepted": true,
          "score": 1,
          "last_activity_date": 1695115498,
          "last_edit_date": 1695115498,
          "creation_date": 1695108468,
          "answer_id": 77132469,
          "question_id": 77132269,
          "share_link": "https://stackoverflow.com/a/77132469",
          "body_markdown": "Try:\r\n```\r\nRETURN apoc.number.format(125.4, &#39;0000.000&#39;) as value;\r\n```\r\nIt returns: `&quot;0125.400&quot;`\r\n\r\nOr to match your example:\r\n```\r\nRETURN apoc.number.format(3, &#39;00&#39;) as value;\r\n```\r\nreturns `&quot;03&quot;`",
          "link": "https://stackoverflow.com/questions/77132269/converting-an-integer-to-a-fixed-length-string-with-leading-zeros/77132469#77132469",
          "title": "Converting an integer to a fixed-length string with leading zeros"
        },
        {
          "tags": [],
          "owner": {
            "reputation": 12347,
            "user_id": 7371893,
            "user_type": "registered",
            "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=256&g=1",
            "display_name": "jose_bacoy",
            "link": "https://stackoverflow.com/users/7371893/jose-bacoy"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1695123110,
          "creation_date": 1695123110,
          "answer_id": 77134173,
          "question_id": 77132269,
          "share_link": "https://stackoverflow.com/a/77134173",
          "body_markdown": "The APOC function apoc.text.lpad will add &#39;0&#39; to the left of a string at a given width.\r\n\r\n    Ref:\r\n    https://neo4j.com/labs/apoc/4.3/overview/apoc.text/apoc.text.lpad/\r\n    \r\n    \r\n\r\n&gt; apoc.text.lpad(text,count,delim) YIELD value - left pad the string to\r\n&gt; the given width\r\n\r\n\r\nExample:\r\nRETURN apoc.text.lpad(&quot;3&quot;, 2, &quot;0&quot;) AS output;\r\n\r\n    ╒════════╕\r\n    │&quot;output&quot;│\r\n    ╞════════╡\r\n    │&quot;03&quot;    │\r\n    └────────┘",
          "link": "https://stackoverflow.com/questions/77132269/converting-an-integer-to-a-fixed-length-string-with-leading-zeros/77134173#77134173",
          "title": "Converting an integer to a fixed-length string with leading zeros"
        }
      ],
      "owner": {
        "reputation": 3624,
        "user_id": 3209523,
        "user_type": "registered",
        "profile_image": "https://i.stack.imgur.com/yeaZC.jpg?s=256&g=1",
        "display_name": "canbax",
        "link": "https://stackoverflow.com/users/3209523/canbax"
      },
      "comment_count": 0,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": true,
      "view_count": 60,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 3,
      "accepted_answer_id": 77132469,
      "answer_count": 2,
      "score": 3,
      "last_activity_date": 1695123110,
      "creation_date": 1695106416,
      "question_id": 77132269,
      "share_link": "https://stackoverflow.com/q/77132269",
      "body_markdown": "Ideally I want `toFixed` function in JavaScript https://www.w3schools.com/jsref/jsref_tofixed.asp I know I can do this with Cypher like below.\r\n\r\n    WITH 3 AS inputNumber\r\n    RETURN\r\n      CASE\r\n        WHEN inputNumber &lt; 10 THEN &#39;0&#39; + toString(inputNumber)\r\n        ELSE toString(inputNumber)\r\n      END AS formattedString;\r\n\r\nbut a simple APOC function would be better",
      "link": "https://stackoverflow.com/questions/77132269/converting-an-integer-to-a-fixed-length-string-with-leading-zeros",
      "title": "Converting an integer to a fixed-length string with leading zeros"
    },
    {
      "tags": ["neo4j", "cypher", "query-optimization"],
      "comments": [
        {
          "owner": {
            "reputation": 253543,
            "user_id": 112968,
            "user_type": "registered",
            "accept_rate": 68,
            "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=256&g=1",
            "display_name": "knittl",
            "link": "https://stackoverflow.com/users/112968/knittl"
          },
          "edited": false,
          "score": 0,
          "creation_date": 1695049085,
          "post_id": 77123006,
          "comment_id": 135968704,
          "link": "https://stackoverflow.com/questions/77123006/optimizing-a-cypher-query-in-neo4j#comment135968704_77123006"
        }
      ],
      "answers": [
        {
          "tags": [],
          "owner": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "last_editor": {
            "reputation": 64800,
            "user_id": 974731,
            "user_type": "registered",
            "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG",
            "display_name": "cybersam",
            "link": "https://stackoverflow.com/users/974731/cybersam"
          },
          "comment_count": 0,
          "down_vote_count": 0,
          "up_vote_count": 0,
          "is_accepted": false,
          "score": 0,
          "last_activity_date": 1695086103,
          "last_edit_date": 1695086103,
          "creation_date": 1694984678,
          "answer_id": 77123609,
          "question_id": 77123006,
          "share_link": "https://stackoverflow.com/a/77123609",
          "body_markdown": " 1. You should make sure you have an [index](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) (or [uniqueness constraint](https://neo4j.com/docs/cypher-manual/current/constraints/#_implications_on_indexes), if appropriate) on the `NodeID` property of the appropriate label(s). This will greatly speed up the queries for nodes with specific `NodeID` values.\r\n\r\n    For example, if every `Transaction` node node should have a unique `NodeID` value, create a uniqueness constraint (which will automatically create an index for you) like this:\r\n\r\n        CREATE CONSTRAINT Transaction_NodeID FOR (t:Transaction) REQUIRE t.NodeID IS UNIQUE\r\n\r\n 2. When you reuse an already-defined variable, just use its name instead of redefining it to any extent. This simplification can eliminate unnecessary additional work. In your query, ``(grade:`2547`:Grade:Transaction)`` should just be `(grade)`, and ``(LegalEntity:`2547`:LegalEntity:Transaction)``, should be `(LegalEntity)`.\r\n\r\n 3. You should pass [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) for the non-static parts of your query. That way, the server will only need to compile your query once, no matter how many times you call it with different parameter values.\r\n\r\n    This example shows how to refactor your query to use the parameters $gradeIds and $entIds, each of which must be a list of ids. In addition, this query also attempts to fix a bug in your query, where `LegalEntityDocument` was not defined. And it also fixes item #2, above.\r\n\r\n        MATCH (grade:Grade:`2547`:Transaction)-[vGrade:Version {Status: &quot;1&quot;}]-&gt;(grade)&lt;-[:Grade {Status: &quot;1&quot;}]-(n:User:`2547`:Transaction)\r\n        WHERE grade.NodeID IN $gradeIds\r\n        WITH n, grade, vGrade.Document as GradeDocument\r\n        MATCH (LegalEntity:LegalEntity:`2547`:Transaction)-[lGrade:Version {Status: &quot;1&quot;}]-&gt;(LegalEntity)&lt;-[:LegalEntity {Status: &quot;1&quot;}]-(n)\r\n        WHERE LegalEntity.NodeID IN $entIds\r\n        RETURN n, Grade, GradeDocument, LegalEntity, lGrade.Document AS LegalEntityDocument\r\n",
          "link": "https://stackoverflow.com/questions/77123006/optimizing-a-cypher-query-in-neo4j/77123609#77123609",
          "title": "Optimizing a Cypher query in Neo4j"
        }
      ],
      "owner": {
        "reputation": 23,
        "user_id": 22523452,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtcrIYxAUHFuLpGn4QhD4iig5CwEKNc42e5zRW8kHD52=k-s256",
        "display_name": "Garv",
        "link": "https://stackoverflow.com/users/22523452/garv"
      },
      "comment_count": 1,
      "delete_vote_count": 0,
      "close_vote_count": 0,
      "is_answered": false,
      "view_count": 64,
      "favorite_count": 0,
      "down_vote_count": 0,
      "up_vote_count": 0,
      "answer_count": 1,
      "score": 0,
      "last_activity_date": 1695086103,
      "creation_date": 1694973246,
      "question_id": 77123006,
      "share_link": "https://stackoverflow.com/q/77123006",
      "body_markdown": "I have this Cypher query that I have written.\r\n\r\n```\r\nMATCH (grade:Grade:`2547`:Transaction WHERE grade.NodeID=&quot;2547:12117:000:6839&quot; or grade.NodeID=&quot;2547:12117:000:6841&quot; or grade.NodeID=&quot;2547:12117:000:6840&quot; or grade.NodeID=&quot;2547:12117:000:6843&quot; or grade.NodeID=&quot;2547:12117:000:6842&quot; or grade.NodeID=&quot;2547:12117:000:6845&quot; or grade.NodeID=&quot;2547:12117:000:6844&quot; or grade.NodeID=&quot;2547:12117:000:6838&quot;)-[vGrade:Version\r\nWHERE vGrade.Status = &quot;1&quot;]-&gt;(grade:`2547`:Grade:Transaction)&lt;-[rGrade:Grade\r\nWHERE rGrade.Status = &quot;1&quot;]-(n:User:`2547`:Transaction)\r\nWITH n, grade, vGrade.Document as GradeDocument\r\nMATCH (LegalEntity:LegalEntity:`2547`:Transaction WHERE LegalEntity.NodeID=&quot;2547:12106:000:6167&quot; or LegalEntity.NodeID=&quot;2547:12106:000:5754&quot;)-[vLegalEntity:Version\r\nWHERE vLegalEntity.Status = &quot;1&quot;]-&gt;(LegalEntity:`2547`:LegalEntity:Transaction)&lt;-[rLegalEntity:LegalEntity\r\nWHERE rLegalEntity.Status = &quot;1&quot;]-(n:User:`2547`:Transaction)\r\nWITH n, grade, GradeDocument, LegalEntity, LegalEntityDocument\r\nRETURN n, Grade, GradeDocument, LegalEntity, LegalEntityDocument\r\n```\r\n\r\nI need to find all those User nodes that are related to a given set of Grade ids and LegalEntity ids. The output of the query is as required. but I would like to know if there is any way that the performance of this query could be improved, as this is one of the queries that I&#39;m generating. But the general structure of all the queries would be like this only. The number of nodeIDs in the MATCH statements in the above query are just an example, the actual number of the nodeIDs could vary, but that is being handled by the code and the resulting structure is same as above. Also, the number of match statements could also increase as per requirement.\r\n\r\n[![Example of how the relationship exists in neo4j](https://i.stack.imgur.com/Auwtl.png &quot;Example of how the relationship exists in neo4j&quot;)](https://i.stack.imgur.com/Auwtl.png)\r\n\r\nCurrently, the query is taking 10-14 seconds and the output is correct(result has a bit more than 9500 records). Is there any way in which the execution time of the query be decreased?",
      "link": "https://stackoverflow.com/questions/77123006/optimizing-a-cypher-query-in-neo4j",
      "title": "Optimizing a Cypher query in Neo4j"
    }
  ]
}
